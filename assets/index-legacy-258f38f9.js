!function(){function e(t){var n="function"==typeof Map?new Map:void 0;return e=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return function(e,t,n){if(s())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&d(o,n.prototype),o}(e,arguments,u(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),d(t,e)},e(t)}function t(){return t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},t.apply(this,arguments)}function n(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */n=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new N(r||[]);return i(a,"_invoke",{value:R(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f="suspendedStart",p="suspendedYield",v="executing",g="completed",y={};function m(){}function x(){}function w(){}var b={};c(b,s,(function(){return this}));var _=Object.getPrototypeOf,k=_&&_(_(A([])));k&&k!==r&&o.call(k,s)&&(b=k);var S=w.prototype=m.prototype=Object.create(b);function T(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(r,i,a,s){var u=h(e[r],e,i);if("throw"!==u.type){var l=u.arg,c=l.value;return c&&"object"==typeof c&&o.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(c).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var r;i(this,"_invoke",{value:function(e,o){function i(){return new t((function(t,r){n(e,o,t,r)}))}return r=r?r.then(i,i):i()}})}function R(t,n,r){var o=f;return function(i,a){if(o===v)throw new Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var u=E(s,r);if(u){if(u===y)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var l=h(t,n,r);if("normal"===l.type){if(o=r.done?g:p,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=g,r.method="throw",r.arg=l.arg)}}}function E(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=h(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function F(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(F,this),this.reset(!0)}function A(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(typeof t+" is not iterable")}return x.prototype=w,i(S,"constructor",{value:w,configurable:!0}),i(w,"constructor",{value:x,configurable:!0}),x.displayName=c(w,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},T(C.prototype),c(C.prototype,u,(function(){return this})),t.AsyncIterator=C,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new C(d(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(S),c(S,l,"Generator"),c(S,s,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=A,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function r(e,t,n,r,o,i,a){try{var s=e[i](a),u=s.value}catch(l){return void n(l)}s.done?t(u):Promise.resolve(u).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,u,"next",e)}function u(e){r(a,o,i,s,u,"throw",e)}s(void 0)}))}}function i(e,t,n){return t=u(t),a(e,s()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n))}function a(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,x(r.key),r)}}function f(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return(t=x(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function _(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}System.register(["./CoreExtension-legacy-bf37a876.js"],(function(r,s){"use strict";var d,h,g,x,_,k,S,T,C,R,E,F,I,N,A,L,P,z,M,O,B,D,j;return{setters:[function(e){d=e.a,h=e.E,g=e.g,x=e.m,_=e.b,k=e.i,S=e.c,T=e.d,C=e.T,R=e.e,E=e.f,F=e.h,I=e.j,N=e.S,A=e.k,L=e.B,P=e.l,z=e.n,M=e.o,O=e.W,B=e.p,D=e.q,j=e.C}],execute:function(){var r,U=document.createElement("style");U.textContent="html,body,*{padding:0;margin:0}video{position:absolute;top:0;left:0;z-index:2;outline:none}.center-element{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}\n",document.head.appendChild(U);var Y,W=function(e,t){return e===t},X=Symbol("solid-proxy"),G=Symbol("solid-track"),H={equals:W},$=Re,V=1,K=2,q={owned:null,cleanups:null,context:null,owner:null},Z={},Q=null,J=null,ee=null,te=null,ne=null,re=0;function oe(e,t){var n=ee,r=Q,o=0===e.length,i=void 0===t?r:t,a=o?q:{owned:null,cleanups:null,context:i?i.context:null,owner:i},s=o?e:function(){return e((function(){return he((function(){return Ne(a)}))}))};Q=a,ee=null;try{return Ce(s,!0)}finally{ee=n,Q=r}}function ie(e,t){var n={value:e,observers:null,observerSlots:null,comparator:(t=t?Object.assign({},H,t):H).equals||void 0};return[be.bind(n),function(e){return"function"==typeof e&&(e=e(n.value)),_e(n,e)}]}function ae(e,t,n){ke(Se(e,t,!0,V))}function se(e,t,n){ke(Se(e,t,!1,V))}function ue(e,t,n){$=Ee;var r=Se(e,t,!1,V);n&&n.render||(r.user=!0),ne?ne.push(r):ke(r)}function le(e,t,n){n=n?Object.assign({},H,n):H;var r=Se(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,ke(r),be.bind(r)}function ce(e,t,n){var r,o,i;2===arguments.length&&"object"==typeof t||1===arguments.length?(r=!0,o=e,i=t||{}):(r=e,o=t,i=n||{});var a=null,s=Z,u=!1,l="initialValue"in i,c="function"==typeof r&&le(r),d=new Set,h=w((i.storage||ie)(i.initialValue),2),f=h[0],p=h[1],v=w(ie(void 0),2),g=v[0],y=v[1],m=w(ie(void 0,{equals:!1}),2),x=m[0],_=m[1],k=w(ie(l?"ready":"unresolved"),2),S=k[0],T=k[1];function C(e,t,n,r){return a===e&&(a=null,void 0!==r&&(l=!0),e!==s&&t!==s||!i.onHydrated||queueMicrotask((function(){return i.onHydrated(r,{value:t})})),s=Z,function(e,t){Ce((function(){void 0===t&&p((function(){return e})),T(void 0!==t?"errored":l?"ready":"unresolved"),y(t);var n,r=b(d.keys());try{for(r.s();!(n=r.n()).done;){n.value.decrement()}}catch(t){r.e(t)}finally{r.f()}d.clear()}),!1)}(t,n)),t}function R(){var e=Y,t=f(),n=g();if(void 0!==n&&!a)throw n;return ee&&!ee.user&&e&&ae((function(){x(),a&&(e.resolved||d.has(e)||(e.increment(),d.add(e)))})),t}function E(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!1===e||!u){u=!1;var t=c?c():r;if(null!=t&&!1!==t){var n,i=s!==Z?s:he((function(){return o(t,{value:f(),refetching:e})}));return(n=i)&&"object"==typeof n&&"then"in n?(a=i,"value"in i?("success"===i.status?C(a,i.value,void 0,t):C(a,void 0,void 0,t),i):(u=!0,queueMicrotask((function(){return u=!1})),Ce((function(){T(l?"refreshing":"pending"),_()}),!1),i.then((function(e){return C(i,e,void 0,t)}),(function(e){return C(i,void 0,Ae(e),t)})))):(C(a,i,void 0,t),i)}C(a,he(f))}}return Object.defineProperties(R,{state:{get:function(){return S()}},error:{get:function(){return g()}},loading:{get:function(){var e=S();return"pending"===e||"refreshing"===e}},latest:{get:function(){if(!l)return R();var e=g();if(e&&!a)throw e;return f()}}}),c?ae((function(){return E(!1)})):E(!1),[R,{refetch:E,mutate:p}]}function de(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:W,n=new Map,r=Se((function(r){var o,i=e(),a=b(n.entries());try{for(a.s();!(o=a.n()).done;){var s=w(o.value,2),u=s[0],l=s[1];if(t(u,i)!==t(u,r)){var c,d=b(l.values());try{for(d.s();!(c=d.n()).done;){var h=c.value;h.state=V,h.pure?te.push(h):ne.push(h)}}catch(f){d.e(f)}finally{d.f()}}}}catch(f){a.e(f)}finally{a.f()}return i}),void 0,!0,V);return ke(r),function(e){var o,i=ee;i&&((o=n.get(e))?o.add(i):n.set(e,o=new Set([i])),ve((function(){o.delete(i),!o.size&&n.delete(e)})));return t(e,r.value)}}function he(e){if(null===ee)return e();var t=ee;ee=null;try{return e()}finally{ee=t}}function fe(e,t,n){var r,o=Array.isArray(e),i=n&&n.defer;return function(n){var a;if(o){a=Array(e.length);for(var s=0;s<e.length;s++)a[s]=e[s]()}else a=e();if(!i){var u=he((function(){return t(a,r,n)}));return r=a,u}i=!1}}function pe(e){ue((function(){return he(e)}))}function ve(e){return null===Q||(null===Q.cleanups?Q.cleanups=[e]:Q.cleanups.push(e)),e}function ge(){return Q}function ye(e){var t=ee,n=Q;return Promise.resolve().then((function(){ee=t,Q=n,Ce(e,!1),ee=Q=null}))}function me(e,t){var n=Symbol("context");return{id:n,Provider:ze(n),defaultValue:e}}function xe(e){return Q&&Q.context&&void 0!==Q.context[e.id]?Q.context[e.id]:e.defaultValue}function we(e){var t=le(e),n=le((function(){return Pe(t())}));return n.toArray=function(){var e=n();return Array.isArray(e)?e:null!=e?[e]:[]},n}function be(){var e=this;if(this.sources&&this.state)if(this.state===V)ke(this);else{var t=te;te=null,Ce((function(){return Fe(e)}),!1),te=t}if(ee){var n=this.observers?this.observers.length:0;ee.sources?(ee.sources.push(this),ee.sourceSlots.push(n)):(ee.sources=[this],ee.sourceSlots=[n]),this.observers?(this.observers.push(ee),this.observerSlots.push(ee.sources.length-1)):(this.observers=[ee],this.observerSlots=[ee.sources.length-1])}return this.value}function _e(e,t,n){var r=e.value;return e.comparator&&e.comparator(r,t)||(e.value=t,e.observers&&e.observers.length&&Ce((function(){for(var t=0;t<e.observers.length;t+=1){var n=e.observers[t],r=J&&J.running;r&&J.disposed.has(n),(r?n.tState:n.state)||(n.pure?te.push(n):ne.push(n),n.observers&&Ie(n)),r||(n.state=V)}if(te.length>1e6)throw te=[],new Error}),!1)),t}function ke(e){if(e.fn){Ne(e);var t=re;!function(e,t,n){var r,o=Q,i=ee;ee=Q=e;try{r=e.fn(t)}catch(a){return e.pure&&(e.state=V,e.owned&&e.owned.forEach(Ne),e.owned=null),e.updatedAt=n+1,Le(a)}finally{ee=i,Q=o}(!e.updatedAt||e.updatedAt<=n)&&(null!=e.updatedAt&&"observers"in e?_e(e,r):e.value=r,e.updatedAt=n)}(e,e.value,t)}}function Se(e,t,n){var r={fn:e,state:arguments.length>3&&void 0!==arguments[3]?arguments[3]:V,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:Q,context:Q?Q.context:null,pure:n};return null===Q||Q!==q&&(Q.owned?Q.owned.push(r):Q.owned=[r]),r}function Te(e){if(0!==e.state){if(e.state===K)return Fe(e);if(e.suspense&&he(e.suspense.inFallback))return e.suspense.effects.push(e);for(var t=[e];(e=e.owner)&&(!e.updatedAt||e.updatedAt<re);)e.state&&t.push(e);for(var n=t.length-1;n>=0;n--)if((e=t[n]).state===V)ke(e);else if(e.state===K){var r=te;te=null,Ce((function(){return Fe(e,t[0])}),!1),te=r}}}function Ce(e,t){if(te)return e();var n=!1;t||(te=[]),ne?n=!0:ne=[],re++;try{var r=e();return function(e){te&&(Re(te),te=null);if(e)return;var t=ne;ne=null,t.length&&Ce((function(){return $(t)}),!1)}(n),r}catch(o){n||(ne=null),te=null,Le(o)}}function Re(e){for(var t=0;t<e.length;t++)Te(e[t])}function Ee(e){var t,n=0;for(t=0;t<e.length;t++){var r=e[t];r.user?e[n++]=r:Te(r)}for(t=0;t<n;t++)Te(e[t])}function Fe(e,t){e.state=0;for(var n=0;n<e.sources.length;n+=1){var r=e.sources[n];if(r.sources){var o=r.state;o===V?r!==t&&(!r.updatedAt||r.updatedAt<re)&&Te(r):o===K&&Fe(r,t)}}}function Ie(e){for(var t=0;t<e.observers.length;t+=1){var n=e.observers[t];n.state||(n.state=K,n.pure?te.push(n):ne.push(n),n.observers&&Ie(n))}}function Ne(e){var t;if(e.sources)for(;e.sources.length;){var n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){var i=o.pop(),a=n.observerSlots.pop();r<o.length&&(i.sourceSlots[a]=r,o[r]=i,n.observerSlots[r]=a)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Ne(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Ae(e){return e instanceof Error?e:new Error("string"==typeof e?e:"Unknown error",{cause:e})}function Le(e){throw Ae(e)}function Pe(e){if("function"==typeof e&&!e.length)return Pe(e());if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++){var r=Pe(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function ze(e,t){return function(t){var n;return se((function(){return n=he((function(){return Q.context=y(y({},Q.context),{},m({},e,t.value)),we((function(){return t.children}))}))}),void 0),n}}var Me=Symbol("fallback");function Oe(e){for(var t=0;t<e.length;t++)e[t]()}function Be(e,t){return he((function(){return e(t||{})}))}function De(){return!0}var je={get:function(e,t,n){return t===X?n:e.get(t)},has:function(e,t){return t===X||e.has(t)},set:De,deleteProperty:De,getOwnPropertyDescriptor:function(e,t){return{configurable:!0,enumerable:!0,get:function(){return e.get(t)},set:De,deleteProperty:De}},ownKeys:function(e){return e.keys()}};function Ue(e){return(e="function"==typeof e?e():e)?e:{}}function Ye(){for(var e=0,t=this.length;e<t;++e){var n=this[e]();if(void 0!==n)return n}}function We(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=!1,o=0;o<t.length;o++){var i=t[o];r=r||!!i&&X in i,t[o]="function"==typeof i?(r=!0,le(i)):i}if(r)return new Proxy({get:function(e){for(var n=t.length-1;n>=0;n--){var r=Ue(t[n])[e];if(void 0!==r)return r}},has:function(e){for(var n=t.length-1;n>=0;n--)if(e in Ue(t[n]))return!0;return!1},keys:function(){for(var e=[],n=0;n<t.length;n++)e.push.apply(e,v(Object.keys(Ue(t[n]))));return v(new Set(e))}},je);for(var a={},s=Object.create(null),u=t.length-1;u>=0;u--){var l=t[u];if(l)for(var c=Object.getOwnPropertyNames(l),d=function(){var e=c[h];if("__proto__"===e||"constructor"===e)return 1;var t=Object.getOwnPropertyDescriptor(l,e);if(s[e]){var n=a[e];n&&(t.get?n.push(t.get.bind(l)):void 0!==t.value&&n.push((function(){return t.value})))}else s[e]=t.get?{enumerable:!0,configurable:!0,get:Ye.bind(a[e]=[t.get.bind(l)])}:void 0!==t.value?t:void 0},h=c.length-1;h>=0;h--)d()}for(var f={},p=Object.keys(s),g=p.length-1;g>=0;g--){var y=p[g],m=s[y];m&&m.get?Object.defineProperty(f,y,m):f[y]=m?m.value:void 0}return f}var Xe=function(e){return"Stale read from <".concat(e,">.")};function Ge(e){var t="fallback"in e&&{fallback:function(){return e.fallback}};return le(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[],o=[],i=[],a=0,s=t.length>1?[]:null;return ve((function(){return Oe(i)})),function(){var u,l,c=e()||[];return c[G],he((function(){var e,t,h,f,p,v,g,y,m,x=c.length;if(0===x)0!==a&&(Oe(i),i=[],r=[],o=[],a=0,s&&(s=[])),n.fallback&&(r=[Me],o[0]=oe((function(e){return i[0]=e,n.fallback()})),a=1);else if(0===a){for(o=new Array(x),l=0;l<x;l++)r[l]=c[l],o[l]=oe(d);a=x}else{for(h=new Array(x),f=new Array(x),s&&(p=new Array(x)),v=0,g=Math.min(a,x);v<g&&r[v]===c[v];v++);for(g=a-1,y=x-1;g>=v&&y>=v&&r[g]===c[y];g--,y--)h[y]=o[g],f[y]=i[g],s&&(p[y]=s[g]);for(e=new Map,t=new Array(y+1),l=y;l>=v;l--)m=c[l],u=e.get(m),t[l]=void 0===u?-1:u,e.set(m,l);for(u=v;u<=g;u++)m=r[u],void 0!==(l=e.get(m))&&-1!==l?(h[l]=o[u],f[l]=i[u],s&&(p[l]=s[u]),l=t[l],e.set(m,l)):i[u]();for(l=v;l<x;l++)l in h?(o[l]=h[l],i[l]=f[l],s&&(s[l]=p[l],s[l](l))):o[l]=oe(d);o=o.slice(0,a=x),r=c.slice(0)}return o}));function d(e){if(i[l]=e,s){var n=w(ie(l),2),r=n[0],o=n[1];return s[l]=o,t(c[l],r)}return t(c[l])}}}((function(){return e.each}),e.children,t||void 0))}function He(e){var t=e.keyed,n=le((function(){return e.when}),void 0,{equals:function(e,n){return t?e===n:!e==!n}});return le((function(){var r=n();if(r){var o=e.children;return"function"==typeof o&&o.length>0?he((function(){return o(t?r:function(){if(!he(n))throw Xe("Show");return e.when})})):o}return e.fallback}),void 0,void 0)}var $e,Ve=w(ie(null),2),Ke=Ve[0],qe=Ve[1],Ze=f((function e(t){p(this,e),m(this,"releaseCallback",void 0),this.releaseCallback=t})),Qe=function(e){function t(e,n){var r,o,a;return p(this,t),m(l(a=i(this,t,[e])),"textureMap",new Map),m(l(a),"zeroReferenceTextureSet",new Set),m(l(a),"options",void 0),a.options={textureCleanupIntervalMs:null!==(r=n.textureCleanupIntervalMs)&&void 0!==r?r:1e4,textureCleanupAgeThreadholdMs:null!==(o=n.textureCleanupAgeThreadholdMs)&&void 0!==o?o:6e4},setInterval((function(){var e,t=Date.now(),n=a.options.textureCleanupAgeThreadholdMs,r=b(a.zeroReferenceTextureSet);try{for(r.s();!(e=r.n()).done;){var o=e.value;t-o.lastUpdate>n&&(a.releaseCallback(o.id),a.textureMap.delete(o.id),a.zeroReferenceTextureSet.delete(o))}}catch(i){r.e(i)}finally{r.f()}}),a.options.textureCleanupIntervalMs),a}return c(t,e),f(t,[{key:"registerTexture",value:function(e){var t,n=null===(t=e.options)||void 0===t?void 0:t.id;if(d(n,"Texture must have an id to be registered"),!this.textureMap.has(n)){var r={id:n,nodeRefCount:0,lastUpdate:Date.now()};this.textureMap.set(n,r),this.zeroReferenceTextureSet.add(r)}}},{key:"incrementTextureRefCount",value:function(e){var t,n=null===(t=e.options)||void 0===t?void 0:t.id;d(n,"Texture must have an id to be registered");var r=this.textureMap.get(n);r||(this.registerTexture(e),r=this.textureMap.get(n)),d(r,"Texture must have been registered"),"SubTexture"===e.txType&&this.incrementTextureRefCount(e.props.texture),r.nodeRefCount++,r.lastUpdate=Date.now(),this.zeroReferenceTextureSet.has(r)&&this.zeroReferenceTextureSet.delete(r)}},{key:"decrementTextureRefCount",value:function(e){var t,n=null===(t=e.options)||void 0===t?void 0:t.id;d(n,"Texture must have an id to be registered");var r=this.textureMap.get(n);d(r,"Texture must have been registered"),r.nodeRefCount--,r.lastUpdate=Date.now(),0===r.nodeRefCount&&this.zeroReferenceTextureSet.add(r),"SubTexture"===e.txType&&this.decrementTextureRefCount(e.props.texture)}}]),t}(Ze),Je=function(e){function t(e){var n;return p(this,t),m(l(n=i(this,t,[e])),"registry",void 0),n.registry=new FinalizationRegistry(e),n}return c(t,e),f(t,[{key:"registerTexture",value:function(e){var t,n;d(null===(t=e.options)||void 0===t?void 0:t.id,"Texture must have an ID to be registered"),this.registry.register(e,null===(n=e.options)||void 0===n?void 0:n.id)}},{key:"incrementTextureRefCount",value:function(){}},{key:"decrementTextureRefCount",value:function(){}}]),t}(Ze),et=function(e){function t(e,n,r){var o,a,s;p(this,t),m(l(s=i(this,t)),"root",null),m(l(s),"driver",void 0),m(l(s),"canvas",void 0),m(l(s),"settings",void 0),m(l(s),"nodes",new Map),m(l(s),"nextTextureId",1),m(l(s),"textureTracker",void 0);var u={appWidth:e.appWidth||1920,appHeight:e.appHeight||1080,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:null!==(o=e.clearColor)&&void 0!==o?o:0,coreExtensionModule:e.coreExtensionModule||null,experimental_FinalizationRegistryTextureUsageTracker:null!==(a=e.experimental_FinalizationRegistryTextureUsageTracker)&&void 0!==a&&a,textureCleanupOptions:e.textureCleanupOptions||{},fpsUpdateInterval:e.fpsUpdateInterval||0};s.settings=u;var c=u.appWidth,d=u.appHeight,h=u.deviceLogicalPixelRatio,f=u.devicePhysicalPixelRatio,v=function(e){s.driver.releaseTexture(e)},g=u.experimental_FinalizationRegistryTextureUsageTracker&&"function"==typeof FinalizationRegistry;s.textureTracker=g?new Je(v):new Qe(v,s.settings.textureCleanupOptions);var y=c*h,x=d*h;s.driver=r;var w,b=document.createElement("canvas");if(s.canvas=b,b.width=y*f,b.height=x*f,b.style.width="".concat(y,"px"),b.style.height="".concat(x,"px"),!(w="string"==typeof n?document.getElementById(n):n))throw new Error("Could not find target element");return r.onCreateNode=function(e){s.nodes.set(e.id,e)},r.onBeforeDestroyNode=function(e){s.nodes.delete(e.id)},r.onFpsUpdate=function(e){s.emit("fpsUpdate",e)},w.appendChild(b),s}var r;return c(t,e),f(t,[{key:"init",value:(r=o(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.driver.init(this,this.settings,this.canvas);case 2:this.root=this.driver.getRootNode();case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"createNode",value:function(e){return this.driver.createNode(this.resolveNodeDefaults(e))}},{key:"createTextNode",value:function(e){var t,n,r,o,i,a,s,u,l,c,d,h,f,p;return this.driver.createTextNode(y(y({},this.resolveNodeDefaults(e)),{},{text:null!==(t=e.text)&&void 0!==t?t:"",textRendererOverride:null!==(n=e.textRendererOverride)&&void 0!==n?n:null,fontSize:null!==(r=e.fontSize)&&void 0!==r?r:16,fontFamily:null!==(o=e.fontFamily)&&void 0!==o?o:"sans-serif",fontStyle:null!==(i=e.fontStyle)&&void 0!==i?i:"normal",fontWeight:null!==(a=e.fontWeight)&&void 0!==a?a:"normal",fontStretch:null!==(s=e.fontStretch)&&void 0!==s?s:"normal",textAlign:null!==(u=e.textAlign)&&void 0!==u?u:"left",contain:null!==(l=e.contain)&&void 0!==l?l:"none",scrollable:null!==(c=e.scrollable)&&void 0!==c&&c,scrollY:null!==(d=e.scrollY)&&void 0!==d?d:0,offsetY:null!==(h=e.offsetY)&&void 0!==h?h:0,letterSpacing:null!==(f=e.letterSpacing)&&void 0!==f?f:0,debug:null!==(p=e.debug)&&void 0!==p?p:{}}))}},{key:"resolveNodeDefaults",value:function(e){var t,n,r,o,i,a,s,u,l,c,d,h,f,p,v,g,y,m,x,w,b,_,k,S,T,C,R,E,F,I,N,A,L,P,z,M,O,B,D,j,U,Y,W,X,G,H=null!==(t=e.color)&&void 0!==t?t:4294967295,$=null!==(n=null!==(r=null!==(o=e.colorTl)&&void 0!==o?o:e.colorTop)&&void 0!==r?r:e.colorLeft)&&void 0!==n?n:H,V=null!==(i=null!==(a=null!==(s=e.colorTr)&&void 0!==s?s:e.colorTop)&&void 0!==a?a:e.colorRight)&&void 0!==i?i:H,K=null!==(u=null!==(l=null!==(c=e.colorBl)&&void 0!==c?c:e.colorBottom)&&void 0!==l?l:e.colorLeft)&&void 0!==u?u:H,q=null!==(d=null!==(h=null!==(f=e.colorBr)&&void 0!==f?f:e.colorBottom)&&void 0!==h?h:e.colorRight)&&void 0!==d?d:H;return{x:null!==(p=e.x)&&void 0!==p?p:0,y:null!==(v=e.y)&&void 0!==v?v:0,width:null!==(g=e.width)&&void 0!==g?g:0,height:null!==(y=e.height)&&void 0!==y?y:0,alpha:null!==(m=e.alpha)&&void 0!==m?m:1,clipping:null!==(x=e.clipping)&&void 0!==x&&x,color:H,colorTop:null!==(w=e.colorTop)&&void 0!==w?w:H,colorBottom:null!==(b=e.colorBottom)&&void 0!==b?b:H,colorLeft:null!==(_=e.colorLeft)&&void 0!==_?_:H,colorRight:null!==(k=e.colorRight)&&void 0!==k?k:H,colorBl:K,colorBr:q,colorTl:$,colorTr:V,zIndex:null!==(S=e.zIndex)&&void 0!==S?S:0,zIndexLocked:null!==(T=e.zIndexLocked)&&void 0!==T?T:0,parent:null!==(C=e.parent)&&void 0!==C?C:null,texture:null!==(R=e.texture)&&void 0!==R?R:null,shader:null!==(E=e.shader)&&void 0!==E?E:null,src:null!==(F=e.src)&&void 0!==F?F:"",scale:null!==(I=e.scale)&&void 0!==I?I:null,scaleX:null!==(N=null!==(A=e.scaleX)&&void 0!==A?A:e.scale)&&void 0!==N?N:1,scaleY:null!==(L=null!==(P=e.scaleY)&&void 0!==P?P:e.scale)&&void 0!==L?L:1,mount:null!==(z=e.mount)&&void 0!==z?z:0,mountX:null!==(M=null!==(O=e.mountX)&&void 0!==O?O:e.mount)&&void 0!==M?M:0,mountY:null!==(B=null!==(D=e.mountY)&&void 0!==D?D:e.mount)&&void 0!==B?B:0,pivot:null!==(j=e.pivot)&&void 0!==j?j:.5,pivotX:null!==(U=null!==(Y=e.pivotX)&&void 0!==Y?Y:e.pivot)&&void 0!==U?U:.5,pivotY:null!==(W=null!==(X=e.pivotY)&&void 0!==X?X:e.pivot)&&void 0!==W?W:.5,rotation:null!==(G=e.rotation)&&void 0!==G?G:0}}},{key:"destroyNode",value:function(e){return this.driver.destroyNode(e)}},{key:"createTexture",value:function(e,t,n){var r=this.nextTextureId++,o={descType:"texture",txType:e,props:t,options:y(y({},n),{},{id:r})};return this.textureTracker.registerTexture(o),o}},{key:"createShader",value:function(e,t){return{descType:"shader",shType:e,props:t}}},{key:"getNodeById",value:function(e){return this.nodes.get(e)||null}},{key:"toggleFreeze",value:function(){throw new Error("Not implemented")}},{key:"advanceFrame",value:function(){throw new Error("Not implemented")}},{key:"rerender",value:function(){throw new Error("Not implemented")}}]),t}(h),tt=function(e){function t(e,n,r){var o;return p(this,t),m(l(o=i(this,t)),"node",void 0),m(l(o),"props",void 0),m(l(o),"settings",void 0),m(l(o),"propStartValues",{}),m(l(o),"restoreValues",{}),m(l(o),"progress",0),m(l(o),"timingFunction",void 0),m(l(o),"propsList",void 0),o.node=e,o.props=n,o.settings=r,o.propStartValues={},o.propsList=Object.keys(n),o.propsList.forEach((function(t){o.propStartValues[t]=e[t]})),o.timingFunction=function(e){return e},r.easing&&"string"==typeof r.easing&&(o.timingFunction=g(r.easing)),o}return c(t,e),f(t,[{key:"reset",value:function(){this.progress=0,this.update(0)}},{key:"restore",value:function(){var e=this;this.reset(),Object.keys(this.props).forEach((function(t){e.node[t]=e.propStartValues[t]}))}},{key:"reverse",value:function(){var e=this;this.progress=0,Object.keys(this.props).forEach((function(t){var n=e.props[t],r=e.propStartValues[t];e.props[t]=r,e.propStartValues[t]=n})),this.settings.loop||(this.settings.stopMethod=!1)}},{key:"applyEasing",value:function(e,t,n){return(this.timingFunction(e)||e)*(n-t)+t}},{key:"update",value:function(e){var t=this.settings,n=t.duration,r=t.loop,o=t.easing,i=t.stopMethod;if(n)if(this.progress+=e/n,this.progress>1&&(this.progress=r?0:1,i))this.emit("finished",{});else{for(var a=0;a<this.propsList.length;a++){var s=this.propsList[a],u=this.props[s],l=this.propStartValues[s],c=u;if(-1===s.indexOf("color"))this.node[s]=o?this.applyEasing(this.progress,l,c):l+(c-l)*this.progress;else{if(l===c){this.node[s]=l;continue}if(o){var d=this.timingFunction(this.progress)||this.progress,h=x(l,c,d);this.node[s]=h;continue}this.node[s]=x(l,c,this.progress)}}1===this.progress&&this.emit("finished",{})}else this.emit("finished",{})}}]),t}(h),nt=function(){function e(t,n){p(this,e),m(this,"manager",void 0),m(this,"animation",void 0),m(this,"stoppedPromise",null),m(this,"stoppedResolve",null),m(this,"state",void 0),this.manager=t,this.animation=n,this.state="stopped"}return f(e,[{key:"start",value:function(){return this.makeStoppedPromise(),this.animation.once("finished",this.finished.bind(this)),this.manager.activeAnimations.has(this.animation)||this.manager.registerAnimation(this.animation),this.state="running",this}},{key:"stop",value:function(){return this.manager.unregisterAnimation(this.animation),null!==this.stoppedResolve&&(this.stoppedResolve(),this.stoppedResolve=null),this.animation.reset(),this.state="stopped",this}},{key:"pause",value:function(){return this.manager.unregisterAnimation(this.animation),this.state="paused",this}},{key:"restore",value:function(){return this.stoppedResolve=null,this.animation.restore(),this}},{key:"waitUntilStopped",value:function(){this.makeStoppedPromise();var e=this.stoppedPromise;return d(e),e}},{key:"makeStoppedPromise",value:function(){var e=this;null===this.stoppedResolve&&(this.stoppedPromise=new Promise((function(t){e.stoppedResolve=t})))}},{key:"finished",value:function(){d(this.stoppedResolve);var e=this.animation.settings,t=e.loop;if("reverse"===e.stopMethod)return this.animation.reverse(),void this.start();this.stoppedResolve(),this.stoppedResolve=null,t||this.manager.unregisterAnimation(this.animation)}}]),e}(),rt=function(){function e(t){p(this,e),m(this,"data",void 0),t?(this.data=new Float32Array(9),this.data[0]=t[0],this.data[3]=t[3],this.data[6]=t[6],this.data[1]=t[1],this.data[4]=t[4],this.data[7]=t[7],this.data[2]=t[2],this.data[5]=t[5],this.data[8]=t[8]):this.data=new Float32Array(9)}return f(e,[{key:"translate",value:function(e,t){return this.data[6]=this.data[0]*e+this.data[3]*t+this.data[6],this.data[7]=this.data[1]*e+this.data[4]*t+this.data[7],this}},{key:"scale",value:function(e,t){return this.data[0]=this.data[0]*e,this.data[3]=this.data[3]*t,this.data[1]=this.data[1]*e,this.data[4]=this.data[4]*t,this}},{key:"rotate",value:function(e){if(0===e||!(e%Math.PI*2))return this;var t=Math.cos(e),n=Math.sin(e),r=this.data[0]*t+this.data[3]*n,o=this.data[3]*t-this.data[0]*n,i=this.data[1]*t+this.data[4]*n,a=this.data[4]*t-this.data[1]*n;return this.data[0]=r,this.data[3]=o,this.data[1]=i,this.data[4]=a,this}},{key:"multiply",value:function(t){return e.multiply(this,t,this)}},{key:"tx",get:function(){return this.data[6]}},{key:"ty",get:function(){return this.data[7]}},{key:"ta",get:function(){return this.data[0]}},{key:"tb",get:function(){return this.data[3]}},{key:"tc",get:function(){return this.data[1]}},{key:"td",get:function(){return this.data[4]}},{key:"transformPoint",value:function(e,t){return[this.data[0]*e+this.data[3]*t+this.data[6],this.data[1]*e+this.data[4]*t+this.data[1]]}}],[{key:"temp",get:function(){return ot}},{key:"multiply",value:function(t,n,r){var o=t.data[0]*n.data[0]+t.data[3]*n.data[1]+t.data[6]*n.data[2],i=t.data[0]*n.data[3]+t.data[3]*n.data[4]+t.data[6]*n.data[5],a=t.data[0]*n.data[6]+t.data[3]*n.data[7]+t.data[6]*n.data[8],s=t.data[1]*n.data[0]+t.data[4]*n.data[1]+t.data[7]*n.data[2],u=t.data[1]*n.data[3]+t.data[4]*n.data[4]+t.data[7]*n.data[5],l=t.data[1]*n.data[6]+t.data[4]*n.data[7]+t.data[7]*n.data[8],c=t.data[2]*n.data[0]+t.data[5]*n.data[1]+t.data[8]*n.data[2],d=t.data[2]*n.data[3]+t.data[5]*n.data[4]+t.data[8]*n.data[5],h=t.data[2]*n.data[6]+t.data[5]*n.data[7]+t.data[8]*n.data[8];return r||(r=new e),r.data[0]=o,r.data[3]=i,r.data[6]=a,r.data[1]=s,r.data[4]=u,r.data[7]=l,r.data[2]=c,r.data[5]=d,r.data[8]=h,r}},{key:"identity",value:function(t){return t||(t=new e),t.data[0]=1,t.data[3]=0,t.data[6]=0,t.data[1]=0,t.data[4]=1,t.data[7]=0,t.data[2]=0,t.data[5]=0,t.data[8]=1,t}},{key:"translate",value:function(t,n,r){return r||(r=new e),r.data[0]=1,r.data[3]=0,r.data[6]=t,r.data[1]=0,r.data[4]=1,r.data[7]=n,r.data[2]=0,r.data[5]=0,r.data[8]=1,r}},{key:"scale",value:function(t,n,r){return r||(r=new e),r.data[0]=t,r.data[3]=0,r.data[6]=0,r.data[1]=0,r.data[4]=n,r.data[7]=0,r.data[2]=0,r.data[5]=0,r.data[8]=1,r}},{key:"rotate",value:function(t,n){var r=Math.cos(t),o=Math.sin(t);return n||(n=new e),n.data[0]=r,n.data[3]=-o,n.data[6]=0,n.data[1]=o,n.data[4]=r,n.data[7]=0,n.data[2]=0,n.data[5]=0,n.data[8]=1,n}},{key:"copy",value:function(t,n,r){return n||(n=new e),n.data[0]=t.data[0],n.data[1]=t.data[1],n.data[2]=t.data[2],n.data[3]=t.data[3],n.data[4]=t.data[4],n.data[5]=t.data[5],n.data[6]=t.data[6],n.data[7]=t.data[7],n.data[8]=t.data[8],n}}]),e}(),ot=new rt;!function(e){e[e.Children=1]="Children",e[e.ScaleRotate=2]="ScaleRotate",e[e.Local=4]="Local",e[e.Global=8]="Global",e[e.Clipping=16]="Clipping",e[e.CalculatedZIndex=32]="CalculatedZIndex",e[e.ZIndexSortedChildren=64]="ZIndexSortedChildren",e[e.PremultipliedColors=128]="PremultipliedColors",e[e.WorldAlpha=256]="WorldAlpha",e[e.None=0]="None",e[e.All=511]="All"}($e||($e={}));var it=function(e){function t(e,n){var r;return p(this,t),m(l(r=i(this,t)),"stage",void 0),m(l(r),"children",[]),m(l(r),"props",void 0),m(l(r),"updateType",$e.All),m(l(r),"globalTransform",void 0),m(l(r),"scaleRotateTransform",void 0),m(l(r),"localTransform",void 0),m(l(r),"clippingRect",null),m(l(r),"isRenderable",!1),m(l(r),"parentClippingRect",null),m(l(r),"worldAlpha",1),m(l(r),"premultipliedColorTl",0),m(l(r),"premultipliedColorTr",0),m(l(r),"premultipliedColorBl",0),m(l(r),"premultipliedColorBr",0),m(l(r),"calcZIndex",0),m(l(r),"isComplex",!1),m(l(r),"onTextureLoaded",(function(e,t){r.stage.requestRender(),r.emit("loaded",{type:"texture",dimensions:t})})),m(l(r),"onTextureFailed",(function(e,t){r.emit("failed",{type:"texture",error:t})})),r.stage=e,r.props=y(y({},n),{},{parent:null}),r.parent=n.parent,r.updateScaleRotateTransform(),r}return c(t,e),f(t,[{key:"loadTexture",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.props.texture&&this.unloadTexture();var o=this.stage.txManager.loadTexture(e,t,r);this.props.texture=o,this.props.textureOptions=r,this.checkIsRenderable(),queueMicrotask((function(){"loaded"===o.state?n.onTextureLoaded(o,o.dimensions):"failed"===o.state&&n.onTextureFailed(o,o.error),o.on("loaded",n.onTextureLoaded),o.on("failed",n.onTextureFailed)}))}},{key:"unloadTexture",value:function(){this.props.texture&&(this.props.texture.off("loaded",this.onTextureLoaded),this.props.texture.off("failed",this.onTextureFailed)),this.props.texture=null,this.props.textureOptions=null,this.checkIsRenderable()}},{key:"loadShader",value:function(e,t){var n=this.stage.renderer.getShaderManager();d(n);var r=n.loadShader(e,t),o=r.shader,i=r.props;this.props.shader=o,this.props.shaderProps=i,this.checkIsRenderable()}},{key:"setUpdateType",value:function(e){this.updateType|=e;var t=this.props.parent;!t||t.updateType&$e.Children||t.setUpdateType($e.Children)}},{key:"sortChildren",value:function(){this.children.sort((function(e,t){return e.calcZIndex-t.calcZIndex}))}},{key:"updateScaleRotateTransform",value:function(){this.scaleRotateTransform=rt.rotate(this.props.rotation,this.scaleRotateTransform).scale(this.props.scaleX,this.props.scaleY)}},{key:"updateLocalTransform",value:function(){d(this.scaleRotateTransform);var e=this.props.pivotX*this.props.width,t=this.props.pivotY*this.props.height,n=this.props.mountX*this.props.width,r=this.props.mountY*this.props.height;this.localTransform=rt.translate(e-n+this.props.x,t-r+this.props.y,this.localTransform).multiply(this.scaleRotateTransform).translate(-e,-t),this.setUpdateType($e.Global)}},{key:"update",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.updateType&$e.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType($e.Local)),this.updateType&$e.Local&&(this.updateLocalTransform(),this.setUpdateType($e.Global));var r=this.props.parent,o=$e.None;this.updateType&$e.Global&&(d(this.localTransform),this.globalTransform=rt.copy((null==r?void 0:r.globalTransform)||this.localTransform,this.globalTransform),r&&this.globalTransform.multiply(this.localTransform),this.setUpdateType($e.Clipping|$e.Children),o|=$e.Global),this.updateType&$e.Clipping&&(this.calculateClippingRect(n),this.checkIsRenderable(),this.setUpdateType($e.Children),o|=$e.Clipping),this.updateType&$e.WorldAlpha&&(this.worldAlpha=r?r.worldAlpha*this.props.alpha:this.props.alpha,this.setUpdateType($e.Children|$e.PremultipliedColors),o|=$e.WorldAlpha),this.updateType&$e.PremultipliedColors&&(this.premultipliedColorTl=_(this.props.colorTl,this.worldAlpha,!0),this.premultipliedColorTr=_(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=_(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=_(this.props.colorBr,this.worldAlpha,!0),this.checkIsRenderable(),this.setUpdateType($e.Children),o|=$e.PremultipliedColors),r&&this.updateType&$e.CalculatedZIndex&&(this.calculateZIndex(),r.setUpdateType($e.ZIndexSortedChildren)),this.updateType&$e.Children&&this.children.length&&this.children.forEach((function(n){n.setUpdateType(o),0!==n.updateType&&n.update(e,t.clippingRect)})),this.updateType&$e.ZIndexSortedChildren&&this.sortChildren(),this.updateType=0}},{key:"checkIsRenderable",value:function(){var e=this;if(this.props.texture)return this.isRenderable=!0;if(this.props.shader)return this.isRenderable=!0;if(this.props.clipping)return this.isRenderable=!0;return["color","colorTop","colorBottom","colorLeft","colorRight","colorTl","colorTr","colorBl","colorBr"].some((function(t){return 0!==e.props[t]}))?this.isRenderable=!0:this.isRenderable=!1}},{key:"calculateClippingRect",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(d(this.globalTransform),this.parentClippingRect!==e||!this.clippingRect){var t=this.globalTransform,n=0!==t.tb||0!==t.tc,r=this.props.clipping&&!n?{x:t.tx,y:t.ty,width:this.width*t.ta,height:this.height*t.td}:null;e&&r?r=k(e,r):e&&(r=e),this.parentClippingRect=e,this.clippingRect=r}}},{key:"calculateZIndex",value:function(){var e,t,n=this.props,r=n.zIndex||0,o=(null===(e=n.parent)||void 0===e?void 0:e.zIndex)||0,i=r;null!==(t=n.parent)&&void 0!==t&&t.zIndexLocked&&(i=r<o?r:o),this.calcZIndex=i}},{key:"renderQuads",value:function(e){var t=this.props,n=t.width,r=t.height,o=t.texture,i=t.textureOptions,a=t.shader,s=t.shaderProps,u=this.premultipliedColorTl,l=this.premultipliedColorTr,c=this.premultipliedColorBl,h=this.premultipliedColorBr,f=this.zIndex,p=this.worldAlpha,v=this.globalTransform,g=this.clippingRect;d(v),e.addQuad({width:n,height:r,colorTl:u,colorTr:l,colorBl:c,colorBr:h,texture:o,textureOptions:i,zIndex:f,shader:a,shaderProps:s,alpha:p,clippingRect:g,tx:v.tx,ty:v.ty,ta:v.ta,tb:v.tb,tc:v.tc,td:v.td})}},{key:"id",get:function(){return this.props.id}},{key:"x",get:function(){return this.props.x},set:function(e){this.props.x!==e&&(this.props.x=e,this.setUpdateType($e.Local))}},{key:"absX",get:function(){var e,t;return this.props.x+((null===(e=this.props.parent)||void 0===e?void 0:e.absX)||(null===(t=this.props.parent)||void 0===t||null===(t=t.globalTransform)||void 0===t?void 0:t.tx)||0)}},{key:"absY",get:function(){var e,t;return this.props.y+(null!==(e=null===(t=this.props.parent)||void 0===t?void 0:t.absY)&&void 0!==e?e:0)}},{key:"y",get:function(){return this.props.y},set:function(e){this.props.y!==e&&(this.props.y=e,this.setUpdateType($e.Local))}},{key:"width",get:function(){return this.props.width},set:function(e){this.props.width!==e&&(this.props.width=e,this.setUpdateType($e.Local))}},{key:"height",get:function(){return this.props.height},set:function(e){this.props.height!==e&&(this.props.height=e,this.setUpdateType($e.Local))}},{key:"scale",get:function(){return this.scaleX},set:function(e){this.scaleX=e,this.scaleY=e}},{key:"scaleX",get:function(){return this.props.scaleX},set:function(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.setUpdateType($e.ScaleRotate))}},{key:"scaleY",get:function(){return this.props.scaleY},set:function(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.setUpdateType($e.ScaleRotate))}},{key:"mount",get:function(){return this.props.mount},set:function(e){this.props.mountX===e&&this.props.mountY===e||(this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.setUpdateType($e.Local))}},{key:"mountX",get:function(){return this.props.mountX},set:function(e){this.props.mountX!==e&&(this.props.mountX=e,this.setUpdateType($e.Local))}},{key:"mountY",get:function(){return this.props.mountY},set:function(e){this.props.mountY!==e&&(this.props.mountY=e,this.setUpdateType($e.Local))}},{key:"pivot",get:function(){return this.props.pivot},set:function(e){this.props.pivotX===e&&this.props.pivotY===e||(this.props.pivotX=e,this.props.pivotY=e,this.props.pivot=e,this.setUpdateType($e.Local))}},{key:"pivotX",get:function(){return this.props.pivotX},set:function(e){this.props.pivotX!==e&&(this.props.pivotX=e,this.setUpdateType($e.Local))}},{key:"pivotY",get:function(){return this.props.pivotY},set:function(e){this.props.pivotY!==e&&(this.props.pivotY=e,this.setUpdateType($e.Local))}},{key:"rotation",get:function(){return this.props.rotation},set:function(e){this.props.rotation!==e&&(this.props.rotation=e,this.setUpdateType($e.ScaleRotate))}},{key:"alpha",get:function(){return this.props.alpha},set:function(e){this.props.alpha=e,this.setUpdateType($e.PremultipliedColors|$e.WorldAlpha)}},{key:"clipping",get:function(){return this.props.clipping},set:function(e){this.props.clipping=e,this.setUpdateType($e.Clipping)}},{key:"color",get:function(){return this.props.color},set:function(e){this.props.colorTl===e&&this.props.colorTr===e&&this.props.colorBl===e&&this.props.colorBr===e||(this.colorTl=e,this.colorTr=e,this.colorBl=e,this.colorBr=e),this.props.color=e,this.setUpdateType($e.PremultipliedColors)}},{key:"colorTop",get:function(){return this.props.colorTop},set:function(e){this.props.colorTl===e&&this.props.colorTr===e||(this.colorTl=e,this.colorTr=e),this.props.colorTop=e,this.setUpdateType($e.PremultipliedColors)}},{key:"colorBottom",get:function(){return this.props.colorBottom},set:function(e){this.props.colorBl===e&&this.props.colorBr===e||(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e,this.setUpdateType($e.PremultipliedColors)}},{key:"colorLeft",get:function(){return this.props.colorLeft},set:function(e){this.props.colorTl===e&&this.props.colorBl===e||(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e,this.setUpdateType($e.PremultipliedColors)}},{key:"colorRight",get:function(){return this.props.colorRight},set:function(e){this.props.colorTr===e&&this.props.colorBr===e||(this.colorTr=e,this.colorBr=e),this.props.colorRight=e,this.setUpdateType($e.PremultipliedColors)}},{key:"colorTl",get:function(){return this.props.colorTl},set:function(e){this.props.colorTl=e,this.setUpdateType($e.PremultipliedColors)}},{key:"colorTr",get:function(){return this.props.colorTr},set:function(e){this.props.colorTr=e,this.setUpdateType($e.PremultipliedColors)}},{key:"colorBl",get:function(){return this.props.colorBl},set:function(e){this.props.colorBl=e,this.setUpdateType($e.PremultipliedColors)}},{key:"colorBr",get:function(){return this.props.colorBr},set:function(e){this.props.colorBr=e,this.setUpdateType($e.PremultipliedColors)}},{key:"zIndexLocked",get:function(){return this.props.zIndexLocked||0},set:function(e){this.props.zIndexLocked=e,this.setUpdateType($e.CalculatedZIndex|$e.Children),this.children.forEach((function(e){e.setUpdateType($e.CalculatedZIndex)}))}},{key:"zIndex",get:function(){return this.props.zIndex},set:function(e){this.props.zIndex=e,this.setUpdateType($e.CalculatedZIndex|$e.Children),this.children.forEach((function(e){e.setUpdateType($e.CalculatedZIndex)}))}},{key:"parent",get:function(){return this.props.parent},set:function(e){var t=this.props.parent;if(t!==e){if(this.props.parent=e,t){var n=t.children.indexOf(this);d(-1!==n,"CoreNode.parent: Node not found in old parent's children!"),t.children.splice(n,1)}e&&(e.children.push(this),this.setUpdateType($e.All),e.setUpdateType($e.Children|$e.ZIndexSortedChildren)),this.updateScaleRotateTransform()}}}]),t}(h),at=1;function st(){return at++}var ut=function(e){function t(e,n,r,o){var a,s;return p(this,t),m(l(s=i(this,t)),"rendererMain",void 0),m(l(s),"stage",void 0),m(l(s),"id",void 0),m(l(s),"coreNode",void 0),m(l(s),"_children",[]),m(l(s),"_src",""),m(l(s),"_parent",null),m(l(s),"_texture",null),m(l(s),"_shader",null),m(l(s),"onTextureLoaded",(function(e,t){s.emit("loaded",t)})),m(l(s),"onTextureFailed",(function(e,t){s.emit("failed",t)})),s.rendererMain=n,s.stage=r,s.id=null!==(a=null==o?void 0:o.id)&&void 0!==a?a:st(),s.coreNode=o||new it(s.stage,{id:s.id,x:e.x,y:e.y,width:e.width,height:e.height,alpha:e.alpha,clipping:e.clipping,color:e.color,colorTop:e.colorTop,colorBottom:e.colorBottom,colorLeft:e.colorLeft,colorRight:e.colorRight,colorTl:e.colorTl,colorTr:e.colorTr,colorBl:e.colorBl,colorBr:e.colorBr,zIndex:e.zIndex,zIndexLocked:e.zIndexLocked,scaleX:e.scaleX,scaleY:e.scaleY,mountX:e.mountX,mountY:e.mountY,mount:e.mount,pivot:e.pivot,pivotX:e.pivotX,pivotY:e.pivotY,rotation:e.rotation,parent:null,shader:null,shaderProps:null,texture:null,textureOptions:null}),s.coreNode.on("loaded",s.onTextureLoaded),s.coreNode.on("failed",s.onTextureFailed),s.parent=e.parent,s.shader=e.shader,s.texture=e.texture,s.src=e.src,s}return c(t,e),f(t,[{key:"x",get:function(){return this.coreNode.x},set:function(e){this.coreNode.x=e}},{key:"y",get:function(){return this.coreNode.y},set:function(e){this.coreNode.y=e}},{key:"width",get:function(){return this.coreNode.width},set:function(e){this.coreNode.width=e}},{key:"height",get:function(){return this.coreNode.height},set:function(e){this.coreNode.height=e}},{key:"alpha",get:function(){return this.coreNode.alpha},set:function(e){this.coreNode.alpha=e}},{key:"clipping",get:function(){return this.coreNode.clipping},set:function(e){this.coreNode.clipping=e}},{key:"color",get:function(){return this.coreNode.color},set:function(e){this.coreNode.color=e}},{key:"colorTop",get:function(){return this.coreNode.colorTop},set:function(e){this.coreNode.colorTop=e}},{key:"colorBottom",get:function(){return this.coreNode.colorBottom},set:function(e){this.coreNode.colorBottom=e}},{key:"colorLeft",get:function(){return this.coreNode.colorLeft},set:function(e){this.coreNode.colorLeft=e}},{key:"colorRight",get:function(){return this.coreNode.colorRight},set:function(e){this.coreNode.colorRight=e}},{key:"colorTl",get:function(){return this.coreNode.colorTl},set:function(e){this.coreNode.colorTl=e}},{key:"colorTr",get:function(){return this.coreNode.colorTr},set:function(e){this.coreNode.colorTr=e}},{key:"colorBl",get:function(){return this.coreNode.colorBl},set:function(e){this.coreNode.colorBl=e}},{key:"colorBr",get:function(){return this.coreNode.colorBr},set:function(e){this.coreNode.colorBr=e}},{key:"scale",get:function(){return this.scaleX!==this.scaleY?null:this.coreNode.scaleX},set:function(e){null!==e&&(this.coreNode.scaleX=e,this.coreNode.scaleY=e)}},{key:"scaleX",get:function(){return this.coreNode.scaleX},set:function(e){this.coreNode.scaleX=e}},{key:"scaleY",get:function(){return this.coreNode.scaleY},set:function(e){this.coreNode.scaleY=e}},{key:"mount",get:function(){return this.coreNode.mount},set:function(e){this.coreNode.mount=e}},{key:"mountX",get:function(){return this.coreNode.mountX},set:function(e){this.coreNode.mountX=e}},{key:"mountY",get:function(){return this.coreNode.mountY},set:function(e){this.coreNode.mountY=e}},{key:"pivot",get:function(){return this.coreNode.pivot},set:function(e){this.coreNode.pivot=e}},{key:"pivotX",get:function(){return this.coreNode.pivotX},set:function(e){this.coreNode.pivotX=e}},{key:"pivotY",get:function(){return this.coreNode.pivotY},set:function(e){this.coreNode.pivotY=e}},{key:"rotation",get:function(){return this.coreNode.rotation},set:function(e){this.coreNode.rotation=e}},{key:"parent",get:function(){return this._parent},set:function(e){var t,n=this._parent;if(this._parent=e,this.coreNode.parent=null!==(t=null==e?void 0:e.coreNode)&&void 0!==t?t:null,n){var r=n.children.indexOf(this);d(-1!==r,"MainOnlyNode.parent: Node not found in old parent's children!"),n.children.splice(r,1)}e&&e.children.push(this)}},{key:"children",get:function(){return this._children}},{key:"zIndex",get:function(){return this.coreNode.zIndex},set:function(e){this.coreNode.zIndex=e}},{key:"zIndexLocked",get:function(){return this.coreNode.zIndexLocked},set:function(e){this.coreNode.zIndexLocked=e}},{key:"src",get:function(){return this._src},set:function(e){this._src!==e&&(this._src=e,this.texture=e?this.rendererMain.createTexture("ImageTexture",{src:e}):null)}},{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture&&this.rendererMain.textureTracker.decrementTextureRefCount(this._texture),e&&this.rendererMain.textureTracker.incrementTextureRefCount(e),this._texture=e,e?this.coreNode.loadTexture(e.txType,e.props,e.options):this.coreNode.unloadTexture())}},{key:"shader",get:function(){return this._shader},set:function(e){this._shader!==e&&(this._shader=e,e&&this.coreNode.loadShader(e.shType,e.props))}},{key:"destroy",value:function(){this.emit("beforeDestroy",{}),this.parent=null,this.texture=null,this.emit("afterDestroy",{}),this.removeAllListeners()}},{key:"flush",value:function(){}},{key:"animate",value:function(e,t){var n=new tt(this.coreNode,e,t);return new nt(this.stage.animationManager,n)}}]),t}(h),lt=function(e){function t(e){return p(this,t),i(this,t,[{renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]}])}return c(t,e),f(t,[{key:"bindTextures",value:function(e){var t=this.gl;t.getParameter(t.TEXTURE_BINDING_2D)!==e[0].ctxTexture&&(t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e[0].ctxTexture))}}]),t}(S);m(lt,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    "});var ct=function(e){function t(e){var n;return p(this,t),m(l(n=i(this,t,[{renderer:e,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]}])),"supportsIndexedTextures",!0),n}return c(t,e),f(t,[{key:"bindTextures",value:function(e){var t=this.renderer,n=this.gl;if(e.length>t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error("DefaultShaderBatched: Cannot bind more than ".concat(t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS," textures"));e.forEach((function(e,t){n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,e.ctxTexture)}));var r=Array.from(Array(e.length).keys());this.setUniform("u_textures[0]",r)}}]),t}(S);m(ct,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:function(e){return"\n      #define txUnits ".concat(e,"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[").concat(e,"], int idx, vec2 uv) {\n        ").concat(Array.from(Array(e).keys()).map((function(e){return"\n          ".concat(0!==e?"else ":"","if (idx == ").concat(e,") {\n            return texture2D(textures[").concat(e,"], uv);\n          }\n        ")})).join(""),"\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    ")}});var dt=function(){function e(t){p(this,e),m(this,"priority",1),m(this,"name",""),m(this,"ref",void 0),m(this,"target",void 0),m(this,"passParameters",""),m(this,"declaredUniforms",""),m(this,"uniformInfo",{});var n=t.ref,r=t.target,o=t.props,i=void 0===o?{}:o;this.ref=n,this.target=r;var a={},s=[],u="",l=this.constructor.uniforms||{};for(var c in l){var d=l[c],h=d.type,f="".concat(n,"_").concat(c),v="";d.size&&(v="[".concat(d.size(i),"]")),s.push(f),u+="uniform ".concat(h," ").concat(f).concat(v,";"),a[c]={name:f,uniform:l[c].method}}this.passParameters=s.join(","),this.declaredUniforms=u,this.uniformInfo=a}return f(e,null,[{key:"getEffectKey",value:function(e){return""}},{key:"getMethodParameters",value:function(e,t){var n=[];for(var r in e){var o=e[r],i="";o.size&&(i="[".concat(o.size(t),"]")),n.push("".concat(o.type," ").concat(r).concat(i))}return n.join(",")}},{key:"resolveDefaults",value:function(e){return{}}},{key:"makeEffectKey",value:function(e){return!1}}]),e}();m(dt,"uniforms",{}),m(dt,"methods",void 0),m(dt,"onShaderMask",void 0),m(dt,"onColorize",void 0),m(dt,"onEffectMask",void 0);var ht=function(e){function t(e,n,r){var o;p(this,t);var a=t.createShader(n,r);return m(l(o=i(this,t,[{renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"}].concat(v(a.uniforms)),shaderSources:{vertex:a.vertex,fragment:a.fragment}}])),"effects",[]),o.effects=a.effects,o}return c(t,e),f(t,[{key:"bindTextures",value:function(e){var t=this.gl;t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e[0].ctxTexture)}},{key:"bindProps",value:function(e){var t,n=this,r=this.renderer.shManager.getRegisteredEffects();null===(t=e.effects)||void 0===t||t.forEach((function(e,t){var o,i=n.effects[t],a=r[i.name],s=null!==(o=e.props)&&void 0!==o?o:{},u=i.uniformInfo;Object.keys(s).forEach((function(e){var t=a.uniforms[e],r=u[e],o=t.validator?t.validator(s[e],s):s[e];Array.isArray(o)&&(o=new Float32Array(o)),n.setUniform(r.name,o)}))}))}}],[{key:"createShader",value:function(e,n){var r={},o={},i="",a=[],s=[],u=e.effects.map((function(e){var t=n[e.type],o=t.getEffectKey(e.props||{});r[o]=r[o]?++r[o]:1;var u=r[o];1===u&&s.push({key:o,type:e.type,props:e.props});var l=new t({ref:"".concat(o).concat(1===u?"":u),target:o,props:e.props});return i+=l.declaredUniforms,a.push.apply(a,v(Object.values(l.uniformInfo))),l})),l="";null==s||s.forEach((function(e){var r,i=n[e.type],a=i.resolveDefaults(null!==(r=e.props)&&void 0!==r?r:{}),s=[];for(var u in i.methods){var c=u,d=i.methods[u];o[u]&&o[u]!==d&&(c=t.resolveMethodDuplicate(u,d,o)),o[c]=d.replace("function",c),s.push({m:u,cm:c})}var h=i.onShaderMask instanceof Function?i.onShaderMask(a):i.onShaderMask,f=i.onColorize instanceof Function?i.onColorize(a):i.onColorize,p=i.onEffectMask instanceof Function?i.onEffectMask(a):i.onEffectMask;s.forEach((function(e){var t=e.m,n=e.cm,r=new RegExp("\\$".concat(t),"g");h&&(h=h.replace(r,n)),f&&(f=f.replace(r,n)),p&&(p=p.replace(r,n))}));var v=i.getMethodParameters(i.uniforms,a),g=v.length>0?", ".concat(v):"";h&&(l+="\n        float fx_".concat(e.key,"_onShaderMask(float shaderMask ").concat(g,") {\n          ").concat(h,"\n        }\n        ")),f&&(l+="\n          vec4 fx_".concat(e.key,"_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(g,") {\n            ").concat(f,"\n          }\n        ")),p&&(l+="\n          vec4 fx_".concat(e.key,"_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(g,") {\n            ").concat(p,"\n          }\n        "))}));var c="";for(var d in o)c+=o[d];for(var h="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",f="\n\n    ",p=0;p<u.length;p++){var g=u[p],y=g.passParameters.length>0?", ".concat(g.passParameters):"",m=n[g.name];m.onShaderMask&&(f+="\n        shaderMask = fx_".concat(g.target,"_onShaderMask(shaderMask ").concat(y,");\n        ")),m.onColorize&&(f+="\n        maskColor = fx_".concat(g.target,"_onColorize(shaderMask, maskColor, shaderColor").concat(y,");\n        ")),m.onEffectMask&&(h="fx_".concat(g.target,"_onEffectMask(shaderMask, maskColor, shaderColor").concat(y,")"));var x=u[p+1];(void 0===x||n[x.name].onEffectMask)&&(f+="\n          shaderColor = ".concat(h,";\n        "))}return{effects:u,uniforms:a,fragment:t.fragment(i,c,l,f),vertex:t.vertex()}}},{key:"resolveMethodDuplicate",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=e+(r>0?r:"");return n[o]&&n[o]!==t?this.resolveMethodDuplicate(e,t,n,++r):o}},{key:"resolveDefaults",value:function(e,t){var n;return{effects:(null!==(n=e.effects)&&void 0!==n?n:[]).map((function(e){return{type:e.type,props:t[e.type].resolveDefaults(e.props||{})}})),$dimensions:{width:0,height:0},$alpha:0}}},{key:"makeCacheKey",value:function(e,t){var n,r="";return null===(n=e.effects)||void 0===n||n.forEach((function(e){var n=t[e.type].getEffectKey(e.props||{});r+=",".concat(n)})),"DynamicShader".concat(r)}}]),t}(S);m(ht,"z$__type__Props",void 0),m(ht,"vertex",(function(){return"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  "})),m(ht,"fragment",(function(e,t,n,r){return"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ".concat(e,"\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n\n    ").concat(t,"\n\n    ").concat(n,"\n\n    void main() {\n      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ").concat(r,"\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  ")}));var ft=function(e){function t(e){return p(this,t),i(this,t,[{renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]}])}return c(t,e),f(t,[{key:"bindTextures",value:function(e){var t=this.gl;t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e[0].ctxTexture)}},{key:"bindProps",value:function(e){this.setUniform("u_radius",e.radius)}},{key:"canBatchShaderProps",value:function(e,t){return e.radius===t.radius&&e.$dimensions.width===t.$dimensions.width&&e.$dimensions.height===t.$dimensions.height}}],[{key:"resolveDefaults",value:function(e){return{radius:e.radius||10,$dimensions:{width:0,height:0}}}}]),t}(S);m(ft,"z$__type__Props",void 0),m(ft,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    "});var pt=new Float32Array([1,0,0,0,1,0,0,0,1]),vt=function(e){function t(e){return p(this,t),i(this,t,[{renderer:e,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]}])}return c(t,e),f(t,[{key:"bindTextures",value:function(e){var t=this.gl;t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e[0].ctxTexture)}},{key:"bindProps",value:function(e){var n=t.resolveDefaults(e);for(var r in n)if("transform"===r)this.setUniform("u_transform",!1,n[r]);else if("scrollY"===r)this.setUniform("u_scrollY",n[r]);else if("color"===r){var o=T(n.color);this.setUniform("u_color",o)}else"size"===r?this.setUniform("u_size",n[r]):"distanceRange"===r?this.setUniform("u_distanceRange",n[r]):"debug"===r&&this.setUniform("u_debug",n[r]?1:0)}}],[{key:"resolveDefaults",value:function(){var e,t,n,r,o,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{transform:null!==(e=a.transform)&&void 0!==e?e:pt,scrollY:null!==(t=a.scrollY)&&void 0!==t?t:0,color:null!==(n=a.color)&&void 0!==n?n:4294967295,size:null!==(r=a.size)&&void 0!==r?r:16,distanceRange:null!==(o=a.distanceRange)&&void 0!==o?o:1,debug:null!==(i=a.debug)&&void 0!==i&&i}}}]),t}(S);m(vt,"shaderSources",{vertex:"\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n        gl_Position = vec4((transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1), 0, 1);\n        v_texcoord = a_textureCoordinate;\n      }\n    ",fragment:"\n      precision highp float;\n\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    "});var gt=function(e){function t(){var e;p(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(l(e=i(this,t,[].concat(r))),"name","radius"),e}return c(t,e),f(t,null,[{key:"getEffectKey",value:function(){return"radius"}},{key:"resolveDefaults",value:function(e){var t;return{radius:null!==(t=e.radius)&&void 0!==t?t:10}}}]),t}(dt);m(gt,"z$__type__Props",void 0),m(gt,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",validator:function(e){var t=e;return Array.isArray(t)?2===t.length?t=[t[0],t[1],t[0],t[1]]:3===t.length?t=[t[0],t[1],t[2],t[0]]:4!==t.length&&(t=[t[0],t[0],t[0],t[0]]):"number"==typeof t&&(t=[t,t,t,t]),t}}}),m(gt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),m(gt,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);\n  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);\n  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  "),m(gt,"onEffectMask","\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  ");var yt=function(e){function t(){var e;p(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(l(e=i(this,t,[].concat(r))),"name","border"),e}return c(t,e),f(t,null,[{key:"getEffectKey",value:function(){return"border"}},{key:"resolveDefaults",value:function(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}]),t}(dt);m(yt,"z$__type__Props",void 0),m(yt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:function(e){return T(e)},method:"uniform4fv",type:"vec4"}}),m(yt,"onEffectMask","\n  float mask = clamp(shaderMask + width, 0.0, 1.0) - clamp(shaderMask, 0.0, 1.0);\n  return mix(shaderColor, maskColor, mask);\n  "),m(yt,"onColorize","\n    return color;\n  ");var mt=function(e){function t(){var e;p(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(l(e=i(this,t,[].concat(r))),"name","linearGradient"),e}return c(t,e),f(t,null,[{key:"getEffectKey",value:function(e){return"linearGradient".concat(e.colors.length)}},{key:"resolveDefaults",value:function(e){var t,n,r=null!==(t=e.colors)&&void 0!==t?t:[4278190080,4294967295],o=e.stops;if(!o){o=[];for(var i=r.length-1,a=0;a<r.length;a++)o.push(a*(1/i))}return{colors:r,stops:o,angle:null!==(n=e.angle)&&void 0!==n?n:0}}}]),t}(dt);m(mt,"z$__type__Props",void 0),m(mt,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:function(e){return e.map((function(e){return T(e)})).reduce((function(e,t){return e.concat(t)}),[])},size:function(e){return e.colors.length},method:"uniform4fv",type:"vec4"},stops:{value:[],validator:function(e,t){var n,r=null!==(n=t.colors)&&void 0!==n?n:[],o=e,i=e;if(0===o.length||o&&o.length!==r.length){for(var a=0;a<r.length;a++)o[a]?(i[a]=o[a],void 0===o[a-1]&&void 0!==i[a-2]&&(i[a-1]=i[a-2]+(o[a]-i[a-2])/2)):i[a]=a*(1/(r.length-1));o=i}return i},size:function(e){return e.colors.length},method:"uniform1fv",type:"float"}}),m(mt,"methods",{fromLinear:"\n      vec4 function(vec4 linearRGB) {\n        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n        vec4 lower = linearRGB * vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",toLinear:"\n      vec4 function(vec4 sRGB) {\n        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n        vec4 lower = sRGB/vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",calcPoint:"\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    "}),m(mt,"ColorLoop",(function(e){for(var t="",n=2;n<e;n++)t+="colorOut = mix(colorOut, colors[".concat(n,"], clamp((dist - stops[").concat(n-1,"]) / (stops[").concat(n,"] - stops[").concat(n-1,"]), 0.0, 1.0));");return t})),m(mt,"onColorize",(function(e){var t=e.colors.length||1;return"\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));\n      for(int i = 1; i < ".concat(t,"-1; i++) {\n        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);\n        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));\n      }\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")}));var xt=function(e){function t(){var e;p(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(l(e=i(this,t,[].concat(r))),"name","grayscale"),e}return c(t,e),f(t,null,[{key:"getEffectKey",value:function(){return"grayscale"}}]),t}(dt);m(xt,"onColorize","\n    vec3 color = pow(maskColor.rgb, vec3(2.0));\n    float gray = dot(color, vec3(0.2126, 0.7152, 0.0722));\n    float gammaGray = sqrt(gray);\n    return vec4(gammaGray, gammaGray, gammaGray, 1.0);\n  ");var wt=function(e){function t(){var e;p(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(l(e=i(this,t,[].concat(r))),"name","borderRight"),e}return c(t,e),f(t,null,[{key:"getEffectKey",value:function(){return"borderRight"}},{key:"resolveDefaults",value:function(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}]),t}(dt);m(wt,"z$__type__Props",void 0),m(wt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:function(e){return T(e)},method:"uniform4fv",type:"vec4"}}),m(wt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),m(wt,"onEffectMask","\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),m(wt,"onColorize","\n    return color;\n  ");var bt=function(e){function t(){var e;p(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(l(e=i(this,t,[].concat(r))),"name","borderTop"),e}return c(t,e),f(t,null,[{key:"getEffectKey",value:function(){return"borderTop"}},{key:"resolveDefaults",value:function(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}]),t}(dt);m(bt,"z$__type__Props",void 0),m(bt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:function(e){return T(e)},method:"uniform4fv",type:"vec4"}}),m(bt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),m(bt,"onEffectMask","\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),m(bt,"onColorize","\n    return color;\n  ");var _t=function(e){function t(){var e;p(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(l(e=i(this,t,[].concat(r))),"name","borderBottom"),e}return c(t,e),f(t,null,[{key:"getEffectKey",value:function(){return"borderBottom"}},{key:"resolveDefaults",value:function(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}]),t}(dt);m(_t,"z$__type__Props",void 0),m(_t,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:function(e){return T(e)},method:"uniform4fv",type:"vec4"}}),m(_t,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),m(_t,"onEffectMask","\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),m(_t,"onColorize","\n    return color;\n  ");var kt=function(e){function t(){var e;p(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(l(e=i(this,t,[].concat(r))),"name","borderLeft"),e}return c(t,e),f(t,null,[{key:"getEffectKey",value:function(){return"borderLeft"}},{key:"resolveDefaults",value:function(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}]),t}(dt);m(kt,"z$__type__Props",void 0),m(kt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:function(e){return T(e)},method:"uniform4fv",type:"vec4"}}),m(kt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),m(kt,"onEffectMask","\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),m(kt,"onColorize","\n    return color;\n  ");var St=function(e){function t(){var e;p(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(l(e=i(this,t,[].concat(r))),"name","glitch"),e}return c(t,e),f(t,null,[{key:"getEffectKey",value:function(e){return"glitch"}},{key:"resolveDefaults",value:function(e){var t,n,r,o,i;return{amplitude:null!==(t=e.amplitude)&&void 0!==t?t:.2,narrowness:null!==(n=e.narrowness)&&void 0!==n?n:4,blockiness:null!==(r=e.blockiness)&&void 0!==r?r:2,minimizer:null!==(o=e.minimizer)&&void 0!==o?o:8,time:null!==(i=e.time)&&void 0!==i?i:Date.now()}}}]),t}(dt);m(St,"z$__type__Props",void 0),m(St,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",validator:function(e){return(Date.now()-e)%1e3},type:"float"}}),m(St,"methods",{rand:"\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    ",noise:"\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    ",fbm:"\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    "}),m(St,"onColorize","\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  ");var Tt=function(e){function t(){var e;p(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(l(e=i(this,t,[].concat(r))),"name","fadeOut"),e}return c(t,e),f(t,null,[{key:"getEffectKey",value:function(){return"fadeOut"}},{key:"resolveDefaults",value:function(e){var t;return{fade:null!==(t=e.fade)&&void 0!==t?t:10}}}]),t}(dt);m(Tt,"z$__type__Props",void 0),m(Tt,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:function(e){var t=e;return Array.isArray(t)?2===t.length?t=[t[0],t[1],t[0],t[1]]:3===t.length?t=[t[0],t[1],t[2],t[0]]:4!==t.length&&(t=[t[0],t[0],t[0],t[0]]):"number"==typeof t&&(t=[t,t,t,t]),t}}}),m(Tt,"onColorize","\n  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  ");var Ct=function(e){function t(){var e;p(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(l(e=i(this,t,[].concat(r))),"name","radialGradient"),e}return c(t,e),f(t,null,[{key:"getEffectKey",value:function(e){return"radialGradient".concat(e.colors.length)}},{key:"resolveDefaults",value:function(e){var t,n,r,o,i,a=null!==(t=e.colors)&&void 0!==t?t:[4278190080,4294967295],s=e.stops;if(!s){s=[];for(var u=a.length-1,l=0;l<a.length;l++)s.push(l*(1/u))}return{colors:a,stops:s,width:null!==(n=e.width)&&void 0!==n?n:0,height:null!==(r=null!==(o=e.height)&&void 0!==o?o:e.width)&&void 0!==r?r:0,pivot:null!==(i=e.pivot)&&void 0!==i?i:[.5,.5]}}}]),t}(dt);m(Ct,"z$__type__Props",void 0),m(Ct,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:function(e){return e.map((function(e){return T(e)})).reduce((function(e,t){return e.concat(t)}),[])},size:function(e){return e.colors.length},method:"uniform4fv",type:"vec4"},stops:{value:[],validator:function(e,t){var n,r=null!==(n=t.colors)&&void 0!==n?n:[],o=e,i=e;if(0===o.length||o&&o.length!==r.length){for(var a=0;a<r.length;a++)o[a]?(i[a]=o[a],void 0===o[a-1]&&void 0!==i[a-2]&&(i[a-1]=i[a-2]+(o[a]-i[a-2])/2)):i[a]=a*(1/(r.length-1));o=i}return i},size:function(e){return e.colors.length},method:"uniform1fv",type:"float"}}),m(Ct,"onColorize",(function(e){var t=e.colors.length||1;return"\n      vec2 point = v_textureCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = mix(colors[0], colors[1], stopCalc);\n      for(int i = 1; i < ".concat(t,"-1; i++) {\n        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);\n        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));\n      }\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")}));var Rt=function(e){function t(){var e;p(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(l(e=i(this,t,[].concat(r))),"name","radialProgress"),e}return c(t,e),f(t,null,[{key:"getEffectKey",value:function(){return"radialProgress"}},{key:"resolveDefaults",value:function(e){var t,n,r,o,i,a,s;return{width:null!==(t=e.width)&&void 0!==t?t:10,progress:null!==(n=e.progress)&&void 0!==n?n:.5,offset:null!==(r=e.offset)&&void 0!==r?r:0,range:null!==(o=e.range)&&void 0!==o?o:2*Math.PI,rounded:null!==(i=e.rounded)&&void 0!==i&&i,radius:null!==(a=e.radius)&&void 0!==a?a:1,color:null!==(s=e.color)&&void 0!==s?s:4294967295}}}]),t}(dt);m(Rt,"z$__type__Props",void 0),m(Rt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:function(e){return e?1:0}},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,validator:function(e){return T(e)},method:"uniform4fv",type:"vec4"}}),m(Rt,"methods",{rotateUV:"\n    vec2 function(vec2 uv, float d) {\n      float s = sin(d);\n      float c = cos(d);\n      mat2 rotMatrix = mat2(c, -s, s, c);\n      return uv * rotMatrix;\n    }\n    ",drawDot:"\n    float function(vec2 uv, vec2 p, float r) {\n      uv += p;\n      float circle = length(uv) - r;\n      return clamp(-circle, 0.0, 1.0);\n    }\n    "}),m(Rt,"onEffectMask","\n    float outerRadius = radius * u_dimensions.y * 0.5;\n\n    float endAngle = range * progress - 0.0005;\n\n    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;\n\n    uv = $rotateUV(uv, -(offset));\n    float linewidth = width * u_pixelRatio;\n    float circle = length(uv) - (outerRadius - linewidth) ;\n    circle = abs(circle) - linewidth;\n    circle = clamp(-circle, 0.0, 1.0);\n\n    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);\n    float p = endAngle / (PI * 2.);\n\n    circle *= step(fract(angle), fract(p));\n\n    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));\n    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));\n\n    return mix(shaderColor, maskColor, circle);\n  "),m(Rt,"onColorize","\n    return color;\n  ");var Et=function(){function e(){p(this,e),m(this,"shCache",new Map),m(this,"shConstructors",{}),m(this,"attachedShader",null),m(this,"effectConstructors",{}),m(this,"renderer",void 0),this.registerShaderType("DefaultShader",lt),this.registerShaderType("DefaultShaderBatched",ct),this.registerShaderType("RoundedRectangle",ft),this.registerShaderType("DynamicShader",ht),this.registerShaderType("SdfShader",vt),this.registerEffectType("border",yt),this.registerEffectType("borderBottom",_t),this.registerEffectType("borderLeft",kt),this.registerEffectType("borderRight",wt),this.registerEffectType("borderTop",bt),this.registerEffectType("fadeOut",Tt),this.registerEffectType("linearGradient",mt),this.registerEffectType("radialGradient",Ct),this.registerEffectType("grayscale",xt),this.registerEffectType("glitch",St),this.registerEffectType("radius",gt),this.registerEffectType("radialProgress",Rt)}return f(e,[{key:"registerShaderType",value:function(e,t){this.shConstructors[e]=t}},{key:"registerEffectType",value:function(e,t){this.effectConstructors[e]=t}},{key:"getRegisteredEffects",value:function(){return this.effectConstructors}},{key:"getRegisteredShaders",value:function(){return this.shConstructors}},{key:"loadShader",value:function(e,t){if(!this.renderer)throw new Error("Renderer is not been defined");var n=this.shConstructors[e];if(!n)throw new Error('Shader type "'.concat(e,'" is not registered'));if("DynamicShader"===e)return this.loadDynamicShader(t);var r=n.resolveDefaults(t),o=n.makeCacheKey(r)||n.name;if(o&&this.shCache.has(o))return{shader:this.shCache.get(o),props:r};var i=new n(this.renderer,t);return o&&this.shCache.set(o,i),{shader:i,props:r}}},{key:"loadDynamicShader",value:function(e){if(!this.renderer)throw new Error("Renderer is not been defined");var t=ht.resolveDefaults(e,this.effectConstructors),n=ht.makeCacheKey(t,this.effectConstructors);if(n&&this.shCache.has(n))return{shader:this.shCache.get(n),props:t};var r=new ht(this.renderer,e,this.effectConstructors);return n&&this.shCache.set(n,r),{shader:r,props:t}}},{key:"useShader",value:function(e){this.attachedShader!==e&&(this.attachedShader&&this.attachedShader.detach(),e.attach(),this.attachedShader=e)}}]),e}(),Ft=function(){function e(){p(this,e),m(this,"activeAnimations",new Set)}return f(e,[{key:"registerAnimation",value:function(e){this.activeAnimations.add(e)}},{key:"unregisterAnimation",value:function(e){this.activeAnimations.delete(e)}},{key:"update",value:function(e){this.activeAnimations.forEach((function(t){t.update(e)}))}}]),e}(),It=function(e){function t(e,n){var r;return p(this,t),m(l(r=i(this,t,[e])),"props",void 0),r.props=t.resolveDefaults(n),r}var r;return c(t,e),f(t,[{key:"getTextureData",value:(r=o(n().mark((function e(){var t,r,o,i,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,r=t.src,o=t.premultiplyAlpha,r){e.next=3;break}return e.abrupt("return",{data:null});case 3:if(!(r instanceof ImageData)){e.next=5;break}return e.abrupt("return",{data:r,premultiplyAlpha:o});case 5:return e.next=7,fetch(r);case 7:return i=e.sent,e.next=10,i.blob();case 10:return a=e.sent,e.next=13,createImageBitmap(a,{premultiplyAlpha:o?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"});case 13:return e.t0=e.sent,e.abrupt("return",{data:e.t0});case 15:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}],[{key:"makeCacheKey",value:function(e){var n=t.resolveDefaults(e);return!(n.src instanceof ImageData)&&"ImageTexture,".concat(n.src,",").concat(n.premultiplyAlpha)}},{key:"resolveDefaults",value:function(e){var t,n;return{src:null!==(t=e.src)&&void 0!==t?t:"",premultiplyAlpha:null===(n=e.premultiplyAlpha)||void 0===n||n}}}]),t}(C);m(It,"z$__type__Props",void 0);var Nt=function(e){function t(e,n){var r;return p(this,t),m(l(r=i(this,t,[e])),"props",void 0),r.props=t.resolveDefaults(n),r}var r;return c(t,e),f(t,[{key:"getTextureData",value:(r=o(n().mark((function e(){var t,r,o,i,a,s,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=this.props,r=t.width,o=t.height,i=r*o*4,a=new Uint8ClampedArray(i),s=0;s<i;s+=4)u=Math.floor(256*Math.random()),a[s]=u,a[s+1]=u,a[s+2]=u,a[s+3]=255;return e.abrupt("return",{data:new ImageData(a,r,o)});case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}],[{key:"makeCacheKey",value:function(e){var n=t.resolveDefaults(e);return"NoiseTexture,".concat(n.width,",").concat(n.height,",").concat(n.cacheId)}},{key:"resolveDefaults",value:function(e){var t,n,r;return{width:null!==(t=e.width)&&void 0!==t?t:128,height:null!==(n=e.height)&&void 0!==n?n:128,cacheId:null!==(r=e.cacheId)&&void 0!==r?r:0}}}]),t}(C);m(Nt,"z$__type__Props",void 0);var At=function(){function e(){p(this,e),m(this,"usedMemory",0),m(this,"txConstructors",{}),m(this,"textureKeyCache",new Map),m(this,"textureIdCache",new Map),m(this,"ctxTextureCache",new WeakMap),m(this,"textureRefCountMap",new WeakMap),m(this,"renderer",void 0),this.registerTextureType("ImageTexture",It),this.registerTextureType("ColorTexture",R),this.registerTextureType("NoiseTexture",Nt),this.registerTextureType("SubTexture",E)}return f(e,[{key:"registerTextureType",value:function(e,t){this.txConstructors[e]=t}},{key:"loadTexture",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=this.txConstructors[e];if(!o)throw new Error('Texture type "'.concat(e,'" is not registered'));if(void 0!==(null==r?void 0:r.id)&&this.textureIdCache.has(r.id)&&(n=this.textureIdCache.get(r.id)),!n){var i,a=null==r?void 0:r.id,s=null!==(i=null==r?void 0:r.cacheKey)&&void 0!==i?i:o.makeCacheKey(t);n=s&&this.textureKeyCache.has(s)?this.textureKeyCache.get(s):new o(this,t),a&&this.addTextureIdToCache(a,s,n)}null!=r&&r.preload&&this.getCtxTexture(n).load();return n}},{key:"addTextureIdToCache",value:function(e,t,n){var r=this.textureIdCache,o=this.textureRefCountMap;r.set(e,n),o.has(n)?o.get(n).count++:(o.set(n,{cacheKey:t,count:1}),t&&this.textureKeyCache.set(t,n))}},{key:"removeTextureIdFromCache",value:function(e){var t=this.textureIdCache,n=this.textureRefCountMap,r=t.get(e);if(r&&(t.delete(e),n.has(r))){var o=n.get(r);d(o),o.count--,0===o.count&&(n.delete(r),o.cacheKey&&this.textureKeyCache.delete(o.cacheKey))}}},{key:"getDebugInfo",value:function(){return{keyCacheSize:this.textureKeyCache.size,idCacheSize:this.textureIdCache.size}}},{key:"getCtxTexture",value:function(e){if(this.ctxTextureCache.has(e))return this.ctxTextureCache.get(e);var t=this.renderer.createCtxTexture(e);return this.ctxTextureCache.set(e,t),t}}]),e}(),Lt=function(){function e(t){p(this,e),m(this,"textRenderers",void 0),this.textRenderers=t}return f(e,[{key:"addFontFace",value:function(e){for(var t in this.textRenderers){var n=this.textRenderers[t];n&&n.isFontFaceSupported(e)&&n.addFontFace(e)}}}],[{key:"resolveFontFace",value:function(e,t){return e.reduce((function(e,n){if(e)return e;var r=n[t.fontFamily];if(r){var o,i=new Set(r),a=b(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.descriptors.stretch===t.fontStretch&&s.descriptors.style===t.fontStyle&&s.descriptors.weight===t.fontWeight||i.delete(s)}}catch(u){a.e(u)}finally{a.f()}return i.values().next().value}}),void 0)||[][0]}}]),e}(),Pt={x:function(e,t){e.props.x=t},y:function(e,t){e.props.y=t},width:function(e,t){e.props.width=t},height:function(e,t){e.props.height=t},color:function(e,t){e.props.color=t},zIndex:function(e,t){e.props.zIndex=t},fontFamily:function(e,t){e.props.fontFamily=t},fontWeight:function(e,t){e.props.fontWeight=t},fontStyle:function(e,t){e.props.fontStyle=t},fontStretch:function(e,t){e.props.fontStretch=t},fontSize:function(e,t){e.props.fontSize=t},text:function(e,t){e.props.text=t},textAlign:function(e,t){e.props.textAlign=t},contain:function(e,t){e.props.contain=t},offsetY:function(e,t){e.props.offsetY=t},scrollable:function(e,t){e.props.scrollable=t},scrollY:function(e,t){e.props.scrollY=t},letterSpacing:function(e,t){e.props.letterSpacing=t},debug:function(e,t){e.props.debug=t}},zt=function(){function e(t){p(this,e),m(this,"stage",void 0),m(this,"set",void 0),this.stage=t;var n=y(y({},Pt),this.getPropertySetters());this.set=Object.freeze(Object.fromEntries(Object.entries(n).map((function(e){var t=w(e,2),n=t[0],r=t[1];return[n,function(e,t){e.props[n]!==t&&r(e,t)}]}))))}return f(e,[{key:"setStatus",value:function(e,t,n){e.status!==t&&(e.status=t,e.emitter.emit(t,n))}},{key:"scheduleUpdateState",value:function(e){var t=this;e.updateScheduled||(e.updateScheduled=!0,queueMicrotask((function(){e.updateScheduled=!1,t.updateState(e)})))}}]),e}();var Mt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;p(this,e),m(this,"iterator",void 0),m(this,"peekBuffer",[]),m(this,"_lastIndex",void 0),this.iterator=t,this.iterator=t,this._lastIndex=n-1,this.peekBuffer=[]}return f(e,[{key:"next",value:function(){var e=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return e.done?this._lastIndex=-1:this._lastIndex++,e}},{key:"peek",value:function(){if(this.peekBuffer.length>0)return this.peekBuffer[0];var e=this.iterator.next();return this.peekBuffer.push(e),e}},{key:"lastIndex",get:function(){return this._lastIndex}}]),e}();function Ot(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n().mark((function r(){var o,i;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=t;case 1:if(!(o<e.length)){n.next=10;break}if(void 0!==(i=e.codePointAt(o))){n.next=5;break}throw new Error("Invalid Unicode code point");case 5:return n.next=7,i;case 7:o+=i<=65535?1:2,n.next=1;break;case 10:case"end":return n.stop()}}),r)}))()}function Bt(e,t,n,r,o,i,a,s,u,l,c,h,f,p,v,g){d(p,"Font face must be loaded"),d(p.loaded,"Font face must be loaded"),d(p.data,"Font face must be loaded"),d(p.shaper,"Font face must be loaded");for(var y,m=p.data.info.size,x=s/m,w=i/x,_=u/x,k=h[e],S=(null==k?void 0:k.codepointIndex)||0,T=(null==k?void 0:k.maxX)||0,C=(null==k?void 0:k.maxY)||0,R=t,E=n,F=0,I={codepointIndex:-1,bufferOffset:-1,xStart:-1},N=p.shaper,A={letterSpacing:_},L=N.shapeText(A,new Mt(Ot(r,S),S)),P=-1,z=[],M=a/x,O=function(e,t,n){var r,o=0,i=b(n.shapeText(t,new Mt(Ot(e,0),0)));try{for(i.s();!(r=i.n()).done;){var a=r.value;a.mapped&&(o+=a.xAdvance)}}catch(s){i.e(s)}finally{i.f()}return o}("...",A,N),B=!0;B;){for(var D="both"!==c||g||E+m+m<=M,j=D?w:w-O,U=0;(y=L.next())&&!y.done;){var Y=y.value;if(e===h.length)h.push({codepointIndex:Y.cluster,maxY:C,maxX:T});else if(e>h.length)throw new Error("Unexpected lineCache length");if(32===Y.codepoint||10===Y.codepoint?-1!==I.codepointIndex&&(I.codepointIndex=-1,U=R):-1===I.codepointIndex&&(I.codepointIndex=Y.cluster,I.bufferOffset=F,I.xStart=U),Y.mapped){var W=R+Y.xOffset+Y.width;if("none"!==c&&W>=j&&-1!==I.codepointIndex&&I.codepointIndex<Y.cluster&&I.xStart>0){if(D){L=N.shapeText(A,new Mt(Ot(r,I.codepointIndex),I.codepointIndex)),F=I.bufferOffset;break}L=N.shapeText(A,new Mt(Ot("...",0),0)),R=I.xStart,F=I.bufferOffset}else{var X=R+Y.xOffset,G=E+Y.yOffset,H=!f||E+m>=f.y1/x,$=!f||E<=f.y2/x;if(H&&$){-1===P&&(P=F);var V=p.getAtlasEntry(Y.glyphId),K=V.x/p.data.common.scaleW,q=V.y/p.data.common.scaleH,Z=V.width/p.data.common.scaleW,Q=V.height/p.data.common.scaleH;l[F++]=X,l[F++]=G,l[F++]=K,l[F++]=q,l[F++]=X+Y.width,l[F++]=G,l[F++]=K+Z,l[F++]=q,l[F++]=X,l[F++]=G+Y.height,l[F++]=K,l[F++]=q+Q,l[F++]=X+Y.width,l[F++]=G+Y.height,l[F++]=K+Z,l[F++]=q+Q}C=Math.max(C,G+Y.height),R+=Y.xAdvance,T=Math.max(T,R)}}else if(10===Y.codepoint)break}-1!==P&&(z.push({bufferStart:P,bufferEnd:F}),P=-1),R=0,E+=m,e++,I.codepointIndex=-1,U=0,!v&&"both"===c&&f&&E>f.y2/x||y&&y.done?B=!1:"both"!==c||g||D||(B=!1)}if("center"===o)for(var J="none"===c?T:w,ee=0;ee<z.length;ee++)for(var te=z[ee],ne=(J-(l[te.bufferEnd-4]-l[te.bufferStart]))/2,re=te.bufferStart;re<te.bufferEnd;re+=4)l[re]+=ne;else if("right"===o)for(var oe="none"===c?T:w,ie=0;ie<z.length;ie++)for(var ae=z[ie],se=oe-(ae.bufferEnd===ae.bufferStart?0:l[ae.bufferEnd-4]-l[ae.bufferStart]),ue=ae.bufferStart;ue<ae.bufferEnd;ue+=4)l[ue]+=se;return d(y),{bufferNumFloats:F,bufferNumQuads:F/16,layoutNumCharacters:y.done?r.length-S:y.value.cluster-S+1,fullyProcessed:!!y.done,maxX:T,maxY:C}}var Dt=I(0,0,0,0),jt=function(e){function t(e){var n;return p(this,t),m(l(n=i(this,t,[e])),"ssdfFontFamilies",{}),m(l(n),"msdfFontFamilies",{}),m(l(n),"sdfShader",void 0),m(l(n),"rendererBounds",void 0),n.sdfShader=n.stage.shManager.loadShader("SdfShader").shader,n.rendererBounds={x1:0,y1:0,x2:n.stage.options.appWidth,y2:n.stage.options.appHeight},n}return c(t,e),f(t,[{key:"getPropertySetters",value:function(){var e=this;return{fontFamily:function(t,n){t.props.fontFamily=n,t.trFontFace=void 0,e.invalidateLayoutCache(t)},fontWeight:function(t,n){t.props.fontWeight=n,t.trFontFace=void 0,e.invalidateLayoutCache(t)},fontStyle:function(t,n){t.props.fontStyle=n,t.trFontFace=void 0,e.invalidateLayoutCache(t)},fontStretch:function(t,n){t.props.fontStretch=n,t.trFontFace=void 0,e.invalidateLayoutCache(t)},fontSize:function(t,n){t.props.fontSize=n,e.invalidateLayoutCache(t)},text:function(t,n){t.props.text=n,e.invalidateLayoutCache(t)},textAlign:function(t,n){t.props.textAlign=n,e.invalidateLayoutCache(t)},color:function(e,t){e.props.color=t},x:function(t,n){t.props.x=n,e.invalidateVisibleWindowCache(t)},y:function(t,n){t.props.y=n,e.invalidateVisibleWindowCache(t)},contain:function(t,n){t.props.contain=n,e.invalidateLayoutCache(t)},width:function(t,n){t.props.width=n,e.invalidateLayoutCache(t)},height:function(t,n){t.props.height=n,e.invalidateLayoutCache(t)},offsetY:function(t,n){t.props.offsetY=n,e.invalidateLayoutCache(t)},scrollable:function(t,n){t.props.scrollable=n,e.invalidateLayoutCache(t)},scrollY:function(t,n){t.props.scrollY=n,e.scheduleUpdateState(t)},letterSpacing:function(t,n){t.props.letterSpacing=n,e.invalidateLayoutCache(t)},debug:function(e,t){e.props.debug=t}}}},{key:"canRenderFont",value:function(e){var t=e.fontFamily;return t in this.ssdfFontFamilies||t in this.msdfFontFamilies||"$$SDF_FAILURE_TEST$$"===t}},{key:"isFontFaceSupported",value:function(e){return e instanceof N}},{key:"addFontFace",value:function(e){d(e instanceof N);var t=e.fontFamily,n="ssdf"===e.type?this.ssdfFontFamilies:"msdf"===e.type?this.msdfFontFamilies:void 0;if(n){var r=n[t];r||(r=new Set,n[t]=r),r.add(e)}else console.warn("Invalid font face type: ".concat(e.type))}},{key:"createState",value:function(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new h,lineCache:[],forceFullLayoutCalc:!1,renderWindow:void 0,visibleWindow:{x1:0,y1:0,x2:0,y2:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}},{key:"updateState",value:function(e){var t=this,n=e.trFontFace,r=e.textH,o=e.lineCache,i=e.debugData,a=e.forceFullLayoutCalc;if(i.updateCount++,"initialState"===e.status&&this.setStatus(e,"loading"),!n&&(n=this.resolveFontFace(e.props),e.trFontFace=n,!n)){var s="SdfTextRenderer: Could not resolve font face for family: '".concat(e.props.fontFamily,"'");return console.error(s),void this.setStatus(e,"failed",new Error(s))}if(n.loaded){d(n.data,"Font face data should be loaded");var u=e.props,l=u.text,c=u.fontSize,h=u.x,f=u.y,p=u.contain,v=u.width,g=u.height,y=u.scrollable,m="both"===p&&y?e.props.scrollY:0,x=e.renderWindow,w=n.data.info.size,b=c/w;e.distanceRange=b*n.data.distanceField.distanceRange;var _=24*l.length,k=e.vertexBuffer;(!k||k.length<_)&&(k=new Float32Array(2*_));var S=e.visibleWindow;if(!S.valid){var T=I(h,f,"none"!==p?h+v:1/0,"both"===p?f+g:1/0,Dt);A(this.rendererBounds,T,e.visibleWindow),S.valid=!0}if(!a&&x){if(h+x.x1<=S.x1&&h+x.x2>=S.x2&&f-m+x.y1<=S.y1&&f-m+x.y2>=S.y2)return void this.setStatus(e,"loaded");x=e.renderWindow=void 0,this.setStatus(e,"loading")}var C=e.props,R=C.offsetY,E=C.textAlign;if(!x){var N=S.y2-S.y1;x=function(e,t,n,r,o,i){var a=r*o,s=i.x1-e,u=i.y1-t;return F(i)?{x1:s,y1:u+n-a,x2:s+(i.x2-i.x1),y2:u+n+(i.y2-i.y1)+a}:{x1:0,y1:0,x2:0,y2:0}}(h,f,m,w,Math.ceil(N/w),S)}var L=function(e,t,n,r,o,i,a){var s=0;o&&(s=Math.min(Math.max(Math.floor(o.y1/e),0),i.length));var u=t/n+s*r;if(!(a&&u>=a/n))return{x:0,y:u,lineIndex:s}}(c,R,b,w,x,o,r);if(L){var P=e.props.letterSpacing,z=Bt(L.lineIndex,L.x,L.y,l,E,v,g,c,P,k,p,o,x,n,a,y);e.bufferUploaded=!1,e.bufferNumFloats=z.bufferNumFloats,e.bufferNumQuads=z.bufferNumQuads,e.vertexBuffer=k,e.renderWindow=x,i.lastLayoutNumCharacters=z.layoutNumCharacters,i.bufferSize=k.byteLength,z.fullyProcessed&&(e.textW=z.maxX*b,e.textH=z.maxY*b),this.setStatus(e,"loaded")}else this.setStatus(e,"loaded")}else n.once("loaded",(function(){t.scheduleUpdateState(e)}))}},{key:"renderQuads",value:function(e,t,n,r){var o,i;if(e.vertexBuffer){performance.now();var a=this.stage.renderer;this.stage.options;var s=e.props,u=s.fontSize,l=s.color,c=s.contain,h=s.scrollable,f=s.zIndex,p=s.debug,v="both"===c&&h?e.props.scrollY:0,g=e.textW,y=void 0===g?0:g,m=e.textH,x=void 0===m?0:m,w=e.distanceRange,b=e.vertexBuffer,_=e.bufferUploaded,k=e.trFontFace,S=e.webGlBuffers;if(!S){var T=a.gl,C=4*Float32Array.BYTES_PER_ELEMENT,R=T.createBuffer();d(R),e.webGlBuffers=new L([{buffer:R,attributes:{a_position:{name:"a_position",size:2,type:T.FLOAT,normalized:!1,stride:C,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:T.FLOAT,normalized:!1,stride:C,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,d(e.webGlBuffers),S=e.webGlBuffers}if(!_){var E,F,I=a.gl,N=null!==(E=null===(F=S)||void 0===F?void 0:F.getBuffer("a_textureCoordinate"))&&void 0!==E?E:null;I.bindBuffer(I.ARRAY_BUFFER,N),I.bufferData(I.ARRAY_BUFFER,b,I.STATIC_DRAW),e.bufferUploaded=!0}d(k);var A=new P(a.gl,a.options,S,this.sdfShader,{transform:t.data,color:z(l,r),size:u/((null===(o=k.data)||void 0===o?void 0:o.info.size)||0),scrollY:v,distanceRange:w,debug:p.sdfShaderDebug},r,n,{height:x,width:y},0,f),M=null===(i=e.trFontFace)||void 0===i?void 0:i.texture;d(M);var O=this.stage.txManager.getCtxTexture(M);A.addTexture(O),A.length=e.bufferNumFloats,A.numQuads=e.bufferNumQuads,a.addRenderOp(A)}}},{key:"resolveFontFace",value:function(e){return Lt.resolveFontFace([this.msdfFontFamilies,this.ssdfFontFamilies],e)}},{key:"invalidateVisibleWindowCache",value:function(e){e.visibleWindow.valid=!1,this.scheduleUpdateState(e)}},{key:"invalidateLayoutCache",value:function(e){e.visibleWindow.valid=!1,e.renderWindow=void 0,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading"),this.scheduleUpdateState(e)}}]),t}(zt),Ut=function(){function e(t,n){p(this,e),m(this,"_canvas",void 0),m(this,"_context",void 0),m(this,"_settings",void 0),m(this,"renderInfo",void 0),this._canvas=t,this._context=n,this._settings=this.mergeDefaults({})}return f(e,[{key:"settings",get:function(){return this._settings},set:function(e){this._settings=this.mergeDefaults(e)}},{key:"getPrecision",value:function(){return this._settings.precision}},{key:"setFontProperties",value:function(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}},{key:"_getFontSetting",value:function(){for(var e=[this._settings.fontFace],t=[],n=0,r=e.length;n<r;n++)"serif"===e[n]||"sans-serif"===e[n]?t.push(e[n]):t.push('"'.concat(e[n],'"'));return"".concat(this._settings.fontStyle," ").concat(this._settings.fontSize*this.getPrecision(),"px ").concat(t.join(","))}},{key:"_load",value:function(){var e=this;if(document.fonts){var t=this._getFontSetting();try{if(!document.fonts.check(t,this._settings.text))return document.fonts.load(t,this._settings.text).catch((function(e){console.warn("[Lightning] Font load error",e,t)})).then((function(){document.fonts.check(t,e._settings.text)||console.warn("[Lightning] Font not found",t)}))}catch(n){console.warn("[Lightning] Can't check font loading for "+t)}}}},{key:"calculateRenderInfo",value:function(){var e={},t=this.getPrecision(),n=this._settings.paddingLeft*t,r=this._settings.paddingRight*t,o=this._settings.fontSize*t,i=null===this._settings.offsetY?null:this._settings.offsetY*t,a=(this._settings.lineHeight||o)*t,s=this._settings.w*t,u=this._settings.h*t,l=this._settings.wordWrapWidth*t,c=this._settings.cutSx*t,d=this._settings.cutEx*t,h=this._settings.cutSy*t,f=this._settings.cutEy*t,p=(this._settings.letterSpacing||0)*t,v=this._settings.textIndent*t;this.setFontProperties();var g,y=s||2048/this.getPrecision(),m=y-n;if(m<10&&(y+=10-m,m=10),l||(l=m),this._settings.textOverflow&&!this._settings.wordWrap){var x;switch(this._settings.textOverflow){case"clip":x="";break;case"ellipsis":x=this._settings.maxLinesSuffix;break;default:x=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,l-v,x)}if(this._settings.wordWrap)g=this.wrapText(this._settings.text,l,p,v);else for(var w=(g={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]}).l.length,b=0;b<w-1;b++)g.n.push(b);var _=g.l;if(this._settings.maxLines&&_.length>this._settings.maxLines){var k,S=_.slice(0,this._settings.maxLines),T=null;if(this._settings.maxLinesSuffix){var C=this._settings.maxLinesSuffix?this.measureText(this._settings.maxLinesSuffix):0,R=this.wrapText(S[S.length-1],l-C,p,v);S[S.length-1]="".concat(R.l[0]).concat(this._settings.maxLinesSuffix),T=[R.l.length>1?R.l[1]:""]}else T=[""];var E=_.length,F=0,I=g.n.length;for(k=this._settings.maxLines;k<E;k++)T[F]+="".concat(T[F]?" ":"").concat(_[k]),k+1<I&&g.n[k+1]&&F++;e.remainingText=T.join("\n"),e.moreTextLines=!0,_=S}else e.moreTextLines=!1,e.remainingText="";for(var N,A=0,L=[],P=0;P<_.length;P++){var z=this.measureText(_[P],p)+(0===P?v:0);L.push(z),A=Math.max(A,z)}if(e.lineWidths=L,s||(y=A+n+r,m=A),a=a||o,u)N=u;else{var M="bottom"!=this._settings.textBaseline?.5*o:0;N=a*(_.length-1)+M+Math.max(a,o)+(i||0)}return null===i&&(i=o),e.w=y,e.h=N,e.lines=_,e.precision=t,y||(y=1),N||(N=1),(c||d)&&(y=Math.min(y,d-c)),(h||f)&&(N=Math.min(N,f-h)),e.width=y,e.innerWidth=m,e.height=N,e.fontSize=o,e.cutSx=c,e.cutSy=h,e.cutEx=d,e.cutEy=f,e.lineHeight=a,e.lineWidths=L,e.offsetY=i,e.paddingLeft=n,e.paddingRight=r,e.letterSpacing=p,e.textIndent=v,e}},{key:"draw",value:function(e,t){var n,r,o=this.getPrecision(),i=(null==t?void 0:t.lines)||e.lines,a=(null==t?void 0:t.lineWidths)||e.lineWidths,s=t?t.lines.length*e.lineHeight:e.height;this._canvas.width=Math.min(Math.ceil(e.width+this._settings.textRenderIssueMargin),2048),this._canvas.height=Math.min(Math.ceil(s),2048),this.setFontProperties(),e.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(e.cutSx||e.cutSy)&&this._context.translate(-e.cutSx,-e.cutSy);for(var u=[],l=0,c=i.length;l<c;l++)n=0===l?e.textIndent:0,r=l*e.lineHeight+e.offsetY,"middle"==this._settings.verticalAlign?r+=(e.lineHeight-e.fontSize)/2:"bottom"==this._settings.verticalAlign&&(r+=e.lineHeight-e.fontSize),"right"===this._settings.textAlign?n+=e.innerWidth-a[l]:"center"===this._settings.textAlign&&(n+=(e.innerWidth-a[l])/2),n+=e.paddingLeft,u.push({text:i[l],x:n,y:r,w:a[l]});if(this._settings.highlight){var d=this._settings.highlightColor,h=this._settings.highlightHeight*o||1.5*e.fontSize,f=this._settings.highlightOffset*o,p=null!==this._settings.highlightPaddingLeft?this._settings.highlightPaddingLeft*o:e.paddingLeft,v=null!==this._settings.highlightPaddingRight?this._settings.highlightPaddingRight*o:e.paddingRight;this._context.fillStyle=M(d);for(var g=0;g<u.length;g++){var y=u[g];this._context.fillRect(y.x-p,y.y-e.offsetY+f,y.w+v+p,h)}}var m=null;this._settings.shadow&&(m=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=M(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*o,this._context.shadowOffsetY=this._settings.shadowOffsetY*o,this._context.shadowBlur=this._settings.shadowBlur*o),this._context.fillStyle=M(this._settings.textColor);for(var x=0,w=u.length;x<w;x++){var b=u[x];if(0===e.letterSpacing)this._context.fillText(b.text,b.x,b.y);else for(var _=b.text.split(""),k=b.x,S=0,T=_.length;S<T;S++)this._context.fillText(_[S],k,b.y),k+=this.measureText(_[S],e.letterSpacing)}m&&(this._context.shadowColor=m[0],this._context.shadowOffsetX=m[1],this._context.shadowOffsetY=m[2],this._context.shadowBlur=m[3]),(e.cutSx||e.cutSy)&&this._context.translate(e.cutSx,e.cutSy),this.renderInfo=e}},{key:"wrapWord",value:function(e,t,n){var r=this._context.measureText(n).width,o=e.length,i=this._context.measureText(e).width;if(i<=t)return e;var a=Math.floor(t*o/i),s=this._context.measureText(e.substring(0,a)).width+r;if(s>t)for(;a>0&&(s=this._context.measureText(e.substring(0,a)).width+r)>t;)a-=1;else for(;a<o;){if(!((s=this._context.measureText(e.substring(0,a)).width+r)<t)){a-=1;break}a+=1}return e.substring(0,a)+(t>=r?n:"")}},{key:"wrapText",value:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=e.split(/\r?\n/g),i=[],a=[],s=0;s<o.length;s++){for(var u=[],l="",c=t-r,d=o[s].split(" "),h=0;h<d.length;h++){var f=this.measureText(d[h],n),p=f+this.measureText(" ",n);0===h||p>c?(h>0&&(u.push(l),l=""),l+=d[h],c=t-f-(0===h?r:0)):(c-=p,l+=" ".concat(d[h]))}u.push(l),l="",i=i.concat(u),s<o.length-1&&a.push(i.length)}return{l:i,n:a}}},{key:"measureText",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n?e.split("").reduce((function(e,r){return e+t._context.measureText(r).width+n}),0):this._context.measureText(e).width}},{key:"mergeDefaults",value:function(e){return y({text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxLinesSuffix:"..",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0},e)}}]),e}(),Yt="undefined"==typeof self?globalThis:self,Wt=(null===(r=Yt.document)||void 0===r?void 0:r.fonts)||Yt.fonts;var Xt=I(0,0,0,0),Gt=function(e){function t(e){var n;p(this,t),m(l(n=i(this,t,[e])),"canvas",void 0),m(l(n),"context",void 0),m(l(n),"rendererBounds",void 0),"undefined"!=typeof OffscreenCanvas?n.canvas=new OffscreenCanvas(0,0):n.canvas=document.createElement("canvas");var r=n.canvas.getContext("2d");return r||(n.canvas=document.createElement("canvas"),r=n.canvas.getContext("2d")),d(r),n.context=r,n.rendererBounds={x1:0,y1:0,x2:n.stage.options.appWidth,y2:n.stage.options.appHeight},n}return c(t,e),f(t,[{key:"getPropertySetters",value:function(){var e=this;return{fontFamily:function(t,n){t.props.fontFamily=n,t.fontInfo=void 0,e.invalidateLayoutCache(t)},fontWeight:function(t,n){t.props.fontWeight=n,t.fontInfo=void 0,e.invalidateLayoutCache(t)},fontStyle:function(t,n){t.props.fontStyle=n,t.fontInfo=void 0,e.invalidateLayoutCache(t)},fontStretch:function(t,n){t.props.fontStretch=n,t.fontInfo=void 0,e.invalidateLayoutCache(t)},fontSize:function(t,n){t.props.fontSize=n,t.fontInfo=void 0,e.invalidateLayoutCache(t)},text:function(t,n){t.props.text=n,e.invalidateLayoutCache(t)},textAlign:function(t,n){t.props.textAlign=n,e.invalidateLayoutCache(t)},color:function(t,n){t.props.color=n,e.invalidateLayoutCache(t)},x:function(t,n){t.props.x=n,e.invalidateVisibleWindowCache(t)},y:function(t,n){t.props.y=n,e.invalidateVisibleWindowCache(t)},contain:function(t,n){t.props.contain=n,e.invalidateLayoutCache(t)},width:function(t,n){t.props.width=n,e.invalidateLayoutCache(t)},height:function(t,n){t.props.height=n,e.invalidateLayoutCache(t)},offsetY:function(t,n){t.props.offsetY=n,e.invalidateLayoutCache(t)},scrollY:function(e,t){e.props.scrollY=t},letterSpacing:function(t,n){t.props.letterSpacing=n,e.invalidateLayoutCache(t)}}}},{key:"canRenderFont",value:function(e){return!0}},{key:"isFontFaceSupported",value:function(e){return e instanceof O}},{key:"addFontFace",value:function(e){d(e instanceof O),Wt.add(e.fontFace)}},{key:"createState",value:function(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new h,canvasPages:void 0,lightning2TextRenderer:new Ut(this.canvas,this.context),renderWindow:void 0,visibleWindow:{x1:0,y1:0,x2:0,y2:0,valid:!1},renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,fontFaceLoadedHandler:void 0,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}},{key:"updateState",value:function(e){if("initialState"===e.status&&this.setStatus(e,"loading"),!e.fontInfo){var t=(n=e.props,r=n.fontFamily,o=n.fontStyle,i=n.fontWeight,a=n.fontStretch,s=n.fontSize,[o,i,a,"".concat(s,"px"),r].join(" "));if(e.fontInfo={cssString:t,loaded:!1},!e.fontInfo.loaded)return void Wt.load(t).then(this.onFontLoaded.bind(this,e,t)).catch(this.onFontLoadError.bind(this,e,t))}var n,r,o,i,a,s;if(e.fontInfo.loaded){e.renderInfo||(e.lightning2TextRenderer.settings={text:e.props.text,textAlign:e.props.textAlign,fontFace:e.props.fontFamily,fontSize:e.props.fontSize,fontStyle:[e.props.fontStretch,e.props.fontStyle,e.props.fontWeight].join(" "),textColor:T(e.props.color),offsetY:e.props.fontSize+e.props.offsetY,wordWrap:"none"!==e.props.contain,wordWrapWidth:"none"===e.props.contain?void 0:e.props.width,letterSpacing:e.props.letterSpacing},e.renderInfo=e.lightning2TextRenderer.calculateRenderInfo(),e.textH=e.renderInfo.lineHeight*e.renderInfo.lines.length,e.textW=e.renderInfo.width,e.renderWindow=void 0);var u=e.props,l=u.x,c=u.y,d=u.width,h=u.height,f=u.scrollY,p=u.contain,v=e.visibleWindow,g=e.renderWindow,y=e.canvasPages;if(!v.valid){var m=I(l,c,"none"!==p?l+d:1/0,"both"===p?c+h:1/0,Xt);A(this.rendererBounds,m,v),v.valid=!0}var x=v.y2-v.y1,w=Math.ceil(x/e.renderInfo.lineHeight);if(0===x)return y=void 0,g=void 0,void this.setStatus(e,"loaded");if(g&&y){var _=l+g.x1,k=c-f+g.y1,S=l+g.x2,C=c-f+g.y2;if(_<=v.x1&&S>=v.x2&&k<=v.y1&&C>=v.y2)return void this.setStatus(e,"loaded");C<v.y2?(g.y1+=w*e.renderInfo.lineHeight,g.y2+=w*e.renderInfo.lineHeight,y.push(y.shift()),y[2].lineNumStart=y[1].lineNumStart+w,y[2].lineNumEnd=y[2].lineNumStart+w,y[2].valid=!1):k>v.y1&&(g.y1-=w*e.renderInfo.lineHeight,g.y2-=w*e.renderInfo.lineHeight,y.unshift(y.pop()),y[0].lineNumStart=y[1].lineNumStart-w,y[0].lineNumEnd=y[0].lineNumStart+w,y[0].valid=!1)}else{var R,E,F,N=e.renderInfo.lineHeight*w,L=Math.ceil(f/N),P=L*w,z=P-w,M=P+w;y=[{texture:null===(R=y)||void 0===R?void 0:R[0].texture,lineNumStart:z,lineNumEnd:z+w,valid:!1},{texture:null===(E=y)||void 0===E?void 0:E[1].texture,lineNumStart:P,lineNumEnd:P+w,valid:!1},{texture:null===(F=y)||void 0===F?void 0:F[2].texture,lineNumStart:M,lineNumEnd:M+w,valid:!1}],e.canvasPages=y;var O=L*N;g={x1:0,y1:O-N,x2:d,y2:O+2*N}}e.renderWindow=g,performance.now();var B,D=b(y);try{for(D.s();!(B=D.n()).done;){var j=B.value;j.valid||(j.lineNumStart<0?(j.texture=this.stage.txManager.loadTexture("ImageTexture",{src:""}),j.valid=!0):(e.lightning2TextRenderer.draw(e.renderInfo,{lines:e.renderInfo.lines.slice(j.lineNumStart,j.lineNumEnd),lineWidths:e.renderInfo.lineWidths.slice(j.lineNumStart,j.lineNumEnd)}),0!==this.canvas.width&&0!==this.canvas.height&&(j.texture=this.stage.txManager.loadTexture("ImageTexture",{src:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)},{preload:!0})),j.valid=!0))}}catch(U){D.e(U)}finally{D.f()}this.setStatus(e,"loaded")}}},{key:"renderQuads",value:function(e,t,n,r){var o=this.stage,i=e.canvasPages,a=e.textW,s=void 0===a?0:a,u=e.textH,l=void 0===u?0:u,c=e.renderWindow;if(i&&c){var h=e.props,f=h.x,p=h.y,v=h.scrollY,g=h.contain,y=h.width,m=h.height,x={x:f,y:p,width:"none"!==g?y:s,height:"both"===g?m:l};k({x:0,y:0,width:o.options.appWidth,height:o.options.appHeight},x),d(i,"canvasPages is not defined"),d(c,"renderWindow is not defined");var w,b,S,T,C,R,E=(c.y2-c.y1)/3,F=e.props,I=F.zIndex,N=F.color,A=r*B(N),L=_(4294967295,A);if(i[0].valid)this.stage.renderer.addQuad({alpha:A,clippingRect:n,colorBl:L,colorBr:L,colorTl:L,colorTr:L,width:(null===(w=i[0].texture)||void 0===w||null===(w=w.dimensions)||void 0===w?void 0:w.width)||0,height:(null===(b=i[0].texture)||void 0===b||null===(b=b.dimensions)||void 0===b?void 0:b.height)||0,texture:i[0].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:I,tx:t.tx,ty:t.ty-v+c.y1,ta:t.ta,tb:t.tb,tc:t.tc,td:t.td});if(i[1].valid)this.stage.renderer.addQuad({alpha:A,clippingRect:n,colorBl:L,colorBr:L,colorTl:L,colorTr:L,width:(null===(S=i[1].texture)||void 0===S||null===(S=S.dimensions)||void 0===S?void 0:S.width)||0,height:(null===(T=i[1].texture)||void 0===T||null===(T=T.dimensions)||void 0===T?void 0:T.height)||0,texture:i[1].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:I,tx:t.tx,ty:t.ty-v+c.y1+E,ta:t.ta,tb:t.tb,tc:t.tc,td:t.td});if(i[2].valid)this.stage.renderer.addQuad({alpha:A,clippingRect:n,colorBl:L,colorBr:L,colorTl:L,colorTr:L,width:(null===(C=i[2].texture)||void 0===C||null===(C=C.dimensions)||void 0===C?void 0:C.width)||0,height:(null===(R=i[2].texture)||void 0===R||null===(R=R.dimensions)||void 0===R?void 0:R.height)||0,texture:i[2].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:I,tx:t.tx,ty:t.ty-v+c.y1+E+E,ta:t.ta,tb:t.tb,tc:t.tc,td:t.td})}}},{key:"invalidateVisibleWindowCache",value:function(e){e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}},{key:"invalidateLayoutCache",value:function(e){e.renderInfo=void 0,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}},{key:"onFontLoaded",value:function(e,t){var n;t===(null===(n=e.fontInfo)||void 0===n?void 0:n.cssString)&&e.fontInfo&&(e.fontInfo.loaded=!0,this.scheduleUpdateState(e))}},{key:"onFontLoadError",value:function(e,t,n){var r;t===(null===(r=e.fontInfo)||void 0===r?void 0:r.cssString)&&e.fontInfo&&(e.fontInfo.loaded=!0,console.error("CanvasTextRenderer: Error loading font '".concat(e.fontInfo.cssString,"'"),n),this.scheduleUpdateState(e))}}]),t}(zt),Ht=function(e){function t(e){var n;p(this,t),m(l(n=i(this,t)),"options",void 0),m(l(n),"animationManager",void 0),m(l(n),"txManager",void 0),m(l(n),"fontManager",void 0),m(l(n),"textRenderers",void 0),m(l(n),"shManager",void 0),m(l(n),"renderer",void 0),m(l(n),"root",void 0),m(l(n),"deltaTime",0),m(l(n),"lastFrameTime",0),m(l(n),"currentFrameTime",0),m(l(n),"fpsNumFrames",0),m(l(n),"fpsElapsedTime",0),m(l(n),"renderRequested",!1),n.options=e;var r=e.canvas,o=e.clearColor,a=e.rootId,s=e.debug,u=e.appWidth,c=e.appHeight;n.txManager=new At,n.shManager=new Et,n.animationManager=new Ft,null!=s&&s.monitorTextureCache&&setInterval((function(){d(n.txManager);var e=n.txManager.getDebugInfo();console.log("Texture ID Cache Size: ",e.idCacheSize),console.log("Texture Key Cache Size: ",e.keyCacheSize)}),1e3),n.renderer=new D({stage:l(n),canvas:r,pixelRatio:e.devicePhysicalPixelRatio*e.deviceLogicalPixelRatio,clearColor:null!=o?o:4278190080,bufferMemory:2e6,txManager:n.txManager,shManager:n.shManager}),n.txManager.renderer=n.renderer,n.textRenderers={canvas:new Gt(l(n)),sdf:new jt(l(n))},n.fontManager=new Lt(n.textRenderers);var h,f=new it(l(n),{id:a,x:0,y:0,width:u,height:c,alpha:1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null});return n.root=f,h=l(n),requestAnimationFrame((function e(){h.updateAnimations(),h.hasSceneUpdates()?(h.drawFrame(),requestAnimationFrame(e)):setTimeout(e,16.666666666666668)})),n}return c(t,e),f(t,[{key:"updateAnimations",value:function(){var e=this.animationManager;this.root&&(this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=performance?performance.now():Date.now(),this.deltaTime=this.lastFrameTime?this.currentFrameTime-this.lastFrameTime:100/6,e.update(this.deltaTime))}},{key:"hasSceneUpdates",value:function(){return!!this.root.updateType||this.renderRequested}},{key:"drawFrame",value:function(){var e=this.renderer,t=this.renderRequested;0!==this.root.updateType&&this.root.update(this.deltaTime),null==e||e.reset(),this.addQuads(this.root),null==e||e.render(),t&&(this.renderRequested=!1);var n=this.options.fpsUpdateInterval;if(n&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=n)){var r=Math.round(1e3*this.fpsNumFrames/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.emit("fpsUpdate",r)}}},{key:"addQuads",value:function(e){d(this.renderer&&e.globalTransform),e.isRenderable&&e.renderQuads(this.renderer);for(var t=0;t<e.children.length;t++){var n=e.children[t];n&&(0!==(null==n?void 0:n.worldAlpha)&&this.addQuads(n))}}},{key:"requestRender",value:function(){this.renderRequested=!0}},{key:"resolveTextRenderer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=!1;if(t){var r=this.textRenderers[t];r?r.canRenderFont(e)||(console.warn("Cannot use override text renderer '".concat(t,"' for font"),e),t=null,n=!0):(console.warn("Text renderer override '".concat(t,"' not found.")),t=null,n=!0)}if(!t){for(var o=0,i=Object.entries(this.textRenderers);o<i.length;o++){var a=w(i[o],2),s=a[0],u=a[1];if("canvas"!==s&&u.canRenderFont(e)){t=s;break}}t||(t="canvas")}n&&console.warn("Falling back to text renderer ".concat(String(t)));var l=this.textRenderers[t];return d(l,"resolvedTextRenderer undefined"),l}}]),t}(h),$t=function(e){function n(e,t){var r;p(this,n),m(l(r=i(this,n,[e,t])),"textRenderer",void 0),m(l(r),"trState",void 0),m(l(r),"_textRendererOverride",null),m(l(r),"onTextLoaded",(function(){var e=l(r).contain,t=r.trState.props.width,n=r.trState.props.height,o=r.trState.textW||0,i=r.trState.textH||0;"both"===e?(r.props.width=t,r.props.height=n):"width"===e?(r.props.width=t,r.props.height=i):"none"===e&&(r.props.width=o,r.props.height=i),r.updateLocalTransform(),r.stage.requestRender(),r.emit("loaded",{type:"text",dimensions:{width:r.trState.textW||0,height:r.trState.textH||0}})})),m(l(r),"onTextFailed",(function(e,t){r.emit("failed",{type:"text",error:t})})),r._textRendererOverride=t.textRendererOverride;var o=r.resolveTextRendererAndState({x:r.absX,y:r.absY,width:t.width,height:t.height,textAlign:t.textAlign,color:t.color,zIndex:t.zIndex,contain:t.contain,scrollable:t.scrollable,scrollY:t.scrollY,offsetY:t.offsetY,letterSpacing:t.letterSpacing,debug:t.debug,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStretch:t.fontStretch,fontStyle:t.fontStyle,fontWeight:t.fontWeight,text:t.text},void 0),a=o.resolvedTextRenderer,s=o.textRendererState;return r.textRenderer=a,r.trState=s,r}return c(n,e),f(n,[{key:"width",get:function(){return this.trState.props.width},set:function(e){this.textRenderer.set.width(this.trState,e)}},{key:"height",get:function(){return this.trState.props.height},set:function(e){this.textRenderer.set.height(this.trState,e)}},{key:"color",get:function(){return this.trState.props.color},set:function(e){this.textRenderer.set.color(this.trState,e)}},{key:"text",get:function(){return this.trState.props.text},set:function(e){this.textRenderer.set.text(this.trState,e),this.checkIsRenderable()}},{key:"textRendererOverride",get:function(){return this._textRendererOverride},set:function(e){this._textRendererOverride=e;var t=this.resolveTextRendererAndState(this.trState.props,this.trState),n=t.resolvedTextRenderer,r=t.textRendererState;this.textRenderer=n,this.trState=r}},{key:"fontSize",get:function(){return this.trState.props.fontSize},set:function(e){this.textRenderer.set.fontSize(this.trState,e)}},{key:"fontFamily",get:function(){return this.trState.props.fontFamily},set:function(e){this.textRenderer.set.fontFamily(this.trState,e)}},{key:"fontStretch",get:function(){return this.trState.props.fontStretch},set:function(e){this.textRenderer.set.fontStretch(this.trState,e)}},{key:"fontStyle",get:function(){return this.trState.props.fontStyle},set:function(e){this.textRenderer.set.fontStyle(this.trState,e)}},{key:"fontWeight",get:function(){return this.trState.props.fontWeight},set:function(e){this.textRenderer.set.fontWeight(this.trState,e)}},{key:"textAlign",get:function(){return this.trState.props.textAlign},set:function(e){this.textRenderer.set.textAlign(this.trState,e)}},{key:"contain",get:function(){return this.trState.props.contain},set:function(e){this.textRenderer.set.contain(this.trState,e)}},{key:"scrollable",get:function(){return this.trState.props.scrollable},set:function(e){this.textRenderer.set.scrollable(this.trState,e)}},{key:"scrollY",get:function(){return this.trState.props.scrollY},set:function(e){this.textRenderer.set.scrollY(this.trState,e)}},{key:"offsetY",get:function(){return this.trState.props.offsetY},set:function(e){this.textRenderer.set.offsetY(this.trState,e)}},{key:"letterSpacing",get:function(){return this.trState.props.letterSpacing},set:function(e){this.textRenderer.set.letterSpacing(this.trState,e)}},{key:"debug",get:function(){return this.trState.props.debug},set:function(e){this.textRenderer.set.debug(this.trState,e)}},{key:"update",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t(u(n.prototype),"update",this).call(this,e,r),d(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}},{key:"checkIsRenderable",value:function(){return!!t(u(n.prototype),"checkIsRenderable",this).call(this)||(""!==this.trState.props.text?this.isRenderable=!0:this.isRenderable=!1)}},{key:"renderQuads",value:function(e){d(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha)}},{key:"resolveTextRendererAndState",value:function(e,t){var n=this.stage.resolveTextRenderer(e,this._textRendererOverride),r=n.createState(e);return t&&["loading","loaded","failed"].forEach((function(e){t.emitter.off(e)})),r.emitter.on("loaded",this.onTextLoaded),r.emitter.on("failed",this.onTextFailed),n.scheduleUpdateState(r),{resolvedTextRenderer:n,textRendererState:r}}}]),n}(it),Vt=function(e){function t(e,n,r){return p(this,t),i(this,t,[e,n,r,new $t(r,{id:st(),x:e.x,y:e.y,width:e.width,height:e.height,alpha:e.alpha,clipping:e.clipping,color:e.color,colorTop:e.colorTop,colorBottom:e.colorBottom,colorLeft:e.colorLeft,colorRight:e.colorRight,colorTl:e.colorTl,colorTr:e.colorTr,colorBl:e.colorBl,colorBr:e.colorBr,zIndex:e.zIndex,zIndexLocked:e.zIndexLocked,scaleX:e.scaleX,scaleY:e.scaleY,mountX:e.mountX,mountY:e.mountY,mount:e.mount,pivot:e.pivot,pivotX:e.pivotX,pivotY:e.pivotY,rotation:e.rotation,text:e.text,fontSize:e.fontSize,fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontStretch:e.fontStretch,fontStyle:e.fontStyle,contain:e.contain,scrollable:e.scrollable,letterSpacing:e.letterSpacing,textAlign:e.textAlign,scrollY:e.scrollY,offsetY:e.offsetY,textRendererOverride:e.textRendererOverride,debug:e.debug,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null})])}return c(t,e),f(t,[{key:"text",get:function(){return this.coreNode.text},set:function(e){this.coreNode.text=e}},{key:"textRendererOverride",get:function(){return this.coreNode.textRendererOverride},set:function(e){this.coreNode.textRendererOverride=e}},{key:"fontSize",get:function(){return this.coreNode.fontSize},set:function(e){this.coreNode.fontSize=e}},{key:"fontFamily",get:function(){return this.coreNode.fontFamily},set:function(e){this.coreNode.fontFamily=e}},{key:"fontWeight",get:function(){return this.coreNode.fontWeight},set:function(e){this.coreNode.fontWeight=e}},{key:"fontStretch",get:function(){return this.coreNode.fontStretch},set:function(e){this.coreNode.fontStretch=e}},{key:"fontStyle",get:function(){return this.coreNode.fontStyle},set:function(e){this.coreNode.fontStyle=e}},{key:"textAlign",get:function(){return this.coreNode.textAlign},set:function(e){this.coreNode.textAlign=e}},{key:"contain",get:function(){return this.coreNode.contain},set:function(e){this.coreNode.contain=e}},{key:"scrollable",get:function(){return this.coreNode.scrollable},set:function(e){this.coreNode.scrollable=e}},{key:"scrollY",get:function(){return this.coreNode.scrollY},set:function(e){this.coreNode.scrollY=e}},{key:"offsetY",get:function(){return this.coreNode.offsetY},set:function(e){this.coreNode.offsetY=e}},{key:"letterSpacing",get:function(){return this.coreNode.letterSpacing},set:function(e){this.coreNode.letterSpacing=e}},{key:"debug",get:function(){return this.coreNode.debug},set:function(e){this.coreNode.debug=e}}]),t}(ut),Kt=function(e,t,n){return e()};function qt(e,t){return Zt.apply(this,arguments)}function Zt(){return(Zt=o(n().mark((function e(t,r){var o,i,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Loading core extension",t),e.next=4,Kt((function(){return s.import(t)}),void 0);case 4:o=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error("The core extension module at '".concat(t,"' could not be loaded.")),console.error(e.t0),e.abrupt("return");case 12:if(o.default){e.next=15;break}return console.error("The core extension module at '".concat(t,"' does not have a default export.")),e.abrupt("return");case 15:if(i=o.default,!(i.prototype instanceof j)){e.next=29;break}return a=new i,e.prev=18,e.next=21,a.run(r);case 21:e.next=27;break;case 23:e.prev=23,e.t1=e.catch(18),console.error("The core extension at '".concat(t,"' threw an error.")),console.error(e.t1);case 27:e.next=30;break;case 29:console.error("The core extension at '".concat(t,"' does not extend CoreExtension."));case 30:case"end":return e.stop()}}),e,null,[[0,7],[18,23]])})))).apply(this,arguments)}var Qt,Jt,en=function(){function e(){p(this,e),m(this,"root",null),m(this,"stage",null),m(this,"rendererMain",null)}var t;return f(e,[{key:"init",value:(t=o(n().mark((function e(t,r,o){var i,a=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stage=new Ht({rootId:st(),appWidth:r.appWidth,appHeight:r.appHeight,deviceLogicalPixelRatio:r.deviceLogicalPixelRatio,devicePhysicalPixelRatio:r.devicePhysicalPixelRatio,clearColor:r.clearColor,canvas:o,fpsUpdateInterval:r.fpsUpdateInterval,debug:{monitorTextureCache:!1}}),this.rendererMain=t,d(this.stage.root),i=new ut(t.resolveNodeDefaults({}),this.rendererMain,this.stage,this.stage.root),this.root=i,i.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,i)),this.onCreateNode(i),!r.coreExtensionModule){e.next=10;break}return e.next=10,qt(r.coreExtensionModule,this.stage);case 10:this.stage.on("fpsUpdate",(function(e,t){a.onFpsUpdate(t)}));case 11:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"createNode",value:function(e){d(this.rendererMain),d(this.stage);var t=new ut(e,this.rendererMain,this.stage);return t.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,t)),this.onCreateNode(t),t}},{key:"createTextNode",value:function(e){d(this.rendererMain),d(this.stage);var t=new Vt(e,this.rendererMain,this.stage);return t.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,t)),this.onCreateNode(t),t}},{key:"destroyNode",value:function(e){e.destroy()}},{key:"releaseTexture",value:function(e){var t=this.stage;d(t),t.txManager.removeTextureIdFromCache(e)}},{key:"getRootNode",value:function(){return d(this.root),this.root}},{key:"onCreateNode",value:function(e){throw new Error("Method not implemented.")}},{key:"onBeforeDestroyNode",value:function(e){throw new Error("Method not implemented.")}},{key:"onFpsUpdate",value:function(e){throw new Error("Method not implemented.")}}]),e}();function tn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new en;return Qt=new et(e,e.rootId||"app",t),Jt=Qt.createShader.bind(Qt),Qt}var nn=function(e){function t(e){var n;return p(this,t),(n=i(this,t))._parent=e,n}return c(t,e),f(t,[{key:"selected",get:function(){return this[this._parent.selected||0]}},{key:"firstChild",get:function(){return this[0]}},{key:"insert",value:function(e,t){if(t){var n=this.indexOf(t);this.splice(n,0,e)}else this.push(e);e.parent=this._parent,this._parent._isDirty=!0}},{key:"remove",value:function(e){var t=this.indexOf(e);t>=0&&this.splice(t,1)}}]),t}(e(Array));s.meta.env={BASE_URL:"/solid-demo-app/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!0}||{MODE:"development"};var rn={debug:!1,animationsEnabled:!0,animationSettings:{duration:250,easing:"ease-in-out"},fontSettings:{fontFamily:"Ubuntu",fontSize:100}};function on(e){return"function"==typeof e}function an(e){return Array.isArray(e)}var sn=function(e){function t(e){var n,r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(this,t);var s=function(){for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];n=i(r,t,[].concat(o))};return an(o)?s.apply(void 0,v(o)):"string"==typeof o?s(o):s.apply(void 0,v(Object.entries(o).filter((function(e){var t=w(e,2);t[0];return t[1]})).map((function(e){return w(e,1)[0]})))),n.onChange=e,a(n,l(n))}return c(t,e),f(t,[{key:"has",value:function(e){return this.indexOf(e)>=0}},{key:"is",value:function(e){return this.indexOf(e)>=0}},{key:"add",value:function(e){this.push(e),this.onChange()}},{key:"toggle",value:function(e){this.has(e)?this.remove(e):this.add(e)}},{key:"remove",value:function(e){var t=this.indexOf(e);t>=0&&(this.splice(t,1),this.onChange())}}]),t}(e(Array));var un=rn.animationSettings;function ln(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{set:function(t){"number"==typeof t&&(t={width:t,color:255}),this.effects=y(y({},this.effects||{}),m({},"border".concat(e),t)),this["_border".concat(e)]=t},get:function(){return this["_border".concat(e)]}}}var cn=["alpha","color","colorTop","colorRight","colorLeft","colorBottom","colorTl","colorTr","colorBl","colorBr","height","fontSize","lineHeight","mount","mountX","mountY","pivot","pivotX","pivotY","rotation","scale","width","worldX","worldY","x","y","zIndex","zIndexLocked"],dn=["clipping","contain","fontFamily","src","text","textAlign","texture","maxLines","maxLinesSuffix","textBaseline","textOverflow","verticalAlign","wordWrap"],hn=function(e){function t(e){var n;p(this,t),(n=i(this,t)).lng=null,n._parent=null,n.name=e,n.rendered=!1,n.autofocus=!1,n._renderProps={x:0,y:0},n.children=new nn(l(n));var r,o=b(cn);try{var a=function(){var e=r.value;Object.defineProperty(l(n),e,{get:function(){return this["_".concat(e)]||this.lng&&this.lng[e]},set:function(t){this["_".concat(e)]=t,this._sendToLightningAnimatable(e,t)}})};for(o.s();!(r=o.n()).done;)a()}catch(d){o.e(d)}finally{o.f()}var s,u=b(dn);try{var c=function(){var e=s.value;Object.defineProperty(l(n),e,{get:function(){return this["_".concat(e)]||this.lng&&this.lng[e]},set:function(t){this["_".concat(e)]=t,this._sendToLightning(e,t)}})};for(u.s();!(s=u.n()).done;)c()}catch(d){u.e(d)}finally{u.f()}return Object.defineProperties(l(n),{borderRadius:{set:function(e){this._borderRadius=e,this.effects=y(y({},this.effects||{}),{radius:{radius:e}})},get:function(){return this._borderRadius}},border:ln(),borderLeft:ln("Left"),borderRight:ln("Right"),borderTop:ln("Top"),borderBottom:ln("Bottom")}),Object.defineProperties(l(n),{linearGradient:{set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._linearGradient=e,this.effects=y(y({},this.effects||{}),{linearGradient:e})},get:function(){return this._linearGradient}}}),n}return c(t,e),f(t,[{key:"effects",get:function(){return this._effects},set:function(e){this._effects=e,this.shader=function(e){for(var t=[],n=0,r=Object.entries(e);n<r.length;n++){var o=w(r[n],2),i=o[0],a=o[1];t.push({type:i,props:a})}return Jt("DynamicShader",{effects:t})}(e)}},{key:"parent",get:function(){return this._parent},set:function(e){var t;(this._parent=e,this.rendered&&this.lng)&&(this.lng.parent=null!==(t=null==e?void 0:e.lng)&&void 0!==t?t:null)}},{key:"shader",get:function(){return this._shader},set:function(e){an(e)?this._shader=Jt.apply(void 0,v(e)):this._shader=e,this._sendToLightning("shader",this._shader)}},{key:"_sendToLightningAnimatable",value:function(e,t){if(this.lng){if(rn.animationsEnabled&&this.transition&&(!0===this.transition||this.transition[e])){var n=!0===this.transition||!0===this.transition[e]?void 0:this.transition[e];return this.animate(m({},e,t),n).start()}this.lng[e]=t}else this._renderProps[e]=t}},{key:"_sendToLightning",value:function(e,t){this.rendered&&this.lng?this.lng[e]=t:this._renderProps[e]=t}},{key:"animate",value:function(e,t){return d(this.lng,"Node must be rendered before animating"),this.lng.animate(e,t||this.animationSettings)}},{key:"setFocus",value:function(){var e=this;this.rendered?queueMicrotask((function(){return qe(e)})):this.autofocus=!0}},{key:"isTextNode",value:function(){return"text"===this.name}},{key:"_resizeOnTextLoad",value:function(){var e=this;this.lng.once("loaded",(function(t,n){if("text"===n.type){var r=n.dimensions;e.width=r.width,e.height=r.height,e.parent.updateLayout(e,r)}}))}},{key:"getText",value:function(){return this.children.map((function(e){return e.text})).join("")}},{key:"destroy",value:function(){this.lng&&Qt.destroyNode(this.lng)}},{key:"style",get:function(){return this._style},set:function(e){for(var t in e)this[t]||(this[t]=e[t]);this._style=e}},{key:"hasChildren",get:function(){return this.children.length>0}},{key:"states",get:function(){return this._states=this._states||new sn(this._stateChanged.bind(this)),this._states},set:function(e){this._states=new sn(this._stateChanged.bind(this),e),this.rendered&&this._stateChanged()}},{key:"animationSettings",get:function(){return this._animationSettings||un},set:function(e){this._animationSettings=e}},{key:"updateLayout",value:function(e,t){if(this.hasChildren){var n;if(on(this.onBeforeLayout)&&this.onBeforeLayout.call(this,e,t),"flex"===this.display)if(function(e){for(var t=[],n=0;n<e.children.length;n++){var r=e.children[n];if("TextNode"!==r.name){if("text"===r.name&&!r.width&&!r.height)return!1;t.push(r)}}var o=t.length,i="row"===(e.flexDirection||"row"),a=i?"width":"height",s=i?"height":"width",u=i?"marginLeft":"marginTop",l=i?"marginRight":"marginBottom",c=i?"x":"y",h=i?"y":"x",f=e[a]||0,p=e[s]||0,v=e.gap||0,g=e.justifyContent||"flexStart",y=e.alignItems,m=0;["center","spaceBetween","spaceEvenly"].includes(g)&&(m=t.reduce((function(e,t){return e+(t[a]||0)}),0));var x=p&&y?function(e){"flexStart"===y?e[h]=0:"center"===y?e[h]=(p-(e[s]||0))/2:"flexEnd"===y&&(e[h]=p-(e[s]||0))}:function(e){return e};if("flexStart"===g){var w=0;if(t.forEach((function(e){e[c]=w+(e[u]||0),w+=(e[a]||0)+v+(e[u]||0)+(e[l]||0),x(e)})),e._autosized){var b=w-v;if(b!==e[a])return e[a]=b,!0}}else if("flexEnd"===g)for(var _=f,k=o-1;k>=0;k--){var S=t[k];d(S),S[c]=_-(S[a]||0)-(S[l]||0),_-=(S[a]||0)+v+(S[u]||0)+(S[l]||0),x(S)}else if("center"===g){var T=(f-(m+v*(o-1)))/2;t.forEach((function(e){e[c]=T,T+=(e[a]||0)+v,x(e)}))}else if("spaceBetween"===g){var C=(f-m)/(o-1),R=0;t.forEach((function(e){e[c]=R,R+=(e[a]||0)+C,x(e)}))}else if("spaceEvenly"===g){var E=(f-m)/(o+1),F=E;t.forEach((function(e){e[c]=F,F+=(e[a]||0)+E,x(e)}))}return!1}(this))null===(n=this.parent)||void 0===n||n.updateLayout();on(this.onLayout)&&this.onLayout.call(this,e,t)}}},{key:"_stateChanged",value:function(){var e,t=this;if(this.states,this.forwardStates){var n=this.states.slice();this.children.forEach((function(e){return e.states=n}))}var r=(null===(e=rn.stateMapperHook)||void 0===e?void 0:e.call(rn,this,this.states))||this.states;if(this._undoStates||this.style&&function(e,t){var n,r=b(t);try{for(r.s();!(n=r.n()).done;)if(n.value in e)return!0}catch(o){r.e(o)}finally{r.f()}return!1}(this.style,r)){this._undoStates=this._undoStates||{};for(var o={},i=0,a=Object.entries(this._undoStates);i<a.length;i++){var s=w(a[i],2),u=s[0],l=s[1];r.includes(u)||(o=y(y({},o),l))}var c=r.reduce((function(e,n){var r=t.style[n];return r&&(e=y(y({},e),r),t._undoStates&&!t._undoStates[n]&&(t._undoStates[n]={},Object.keys(r).forEach((function(e){t._undoStates[n][e]=t[e]})))),e}),{});void 0!==c.transition&&(this.transition=c.transition),Object.assign(this,y(y({},o),c))}}},{key:"render",value:function(){var e=this,t=this.parent;t._isDirty&&(t.updateLayout(),t._isDirty=!1),e.updateLayout(),this.states.length&&this._stateChanged();var n=e._renderProps;t.lng&&(n.parent=t.lng),e.isTextNode()?((n=y(y(y({},rn.fontSettings),n),{},{text:e.getText()})).contain&&(n.width||(n.width=(t.width||0)-n.x-(n.marginRight||0),e._width=n.width,e._autosized=!0),n.height||"both"!==n.contain||(n.height=(t.height||0)-n.y-(n.marginBottom||0),e._height=n.height,e._autosized=!0)),e.lng=Qt.createTextNode(n),on(this.onCreate)&&this.onCreate.call(this,e),on(e.onLoad)&&e.lng.on("loaded",e.onLoad),e.width&&e.height||(e._autosized=!0,e._resizeOnTextLoad())):(n.src||n.texture||(isNaN(n.width)&&(n.width=(t.width||0)-n.x,e._width=n.width,e._autosized=!0),isNaN(n.height)&&(n.height=(t.height||0)-n.y,e._height=n.height,e._autosized=!0),n.color||(e._color=n.color=0)),e.lng=Qt.createNode(n),e.onFail&&e.lng.on("failed",e.onFail),e.onLoad&&e.lng.on("loaded",e.onLoad),on(this.onCreate)&&this.onCreate.call(this,e)),e.rendered=!0,e.autofocus&&e.setFocus(),delete this._renderProps}}]),t}(e(Object)),fn=function(e){return t=kn("text"),Tn(t,e,!1),t;var t},pn=function(e){return t=kn("node"),Tn(t,e,!1),t;var t};function vn(e){e instanceof hn&&(e.render(),"text"!==e.name&&e.children.forEach((function(e){return vn(e)})))}var gn=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=tn(t.options),r=n.init();function o(e){e.renderer=n,on(t.ref)?t.ref(e):t.ref=e,r.then((function(){e.lng=n.root,e.children.forEach(vn),on(t.onFirstRender)&&t.onFirstRender(e)})).catch(console.error)}return e=kn("canvas"),"function"==typeof o?En(o,e):o=e,Sn(e,(function(){return t.children})),e};function yn(e){var t=e.createElement,n=e.createTextNode,r=e.isTextNode,o=e.replaceText,i=e.insertNode,a=e.removeNode,s=e.setProperty,u=e.getParentNode,l=e.getFirstChild,c=e.getNextSibling;function d(e,t,n,r){if(void 0===n||r||(r=[]),"function"!=typeof t)return h(e,t,r,n);se((function(r){return h(e,t(),r,n)}),r)}function h(e,t,a,s,u){for(;"function"==typeof a;)a=a();if(t===a)return a;var c=typeof t,d=void 0!==s;if("string"===c||"number"===c)if("number"===c&&(t=t.toString()),d){var m=a[0];m&&r(m)?o(m,t):m=n(t),a=v(e,a,s,m)}else""!==a&&"string"==typeof a?o(l(e),a=t):(v(e,a,s,n(t)),a=t);else if(null==t||"boolean"===c)a=v(e,a,s);else{if("function"===c)return se((function(){for(var n=t();"function"==typeof n;)n=n();a=h(e,n,a,s)})),function(){return a};if(Array.isArray(t)){var x=[];if(f(x,t,u))return se((function(){return a=h(e,x,a,s,!0)})),function(){return a};if(0===x.length){var w=v(e,a,s);if(d)return a=w}else Array.isArray(a)?0===a.length?g(e,x,s):p(e,a,x):null==a||""===a?g(e,x):p(e,d&&a||[l(e)],x);a=x}else{if(Array.isArray(a)){if(d)return a=v(e,a,s,t);v(e,a,null,t)}else null!=a&&""!==a&&l(e)?y(e,t,l(e)):i(e,t);a=t}}return a}function f(e,t,r){for(var o=!1,i=0,a=t.length;i<a;i++){var s=t[i],u=void 0;if(null==s||!0===s||!1===s);else if(Array.isArray(s))o=f(e,s)||o;else if("string"==(u=typeof s)||"number"===u)e.push(n(s));else if("function"===u)if(r){for(;"function"==typeof s;)s=s();o=f(e,Array.isArray(s)?s:[s])||o}else e.push(s),o=!0;else e.push(s)}return o}function p(e,t,n){for(var r=n.length,o=t.length,s=r,u=0,l=0,d=c(t[o-1]),h=null;u<o||l<s;)if(t[u]!==n[l]){for(;t[o-1]===n[s-1];)o--,s--;if(o===u)for(var f=s<r?l?c(n[l-1]):n[s-l]:d;l<s;)i(e,n[l++],f);else if(s===l)for(;u<o;)h&&h.has(t[u])||a(e,t[u]),u++;else if(t[u]===n[s-1]&&n[l]===t[o-1]){var p=c(t[--o]);i(e,n[l++],c(t[u++])),i(e,n[--s],p),t[o]=n[s]}else{if(!h){h=new Map;for(var v=l;v<s;)h.set(n[v],v++)}var g=h.get(t[u]);if(null!=g)if(l<g&&g<s){for(var m=u,x=1,w=void 0;++m<o&&m<s&&null!=(w=h.get(t[m]))&&w===g+x;)x++;if(x>g-l)for(var b=t[u];l<g;)i(e,n[l++],b);else y(e,n[l++],t[u++])}else u++;else a(e,t[u++])}}else u++,l++}function v(e,t,r,o){if(void 0===r){for(var s;s=l(e);)a(e,s);return o&&i(e,o),""}var c=o||n("");if(t.length)for(var d=!1,h=t.length-1;h>=0;h--){var f=t[h];if(c!==f){var p=u(f)===e;d||h?p&&a(e,f):p?y(e,c,f):i(e,c,r)}else d=!0}else i(e,c,r);return[c]}function g(e,t,n){for(var r=0,o=t.length;r<o;r++)i(e,t[r],n)}function y(e,t,n){i(e,t,n),a(e,n)}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t||(t={}),(arguments.length>3?arguments[3]:void 0)||se((function(){return n.children=h(e,t.children,n.children)})),se((function(){return t.ref&&t.ref(e)})),se((function(){for(var r in t)if("children"!==r&&"ref"!==r){var o=t[r];o!==n[r]&&(s(e,r,o,n[r]),n[r]=o)}})),n}return{render:function(e,t){var n;return oe((function(r){n=r,d(t,e())})),n},insert:d,spread:function(e,t,n){"function"==typeof t?se((function(r){return m(e,t(),r,n)})):m(e,t,void 0,n)},createElement:t,createTextNode:n,insertNode:i,setProp:function(e,t,n,r){return s(e,t,n,r),n},mergeProps:We,effect:se,memo:le,createComponent:Be,use:function(e,t,n){return he((function(){return e(t,n)}))}}}var mn={createElement:function(e){var t=new hn(e);return Qt.root&&ue((function(){return t.render()})),t},createTextNode:function(e){return{name:"TextNode",text:e,parent:null}},replaceText:function(e,t){e.text=t;var n=e.parent;d(n),n._autosized&&n._resizeOnTextLoad(),n.text=n.getText()},setProperty:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e[t]=n},insertNode:function(e,t,n){e&&(e.children.insert(t,n),"TextNode"===t.name&&e.isTextNode()&&(e._autosized&&e._resizeOnTextLoad(),e.text=e.getText()))},isTextNode:function(e){return e.isTextNode()},removeNode:function(e,t){e.children.remove(t),t instanceof hn&&t.destroy()},getParentNode:function(e){var t;return null!==(t=e.parent)&&void 0!==t?t:void 0},getFirstChild:function(e){return e.children[0]},getNextSibling:function(e){if(e.parent){var t=e.parent.children||[],n=t.indexOf(e)+1;if(n<t.length)return t[n]}}},xn=function(e){var t=yn(e);return t.mergeProps=We,t}(mn),wn=xn.render,bn=(xn.effect,xn.memo),_n=xn.createComponent,kn=xn.createElement,Sn=(xn.createTextNode,xn.insertNode,xn.insert),Tn=xn.spread,Cn=xn.setProp,Rn=xn.mergeProps,En=xn.use;function Fn(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e=t,Number.isInteger(e)?t:"string"==typeof t?t.startsWith("#")?Number(t.replace("#","0x")+(7===t.length?"ff":"")):t.startsWith("0x")?Number(t):Number("0x"+(6===t.length?t+"ff":t)):0}var In="_$DX_DELEGATE";function Nn(e){var t="$$".concat(e.type),n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:function(){return n||document}});n;){var r=n[t];if(r&&!n.disabled){var o=n["".concat(t,"Data")];if(void 0!==o?r.call(n,o,e):r.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}var An=/^(?:[a-z0-9]+:)?\/\//i,Ln=/^\/+|(\/)\/+$/g;function Pn(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.replace(Ln,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function zn(e,t,n){if(!An.test(t)){var r=Pn(e),o=n&&Pn(n),i="";return((i=!o||t.startsWith("/")?r:0!==o.toLowerCase().indexOf(r.toLowerCase())?r+o:o)||"/")+Pn(t,!i)}}function Mn(e){var t={};return e.searchParams.forEach((function(e,n){t[n]=e})),t}function On(e,t,n){var r=w(e.split("/*",2),2),o=r[0],i=r[1],a=o.split("/").filter(Boolean),s=a.length;return function(e){var r=e.split("/").filter(Boolean),o=r.length-s;if(o<0||o>0&&void 0===i&&!t)return null;for(var u={path:s?"":"/",params:{}},l=function(e){return void 0===n?void 0:n[e]},c=0;c<s;c++){var d=a[c],h=r[c],f=":"===d[0],p=f?d.slice(1):d;if(f&&Bn(h,l(p)))u.params[p]=h;else if(f||!Bn(h,d))return null;u.path+="/".concat(h)}if(i){var v=o?r.slice(-o).join("/"):"";if(!Bn(v,l(i)))return null;u.params[i]=v}return u}}function Bn(e,t){var n=function(t){return 0===t.localeCompare(e,void 0,{sensitivity:"base"})};return void 0===t||("string"==typeof t?n(t):"function"==typeof t?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp&&t.test(e))}function Dn(e){var t=new Map,n=ge();return new Proxy({},{get:function(r,o){return t.has(o)||function(e,t){var n=Q,r=ee;Q=e,ee=null;try{return Ce(t,!0)}catch(o){Le(o)}finally{Q=n,ee=r}}(n,(function(){return t.set(o,le((function(){return e()[o]})))})),t.get(o)()},getOwnPropertyDescriptor:function(){return{enumerable:!0,configurable:!0}},ownKeys:function(){return Reflect.ownKeys(e())}})}function jn(e){var t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];for(var n=e.slice(0,t.index),r=e.slice(t.index+t[0].length),o=[n,n+=t[1]];t=/^(\/\:[^\/]+)\?/.exec(r);)o.push(n+=t[1]),r=r.slice(t[0].length);return jn(r).reduce((function(e,t){return[].concat(v(e),v(o.map((function(e){return e+t}))))}),[])}var Un,Yn=me(),Wn=me(),Xn=function(){return function(e,t){if(null==e)throw new Error(t);return e}(xe(Yn),"Make sure your app is wrapped in a <Router />")},Gn=function(){return Xn().navigatorFactory()},Hn=function(){return(xe(Wn)||Xn().base).params};function $n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.component,r=e.load,o=e.children,i=e.metadata,a=!o||Array.isArray(o)&&!o.length,s={key:e,component:n,load:r,metadata:i};return Kn(e.path).reduce((function(n,r){var o,i,u=b(jn(r));try{for(u.s();!(o=u.n()).done;){var l=o.value,c=(i=l,Pn(t).replace(/\/*(\*.*)?$/g,"")+Pn(i)),d=a?c:c.split("/*",1)[0];n.push(y(y({},s),{},{originalPath:l,pattern:d,matcher:On(d,!a,e.matchFilters)}))}}catch(h){u.e(h)}finally{u.f()}return n}),[])}function Vn(e){var t,n,r,o,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{routes:e,score:1e4*(t=e[e.length-1],n=w(t.pattern.split("/*",2),2),r=n[0],o=n[1],i=r.split("/").filter(Boolean),i.reduce((function(e,t){return e+(t.startsWith(":")?2:3)}),i.length-(void 0===o?0:1)))-a,matcher:function(t){for(var n=[],r=e.length-1;r>=0;r--){var o=e[r],i=o.matcher(t);if(!i)return null;n.unshift(y(y({},i),{},{route:o}))}return n}}}function Kn(e){return Array.isArray(e)?e:[e]}function qn(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=Kn(e),i=0,a=o.length;i<a;i++){var s=o[i];if(s&&"object"==typeof s){s.hasOwnProperty("path")||(s.path="");var u,l=b($n(s,t));try{for(l.s();!(u=l.n()).done;){var c=u.value;n.push(c);var d=Array.isArray(s.children)&&0===s.children.length;if(s.children&&!d)qn(s.children,c.pattern,n,r);else{var h=Vn(v(n),r.length);r.push(h)}n.pop()}}catch(f){l.e(f)}finally{l.f()}}}return n.length?r:r.sort((function(e,t){return t.score-e.score}))}function Zn(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n].matcher(t);if(o)return o}return[]}function Qn(e,t){var r,i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=w(e.signal,2),u=s[0],l=s[1],c=e.utils,d=void 0===c?{}:c,h=d.parsePath||function(e){return e},f=d.renderPath||function(e){return e},p=d.beforeLeave||(r=new Set,i=!1,{subscribe:function(e){return r.add(e),function(){return r.delete(e)}},confirm:function(e,t){if(i)return!(i=!1);var n,o={to:e,options:t,defaultPrevented:!1,preventDefault:function(){return o.defaultPrevented=!0}},a=b(r);try{var s=function(){var r=n.value;r.listener(y(y({},o),{},{from:r.location,retry:function(n){n&&(i=!0),r.navigate(e,y(y({},t),{},{resolve:!1}))}}))};for(a.s();!(n=a.n()).done;)s()}catch(u){a.e(u)}finally{a.f()}return!o.defaultPrevented}}),v=zn("",a.base||"");if(void 0===v)throw new Error("".concat(v," is not a valid base path"));v&&!u().value&&l({value:v,replace:!0,scroll:!1});var g=w(ie(!1),2),m=g[0],x=g[1],_=function(){var e=o(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,e.next=4,ye(t);case 4:return e.prev=4,x(!1),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}(),k=w(ie(u().value),2),S=k[0],T=k[1],C=w(ie(u().state),2),R=C[0],E=C[1],F=function(e,t){var n=new URL("http://sar"),r=le((function(t){var r=e();try{return new URL(r,n)}catch(o){return console.error("Invalid path ".concat(r)),t}}),n,{equals:function(e,t){return e.href===t.href}}),o=le((function(){return r().pathname})),i=le((function(){return r().search}),!0),a=le((function(){return r().hash}));return{get pathname(){return o()},get search(){return i()},get hash(){return a()},get state(){return t()},get key(){return""},query:Dn(fe(i,(function(){return Mn(r())})))}}(S,R),I=[],N=ie([]),A={pattern:v,params:{},path:function(){return v},outlet:function(){return null},resolvePath:function(e){return zn(v,e)}};return se((function(){var e=u(),t=e.value,n=e.state;he((function(){t!==S()&&_((function(){Un="native",T(t),E(n),N[1]([])})).then((function(){Un=void 0}))}))})),{base:A,location:F,isRouting:m,renderPath:f,parsePath:h,navigatorFactory:function(e){return e=e||xe(Wn)||A,function(t,n){return function(e,t,n){he((function(){if("number"!=typeof t){var r=y({replace:!1,resolve:!0,scroll:!0},n),o=r.replace,i=r.resolve,a=r.scroll,s=r.state,u=i?e.resolvePath(t):zn("",t);if(void 0===u)throw new Error("Path '".concat(t,"' is not a routable path"));if(I.length>=100)throw new Error("Too many redirects");var c=S();if((u!==c||s!==R())&&p.confirm(u,n)){var h=I.push({value:c,replace:o,scroll:a,state:R()});_((function(){Un="navigate",T(u),E(s),N[1]([])})).then((function(){var e,t;I.length===h&&(Un=void 0,e={value:u,state:s},(t=I[0])&&(e.value===t.value&&e.state===t.state||l(y(y({},e),{},{replace:t.replace,scroll:t.scroll})),I.length=0))}))}}else t&&(d.go?p.confirm(t,n)&&d.go(t):console.warn("Router integration does not support relative routing"))}))}(e,t,n)}},beforeLeave:p,preloadRoute:function(e,n){var r=Zn(t(),e.pathname),o=Un;for(var i in Un="preload",r){var a=r[i],s=a.route,u=a.params;s.component&&s.component.preload&&s.component.preload(),n&&s.load&&s.load({params:u,location:{pathname:e.pathname,search:e.search,hash:e.hash,query:Mn(e),state:null,key:""},intent:"preload"})}Un=o},submissions:N}}var Jn=function(e){return function(t){var n=t.base,r=we((function(){return t.children})),o=le((function(){return qn(t.root?{component:t.root,children:r()}:r(),t.base||"")})),i=Qn(e,o,{base:n});return e.create&&e.create(i),_n(Yn.Provider,{value:i,get children(){return _n(er,{routerState:i,get branches(){return o()}})}})}};function er(e){var t,n=le((function(){return Zn(e.branches,e.routerState.location.pathname)})),r=Dn((function(){for(var e=n(),t={},r=0;r<e.length;r++)Object.assign(t,e[r].params);return t})),o=[],i=le(fe(n,(function(a,s,u){for(var l=s&&a.length===s.length,c=[],d=function(t){var d=s&&s[t],h=a[t];u&&d&&h.route.key===d.route.key?c[t]=u[t]:(l=!1,o[t]&&o[t](),oe((function(a){o[t]=a,c[t]=function(e,t,n,r,o){var i=e.base,a=e.location,s=r().route,u=s.pattern,l=s.component,c=s.load,d=le((function(){return r().path}));l&&l.preload&&l.preload();var h=c?c({params:o,location:a,intent:Un||"initial"}):void 0;return{parent:t,pattern:u,path:d,params:o,outlet:function(){return l?Be(l,{params:o,location:a,data:h,get children(){return n()}}):n()},resolvePath:function(e){return zn(i.path(),e,d())}}}(e.routerState,c[t-1]||e.routerState.base,tr((function(){return i()[t+1]})),(function(){return n()[t]}),r)})))},h=0,f=a.length;h<f;h++)d(h);return o.splice(a.length).forEach((function(e){return e()})),u&&l?u:(t=c[0],c)})));return _n(He,{get when(){return i()&&t},keyed:!0,children:function(e){return _n(Wn.Provider,{value:e,get children(){return e.outlet()}})}})}var tr=function(e){return function(){return _n(He,{get when(){return e()},keyed:!0,children:function(e){return _n(Wn.Provider,{value:e,get children(){return e.outlet()}})}})}},nr=function(e){var t=we((function(){return e.children}));return We(e,{get children(){return t()}})};function rr(e){var t=!1,n=function(e){return"string"==typeof e?{value:e}:e},r=function(e,t,n){var r=w(e,2),o=r[0],i=r[1];return[t?function(){return t(o())}:o,n?function(e){return i(n(e))}:i]}(ie(n(e.get()),{equals:function(e,t){return e.value===t.value}}),void 0,(function(n){return!t&&e.set(n),n}));return e.init&&ve(e.init((function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.get();t=!0,r[1](n(o)),t=!1}))),Jn({signal:r,create:e.create,utils:e.utils})}function or(e,t){var n=function(e){if("#"===e)return null;try{return document.querySelector(e)}catch(t){return null}}("#".concat(e));n?n.scrollIntoView():t&&window.scrollTo(0,0)}var ir=new Map;function ar(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/_server";return function(r){var o=r.base.path(),i=r.navigatorFactory(r.base),a={};function s(e){if(!(e.defaultPrevented||0!==e.button||e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)){var n=e.composedPath().find((function(e){return e instanceof Node&&"A"===e.nodeName.toUpperCase()}));if(n&&(!t||n.getAttribute("link"))){var r="http://www.w3.org/2000/svg"===n.namespaceURI,i=r?n.href.baseVal:n.href;if(!(r?n.target.baseVal:n.target)&&(i||n.hasAttribute("state"))){var a=(n.getAttribute("rel")||"").split(/\s+/);if(!(n.hasAttribute("download")||a&&a.includes("external"))){var s=r?new URL(i,document.baseURI):new URL(i);if(!(s.origin!==window.location.origin||o&&s.pathname&&!s.pathname.toLowerCase().startsWith(o.toLowerCase())))return[n,s]}}}}}function u(e){var t=s(e);if(t){var n=w(t,2),o=n[0],a=n[1],u=r.parsePath(a.pathname+a.search+a.hash),l=o.getAttribute("state");e.preventDefault(),i(u,{resolve:!1,replace:o.hasAttribute("replace"),scroll:!o.hasAttribute("noscroll"),state:l&&JSON.parse(l)})}}function l(e){var t=s(e);if(t){var n=w(t,2),o=n[0],i=n[1];a[i.pathname]||r.preloadRoute(i,"false"!==o.getAttribute("preload"))}}function c(e){var t=s(e);if(t){var n=w(t,2),o=n[0],i=n[1];a[i.pathname]||(a[i.pathname]=setTimeout((function(){r.preloadRoute(i,"false"!==o.getAttribute("preload")),delete a[i.pathname]}),200))}}function d(e){var t=s(e);if(t){var n=w(t,2)[1];a[n.pathname]&&(clearTimeout(a[n.pathname]),delete a[n.pathname])}}function h(e){var t=e.submitter&&e.submitter.hasAttribute("formaction")?e.submitter.formAction:e.target.action;if(t){if(!t.startsWith("https://action/")){var o=new URL(t);if(!(t=r.parsePath(o.pathname+o.search)).startsWith(n))return}if("POST"!==e.target.method.toUpperCase())throw new Error("Only POST forms are supported for Actions");var i=ir.get(t);if(i){e.preventDefault();var a=new FormData(e.target);e.submitter&&e.submitter.name&&a.append(e.submitter.name,e.submitter.value),i.call(r,a)}}}!function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.document,n=t[In]||(t[In]=new Set),r=0,o=e.length;r<o;r++){var i=e[r];n.has(i)||(n.add(i),t.addEventListener(i,Nn))}}(["click","submit"]),document.addEventListener("click",u),e&&(document.addEventListener("mouseover",c),document.addEventListener("mouseout",d),document.addEventListener("focusin",l),document.addEventListener("touchstart",l)),document.addEventListener("submit",h),ve((function(){document.removeEventListener("click",u),e&&(document.removeEventListener("mouseover",c),document.removeEventListener("mouseout",d),document.removeEventListener("focusin",l),document.removeEventListener("touchstart",l)),document.removeEventListener("submit",h)}))}}function sr(e){var t=e.replace(/^.*?#/,"");if(!t.startsWith("/")){var n=w(window.location.hash.split("#",2),2)[1];return"".concat(void 0===n?"/":n,"#").concat(t)}return t}function ur(e){return rr({get:function(){return window.location.hash.slice(1)},set:function(e){var t=e.value,n=e.replace,r=e.scroll,o=e.state;n?window.history.replaceState(o,"","#"+t):window.location.hash=t;var i=t.indexOf("#");or(i>=0?t.slice(i+1):"",r)},init:function(e){return t=window,n="hashchange",r=function(){return e()},t.addEventListener(n,r),function(){return t.removeEventListener(n,r)};var t,n,r},create:ar(e.preload,e.explicitLinks,e.actionBase),utils:{go:function(e){return window.history.go(e)},renderPath:function(e){return"#".concat(e)},parsePath:sr}})(e)}var lr=ve;function cr(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ge(),o=0;return function(){return o++,ve((function(){o--,queueMicrotask((function(){!o&&n&&(n(),n=t=void 0)}))})),n||oe((function(r){return t=e(n=r)}),r),t}}var dr=cr((function(){var e,t,n,r,o=w(ie(null),2),i=o[0],a=o[1];return e=window,t="keydown",n=function(e){a(e),setTimeout((function(){return a(null)}))},e.addEventListener(t,n,r),lr(e.removeEventListener.bind(e,t,n,r)),i}));function hr(e){return"function"==typeof e}function fr(e,t){if(!e)throw new Error(t||"Assertion failed")}var pr,vr={Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Enter:"Enter",Last:"l"},gr=w(ie([]),2),yr=gr[0],mr=gr[1];function xr(e,t){var n,r,o,i,a=t();if(Array.isArray(a))if(2===a.length)n=i=a[0],r=o=a[1];else if(3===a.length)n=a[0],r=o=a[1],i=a[2];else{var s=w(a,4);n=s[0],o=s[1],i=s[2],r=s[3]}else n=o=i=r=a;e.onBeforeLayout=function(t,a){if(a){e.width=e.children.reduce((function(e,t){return e+(t.width||0)}),0)+r+o;var s=e.children[0];s&&(s.x=r,s.marginLeft=r);var u=0;e.children.forEach((function(e){e.y=(e.y||0)+n,e.marginTop=n,u=Math.max(u,e.height||0)})),e.height=u+n+i}}}function wr(e){return new Promise((function(t){setTimeout(t,e)}))}function br(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en-US",r=window.speechSynthesis;return new Promise((function(o,i){var a=new SpeechSynthesisUtterance(e);a.lang=n,a.onend=function(){o()},a.onerror=function(e){i(e)},t.push(a),r.speak(a)}))}function _r(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=window.speechSynthesis,a=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];for(e=0;e<t.length;e++){var r=t[e];if("string"!=typeof r||r.includes("PAUSE-"))break;n.push(t[e])}return[n.join(",\b ")].concat(t.slice(e))}(Array.isArray(e)?e:[e]),s=[],u=[],l=!0;return{series:o(n().mark((function e(){var r,o,i,c,d,h;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0;case 1:if(!l||!a.length){e.next=62;break}return e.next=4,Promise.resolve(a.shift());case 4:if(r=e.sent,l){e.next=9;break}return e.abrupt("break",62);case 9:if("string"!=typeof r||!r.includes("PAUSE-")){e.next=16;break}return o=1e3*Number(r.split("PAUSE-")[1]),isNaN(o)&&(o=0),e.next=14,wr(o);case 14:e.next=60;break;case 16:if("string"!=typeof r||!r.length){e.next=48;break}c=i=3;case 19:if(!(l&&c>0)){e.next=46;break}return e.prev=20,e.next=23,br(r,u,t);case 23:c=0,e.next=44;break;case 26:if(e.prev=26,e.t0=e.catch(20),!(e.t0 instanceof SpeechSynthesisErrorEvent)){e.next=43;break}if("network"!==e.t0.error){e.next=36;break}return c--,console.warn("Speech synthesis network error. Retries left: ".concat(c)),e.next=34,wr(500*(i-c));case 34:e.next=41;break;case 36:if("canceled"!==e.t0.error&&"interrupted"!==e.t0.error){e.next=40;break}c=0,e.next=41;break;case 40:throw new Error("SpeechSynthesisErrorEvent: ".concat(e.t0.error));case 41:e.next=44;break;case 43:throw e.t0;case 44:e.next=19;break;case 46:e.next=60;break;case 48:if("function"!=typeof r){e.next=55;break}return d=_r(r(),t,!1),s.push(d),e.next=53,d.series;case 53:e.next=60;break;case 55:if(!Array.isArray(r)){e.next=60;break}return h=_r(r,t,!1),s.push(h),e.next=60,h.series;case 60:e.next=1;break;case 62:return e.prev=62,l=!1,e.finish(62);case 65:case"end":return e.stop()}}),e,null,[[0,,62,65],[20,26]])})))(),get active(){return l},append:function(e){a.push(e)},cancel:function(){l&&(r&&i.cancel(),s.forEach((function(e){e.cancel()})),l=!1)}}}function kr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";return pr&&pr.cancel(),pr=_r(e,t)}var Sr,Tr,Cr=[],Rr=!1;function Er(e,t){var n,r=function(e,t){var n,r=function(){return clearTimeout(n)};return ge()&&ve(r),Object.assign((function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];void 0!==n&&r(),n=setTimeout((function(){return e.apply(void 0,i)}),t)}),{clear:r})}(e,t),o=function(e){n=e,r(e)};return o.flush=function(){r.clear(),e(n)},o.clear=r.clear,o}function Fr(e){return e.id||e.name}function Ir(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(Nr.onFocusChange&&Nr.enabled){var t=e.every((function(e){return!e.loading})),n=e.filter((function(e){return!Cr.includes(e)}));if(Sr(),t||!Nr.onFocusChange){Cr=e.slice(0);var r=[],o=n.reduce((function(e,t){return t.announce?(e.push([Fr(t),"Announce",t.announce]),r.push(t.announce)):t.title?(e.push([Fr(t),"Title",t.title]),r.push(t.title)):e.push([Fr(t),"No Announce",""]),e}),[]);return n.reverse().reduce((function(e,t){return t.announceContext?(e.push([Fr(t),"Context",t.announceContext]),r.push(t.announceContext)):e.push([Fr(t),"No Context",""]),e}),o),Nr.debug&&console.table(o),r.length?Nr.speak(r.reduce((function(e,t){return e.concat(t)}),[])):void 0}Nr.onFocusChange([])}}var Nr={debug:!1,enabled:!0,cancel:function(){Tr&&Tr.cancel()},clearPrevFocus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Cr=Cr.slice(0,e),Sr()},speak:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.append,o=void 0!==r&&r,i=n.notification,a=void 0!==i&&i;Nr.onFocusChange&&Nr.enabled&&(Nr.onFocusChange.flush(),o&&Tr&&Tr.active?Tr.append(e):(Nr.cancel(),function(e){if(!Rr)Tr=kr(e)}(e)),a&&(Rr=!0,null===(t=Tr)||void 0===t||t.series.finally((function(){Rr=!1,Nr.refresh()})).catch(console.error)));return Tr},refresh:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Nr.clearPrevFocus(e),Nr.onFocusChange&&Nr.onFocusChange(he((function(){return yr()})))},setupTimers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.focusDebounce,n=void 0===t?400:t,r=e.focusChangeTimeout,o=void 0===r?3e5:r;Nr.onFocusChange=Er(Ir,n),Sr=Er((function(){Cr=[]}),o)}};function Ar(e){return function(){var t=this.children.length,n=this.wrap,r=this.selected;if("right"===e||"down"===e)do{var o;if(this.selected=(this.selected||0)%t+1,this.selected>=t){if(!n){this.selected=null;break}this.selected=0}}while(null!==(o=this.children[this.selected])&&void 0!==o&&o.skipFocus);else if("left"===e||"up"===e)do{var i;if(this.selected=(this.selected||0)%t-1,this.selected<0){if(!n){this.selected=null;break}this.selected=t-1}}while(null!==(i=this.children[this.selected])&&void 0!==i&&i.skipFocus);if(null===this.selected)return this.selected=r,!1;var a=this.children[this.selected];if(fr(a instanceof hn),this.onSelectedChanged&&this.onSelectedChanged.call(this,this,a,this.selected,r),this.plinko&&null!==r){var s=this.children[r];fr(s instanceof hn);var u=s.selected;a.selected=u}return qe(a),!0}}function Lr(e){var t,n=Ar("left"),r=Ar("right"),o={display:"flex",justifyContent:"flexStart"};return t=kn("node"),Cn(t,"onLeft",n),Cn(t,"onRight",r),Tn(t,Rn({get selected(){return e.selected||0},get onFocus(){return e.onFocus||function(e){if(e&&null!==e.selected){for(var t=e.children[e.selected];null!==(n=t)&&void 0!==n&&n.skipFocus;){var n;e.selected++,t=e.children[e.selected]}t instanceof hn&&t.setFocus()}}},get style(){return e.style||o}},e),!0),Sn(t,(function(){return e.children})),t}function Pr(e){var t,n=Ar("up"),r=Ar("down"),o={display:"flex",flexDirection:"column",justifyContent:"flexStart"};return t=kn("node"),Cn(t,"onUp",n),Cn(t,"onDown",r),Tn(t,Rn({get onFocus(){return e.onFocus||function(e){if(e&&null!==e.selected){for(var t=e.children[e.selected];null!==(n=t)&&void 0!==n&&n.skipFocus;){var n;e.selected++,t=e.children[e.selected]}t instanceof hn&&t.setFocus()}}},get selected(){return e.selected||0},get style(){return e.style||o}},e),!0),Sn(t,(function(){return e.children})),t}var zr=w(ie(""),2),Mr=zr[0],Or=zr[1],Br={flexRow:{display:"flex",flexDirection:"row",justifyContent:"flexStart"},flexColumn:{display:"flex",flexDirection:"column",justifyContent:"flexStart"},layout:{screenW:1920,screenH:1080,marginX:120,marginY:120,gutterX:24,gutterY:72,focusScale:1.1},color:{primary:"#00315c",focus:"#bdbdbd",container:"#004882"},typography:{display1:{fontFamily:"Ubuntu",fontSize:72,lineHeight:88,fontStyle:"600",verticalAlign:"middle",textBaseline:"bottom",maxLineSuffix:"..."},display2:{fontFamily:"Ubuntu",fontSize:56,lineHeight:72},headline1:{fontFamily:"Ubuntu",fontSize:36,fontStyle:"600",lineHeight:48,verticalAlign:"middle",textBaseline:"bottom",maxLineSuffix:"..."},headline2:{fontFamily:"Ubuntu",fontSize:32,lineHeight:44},headline3:{fontFamily:"Ubuntu",fontSize:28,lineHeight:40},body1:{fontFamily:"Ubuntu",fontSize:32,lineHeight:40},body2:{fontFamily:"Ubuntu",fontSize:28,lineHeight:34},button1:{fontFamily:"Ubuntu",fontSize:32,lineHeight:40}}};function Dr(){var e,t,n=0,r={duration:1e3,easing:"ease-in-out"},o={alpha:1,color:4294967295,transition:{alpha:r}};return ue(fe(Mr,(function(o){return o.startsWith("#")?(e.color=o,e.src="",e.alpha=1,n=1,void(t.alpha=0)):(e.color=4294967295,0===n?(e.src=o,void(n=1)):1===n?(t.src=o,n=2,t.animate({alpha:1},r).start(),void e.animate({alpha:0},r).start()):void(2===n&&(e.src=o,n=1,e.alpha=1,t.alpha=0)))}),{defer:!0})),_n(pn,{width:1920,height:1080,zIndex:-5,get children(){return[_n(pn,{ref:function(t){"function"==typeof e?e(t):e=t},style:o}),_n(pn,{ref:function(e){"function"==typeof t?t(e):t=e},style:o,alpha:0}),_n(pn,{get effects(){return{radialGradient:{colors:[124,124,Fn(Br.color.container)],stops:[0,.4,.9],height:800,width:1920,pivot:[.8,0]}}}})]}})}var jr,Ur={Column:y(y({},Br.flexColumn),{},{width:320,height:600,y:360,gap:20,zIndex:101,transition:{x:{duration:250,easing:"ease-in-out"}},x:8,focus:{x:Br.layout.marginX}}),Gradient:{zIndex:99,linearGradient:{angle:(jr=270,jr*Math.PI/180),stops:[0,.4,.8],colors:[Fn(Br.color.primary),Fn(Br.color.primary),Fn("#00000000")]},alpha:0,focus:{width:1600,alpha:1},width:100,height:1080,transition:{alpha:!0}},NavButton:{zIndex:102,height:70,width:100,borderRadius:8,focus:{color:Fn(Br.color.container)},active:{width:328,height:70}}},Yr="/solid-demo-app/",Wr=[{name:"experiment",width:81,height:100,x:0,y:0},{name:"trending",width:100,height:56,x:81,y:0},{name:"tv",width:100,height:68,x:181,y:0},{name:"movie",width:94,height:100,x:282,y:0}];function Xr(e){var t,n,r,o=(t=Yr+"assets/icons_white.png",n=Wr,r=Qt.createTexture("ImageTexture",{src:t}),n.reduce((function(e,t){var n=t.x,o=t.y,i=t.width,a=t.height;return e[t.name]=Qt.createTexture("SubTexture",{texture:r,x:n,y:o,width:i,height:a}),e}),{}));return _n(pn,Rn(e,{get texture(){return o[e.name]},get width(){return o[e.name].props.width},get height(){return o[e.name].props.height},get x(){return(100-(o[e.name].props.width||0))/2},get y(){return(100-(o[e.name].props.height||0))/2}}))}function Gr(e){return _n(pn,Rn(e,{forwardStates:!0,get style(){return Ur.NavButton},get children(){return[_n(pn,{y:-16,get children(){return _n(Xr,{scale:.5,get name(){return e.icon}})}}),_n(fn,{get style(){return y(y({},Br.typography.button1),{},{fontSize:38,x:116,y:16,height:50,alpha:0,active:{alpha:1}})},get children(){return e.children}})]}}))}function Hr(e){var t,n=Gn();return[_n(Pr,Rn(e,{onFocus:function(){t.states.add("focus"),this.children.forEach((function(e){return e.states.add("active")})),this.children.selected.setFocus()},onBlur:function(){t.states.remove("focus"),this.selected=0,this.children.forEach((function(e){return e.states.remove("active")}))},get style(){return Ur.Column},get children(){return[_n(Gr,{onEnter:function(){return n("/browse/all")},icon:"trending",children:"Trending"}),_n(Gr,{icon:"movie",onEnter:function(){return n("/browse/movie")},children:"Movies"}),_n(Gr,{icon:"tv",onEnter:function(){return n("/browse/tv")},children:"TV"}),_n(Gr,{icon:"experiment",onEnter:function(){return n("/examples")},children:"Examples"})]}})),_n(pn,{ref:function(e){"function"==typeof t?t(e):t=e},get style(){return Ur.Gradient}})]}var $r={Page:{width:1920,height:1080},headlineText:{width:1200,height:240,x:360,y:455,contain:"both",fontSize:66,textAlign:"center"},headlineSubText:{width:960,height:170,x:530,y:655,contain:"both",fontSize:48,textAlign:"center"},itemsContainer:{width:Br.layout.screenW,height:600,y:560,x:0,zIndex:2},Thumbnail:{borderRadius:16,width:185,height:278,scale:1,zIndex:2,transition:{scale:{duration:250,easing:"ease-in-out"}},focus:{scale:1.1}},FocusRing:{borderRadius:16,width:194,height:286,y:-5,x:-5,zIndex:-1},FPS:{color:255,height:42,width:140,x:20,y:20,zIndex:100},FPSLabel:{x:10,y:0,fontSize:36,textColor:Fn("#ffffff")},FPSValue:{x:90,y:0,fontSize:36,textColor:Fn("#ffffff")},showHeadline:{x:70,y:20},headlineBlur:{width:1920,height:150,x:0,y:0,zIndex:14,alpha:.9,color:Fn("#000000")},RowTitle:{height:60,width:300,marginTop:20,fontSize:36,color:Fn("#f0f0f0"),zIndex:2},Row:{display:"flex",justifyContent:"spaceBetween",height:300},Column:{display:"flex",flexDirection:"column",justifyContent:"flexStart",gap:20,width:Br.layout.screenW-2*Br.layout.marginX,x:Br.layout.marginX+Br.layout.gutterX,y:48,transition:{y:{duration:250,easing:"ease-in-out"}},zIndex:2},Rect:{width:250,height:100,y:10,x:300,color:Fn("#0000ff")},peopleBio:y(y({},Br.typography.body1),{},{contain:"both",width:1500,height:400})},Vr={width:120,height:40,color:Fn("#000000"),borderRadius:8,border:{width:2,color:Fn("#3333ff")},scale:1,focus:{scale:1.1,border:{width:5,color:Fn("#333333")}},transition:{scale:!0,color:!0}},Kr={container:Vr,topBar:{color:Fn("#00A699"),height:8,y:2,x:-4,width:Vr.width+8},text:{fontSize:12,y:12,contain:"width",textAlign:"center",color:Fn("#F6F6F9"),height:Vr.height,width:Vr.width}},qr=386,Zr=136,Qr=(Fn("#715cab"),Fn("#5a39a2"),Fn("#291d43"),{fontSize:32,contain:"width",textAlign:"center",mountY:-.35,color:Fn("#FFFFFF"),height:Zr,width:qr,focus:{fontSize:40},disabled:{color:Fn("#909090")}});function Jr(e){return _n(pn,Rn(e,{get style(){return $r.Thumbnail}}))}function eo(e){return _n(pn,Rn(e,{get style(){return $r.FocusRing}}))}function to(e){return _n(pn,Rn(e,{get style(){return $r.FPS},get children(){return[_n(fn,{get style(){return $r.FPSLabel},children:"FPS:"}),_n(fn,{get style(){return $r.FPSValue},get children(){return e.fps}})]}}))}function no(e){var t=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(X in e){var o=new Set(n.length>1?n.flat():n[0]),i=n.map((function(t){return new Proxy({get:function(n){return t.includes(n)?e[n]:void 0},has:function(n){return t.includes(n)&&n in e},keys:function(){return t.filter((function(t){return t in e}))}},je)}));return i.push(new Proxy({get:function(t){return o.has(t)?void 0:e[t]},has:function(t){return!o.has(t)&&t in e},keys:function(){return Object.keys(e).filter((function(e){return!o.has(e)}))}},je)),i}var a,s={},u=n.map((function(){return{}})),l=b(Object.getOwnPropertyNames(e));try{for(l.s();!(a=l.n()).done;){var c,d=a.value,h=Object.getOwnPropertyDescriptor(e,d),f=!h.get&&!h.set&&h.enumerable&&h.writable&&h.configurable,p=!1,g=0,y=b(n);try{for(y.s();!(c=y.n()).done;)c.value.includes(d)&&(p=!0,f?u[g][d]=h.value:Object.defineProperty(u[g],d,h)),++g}catch(m){y.e(m)}finally{y.f()}p||(f?s[d]=h.value:Object.defineProperty(s,d,h))}}catch(m){l.e(m)}finally{l.f()}return[].concat(v(u),[s])}(e,["items"]),n=w(t,2),r=n[0],o=n[1];return _n(Lr,Rn(o,{get style(){return $r.Row},get children(){return _n(Ge,{get each(){return r.items},children:function(e){return _n(Jr,e)}})}}))}function ro(e){return _n(pn,Rn(e,{forwardStates:!0,get style(){return Kr.container},get children(){return _n(fn,{get style(){return Kr.text},get children(){return e.children}})}}))}var oo,io,ao=function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=dr();vr=y(y({},vr),e);var n=Object.entries(vr);ue(fe(Ke,(function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e,o=[];r;){var i;r.states.has("focus")||(r.states.add("focus"),hr(r.onFocus)&&r.onFocus.call(r,e,null!=t?t:null)),o.push(r),r=null!==(i=r.parent)&&void 0!==i?i:null}return n.forEach((function(n){o.includes(n)||(n.states.remove("focus"),hr(n.onBlur)&&n.onBlur.call(n,e,null!=t?t:null))})),mr(o),o}),{defer:!0})),ue((function(){var e=t();if(e){var r=n.find((function(t){var n=w(t,2);return n[0],n[1]===e.key}));he((function(){var t,n=b(yr());try{for(n.s();!(t=n.n()).done;){var o=t.value,i=r?r[0]:void 0;if(i){var a=o["on".concat(i)];if(hr(a)&&!0===a.call(o,e,o))break}else console.log("Unhandled key event: ".concat(e.key));if(hr(o.onKeyPress)&&!0===o.onKeyPress.call(o,e,i,o))break}}catch(s){n.e(s)}finally{n.f()}return!1}))}}))}({Announcer:"a",Menu:"m",Escape:"Escape"});var t=(Nr.setupTimers(),ue(fe(yr,Nr.onFocusChange,{defer:!0})),Nr);t.enabled=!1;var n,r,o,i=Gn();return ue(fe(Ke,(function(e){d(e),setTimeout((function(){e.heroContent?(n.parent=e.parent,n.alpha=0,n.scale=1,n.x=e.x-5,n.y=e.y-5,n.width=e.width+10,n.height=e.height+10,n.animate({scale:1.1,alpha:1}).start()):n.alpha=0}),10)}),{defer:!0})),_n(pn,{ref:function(e){var t=window.APP;"function"==typeof t?t(e):window.APP=e},onAnnouncer:function(){return t.enabled=!t.enabled},onLast:function(){return history.back()},onMenu:function(){return i("/")},style:{width:1920,height:1080},onLeft:function(){if(r.states.has("focus"))return!1;o=Ke(),r.setFocus()},onRight:function(){return r.states.has("focus")&&o.setFocus()},get children(){return[_n(Dr,{}),_n(to,{get fps(){return e.fps}}),_n(eo,{get color(){return Fn(Br.color.focus)},ref:function(e){"function"==typeof n?n(e):n=e}}),bn((function(){return e.children})),_n(Hr,{ref:function(e){"function"==typeof r?r(e):r=e}})]}})},so="https://api.themoviedb.org/3",uo="w185",lo={headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIyZDE4YjEwMTA0YjdiZTlkNjFiMWYwYjVlMGEwNzM2OCIsInN1YiI6IjYwZTVjMTdlNGNhNjc2MDA3NTA4Njc3MSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.D_nqH9kd-bhhWzeVsTDPYhHnsUaNAuyAa6YATmKHqsA"}};function co(e){return io+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:uo)+e}function ho(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(so+e,y(y({},lo),t)).then((function(e){return e.json()}))}function fo(){return ho("/configuration").then((function(e){var t;return oo=e,io=null===(t=e.images)||void 0===t?void 0:t.secure_base_url,e}))}var po={get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return oo?ho(e,t):fo().then((function(){return ho(e,t)}))},loadConfig:fo};function vo(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){return{src:co(e.poster_path||e.profile_path),tileSrc:co(e.backdrop_path||e.profile_path,"w300"),backdrop:co(e.backdrop_path,"w1280"),href:"/entity/".concat(e.media_type||"people","/").concat(e.id),shortTitle:(t=e.title||e.name,n=30,t.length>n?t.substring(0,n-3)+"...":t),title:e.title||e.name,data:e,entityInfo:{type:e.media_type||"people",id:e.id},heroContent:{title:e.title||e.name,description:e.overview}};var t,n}))}var go=new Map,yo=new Map;function mo(e){var t=w(ie([]),2),n=t[0],r=t[1],o=w(ie(1),2),i=o[0],a=o[1],s=w(ie(!1),2),u=s[0],l=s[1],c=w(ce(i,e),1)[0];return ae((function(){var e=c();e&&Ce((function(){0===e.length&&l(!0),r((function(t){return[].concat(v(t),v(e))}))}),!1)})),{pages:n,page:i,setPage:a,setPages:r,end:u,setEnd:l}}var xo=1100,wo=y(y({},Br.typography.display2),{},{width:xo,height:58,contain:"both"}),bo=function(e){return _n(fn,Rn(e,{style:wo,get children(){return e.children}}))},_o=y(y({},Br.typography.body1),{},{width:xo,height:72,contain:"both"}),ko={fontSize:20,lineHeight:20},So=function(e){return _n(fn,Rn(e,{style:_o,get children(){return e.children}}))};var To=function(e){return t=kn("node"),En(xr,t,(function(){return[8,15,13,15]})),Tn(t,Rn(e,{style:{color:"0x00000099",borderRadius:8,border:{width:3,color:"0xffffffff"}}}),!0),Sn(t,_n(fn,{style:ko,get children(){return e.children}})),t;var t},Co=Br.typography.body2,Ro=function(e){return _n(pn,{get style(){return y(y({},Br.flexRow),{},{gap:12,width:xo,height:48})},get children(){return[_n(fn,{style:Co,get children(){return e.metaText}}),_n(Ge,{get each(){return e.badges},children:function(e){return _n(To,{y:-5,children:e})}}),bn((function(){return t=e.reviews,[_n(He,{get when(){return(null==t?void 0:t.rtCrit)&&"0"!==(null==t?void 0:t.rtCrit)},get children(){return[_n(pn,{src:"https://upload.wikimedia.org/wikipedia/commons/b/b6/Tomato-Torrent-Icon.png",title:"Rotten Tomatoes Rating",style:{width:30,height:30,marginRight:-6}}),_n(fn,{style:Co,get children(){return t.rtCrit+"%"}})]}}),_n(He,{get when(){return(null==t?void 0:t.rtFan)&&"0"!==(null==t?void 0:t.rtFan)},get children(){return[_n(pn,{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/Rotten_Tomatoes_positive_audience.svg/80px-Rotten_Tomatoes_positive_audience.svg.png",title:"Rotten Tomatoes Rating",style:{width:24,height:30,marginRight:-6}}),_n(fn,{style:Co,get children(){return t.rtFan+"%"}})]}})];var t}))]}})},Eo=function(e){return _n(pn,Rn(e,{get style(){return y(y({},Br.flexColumn),{},{width:xo,height:160,gap:16})},get children(){return[_n(bo,{get children(){return e.title}}),_n(So,{get children(){return e.description}}),_n(Ro,{get metaText(){return e.metaText},get badges(){return e.badges},get reviews(){return e.reviews}})]}}))};function Fo(e){return e.split("-")[0]}function Io(e){var t=e.type,n=e.id;return po.get("/".concat(t,"/").concat(n,"/recommendations")).then((function(e){var n=e.results;return n.length?vo(n.slice(0,7)):po.get("/trending/".concat(t,"/week?page=1")).then((function(e){return vo(e.results.slice(0,7))}))}))}function No(e){var t=e.type,n=e.id;return po.get("/".concat(t,"/").concat(n,"/credits")).then((function(e){return vo(e.cast.slice(0,7))}))}function Ao(e){var t=e.type,n=e.id,r="movie"===t?{rtCrit:86,rtFan:92}:{};return po.get("/".concat(t,"/").concat(n)).then((function(e){return y({backgroundImage:co(e.backdrop_path,"original"),heroContent:{title:e.title||e.name,description:e.overview,badges:["HD"],metaText:"movie"===t?(n=e.runtime,o=n%60,Math.floor(n/60)+"h "+(o<10?"0":"")+o+"m - "+e.release_date):"".concat(Fo(e.first_air_date)," - ").concat(Fo(e.last_air_date)),reviews:r}},e);var n,o}))}var Lo=function(){var e=Hn(),t=w(ie(0),2),n=t[0],r=t[1],o=w(ie(),2),i=o[0];o[1];ce(i,Ao);var a=w(ie({}),2),s=a[0],u=a[1],l=Gn(),c=de((function(){return 0})),h=le((function(){return mo((t=e.filter||"all",function(e){var n="/trending/".concat(t,"/week?page=").concat(e);if(go.has(n))return go.get(n);var r=po.get(n).then((function(e){var n=e.results.filter((function(e){return!e.adult})),r=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,n=[],r=0,o=e.length;r<o;r+=t)n.push(e.slice(r,r+t));return n}((yo.has(t)?yo.get(t):[]).concat(vo(n)));return r[r.length-1].length<7?yo.set(t,r.pop()):yo.delete(t),r}));return go.set(n,r),r}));var t}));function f(){var e;null===(e=this.children.selected)||void 0===e||e.setFocus(),r(-1*(this.y||0)+24);var t=h().pages().length;(0===t||this.parent.selected&&this.parent.selected>=t-2)&&h().setPage((function(e){return e+1}))}function p(){var e=this.children.selected;d(e&&e.href),l(e.href)}return ue(fe(Ke,(function(e){e.backdrop&&Or(e.backdrop),e.heroContent&&u(e.heroContent)}),{defer:!0})),_n(He,{get when(){return h().pages().length},get children(){return[_n(Eo,Rn({y:360,x:150},s)),_n(pn,{clipping:!0,get style(){return $r.itemsContainer},get children(){return _n(Pr,{plinko:!0,announce:"All Trending - Week",get y(){return n()},get style(){return $r.Column},get children(){return _n(Ge,{get each(){return h().pages()},children:function(e,t){return _n(no,{get autofocus(){return c(t())},items:e,onFocus:f,onEnter:p})}})}})}})]}})},Po=function(){var e=Gn(),t=de((function(){return 0}));function n(){var t=this.children.selected;d(t&&t.id),e("/"+t.id)}var r=[{title:"Flex Row",id:"flex",description:"Flex Row Implementation"},{title:"Flex Column",id:"flexcolumn",description:"Flex Column Implementation"},{title:"Flex Row Vertical Align",id:"flexsize",description:"Flex Row Vertical Align Implementation"},{title:"Flex Column Vertical Align",id:"flexcolumnsize",description:"Flex Column Vertical Align Implementation"},{title:"Buttons",id:"buttons",description:"Demo a few buttons"},{title:"Text",id:"text",description:"Text layout with flexbox"}];function o(e){var t=w(ie(4294967295),2),n=t[0],r=t[1];return _n(pn,Rn(e,{onFocus:function(){return r(255)},onBlur:function(){return r(4294967295)},style:{width:370,height:320,borderRadius:6,scale:1,color:405488895,transition:{color:!0,scale:!0},focus:{scale:1.1,color:4294967295}},get children(){return _n(pn,{x:30,get children(){return[_n(fn,{y:30,fontSize:84,get color(){return n()},get children(){return e.index}}),_n(fn,{y:140,fontSize:42,width:340,height:42,contain:"both",get color(){return n()},get children(){return e.title}}),_n(fn,{y:200,fontSize:28,width:330,contain:"width",get color(){return n()},get children(){return e.description}})]}})}}))}var i=w(ie(140),2),a=i[0],s=i[1];function u(e){s(-400*e.selected+140)}return _n(pn,{colorTop:1147903743,colorBottom:743406847,get children(){return[_n(pn,{x:120,get children(){return[_n(pn,{src:"/assets/solidjs.png",width:101,height:90,y:40}),_n(fn,{fontSize:90,x:110,y:40,children:"Examples"}),_n(pn,{y:140,height:1,width:1800,color:3906468351})]}}),_n(Lr,{onSelectedChanged:u,onEnter:n,transition:{x:{delay:20,duration:300}},get x(){return a()},y:300,width:4400,get style(){return $r.Row},justifyContent:"flexStart",gap:40,get children(){return _n(Ge,{each:r,children:function(e,n){return _n(o,Rn({get autofocus(){return t(n())},get index(){return n()}},e))}})}})]}})},zo=function(){var e={width:900,height:500,y:350,x:150,gap:25,display:"flex",flexDirection:"column",justifyContent:"flexStart",color:Fn("00000000")},t={width:900,height:36,gap:6,display:"flex",flexDirection:"row",justifyContent:"flexStart",color:Fn("00000000")},n={fontSize:42},r={width:e.width,fontSize:26,contain:"width"},o={fontSize:26};return pe((function(){Or("0x000000ff")})),_n(pn,{autofocus:!0,style:e,get children(){return[_n(fn,{style:n,children:"Title of the Page"}),_n(fn,{style:r,children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer vel tempor tellus. Sed eu leo purus. Vestibulum sollicitudin eget tellus a varius. Phasellus est turpis, volutpat sed blandit sit amet, rutrum sit amet mauris. In dignissim elit orci, a sollicitudin ipsum faucibus et. Quisque vel quam rutrum, faucibus augue sed, scelerisque nunc."}),_n(pn,{style:t,get children(){return[_n(fn,{style:o,children:"Subline Text"}),_n(pn,{width:28,height:28,src:"/assets/rt-popcorn.png"}),_n(fn,{style:o,children:"More Text"})]}})]}})},Mo=function(){function e(e,t){this.states.toggle("disabled")}var t={display:"flex",justifyContent:"flexStart",width:1500,height:300,color:Fn("00000000"),gap:26,y:400};function n(e){return _n(pn,Rn(e,{forwardStates:!0,get style(){return Kr.container},get children(){return _n(fn,{get style(){return Kr.text},get children(){return e.children}})}}))}var r=function(e){return t=kn("node"),En(xr,t,(function(){return[10,15]})),Tn(t,Rn(e,{get style(){return{color:Fn("#000000be"),borderRadius:8,border:{width:2,color:Fn("#ffffff")}}}}),!0),Sn(t,_n(fn,{style:{fontSize:20},get children(){return e.children}})),t;var t};return[_n(Lr,{x:100,y:200,gap:5,style:t,get children(){return[_n(r,{children:"HD"}),_n(r,{children:"PG13"}),_n(r,{children:"NC17"}),_n(fn,{fontSize:30,children:"I like bananas"}),_n(r,{children:"DOLBY"})]}}),_n(Lr,{x:100,gap:40,style:t,get children(){return[_n(n,{autofocus:!0,onEnter:e,children:"TV Shows"}),_n(n,{states:{active:!0,disabled:!1},children:"Movies"}),_n(n,{states:"active",children:"Sports"}),_n(n,{states:"disabled",children:"News"})]}})]},Oo=function(){var e={display:"flex",justifyContent:"flexStart",width:1600,height:110,color:Fn("#4dabf5")},t={fontSize:44,marginTop:25,marginBottom:-20,skipFocus:!0};function n(e){return _n(pn,Rn(e,{style:{width:200,height:100,y:5,color:392801023}}))}var r=w(ie(50),2),o=r[0],i=r[1];function a(){var e;null===(e=this.children.selected)||void 0===e||e.setFocus(),i(150+-1*(this.y||0))}pe((function(){Or("#333333")}));var s=50;return _n(Pr,{x:160,get y(){return o()},gap:30,height:850,get width(){return e.width},get style(){return $r.Column},get children(){return[_n(fn,{style:t,children:"Flex Start"}),_n(Lr,{gap:s,style:e,onFocus:a,get children(){return[_n(n,{autofocus:!0}),_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{})]}}),_n(fn,{style:t,children:"Flex Start - Margin Left"}),_n(Lr,{gap:s,style:e,onFocus:a,get children(){return[_n(n,{marginLeft:100}),_n(n,{}),_n(n,{marginLeft:100}),_n(n,{}),_n(n,{})]}}),_n(fn,{style:t,children:"Flex End"}),_n(Lr,{gap:s,justifyContent:"flexEnd",style:e,onFocus:a,get children(){return[_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{})]}}),_n(fn,{style:t,children:"Flex End - Margin Right"}),_n(Lr,{gap:s,justifyContent:"flexEnd",style:e,onFocus:a,get children(){return[_n(n,{}),_n(n,{marginRight:100}),_n(n,{}),_n(n,{}),_n(n,{marginRight:100})]}}),_n(fn,{style:t,children:"Center - No Margin Support"}),_n(Lr,{gap:s,justifyContent:"center",style:e,onFocus:a,get children(){return[_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{})]}}),_n(fn,{style:t,children:"Space Between - No Margin Support"}),_n(Lr,{gap:s,justifyContent:"spaceBetween",style:e,onFocus:a,get children(){return[_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{})]}}),_n(fn,{style:t,children:"Space Evenly - No Margin Support"}),_n(Lr,{gap:s,justifyContent:"spaceEvenly",style:e,onFocus:a,get children(){return[_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{})]}})]}})},Bo=function(){var e={display:"flex",justifyContent:"flexStart",width:1600,height:110,color:Fn("#4dabf5")},t={fontSize:44,marginTop:25,marginBottom:-20,skipFocus:!0};function n(e){return _n(pn,Rn(e,{style:{width:200,height:100,y:5,color:392801023}}))}function r(){return Math.floor(91*Math.random())+10}var o=w(ie(50),2),i=o[0],a=o[1];function s(){var e;null===(e=this.children.selected)||void 0===e||e.setFocus(),a(150+-1*(this.y||0))}pe((function(){Or("#333333")}));var u=50;return _n(Pr,{x:160,get y(){return i()},gap:30,height:850,get width(){return e.width},get style(){return $r.Column},get children(){return[_n(fn,{style:t,children:"Flex Start - AlignItems: center"}),_n(Lr,{alignItems:"center",gap:u,style:e,onFocus:s,get children(){return[_n(n,{autofocus:!0,get height(){return r()}}),_n(n,{get height(){return r()}}),_n(n,{get height(){return r()}}),_n(n,{get height(){return r()}}),_n(n,{get height(){return r()}})]}}),_n(fn,{style:t,children:"Flex Start - Margin Left - AlignItems: flexStart"}),_n(Lr,{gap:u,alignItems:"flexStart",style:e,onFocus:s,get children(){return[_n(n,{marginLeft:100,get height(){return r()}}),_n(n,{get height(){return r()}}),_n(n,{marginLeft:100,get height(){return r()}}),_n(n,{get height(){return r()}}),_n(n,{get height(){return r()}})]}}),_n(fn,{style:t,children:"Flex End - AlignItems: flexEnd"}),_n(Lr,{gap:u,justifyContent:"flexEnd",alignItems:"flexEnd",style:e,onFocus:s,get children(){return[_n(n,{get height(){return r()}}),_n(n,{get height(){return r()}}),_n(n,{get height(){return r()}}),_n(n,{get height(){return r()}}),_n(n,{get height(){return r()}})]}}),_n(fn,{style:t,children:"Flex End - Margin Right"}),_n(Lr,{gap:u,justifyContent:"flexEnd",style:e,onFocus:s,get children(){return[_n(n,{get height(){return r()}}),_n(n,{marginRight:100,get height(){return r()}}),_n(n,{get height(){return r()}}),_n(n,{get height(){return r()}}),_n(n,{marginRight:100,get height(){return r()}})]}}),_n(fn,{style:t,children:"Center - No Margin Support"}),_n(Lr,{gap:u,justifyContent:"center",style:e,onFocus:s,get children(){return[_n(n,{get height(){return r()}}),_n(n,{get height(){return r()}}),_n(n,{get height(){return r()}}),_n(n,{get height(){return r()}}),_n(n,{get height(){return r()}})]}}),_n(fn,{style:t,children:"Space Between - No Margin Support"}),_n(Lr,{gap:u,justifyContent:"spaceBetween",style:e,onFocus:s,get children(){return[_n(n,{get height(){return r()}}),_n(n,{get height(){return r()}}),_n(n,{get height(){return r()}}),_n(n,{get height(){return r()}}),_n(n,{get height(){return r()}})]}}),_n(fn,{style:t,children:"Space Evenly - No Margin Support"}),_n(Lr,{gap:u,justifyContent:"spaceEvenly",style:e,onFocus:s,get children(){return[_n(n,{get height(){return r()}}),_n(n,{get height(){return r()}}),_n(n,{get height(){return r()}}),_n(n,{get height(){return r()}}),_n(n,{get height(){return r()}})]}})]}})},Do=function(){var e={display:"flex",justifyContent:"spaceEvenly",width:1920,y:100,height:880,color:Fn("00000000")},t={display:"flex",flexDirection:"column",justifyContent:"flexStart",color:Fn("#4dabf5"),height:850,width:80};function n(e){var t={width:Math.floor(61*Math.random())+10,height:80,x:5,color:Fn("#1769aa")};return _n(pn,Rn(e,{style:t}))}var r=w(ie(50),2),o=(r[0],r[1]);function i(){var e;null===(e=this.children.selected)||void 0===e||e.setFocus(),o(150+-1*(this.y||0))}pe((function(){Or("#333333")}));var a=50;return[_n(fn,{style:{fontSize:44,y:20,x:150},children:"Start, MarginTop, End, MarginBottom, Center, Between, Evenly"}),_n(Lr,{gap:a,style:e,onFocus:i,get children(){return[_n(Pr,{gap:30,style:t,alignItems:"center",get children(){return[_n(n,{autofocus:!0}),_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{})]}}),_n(Pr,{gap:a,style:t,onFocus:i,alignItems:"flexStart",get children(){return[_n(n,{marginTop:100}),_n(n,{}),_n(n,{marginTop:100}),_n(n,{}),_n(n,{})]}}),_n(Pr,{gap:a,alignItems:"flexEnd",justifyContent:"flexEnd",style:t,onFocus:i,get children(){return[_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{})]}}),_n(Pr,{gap:a,justifyContent:"flexEnd",style:t,onFocus:i,get children(){return[_n(n,{}),_n(n,{marginBottom:100}),_n(n,{}),_n(n,{}),_n(n,{marginBottom:100})]}}),_n(Pr,{gap:a,justifyContent:"center",style:t,onFocus:i,get children(){return[_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{})]}}),_n(Pr,{gap:a,justifyContent:"spaceBetween",style:t,onFocus:i,get children(){return[_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{})]}}),_n(Pr,{gap:a,justifyContent:"spaceEvenly",style:t,onFocus:i,get children(){return[_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{})]}})]}})]},jo=function(){var e={display:"flex",justifyContent:"spaceEvenly",width:1920,y:100,height:880,color:Fn("00000000")},t={display:"flex",flexDirection:"column",justifyContent:"flexStart",color:Fn("#4dabf5"),height:850,width:60};function n(e){var t={width:50,height:80,x:5,color:Fn("#1769aa")};return _n(pn,Rn(e,{style:t}))}var r=w(ie(50),2),o=(r[0],r[1]);function i(){var e;null===(e=this.children.selected)||void 0===e||e.setFocus(),o(150+-1*(this.y||0))}pe((function(){Or("#333333")}));var a=50;return[_n(fn,{style:{fontSize:44,y:20,x:150},children:"Start, MarginTop, End, MarginBottom, Center, Between, Evenly"}),_n(Lr,{gap:a,style:e,onFocus:i,get children(){return[_n(Pr,{gap:30,style:t,get children(){return[_n(n,{autofocus:!0}),_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{})]}}),_n(Pr,{gap:a,style:t,onFocus:i,get children(){return[_n(n,{marginTop:100}),_n(n,{}),_n(n,{marginTop:100}),_n(n,{}),_n(n,{})]}}),_n(Pr,{gap:a,justifyContent:"flexEnd",style:t,onFocus:i,get children(){return[_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{})]}}),_n(Pr,{gap:a,justifyContent:"flexEnd",style:t,onFocus:i,get children(){return[_n(n,{}),_n(n,{marginBottom:100}),_n(n,{}),_n(n,{}),_n(n,{marginBottom:100})]}}),_n(Pr,{gap:a,justifyContent:"center",style:t,onFocus:i,get children(){return[_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{})]}}),_n(Pr,{gap:a,justifyContent:"spaceBetween",style:t,onFocus:i,get children(){return[_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{})]}}),_n(Pr,{gap:a,justifyContent:"spaceEvenly",style:t,onFocus:i,get children(){return[_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{}),_n(n,{})]}})]}})]},Uo=function(){function e(e,t){this.states.toggle("disabled")}var t={display:"flex",justifyContent:"flexStart",width:1500,height:300,color:Fn("00000000"),gap:26,y:400,x:100},n={width:386,height:136,color:"0x715cabff",focus:{color:"0x5a39a2ff"},disabled:{color:"0x291d43ff"}},r=["RoundedRectangle",{radius:65}];function o(e){return _n(pn,Rn(e,{forwardStates:!0,style:n,shader:r,get children(){return _n(fn,{style:Qr,get children(){return e.children}})}}))}return _n(Lr,{style:t,get children(){return[_n(o,{autofocus:!0,onEnter:e,children:"Focused"}),_n(o,{states:{active:!0,disabled:!1},children:"Normal"}),_n(o,{states:"disabled",children:"Disabled"})]}})},Yo="https://storage.googleapis.com/shaka-demo-assets/angel-one/dash.mpd";function Wo(){return(Wo=o(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("video"),r=new shaka.Player,e.next=4,r.attach(t);case 4:return window.player=r,r.addEventListener("error",Xo),e.prev=6,e.next=9,r.load(Yo);case 9:console.log("The video has now been loaded!"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),Go(e.t0);case 15:case"end":return e.stop()}}),e,null,[[6,12]])})))).apply(this,arguments)}function Xo(e){Go(e.detail)}function Go(e){console.error("Error code",e.code,"object",e)}document.addEventListener("DOMContentLoaded",(function(){shaka.polyfill.installAll(),shaka.Player.isBrowserSupported()?function(){Wo.apply(this,arguments)}():console.error("Browser not supported!")}));var Ho=function(){var e=Hn(),t=Gn(),n=w(ce((function(){return y({},e)}),Ao),1)[0],r=w(ce((function(){return y({},e)}),No),1)[0],o=w(ce((function(){return y({},e)}),Io),1)[0],i=w(ie(0),2),a=i[0],s=i[1];ue(fe(n,(function(e){Or(e.backgroundImage)}),{defer:!0}));var u,l,c,h=600,f={color:Fn("#000000"),alpha:0,width:1900,height:890,x:10,y:h,borderRadius:30};function p(){var e;null===(e=this.children.selected)||void 0===e||e.setFocus(),u.y=h,l.y=h,l.alpha=0}function v(){var e;null===(e=this.children.selected)||void 0===e||e.setFocus(),u.y=200,l.y=160,l.alpha=.9}function g(){var e=this.children.selected;d(e&&e.href),t(e.href)}function m(){var e;(e=document.getElementById("video")).hidden=!0,e.pause(),document.getElementsByTagName("canvas")[0].focus(),qe(c),s(0)}function x(){var e=function(){var e=document.getElementById("video");return e.hidden=!1,setTimeout((function(){return e.play()}),50),e.focus(),e}();qe(e),s(.9)}return _n(He,{get when(){return n()},keyed:!0,get children(){return[_n(pn,{onUp:function(){return c.setFocus()},onEscape:m,get children(){return[_n(Eo,Rn({y:360,x:150},(function(){return n().heroContent}))),_n(ro,{autofocus:!0,ref:function(e){"function"==typeof c?c(e):c=e},y:560,x:150,onDown:function(){return u.setFocus()},onEnter:x,children:"Watch Trailer"}),_n(Pr,{ref:function(e){"function"==typeof u?u(e):u=e},y:h,x:140,get style(){return $r.Column},zIndex:5,get children(){return _n(He,{get when(){return bn((function(){return!!o()}))()&&r()},get children(){return[_n(fn,{skipFocus:!0,get style(){return $r.RowTitle},children:"Recommendations"}),_n(no,{onFocus:p,onEnter:g,get items(){return o()}}),_n(fn,{skipFocus:!0,get style(){return $r.RowTitle},children:"Cast and Crew"}),_n(no,{onFocus:v,onEnter:g,get items(){return r()}})]}})}}),_n(pn,{ref:function(e){"function"==typeof l?l(e):l=e},style:f,transition:{alpha:!0,y:!0}})]}}),_n(pn,{get alpha(){return a()},get color(){return Fn("#000000")},zIndex:200,transition:{alpha:!0}})]}})};function $o(e){var t=e.id;return po.get("/person/".concat(t,"/combined_credits")).then((function(e){return vo(e.cast.slice(0,7))}))}function Vo(e){var t=e.id;return po.get("/person/".concat(t)).then((function(e){return y({backgroundImage:co(e.profile_path,"original"),heroContent:{title:e.title||e.name,description:e.biography}},e)}))}var Ko=function(){var e=Hn(),t=Gn(),n=w(ce((function(){return y({},e)}),Vo),1)[0],r=w(ce((function(){return y({},e)}),$o),1)[0];ue(fe(n,(function(e){Or(e.backgroundImage)}),{defer:!0}));var o={color:Fn("#000000"),alpha:.8,width:1540,height:440,x:130,y:180,borderRadius:30};function i(){var e=this.children.selected;d(e&&e.href),t(e.href)}return _n(He,{get when(){return n()},keyed:!0,get children(){return[_n(pn,{x:150,y:200,get style(){return $r.Column},zIndex:3,get children(){return[_n(fn,{get style(){return Br.typography.display2},get children(){return n().name}}),_n(fn,{get style(){return $r.peopleBio},get children(){return n().biography}})]}}),_n(pn,{style:o}),_n(Pr,{y:670,x:140,get style(){return $r.Column},get children(){return _n(He,{get when(){return r()},get children(){return[_n(fn,{skipFocus:!0,get style(){return $r.RowTitle},children:"Credits"}),_n(no,{autofocus:!0,onEnter:i,get items(){return r()}})]}})}})]}})},qo=function(){return e=kn("node"),Cn(e,"style",{width:1920,height:1080,color:868483072}),e;var e},Zo=new URL("AppCoreExtensions-legacy-04830c38.js",s.meta.url).href;rn.debug=!1,rn.animationsEnabled=!0,rn.fontSettings.fontFamily="Ubuntu",rn.fontSettings.color=Fn("#ffffff"),rn.fontSettings.fontSize=100;var Qo=w(ie(0),2),Jo=Qo[0],ei=Qo[1];function ti(e){e.renderer.on("fpsUpdate",(function(e,t){ei(t)}))}wn((function(){return _n(gn,{options:{coreExtensionModule:Zo,threadXCoreWorkerUrl:void 0,fpsUpdateInterval:250},ref:function(e){"function"==typeof ti?ti(e):ti=e},get children(){return _n(ur,{root:function(e){return _n(ao,Rn(e,{get fps(){return Jo()}}))},get children(){return[_n(nr,{path:"",component:Lo}),_n(nr,{path:"examples",component:Po}),_n(nr,{path:"browse/:filter",component:Lo}),_n(nr,{path:"text",component:zo}),_n(nr,{path:"buttons",component:Mo}),_n(nr,{path:"flex",component:Oo}),_n(nr,{path:"flexsize",component:Bo}),_n(nr,{path:"flexcolumnsize",component:Do}),_n(nr,{path:"flexcolumn",component:jo}),_n(nr,{path:"buttonsmaterial",component:Uo}),_n(nr,{path:"entity/people/:id",component:Ko}),_n(nr,{path:"entity/:type/:id",component:Ho}),_n(nr,{path:"*all",component:qo})]}})}})}))}}}))}();
//# sourceMappingURL=index-legacy-258f38f9.js.map
