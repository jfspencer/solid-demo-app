var Xo=Object.defineProperty;var Yo=(n,t,e)=>t in n?Xo(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var h=(n,t,e)=>(Yo(n,typeof t!="symbol"?t+"":t,e),e);import{E as We,S as $o,W as Ho,C as Go}from"./CoreExtension-DvJNZNlg.js";function Nc(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function e(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=e(o);fetch(o.href,i)}})();const Hn=(n,t)=>n===t,$t=Symbol("solid-proxy"),Qo=Symbol("solid-track"),Ht={equals:Hn};let Gn=Jn;const be=1,Gt=2,Qn={owned:null,cleanups:null,context:null,owner:null},fr={};var O=null;let gr=null,jo=null,$=null,ie=null,Re=null,or=0;function at(n,t){const e=$,r=O,o=n.length===0,i=t===void 0?r:t,s=o?Qn:{owned:null,cleanups:null,context:i?i.context:null,owner:i},a=o?n:()=>n(()=>ce(()=>ir(s)));O=s,$=null;try{return Ie(a,!0)}finally{$=e,O=r}}function Y(n,t){t=t?Object.assign({},Ht,t):Ht;const e={value:n,observers:null,observerSlots:null,comparator:t.equals||void 0},r=o=>(typeof o=="function"&&(o=o(e.value)),Zn(e,o));return[qn.bind(e),r]}function br(n,t,e){const r=Bt(n,t,!0,be);Ve(r)}function Ce(n,t,e){const r=Bt(n,t,!1,be);Ve(r)}function ze(n,t,e){Gn=ti;const r=Bt(n,t,!1,be);(!e||!e.render)&&(r.user=!0),Re?Re.push(r):Ve(r)}function re(n,t,e){e=e?Object.assign({},Ht,e):Ht;const r=Bt(n,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=e.equals||void 0,Ve(r),qn.bind(r)}function Vo(n){return n&&typeof n=="object"&&"then"in n}function Qe(n,t,e){let r,o,i;arguments.length===2&&typeof t=="object"||arguments.length===1?(r=!0,o=n,i=t||{}):(r=n,o=t,i=e||{});let s=null,a=fr,l=!1,d="initialValue"in i,u=typeof r=="function"&&re(r);const f=new Set,[m,y]=(i.storage||Y)(i.initialValue),[p,x]=Y(void 0),[T,w]=Y(void 0,{equals:!1}),[S,A]=Y(d?"ready":"unresolved");function v(_,E,R,B){return s===_&&(s=null,B!==void 0&&(d=!0),(_===a||E===a)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(B,{value:E})),a=fr,C(E,R)),E}function C(_,E){Ie(()=>{E===void 0&&y(()=>_),A(E!==void 0?"errored":d?"ready":"unresolved"),x(E);for(const R of f.keys())R.decrement();f.clear()},!1)}function I(){const _=Zo,E=m(),R=p();if(R!==void 0&&!s)throw R;return $&&!$.user&&_&&br(()=>{T(),s&&(_.resolved||f.has(_)||(_.increment(),f.add(_)))}),E}function b(_=!0){if(_!==!1&&l)return;l=!1;const E=u?u():r;if(E==null||E===!1){v(s,ce(m));return}const R=a!==fr?a:ce(()=>o(E,{value:m(),refetching:_}));return Vo(R)?(s=R,"value"in R?(R.status==="success"?v(s,R.value,void 0,E):v(s,void 0,void 0,E),R):(l=!0,queueMicrotask(()=>l=!1),Ie(()=>{A(d?"refreshing":"pending"),w()},!1),R.then(B=>v(R,B,void 0,E),B=>v(R,void 0,to(B),E)))):(v(s,R,void 0,E),R)}return Object.defineProperties(I,{state:{get:()=>S()},error:{get:()=>p()},loading:{get(){const _=S();return _==="pending"||_==="refreshing"}},latest:{get(){if(!d)return I();const _=p();if(_&&!s)throw _;return m()}}}),u?br(()=>b(!1)):b(!1),[I,{refetch:b,mutate:y}]}function jn(n,t=Hn,e){const r=new Map,o=Bt(i=>{const s=n();for(const[a,l]of r.entries())if(t(a,s)!==t(a,i))for(const d of l.values())d.state=be,d.pure?ie.push(d):Re.push(d);return s},void 0,!0,be);return Ve(o),i=>{const s=$;if(s){let a;(a=r.get(i))?a.add(s):r.set(i,a=new Set([s])),Oe(()=>{a.delete(s),!a.size&&r.delete(i)})}return t(i,o.value)}}function Ko(n){return Ie(n,!1)}function ce(n){if($===null)return n();const t=$;$=null;try{return n()}finally{$=t}}function Xe(n,t,e){const r=Array.isArray(n);let o,i=e&&e.defer;return s=>{let a;if(r){a=Array(n.length);for(let d=0;d<n.length;d++)a[d]=n[d]()}else a=n();if(i){i=!1;return}const l=ce(()=>t(a,o,s));return o=a,l}}function ht(n){ze(()=>ce(n))}function Oe(n){return O===null||(O.cleanups===null?O.cleanups=[n]:O.cleanups.push(n)),n}function It(){return O}function Vn(n,t){const e=O,r=$;O=n,$=null;try{return Ie(t,!0)}catch(o){Gr(o)}finally{O=e,$=r}}function qo(n){const t=$,e=O;return Promise.resolve().then(()=>{$=t,O=e;let r;return Ie(n,!1),$=O=null,r?r.done:void 0})}function Kn(n,t){const e=Symbol("context");return{id:e,Provider:ri(e),defaultValue:n}}function $r(n){return O&&O.context&&O.context[n.id]!==void 0?O.context[n.id]:n.defaultValue}function Hr(n){const t=re(n),e=re(()=>Tr(t()));return e.toArray=()=>{const r=e();return Array.isArray(r)?r:r!=null?[r]:[]},e}let Zo;function qn(){if(this.sources&&this.state)if(this.state===be)Ve(this);else{const n=ie;ie=null,Ie(()=>jt(this),!1),ie=n}if($){const n=this.observers?this.observers.length:0;$.sources?($.sources.push(this),$.sourceSlots.push(n)):($.sources=[this],$.sourceSlots=[n]),this.observers?(this.observers.push($),this.observerSlots.push($.sources.length-1)):(this.observers=[$],this.observerSlots=[$.sources.length-1])}return this.value}function Zn(n,t,e){let r=n.value;return(!n.comparator||!n.comparator(r,t))&&(n.value=t,n.observers&&n.observers.length&&Ie(()=>{for(let o=0;o<n.observers.length;o+=1){const i=n.observers[o],s=gr&&gr.running;s&&gr.disposed.has(i),(s?!i.tState:!i.state)&&(i.pure?ie.push(i):Re.push(i),i.observers&&eo(i)),s||(i.state=be)}if(ie.length>1e6)throw ie=[],new Error},!1)),t}function Ve(n){if(!n.fn)return;ir(n);const t=or;Jo(n,n.value,t)}function Jo(n,t,e){let r;const o=O,i=$;$=O=n;try{r=n.fn(t)}catch(s){return n.pure&&(n.state=be,n.owned&&n.owned.forEach(ir),n.owned=null),n.updatedAt=e+1,Gr(s)}finally{$=i,O=o}(!n.updatedAt||n.updatedAt<=e)&&(n.updatedAt!=null&&"observers"in n?Zn(n,r):n.value=r,n.updatedAt=e)}function Bt(n,t,e,r=be,o){const i={fn:n,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:O,context:O?O.context:null,pure:e};return O===null||O!==Qn&&(O.owned?O.owned.push(i):O.owned=[i]),i}function Qt(n){if(n.state===0)return;if(n.state===Gt)return jt(n);if(n.suspense&&ce(n.suspense.inFallback))return n.suspense.effects.push(n);const t=[n];for(;(n=n.owner)&&(!n.updatedAt||n.updatedAt<or);)n.state&&t.push(n);for(let e=t.length-1;e>=0;e--)if(n=t[e],n.state===be)Ve(n);else if(n.state===Gt){const r=ie;ie=null,Ie(()=>jt(n,t[0]),!1),ie=r}}function Ie(n,t){if(ie)return n();let e=!1;t||(ie=[]),Re?e=!0:Re=[],or++;try{const r=n();return ei(e),r}catch(r){e||(Re=null),ie=null,Gr(r)}}function ei(n){if(ie&&(Jn(ie),ie=null),n)return;const t=Re;Re=null,t.length&&Ie(()=>Gn(t),!1)}function Jn(n){for(let t=0;t<n.length;t++)Qt(n[t])}function ti(n){let t,e=0;for(t=0;t<n.length;t++){const r=n[t];r.user?n[e++]=r:Qt(r)}for(t=0;t<e;t++)Qt(n[t])}function jt(n,t){n.state=0;for(let e=0;e<n.sources.length;e+=1){const r=n.sources[e];if(r.sources){const o=r.state;o===be?r!==t&&(!r.updatedAt||r.updatedAt<or)&&Qt(r):o===Gt&&jt(r,t)}}}function eo(n){for(let t=0;t<n.observers.length;t+=1){const e=n.observers[t];e.state||(e.state=Gt,e.pure?ie.push(e):Re.push(e),e.observers&&eo(e))}}function ir(n){let t;if(n.sources)for(;n.sources.length;){const e=n.sources.pop(),r=n.sourceSlots.pop(),o=e.observers;if(o&&o.length){const i=o.pop(),s=e.observerSlots.pop();r<o.length&&(i.sourceSlots[s]=r,o[r]=i,e.observerSlots[r]=s)}}if(n.owned){for(t=n.owned.length-1;t>=0;t--)ir(n.owned[t]);n.owned=null}if(n.cleanups){for(t=n.cleanups.length-1;t>=0;t--)n.cleanups[t]();n.cleanups=null}n.state=0}function to(n){return n instanceof Error?n:new Error(typeof n=="string"?n:"Unknown error",{cause:n})}function Gr(n,t=O){throw to(n)}function Tr(n){if(typeof n=="function"&&!n.length)return Tr(n());if(Array.isArray(n)){const t=[];for(let e=0;e<n.length;e++){const r=Tr(n[e]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return n}function ri(n,t){return function(r){let o;return Ce(()=>o=ce(()=>(O.context={...O.context,[n]:r.value},Hr(()=>r.children))),void 0),o}}const ni=Symbol("fallback");function un(n){for(let t=0;t<n.length;t++)n[t]()}function oi(n,t,e={}){let r=[],o=[],i=[],s=0,a=t.length>1?[]:null;return Oe(()=>un(i)),()=>{let l=n()||[],d,u;return l[Qo],ce(()=>{let m=l.length,y,p,x,T,w,S,A,v,C;if(m===0)s!==0&&(un(i),i=[],r=[],o=[],s=0,a&&(a=[])),e.fallback&&(r=[ni],o[0]=at(I=>(i[0]=I,e.fallback())),s=1);else if(s===0){for(o=new Array(m),u=0;u<m;u++)r[u]=l[u],o[u]=at(f);s=m}else{for(x=new Array(m),T=new Array(m),a&&(w=new Array(m)),S=0,A=Math.min(s,m);S<A&&r[S]===l[S];S++);for(A=s-1,v=m-1;A>=S&&v>=S&&r[A]===l[v];A--,v--)x[v]=o[A],T[v]=i[A],a&&(w[v]=a[A]);for(y=new Map,p=new Array(v+1),u=v;u>=S;u--)C=l[u],d=y.get(C),p[u]=d===void 0?-1:d,y.set(C,u);for(d=S;d<=A;d++)C=r[d],u=y.get(C),u!==void 0&&u!==-1?(x[u]=o[d],T[u]=i[d],a&&(w[u]=a[d]),u=p[u],y.set(C,u)):i[d]();for(u=S;u<m;u++)u in x?(o[u]=x[u],i[u]=T[u],a&&(a[u]=w[u],a[u](u))):o[u]=at(f);o=o.slice(0,s=m),r=l.slice(0)}return o});function f(m){if(i[u]=m,a){const[y,p]=Y(u);return a[u]=p,t(l[u],y)}return t(l[u])}}}function ro(n,t){return ce(()=>n(t||{}))}function Lt(){return!0}const _r={get(n,t,e){return t===$t?e:n.get(t)},has(n,t){return t===$t?!0:n.has(t)},set:Lt,deleteProperty:Lt,getOwnPropertyDescriptor(n,t){return{configurable:!0,enumerable:!0,get(){return n.get(t)},set:Lt,deleteProperty:Lt}},ownKeys(n){return n.keys()}};function pr(n){return(n=typeof n=="function"?n():n)?n:{}}function ii(){for(let n=0,t=this.length;n<t;++n){const e=this[n]();if(e!==void 0)return e}}function Qr(...n){let t=!1;for(let s=0;s<n.length;s++){const a=n[s];t=t||!!a&&$t in a,n[s]=typeof a=="function"?(t=!0,re(a)):a}if(t)return new Proxy({get(s){for(let a=n.length-1;a>=0;a--){const l=pr(n[a])[s];if(l!==void 0)return l}},has(s){for(let a=n.length-1;a>=0;a--)if(s in pr(n[a]))return!0;return!1},keys(){const s=[];for(let a=0;a<n.length;a++)s.push(...Object.keys(pr(n[a])));return[...new Set(s)]}},_r);const e={},r=Object.create(null);for(let s=n.length-1;s>=0;s--){const a=n[s];if(!a)continue;const l=Object.getOwnPropertyNames(a);for(let d=l.length-1;d>=0;d--){const u=l[d];if(u==="__proto__"||u==="constructor")continue;const f=Object.getOwnPropertyDescriptor(a,u);if(!r[u])r[u]=f.get?{enumerable:!0,configurable:!0,get:ii.bind(e[u]=[f.get.bind(a)])}:f.value!==void 0?f:void 0;else{const m=e[u];m&&(f.get?m.push(f.get.bind(a)):f.value!==void 0&&m.push(()=>f.value))}}}const o={},i=Object.keys(r);for(let s=i.length-1;s>=0;s--){const a=i[s],l=r[a];l&&l.get?Object.defineProperty(o,a,l):o[a]=l?l.value:void 0}return o}function si(n,...t){if($t in n){const o=new Set(t.length>1?t.flat():t[0]),i=t.map(s=>new Proxy({get(a){return s.includes(a)?n[a]:void 0},has(a){return s.includes(a)&&a in n},keys(){return s.filter(a=>a in n)}},_r));return i.push(new Proxy({get(s){return o.has(s)?void 0:n[s]},has(s){return o.has(s)?!1:s in n},keys(){return Object.keys(n).filter(s=>!o.has(s))}},_r)),i}const e={},r=t.map(()=>({}));for(const o of Object.getOwnPropertyNames(n)){const i=Object.getOwnPropertyDescriptor(n,o),s=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let a=!1,l=0;for(const d of t)d.includes(o)&&(a=!0,s?r[l][o]=i.value:Object.defineProperty(r[l],o,i)),++l;a||(s?e[o]=i.value:Object.defineProperty(e,o,i))}return[...r,e]}const ai=n=>"Stale read from <".concat(n,">.");function sr(n){const t="fallback"in n&&{fallback:()=>n.fallback};return re(oi(()=>n.each,n.children,t||void 0))}function Me(n){const t=n.keyed,e=re(()=>n.when,void 0,{equals:(r,o)=>t?r===o:!r==!o});return re(()=>{const r=e();if(r){const o=n.children;return typeof o=="function"&&o.length>0?ce(()=>o(t?r:()=>{if(!ce(e))throw ai("Show");return n.when})):o}return n.fallback},void 0,void 0)}const li=void 0,[jr,Cr]=Y(void 0);function ci(n,t){const e={alpha:!0,antialias:!1,depth:!1,stencil:!0,desynchronized:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!1},r=n.getContext("webgl",e)||n.getContext("experimental-webgl",e);if(!r)throw new Error("Unable to create WebGL context");return t?new Proxy(r,{get(o,i){const s=o[i];return typeof s=="function"?(t.increment(String(i)),s.bind(o)):s}}):r}function dn(n,t,e){const r=Math.trunc(n>>>24),o=Math.trunc(n>>>16&255),i=Math.trunc(n>>>8&255),s=Math.trunc(n&255),a=Math.trunc(t>>>24),l=Math.trunc(t>>>16&255),d=Math.trunc(t>>>8&255),u=Math.trunc(t&255),f=Math.round(a*e+r*(1-e)),m=Math.round(l*e+o*(1-e)),y=Math.round(d*e+i*(1-e)),p=Math.round(u*e+s*(1-e));return(f<<24|m<<16|y<<8|p)>>>0}function hi(n,t){const e=n>>>24,r=n>>>16&255,o=n>>>8&255,i=Math.trunc((n&255)*t);return(e<<24|r<<16|o<<8|i)>>>0}function mt(n,t,e=!1){const r=(n&255)/255*t,o=Math.trunc((n>>>24)*r),i=Math.trunc((n>>>16&255)*r),s=Math.trunc((n>>>8&255)*r),a=Math.trunc(r*255);return e?(a<<24|s<<16|i<<8|o)>>>0:(o<<24|i<<16|s<<8|a)>>>0}function Er(n,t){return Object.prototype.hasOwnProperty.call(n,t)}class no{constructor(t){h(this,"releaseCallback");this.releaseCallback=t}}class ui extends no{constructor(e,r){var o,i;super(e);h(this,"textureMap",new Map);h(this,"zeroReferenceTextureSet",new Set);h(this,"options");this.options={textureCleanupIntervalMs:(o=r.textureCleanupIntervalMs)!=null?o:1e4,textureCleanupAgeThreadholdMs:(i=r.textureCleanupAgeThreadholdMs)!=null?i:6e4},setInterval(()=>{const s=Date.now(),a=this.options.textureCleanupAgeThreadholdMs;for(const l of this.zeroReferenceTextureSet)s-l.lastUpdate>a&&(this.releaseCallback(l.id),this.textureMap.delete(l.id),this.zeroReferenceTextureSet.delete(l))},this.options.textureCleanupIntervalMs)}registerTexture(e){var o;const r=(o=e.options)==null?void 0:o.id;if(!this.textureMap.has(r)){const i={id:r,nodeRefCount:0,lastUpdate:Date.now()};this.textureMap.set(r,i),this.zeroReferenceTextureSet.add(i)}}incrementTextureRefCount(e){var i;const r=(i=e.options)==null?void 0:i.id;let o=this.textureMap.get(r);o||(this.registerTexture(e),o=this.textureMap.get(r)),e.txType==="SubTexture"&&this.incrementTextureRefCount(e.props.texture),o.nodeRefCount++,o.lastUpdate=Date.now(),this.zeroReferenceTextureSet.has(o)&&this.zeroReferenceTextureSet.delete(o)}decrementTextureRefCount(e){var i;const r=(i=e.options)==null?void 0:i.id,o=this.textureMap.get(r);o.nodeRefCount--,o.lastUpdate=Date.now(),o.nodeRefCount===0&&this.zeroReferenceTextureSet.add(o),e.txType==="SubTexture"&&this.decrementTextureRefCount(e.props.texture)}}class di extends no{constructor(e){super(e);h(this,"registry");this.registry=new FinalizationRegistry(e)}registerTexture(e){var r,o;(r=e.options)==null||r.id,this.registry.register(e,(o=e.options)==null?void 0:o.id)}incrementTextureRefCount(){}decrementTextureRefCount(){}}class fi extends We{constructor(e,r,o){var w,S,A,v;super();h(this,"root",null);h(this,"driver");h(this,"canvas");h(this,"settings");h(this,"inspector",null);h(this,"nodes",new Map);h(this,"nextTextureId",1);h(this,"textureTracker");const i={appWidth:e.appWidth||1920,appHeight:e.appHeight||1080,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:(w=e.clearColor)!=null?w:0,coreExtensionModule:e.coreExtensionModule||null,experimental_FinalizationRegistryTextureUsageTracker:(S=e.experimental_FinalizationRegistryTextureUsageTracker)!=null?S:!1,textureCleanupOptions:e.textureCleanupOptions||{},fpsUpdateInterval:e.fpsUpdateInterval||0,numImageWorkers:e.numImageWorkers!==void 0?e.numImageWorkers:2,enableContextSpy:(A=e.enableContextSpy)!=null?A:!1,enableInspector:(v=e.enableInspector)!=null?v:!1};this.settings=i;const{appWidth:s,appHeight:a,deviceLogicalPixelRatio:l,devicePhysicalPixelRatio:d,enableInspector:u}=i,f=C=>{this.driver.releaseTexture(C)},m=i.experimental_FinalizationRegistryTextureUsageTracker&&typeof FinalizationRegistry=="function";this.textureTracker=m?new di(f):new ui(f,this.settings.textureCleanupOptions);const y=s*l,p=a*l;this.driver=o;const x=document.createElement("canvas");this.canvas=x,x.width=y*d,x.height=p*d,x.style.width="".concat(y,"px"),x.style.height="".concat(p,"px");let T;if(typeof r=="string"?T=document.getElementById(r):T=r,!T)throw new Error("Could not find target element");o.onCreateNode=C=>{this.nodes.set(C.id,C)},o.onBeforeDestroyNode=C=>{this.nodes.delete(C.id)},o.onFpsUpdate=C=>{this.emit("fpsUpdate",C)},o.onFrameTick=C=>{this.emit("frameTick",C)},T.appendChild(x)}async init(){await this.driver.init(this,this.settings,this.canvas),this.root=this.driver.getRootNode()}createNode(e){return this.inspector?this.inspector.createNode(this.driver,this.resolveNodeDefaults(e)):this.driver.createNode(this.resolveNodeDefaults(e))}createTextNode(e){var i,s,a,l,d,u,f,m,y,p,x,T,w,S,A,v,C,I,b;const r=(i=e.fontSize)!=null?i:16,o={...this.resolveNodeDefaults(e),text:(s=e.text)!=null?s:"",textRendererOverride:(a=e.textRendererOverride)!=null?a:null,fontSize:r,fontFamily:(l=e.fontFamily)!=null?l:"sans-serif",fontStyle:(d=e.fontStyle)!=null?d:"normal",fontWeight:(u=e.fontWeight)!=null?u:"normal",fontStretch:(f=e.fontStretch)!=null?f:"normal",textAlign:(m=e.textAlign)!=null?m:"left",contain:(y=e.contain)!=null?y:"none",scrollable:(p=e.scrollable)!=null?p:!1,scrollY:(x=e.scrollY)!=null?x:0,offsetY:(T=e.offsetY)!=null?T:0,letterSpacing:(w=e.letterSpacing)!=null?w:0,lineHeight:(S=e.lineHeight)!=null?S:r,maxLines:(A=e.maxLines)!=null?A:0,textBaseline:(v=e.textBaseline)!=null?v:"alphabetic",verticalAlign:(C=e.verticalAlign)!=null?C:"top",overflowSuffix:(I=e.overflowSuffix)!=null?I:"...",debug:(b=e.debug)!=null?b:{}};return this.inspector?this.inspector.createTextNode(this.driver,o):this.driver.createTextNode(o)}resolveNodeDefaults(e){var l,d,u,f,m,y,p,x,T,w,S,A,v,C,I,b,_,E,R,B,L,P,U,k,F,X,se,G,de,Se,ae,Be,Ke,Ne,fe,he,ee,Le,Fe,me,Q,Nt,$e,Pe,He;const r=(l=e.color)!=null?l:4294967295,o=(f=(u=(d=e.colorTl)!=null?d:e.colorTop)!=null?u:e.colorLeft)!=null?f:r,i=(p=(y=(m=e.colorTr)!=null?m:e.colorTop)!=null?y:e.colorRight)!=null?p:r,s=(w=(T=(x=e.colorBl)!=null?x:e.colorBottom)!=null?T:e.colorLeft)!=null?w:r,a=(v=(A=(S=e.colorBr)!=null?S:e.colorBottom)!=null?A:e.colorRight)!=null?v:r;return{x:(C=e.x)!=null?C:0,y:(I=e.y)!=null?I:0,width:(b=e.width)!=null?b:0,height:(_=e.height)!=null?_:0,alpha:(E=e.alpha)!=null?E:1,clipping:(R=e.clipping)!=null?R:!1,color:r,colorTop:(B=e.colorTop)!=null?B:r,colorBottom:(L=e.colorBottom)!=null?L:r,colorLeft:(P=e.colorLeft)!=null?P:r,colorRight:(U=e.colorRight)!=null?U:r,colorBl:s,colorBr:a,colorTl:o,colorTr:i,zIndex:(k=e.zIndex)!=null?k:0,zIndexLocked:(F=e.zIndexLocked)!=null?F:0,parent:(X=e.parent)!=null?X:null,texture:(se=e.texture)!=null?se:null,shader:(G=e.shader)!=null?G:null,src:(de=e.src)!=null?de:"",scale:(Se=e.scale)!=null?Se:null,scaleX:(Be=(ae=e.scaleX)!=null?ae:e.scale)!=null?Be:1,scaleY:(Ne=(Ke=e.scaleY)!=null?Ke:e.scale)!=null?Ne:1,mount:(fe=e.mount)!=null?fe:0,mountX:(ee=(he=e.mountX)!=null?he:e.mount)!=null?ee:0,mountY:(Fe=(Le=e.mountY)!=null?Le:e.mount)!=null?Fe:0,pivot:(me=e.pivot)!=null?me:.5,pivotX:(Nt=(Q=e.pivotX)!=null?Q:e.pivot)!=null?Nt:.5,pivotY:(Pe=($e=e.pivotY)!=null?$e:e.pivot)!=null?Pe:.5,rotation:(He=e.rotation)!=null?He:0}}destroyNode(e){return this.inspector&&this.inspector.destroyNode(e),this.driver.destroyNode(e)}createTexture(e,r,o){const i=this.nextTextureId++,s={descType:"texture",txType:e,props:r,options:{...o,id:i}};return this.textureTracker.registerTexture(s),s}createShader(e,r){return{descType:"shader",shType:e,props:r}}getNodeById(e){return this.nodes.get(e)||null}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}rerender(){throw new Error("Not implemented")}}function oo(n,t){var e=0,r,o;t=t||{};function i(){var s=r,a=arguments.length,l,d;e:for(;s;){if(s.args.length!==arguments.length){s=s.next;continue}for(d=0;d<a;d++)if(s.args[d]!==arguments[d]){s=s.next;continue e}return s!==r&&(s===o&&(o=s.prev),s.prev.next=s.next,s.next&&(s.next.prev=s.prev),s.next=r,s.prev=null,r.prev=s,r=s),s.val}for(l=new Array(a),d=0;d<a;d++)l[d]=arguments[d];return s={args:l,val:n.apply(null,l)},r?(r.prev=s,s.next=r):o=s,e===t.maxSize?(o=o.prev,o.next=null):e++,r=s,s.val}return i.clear=function(){r=null,o=null,e=0},i}const fn=n=>n&&!(n&n-1),ne=(n,t,e,r)=>{const o=3*n,i=3*(e-n)-o,s=1-o-i,a=3*t,l=3*(r-t)-a,d=1-a-l;return function(u){if(u>=1)return 1;if(u<=0)return 0;let f=.5,m,y,p;for(let w=0;w<20;w++){if(m=f*(f*(f*s+i)+o),p=u-m,p>-1e-8&&p<1e-8)return f*(f*(f*d+l)+a);if(y=f*(f*(3*s)+2*i)+o,y>1e-10&&y<1e-10)break;f+=p/y}let x=0,T=1;for(let w=0;w<20;w++){if(f=.5*(x+T),m=f*(f*(f*s+i)+o),p=u-m,p>-1e-8&&p<1e-8)return f*(f*(f*d+l)+a);p<0?T=f:x=f}}},gi=oo(n=>{switch(n){case"linear":return function(e){return e};case"ease":return ne(.25,.1,.25,1);case"ease-in":return ne(.42,0,1,1);case"ease-out":return ne(0,0,.58,1);case"ease-in-out":return ne(.42,0,.58,1);case"ease-in-sine":return ne(.12,0,.39,0);case"ease-out-sine":return ne(.12,0,.39,0);case"ease-in-out-sine":return ne(.37,0,.63,1);case"ease-in-cubic":return ne(.32,0,.67,0);case"ease-out-cubic":return ne(.33,1,.68,1);case"ease-in-out-cubic":return ne(.65,0,.35,1);case"ease-in-circ":return ne(.55,0,1,.45);case"ease-out-circ":return ne(0,.55,.45,1);case"ease-in-out-circ":return ne(.85,0,.15,1);case"ease-in-back":return ne(.36,0,.66,-.56);case"ease-out-back":return ne(.34,1.56,.64,1);case"ease-in-out-back":return ne(.68,-.6,.32,1.6);case"step-start":return function(){return 1};case"step-end":return function(e){return e===1?1:0};default:const t="cubic-bezier(";if(n&&n.indexOf(t)===0){const e=n.substr(t.length,n.length-t.length-1).split(",");if(e.length!==4)return console.warn("Unknown timing function: "+n),function(a){return a};const r=parseFloat(e[0]||"0.42"),o=parseFloat(e[1]||"0"),i=parseFloat(e[2]||"1"),s=parseFloat(e[3]||"1");return isNaN(r)||isNaN(o)||isNaN(i)||isNaN(s)?(console.warn(" Unknown timing function: "+n),function(a){return a}):ne(r,o,i,s)}else return console.warn("Unknown timing function: "+n),function(e){return e}}});Math.hypot||(Math.hypot=(...n)=>{let t=0,e=n.length;for(;e--;)t+=n[e]*n[e];return Math.sqrt(t)});class pi extends We{constructor(e,r,o){super();h(this,"node");h(this,"props");h(this,"settings");h(this,"propStartValues",{});h(this,"restoreValues",{});h(this,"progress",0);h(this,"delayFor",0);h(this,"timingFunction");h(this,"propsList");this.node=e,this.props=r,this.settings=o,this.propStartValues={},this.propsList=Object.keys(r),this.propsList.forEach(i=>{this.propStartValues[i]=e[i]}),this.timingFunction=i=>i,o.easing&&typeof o.easing=="string"&&(this.timingFunction=gi(o.easing)),this.delayFor=o.delay||0}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restore(){this.reset(),Object.keys(this.props).forEach(e=>{this.node[e]=this.propStartValues[e]})}reverse(){this.progress=0,Object.keys(this.props).forEach(e=>{const r=this.props[e],o=this.propStartValues[e];this.props[e]=o,this.propStartValues[e]=r}),this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(e,r,o){return(this.timingFunction(e)||e)*(o-r)+r}update(e){const{duration:r,loop:o,easing:i,stopMethod:s}=this.settings;if(!r){this.emit("finished",{});return}if(this.delayFor>0){this.delayFor-=e;return}if(this.delayFor<=0&&this.progress===0&&this.emit("start",{}),this.progress+=e/r,this.progress>1&&(this.progress=o?0:1,s)){this.emit("finished",{});return}for(let a=0;a<this.propsList.length;a++){const l=this.propsList[a],d=this.props[l],u=this.propStartValues[l],f=d;if(l.indexOf("color")!==-1){if(u===f){this.node[l]=u;continue}if(i){const m=this.timingFunction(this.progress)||this.progress,y=dn(u,f,m);this.node[l]=y;continue}this.node[l]=dn(u,f,this.progress);continue}if(i){this.node[l]=this.applyEasing(this.progress,u,f);continue}this.node[l]=u+(f-u)*this.progress}this.progress===1&&this.emit("finished",{})}}class mi{constructor(t,e){h(this,"manager");h(this,"animation");h(this,"startedPromise",null);h(this,"startedResolve",null);h(this,"stoppedPromise",null);h(this,"stoppedResolve",null);h(this,"state");this.manager=t,this.animation=e,this.state="stopped"}start(){return this.makeStartedPromise(),this.animation.once("start",this.started.bind(this)),this.makeStoppedPromise(),this.animation.once("finished",this.finished.bind(this)),this.manager.activeAnimations.has(this.animation)||this.manager.registerAnimation(this.animation),this.state="running",this}stop(){return this.manager.unregisterAnimation(this.animation),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null),this.animation.reset(),this.state="stopped",this}pause(){return this.manager.unregisterAnimation(this.animation),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStarted(){return this.makeStartedPromise(),this.startedPromise}waitUntilStopped(){return this.makeStoppedPromise(),this.stoppedPromise}makeStartedPromise(){this.startedResolve===null&&(this.startedPromise=new Promise(t=>{this.startedResolve=t}))}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(t=>{this.stoppedResolve=t}))}started(){this.startedResolve,this.startedResolve(this),this.startedResolve=null}finished(){this.stoppedResolve;const{loop:t,stopMethod:e}=this.animation.settings;if(e==="reverse"){this.animation.reverse(),this.start();return}this.stoppedResolve(),this.stoppedResolve=null,!t&&this.manager.unregisterAnimation(this.animation)}}const Te=n=>{const t=n>>>24,e=n>>>16&255,r=n>>>8&255,o=n&255;return[t/255,e/255,r/255,o/255]};function xi(n){return(n&255)/255}function mr(n){const t=Math.floor(n[0]*255),e=Math.floor(n[1]*255),r=Math.floor(n[2]*255),o=Math.floor(n[3]*255);return"rgba(".concat(t,",").concat(e,",").concat(r,",").concat(o.toFixed(4),")")}function Vt(n,t,e,r,o){return o?(o.x1=n,o.y1=t,o.x2=e,o.y2=r,o):{x1:n,y1:t,x2:e,y2:r}}function yi(n,t,e){const r=Vt(Math.max(n.x1,t.x1),Math.max(n.y1,t.y1),Math.min(n.x2,t.x2),Math.min(n.y2,t.y2),e);return r.x1<r.x2&&r.y1<r.y2?r:Vt(0,0,0,0,r)}function xr(n,t){return n.x1<t.x2&&n.x2>t.x1&&n.y1<t.y2&&n.y2>t.y1}function vi(n,t){return t?(t.x=n.x1,t.y=n.y1,t.width=n.x2-n.x1,t.height=n.y2-n.y1,t):{x:n.x1,y:n.y1,width:n.x2-n.x1,height:n.y2-n.y1}}function Vr(n,t,e){const r=Math.max(n.x,t.x),o=Math.max(n.y,t.y),i=Math.min(n.x+n.width,t.x+t.width)-r,s=Math.min(n.y+n.height,t.y+t.height)-o;return i>0&&s>0?e?(e.x=r,e.y=o,e.width=i,e.height=s,e):{x:r,y:o,width:i,height:s}:e?(e.x=0,e.y=0,e.width=0,e.height=0,e):{x:0,y:0,width:0,height:0}}function io(n,t){return t?(t.x=n.x,t.y=n.y,t.width=n.width,t.height=n.height,t):{x:n.x,y:n.y,width:n.width,height:n.height}}function Ai(n,t){return n===t?!0:n===null||t===null?!1:n.x===t.x&&n.y===t.y&&n.width===t.width&&n.height===t.height}function Si(n){return n.x1<n.x2&&n.y1<n.y2}const K=0,q=3,le=6,j=1,Z=4,ue=7,xe=2,ye=5,ve=8;class Ae{constructor(t){h(this,"data");t?(this.data=new Float32Array(9),this.data[K]=t[0],this.data[q]=t[3],this.data[le]=t[6],this.data[j]=t[1],this.data[Z]=t[4],this.data[ue]=t[7],this.data[xe]=t[2],this.data[ye]=t[5],this.data[ve]=t[8]):this.data=new Float32Array(9)}static get temp(){return wi}static multiply(t,e,r){const o=t.data[K]*e.data[K]+t.data[q]*e.data[j]+t.data[le]*e.data[xe],i=t.data[K]*e.data[q]+t.data[q]*e.data[Z]+t.data[le]*e.data[ye],s=t.data[K]*e.data[le]+t.data[q]*e.data[ue]+t.data[le]*e.data[ve],a=t.data[j]*e.data[K]+t.data[Z]*e.data[j]+t.data[ue]*e.data[xe],l=t.data[j]*e.data[q]+t.data[Z]*e.data[Z]+t.data[ue]*e.data[ye],d=t.data[j]*e.data[le]+t.data[Z]*e.data[ue]+t.data[ue]*e.data[ve],u=t.data[xe]*e.data[K]+t.data[ye]*e.data[j]+t.data[ve]*e.data[xe],f=t.data[xe]*e.data[q]+t.data[ye]*e.data[Z]+t.data[ve]*e.data[ye],m=t.data[xe]*e.data[le]+t.data[ye]*e.data[ue]+t.data[ve]*e.data[ve];return r||(r=new Ae),r.data[K]=o,r.data[q]=i,r.data[le]=s,r.data[j]=a,r.data[Z]=l,r.data[ue]=d,r.data[xe]=u,r.data[ye]=f,r.data[ve]=m,r}static identity(t){return t||(t=new Ae),t.data[K]=1,t.data[q]=0,t.data[le]=0,t.data[j]=0,t.data[Z]=1,t.data[ue]=0,t.data[xe]=0,t.data[ye]=0,t.data[ve]=1,t}static translate(t,e,r){return r||(r=new Ae),r.data[K]=1,r.data[q]=0,r.data[le]=t,r.data[j]=0,r.data[Z]=1,r.data[ue]=e,r.data[xe]=0,r.data[ye]=0,r.data[ve]=1,r}static scale(t,e,r){return r||(r=new Ae),r.data[K]=t,r.data[q]=0,r.data[le]=0,r.data[j]=0,r.data[Z]=e,r.data[ue]=0,r.data[xe]=0,r.data[ye]=0,r.data[ve]=1,r}static rotate(t,e){const r=Math.cos(t),o=Math.sin(t);return e||(e=new Ae),e.data[K]=r,e.data[q]=-o,e.data[le]=0,e.data[j]=o,e.data[Z]=r,e.data[ue]=0,e.data[xe]=0,e.data[ye]=0,e.data[ve]=1,e}static copy(t,e,r){return e||(e=new Ae),e.data[0]=t.data[0],e.data[1]=t.data[1],e.data[2]=t.data[2],e.data[3]=t.data[3],e.data[4]=t.data[4],e.data[5]=t.data[5],e.data[6]=t.data[6],e.data[7]=t.data[7],e.data[8]=t.data[8],e}translate(t,e){return this.data[le]=this.data[K]*t+this.data[q]*e+this.data[le],this.data[ue]=this.data[j]*t+this.data[Z]*e+this.data[ue],this}scale(t,e){return this.data[K]=this.data[K]*t,this.data[q]=this.data[q]*e,this.data[j]=this.data[j]*t,this.data[Z]=this.data[Z]*e,this}rotate(t){if(t===0||!(t%Math.PI*2))return this;const e=Math.cos(t),r=Math.sin(t),o=this.data[K]*e+this.data[q]*r,i=this.data[q]*e-this.data[K]*r,s=this.data[j]*e+this.data[Z]*r,a=this.data[Z]*e-this.data[j]*r;return this.data[K]=o,this.data[q]=i,this.data[j]=s,this.data[Z]=a,this}multiply(t){return Ae.multiply(this,t,this)}get tx(){return this.data[le]}get ty(){return this.data[ue]}get ta(){return this.data[K]}get tb(){return this.data[q]}get tc(){return this.data[j]}get td(){return this.data[Z]}transformPoint(t,e){return[this.data[K]*t+this.data[q]*e+this.data[le],this.data[j]*t+this.data[Z]*e+this.data[j]]}}const wi=new Ae;var N;(function(n){n[n.Children=1]="Children",n[n.ScaleRotate=2]="ScaleRotate",n[n.Local=4]="Local",n[n.Global=8]="Global",n[n.Clipping=16]="Clipping",n[n.CalculatedZIndex=32]="CalculatedZIndex",n[n.ZIndexSortedChildren=64]="ZIndexSortedChildren",n[n.PremultipliedColors=128]="PremultipliedColors",n[n.WorldAlpha=256]="WorldAlpha",n[n.None=0]="None",n[n.All=511]="All"})(N||(N={}));class Kr extends We{constructor(e,r){super();h(this,"stage");h(this,"children",[]);h(this,"props");h(this,"updateType",N.All);h(this,"globalTransform");h(this,"scaleRotateTransform");h(this,"localTransform");h(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1});h(this,"isRenderable",!1);h(this,"worldAlpha",1);h(this,"premultipliedColorTl",0);h(this,"premultipliedColorTr",0);h(this,"premultipliedColorBl",0);h(this,"premultipliedColorBr",0);h(this,"calcZIndex",0);h(this,"isComplex",!1);h(this,"onTextureLoaded",(e,r)=>{this.stage.requestRender(),this.emit("loaded",{type:"texture",dimensions:r})});h(this,"onTextureFailed",(e,r)=>{this.emit("failed",{type:"texture",error:r})});this.stage=e,this.props={...r,parent:null},this.parent=r.parent,this.updateScaleRotateTransform()}loadTexture(e,r,o=null){this.props.texture&&this.unloadTexture();const{txManager:i}=this.stage,s=i.loadTexture(e,r,o);this.props.texture=s,this.props.textureOptions=o,this.checkIsRenderable(),queueMicrotask(()=>{s.state==="loaded"?this.onTextureLoaded(s,s.dimensions):s.state==="failed"&&this.onTextureFailed(s,s.error),s.on("loaded",this.onTextureLoaded),s.on("failed",this.onTextureFailed)})}unloadTexture(){this.props.texture&&(this.props.texture.off("loaded",this.onTextureLoaded),this.props.texture.off("failed",this.onTextureFailed)),this.props.texture=null,this.props.textureOptions=null,this.checkIsRenderable()}loadShader(e,r){const o=this.stage.renderer.getShaderManager(),{shader:i,props:s}=o.loadShader(e,r);this.props.shader=i,this.props.shaderProps=s,this.checkIsRenderable()}setUpdateType(e){this.updateType|=e;const r=this.props.parent;r&&!(r.updateType&N.Children)&&r.setUpdateType(N.Children)}sortChildren(){this.children.sort((e,r)=>e.calcZIndex-r.calcZIndex)}updateScaleRotateTransform(){this.scaleRotateTransform=Ae.rotate(this.props.rotation,this.scaleRotateTransform).scale(this.props.scaleX,this.props.scaleY)}updateLocalTransform(){this.scaleRotateTransform;const e=this.props.pivotX*this.props.width,r=this.props.pivotY*this.props.height,o=this.props.mountX*this.props.width,i=this.props.mountY*this.props.height;this.localTransform=Ae.translate(e-o+this.props.x,r-i+this.props.y,this.localTransform).multiply(this.scaleRotateTransform).translate(-e,-r),this.setUpdateType(N.Global)}update(e,r){this.updateType&N.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(N.Local)),this.updateType&N.Local&&(this.updateLocalTransform(),this.setUpdateType(N.Global));const o=this.props.parent;let i=N.None;this.updateType&N.Global&&(this.localTransform,this.globalTransform=Ae.copy((o==null?void 0:o.globalTransform)||this.localTransform,this.globalTransform),o&&this.globalTransform.multiply(this.localTransform),this.setUpdateType(N.Clipping|N.Children),i|=N.Global),this.updateType&N.Clipping&&(this.calculateClippingRect(r),this.checkIsRenderable(),this.setUpdateType(N.Children),i|=N.Clipping),this.updateType&N.WorldAlpha&&(o?this.worldAlpha=o.worldAlpha*this.props.alpha:this.worldAlpha=this.props.alpha,this.setUpdateType(N.Children|N.PremultipliedColors),i|=N.WorldAlpha),this.updateType&N.PremultipliedColors&&(this.premultipliedColorTl=mt(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=mt(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=mt(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=mt(this.props.colorBr,this.worldAlpha,!0)),this.checkIsRenderable(),this.setUpdateType(N.Children),i|=N.PremultipliedColors),o&&this.updateType&N.CalculatedZIndex&&(this.calculateZIndex(),o.setUpdateType(N.ZIndexSortedChildren)),this.updateType&N.Children&&this.children.length&&this.children.forEach(s=>{s.setUpdateType(i),s.updateType!==0&&s.update(e,this.clippingRect)}),this.updateType&N.ZIndexSortedChildren&&this.sortChildren(),this.updateType=0}checkIsRenderable(){return this.props.texture?this.isRenderable=!0:!this.props.width||!this.props.height?this.isRenderable=!1:this.props.shader?this.isRenderable=!0:this.props.clipping?this.isRenderable=!0:this.props.color!==0?this.isRenderable=!0:this.props.colorTop!==0?this.isRenderable=!0:this.props.colorBottom!==0?this.isRenderable=!0:this.props.colorLeft!==0?this.isRenderable=!0:this.props.colorRight!==0?this.isRenderable=!0:this.props.colorTl!==0?this.isRenderable=!0:this.props.colorTr!==0?this.isRenderable=!0:this.props.colorBl!==0?this.isRenderable=!0:this.props.colorBr!==0?this.isRenderable=!0:this.isRenderable=!1}calculateClippingRect(e){this.globalTransform;const{clippingRect:r,props:o,globalTransform:i}=this,{clipping:s}=o,a=i.tb!==0||i.tc!==0;s&&!a?(r.x=i.tx,r.y=i.ty,r.width=this.width*i.ta,r.height=this.height*i.td,r.valid=!0):r.valid=!1,e.valid&&r.valid?Vr(e,r,r):e.valid&&(io(e,r),r.valid=!0)}calculateZIndex(){var s,a;const e=this.props,r=e.zIndex||0,o=((s=e.parent)==null?void 0:s.zIndex)||0;let i=r;(a=e.parent)!=null&&a.zIndexLocked&&(i=r<o?r:o),this.calcZIndex=i}renderQuads(e){const{width:r,height:o,texture:i,textureOptions:s,shader:a,shaderProps:l}=this.props,{premultipliedColorTl:d,premultipliedColorTr:u,premultipliedColorBl:f,premultipliedColorBr:m}=this,{zIndex:y,worldAlpha:p,globalTransform:x,clippingRect:T}=this;e.addQuad({width:r,height:o,colorTl:d,colorTr:u,colorBl:f,colorBr:m,texture:i,textureOptions:s,zIndex:y,shader:a,shaderProps:l,alpha:p,clippingRect:T,tx:x.tx,ty:x.ty,ta:x.ta,tb:x.tb,tc:x.tc,td:x.td})}get id(){return this.props.id}get x(){return this.props.x}set x(e){this.props.x!==e&&(this.props.x=e,this.setUpdateType(N.Local))}get absX(){var e,r,o;return this.props.x+(((e=this.props.parent)==null?void 0:e.absX)||((o=(r=this.props.parent)==null?void 0:r.globalTransform)==null?void 0:o.tx)||0)}get absY(){var e,r;return this.props.y+((r=(e=this.props.parent)==null?void 0:e.absY)!=null?r:0)}get y(){return this.props.y}set y(e){this.props.y!==e&&(this.props.y=e,this.setUpdateType(N.Local))}get width(){return this.props.width}set width(e){this.props.width!==e&&(this.props.width=e,this.setUpdateType(N.Local))}get height(){return this.props.height}set height(e){this.props.height!==e&&(this.props.height=e,this.setUpdateType(N.Local))}get scale(){return this.scaleX}set scale(e){this.scaleX=e,this.scaleY=e}get scaleX(){return this.props.scaleX}set scaleX(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.setUpdateType(N.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.setUpdateType(N.ScaleRotate))}get mount(){return this.props.mount}set mount(e){(this.props.mountX!==e||this.props.mountY!==e)&&(this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.setUpdateType(N.Local))}get mountX(){return this.props.mountX}set mountX(e){this.props.mountX!==e&&(this.props.mountX=e,this.setUpdateType(N.Local))}get mountY(){return this.props.mountY}set mountY(e){this.props.mountY!==e&&(this.props.mountY=e,this.setUpdateType(N.Local))}get pivot(){return this.props.pivot}set pivot(e){(this.props.pivotX!==e||this.props.pivotY!==e)&&(this.props.pivotX=e,this.props.pivotY=e,this.props.pivot=e,this.setUpdateType(N.Local))}get pivotX(){return this.props.pivotX}set pivotX(e){this.props.pivotX!==e&&(this.props.pivotX=e,this.setUpdateType(N.Local))}get pivotY(){return this.props.pivotY}set pivotY(e){this.props.pivotY!==e&&(this.props.pivotY=e,this.setUpdateType(N.Local))}get rotation(){return this.props.rotation}set rotation(e){this.props.rotation!==e&&(this.props.rotation=e,this.setUpdateType(N.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(e){this.props.alpha=e,this.setUpdateType(N.PremultipliedColors|N.WorldAlpha)}get clipping(){return this.props.clipping}set clipping(e){this.props.clipping=e,this.setUpdateType(N.Clipping)}get color(){return this.props.color}set color(e){(this.props.colorTl!==e||this.props.colorTr!==e||this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorTl=e,this.colorTr=e,this.colorBl=e,this.colorBr=e),this.props.color=e,this.setUpdateType(N.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(e){(this.props.colorTl!==e||this.props.colorTr!==e)&&(this.colorTl=e,this.colorTr=e),this.props.colorTop=e,this.setUpdateType(N.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(e){(this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e,this.setUpdateType(N.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(e){(this.props.colorTl!==e||this.props.colorBl!==e)&&(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e,this.setUpdateType(N.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(e){(this.props.colorTr!==e||this.props.colorBr!==e)&&(this.colorTr=e,this.colorBr=e),this.props.colorRight=e,this.setUpdateType(N.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(e){this.props.colorTl=e,this.setUpdateType(N.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(e){this.props.colorTr=e,this.setUpdateType(N.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(e){this.props.colorBl=e,this.setUpdateType(N.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(e){this.props.colorBr=e,this.setUpdateType(N.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(e){this.props.zIndexLocked=e,this.setUpdateType(N.CalculatedZIndex|N.Children),this.children.forEach(r=>{r.setUpdateType(N.CalculatedZIndex)})}get zIndex(){return this.props.zIndex}set zIndex(e){this.props.zIndex=e,this.setUpdateType(N.CalculatedZIndex|N.Children),this.children.forEach(r=>{r.setUpdateType(N.CalculatedZIndex)})}get parent(){return this.props.parent}set parent(e){const r=this.props.parent;if(r!==e){if(this.props.parent=e,r){const o=r.children.indexOf(this);r.children.splice(o,1)}e&&(e.children.push(this),this.setUpdateType(N.All),e.setUpdateType(N.Children|N.ZIndexSortedChildren)),this.updateScaleRotateTransform()}}}let bi=1;function qr(){return bi++}class Rr extends We{constructor(e,r,o,i){var s;super();h(this,"rendererMain");h(this,"stage");h(this,"id");h(this,"coreNode");h(this,"_children",[]);h(this,"_src","");h(this,"_parent",null);h(this,"_texture",null);h(this,"_shader",null);h(this,"onTextureLoaded",(e,r)=>{this.emit("loaded",r)});h(this,"onTextureFailed",(e,r)=>{this.emit("failed",r)});this.rendererMain=r,this.stage=o,this.id=(s=i==null?void 0:i.id)!=null?s:qr(),this.coreNode=i||new Kr(this.stage,{id:this.id,x:e.x,y:e.y,width:e.width,height:e.height,alpha:e.alpha,clipping:e.clipping,color:e.color,colorTop:e.colorTop,colorBottom:e.colorBottom,colorLeft:e.colorLeft,colorRight:e.colorRight,colorTl:e.colorTl,colorTr:e.colorTr,colorBl:e.colorBl,colorBr:e.colorBr,zIndex:e.zIndex,zIndexLocked:e.zIndexLocked,scaleX:e.scaleX,scaleY:e.scaleY,mountX:e.mountX,mountY:e.mountY,mount:e.mount,pivot:e.pivot,pivotX:e.pivotX,pivotY:e.pivotY,rotation:e.rotation,parent:null,shader:null,shaderProps:null,texture:null,textureOptions:null}),this.coreNode.on("loaded",this.onTextureLoaded),this.coreNode.on("failed",this.onTextureFailed),this.parent=e.parent,this.shader=e.shader,this.texture=e.texture,this.src=e.src}get x(){return this.coreNode.x}set x(e){this.coreNode.x=e}get y(){return this.coreNode.y}set y(e){this.coreNode.y=e}get width(){return this.coreNode.width}set width(e){this.coreNode.width=e}get height(){return this.coreNode.height}set height(e){this.coreNode.height=e}get alpha(){return this.coreNode.alpha}set alpha(e){this.coreNode.alpha=e}get clipping(){return this.coreNode.clipping}set clipping(e){this.coreNode.clipping=e}get color(){return this.coreNode.color}set color(e){this.coreNode.color=e}get colorTop(){return this.coreNode.colorTop}set colorTop(e){this.coreNode.colorTop=e}get colorBottom(){return this.coreNode.colorBottom}set colorBottom(e){this.coreNode.colorBottom=e}get colorLeft(){return this.coreNode.colorLeft}set colorLeft(e){this.coreNode.colorLeft=e}get colorRight(){return this.coreNode.colorRight}set colorRight(e){this.coreNode.colorRight=e}get colorTl(){return this.coreNode.colorTl}set colorTl(e){this.coreNode.colorTl=e}get colorTr(){return this.coreNode.colorTr}set colorTr(e){this.coreNode.colorTr=e}get colorBl(){return this.coreNode.colorBl}set colorBl(e){this.coreNode.colorBl=e}get colorBr(){return this.coreNode.colorBr}set colorBr(e){this.coreNode.colorBr=e}get scale(){return this.scaleX!==this.scaleY?null:this.coreNode.scaleX}set scale(e){e!==null&&(this.coreNode.scaleX=e,this.coreNode.scaleY=e)}get scaleX(){return this.coreNode.scaleX}set scaleX(e){this.coreNode.scaleX=e}get scaleY(){return this.coreNode.scaleY}set scaleY(e){this.coreNode.scaleY=e}get mount(){return this.coreNode.mount}set mount(e){this.coreNode.mount=e}get mountX(){return this.coreNode.mountX}set mountX(e){this.coreNode.mountX=e}get mountY(){return this.coreNode.mountY}set mountY(e){this.coreNode.mountY=e}get pivot(){return this.coreNode.pivot}set pivot(e){this.coreNode.pivot=e}get pivotX(){return this.coreNode.pivotX}set pivotX(e){this.coreNode.pivotX=e}get pivotY(){return this.coreNode.pivotY}set pivotY(e){this.coreNode.pivotY=e}get rotation(){return this.coreNode.rotation}set rotation(e){this.coreNode.rotation=e}get parent(){return this._parent}set parent(e){var o;const r=this._parent;if(this._parent=e,this.coreNode.parent=(o=e==null?void 0:e.coreNode)!=null?o:null,r){const i=r.children.indexOf(this);r.children.splice(i,1)}e&&e.children.push(this)}get children(){return this._children}get zIndex(){return this.coreNode.zIndex}set zIndex(e){this.coreNode.zIndex=e}get zIndexLocked(){return this.coreNode.zIndexLocked}set zIndexLocked(e){this.coreNode.zIndexLocked=e}get src(){return this._src}set src(e){if(this._src!==e){if(this._src=e,!e){this.texture=null;return}this.texture=this.rendererMain.createTexture("ImageTexture",{src:e})}}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this.rendererMain.textureTracker.decrementTextureRefCount(this._texture),e&&this.rendererMain.textureTracker.incrementTextureRefCount(e),this._texture=e,e?this.coreNode.loadTexture(e.txType,e.props,e.options):this.coreNode.unloadTexture())}get shader(){return this._shader}set shader(e){this._shader!==e&&(this._shader=e,e&&this.coreNode.loadShader(e.shType,e.props))}destroy(){this.emit("beforeDestroy",{}),this.parent=null,this.texture=null,this.emit("afterDestroy",{}),this.removeAllListeners()}flush(){}animate(e,r){const o=new pi(this.coreNode,e,r);return new mi(this.stage.animationManager,o)}}const Ti=n=>{const t=()=>{if(n.updateAnimations(),!n.hasSceneUpdates()){setTimeout(t,16.666666666666668);return}n.drawFrame(),requestAnimationFrame(t)};requestAnimationFrame(t)},_i=()=>performance?performance.now():Date.now();class Ci{constructor(t){h(this,"textureSource");this.textureSource=t}}class Ei{constructor(t){h(this,"stage");this.stage=t}}class Ri{}class Ii{static makeCacheKey(t){return!1}static resolveDefaults(t){return{}}}function gn(n,t,e){const r=n.createShader(t);if(!r)throw new Error;if(n.shaderSource(r,e),n.compileShader(r),n.getShaderParameter(r,n.COMPILE_STATUS))return r;console.log(n.getShaderInfoLog(r)),n.deleteShader(r)}function Bi(n,t,e){const r=n.createProgram();if(!r)throw new Error;if(n.attachShader(r,t),n.attachShader(r,e),n.linkProgram(r),n.getProgramParameter(r,n.LINK_STATUS))return r;console.log(n.getProgramInfoLog(r)),n.deleteProgram(r)}function Ni(n){return self.WebGL2RenderingContext&&n instanceof self.WebGL2RenderingContext}class ut extends Ii{constructor(e){super();h(this,"boundBufferCollection",null);h(this,"buffersBound",!1);h(this,"program");h(this,"vao");h(this,"renderer");h(this,"glw");h(this,"attributeBuffers");h(this,"attributeLocations");h(this,"attributeNames");h(this,"uniformLocations");h(this,"uniformTypes");h(this,"supportsIndexedTextures");const r=this.renderer=e.renderer,o=this.glw=this.renderer.glw;this.supportsIndexedTextures=e.supportsIndexedTextures||!1;const i=o.isWebGl2(),s=i&&e.webgl2Extensions||!i&&e.webgl1Extensions||[],a=i?"2.0":"1.0";s.forEach(x=>{if(!o.getExtension(x))throw new Error('Shader "'.concat(this.constructor.name,'" requires extension "').concat(x,'" for WebGL ').concat(a," but wasn't found"))});const l=e.shaderSources||this.constructor.shaderSources;if(l)i&&(l!=null&&l.webGl2)&&(l.fragment=l.webGl2.fragment,l.vertex=l.webGl2.vertex,delete l.webGl2);else throw new Error('Shader "'.concat(this.constructor.name,'" is missing shaderSources.'));const d=r.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,u=l.vertex instanceof Function?l.vertex(d):l.vertex,f=l.fragment instanceof Function?l.fragment(d):l.fragment,m=gn(o,o.VERTEX_SHADER,u),y=gn(o,o.FRAGMENT_SHADER,f);if(!m||!y)throw new Error;const p=Bi(o,m,y);if(!p)throw new Error;if(this.program=p,i){const x=o.createVertexArray();if(!x)throw new Error;this.vao=x,o.bindVertexArray(this.vao)}this.attributeLocations={},this.attributeBuffers={},this.attributeNames=[],[...e.attributes].forEach(x=>{const T=o.getAttribLocation(this.program,x);if(T<0)throw new Error("".concat(this.constructor.name,': Vertex shader must have an attribute "').concat(x,'"!'));const w=o.createBuffer();if(!w)throw new Error("".concat(this.constructor.name,': Could not create buffer for attribute "').concat(x,'"'));this.attributeLocations[x]=T,this.attributeBuffers[x]=w,this.attributeNames.push(x)}),this.uniformLocations={},this.uniformTypes={},e.uniforms.forEach(x=>{const T=o.getUniformLocation(this.program,x.name);if(this.uniformTypes[x.name]=x.uniform,!T){console.warn('Shader "'.concat(this.constructor.name,'" could not get uniform location for "').concat(x.name,'"'));return}this.uniformLocations[x.name]=T})}bindBufferAttribute(e,r,o){const{glw:i}=this;i.enableVertexAttribArray(e),i.vertexAttribPointer(r,e,o.size,o.type,o.normalized,o.stride,o.offset)}disableAttribute(e){this.glw.disableVertexAttribArray(e)}disableAttributes(){for(const e in this.attributeLocations)this.disableAttribute(this.attributeLocations[e]);this.boundBufferCollection=null}canBatchShaderProps(e,r){return!1}bindRenderOp(e,r){this.bindBufferCollection(e.buffers),e.textures.length>0&&this.bindTextures(e.textures);const{glw:o}=e;if(this.setUniform("u_resolution",[o.canvas.width,o.canvas.height]),this.setUniform("u_pixelRatio",e.options.pixelRatio),r){if(Er(r,"$dimensions")){let i=r.$dimensions;i||(i=e.dimensions),this.setUniform("u_dimensions",[i.width,i.height])}if(Er(r,"$alpha")){let i=r.$alpha;i||(i=e.alpha),this.setUniform("u_alpha",i)}this.bindProps(r)}}setUniform(e,...r){this.glw.setUniform(this.uniformTypes[e],this.uniformLocations[e],...r)}bindBufferCollection(e){if(this.boundBufferCollection!==e){for(const r in this.attributeLocations){const o=e.getBuffer(r),i=e.getAttributeInfo(r);this.bindBufferAttribute(this.attributeLocations[r],o,i)}this.boundBufferCollection=e}}bindProps(e){}bindTextures(e){}attach(){this.glw.useProgram(this.program),this.glw.useProgram(this.program),this.glw.isWebGl2()&&this.vao&&this.glw.bindVertexArray(this.vao)}detach(){this.disableAttributes()}}h(ut,"shaderSources");class so extends Ri{constructor(e,r,o,i,s,a,l,d,u,f){super();h(this,"glw");h(this,"options");h(this,"buffers");h(this,"shader");h(this,"shaderProps");h(this,"alpha");h(this,"clippingRect");h(this,"dimensions");h(this,"bufferIdx");h(this,"zIndex");h(this,"length",0);h(this,"numQuads",0);h(this,"textures",[]);h(this,"maxTextures");this.glw=e,this.options=r,this.buffers=o,this.shader=i,this.shaderProps=s,this.alpha=a,this.clippingRect=l,this.dimensions=d,this.bufferIdx=u,this.zIndex=f,this.maxTextures=i.supportsIndexedTextures?e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS):1}addTexture(e){const{textures:r,maxTextures:o}=this,i=r.findIndex(a=>a===e);if(i!==-1)return i;const s=r.length;return s>=o?4294967295:(this.textures.push(e),s)}draw(){const{glw:e,shader:r,shaderProps:o,options:i}=this,{shManager:s}=i;s.useShader(r),r.bindRenderOp(this,o);const a=this.bufferIdx/24*6*2;if(this.clippingRect.valid){const{x:l,y:d,width:u,height:f}=this.clippingRect,m=i.pixelRatio,y=i.canvas.height,p=Math.round(l*m),x=Math.round(u*m),T=Math.round(f*m),w=Math.round(y-T-d*m);e.setScissorTest(!0),e.scissor(p,w,x,T)}else e.setScissorTest(!1);e.drawElements(e.TRIANGLES,6*this.numQuads,e.UNSIGNED_SHORT,a)}}function ki(n){const t={MAX_RENDERBUFFER_SIZE:0,MAX_TEXTURE_SIZE:0,MAX_VIEWPORT_DIMS:0,MAX_VERTEX_TEXTURE_IMAGE_UNITS:0,MAX_TEXTURE_IMAGE_UNITS:0,MAX_COMBINED_TEXTURE_IMAGE_UNITS:0,MAX_VERTEX_ATTRIBS:0,MAX_VARYING_VECTORS:0,MAX_VERTEX_UNIFORM_VECTORS:0,MAX_FRAGMENT_UNIFORM_VECTORS:0};return Object.keys(t).forEach(r=>{t[r]=n.getParameter(n[r])}),t}function Mi(n){const t={ANGLE_instanced_arrays:null,WEBGL_compressed_texture_s3tc:null,WEBGL_compressed_texture_astc:null,WEBGL_compressed_texture_etc:null,WEBGL_compressed_texture_etc1:null,WEBGL_compressed_texture_pvrtc:null,WEBKIT_WEBGL_compressed_texture_pvrtc:null,WEBGL_compressed_texture_s3tc_srgb:null,OES_vertex_array_object:null};return Object.keys(t).forEach(r=>{t[r]=n.getExtension(r)}),t}function Li(n,t){const e=~~(t/80),r=new Uint16Array(e*6);for(let i=0,s=0;i<e;i+=6,s+=4)r[i]=s,r[i+1]=s+1,r[i+2]=s+2,r[i+3]=s+2,r[i+4]=s+1,r[i+5]=s+3;const o=n.createBuffer();n.elementArrayBufferData(o,r,n.STATIC_DRAW)}const pn=new Uint8Array([0,0,0,0]);class ao extends Ci{constructor(e,r){super(r);h(this,"glw");h(this,"_nativeCtxTexture",null);h(this,"_state","freed");h(this,"_w",0);h(this,"_h",0);this.glw=e}get ctxTexture(){return this._state==="freed"&&this.load(),this._nativeCtxTexture,this._nativeCtxTexture}get w(){return this._w}get h(){return this._h}load(){this._state==="loading"||this._state==="loaded"||(this._state="loading",this.textureSource.setState("loading"),this.onLoadRequest().then(({width:e,height:r})=>{this._state="loaded",this._w=e,this._h=r,this.textureSource.setState("loaded",{width:e,height:r})}).catch(e=>{this._state="failed",this.textureSource.setState("failed",e),console.error(e)}))}async onLoadRequest(){var s,a;this._nativeCtxTexture=this.createNativeCtxTexture();const{glw:e}=this;e.activeTexture(0),e.bindTexture(this._nativeCtxTexture),e.texParameteri(e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,pn);const r=await((s=this.textureSource)==null?void 0:s.getTextureData());let o=0,i=0;if(this._nativeCtxTexture,e.activeTexture(0),r.data instanceof ImageBitmap||r.data instanceof ImageData){const l=r.data;o=l.width,i=l.height,e.bindTexture(this._nativeCtxTexture),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!r.premultiplyAlpha),e.texImage2D(0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,l),(e.isWebGl2()||fn(o)&&fn(i))&&e.generateMipmap()}else if(r.data===null)o=0,i=0,e.bindTexture(this._nativeCtxTexture),e.texImage2D(0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,pn);else if("mipmaps"in r.data&&r.data.mipmaps){const{mipmaps:l,width:d=0,height:u=0,type:f,glInternalFormat:m}=r.data,y=f==="ktx"?new DataView((a=l[0])!=null?a:new ArrayBuffer(0)):l[0];e.bindTexture(this._nativeCtxTexture),e.compressedTexImage2D(0,m,d,u,0,y),e.texParameteri(e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_MIN_FILTER,e.LINEAR)}else console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",r);return{width:o,height:i}}free(){if(this._state==="freed"||(this._state="freed",this._w=0,this._h=0,!this._nativeCtxTexture))return;const{glw:e}=this;e.deleteTexture(this._nativeCtxTexture),this._nativeCtxTexture=null}createNativeCtxTexture(){const{glw:e}=this,r=e.createTexture();if(!r)throw new Error("Could not create WebGL Texture");return r}}class ar extends We{constructor(e){super();h(this,"txManager");h(this,"dimensions",null);h(this,"error",null);h(this,"state","loading");this.txManager=e}setState(e,...r){if(this.state!==e){if(this.state=e,e==="loaded"){const o=r;this.dimensions=o[0]}else if(e==="failed"){const o=r;this.error=o[0]}this.emit(e,...r)}}static makeCacheKey(e){return!1}static resolveDefaults(e){return{}}}const Tt=class Tt extends ar{constructor(e,r){super(e);h(this,"props");this.props=Tt.resolveDefaults(r||{})}get color(){return this.props.color}set color(e){this.props.color=e}async getTextureData(){const e=new Uint32Array([this.color]),r=new Uint8ClampedArray(e.buffer);return{data:new ImageData(r,1,1),premultiplyAlpha:!0}}static makeCacheKey(e){const r=Tt.resolveDefaults(e);return"ColorTexture,".concat(r.color)}static resolveDefaults(e){return{color:e.color||4294967295}}};h(Tt,"z$__type__Props");let Kt=Tt;const rr=class rr extends ar{constructor(e,r){super(e);h(this,"props");h(this,"parentTexture");h(this,"onParentTxLoaded",()=>{this.setState("loaded",{width:this.props.width,height:this.props.height})});h(this,"onParentTxFailed",(e,r)=>{this.setState("failed",r)});this.parentTexture=this.txManager.loadTexture(r.texture.txType,r.texture.props,r.texture.options),this.props=rr.resolveDefaults(r||{}),queueMicrotask(()=>{const o=this.parentTexture;o.state==="loaded"?this.onParentTxLoaded(o,o.dimensions):o.state==="failed"&&this.onParentTxFailed(o,o.error),o.on("loaded",this.onParentTxLoaded),o.on("failed",this.onParentTxFailed)})}async getTextureData(){return{data:this.props}}static makeCacheKey(e){return!1}static resolveDefaults(e){return{texture:e.texture,x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0}}};h(rr,"z$__type__Props");let Et=rr;class Fi extends ao{constructor(t,e){super(t,e)}async onLoadRequest(){var e,r;const t=await this.textureSource.getTextureData();return{width:((e=t.data)==null?void 0:e.width)||0,height:((r=t.data)==null?void 0:r.height)||0}}}class lo extends ut{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(t){const{glw:e}=this;e.activeTexture(0),e.bindTexture(t[0].ctxTexture)}}h(lo,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    "});class co extends ut{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});h(this,"supportsIndexedTextures",!0)}bindTextures(e){const{renderer:r,glw:o}=this;if(e.length>r.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error("DefaultShaderBatched: Cannot bind more than ".concat(r.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS," textures"));e.forEach((s,a)=>{o.activeTexture(a),o.bindTexture(s.ctxTexture)});const i=Array.from(Array(e.length).keys());this.setUniform("u_textures[0]",i)}}h(co,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:e=>"\n      #define txUnits ".concat(e,"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[").concat(e,"], int idx, vec2 uv) {\n        ").concat(Array.from(Array(e).keys()).map(r=>"\n          ".concat(r!==0?"else ":"","if (idx == ").concat(r,") {\n            return texture2D(textures[").concat(r,"], uv);\n          }\n        ")).join(""),"\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    ")});class oe{constructor(t){h(this,"priority",1);h(this,"name","");h(this,"ref");h(this,"target");h(this,"passParameters","");h(this,"declaredUniforms","");h(this,"uniformInfo",{});const{ref:e,target:r,props:o={}}=t;this.ref=e,this.target=r;const i={},s=[];let a="";const l=this.constructor.uniforms||{};for(const d in l){const u=l[d],f=u.type,m="".concat(e,"_").concat(d);let y="";u.size&&(y="[".concat(u.size(o),"]")),s.push(m),a+="uniform ".concat(f," ").concat(m).concat(y,";"),i[d]={name:m,uniform:l[d].method}}this.passParameters=s.join(","),this.declaredUniforms=a,this.uniformInfo=i}static getEffectKey(t){return""}static getMethodParameters(t,e){const r=[];for(const o in t){const i=t[o];let s="";i.size&&(s="[".concat(i.size(e),"]")),r.push("".concat(i.type," ").concat(o).concat(s))}return r.join(",")}static resolveDefaults(t){return{}}static makeEffectKey(t){return!1}}h(oe,"uniforms",{}),h(oe,"methods"),h(oe,"onShaderMask"),h(oe,"onColorize"),h(oe,"onEffectMask");const yr=new Map,Pi=(n,t)=>{const e=JSON.stringify(n);if(yr.has(e))return yr.get(e);const r=(n!=null?n:[]).map(o=>({type:o.type,props:t[o.type].resolveDefaults(o.props||{})}));return yr.set(e,r),r},ke=class ke extends ut{constructor(e,r,o){const i=ke.createShader(r,o);super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...i.uniforms],shaderSources:{vertex:i.vertex,fragment:i.fragment}});h(this,"effects",[]);this.effects=i.effects,this.calculateProps=oo(this.calculateProps.bind(this))}bindTextures(e){const{glw:r}=this;r.activeTexture(0),r.bindTexture(e[0].ctxTexture)}calculateProps(e){const r=this.renderer.shManager.getRegisteredEffects(),o=[];return e==null||e.forEach((i,s)=>{var f;const a=this.effects[s],l=r[a.name],d=(f=i.props)!=null?f:{},u=a.uniformInfo;Object.keys(d).forEach(m=>{const y=l.uniforms[m],p=u[m];let x=y.validator?y.validator(d[m],d):d[m];Array.isArray(x)&&(x=new Float32Array(x)),o.push({name:p.name,value:x})})}),o}bindProps(e){this.calculateProps(e.effects).forEach(o=>{this.setUniform(o.name,o.value)})}static createShader(e,r){const o={},i={};let s="";const a=[],l=[],d=e.effects.map(p=>{const x=r[p.type],T=x.getEffectKey(p.props||{});o[T]=o[T]?++o[T]:1;const w=o[T];w===1&&l.push({key:T,type:p.type,props:p.props});const S=new x({ref:"".concat(T).concat(w===1?"":w),target:T,props:p.props});return s+=S.declaredUniforms,a.push(...Object.values(S.uniformInfo)),S});let u="";l==null||l.forEach(p=>{var b;const x=r[p.type],T=x.resolveDefaults((b=p.props)!=null?b:{}),w=[];for(const _ in x.methods){let E=_;const R=x.methods[_];i[_]&&i[_]!==R&&(E=ke.resolveMethodDuplicate(_,R,i)),i[E]=R.replace("function",E),w.push({m:_,cm:E})}let S=x.onShaderMask instanceof Function?x.onShaderMask(T):x.onShaderMask,A=x.onColorize instanceof Function?x.onColorize(T):x.onColorize,v=x.onEffectMask instanceof Function?x.onEffectMask(T):x.onEffectMask;w.forEach(_=>{const{m:E,cm:R}=_,B=new RegExp("\\$".concat(E),"g");S&&(S=S.replace(B,R)),A&&(A=A.replace(B,R)),v&&(v=v.replace(B,R))});const C=x.getMethodParameters(x.uniforms,T),I=C.length>0?", ".concat(C):"";S&&(u+="\n        float fx_".concat(p.key,"_onShaderMask(float shaderMask ").concat(I,") {\n          ").concat(S,"\n        }\n        ")),A&&(u+="\n          vec4 fx_".concat(p.key,"_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(I,") {\n            ").concat(A,"\n          }\n        ")),v&&(u+="\n          vec4 fx_".concat(p.key,"_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(I,") {\n            ").concat(v,"\n          }\n        "))});let f="";for(const p in i)f+=i[p];let m="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",y="\n\n    ";for(let p=0;p<d.length;p++){const x=d[p],T=x.passParameters.length>0?", ".concat(x.passParameters):"",w=r[x.name];w.onShaderMask&&(y+="\n        shaderMask = fx_".concat(x.target,"_onShaderMask(shaderMask ").concat(T,");\n        ")),w.onColorize&&(y+="\n        maskColor = fx_".concat(x.target,"_onColorize(shaderMask, maskColor, shaderColor").concat(T,");\n        ")),w.onEffectMask&&(m="fx_".concat(x.target,"_onEffectMask(shaderMask, maskColor, shaderColor").concat(T,")"));const S=d[p+1];(S===void 0||r[S.name].onEffectMask)&&(y+="\n          shaderColor = ".concat(m,";\n        "))}return{effects:d,uniforms:a,fragment:ke.fragment(s,f,u,y),vertex:ke.vertex()}}static resolveMethodDuplicate(e,r,o,i=0){const s=e+(i>0?i:"");return o[s]&&o[s]!==r?this.resolveMethodDuplicate(e,r,o,++i):s}static resolveDefaults(e,r){return{effects:Pi(e.effects,r),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(e,r){var i;let o="";return(i=e.effects)==null||i.forEach(s=>{const l=r[s.type].getEffectKey(s.props||{});o+=",".concat(l)}),"DynamicShader".concat(o)}};h(ke,"z$__type__Props"),h(ke,"vertex",()=>"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  "),h(ke,"fragment",(e,r,o,i)=>"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ".concat(e,"\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n\n    ").concat(r,"\n\n    ").concat(o,"\n\n    void main() {\n      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ").concat(i,"\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  "));let st=ke;class Ir extends ut{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(t){return{radius:t.radius||10,$dimensions:{width:0,height:0}}}bindTextures(t){const{glw:e}=this;e.activeTexture(0),e.bindTexture(t[0].ctxTexture)}bindProps(t){this.setUniform("u_radius",t.radius)}canBatchShaderProps(t,e){return t.radius===e.radius&&t.$dimensions.width===e.$dimensions.width&&t.$dimensions.height===e.$dimensions.height}}h(Ir,"z$__type__Props"),h(Ir,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    "});const Di=new Float32Array([1,0,0,0,1,0,0,0,1]),nr=class nr extends ut{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(t){const{glw:e}=this;e.activeTexture(0),e.bindTexture(t[0].ctxTexture)}bindProps(t){const e=nr.resolveDefaults(t);for(const r in e)if(r==="transform")this.setUniform("u_transform",!1,e[r]);else if(r==="scrollY")this.setUniform("u_scrollY",e[r]);else if(r==="color"){const o=Te(e.color);this.setUniform("u_color",o)}else r==="size"?this.setUniform("u_size",e[r]):r==="distanceRange"?this.setUniform("u_distanceRange",e[r]):r==="debug"&&this.setUniform("u_debug",e[r]?1:0)}static resolveDefaults(t={}){var e,r,o,i,s,a;return{transform:(e=t.transform)!=null?e:Di,scrollY:(r=t.scrollY)!=null?r:0,color:(o=t.color)!=null?o:4294967295,size:(i=t.size)!=null?i:16,distanceRange:(s=t.distanceRange)!=null?s:1,debug:(a=t.debug)!=null?a:!1}}};h(nr,"shaderSources",{vertex:"\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n        gl_Position = vec4((transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1), 0, 1);\n        v_texcoord = a_textureCoordinate;\n      }\n    ",fragment:"\n      precision highp float;\n\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    "});let Br=nr;class Je extends oe{constructor(){super(...arguments);h(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(e){var r;return{radius:(r=e.radius)!=null?r:10}}}h(Je,"z$__type__Props"),h(Je,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let r=e;return Array.isArray(r)?r.length===2?r=[r[0],r[1],r[0],r[1]]:r.length===3?r=[r[0],r[1],r[2],r[0]]:r.length!==4&&(r=[r[0],r[0],r[0],r[0]]):typeof r=="number"&&(r=[r,r,r,r]),r}}}),h(Je,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),h(Je,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);\n  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);\n  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  "),h(Je,"onEffectMask","\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  ");class xt extends oe{constructor(){super(...arguments);h(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(e){var r,o;return{width:(r=e.width)!=null?r:10,color:(o=e.color)!=null?o:4294967295}}}h(xt,"z$__type__Props"),h(xt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Te(e),method:"uniform4fv",type:"vec4"}}),h(xt,"onEffectMask","\n  float mask = clamp(shaderMask + width, 0.0, 1.0) - clamp(shaderMask, 0.0, 1.0);\n  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);\n  "),h(xt,"onColorize","\n    return color;\n  ");class et extends oe{constructor(){super(...arguments);h(this,"name","linearGradient")}static getEffectKey(e){return"linearGradient".concat(e.colors.length)}static resolveDefaults(e){var i,s;const r=(i=e.colors)!=null?i:[4278190080,4294967295];let o=e.stops;if(!o){o=[];const a=r.length-1;for(let l=0;l<r.length;l++)o.push(l*(1/a))}return{colors:r,stops:o,angle:(s=e.angle)!=null?s:0}}}h(et,"z$__type__Props"),h(et,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:e=>e.map(o=>Te(o)).reduce((o,i)=>o.concat(i),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],validator:(e,r)=>{var a;const o=(a=r.colors)!=null?a:[];let i=e;const s=e;if(i.length===0||i&&i.length!==o.length){for(let l=0;l<o.length;l++)i[l]?(s[l]=i[l],i[l-1]===void 0&&s[l-2]!==void 0&&(s[l-1]=s[l-2]+(i[l]-s[l-2])/2)):s[l]=l*(1/(o.length-1));i=s}return s},size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),h(et,"methods",{fromLinear:"\n      vec4 function(vec4 linearRGB) {\n        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n        vec4 lower = linearRGB * vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",toLinear:"\n      vec4 function(vec4 sRGB) {\n        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n        vec4 lower = sRGB/vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",calcPoint:"\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    "}),h(et,"ColorLoop",e=>{let r="";for(let o=2;o<e;o++)r+="colorOut = mix(colorOut, colors[".concat(o,"], clamp((dist - stops[").concat(o-1,"]) / (stops[").concat(o,"] - stops[").concat(o-1,"]), 0.0, 1.0));");return r}),h(et,"onColorize",e=>{const r=e.colors.length||1;return"\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));\n      for(int i = 1; i < ".concat(r,"-1; i++) {\n        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);\n        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));\n      }\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")});class Nr extends oe{constructor(){super(...arguments);h(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(e){var r;return{amount:(r=e.amount)!=null?r:1}}}h(Nr,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),h(Nr,"onColorize","\n    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;\n    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);\n  ");class tt extends oe{constructor(){super(...arguments);h(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(e){var r,o;return{width:(r=e.width)!=null?r:10,color:(o=e.color)!=null?o:4294967295}}}h(tt,"z$__type__Props"),h(tt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Te(e),method:"uniform4fv",type:"vec4"}}),h(tt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),h(tt,"onEffectMask","\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),h(tt,"onColorize","\n    return color;\n  ");class rt extends oe{constructor(){super(...arguments);h(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(e){var r,o;return{width:(r=e.width)!=null?r:10,color:(o=e.color)!=null?o:4294967295}}}h(rt,"z$__type__Props"),h(rt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Te(e),method:"uniform4fv",type:"vec4"}}),h(rt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),h(rt,"onEffectMask","\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),h(rt,"onColorize","\n    return color;\n  ");class nt extends oe{constructor(){super(...arguments);h(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(e){var r,o;return{width:(r=e.width)!=null?r:10,color:(o=e.color)!=null?o:4294967295}}}h(nt,"z$__type__Props"),h(nt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Te(e),method:"uniform4fv",type:"vec4"}}),h(nt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),h(nt,"onEffectMask","\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),h(nt,"onColorize","\n    return color;\n  ");class ot extends oe{constructor(){super(...arguments);h(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(e){var r,o;return{width:(r=e.width)!=null?r:10,color:(o=e.color)!=null?o:4294967295}}}h(ot,"z$__type__Props"),h(ot,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Te(e),method:"uniform4fv",type:"vec4"}}),h(ot,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),h(ot,"onEffectMask","\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),h(ot,"onColorize","\n    return color;\n  ");class yt extends oe{constructor(){super(...arguments);h(this,"name","glitch")}static getEffectKey(e){return"glitch"}static resolveDefaults(e){var r,o,i,s,a;return{amplitude:(r=e.amplitude)!=null?r:.2,narrowness:(o=e.narrowness)!=null?o:4,blockiness:(i=e.blockiness)!=null?i:2,minimizer:(s=e.minimizer)!=null?s:8,time:(a=e.time)!=null?a:Date.now()}}}h(yt,"z$__type__Props"),h(yt,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",validator:e=>(Date.now()-e)%1e3,type:"float"}}),h(yt,"methods",{rand:"\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    ",noise:"\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    ",fbm:"\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    "}),h(yt,"onColorize","\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  ");class Wt extends oe{constructor(){super(...arguments);h(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(e){var r;return{fade:(r=e.fade)!=null?r:10}}}h(Wt,"z$__type__Props"),h(Wt,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let r=e;return Array.isArray(r)?r.length===2?r=[r[0],r[1],r[0],r[1]]:r.length===3?r=[r[0],r[1],r[2],r[0]]:r.length!==4&&(r=[r[0],r[0],r[0],r[0]]):typeof r=="number"&&(r=[r,r,r,r]),r}}}),h(Wt,"onColorize","\n  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  ");class Xt extends oe{constructor(){super(...arguments);h(this,"name","radialGradient")}static getEffectKey(e){return"radialGradient".concat(e.colors.length)}static resolveDefaults(e){var i,s,a,l,d;const r=(i=e.colors)!=null?i:[4278190080,4294967295];let o=e.stops;if(!o){o=[];const u=r.length-1;for(let f=0;f<r.length;f++)o.push(f*(1/u))}return{colors:r,stops:o,width:(s=e.width)!=null?s:0,height:(l=(a=e.height)!=null?a:e.width)!=null?l:0,pivot:(d=e.pivot)!=null?d:[.5,.5]}}}h(Xt,"z$__type__Props"),h(Xt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:e=>e.map(o=>Te(o)).reduce((o,i)=>o.concat(i),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],validator:(e,r)=>{var a;const o=(a=r.colors)!=null?a:[];let i=e;const s=e;if(i.length===0||i&&i.length!==o.length){for(let l=0;l<o.length;l++)i[l]?(s[l]=i[l],i[l-1]===void 0&&s[l-2]!==void 0&&(s[l-1]=s[l-2]+(i[l]-s[l-2])/2)):s[l]=l*(1/(o.length-1));i=s}return s},size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),h(Xt,"onColorize",e=>{const r=e.colors.length||1;return"\n      vec2 point = v_textureCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = mix(colors[0], colors[1], stopCalc);\n      for(int i = 1; i < ".concat(r,"-1; i++) {\n        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);\n        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));\n      }\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")});class it extends oe{constructor(){super(...arguments);h(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(e){var r,o,i,s,a,l,d;return{width:(r=e.width)!=null?r:10,progress:(o=e.progress)!=null?o:.5,offset:(i=e.offset)!=null?i:0,range:(s=e.range)!=null?s:Math.PI*2,rounded:(a=e.rounded)!=null?a:!1,radius:(l=e.radius)!=null?l:1,color:(d=e.color)!=null?d:4294967295}}}h(it,"z$__type__Props"),h(it,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:e=>e?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Te(e),method:"uniform4fv",type:"vec4"}}),h(it,"methods",{rotateUV:"\n    vec2 function(vec2 uv, float d) {\n      float s = sin(d);\n      float c = cos(d);\n      mat2 rotMatrix = mat2(c, -s, s, c);\n      return uv * rotMatrix;\n    }\n    ",drawDot:"\n    float function(vec2 uv, vec2 p, float r) {\n      uv += p;\n      float circle = length(uv) - r;\n      return clamp(-circle, 0.0, 1.0);\n    }\n    "}),h(it,"onEffectMask","\n    float outerRadius = radius * u_dimensions.y * 0.5;\n\n    float endAngle = range * progress - 0.0005;\n\n    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;\n\n    uv = $rotateUV(uv, -(offset));\n    float linewidth = width * u_pixelRatio;\n    float circle = length(uv) - (outerRadius - linewidth) ;\n    circle = abs(circle) - linewidth;\n    circle = clamp(-circle, 0.0, 1.0);\n\n    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);\n    float p = endAngle / (PI * 2.);\n\n    circle *= step(fract(angle), fract(p));\n\n    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));\n    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));\n\n    return mix(shaderColor, maskColor, circle);\n  "),h(it,"onColorize","\n    return color;\n  ");class Ui{constructor(){h(this,"shCache",new Map);h(this,"shConstructors",{});h(this,"attachedShader",null);h(this,"effectConstructors",{});h(this,"renderer");this.registerShaderType("DefaultShader",lo),this.registerShaderType("DefaultShaderBatched",co),this.registerShaderType("RoundedRectangle",Ir),this.registerShaderType("DynamicShader",st),this.registerShaderType("SdfShader",Br),this.registerEffectType("border",xt),this.registerEffectType("borderBottom",nt),this.registerEffectType("borderLeft",ot),this.registerEffectType("borderRight",tt),this.registerEffectType("borderTop",rt),this.registerEffectType("fadeOut",Wt),this.registerEffectType("linearGradient",et),this.registerEffectType("radialGradient",Xt),this.registerEffectType("grayscale",Nr),this.registerEffectType("glitch",yt),this.registerEffectType("radius",Je),this.registerEffectType("radialProgress",it)}registerShaderType(t,e){this.shConstructors[t]=e}registerEffectType(t,e){this.effectConstructors[t]=e}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(t,e){if(!this.renderer)throw new Error("Renderer is not been defined");const r=this.shConstructors[t];if(!r)throw new Error('Shader type "'.concat(t,'" is not registered'));if(t==="DynamicShader")return this.loadDynamicShader(e);const o=r.resolveDefaults(e),i=r.makeCacheKey(o)||r.name;if(i&&this.shCache.has(i))return{shader:this.shCache.get(i),props:o};const s=new r(this.renderer,e);return i&&this.shCache.set(i,s),{shader:s,props:o}}loadDynamicShader(t){if(!this.renderer)throw new Error("Renderer is not been defined");const e=st.resolveDefaults(t,this.effectConstructors),r=st.makeCacheKey(e,this.effectConstructors);if(r&&this.shCache.has(r))return{shader:this.shCache.get(r),props:e};const o=new st(this.renderer,t,this.effectConstructors);return r&&this.shCache.set(r,o),{shader:o,props:e}}useShader(t){this.attachedShader!==t&&(this.attachedShader&&this.attachedShader.detach(),t.attach(),this.attachedShader=t)}}class ho{constructor(t){h(this,"config");this.config=t}getBuffer(t){var e;return(e=this.config.find(r=>r.attributes[t]))==null?void 0:e.buffer}getAttributeInfo(t){var e;return(e=this.config.find(r=>r.attributes[t]))==null?void 0:e.attributes[t]}}class zi{constructor(){h(this,"data",{})}reset(){this.data={}}increment(t){this.data[t]||(this.data[t]=0),this.data[t]++}getData(){return{...this.data}}}class Oi{constructor(t){h(this,"gl");h(this,"activeTextureUnit",0);h(this,"texture2dUnits");h(this,"texture2dParams",new WeakMap);h(this,"scissorEnabled");h(this,"scissorX");h(this,"scissorY");h(this,"scissorWidth");h(this,"scissorHeight");h(this,"blendEnabled");h(this,"blendSrcRgb");h(this,"blendDstRgb");h(this,"blendSrcAlpha");h(this,"blendDstAlpha");h(this,"boundArrayBuffer");h(this,"boundElementArrayBuffer");h(this,"curProgram");h(this,"programUniforms",new WeakMap);h(this,"canvas");h(this,"MAX_RENDERBUFFER_SIZE");h(this,"MAX_TEXTURE_SIZE");h(this,"MAX_VIEWPORT_DIMS");h(this,"MAX_VERTEX_TEXTURE_IMAGE_UNITS");h(this,"MAX_TEXTURE_IMAGE_UNITS");h(this,"MAX_COMBINED_TEXTURE_IMAGE_UNITS");h(this,"MAX_VERTEX_ATTRIBS");h(this,"MAX_VARYING_VECTORS");h(this,"MAX_VERTEX_UNIFORM_VECTORS");h(this,"MAX_FRAGMENT_UNIFORM_VECTORS");h(this,"TEXTURE_MAG_FILTER");h(this,"TEXTURE_MIN_FILTER");h(this,"TEXTURE_WRAP_S");h(this,"TEXTURE_WRAP_T");h(this,"LINEAR");h(this,"CLAMP_TO_EDGE");h(this,"RGBA");h(this,"UNSIGNED_BYTE");h(this,"UNPACK_PREMULTIPLY_ALPHA_WEBGL");h(this,"FLOAT");h(this,"TRIANGLES");h(this,"UNSIGNED_SHORT");h(this,"ONE");h(this,"ONE_MINUS_SRC_ALPHA");h(this,"VERTEX_SHADER");h(this,"FRAGMENT_SHADER");h(this,"STATIC_DRAW");h(this,"COMPILE_STATUS");h(this,"LINK_STATUS");h(this,"DYNAMIC_DRAW");this.gl=t,this.activeTextureUnit=t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0;const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.texture2dUnits=new Array(e).fill(void 0).map((o,i)=>(this.activeTexture(i),t.getParameter(t.TEXTURE_BINDING_2D))),this.activeTexture(this.activeTextureUnit),this.scissorEnabled=t.isEnabled(t.SCISSOR_TEST);const r=t.getParameter(t.SCISSOR_BOX);this.scissorX=r[0],this.scissorY=r[1],this.scissorWidth=r[2],this.scissorHeight=r[3],this.blendEnabled=t.isEnabled(t.BLEND),this.blendSrcRgb=t.getParameter(t.BLEND_SRC_RGB),this.blendDstRgb=t.getParameter(t.BLEND_DST_RGB),this.blendSrcAlpha=t.getParameter(t.BLEND_SRC_ALPHA),this.blendDstAlpha=t.getParameter(t.BLEND_DST_ALPHA),this.boundArrayBuffer=t.getParameter(t.ARRAY_BUFFER_BINDING),this.boundElementArrayBuffer=t.getParameter(t.ELEMENT_ARRAY_BUFFER_BINDING),this.curProgram=t.getParameter(t.CURRENT_PROGRAM),this.canvas=t.canvas,this.MAX_RENDERBUFFER_SIZE=t.MAX_RENDERBUFFER_SIZE,this.MAX_TEXTURE_SIZE=t.MAX_TEXTURE_SIZE,this.MAX_VIEWPORT_DIMS=t.MAX_VIEWPORT_DIMS,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=t.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.MAX_TEXTURE_IMAGE_UNITS=t.MAX_TEXTURE_IMAGE_UNITS,this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS,this.MAX_VERTEX_ATTRIBS=t.MAX_VERTEX_ATTRIBS,this.MAX_VARYING_VECTORS=t.MAX_VARYING_VECTORS,this.MAX_VERTEX_UNIFORM_VECTORS=t.MAX_VERTEX_UNIFORM_VECTORS,this.MAX_FRAGMENT_UNIFORM_VECTORS=t.MAX_FRAGMENT_UNIFORM_VECTORS,this.TEXTURE_MAG_FILTER=t.TEXTURE_MAG_FILTER,this.TEXTURE_MIN_FILTER=t.TEXTURE_MIN_FILTER,this.TEXTURE_WRAP_S=t.TEXTURE_WRAP_S,this.TEXTURE_WRAP_T=t.TEXTURE_WRAP_T,this.LINEAR=t.LINEAR,this.CLAMP_TO_EDGE=t.CLAMP_TO_EDGE,this.RGBA=t.RGBA,this.UNSIGNED_BYTE=t.UNSIGNED_BYTE,this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.FLOAT=t.FLOAT,this.TRIANGLES=t.TRIANGLES,this.UNSIGNED_SHORT=t.UNSIGNED_SHORT,this.ONE=t.ONE,this.ONE_MINUS_SRC_ALPHA=t.ONE_MINUS_SRC_ALPHA,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=t.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.TRIANGLES=t.TRIANGLES,this.UNSIGNED_SHORT=t.UNSIGNED_SHORT,this.VERTEX_SHADER=t.VERTEX_SHADER,this.FRAGMENT_SHADER=t.FRAGMENT_SHADER,this.STATIC_DRAW=t.STATIC_DRAW,this.COMPILE_STATUS=t.COMPILE_STATUS,this.LINK_STATUS=t.LINK_STATUS,this.DYNAMIC_DRAW=t.DYNAMIC_DRAW}isWebGl2(){return Ni(this.gl)}activeTexture(t){const{gl:e}=this;this.activeTextureUnit!==t&&(e.activeTexture(t+e.TEXTURE0),this.activeTextureUnit=t)}bindTexture(t){const{gl:e,activeTextureUnit:r,texture2dUnits:o}=this;o[r]!==t&&(o[r]=t,e.bindTexture(this.gl.TEXTURE_2D,t))}_getActiveTexture(){const{activeTextureUnit:t,texture2dUnits:e}=this;return e[t]}texParameteri(t,e){const{gl:r,texture2dParams:o}=this,i=this._getActiveTexture();if(!i)throw new Error("No active texture");let s=o.get(i);s||(s={},o.set(i,s)),s[t]!==e&&(s[t]=e,r.texParameteri(r.TEXTURE_2D,t,e))}texImage2D(t,e,r,o,i,s,a,l){const{gl:d}=this;s?d.texImage2D(d.TEXTURE_2D,t,e,r,o,i,s,a,l):d.texImage2D(d.TEXTURE_2D,t,e,r,o,i)}compressedTexImage2D(t,e,r,o,i,s){const{gl:a}=this;a.compressedTexImage2D(a.TEXTURE_2D,t,e,r,o,i,s)}pixelStorei(t,e){const{gl:r}=this;r.pixelStorei(t,e)}generateMipmap(){const{gl:t}=this;t.generateMipmap(t.TEXTURE_2D)}createTexture(){const{gl:t}=this;return t.createTexture()}deleteTexture(t){const{gl:e}=this;t&&this.texture2dParams.delete(t),e.deleteTexture(t)}viewport(t,e,r,o){const{gl:i}=this;i.viewport(t,e,r,o)}clearColor(t,e,r,o){const{gl:i}=this;i.clearColor(t,e,r,o)}setScissorTest(t){const{gl:e,scissorEnabled:r}=this;t!==r&&(t?e.enable(e.SCISSOR_TEST):e.disable(e.SCISSOR_TEST),this.scissorEnabled=t)}scissor(t,e,r,o){const{gl:i,scissorX:s,scissorY:a,scissorWidth:l,scissorHeight:d}=this;(t!==s||e!==a||r!==l||o!==d)&&(i.scissor(t,e,r,o),this.scissorX=t,this.scissorY=e,this.scissorWidth=r,this.scissorHeight=o)}setBlend(t){const{gl:e,blendEnabled:r}=this;t!==r&&(t?e.enable(e.BLEND):e.disable(e.BLEND),this.blendEnabled=t)}blendFunc(t,e){const{gl:r,blendSrcRgb:o,blendDstRgb:i,blendSrcAlpha:s,blendDstAlpha:a}=this;(t!==o||e!==i||t!==s||e!==a)&&(r.blendFunc(t,e),this.blendSrcRgb=t,this.blendDstRgb=e,this.blendSrcAlpha=t,this.blendDstAlpha=e)}createBuffer(){const{gl:t}=this;return t.createBuffer()}clear(){const{gl:t}=this;t.clear(t.COLOR_BUFFER_BIT)}arrayBufferData(t,e,r){const{gl:o,boundArrayBuffer:i}=this;i!==t&&(o.bindBuffer(o.ARRAY_BUFFER,t),this.boundArrayBuffer=t),o.bufferData(o.ARRAY_BUFFER,e,r)}elementArrayBufferData(t,e,r){const{gl:o,boundElementArrayBuffer:i}=this;i!==t&&(o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,t),this.boundElementArrayBuffer=t),o.bufferData(o.ELEMENT_ARRAY_BUFFER,e,r)}vertexAttribPointer(t,e,r,o,i,s,a){const{gl:l,boundArrayBuffer:d}=this;d!==t&&(l.bindBuffer(l.ARRAY_BUFFER,t),this.boundArrayBuffer=t),l.vertexAttribPointer(e,r,o,i,s,a)}useProgram(t){const{gl:e,curProgram:r}=this;r!==t&&(e.useProgram(t),this.curProgram=t)}setUniform(t,e,...r){const{gl:o,programUniforms:i}=this;let s=i.get(this.curProgram);s||(s=new Map,i.set(this.curProgram,s));const a=s.get(e);(!a||!Wi(a,r))&&(s.set(e,r),o[t](e,...r))}getParameter(t){const{gl:e}=this;return e.getParameter(t)}drawElements(t,e,r,o){const{gl:i}=this;i.drawElements(t,e,r,o)}getExtension(t){const{gl:e}=this;return e.getExtension(t)}createVertexArray(){const{gl:t}=this;return t.createVertexArray()}bindVertexArray(t){const{gl:e}=this;e.bindVertexArray(t)}getAttribLocation(t,e){const{gl:r}=this;return r.getAttribLocation(t,e)}getUniformLocation(t,e){const{gl:r}=this;return r.getUniformLocation(t,e)}enableVertexAttribArray(t){const{gl:e}=this;e.enableVertexAttribArray(t)}disableVertexAttribArray(t){const{gl:e}=this;e.disableVertexAttribArray(t)}createShader(t){const{gl:e}=this;return e.createShader(t)}compileShader(t){const{gl:e}=this;e.compileShader(t)}attachShader(t,e){const{gl:r}=this;r.attachShader(t,e)}linkProgram(t){const{gl:e}=this;e.linkProgram(t)}deleteProgram(t){const{gl:e}=this;e.deleteProgram(t)}getShaderParameter(t,e){const{gl:r}=this;return r.getShaderParameter(t,e)}getShaderInfoLog(t){const{gl:e}=this;return e.getShaderInfoLog(t)}createProgram(){const{gl:t}=this;return t.createProgram()}getProgramParameter(t,e){const{gl:r}=this;return r.getProgramParameter(t,e)}getProgramInfoLog(t){const{gl:e}=this;return e.getProgramInfoLog(t)}shaderSource(t,e){const{gl:r}=this;r.shaderSource(t,e)}deleteShader(t){const{gl:e}=this;e.deleteShader(t)}}function Wi(n,t){return n.length!==t.length?!1:n.every((e,r)=>Array.isArray(e)||e instanceof Float32Array?!1:e===t[r])}const Xi=24;class Yi extends Ei{constructor(e){super(e.stage);h(this,"glw");h(this,"system");h(this,"txManager");h(this,"shManager");h(this,"options");h(this,"quadBuffer",new ArrayBuffer(1024*1024*4));h(this,"fQuadBuffer",new Float32Array(this.quadBuffer));h(this,"uiQuadBuffer",new Uint32Array(this.quadBuffer));h(this,"renderOps",[]);h(this,"curBufferIdx",0);h(this,"curRenderOp",null);h(this,"renderables",[]);h(this,"defaultShader");h(this,"quadBufferCollection");h(this,"defaultTexture");const{canvas:r,clearColor:o,bufferMemory:i}=e;this.options=e,this.txManager=e.txManager,this.shManager=e.shManager,this.defaultTexture=new Kt(this.txManager),this.defaultTexture.once("loaded",()=>{this.stage.requestRender()});const s=ci(r,e.contextSpy),a=this.glw=new Oi(s),l=Te(o);a.viewport(0,0,r.width,r.height),a.clearColor(l[0],l[1],l[2],l[3]),a.setBlend(!0),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),Li(a,i),this.system={parameters:ki(this.glw),extensions:Mi(this.glw)},this.shManager.renderer=this,this.defaultShader=this.shManager.loadShader("DefaultShader").shader;const d=a.createBuffer(),u=6*Float32Array.BYTES_PER_ELEMENT;this.quadBufferCollection=new ho([{buffer:d,attributes:{a_position:{name:"a_position",size:2,type:a.FLOAT,normalized:!1,stride:u,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:a.FLOAT,normalized:!1,stride:u,offset:2*Float32Array.BYTES_PER_ELEMENT},a_color:{name:"a_color",size:4,type:a.UNSIGNED_BYTE,normalized:!0,stride:u,offset:4*Float32Array.BYTES_PER_ELEMENT},a_textureIndex:{name:"a_textureIndex",size:1,type:a.FLOAT,normalized:!1,stride:u,offset:5*Float32Array.BYTES_PER_ELEMENT}}}])}reset(){const{glw:e}=this;this.curBufferIdx=0,this.curRenderOp=null,this.renderOps.length=0,e.setScissorTest(!1),e.clear()}getShaderManager(){return this.shManager}createCtxTexture(e){return e instanceof Et?new Fi(this.glw,e):new ao(this.glw,e)}addQuad(e){var de,Se;const{fQuadBuffer:r,uiQuadBuffer:o}=this,{width:i,height:s,colorTl:a,colorTr:l,colorBl:d,colorBr:u,textureOptions:f,shader:m,shaderProps:y,alpha:p,clippingRect:x,tx:T,ty:w,ta:S,tb:A,tc:v,td:C}=e;let{texture:I}=e;if(y&&Er(y,"$dimensions")){const ae=y.$dimensions;ae.width=i,ae.height=s}I=I!=null?I:this.defaultTexture;let{curBufferIdx:b,curRenderOp:_}=this;const E={width:i,height:s},R=m||this.defaultShader;_&&(_.shader!==R||!Ai(_.clippingRect,x)||_.shader!==this.defaultShader&&(!y||!_.shader.canBatchShaderProps(_.shaderProps,y)))&&(_=null),_||(this.newRenderOp(R,y,p,E,x,b),_=this.curRenderOp);const B=(de=f==null?void 0:f.flipX)!=null?de:!1,L=(Se=f==null?void 0:f.flipY)!=null?Se:!1;let P=0,U=0,k=1,F=1;if(I instanceof Et){const{x:ae,y:Be,width:Ke,height:Ne}=I.props,{width:fe=0,height:he=0}=I.parentTexture.dimensions||{width:0,height:0};P=ae/fe,k=P+Ke/fe,U=Be/he,F=U+Ne/he,I=I.parentTexture}B&&([P,k]=[k,P]),L&&([U,F]=[F,U]);const{txManager:X}=this.stage,se=X.getCtxTexture(I),G=this.addTexture(se,b);if(_=this.curRenderOp,A!==0||v!==0)r[b++]=T,r[b++]=w,r[b++]=P,r[b++]=U,o[b++]=a,r[b++]=G,r[b++]=T+i*S,r[b++]=w+i*v,r[b++]=k,r[b++]=U,o[b++]=l,r[b++]=G,r[b++]=T+s*A,r[b++]=w+s*C,r[b++]=P,r[b++]=F,o[b++]=d,r[b++]=G,r[b++]=T+i*S+s*A,r[b++]=w+i*v+s*C,r[b++]=k,r[b++]=F,o[b++]=u,r[b++]=G;else{const ae=T+i*S,Be=w+s*C;r[b++]=T,r[b++]=w,r[b++]=P,r[b++]=U,o[b++]=a,r[b++]=G,r[b++]=ae,r[b++]=w,r[b++]=k,r[b++]=U,o[b++]=l,r[b++]=G,r[b++]=T,r[b++]=Be,r[b++]=P,r[b++]=F,o[b++]=d,r[b++]=G,r[b++]=ae,r[b++]=Be,r[b++]=k,r[b++]=F,o[b++]=u,r[b++]=G}_.length+=Xi,_.numQuads++,this.curBufferIdx=b}newRenderOp(e,r,o,i,s,a){const l=new so(this.glw,this.options,this.quadBufferCollection,e,r,o,s,i,a,0);this.curRenderOp=l,this.renderOps.push(l)}addTexture(e,r,o){const{curRenderOp:i}=this,s=i.addTexture(e);if(s===4294967295){if(o)throw new Error("Unable to add texture to render op");const{shader:a,shaderProps:l,dimensions:d,clippingRect:u,alpha:f}=i;return this.newRenderOp(a,l,f,d,u,r),this.addTexture(e,r,!0)}return s}addRenderOp(e){this.renderOps.push(e),this.curRenderOp=null}render(e="screen"){var a;const{glw:r,quadBuffer:o}=this,i=new Float32Array(o,0,this.curBufferIdx),s=(a=this.quadBufferCollection.getBuffer("a_position"))!=null?a:null;r.arrayBufferData(s,i,r.STATIC_DRAW),this.renderOps.forEach((l,d)=>{l.draw()}),this.renderables=[]}}class $i{constructor(){h(this,"activeAnimations",new Set)}registerAnimation(t){this.activeAnimations.add(t)}unregisterAnimation(t){this.activeAnimations.delete(t)}update(t){this.activeAnimations.forEach(e=>{e.update(t)})}}class Hi{constructor(t){h(this,"isWorkerSupported",!!self.Worker);h(this,"imageWorkersEnabled",!0);h(this,"messageManager",{});h(this,"workers",[]);h(this,"workerIndex",0);this.isWorkerSupported&&t>0?(this.workers=this.createWorkers(t),this.workers.forEach(e=>{e.onmessage=this.handleMessage.bind(this)})):this.imageWorkersEnabled=!1}handleMessage(t){const{src:e,data:r,error:o}=t.data,i=this.messageManager[e];if(i){const[s,a]=i;delete this.messageManager[e],o?a(new Error(o)):s(r)}}createWorkers(t=1){const e="\n      function hasAlphaChannel(mimeType) {\n          return (mimeType.indexOf(\"image/png\") !== -1);\n      }\n\n      async function getImage(src, premultiplyAlpha) {\n        const response = await fetch(src);\n        const blob = await response.blob();\n        const hasAlphaChannel = premultiplyAlpha ?? this.hasAlphaChannel(blob.type);\n\n        const data = await createImageBitmap(blob, {\n          premultiplyAlpha: hasAlphaChannel ? 'premultiply' : 'none',\n          colorSpaceConversion: 'none',\n          imageOrientation: 'none',\n        });\n\n        return { data, premultiplyAlpha };\n      }\n\n      self.onmessage = async (event) => {\n        const { src, premultiplyAlpha } = event.data;\n\n        try {\n          const data = await getImage(src, premultiplyAlpha);\n          self.postMessage({ src, data }, [data.data]);\n        } catch (error) {\n          self.postMessage({ src, error: error.message });\n        }\n      };\n    ",r=new Blob([e.replace('"use strict";',"")],{type:"application/javascript"}),o=(window.URL?URL:webkitURL).createObjectURL(r),i=[];for(let s=0;s<t;s++)i.push(new Worker(o));return i}getNextWorker(){const t=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,t}convertUrlToAbsolute(t){return new URL(t,self.location.href).href}getImage(t,e){return new Promise((r,o)=>{try{if(this.workers){const i=this.convertUrlToAbsolute(t);this.messageManager[i]=[r,o],this.getNextWorker().postMessage({src:i,premultiplyAlpha:e})}}catch(i){o(i)}})}}function Gi(n){return/\.(ktx|pvr)$/.test(n)}const Qi=async n=>{const e=await(await fetch(n)).arrayBuffer();return n.indexOf(".ktx")!==-1?ji(e):Vi(e)},ji=async n=>{const t=new DataView(n),e=t.getUint32(12)===16909060,r=[],o={glInternalFormat:t.getUint32(28,e),pixelWidth:t.getUint32(36,e),pixelHeight:t.getUint32(40,e),numberOfMipmapLevels:t.getUint32(56,e),bytesOfKeyValueData:t.getUint32(60,e)};let i=64;i+=o.bytesOfKeyValueData;for(let s=0;s<o.numberOfMipmapLevels;s++){const a=t.getUint32(i);i+=4,r.push(t.buffer.slice(i,a)),i+=a}return{data:{glInternalFormat:o.glInternalFormat,mipmaps:r,width:o.pixelWidth||0,height:o.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1}},Vi=async n=>{const a=n,l=new Int32Array(a,0,13),d=l[12]+52,u=new Uint8Array(a,d),f=[],m={pixelWidth:l[7],pixelHeight:l[6],numberOfMipmapLevels:l[11]||0};let y=0,p=m.pixelWidth||0,x=m.pixelHeight||0;for(let T=0;T<m.numberOfMipmapLevels;T++){const w=(p+3>>2)*(x+3>>2)*8,S=new Uint8Array(a,u.byteOffset+y,w);f.push(S),y+=w,p=p>>1,x=x>>1}return{data:{glInternalFormat:36196,mipmaps:f,width:m.pixelWidth||0,height:m.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1}},_t=class _t extends ar{constructor(e,r){super(e);h(this,"props");this.props=_t.resolveDefaults(r)}hasAlphaChannel(e){return e.indexOf("image/png")!==-1}async getTextureData(){const{src:e,premultiplyAlpha:r}=this.props;if(!e)return{data:null};if(e instanceof ImageData)return{data:e,premultiplyAlpha:r};if(Gi(e))return Qi(e);if(this.txManager.imageWorkerManager.imageWorkersEnabled)return await this.txManager.imageWorkerManager.getImage(e,r);{const i=await(await fetch(e)).blob(),s=r!=null?r:this.hasAlphaChannel(i.type);return{data:await createImageBitmap(i,{premultiplyAlpha:s?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:s}}}static makeCacheKey(e){const r=_t.resolveDefaults(e);return r.src instanceof ImageData?!1:"ImageTexture,".concat(r.src,",").concat(r.premultiplyAlpha)}static resolveDefaults(e){var r,o;return{src:(r=e.src)!=null?r:"",premultiplyAlpha:(o=e.premultiplyAlpha)!=null?o:!0}}};h(_t,"z$__type__Props");let kr=_t;const Ct=class Ct extends ar{constructor(e,r){super(e);h(this,"props");this.props=Ct.resolveDefaults(r)}async getTextureData(){const{width:e,height:r}=this.props,o=e*r*4,i=new Uint8ClampedArray(o);for(let s=0;s<o;s+=4){const a=Math.floor(Math.random()*256);i[s]=a,i[s+1]=a,i[s+2]=a,i[s+3]=255}return{data:new ImageData(i,e,r)}}static makeCacheKey(e){const r=Ct.resolveDefaults(e);return"NoiseTexture,".concat(r.width,",").concat(r.height,",").concat(r.cacheId)}static resolveDefaults(e){var r,o,i;return{width:(r=e.width)!=null?r:128,height:(o=e.height)!=null?o:128,cacheId:(i=e.cacheId)!=null?i:0}}};h(Ct,"z$__type__Props");let Mr=Ct;class Ki{constructor(t){h(this,"usedMemory",0);h(this,"txConstructors",{});h(this,"textureKeyCache",new Map);h(this,"textureIdCache",new Map);h(this,"ctxTextureCache",new WeakMap);h(this,"textureRefCountMap",new WeakMap);h(this,"imageWorkerManager");h(this,"renderer");this.imageWorkerManager=new Hi(t),this.registerTextureType("ImageTexture",kr),this.registerTextureType("ColorTexture",Kt),this.registerTextureType("NoiseTexture",Mr),this.registerTextureType("SubTexture",Et)}registerTextureType(t,e){this.txConstructors[t]=e}loadTexture(t,e,r=null){var s;const o=this.txConstructors[t];if(!o)throw new Error('Texture type "'.concat(t,'" is not registered'));let i;if((r==null?void 0:r.id)!==void 0&&this.textureIdCache.has(r.id)&&(i=this.textureIdCache.get(r.id)),!i){const a=r==null?void 0:r.id,l=(s=r==null?void 0:r.cacheKey)!=null?s:o.makeCacheKey(e);l&&this.textureKeyCache.has(l)?i=this.textureKeyCache.get(l):i=new o(this,e),a&&this.addTextureIdToCache(a,l,i)}return r!=null&&r.preload&&this.getCtxTexture(i).load(),i}addTextureIdToCache(t,e,r){const{textureIdCache:o,textureRefCountMap:i}=this;o.set(t,r),i.has(r)?i.get(r).count++:(i.set(r,{cacheKey:e,count:1}),e&&this.textureKeyCache.set(e,r))}removeTextureIdFromCache(t){const{textureIdCache:e,textureRefCountMap:r}=this,o=e.get(t);if(o&&(e.delete(t),r.has(o))){const i=r.get(o);i.count--,i.count===0&&(r.delete(o),i.cacheKey&&this.textureKeyCache.delete(i.cacheKey))}}getDebugInfo(){return{keyCacheSize:this.textureKeyCache.size,idCacheSize:this.textureIdCache.size}}getCtxTexture(t){if(this.ctxTextureCache.has(t))return this.ctxTextureCache.get(t);const e=this.renderer.createCtxTexture(t);return this.ctxTextureCache.set(t,e),e}}class uo{constructor(t){h(this,"textRenderers");this.textRenderers=t}addFontFace(t){for(const e in this.textRenderers){const r=this.textRenderers[e];r&&r.isFontFaceSupported(t)&&r.addFontFace(t)}}static resolveFontFace(t,e){const r=[];return t.reduce((i,s)=>{if(i)return i;const a=s[e.fontFamily];if(!a)return;const l=new Set(a);for(const d of l)(d.descriptors.stretch!==e.fontStretch||d.descriptors.style!==e.fontStyle||d.descriptors.weight!==e.fontWeight)&&l.delete(d);return l.values().next().value},void 0)||r[0]}}const qi={x:(n,t)=>{n.props.x=t},y:(n,t)=>{n.props.y=t},width:(n,t)=>{n.props.width=t},height:(n,t)=>{n.props.height=t},color:(n,t)=>{n.props.color=t},zIndex:(n,t)=>{n.props.zIndex=t},fontFamily:(n,t)=>{n.props.fontFamily=t},fontWeight:(n,t)=>{n.props.fontWeight=t},fontStyle:(n,t)=>{n.props.fontStyle=t},fontStretch:(n,t)=>{n.props.fontStretch=t},fontSize:(n,t)=>{n.props.fontSize=t},text:(n,t)=>{n.props.text=t},textAlign:(n,t)=>{n.props.textAlign=t},contain:(n,t)=>{n.props.contain=t},offsetY:(n,t)=>{n.props.offsetY=t},scrollable:(n,t)=>{n.props.scrollable=t},scrollY:(n,t)=>{n.props.scrollY=t},letterSpacing:(n,t)=>{n.props.letterSpacing=t},lineHeight:(n,t)=>{n.props.lineHeight=t},maxLines:(n,t)=>{n.props.maxLines=t},textBaseline:(n,t)=>{n.props.textBaseline=t},verticalAlign:(n,t)=>{n.props.verticalAlign=t},overflowSuffix:(n,t)=>{n.props.overflowSuffix=t},debug:(n,t)=>{n.props.debug=t}};class fo{constructor(t){h(this,"stage");h(this,"set");this.stage=t;const e={...qi,...this.getPropertySetters()};this.set=Object.freeze(Object.fromEntries(Object.entries(e).map(([r,o])=>[r,(i,s)=>{i.props[r]!==s&&(o(i,s),this.stage.requestRender())}])))}setStatus(t,e,r){t.status!==e&&(t.status=e,t.emitter.emit(e,r))}scheduleUpdateState(t){t.updateScheduled||(t.updateScheduled=!0,queueMicrotask(()=>{t.updateScheduled=!1,this.updateState(t)}))}}const Zi=24;function Ji(n,t,e,r,o,i,s,a,l){const d=Math.min(Math.max(s.firstLineIdx,0),a.length),u=0;let f=0;r==="middle"?f=(t-n)/2:r==="bottom"&&(f=t-n);const y=o/i+d*t+f;if(!(l&&y>=l/i))return{sdfX:u,sdfY:y,lineIndex:d}}class vt{constructor(t,e=0){h(this,"iterator");h(this,"peekBuffer",[]);h(this,"_lastIndex");this.iterator=t,this.iterator=t,this._lastIndex=e-1,this.peekBuffer=[]}next(){const t=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return t.done?this._lastIndex=-1:this._lastIndex++,t}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const t=this.iterator.next();return this.peekBuffer.push(t),t}get lastIndex(){return this._lastIndex}}function*At(n,t=0){let e=t;for(;e<n.length;){const r=n.codePointAt(e);if(r===void 0)throw new Error("Invalid Unicode code point");yield r,e+=r<=65535?1:2}}function es(n,t,e){const r=e.shapeText(t,new vt(At(n,0),0));let o=0;for(const i of r)i.mapped&&(o+=i.xAdvance);return o}function ts(n,t,e,r,o,i,s,a,l,d,u,f,m,y,p,x,T,w,S){p.loaded,p.data,p.shaper;const A=a/p.data.info.size,v=l/A,C=i/A,I=d/A,b=m[n],_=(b==null?void 0:b.codepointIndex)||0,E=(b==null?void 0:b.maxX)||0,R=(b==null?void 0:b.maxY)||0;let B=E,L=R,P=t,U=e,k=0;const F={codepointIndex:-1,bufferOffset:-1,xStart:-1},X=p.shaper,se={letterSpacing:I};let G=X.shapeText(se,new vt(At(r,_),_)),de,Se=-1;const ae=[],Be=s/A,Ke=es(w,se,X);let Ne=!0;for(;Ne;){const fe=(S===0||n+1<S)&&(f!=="both"||T||U+v+p.maxCharHeight<=Be),he=fe?C:C-Ke;let ee=0;const Le=U+v>=y.y1,Fe=U<=y.y2,me=Le&&Fe;for(;(de=G.next())&&!de.done;){const Q=de.value;if(n===m.length)m.push({codepointIndex:Q.cluster,maxY:L,maxX:B});else if(n>m.length)throw new Error("Unexpected lineCache length");if(Q.codepoint===32||Q.codepoint===10?F.codepointIndex!==-1&&(F.codepointIndex=-1,ee=P):F.codepointIndex===-1&&(F.codepointIndex=Q.cluster,F.bufferOffset=k,F.xStart=ee),Q.mapped){const Nt=P+Q.xOffset+Q.width;if(f!=="none"&&Nt>=he&&F.codepointIndex!==-1&&F.codepointIndex<Q.cluster&&F.xStart>0)if(fe){G=X.shapeText(se,new vt(At(r,F.codepointIndex),F.codepointIndex)),k=F.bufferOffset;break}else G=X.shapeText(se,new vt(At(w,0),0)),P=F.xStart,k=F.bufferOffset;else{const $e=P+Q.xOffset,Pe=U+Q.yOffset;if(me){Se===-1&&(Se=k);const He=p.getAtlasEntry(Q.glyphId),kt=He.x/p.data.common.scaleW,Mt=He.y/p.data.common.scaleH,cn=He.width/p.data.common.scaleW,hn=He.height/p.data.common.scaleH;u[k++]=$e,u[k++]=Pe,u[k++]=kt,u[k++]=Mt,u[k++]=$e+Q.width,u[k++]=Pe,u[k++]=kt+cn,u[k++]=Mt,u[k++]=$e,u[k++]=Pe+Q.height,u[k++]=kt,u[k++]=Mt+hn,u[k++]=$e+Q.width,u[k++]=Pe+Q.height,u[k++]=kt+cn,u[k++]=Mt+hn}L=Math.max(L,Pe+Q.height),P+=Q.xAdvance,B=Math.max(B,P)}}else if(Q.codepoint===10){if(fe)break;G=X.shapeText(se,new vt(At(w,0),0)),f="none"}}Se!==-1&&(ae.push({bufferStart:Se,bufferEnd:k}),Se=-1),P=0,U+=v,n++,F.codepointIndex=-1,ee=0,!x&&f==="both"&&U>y.y2||de&&de.done?Ne=!1:fe||(Ne=!1)}if(o==="center"){const fe=f==="none"?B:C;for(let he=0;he<ae.length;he++){const ee=ae[he],Le=u[ee.bufferEnd-4]-u[ee.bufferStart],Fe=(fe-Le)/2;for(let me=ee.bufferStart;me<ee.bufferEnd;me+=4)u[me]+=Fe}}else if(o==="right"){const fe=f==="none"?B:C;for(let he=0;he<ae.length;he++){const ee=ae[he],Le=ee.bufferEnd===ee.bufferStart?0:u[ee.bufferEnd-4]-u[ee.bufferStart],Fe=fe-Le;for(let me=ee.bufferStart;me<ee.bufferEnd;me+=4)u[me]+=Fe}}return{bufferNumFloats:k,bufferNumQuads:k/16,layoutNumCharacters:de.done?r.length-_:de.value.cluster-_+1,fullyProcessed:!!de.done,maxX:B,maxY:L}}function rs(n,t){return Math.ceil(n/t)*t}function ns(n,t){return Math.floor(n/t)*t}function os(n,t,e,r,o,i,s,a){const{screen:l,sdf:d}=n;if(!Si(s))l.x1=0,l.y1=0,l.x2=0,l.y2=0,d.x1=0,d.y1=0,d.x2=0,d.y2=0,n.numLines=0,n.firstLineIdx=0;else{const u=s.x1-t,f=u+(s.x2-s.x1),m=s.y1-e+r,y=ns(m-i,o||1),p=rs(m+(s.y2-s.y1)+i,o||1);l.x1=u,l.y1=y,l.x2=f,l.y2=p,d.x1=u/a,d.y1=y/a,d.x2=f/a,d.y2=p/a,n.numLines=Math.ceil((p-y)/o),n.firstLineIdx=o?Math.floor(y/o):0}n.valid=!0}const is={x:0,y:0,width:0,height:0};class ss extends fo{constructor(e){super(e);h(this,"ssdfFontFamilies",{});h(this,"msdfFontFamilies",{});h(this,"sdfShader");h(this,"rendererBounds");this.sdfShader=this.stage.shManager.loadShader("SdfShader").shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,r)=>{e.props.fontFamily=r,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,r)=>{e.props.fontWeight=r,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,r)=>{e.props.fontStyle=r,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,r)=>{e.props.fontStretch=r,e.trFontFace=void 0,this.invalidateLayoutCache(e)},fontSize:(e,r)=>{e.props.fontSize=r,this.invalidateLayoutCache(e)},text:(e,r)=>{e.props.text=r,this.invalidateLayoutCache(e)},textAlign:(e,r)=>{e.props.textAlign=r,this.invalidateLayoutCache(e)},color:(e,r)=>{e.props.color=r},x:(e,r)=>{e.props.x=r,e.elementBounds.valid&&(this.setElementBoundsX(e),!e.renderWindow.valid&&xr(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},y:(e,r)=>{e.props.y=r,e.elementBounds.valid&&(this.setElementBoundsY(e),!e.renderWindow.valid&&xr(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},contain:(e,r)=>{e.props.contain=r,this.invalidateLayoutCache(e)},width:(e,r)=>{e.props.width=r,this.invalidateLayoutCache(e)},height:(e,r)=>{e.props.height=r,this.invalidateLayoutCache(e)},offsetY:(e,r)=>{e.props.offsetY=r,this.invalidateLayoutCache(e)},scrollable:(e,r)=>{e.props.scrollable=r,this.invalidateLayoutCache(e)},scrollY:(e,r)=>{e.props.scrollY=r,this.scheduleUpdateState(e)},letterSpacing:(e,r)=>{e.props.letterSpacing=r,this.invalidateLayoutCache(e)},lineHeight:(e,r)=>{e.props.lineHeight=r,this.invalidateLayoutCache(e)},maxLines:(e,r)=>{e.props.maxLines=r,this.invalidateLayoutCache(e)},textBaseline:(e,r)=>{e.props.textBaseline=r,this.invalidateLayoutCache(e)},verticalAlign:(e,r)=>{e.props.verticalAlign=r,this.invalidateLayoutCache(e)},overflowSuffix:(e,r)=>{e.props.overflowSuffix=r,this.invalidateLayoutCache(e)},debug:(e,r)=>{e.props.debug=r}}}canRenderFont(e){const{fontFamily:r}=e;return r in this.ssdfFontFamilies||r in this.msdfFontFamilies||r==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(e){return e instanceof $o}addFontFace(e){const r=e.fontFamily,o=e.type==="ssdf"?this.ssdfFontFamilies:e.type==="msdf"?this.msdfFontFamilies:void 0;if(!o){console.warn("Invalid font face type: ".concat(e.type));return}let i=o[r];i||(i=new Set,o[r]=i),i.add(e)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new We,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(e){let{trFontFace:r}=e;const{textH:o,lineCache:i,debugData:s,forceFullLayoutCalc:a}=e;if(s.updateCount++,e.status==="initialState"&&this.setStatus(e,"loading"),!r&&(r=this.resolveFontFace(e.props),e.trFontFace=r,!r)){const X="SdfTextRenderer: Could not resolve font face for family: '".concat(e.props.fontFamily,"'");console.error(X),this.setStatus(e,"failed",new Error(X));return}if(!r.loaded){r.once("loaded",()=>{this.scheduleUpdateState(e)});return}r.data;const{text:l,fontSize:d,x:u,y:f,contain:m,width:y,height:p,lineHeight:x,verticalAlign:T,scrollable:w,overflowSuffix:S,maxLines:A}=e.props,v=m==="both"&&w?e.props.scrollY:0,{renderWindow:C}=e,I=r.data.info.size,b=d/I,_=x/b;e.distanceRange=b*r.data.distanceField.distanceRange;const E=l.length*Zi;let R=e.vertexBuffer;(!R||R.length<E)&&(R=new Float32Array(E*2));const B=e.elementBounds;if(B.valid||(this.setElementBoundsX(e),this.setElementBoundsY(e),B.valid=!0),!a&&C.valid){const X=C.screen;if(u+X.x1<=B.x1&&u+X.x2>=B.x2&&f-v+X.y1<=B.y1&&f-v+X.y2>=B.y2){this.setStatus(e,"loaded");return}C.valid=!1,this.setStatus(e,"loading")}const{offsetY:L,textAlign:P}=e.props;if(!C.valid){if(!xr(B,this.rendererBounds))return;os(C,u,f,v,x,m==="both"?B.y2-B.y1:0,B,b)}const U=Ji(I,_,x,T,L,b,C,i,o);if(!U){this.setStatus(e,"loaded");return}const{letterSpacing:k}=e.props,F=ts(U.lineIndex,U.sdfX,U.sdfY,l,P,y,p,d,x,k,R,m,i,C.sdf,r,a,w,S,A);e.bufferUploaded=!1,e.bufferNumFloats=F.bufferNumFloats,e.bufferNumQuads=F.bufferNumQuads,e.vertexBuffer=R,e.renderWindow=C,s.lastLayoutNumCharacters=F.layoutNumCharacters,s.bufferSize=R.byteLength,F.fullyProcessed&&(e.textW=F.maxX*b,e.textH=F.maxY*b),this.setStatus(e,"loaded")}renderQuads(e,r,o,i){var E,R,B;if(!e.vertexBuffer)return;const{renderer:s}=this.stage,{fontSize:a,color:l,contain:d,scrollable:u,zIndex:f,debug:m}=e.props,y=d==="both"&&u?e.props.scrollY:0,{textW:p=0,textH:x=0,distanceRange:T,vertexBuffer:w,bufferUploaded:S,trFontFace:A,elementBounds:v}=e;let{webGlBuffers:C}=e;if(!C){const L=s.glw,P=4*Float32Array.BYTES_PER_ELEMENT,U=L.createBuffer();e.webGlBuffers=new ho([{buffer:U,attributes:{a_position:{name:"a_position",size:2,type:L.FLOAT,normalized:!1,stride:P,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:L.FLOAT,normalized:!1,stride:P,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,e.webGlBuffers,C=e.webGlBuffers}if(!S){const L=s.glw,P=(E=C==null?void 0:C.getBuffer("a_textureCoordinate"))!=null?E:null;L.arrayBufferData(P,w,L.STATIC_DRAW),e.bufferUploaded=!0}if(u&&d==="both"){v.valid;const L=vi(v,is);o.valid?(e.clippingRect.valid=!0,o=Vr(o,L,e.clippingRect)):(e.clippingRect.valid=!0,o=io(L,e.clippingRect))}const I=new so(s.glw,s.options,C,this.sdfShader,{transform:r.data,color:hi(l,i),size:a/(((R=A.data)==null?void 0:R.info.size)||0),scrollY:y,distanceRange:T,debug:m.sdfShaderDebug},i,o,{height:x,width:p},0,f),b=(B=e.trFontFace)==null?void 0:B.texture,_=this.stage.txManager.getCtxTexture(b);I.addTexture(_),I.length=e.bufferNumFloats,I.numQuads=e.bufferNumQuads,s.addRenderOp(I)}resolveFontFace(e){return uo.resolveFontFace([this.msdfFontFamilies,this.ssdfFontFamilies],e)}invalidateLayoutCache(e){e.renderWindow.valid=!1,e.elementBounds.valid=!1,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading"),this.scheduleUpdateState(e)}setElementBoundsX(e){const{x:r,contain:o,width:i}=e.props,{elementBounds:s}=e;s.x1=r,s.x2=o!=="none"?r+i:1/0}setElementBoundsY(e){const{y:r,contain:o,height:i}=e.props,{elementBounds:s}=e;s.y1=r,s.y2=o==="both"?r+i:1/0}}const mn=2048;function xn(n,t,e,r,o){const i=n!=="bottom"?.5*t:0;return e*(r-1)+i+Math.max(e,t)+(o||0)}class as{constructor(t,e){h(this,"_canvas");h(this,"_context");h(this,"_settings");h(this,"renderInfo");this._canvas=t,this._context=e,this._settings=this.mergeDefaults({})}set settings(t){this._settings=this.mergeDefaults(t)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const t=[this._settings.fontFace],e=[];for(let r=0,o=t.length;r<o;r++)t[r]==="serif"||t[r]==="sans-serif"?e.push(t[r]):e.push('"'.concat(t[r],'"'));return"".concat(this._settings.fontStyle," ").concat(this._settings.fontSize*this.getPrecision(),"px ").concat(e.join(","))}_load(){if(document.fonts){const t=this._getFontSetting();try{if(!document.fonts.check(t,this._settings.text))return document.fonts.load(t,this._settings.text).catch(e=>{console.warn("[Lightning] Font load error",e,t)}).then(()=>{document.fonts.check(t,this._settings.text)||console.warn("[Lightning] Font not found",t)})}catch(e){console.warn("[Lightning] Can't check font loading for "+t)}}}calculateRenderInfo(){const t={},e=this.getPrecision(),r=this._settings.paddingLeft*e,o=this._settings.paddingRight*e,i=this._settings.fontSize*e;let s=this._settings.offsetY===null?null:this._settings.offsetY*e,a=(this._settings.lineHeight||i)*e;const l=this._settings.w*e,d=this._settings.h*e;let u=this._settings.wordWrapWidth*e;const f=this._settings.cutSx*e,m=this._settings.cutEx*e,y=this._settings.cutSy*e,p=this._settings.cutEy*e,x=(this._settings.letterSpacing||0)*e,T=this._settings.textIndent*e;this.setFontProperties();let w=l||2048/this.getPrecision(),S=w-r;if(S<10&&(w+=10-S,S=10),u||(u=S),this._settings.textOverflow&&!this._settings.wordWrap){let _;switch(this._settings.textOverflow){case"clip":_="";break;case"ellipsis":_=this._settings.overflowSuffix;break;default:_=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,u-T,_)}let A;if(this._settings.wordWrap)A=this.wrapText(this._settings.text,u,x,T);else{A={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const _=A.l.length;for(let E=0;E<_-1;E++)A.n.push(E)}let v=A.l;if(this._settings.maxLines&&v.length>this._settings.maxLines){const _=v.slice(0,this._settings.maxLines);let E=null;if(this._settings.overflowSuffix){const U=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,k=this.wrapText(_[_.length-1],u-U,x,T);_[_.length-1]="".concat(k.l[0]).concat(this._settings.overflowSuffix),E=[k.l.length>1?k.l[1]:""]}else E=[""];let R;const B=v.length;let L=0;const P=A.n.length;for(R=this._settings.maxLines;R<B;R++)E[L]+="".concat(E[L]?" ":"").concat(v[R]),R+1<P&&A.n[R+1]&&L++;t.remainingText=E.join("\n"),t.moreTextLines=!0,v=_}else t.moreTextLines=!1,t.remainingText="";let C=0;const I=[];for(let _=0;_<v.length;_++){const E=this.measureText(v[_],x)+(_===0?T:0);I.push(E),C=Math.max(C,E)}t.lineWidths=I,l||(w=C+r+o,S=C),a=a||i;let b;return d?b=d:b=xn(this._settings.textBaseline,i,a,v.length,s),s===null&&(s=i),t.w=w,t.h=b,t.lines=v,t.precision=e,w||(w=1),b||(b=1),(f||m)&&(w=Math.min(w,m-f)),(y||p)&&(b=Math.min(b,p-y)),t.width=w,t.innerWidth=S,t.height=b,t.fontSize=i,t.cutSx=f,t.cutSy=y,t.cutEx=m,t.cutEy=p,t.lineHeight=a,t.lineWidths=I,t.offsetY=s,t.paddingLeft=r,t.paddingRight=o,t.letterSpacing=x,t.textIndent=T,t}draw(t,e){const r=this.getPrecision(),o=(e==null?void 0:e.lines)||t.lines,i=(e==null?void 0:e.lineWidths)||t.lineWidths,s=e?xn(this._settings.textBaseline,t.fontSize,t.lineHeight,e.lines.length,this._settings.offsetY===null?null:this._settings.offsetY*r):t.height;this._canvas.width=Math.min(Math.ceil(t.width+this._settings.textRenderIssueMargin),mn),this._canvas.height=Math.min(Math.ceil(s),mn),this.setFontProperties(),t.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(t.cutSx||t.cutSy)&&this._context.translate(-t.cutSx,-t.cutSy);let a,l;const d=[];for(let f=0,m=o.length;f<m;f++)a=f===0?t.textIndent:0,l=f*t.lineHeight+t.offsetY,this._settings.verticalAlign=="middle"?l+=(t.lineHeight-t.fontSize)/2:this._settings.verticalAlign=="bottom"&&(l+=t.lineHeight-t.fontSize),this._settings.textAlign==="right"?a+=t.innerWidth-i[f]:this._settings.textAlign==="center"&&(a+=(t.innerWidth-i[f])/2),a+=t.paddingLeft,d.push({text:o[f],x:a,y:l,w:i[f]});if(this._settings.highlight){const f=this._settings.highlightColor,m=this._settings.highlightHeight*r||t.fontSize*1.5,y=this._settings.highlightOffset*r,p=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*r:t.paddingLeft,x=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*r:t.paddingRight;this._context.fillStyle=mr(f);for(let T=0;T<d.length;T++){const w=d[T];this._context.fillRect(w.x-p,w.y-t.offsetY+y,w.w+x+p,m)}}let u=null;this._settings.shadow&&(u=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=mr(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*r,this._context.shadowOffsetY=this._settings.shadowOffsetY*r,this._context.shadowBlur=this._settings.shadowBlur*r),this._context.fillStyle=mr(this._settings.textColor);for(let f=0,m=d.length;f<m;f++){const y=d[f];if(t.letterSpacing===0)this._context.fillText(y.text,y.x,y.y);else{const p=y.text.split("");let x=y.x;for(let T=0,w=p.length;T<w;T++)this._context.fillText(p[T],x,y.y),x+=this.measureText(p[T],t.letterSpacing)}}u&&(this._context.shadowColor=u[0],this._context.shadowOffsetX=u[1],this._context.shadowOffsetY=u[2],this._context.shadowBlur=u[3]),(t.cutSx||t.cutSy)&&this._context.translate(t.cutSx,t.cutSy),this.renderInfo=t}wrapWord(t,e,r){const o=this._context.measureText(r).width,i=t.length,s=this._context.measureText(t).width;if(s<=e)return t;let a=Math.floor(e*i/s),l=this._context.measureText(t.substring(0,a)).width+o;if(l>e)for(;a>0&&(l=this._context.measureText(t.substring(0,a)).width+o,l>e);)a-=1;else for(;a<i;)if(l=this._context.measureText(t.substring(0,a)).width+o,l<e)a+=1;else{a-=1;break}return t.substring(0,a)+(e>=o?r:"")}wrapText(t,e,r,o=0){const i=t.split(/\r?\n/g);let s=[];const a=[];for(let l=0;l<i.length;l++){const d=[];let u="",f=e-o;const m=i[l].split(" ");for(let y=0;y<m.length;y++){const p=this.measureText(m[y],r),x=p+this.measureText(" ",r);y===0||x>f?(y>0&&(d.push(u),u=""),u+=m[y],f=e-p-(y===0?o:0)):(f-=x,u+=" ".concat(m[y]))}d.push(u),u="",s=s.concat(d),l<i.length-1&&a.push(s.length)}return{l:s,n:a}}measureText(t,e=0){return e?t.split("").reduce((r,o)=>r+this._context.measureText(o).width+e,0):this._context.measureText(t).width}mergeDefaults(t){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...t}}}const yn=typeof self>"u"?globalThis:self;var $n;const vn=(($n=yn.document)==null?void 0:$n.fonts)||yn.fonts;function ls(n){const{fontFamily:t,fontStyle:e,fontWeight:r,fontStretch:o,fontSize:i}=n;return[e,r,o,"".concat(i,"px"),t].join(" ")}const cs=Vt(0,0,0,0);class hs extends fo{constructor(e){super(e);h(this,"canvas");h(this,"context");h(this,"rendererBounds");typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let r=this.canvas.getContext("2d");r||(this.canvas=document.createElement("canvas"),r=this.canvas.getContext("2d")),this.context=r,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,r)=>{e.props.fontFamily=r,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,r)=>{e.props.fontWeight=r,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,r)=>{e.props.fontStyle=r,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,r)=>{e.props.fontStretch=r,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontSize:(e,r)=>{e.props.fontSize=r,e.fontInfo=void 0,this.invalidateLayoutCache(e)},text:(e,r)=>{e.props.text=r,this.invalidateLayoutCache(e)},textAlign:(e,r)=>{e.props.textAlign=r,this.invalidateLayoutCache(e)},color:(e,r)=>{e.props.color=r,this.invalidateLayoutCache(e)},x:(e,r)=>{e.props.x=r,this.invalidateVisibleWindowCache(e)},y:(e,r)=>{e.props.y=r,this.invalidateVisibleWindowCache(e)},contain:(e,r)=>{e.props.contain=r,this.invalidateLayoutCache(e)},width:(e,r)=>{e.props.width=r,this.invalidateLayoutCache(e)},height:(e,r)=>{e.props.height=r,this.invalidateLayoutCache(e)},offsetY:(e,r)=>{e.props.offsetY=r,this.invalidateLayoutCache(e)},scrollY:(e,r)=>{e.props.scrollY=r},letterSpacing:(e,r)=>{e.props.letterSpacing=r,this.invalidateLayoutCache(e)},lineHeight:(e,r)=>{e.props.lineHeight=r,this.invalidateLayoutCache(e)},maxLines:(e,r)=>{e.props.maxLines=r,this.invalidateLayoutCache(e)},textBaseline:(e,r)=>{e.props.textBaseline=r,this.invalidateLayoutCache(e)},verticalAlign:(e,r)=>{e.props.verticalAlign=r,this.invalidateLayoutCache(e)},overflowSuffix:(e,r)=>{e.props.overflowSuffix=r,this.invalidateLayoutCache(e)}}}canRenderFont(e){return!0}isFontFaceSupported(e){return e instanceof Ho}addFontFace(e){vn.add(e.fontFace)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new We,canvasPages:void 0,lightning2TextRenderer:new as(this.canvas,this.context),renderWindow:void 0,visibleWindow:{x1:0,y1:0,x2:0,y2:0,valid:!1},renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,fontFaceLoadedHandler:void 0,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(e){if(e.status==="initialState"&&this.setStatus(e,"loading"),!e.fontInfo){const p=ls(e.props);if(e.fontInfo={cssString:p,loaded:!1},!e.fontInfo.loaded){vn.load(p).then(this.onFontLoaded.bind(this,e,p)).catch(this.onFontLoadError.bind(this,e,p));return}}if(!e.fontInfo.loaded)return;if(!e.renderInfo){const p=e.props.maxLines,x=e.props.contain==="both"?Math.floor((e.props.height-e.props.offsetY)/e.props.lineHeight):0,T=x>0&&p>0?Math.min(x,p):Math.max(x,p);e.lightning2TextRenderer.settings={text:e.props.text,textAlign:e.props.textAlign,fontFace:e.props.fontFamily,fontSize:e.props.fontSize,fontStyle:[e.props.fontStretch,e.props.fontStyle,e.props.fontWeight].join(" "),textColor:Te(e.props.color),offsetY:e.props.fontSize+e.props.offsetY,wordWrap:e.props.contain!=="none",wordWrapWidth:e.props.contain==="none"?void 0:e.props.width,letterSpacing:e.props.letterSpacing,lineHeight:e.props.lineHeight,maxLines:T,textBaseline:e.props.textBaseline,verticalAlign:e.props.verticalAlign,overflowSuffix:e.props.overflowSuffix},e.renderInfo=e.lightning2TextRenderer.calculateRenderInfo(),e.textH=e.renderInfo.lineHeight*e.renderInfo.lines.length,e.textW=e.renderInfo.width,e.renderWindow=void 0}const{x:r,y:o,width:i,height:s,scrollY:a,contain:l}=e.props,{visibleWindow:d}=e;let{renderWindow:u,canvasPages:f}=e;if(!d.valid){const p=Vt(r,o,l!=="none"?r+i:1/0,l==="both"?o+s:1/0,cs);yi(this.rendererBounds,p,d),d.valid=!0}const m=d.y2-d.y1,y=Math.ceil(m/e.renderInfo.lineHeight);if(m===0){f=void 0,u=void 0,this.setStatus(e,"loaded");return}else if(u&&f){const p=r+u.x1,x=o-a+u.y1,T=r+u.x2,w=o-a+u.y2;if(p<=d.x1&&T>=d.x2&&x<=d.y1&&w>=d.y2){this.setStatus(e,"loaded");return}w<d.y2?(u.y1+=y*e.renderInfo.lineHeight,u.y2+=y*e.renderInfo.lineHeight,f.push(f.shift()),f[2].lineNumStart=f[1].lineNumStart+y,f[2].lineNumEnd=f[2].lineNumStart+y,f[2].valid=!1):x>d.y1&&(u.y1-=y*e.renderInfo.lineHeight,u.y2-=y*e.renderInfo.lineHeight,f.unshift(f.pop()),f[0].lineNumStart=f[1].lineNumStart-y,f[0].lineNumEnd=f[0].lineNumStart+y,f[0].valid=!1)}else{const p=e.renderInfo.lineHeight*y,x=Math.ceil(a/p),T=x*y,w=T-y,S=T+y;f=[{texture:f==null?void 0:f[0].texture,lineNumStart:w,lineNumEnd:w+y,valid:!1},{texture:f==null?void 0:f[1].texture,lineNumStart:T,lineNumEnd:T+y,valid:!1},{texture:f==null?void 0:f[2].texture,lineNumStart:S,lineNumEnd:S+y,valid:!1}],e.canvasPages=f;const A=x*p;u={x1:0,y1:A-p,x2:i,y2:A+p*2}}e.renderWindow=u,performance.now();for(const p of f)if(!p.valid){if(p.lineNumStart<0){p.texture=this.stage.txManager.loadTexture("ImageTexture",{src:""}),p.valid=!0;continue}e.lightning2TextRenderer.draw(e.renderInfo,{lines:e.renderInfo.lines.slice(p.lineNumStart,p.lineNumEnd),lineWidths:e.renderInfo.lineWidths.slice(p.lineNumStart,p.lineNumEnd)}),this.canvas.width===0||this.canvas.height===0||(p.texture=this.stage.txManager.loadTexture("ImageTexture",{src:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)},{preload:!0})),p.valid=!0}this.setStatus(e,"loaded")}renderQuads(e,r,o,i){var _,E,R,B,L,P,U,k,F,X,se,G;const{stage:s}=this,{canvasPages:a,textW:l=0,textH:d=0,renderWindow:u}=e;if(!a||!u)return;const{x:f,y:m,scrollY:y,contain:p,width:x,height:T}=e.props,w={x:f,y:m,width:p!=="none"?x:l,height:p==="both"?T:d};Vr({x:0,y:0,width:s.options.appWidth,height:s.options.appHeight},w);const A=(u.y2-u.y1)/3,{zIndex:v,color:C}=e.props,I=i*xi(C),b=mt(4294967295,I);a[0].valid&&this.stage.renderer.addQuad({alpha:I,clippingRect:o,colorBl:b,colorBr:b,colorTl:b,colorTr:b,width:((E=(_=a[0].texture)==null?void 0:_.dimensions)==null?void 0:E.width)||0,height:((B=(R=a[0].texture)==null?void 0:R.dimensions)==null?void 0:B.height)||0,texture:a[0].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:v,tx:r.tx,ty:r.ty-y+u.y1,ta:r.ta,tb:r.tb,tc:r.tc,td:r.td}),a[1].valid&&this.stage.renderer.addQuad({alpha:I,clippingRect:o,colorBl:b,colorBr:b,colorTl:b,colorTr:b,width:((P=(L=a[1].texture)==null?void 0:L.dimensions)==null?void 0:P.width)||0,height:((k=(U=a[1].texture)==null?void 0:U.dimensions)==null?void 0:k.height)||0,texture:a[1].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:v,tx:r.tx,ty:r.ty-y+u.y1+A,ta:r.ta,tb:r.tb,tc:r.tc,td:r.td}),a[2].valid&&this.stage.renderer.addQuad({alpha:I,clippingRect:o,colorBl:b,colorBr:b,colorTl:b,colorTr:b,width:((X=(F=a[2].texture)==null?void 0:F.dimensions)==null?void 0:X.width)||0,height:((G=(se=a[2].texture)==null?void 0:se.dimensions)==null?void 0:G.height)||0,texture:a[2].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:v,tx:r.tx,ty:r.ty-y+u.y1+A+A,ta:r.ta,tb:r.tb,tc:r.tc,td:r.td})}invalidateVisibleWindowCache(e){e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}invalidateLayoutCache(e){e.renderInfo=void 0,e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}onFontLoaded(e,r){var o;r!==((o=e.fontInfo)==null?void 0:o.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,this.scheduleUpdateState(e))}onFontLoadError(e,r,o){var i;r!==((i=e.fontInfo)==null?void 0:i.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,console.error("CanvasTextRenderer: Error loading font '".concat(e.fontInfo.cssString,"'"),o),this.scheduleUpdateState(e))}}const us=2e6;class ds extends We{constructor(e){super();h(this,"options");h(this,"animationManager");h(this,"txManager");h(this,"fontManager");h(this,"textRenderers");h(this,"shManager");h(this,"renderer");h(this,"root");h(this,"deltaTime",0);h(this,"lastFrameTime",0);h(this,"currentFrameTime",0);h(this,"fpsNumFrames",0);h(this,"fpsElapsedTime",0);h(this,"renderRequested",!1);h(this,"contextSpy",null);this.options=e;const{canvas:r,clearColor:o,rootId:i,debug:s,appWidth:a,appHeight:l,enableContextSpy:d,numImageWorkers:u}=e;this.txManager=new Ki(u),this.shManager=new Ui,this.animationManager=new $i,this.contextSpy=d?new zi:null,s!=null&&s.monitorTextureCache&&setInterval(()=>{this.txManager;const m=this.txManager.getDebugInfo();console.log("Texture ID Cache Size: ",m.idCacheSize),console.log("Texture Key Cache Size: ",m.keyCacheSize)},1e3),this.renderer=new Yi({stage:this,canvas:r,pixelRatio:e.devicePhysicalPixelRatio*e.deviceLogicalPixelRatio,clearColor:o!=null?o:4278190080,bufferMemory:us,txManager:this.txManager,shManager:this.shManager,contextSpy:this.contextSpy}),this.txManager.renderer=this.renderer,this.textRenderers={canvas:new hs(this),sdf:new ss(this)},this.fontManager=new uo(this.textRenderers);const f=new Kr(this,{id:i,x:0,y:0,width:a,height:l,alpha:1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null});this.root=f,Ti(this)}updateAnimations(){const{animationManager:e}=this;this.root&&(this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=_i(),this.deltaTime=this.lastFrameTime?this.currentFrameTime-this.lastFrameTime:100/6,this.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime}),e.update(this.deltaTime))}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested}drawFrame(){var i,s,a;const{renderer:e,renderRequested:r}=this;this.root.updateType!==0&&this.root.update(this.deltaTime,this.root.clippingRect),e==null||e.reset(),this.addQuads(this.root),e==null||e.render(),r&&(this.renderRequested=!1);const{fpsUpdateInterval:o}=this.options;if(o&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=o)){const l=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.emit("fpsUpdate",{fps:l,contextSpyData:(s=(i=this.contextSpy)==null?void 0:i.getData())!=null?s:null}),(a=this.contextSpy)==null||a.reset()}}addQuads(e){this.renderer&&e.globalTransform,e.isRenderable&&e.renderQuads(this.renderer);for(let r=0;r<e.children.length;r++){const o=e.children[r];o&&(o==null?void 0:o.worldAlpha)!==0&&this.addQuads(o)}}requestRender(){this.renderRequested=!0}resolveTextRenderer(e,r=null){let o=r,i=!1;if(o){const a=this.textRenderers[o];a?a.canRenderFont(e)||(console.warn("Cannot use override text renderer '".concat(o,"' for font"),e),o=null,i=!0):(console.warn("Text renderer override '".concat(o,"' not found.")),o=null,i=!0)}if(!o){for(const[a,l]of Object.entries(this.textRenderers))if(a!=="canvas"&&l.canRenderFont(e)){o=a;break}o||(o="canvas")}return i&&console.warn("Falling back to text renderer ".concat(String(o))),this.textRenderers[o]}}class fs extends Kr{constructor(e,r){super(e,r);h(this,"textRenderer");h(this,"trState");h(this,"_textRendererOverride",null);h(this,"onTextLoaded",()=>{const{contain:e}=this,r=this.trState.props.width,o=this.trState.props.height,i=this.trState.textW||0,s=this.trState.textH||0;e==="both"?(this.props.width=r,this.props.height=o):e==="width"?(this.props.width=r,this.props.height=s):e==="none"&&(this.props.width=i,this.props.height=s),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});h(this,"onTextFailed",(e,r)=>{this.emit("failed",{type:"text",error:r})});this._textRendererOverride=r.textRendererOverride;const{resolvedTextRenderer:o,textRendererState:i}=this.resolveTextRendererAndState({x:this.absX,y:this.absY,width:r.width,height:r.height,textAlign:r.textAlign,color:r.color,zIndex:r.zIndex,contain:r.contain,scrollable:r.scrollable,scrollY:r.scrollY,offsetY:r.offsetY,letterSpacing:r.letterSpacing,debug:r.debug,fontFamily:r.fontFamily,fontSize:r.fontSize,fontStretch:r.fontStretch,fontStyle:r.fontStyle,fontWeight:r.fontWeight,text:r.text,lineHeight:r.lineHeight,maxLines:r.maxLines,textBaseline:r.textBaseline,verticalAlign:r.verticalAlign,overflowSuffix:r.overflowSuffix},void 0);this.textRenderer=o,this.trState=i}get width(){return this.trState.props.width}set width(e){this.textRenderer.set.width(this.trState,e)}get height(){return this.trState.props.height}set height(e){this.textRenderer.set.height(this.trState,e)}get color(){return this.trState.props.color}set color(e){this.textRenderer.set.color(this.trState,e)}get text(){return this.trState.props.text}set text(e){this.textRenderer.set.text(this.trState,e),this.checkIsRenderable()}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(e){this._textRendererOverride=e;const{resolvedTextRenderer:r,textRendererState:o}=this.resolveTextRendererAndState(this.trState.props,this.trState);this.textRenderer=r,this.trState=o}get fontSize(){return this.trState.props.fontSize}set fontSize(e){this.textRenderer.set.fontSize(this.trState,e)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(e){this.textRenderer.set.fontFamily(this.trState,e)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(e){this.textRenderer.set.fontStretch(this.trState,e)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(e){this.textRenderer.set.fontStyle(this.trState,e)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(e){this.textRenderer.set.fontWeight(this.trState,e)}get textAlign(){return this.trState.props.textAlign}set textAlign(e){this.textRenderer.set.textAlign(this.trState,e)}get contain(){return this.trState.props.contain}set contain(e){this.textRenderer.set.contain(this.trState,e)}get scrollable(){return this.trState.props.scrollable}set scrollable(e){this.textRenderer.set.scrollable(this.trState,e)}get scrollY(){return this.trState.props.scrollY}set scrollY(e){this.textRenderer.set.scrollY(this.trState,e)}get offsetY(){return this.trState.props.offsetY}set offsetY(e){this.textRenderer.set.offsetY(this.trState,e)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(e){this.textRenderer.set.letterSpacing(this.trState,e)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(e){this.textRenderer.set.lineHeight&&this.textRenderer.set.lineHeight(this.trState,e)}get maxLines(){return this.trState.props.maxLines}set maxLines(e){this.textRenderer.set.maxLines&&this.textRenderer.set.maxLines(this.trState,e)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(e){this.textRenderer.set.textBaseline&&this.textRenderer.set.textBaseline(this.trState,e)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(e){this.textRenderer.set.verticalAlign&&this.textRenderer.set.verticalAlign(this.trState,e)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(e){this.textRenderer.set.overflowSuffix&&this.textRenderer.set.overflowSuffix(this.trState,e)}get debug(){return this.trState.props.debug}set debug(e){this.textRenderer.set.debug(this.trState,e)}update(e,r){super.update(e,r),this.globalTransform,this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkIsRenderable(){return super.checkIsRenderable()?!0:this.trState.props.text!==""?this.isRenderable=!0:this.isRenderable=!1}renderQuads(e){this.globalTransform,this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha)}resolveTextRendererAndState(e,r){const o=this.stage.resolveTextRenderer(e,this._textRendererOverride),i=o.createState(e);return r&&["loading","loaded","failed"].forEach(a=>{r.emitter.off(a)}),i.emitter.on("loaded",this.onTextLoaded),i.emitter.on("failed",this.onTextFailed),o.scheduleUpdateState(i),{resolvedTextRenderer:o,textRendererState:i}}}class gs extends Rr{constructor(t,e,r){super(t,e,r,new fs(r,{id:qr(),x:t.x,y:t.y,width:t.width,height:t.height,alpha:t.alpha,clipping:t.clipping,color:t.color,colorTop:t.colorTop,colorBottom:t.colorBottom,colorLeft:t.colorLeft,colorRight:t.colorRight,colorTl:t.colorTl,colorTr:t.colorTr,colorBl:t.colorBl,colorBr:t.colorBr,zIndex:t.zIndex,zIndexLocked:t.zIndexLocked,scaleX:t.scaleX,scaleY:t.scaleY,mountX:t.mountX,mountY:t.mountY,mount:t.mount,pivot:t.pivot,pivotX:t.pivotX,pivotY:t.pivotY,rotation:t.rotation,text:t.text,fontSize:t.fontSize,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontStretch:t.fontStretch,fontStyle:t.fontStyle,contain:t.contain,scrollable:t.scrollable,letterSpacing:t.letterSpacing,textAlign:t.textAlign,scrollY:t.scrollY,offsetY:t.offsetY,textRendererOverride:t.textRendererOverride,lineHeight:t.lineHeight,maxLines:t.maxLines,textBaseline:t.textBaseline,verticalAlign:t.verticalAlign,overflowSuffix:t.overflowSuffix,debug:t.debug,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null}))}get text(){return this.coreNode.text}set text(t){this.coreNode.text=t}get textRendererOverride(){return this.coreNode.textRendererOverride}set textRendererOverride(t){this.coreNode.textRendererOverride=t}get fontSize(){return this.coreNode.fontSize}set fontSize(t){this.coreNode.fontSize=t}get fontFamily(){return this.coreNode.fontFamily}set fontFamily(t){this.coreNode.fontFamily=t}get fontWeight(){return this.coreNode.fontWeight}set fontWeight(t){this.coreNode.fontWeight=t}get fontStretch(){return this.coreNode.fontStretch}set fontStretch(t){this.coreNode.fontStretch=t}get fontStyle(){return this.coreNode.fontStyle}set fontStyle(t){this.coreNode.fontStyle=t}get textAlign(){return this.coreNode.textAlign}set textAlign(t){this.coreNode.textAlign=t}get contain(){return this.coreNode.contain}set contain(t){this.coreNode.contain=t}get scrollable(){return this.coreNode.scrollable}set scrollable(t){this.coreNode.scrollable=t}get scrollY(){return this.coreNode.scrollY}set scrollY(t){this.coreNode.scrollY=t}get offsetY(){return this.coreNode.offsetY}set offsetY(t){this.coreNode.offsetY=t}get letterSpacing(){return this.coreNode.letterSpacing}set letterSpacing(t){this.coreNode.letterSpacing=t}get lineHeight(){return this.coreNode.lineHeight}set lineHeight(t){t&&(this.coreNode.lineHeight=t)}get maxLines(){return this.coreNode.maxLines}set maxLines(t){t&&(this.coreNode.maxLines=t)}get textBaseline(){return this.coreNode.textBaseline}set textBaseline(t){t&&(this.coreNode.textBaseline=t)}get verticalAlign(){return this.coreNode.verticalAlign}set verticalAlign(t){t&&(this.coreNode.verticalAlign=t)}get overflowSuffix(){return this.coreNode.overflowSuffix}set overflowSuffix(t){t&&(this.coreNode.overflowSuffix=t)}get debug(){return this.coreNode.debug}set debug(t){this.coreNode.debug=t}}const ps="modulepreload",ms=function(n){return"/solid-demo-app/"+n},An={},xs=function(t,e,r){let o=Promise.resolve();if(e&&e.length>0){const i=document.getElementsByTagName("link");o=Promise.all(e.map(s=>{if(s=ms(s),s in An)return;An[s]=!0;const a=s.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let f=i.length-1;f>=0;f--){const m=i[f];if(m.href===s&&(!a||m.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(s,'"]').concat(l)))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":ps,a||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),a)return new Promise((f,m)=>{u.addEventListener("load",f),u.addEventListener("error",()=>m(new Error("Unable to preload CSS for ".concat(s))))})}))}return o.then(()=>t()).catch(i=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i})};function ys(n){return n.prototype instanceof Go}async function vs(n,t){let e;try{console.log("Loading core extension",n),e=await xs(()=>import(n),__vite__mapDeps([]))}catch(o){console.error("The core extension module at '".concat(n,"' could not be loaded.")),console.error(o);return}if(!e.default){console.error("The core extension module at '".concat(n,"' does not have a default export."));return}const r=e.default;if(ys(r)){const o=new r;try{await o.run(t)}catch(i){console.error("The core extension at '".concat(n,"' threw an error.")),console.error(i)}}else console.error("The core extension at '".concat(n,"' does not extend CoreExtension."))}class As{constructor(){h(this,"root",null);h(this,"stage",null);h(this,"rendererMain",null)}async init(t,e,r){this.stage=new ds({rootId:qr(),appWidth:e.appWidth,appHeight:e.appHeight,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio,clearColor:e.clearColor,canvas:r,fpsUpdateInterval:e.fpsUpdateInterval,enableContextSpy:e.enableContextSpy,numImageWorkers:e.numImageWorkers,debug:{monitorTextureCache:!1}}),this.rendererMain=t,this.stage.root;const o=new Rr(t.resolveNodeDefaults({}),this.rendererMain,this.stage,this.stage.root);this.root=o,o.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,o)),this.onCreateNode(o),e.coreExtensionModule&&await vs(e.coreExtensionModule,this.stage),this.stage.on("fpsUpdate",(i,s)=>{this.onFpsUpdate(s)}),this.stage.on("frameTick",(i,s)=>{this.onFrameTick(s)})}createNode(t){this.rendererMain,this.stage;const e=new Rr(t,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}createTextNode(t){this.rendererMain,this.stage;const e=new gs(t,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}destroyNode(t){t.destroy()}releaseTexture(t){const{stage:e}=this;e.txManager.removeTextureIdFromCache(t)}getRootNode(){return this.root,this.root}onCreateNode(t){throw new Error("Method not implemented.")}onBeforeDestroyNode(t){throw new Error("Method not implemented.")}onFpsUpdate(t){throw new Error("Method not implemented.")}onFrameTick(t){throw new Error("Method not implemented.")}}let Ee,Zr;function Ss(n={}){const t=new As;return Ee=new fi(n,n.rootId||"app",t),Zr=Ee.createShader.bind(Ee),Ee}class ws extends Array{constructor(t){super(),this._parent=t}get selected(){return this[this._parent.selected||0]}get firstChild(){return this[0]}insert(t,e){if(e){const r=this.indexOf(e);this.splice(r,0,t)}else this.push(t);t.parent=this._parent,this._parent._isDirty=!0}remove(t){const e=this.indexOf(t);e>=0&&this.splice(e,1)}}const we={debug:!1,animationsEnabled:!0,animationSettings:{duration:250,easing:"ease-in-out"},fontSettings:{fontFamily:"Ubuntu",fontSize:100}};function bs(n,t,...e){}function Ue(n){return typeof n=="function"}function Lr(n){return Array.isArray(n)}function Ts(n){return typeof n=="string"}function _s(n){return typeof n=="number"}function Cs(n){return Number.isInteger(n)}function Es(n,t){for(const e of t)if(e in n)return!0;return!1}class Sn extends Array{constructor(t,e={}){return Lr(e)?super(...e):Ts(e)?super(e):super(...Object.entries(e).filter(([r,o])=>o).map(([r])=>r)),this.onChange=t,this}has(t){return this.indexOf(t)>=0}is(t){return this.indexOf(t)>=0}add(t){this.push(t),this.onChange()}toggle(t){this.has(t)?this.remove(t):this.add(t)}remove(t){const e=this.indexOf(t);e>=0&&(this.splice(e,1),this.onChange())}}function Rs(n){const t=[];for(let S=0;S<n.children.length;S++){const A=n.children[S];if(A.name!=="TextNode"){if(A.name==="text"&&!(A.width||A.height))return!1;t.push(A)}}const e=t.length,o=(n.flexDirection||"row")==="row",i=o?"width":"height",s=o?"height":"width",a=o?"marginLeft":"marginTop",l=o?"marginRight":"marginBottom",d=o?"x":"y",u=o?"y":"x",f=n[i]||0,m=n[s]||0,y=n.gap||0,p=n.justifyContent||"flexStart",x=n.alignItems;let T=0;["center","spaceBetween","spaceEvenly"].includes(p)&&(T=t.reduce((S,A)=>S+(A[i]||0),0));const w=m&&x?S=>{x==="flexStart"?S[u]=0:x==="center"?S[u]=(m-(S[s]||0))/2:x==="flexEnd"&&(S[u]=m-(S[s]||0))}:S=>S;if(p==="flexStart"){let S=0;if(t.forEach(A=>{A[d]=S+(A[a]||0),S+=(A[i]||0)+y+(A[a]||0)+(A[l]||0),w(A)}),n._autosized){const A=S-y;if(A!==n[i])return n[i]=A,!0}}else if(p==="flexEnd"){let S=f;for(let A=e-1;A>=0;A--){const v=t[A];v[d]=S-(v[i]||0)-(v[l]||0),S-=(v[i]||0)+y+(v[a]||0)+(v[l]||0),w(v)}}else if(p==="center"){let S=(f-(T+y*(e-1)))/2;t.forEach(A=>{A[d]=S,S+=(A[i]||0)+y,w(A)})}else if(p==="spaceBetween"){const S=(f-T)/(e-1);let A=0;t.forEach(v=>{v[d]=A,A+=(v[i]||0)+S,w(v)})}else if(p==="spaceEvenly"){const S=(f-T)/(e+1);let A=S;t.forEach(v=>{v[d]=A,A+=(v[i]||0)+S,w(v)})}return!1}const{animationSettings:Is}=we;function Bs(n){const t=[];for(const[e,r]of Object.entries(n))t.push({type:e,props:r});return Zr("DynamicShader",{effects:t})}function gt(n=""){return{set(t){_s(t)&&(t={width:t,color:255}),this.effects={...this.effects||{},["border".concat(n)]:t},this["_border".concat(n)]=t},get(){return this["_border".concat(n)]}}}const Ns=["alpha","color","colorTop","colorRight","colorLeft","colorBottom","colorTl","colorTr","colorBl","colorBr","height","fontSize","lineHeight","mount","mountX","mountY","pivot","pivotX","pivotY","rotation","scale","width","worldX","worldY","x","y","zIndex","zIndexLocked"],ks=["clipping","contain","fontFamily","fontStretch","fontStyle","fontWeight","letterSpacing","maxLines","offsetY","overflowSuffix","scrollable","scrollY","src","text","textAlign","textBaseline","textOverflow","texture","verticalAlign","wordWrap"];class ct extends Object{constructor(t){super(),this._animationQueue=[],this._animationRunning=!1,this.name=t,this.rendered=!1,this.autofocus=!1,this._renderProps={x:0,y:0},this.children=new ws(this);for(const e of Ns)Object.defineProperty(this,e,{get(){return this.lng&&this.lng[e]||this["_".concat(e)]},set(r){this["_".concat(e)]=r,this._sendToLightningAnimatable(e,r)}});for(const e of ks)Object.defineProperty(this,e,{get(){return this.lng&&this.lng[e]||this["_".concat(e)]},set(r){this["_".concat(e)]=r,this._sendToLightning(e,r)}});Object.defineProperties(this,{borderRadius:{set(e){this._borderRadius=e,this.effects={...this.effects||{},radius:{radius:e}}},get(){return this._borderRadius}},border:gt(),borderLeft:gt("Left"),borderRight:gt("Right"),borderTop:gt("Top"),borderBottom:gt("Bottom")}),Object.defineProperties(this,{linearGradient:{set(e={}){this._linearGradient=e,this.effects={...this.effects||{},linearGradient:e}},get(){return this._linearGradient}}})}get effects(){return this._effects}set effects(t){this._effects=t,this.shader=Bs(t)}get parent(){return this._parent}set parent(t){var e;this._parent=t,this.rendered&&this.lng&&(this.lng.parent=(e=t==null?void 0:t.lng)!=null?e:null)}get shader(){return this._shader}set shader(t){Lr(t)?this._shader=Zr(...t):this._shader=t,this._sendToLightning("shader",this._shader)}_sendToLightningAnimatable(t,e){if(this.lng){if(we.animationsEnabled&&this.transition&&(this.transition===!0||this.transition[t])){const r=this.transition===!0||this.transition[t]===!0?void 0:this.transition[t];return this.animate({[t]:e},r).start()}this.lng[t]=e}else this._renderProps[t]=e}_sendToLightning(t,e){this.rendered&&this.lng?this.lng[t]=e:this._renderProps[t]=e}animate(t,e){return this.lng,this.lng.animate(t,e||this.animationSettings)}chain(t,e){return this._animationRunning&&(this._animationQueue=[],this._animationRunning=!1),e?this._animationQueueSettings=e:this._animationQueueSettings||(this._animationQueueSettings=e||this.animationSettings),e=e||this._animationQueueSettings,this._animationQueue.push({props:t,animationSettings:e}),this}async start(){let t=this._animationQueue.shift();for(;t;)this._animationRunning=!0,await this.animate(t.props,t.animationSettings).start().waitUntilStopped(),t=this._animationQueue.shift();this._animationRunning=!1,this._animationQueueSettings=void 0}setFocus(){if(this.rendered){if(this.forwardFocus!==void 0)if(Ue(this.forwardFocus)){if(this.forwardFocus.call(this,this)!==!1)return}else{const t=typeof this.forwardFocus=="number"?this.forwardFocus:null;if(t!==null&&t<this.children.length){const e=this.children[t];e instanceof ct&&e.setFocus();return}}queueMicrotask(()=>Cr(this))}else this.autofocus=!0}isTextNode(){return this.name==="text"}_resizeOnTextLoad(){this.lng.on("loaded",(t,e)=>{if(e.type==="text"){const{dimensions:r}=e;if(r.width===this.width&&r.height===this.height)return;this.contain==="width"?this.height=r.height:(this.width=r.width,this.height=r.height),this.parent.updateLayout(this,r)}})}getText(){return this.children.map(t=>t.text).join("")}destroy(){this.lng&&Ee.destroyNode(this.lng)}set style(t){const e=Lr(t),r=e?t.filter(o=>o):[t];r.forEach(o=>{for(const i in o)this[i]===void 0&&(this[i]=o[i])}),this._style=e?Object.assign({},...r.reverse()):t}get style(){return this._style}get hasChildren(){return this.children.length>0}set states(t){this._states=new Sn(this._stateChanged.bind(this),t),this.rendered&&this._stateChanged()}get states(){return this._states=this._states||new Sn(this._stateChanged.bind(this)),this._states}get animationSettings(){return this._animationSettings||Is}set animationSettings(t){this._animationSettings=t}updateLayout(t,e){var r;this.hasChildren&&(Ue(this.onBeforeLayout)&&this.onBeforeLayout.call(this,t,e),this.display==="flex"&&Rs(this)&&((r=this.parent)==null||r.updateLayout()),Ue(this.onLayout)&&this.onLayout.call(this,t,e))}_stateChanged(){var e;if(bs("State Changed: ",this,this.states),this.forwardStates){const r=this.states.slice();this.children.forEach(o=>o.states=r)}const t=((e=we.stateMapperHook)==null?void 0:e.call(we,this,this.states))||this.states;if(this._undoStates||this.style&&Es(this.style,t)){this._undoStates=this._undoStates||{};let r={};for(const[i,s]of Object.entries(this._undoStates))t.includes(i)||(r={...r,...s});const o=t.reduce((i,s)=>{const a=this.style[s];return a&&(i={...i,...a},this._undoStates&&!this._undoStates[s]&&(this._undoStates[s]={},Object.keys(a).forEach(l=>{this._undoStates[s][l]=this[l]}))),i},{});o.transition!==void 0&&(this.transition=o.transition),Object.assign(this,{...r,...o})}}render(){const t=this,e=this.parent;e._isDirty&&(e.updateLayout(),e._isDirty=!1),t.updateLayout(),this.states.length&&this._stateChanged();let r=t._renderProps;e.lng&&(r.parent=e.lng),t.isTextNode()?(r={...we.fontSettings,...r,text:t.getText()},r.contain&&(r.width||(r.width=(e.width||0)-(r.x||0)-(r.marginRight||0),t._width=r.width,t._autosized=!0),r.contain==="both"&&!r.height&&!r.maxLines&&(r.height=(e.height||0)-(r.y||0)-(r.marginBottom||0),t._height=r.height,t._autosized=!0)),t.lng=Ee.createTextNode(r),Ue(this.onCreate)&&this.onCreate.call(this,t),Ue(t.onLoad)&&t.lng.on("loaded",t.onLoad),(!t.width||!t.height)&&(t._autosized=!0,t._resizeOnTextLoad())):(r.src||r.texture||(isNaN(r.width)&&(r.width=(e.width||0)-(r.x||0),t._width=r.width,t._autosized=!0),isNaN(r.height)&&(r.height=(e.height||0)-(r.y||0),t._height=r.height,t._autosized=!0),r.color||(t._color=r.color=0)),t.lng=Ee.createNode(r),t.onFail&&t.lng.on("failed",t.onFail),t.onLoad&&t.lng.on("loaded",t.onLoad),Ue(this.onCreate)&&this.onCreate.call(this,t)),t.rendered=!0,t.autofocus&&t.setFocus(),delete this._renderProps}}const M=n=>(()=>{var t=dt("text");return cr(t,n,!1),t})(),D=n=>(()=>{var t=dt("node");return cr(t,n,!1),t})();function go(n){n instanceof ct&&(n.render(),n.name!=="text"&&n.children.forEach(t=>go(t)))}const Ms=(n={})=>{const t=Ss(n.options),e=t.init();function r(o){o.renderer=t,Ue(n.ref)?n.ref(o):n.ref=o,e.then(()=>{o.lng=t.root,o.children.forEach(go),Ue(n.onFirstRender)&&n.onFirstRender(o)}).catch(console.error)}return(()=>{var o=dt("canvas"),i=r;return typeof i=="function"?en(i,o):r=o,Jr(o,()=>n.children),o})()};function Ls({createElement:n,createTextNode:t,isTextNode:e,replaceText:r,insertNode:o,removeNode:i,setProperty:s,getParentNode:a,getFirstChild:l,getNextSibling:d}){function u(S,A,v,C){if(v!==void 0&&!C&&(C=[]),typeof A!="function")return f(S,A,C,v);Ce(I=>f(S,A(),I,v),C)}function f(S,A,v,C,I){for(;typeof v=="function";)v=v();if(A===v)return v;const b=typeof A,_=C!==void 0;if(b==="string"||b==="number")if(b==="number"&&(A=A.toString()),_){let E=v[0];E&&e(E)?r(E,A):E=t(A),v=p(S,v,C,E)}else v!==""&&typeof v=="string"?r(l(S),v=A):(p(S,v,C,t(A)),v=A);else if(A==null||b==="boolean")v=p(S,v,C);else{if(b==="function")return Ce(()=>{let E=A();for(;typeof E=="function";)E=E();v=f(S,E,v,C)}),()=>v;if(Array.isArray(A)){const E=[];if(m(E,A,I))return Ce(()=>v=f(S,E,v,C,!0)),()=>v;if(E.length===0){const R=p(S,v,C);if(_)return v=R}else Array.isArray(v)?v.length===0?x(S,E,C):y(S,v,E):v==null||v===""?x(S,E):y(S,_&&v||[l(S)],E);v=E}else{if(Array.isArray(v)){if(_)return v=p(S,v,C,A);p(S,v,null,A)}else v==null||v===""||!l(S)?o(S,A):T(S,A,l(S));v=A}}return v}function m(S,A,v){let C=!1;for(let I=0,b=A.length;I<b;I++){let _=A[I],E;if(!(_==null||_===!0||_===!1))if(Array.isArray(_))C=m(S,_)||C;else if((E=typeof _)=="string"||E==="number")S.push(t(_));else if(E==="function")if(v){for(;typeof _=="function";)_=_();C=m(S,Array.isArray(_)?_:[_])||C}else S.push(_),C=!0;else S.push(_)}return C}function y(S,A,v){let C=v.length,I=A.length,b=C,_=0,E=0,R=d(A[I-1]),B=null;for(;_<I||E<b;){if(A[_]===v[E]){_++,E++;continue}for(;A[I-1]===v[b-1];)I--,b--;if(I===_){const L=b<C?E?d(v[E-1]):v[b-E]:R;for(;E<b;)o(S,v[E++],L)}else if(b===E)for(;_<I;)(!B||!B.has(A[_]))&&i(S,A[_]),_++;else if(A[_]===v[b-1]&&v[E]===A[I-1]){const L=d(A[--I]);o(S,v[E++],d(A[_++])),o(S,v[--b],L),A[I]=v[b]}else{if(!B){B=new Map;let P=E;for(;P<b;)B.set(v[P],P++)}const L=B.get(A[_]);if(L!=null)if(E<L&&L<b){let P=_,U=1,k;for(;++P<I&&P<b&&!((k=B.get(A[P]))==null||k!==L+U);)U++;if(U>L-E){const F=A[_];for(;E<L;)o(S,v[E++],F)}else T(S,v[E++],A[_++])}else _++;else i(S,A[_++])}}}function p(S,A,v,C){if(v===void 0){let b;for(;b=l(S);)i(S,b);return C&&o(S,C),""}const I=C||t("");if(A.length){let b=!1;for(let _=A.length-1;_>=0;_--){const E=A[_];if(I!==E){const R=a(E)===S;!b&&!_?R?T(S,I,E):o(S,I,v):R&&i(S,E)}else b=!0}}else o(S,I,v);return[I]}function x(S,A,v){for(let C=0,I=A.length;C<I;C++)o(S,A[C],v)}function T(S,A,v){o(S,A,v),i(S,v)}function w(S,A,v={},C){return A||(A={}),C||Ce(()=>v.children=f(S,A.children,v.children)),Ce(()=>A.ref&&A.ref(S)),Ce(()=>{for(const I in A){if(I==="children"||I==="ref")continue;const b=A[I];b!==v[I]&&(s(S,I,b,v[I]),v[I]=b)}}),v}return{render(S,A){let v;return at(C=>{v=C,u(A,S())}),v},insert:u,spread(S,A,v){typeof A=="function"?Ce(C=>w(S,A(),C,v)):w(S,A,void 0,v)},createElement:n,createTextNode:t,insertNode:o,setProp(S,A,v,C){return s(S,A,v,C),v},mergeProps:Qr,effect:Ce,memo:re,createComponent:ro,use(S,A,v){return ce(()=>S(A,v))}}}function Fs(n){const t=Ls(n);return t.mergeProps=Qr,t}const Ps={createElement(n){const t=new ct(n);return Ee.root&&ht(()=>t.render()),t},createTextNode(n){return{name:"TextNode",text:n,parent:void 0}},replaceText(n,t){n.text=t;const e=n.parent;e.text=e.getText()},setProperty(n,t,e=!0){n[t]=e},insertNode(n,t,e){n&&(n.children.insert(t,e),t.name==="TextNode"&&n.isTextNode()&&(n.text=n.getText()))},isTextNode(n){return n.isTextNode()},removeNode(n,t){n.children.remove(t),t instanceof ct&&t.destroy()},getParentNode(n){return n.parent},getFirstChild(n){return n.children[0]},getNextSibling(n){if(n.parent){const t=n.parent.children||[],e=t.indexOf(n)+1;if(e<t.length)return t[e]}}},po=Fs(Ps),Ds=po.render,{effect:Mc,memo:lr,createComponent:c,createElement:dt,createTextNode:Lc,insertNode:Fc,insert:Jr,spread:cr,setProp:Us,mergeProps:H,use:en}=po;function z(n=""){return Cs(n)?n:typeof n=="string"?n.startsWith("#")?+(n.replace("#","0x")+(n.length===7?"ff":"")):n.startsWith("0x")?Number(n):+("0x"+(n.length===6?n+"ff":n)):0}const wn="_$DX_DELEGATE";function zs(n,t=window.document){const e=t[wn]||(t[wn]=new Set);for(let r=0,o=n.length;r<o;r++){const i=n[r];e.has(i)||(e.add(i),t.addEventListener(i,Os))}}function Os(n){const t="$$".concat(n.type);let e=n.composedPath&&n.composedPath()[0]||n.target;for(n.target!==e&&Object.defineProperty(n,"target",{configurable:!0,value:e}),Object.defineProperty(n,"currentTarget",{configurable:!0,get(){return e||document}});e;){const r=e[t];if(r&&!e.disabled){const o=e["".concat(t,"Data")];if(o!==void 0?r.call(e,o,n):r.call(e,n),n.cancelBubble)return}e=e._$host||e.parentNode||e.host}}const Ws=!1;function mo(){let n=new Set;function t(o){return n.add(o),()=>n.delete(o)}let e=!1;function r(o,i){if(e)return!(e=!1);const s={to:o,options:i,defaultPrevented:!1,preventDefault:()=>s.defaultPrevented=!0};for(const a of n)a.listener({...s,from:a.location,retry:l=>{l&&(e=!0),a.navigate(o,{...i,resolve:!1})}});return!s.defaultPrevented}return{subscribe:t,confirm:r}}let Fr;function tn(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Fr=window.history.state._depth}tn();function Xs(n){return{...n,_depth:window.history.state&&window.history.state._depth}}function Ys(n,t){let e=!1;return()=>{const r=Fr;tn();const o=r==null?null:Fr-r;if(e){e=!1;return}o&&t(o)?(e=!0,window.history.go(-o)):n()}}const $s=/^(?:[a-z0-9]+:)?\/\//i,Hs=/^\/+|(\/)\/+$/g,xo="http://sr";function St(n,t=!1){const e=n.replace(Hs,"$1");return e?t||/^[?#]/.test(e)?e:"/"+e:""}function Yt(n,t,e){if($s.test(t))return;const r=St(n),o=e&&St(e);let i="";return!o||t.startsWith("/")?i=r:o.toLowerCase().indexOf(r.toLowerCase())!==0?i=r+o:i=o,(i||"/")+St(t,!i)}function Gs(n,t){if(n==null)throw new Error(t);return n}function Qs(n,t){return St(n).replace(/\/*(\*.*)?$/g,"")+St(t)}function yo(n){const t={};return n.searchParams.forEach((e,r)=>{t[r]=e}),t}function js(n,t,e){const[r,o]=n.split("/*",2),i=r.split("/").filter(Boolean),s=i.length;return a=>{const l=a.split("/").filter(Boolean),d=l.length-s;if(d<0||d>0&&o===void 0&&!t)return null;const u={path:s?"":"/",params:{}},f=m=>e===void 0?void 0:e[m];for(let m=0;m<s;m++){const y=i[m],p=l[m],x=y[0]===":",T=x?y.slice(1):y;if(x&&vr(p,f(T)))u.params[T]=p;else if(x||!vr(p,y))return null;u.path+="/".concat(p)}if(o){const m=d?l.slice(-d).join("/"):"";if(vr(m,f(o)))u.params[o]=m;else return null}return u}}function vr(n,t){const e=r=>r.localeCompare(n,void 0,{sensitivity:"base"})===0;return t===void 0?!0:typeof t=="string"?e(t):typeof t=="function"?t(n):Array.isArray(t)?t.some(e):t instanceof RegExp?t.test(n):!1}function Vs(n){const[t,e]=n.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((o,i)=>o+(i.startsWith(":")?2:3),r.length-(e===void 0?0:1))}function vo(n){const t=new Map,e=It();return new Proxy({},{get(r,o){return t.has(o)||Vn(e,()=>t.set(o,re(()=>n()[o]))),t.get(o)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(n())}})}function Ao(n){let t=/(\/?\:[^\/]+)\?/.exec(n);if(!t)return[n];let e=n.slice(0,t.index),r=n.slice(t.index+t[0].length);const o=[e,e+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)o.push(e+=t[1]),r=r.slice(t[0].length);return Ao(r).reduce((i,s)=>[...i,...o.map(a=>a+s)],[])}const Ks=100,So=Kn(),hr=Kn(),wo=()=>Gs($r(So),"Make sure your app is wrapped in a <Router />"),qs=()=>$r(hr)||wo().base,ft=()=>wo().navigatorFactory(),rn=()=>qs().params;function Zs(n,t=""){const{component:e,load:r,children:o,info:i}=n,s=!o||Array.isArray(o)&&!o.length,a={key:n,component:e,load:r,info:i};return bo(n.path).reduce((l,d)=>{for(const u of Ao(d)){const f=Qs(t,u);let m=s?f:f.split("/*",1)[0];m=m.split("/").map(y=>y.startsWith(":")||y.startsWith("*")?y:encodeURIComponent(y)).join("/"),l.push({...a,originalPath:u,pattern:m,matcher:js(m,!s,n.matchFilters)})}return l},[])}function Js(n,t=0){return{routes:n,score:Vs(n[n.length-1])*1e4-t,matcher(e){const r=[];for(let o=n.length-1;o>=0;o--){const i=n[o],s=i.matcher(e);if(!s)return null;r.unshift({...s,route:i})}return r}}}function bo(n){return Array.isArray(n)?n:[n]}function To(n,t="",e=[],r=[]){const o=bo(n);for(let i=0,s=o.length;i<s;i++){const a=o[i];if(a&&typeof a=="object"){a.hasOwnProperty("path")||(a.path="");const l=Zs(a,t);for(const d of l){e.push(d);const u=Array.isArray(a.children)&&a.children.length===0;if(a.children&&!u)To(a.children,d.pattern,e,r);else{const f=Js([...e],r.length);r.push(f)}e.pop()}}}return e.length?r:r.sort((i,s)=>s.score-i.score)}function _o(n,t){for(let e=0,r=n.length;e<r;e++){const o=n[e].matcher(t);if(o)return o}return[]}function ea(n,t){const e=new URL(xo),r=re(l=>{const d=n();try{return new URL(d,e)}catch(u){return console.error("Invalid path ".concat(d)),l}},e,{equals:(l,d)=>l.href===d.href}),o=re(()=>r().pathname),i=re(()=>r().search,!0),s=re(()=>r().hash),a=()=>"";return{get pathname(){return o()},get search(){return i()},get hash(){return s()},get state(){return t()},get key(){return a()},query:vo(Xe(i,()=>yo(r())))}}let De;function ta(n,t,e,r={}){const{signal:[o,i],utils:s={}}=n,a=s.parsePath||(R=>R),l=s.renderPath||(R=>R),d=s.beforeLeave||mo(),u=Yt("",r.base||"");if(u===void 0)throw new Error("".concat(u," is not a valid base path"));u&&!o().value&&i({value:u,replace:!0,scroll:!1});const[f,m]=Y(!1),y=async R=>{m(!0);try{await qo(R)}finally{m(!1)}},[p,x]=Y(o().value),[T,w]=Y(o().state),S=ea(p,T),A=[],v=Y([]),C={pattern:u,params:{},path:()=>u,outlet:()=>null,resolvePath(R){return Yt(u,R)}};return Ce(()=>{const{value:R,state:B}=o();ce(()=>{R!==p()&&y(()=>{De="native",x(R),w(B),v[1]([])}).then(()=>{De=void 0})})}),{base:C,location:S,isRouting:f,renderPath:l,parsePath:a,navigatorFactory:b,beforeLeave:d,preloadRoute:E,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:v};function I(R,B,L){ce(()=>{if(typeof B=="number"){B&&(s.go?s.go(B):console.warn("Router integration does not support relative routing"));return}const{replace:P,resolve:U,scroll:k,state:F}={replace:!1,resolve:!0,scroll:!0,...L},X=U?R.resolvePath(B):Yt("",B);if(X===void 0)throw new Error("Path '".concat(B,"' is not a routable path"));if(A.length>=Ks)throw new Error("Too many redirects");const se=p();if((X!==se||F!==T())&&!Ws){if(d.confirm(X,L)){const G=A.push({value:se,replace:P,scroll:k,state:T()});y(()=>{De="navigate",x(X),w(F),v[1]([])}).then(()=>{A.length===G&&(De=void 0,_({value:X,state:F}))})}}})}function b(R){return R=R||$r(hr)||C,(B,L)=>I(R,B,L)}function _(R){const B=A[0];B&&((R.value!==B.value||R.state!==B.state)&&i({...R,replace:B.replace,scroll:B.scroll}),A.length=0)}function E(R,B){const L=_o(e(),R.pathname),P=De;De="preload";for(let U in L){const{route:k,params:F}=L[U];k.component&&k.component.preload&&k.component.preload();const{load:X}=k;B&&X&&Vn(t(),()=>X({params:F,location:{pathname:R.pathname,search:R.search,hash:R.hash,query:yo(R),state:null,key:""},intent:"preload"}))}De=P}}function ra(n,t,e,r,o){const{base:i,location:s}=n,{pattern:a,component:l,load:d}=r().route,u=re(()=>r().path);l&&l.preload&&l.preload();const f=d?d({params:o,location:s,intent:De||"initial"}):void 0;return{parent:t,pattern:a,path:u,params:o,outlet:()=>l?ro(l,{params:o,location:s,data:f,get children(){return e()}}):e(),resolvePath(y){return Yt(i.path(),y,u())}}}const na=n=>t=>{const{base:e}=t,r=Hr(()=>t.children),o=re(()=>To(t.root?{component:t.root,load:t.rootLoad,children:r()}:r(),t.base||""));let i;const s=ta(n,()=>i,o,{base:e,singleFlight:t.singleFlight});return n.create&&n.create(s),c(So.Provider,{value:s,get children(){return[lr(()=>(i=It())&&null),c(oa,{routerState:s,get branches(){return o()}})]}})};function oa(n){const t=re(()=>_o(n.branches,n.routerState.location.pathname)),e=vo(()=>{const s=t(),a={};for(let l=0;l<s.length;l++)Object.assign(a,s[l].params);return a}),r=[];let o;const i=re(Xe(t,(s,a,l)=>{let d=a&&s.length===a.length;const u=[];for(let f=0,m=s.length;f<m;f++){const y=a&&a[f],p=s[f];l&&y&&p.route.key===y.route.key?u[f]=l[f]:(d=!1,r[f]&&r[f](),at(x=>{r[f]=x,u[f]=ra(n.routerState,u[f-1]||n.routerState.base,ia(()=>i()[f+1]),()=>t()[f],e)}))}return r.splice(s.length).forEach(f=>f()),l&&d?l:(o=u[0],u)}));return c(Me,{get when(){return i()&&o},keyed:!0,children:s=>c(hr.Provider,{value:s,get children(){return s.outlet()}})})}const ia=n=>()=>c(Me,{get when(){return n()},keyed:!0,children:t=>c(hr.Provider,{value:t,get children(){return t.outlet()}})}),pe=n=>{const t=Hr(()=>n.children);return Qr(n,{get children(){return t()}})};function sa([n,t],e,r){return[e?()=>e(n()):n,r?o=>t(r(o)):t]}function aa(n){if(n==="#")return null;try{return document.querySelector(n)}catch(t){return null}}function la(n){let t=!1;const e=o=>typeof o=="string"?{value:o}:o,r=sa(Y(e(n.get()),{equals:(o,i)=>o.value===i.value}),void 0,o=>(!t&&n.set(o),o));return n.init&&Oe(n.init((o=n.get())=>{t=!0,r[1](e(o)),t=!1})),na({signal:r,create:n.create,utils:n.utils})}function ca(n,t,e){return n.addEventListener(t,e),()=>n.removeEventListener(t,e)}function ha(n,t){const e=aa("#".concat(n));e?e.scrollIntoView():t&&window.scrollTo(0,0)}const ua=new Map;function da(n=!0,t=!1,e="/_server"){return r=>{const o=r.base.path(),i=r.navigatorFactory(r.base);let s={};function a(p){return p.namespaceURI==="http://www.w3.org/2000/svg"}function l(p){if(p.defaultPrevented||p.button!==0||p.metaKey||p.altKey||p.ctrlKey||p.shiftKey)return;const x=p.composedPath().find(C=>C instanceof Node&&C.nodeName.toUpperCase()==="A");if(!x||t&&!x.hasAttribute("link"))return;const T=a(x),w=T?x.href.baseVal:x.href;if((T?x.target.baseVal:x.target)||!w&&!x.hasAttribute("state"))return;const A=(x.getAttribute("rel")||"").split(/\s+/);if(x.hasAttribute("download")||A&&A.includes("external"))return;const v=T?new URL(w,document.baseURI):new URL(w);if(!(v.origin!==window.location.origin||o&&v.pathname&&!v.pathname.toLowerCase().startsWith(o.toLowerCase())))return[x,v]}function d(p){const x=l(p);if(!x)return;const[T,w]=x,S=r.parsePath(w.pathname+w.search+w.hash),A=T.getAttribute("state");p.preventDefault(),i(S,{resolve:!1,replace:T.hasAttribute("replace"),scroll:!T.hasAttribute("noscroll"),state:A&&JSON.parse(A)})}function u(p){const x=l(p);if(!x)return;const[T,w]=x;s[w.pathname]||r.preloadRoute(w,T.getAttribute("preload")!=="false")}function f(p){const x=l(p);if(!x)return;const[T,w]=x;s[w.pathname]||(s[w.pathname]=setTimeout(()=>{r.preloadRoute(w,T.getAttribute("preload")!=="false"),delete s[w.pathname]},200))}function m(p){const x=l(p);if(!x)return;const[,T]=x;s[T.pathname]&&(clearTimeout(s[T.pathname]),delete s[T.pathname])}function y(p){let x=p.submitter&&p.submitter.hasAttribute("formaction")?p.submitter.getAttribute("formaction"):p.target.getAttribute("action");if(!x)return;if(!x.startsWith("https://action/")){const w=new URL(x,xo);if(x=r.parsePath(w.pathname+w.search),!x.startsWith(e))return}if(p.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const T=ua.get(x);if(T){p.preventDefault();const w=new FormData(p.target);p.submitter&&p.submitter.name&&w.append(p.submitter.name,p.submitter.value),T.call(r,w)}}zs(["click","submit"]),document.addEventListener("click",d),n&&(document.addEventListener("mouseover",f),document.addEventListener("mouseout",m),document.addEventListener("focusin",u),document.addEventListener("touchstart",u)),document.addEventListener("submit",y),Oe(()=>{document.removeEventListener("click",d),n&&(document.removeEventListener("mouseover",f),document.removeEventListener("mouseout",m),document.removeEventListener("focusin",u),document.removeEventListener("touchstart",u)),document.removeEventListener("submit",y)})}}function fa(n){const t=n.replace(/^.*?#/,"");if(!t.startsWith("/")){const[,e="/"]=window.location.hash.split("#",2);return"".concat(e,"#").concat(t)}return t}function ga(n){const t=()=>window.location.hash.slice(1),e=mo();return la({get:t,set({value:r,replace:o,scroll:i,state:s}){o?window.history.replaceState(Xs(s),"","#"+r):window.location.hash=r;const a=r.indexOf("#"),l=a>=0?r.slice(a+1):"";ha(l,i),tn()},init:r=>ca(window,"hashchange",Ys(r,o=>!e.confirm(o&&o<0?o:t()))),create:da(n.preload,n.explicitLinks,n.actionBase),utils:{go:r=>window.history.go(r),renderPath:r=>"#".concat(r),parsePath:fa,beforeLeave:e}})(n)}var pa=!!li,ma=pa?n=>It()?Oe(n):n:Oe;function xa(n,t,e,r){return n.addEventListener(t,e,r),ma(n.removeEventListener.bind(n,t,e,r))}function ya(n,t=It()){let e=0,r,o;return()=>(e++,Oe(()=>{e--,queueMicrotask(()=>{!e&&o&&(o(),o=r=void 0)})}),o||at(i=>r=n(o=i),t),r)}var va=ya(()=>{const[n,t]=Y(null);return xa(window,"keydown",e=>{t(e),setTimeout(()=>t(null))}),n});function Ft(n){return typeof n=="function"}function Aa(n){return Array.isArray(n)}const Ar={ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"Enter",l:"Last"," ":"Space",Backspace:"Back",Escape:"Escape",37:"Left",39:"Right",38:"Up",40:"Down",13:"Enter",32:"Space",8:"Back",27:"Escape"},[qt,Sa]=Y([]),wa=n=>{const t=va();if(n)for(const[e,r]of Object.entries(n))Aa(r)?r.forEach(o=>{Ar[o]=e}):Ar[r]=e;return ze(Xe(jr,(e,r,o=[])=>{let i=e;const s=[];for(;i;)i.states.has("focus")||(i.states.add("focus"),Ft(i.onFocus)&&i.onFocus.call(i,e,r)),s.push(i),i=i.parent;return o.forEach(a=>{s.includes(a)||(a.states.remove("focus"),Ft(a.onBlur)&&a.onBlur.call(a,e,r))}),Sa(s),s},{defer:!0})),ze(()=>{const e=t();if(e){const r=Ar[e.key];ce(()=>{const o=qt();let i;for(const s of o){if(i=i||s,r){const a=s["on".concat(r)];if(Ft(a)&&a.call(s,e,s,i)===!0)break}else console.log("Unhandled key event: ".concat(e.key));if(Ft(s.onKeyPress)&&s.onKeyPress.call(s,e,r,s,i)===!0)break}return!1})}}),qt};function Co(n,t){const e=t();let r,o,i,s;Array.isArray(e)?e.length===2?(r=s=e[0],o=i=e[1]):e.length===3?(r=e[0],o=i=e[1],s=e[2]):[r,i,s,o]=e:r=i=s=o=e,n.onBeforeLayout=(a,l)=>{if(l){n.width=n.children.reduce((f,m)=>f+(m.width||0),0)+o+i;const d=n.children[0];d&&(d.x=o,d.marginLeft=o);let u=0;n.children.forEach(f=>{f.y=r,f.marginTop=r,u=Math.max(u,f.height||0)}),n.height=u+r+s}}}function ba(n=[]){const t=[];let e;for(e=0;e<n.length;e++){const r=n[e];if(typeof r=="string"&&!r.includes("PAUSE-"))t.push(n[e]);else break}return[t.join(",\b ")].concat(n.slice(e))}function bn(n){return new Promise(t=>{setTimeout(t,n)})}function Ta(n,t,e="en-US"){const r=window.speechSynthesis;return new Promise((o,i)=>{const s=new SpeechSynthesisUtterance(n);s.lang=e,s.onend=()=>{o()},s.onerror=a=>{i(a)},t.push(s),r.speak(s)})}function Pr(n,t,e=!0){const r=window.speechSynthesis,o=ba(Array.isArray(n)?n:[n]),i=[],s=[];let a=!0;return{series:(async()=>{try{for(;a&&o.length;){const d=await Promise.resolve(o.shift());if(a){if(typeof d=="string"&&d.includes("PAUSE-")){let u=Number(d.split("PAUSE-")[1])*1e3;isNaN(u)&&(u=0),await bn(u)}else if(typeof d=="string"&&d.length){let f=3;for(;a&&f>0;)try{await Ta(d,s,t),f=0}catch(m){if(m instanceof SpeechSynthesisErrorEvent)if(m.error==="network")f--,console.warn("Speech synthesis network error. Retries left: ".concat(f)),await bn(500*(3-f));else if(m.error==="canceled"||m.error==="interrupted")f=0;else throw new Error("SpeechSynthesisErrorEvent: ".concat(m.error));else throw m}}else if(typeof d=="function"){const u=Pr(d(),t,!1);i.push(u),await u.series}else if(Array.isArray(d)){const u=Pr(d,t,!1);i.push(u),await u.series}}else break}}finally{a=!1}})(),get active(){return a},append:d=>{o.push(d)},cancel:()=>{a&&(e&&r.cancel(),i.forEach(d=>{d.cancel()}),a=!1)}}}let Pt;function _a(n,t="en-US"){return Pt&&Pt.cancel(),Pt=Pr(n,t),Pt}var nn=(n,t)=>{let e;const r=()=>clearTimeout(e);return It()&&Oe(r),Object.assign((...i)=>{e!==void 0&&r(),e=setTimeout(()=>n(...i),t)},{clear:r})};let Dr,wt=[],_e,Ur=!1;const Ca=3e5;function Tn(n,t){const e=nn(n,t);let r;const o=i=>{r=i,e(i)};return o.flush=()=>{e.clear(),n(r)},o.clear=e.clear,o}function pt(n){return n.id||n.name}function Ea(n=[]){if(!te.onFocusChange||!te.enabled)return;const t=n.every(i=>!i.loading),e=n.filter(i=>!wt.includes(i));if(Dr(),!t&&te.onFocusChange){te.onFocusChange([]);return}wt=n.slice(0);const r=[],o=e.reduce((i,s)=>(s.announce?(i.push([pt(s),"Announce",s.announce]),r.push(s.announce)):s.title?(i.push([pt(s),"Title",s.title]),r.push(s.title)):i.push([pt(s),"No Announce",""]),i),[]);if(e.reverse().reduce((i,s)=>(s.announceContext?(i.push([pt(s),"Context",s.announceContext]),r.push(s.announceContext)):i.push([pt(s),"No Context",""]),i),o),te.debug&&console.table(o),r.length)return te.speak(r.reduce((i,s)=>i.concat(s),[]))}function Ra(n){if(!Ur)return _e=_a(n)}const te={debug:!1,enabled:!0,cancel:function(){_e&&_e.cancel()},clearPrevFocus:function(n=0){wt=wt.slice(0,n),Dr()},speak:function(n,{append:t=!1,notification:e=!1}={}){return te.onFocusChange&&te.enabled&&(te.onFocusChange.flush(),t&&_e&&_e.active?_e.append(n):(te.cancel(),Ra(n)),e&&(Ur=!0,_e==null||_e.series.finally(()=>{Ur=!1,te.refresh()}).catch(console.error))),_e},refresh:function(n=0){te.clearPrevFocus(n),te.onFocusChange&&te.onFocusChange(ce(()=>qt()))},setupTimers:function({focusDebounce:n=400,focusChangeTimeout:t=Ca}={}){te.onFocusChange=Tn(Ea,n),Dr=Tn(()=>{wt=[]},t)}},Ia=()=>(te.setupTimers(),ze(Xe(qt,te.onFocusChange,{defer:!0})),te);function Ba(n,t){const e=Ee.createTexture("ImageTexture",{src:n});return t.reduce((r,o)=>{const{x:i,y:s,width:a,height:l}=o;return r[o.name]=Ee.createTexture("SubTexture",{texture:e,x:i,y:s,width:a,height:l}),r},{})}const[Na,Ye]=Y(""),g={name:"Base Lightning TV",alpha:{primary:1,secondary:.7,tertiary:.1,inactive:.5,full:1,none:0,alpha1:.1,alpha2:.3,alpha3:.5,alpha4:.7,alpha5:.9},animation:{duration:{none:0,xfast:.1,fast:.25,normal:.5,slow:.75,xslow:.9},delay:{none:0,xfast:.01,fast:.025,normal:.05,slow:.075,xslow:.09},expressive:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},expressiveEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},expressiveExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standard:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standardEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standardExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utility:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utilityEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utilityExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25}},asset:{arrowLeft:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAi0lEQVRIDWNgGAWjIfD//38JID5Fk5AAGqwKxPeA+D/VLQCaaQLEr0CGgwBVLQCa5wbEn0EGwwDVLAAaGA3Ev2AGw2iqWAA0rBiI/8EMRaYptgBoWDeygehsci1gIlcjWfqArqZdEMFcBLSEdpGMZAntkimSJbTLaEiW0K6oQLKEdoUdzJJRemiHAAD4n+yzPWCs7QAAAABJRU5ErkJggg==",arrowRight:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAg0lEQVRIDWNgGAWjIYArBP7//38KiCVwyVMsDjQcBO4BsSrFhmEzAGw8hHgFpEywqaFIDMkCEPMzELtRZCC6ZjQLQNxfQByNro5sPhYLQEL/gLiYbEORNeKwACbcDVPLBGMMOhrmVDSapkFE00imaTKlaUajaVFB28Ju0CXrUQfhDAEAEgHss6NhpLQAAAAASUVORK5CYII=",backspaceOutline:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAAAXNSR0IArs4c6QAACmpJREFUeF7tnVmoZUcVhv/feY4gBEVEH/KgCCZxCK2itNo4xQQH+kUN0TjEiDGKKBqnaExwBjUaR6KY+NQgiQkOMSYhYEScIopGJOqDE2hHjfP0y4p1Oqdv33v2qr32Prv2Paug6Ye7Vu2qv75TtWvtGohMqUBAAQZ80zUVQAKUEIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypfPsAJJ0NYC92XRHKPB3AAfLv18BuBLAFSR/NKZWswJI0vkA3jCmILsw75sAvIfkR8eo22wAknQSgMvGEGFD8vwxgFeQvGrI+s4CIEnHAPgugHsMWfkNzevDAM4i+Z8h6t88QJLuXOB5yBAVzjxuVeBaAM8ieXNUjzkAdAmA50Yrmv5HKPATACeQ/GNEm6YBkvRyANblZhpHAXsfekpkOGsWIEmPAHA9gDuOo13mWhS4gOSZfdVoEiBJ9wFwA4D7961Y+lUpsK/v7KxVgL4K4ElOCS4l+Uyn7a41k3Q0gMcC2ANgH4CHV1T2OyStx69OzQEk6TwAZztr8lMAx5P8s9N+Y8wk2cTjfQDu66z080h+zml7yKwpgCSdCOByZyX+BuBRJH/otN84M0kWN/s0gOc4Kv8Nko922B1m0gxAkh4I4AcVwcL9JA/UVnjT7CXdHYD9yEzfVUkAjib5uxqNmgCoBAu/CeBhzsJ/kORZTtuNN5Nk70bXAZ0Hy59G8qIawVoB6LMAnu8suE3tH0/y3077NAMg6esAuoaoC0la7M2dJgdI0ssAXOgs8W8BHEvS/s9UoYCkdwN4bYfL5STto7U7TQpQZbDQehzreawHylSpgKSTAVza4XYDyeNqsp4MoB7BwteQfH9N5dL2NgWK3l0vyAdJWhDXnSYBSNLtANh3GO/KwgMk97trlYbbKiDJPpzea5U8JKuYqDIeql0kvQPAG5352ZLMR5L8q9M+zXZQYFcAJOnJAL7sbGWLMFuk2SLOmYIKzB6gEiz8HoB7O7U4meQXnLZp1qGApD8BuOcsh7AewcL3kuyadg4OjSSbhRxH0j4BjJok2Ufga0j+YdQHlcznDlBNsPAa+xpP8r/rEHbxjAKPbRuyHvKFY0Ik6QUALOprPfIT1gHRbAGSdDoA77aSX5Zg4e8nhGfx6FEgWoJn8Zy1QCTplq5vjc3NwnoEC/eQ/HYD8IwC0TbwrA2i2QHUI1h4JskLGoJnUIhWwLMWiGYFkCSLMX2t5WDhlneeLm5Dw5kDntEhkmRhEVvesWNqZgiTdC6AN3W1Svn72oOFkuxF+WcVIQUrai+IKuA5BBHJ453auc1mA1AJFn7Jsf7EKj9ZsLBHw1ZDtI5neAmaBUBzCxaO2cBj5u2FZtlO0l8A3K3ZIaxHsPB8kt5vYn00c/mM0dBj5OmqzAqjOQDUfLBwJ32HbPAh84pCM5seSNJLAHzcWeFJgoVdZRui4YfIo6ucff8uyVY03LW5IawyWPgvW5u77mChV/QIABFfb/kidk0CVKbDth3Huw35dJLeniqiV2/fniDYx1f7vlWTeoUFah6wZQhrqwcqwUKbrtsaH0+6mOQpHsOpbXpCVFPstcJjBZNkmzHv0swQJultAN7iVO375TyafzjtJzcbEaK1w9McQJXBQlvvYmtsfjE5FZUFGAGiSeBpCqDKYKFtmX0qya9Utl0z5gNCNBk8BSA7CtiODNwxjf4trEew8BySNtTNOg0A0aTwtARQTbDQeh3rfawXmn0KQDQ5PC0B9EkAL3LSkAD9X6hWALIJzJ3mNoSdS9I7U3NyuX6zQO+zKOzkEEmaHqDSFdpZM97tOfkSfRvvk0LUDEAFIgseetf85DS+AYgk/bPr1NvRZ2HLg4ektwI4xzmgZCBxYohaBMjWPeenDOcvaIvZ2oez5gAqQ5mtLbb3oa4z+Bb6nTHW1UP92vFIr54vzJ8BcGplGdYKkSRbCXGHSWdh2z1ckp1taGccroxyFt9cznG4iGuDqFmASk9kZxxakNGTckHZBBA1DVCB6BMAXuwhyA4VmGL/+05l6zlsbdt7DJmXU0uXmSQ7JvD2zQ1hiwJJsotRvlVxXO87SU5+heUYDT5Gni5KVhg1D1DphWqCjOYy6RlAYzb0mHn3gWkWABWIaoKMubHwSBpGebGWZNdc2vmUO6a1BhJXFUSSff/yLuOYamvzzwEcVfFr7tWwPXqi6uN2PXWYG0C1Qca1n8RaDlewl3kPRL3gWXo/XBwo1dXWdk/a3jEOnJoVQGUoqw0yvpLkh7oUHvLvTohC8FRANBo8pT3sxLeVJ/M2M4QtiVYTZJzkNPoOiAaBxwHRqPDMFqBS8Jog4yT3YewA0aDwrIBodHhmDVApvG0mtO3PnjTJjTxbIBoFnm0gWgs8pQ06lxY3N4QtCWZBRgPDezdnHvPr+alV2EiaL0DlF2Dbn20bdB40XtHwQ5nOHqAC0SyCjEM1Wkv57AqACkRvBvB2p7hrDzI6yzU7s90EUPNBxtnR4SjwrgGo9EK1Qca8cM4ByU4mkuz++F93ZHELyZX3iW31n+S+sKWZWfNBxkCbNeUq6ekArugo1I0kH1xT8EkBKj1R80HGGkFbtZVkZ3bb2d2r0tUkn1hTh8kBKhB9DMBLnQWfJMjoLFuTZpJsO/ONAB7UUcBLSHqvX781q1YAqg0yfoDkq5psrQYLJeldAF7nKFr1x+wmACq9kAUZLazvvTV4P8kDDlE22kTSQ4uuK9dCF5HuR/I3NYI1A1CBaB+AK50VsAMj7TJeixNl2kYBSccCsB/ZMQ6Brif5GIfdYSZNAVQg8rzsLSphl/Hapby2LDZTUaBcq/56ALb1fOVxLkuinULy4loRmwOoQGQX7T7DWZnPk3y203bXmkl6AIA91isDOBGADV3e1HsJbasA1QYZvUKl3fYKPI2knXFQnZoEqPRCNUHG6oqnwyEFLiJ5Wl89mgWoQFQTZOyrwSb7WUztcSRtu0+v1DRABaKPADijV+3SaZUCNgE5geTNEZnmAFBtkDGix6b4Xld2BNvJcaHUPEClF6oNMoZE2eXOtm3q1ZFha1mfWQBUINoL4Kqurbm7vPEj1bOAqx3udW0kk62+swGoQHQ2gPOGFGAD8roJgF0t+qkx6jorgApElwE4aQwxZp6n3YNxsPyzA7yst/4iSdvEMFqaHUCjKZEZ91IgAeolWzotFEiAkoWQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnT+H0jPT81J3xWWAAAAAElFTkSuQmCC",check:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAOCAYAAAAi2ky3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACtSURBVHgBvdPdDcIgEAfwoy8Nb45QN3AGF2s36Ahu4gpuIDoBfSgfpdoTlCbEWEMh6T8hFzjyg5AAkBHOcQe5UWqspRx435sDpMYj6IYQwwVSEiJ2MKVUBWuzLSLl2HL+uxmNCGFO8yaL7RHxve6qRZoAuS4hxac8735elWVx7jrtMKL1o0Gcat9jhExHSukN/kUIFZ7MpDRtzE1isDRkAUtDvrA8ZI597FUf8gWH9P0b4gko9wAAAABJRU5ErkJggg=="},color:{palette:{"blue-20":"0xbecffeff","blue-40":"0x93a9fdff","blue-90":"0x000033ff","grey-05":"0xf8f7faff","grey-40":"0x929096ff","grey-70":"0x48474bff","grey-90":"0x181819ff"},white:"0xffffffff",black:"0x000000ff",grey:"0x929096ff",red:"0xe74c3cff",orange:"0xdc7633ff",yellow:"0xf7dc6fff",green:"0x2ecc71ff",blue:"0x93a9fdff",purple:"0x663399ff",material:"0x181819ff",materialBrand:"0x000033ff",overlay:"0x181819b3",textNeutral:"0xf8f7faff",textNeutralSecondary:"0xf8f7fab3",textNeutralTertiary:"0xf8f7fa1a",textNeutralDisabled:"0xf8f7fa80",textInverse:"0x181819ff",textInverseSecondary:"0x181819b3",textInverseTertiary:"0x1818191a",textInverseDisabled:"0x18181980",textBrand:"0x93a9fdff",textBrandSecondary:"0x93a9fdb3",textBrandTertiary:"0x93a9fd1a",textBrandDisabled:"0x93a9fd80",textPositive:"0x2ecc71ff",textNegative:"0xe74c3cff",textInfo:"0x93a9fdff",textCaution:"0xdc7633ff",fillTransparent:"0xffffff0",fillNeutral:"0xf8f7faff",fillNeutralSecondary:"0xf8f7fab3",fillNeutralTertiary:"0xf8f7fa1a",fillNeutralDisabled:"0xf8f7fa80",fillInverse:"0x181819ff",fillInverseSecondary:"0x181819b3",fillInverseTertiary:"0x1818191a",fillInverseDisabled:"0x18181980",fillBrand:"0x93a9fdff",fillBrandSecondary:"0x93a9fdb3",fillBrandTertiary:"0x93a9fd1a",fillBrandDisabled:"0x93a9fd80",fillPositive:"0x2ecc71ff",fillNegative:"0xe74c3cff",fillInfo:"0x93a9fdff",fillCaution:"0xdc7633ff",strokeNeutral:"0xf8f7faff",strokeNeutralSecondary:"0xf8f7fab3",strokeNeutralTertiary:"0xf8f7fa1a",strokeNeutralDisabled:"0xf8f7fa80",strokeInverse:"0x181819ff",strokeInverseSecondary:"0x181819b3",strokeInverseTertiary:"0x1818191a",strokeInverseDisabled:"0x18181980",strokeBrand:"0x93a9fdff",strokeBrandSecondary:"0x93a9fdb3",strokeBrandTertiary:"0x93a9fd1a",strokeBrandDisabled:"0x93a9fd80",strokePositive:"0x2ecc71ff",strokeNegative:"0xe74c3cff",strokeInfo:"0x93a9fdff",strokeCaution:"0xdc7633ff",interactiveNeutral:"0xffffff1a",interactiveNeutralFocus:"0xffffffff",interactiveNeutralFocusSoft:"0xffffff1a",interactiveInverse:"0x48474b1a",interactiveInverseFocus:"0x48474bff",interactiveInverseFocusSoft:"0x48474b1a",interactiveBrand:"0xbecffe1a",interactiveBrandFocus:"0xbecffeff",interactiveBrandFocusSoft:"0xbecffe1a",shadowNeutral:"0x000000b3",shadowNeutralFocus:"0x000000b3",shadowNeutralFocusSoft:"0x000000b3",shadowNeutralText:"0x000000ff",shadowInverse:"0x000000b3",shadowInverseFocus:"0x000000b3",shadowInverseFocusSoft:"0x000000b3",shadowInverseText:"0x000000ff",shadowBrand:"0x000000b3",shadowBrandFocus:"0x000000b3",shadowBrandFocusSoft:"0x000000b3",shadowBrandText:"0x000000ff"},font:[],layout:{columnCount:10,focusScale:1.2,gutterX:20,gutterY:20,marginX:150,marginY:150,safe:50,screenW:1920,screenH:1080},radius:{none:0,xs:2,sm:4,md:8,lg:16,xl:24},spacer:{none:0,xxs:2,xs:4,sm:8,md:10,lg:20,xl:30,xxl:40,xxxl:50},stroke:{none:0,sm:2,md:4,lg:6,xl:8},typography:{display1:{fontFamily:"Arial",fontSize:75,lineHeight:85,fontWeight:500,verticalAlign:"middle",textBaseline:"bottom"},display2:{fontFamily:"Arial",fontSize:50,lineHeight:60,fontWeight:500,verticalAlign:"middle",textBaseline:"bottom"},headline1:{fontFamily:"Arial",fontSize:35,fontWeight:500,lineHeight:48,verticalAlign:"middle",textBaseline:"bottom"},headline2:{fontFamily:"Arial",fontSize:30,fontWeight:500,lineHeight:40,verticalAlign:"middle",textBaseline:"bottom"},headline3:{fontFamily:"Arial",fontSize:25,fontWeight:500,lineHeight:36,verticalAlign:"middle",textBaseline:"bottom"},body1:{fontFamily:"Arial",fontSize:25,fontWeight:300,lineHeight:40,verticalAlign:"middle",textBaseline:"bottom"},body2:{fontFamily:"Arial",fontSize:22,fontWeight:300,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},body3:{fontFamily:"Arial",fontSize:20,fontWeight:300,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},button1:{fontFamily:"Arial",fontSize:25,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},button2:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},callout1:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},caption1:{fontFamily:"Arial",fontSize:15,fontWeight:500,lineHeight:24,verticalAlign:"middle",textBaseline:"bottom"},tag1:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:24,verticalAlign:"middle",textBaseline:"bottom"},footnote1:{fontFamily:"Arial",fontSize:22,fontWeight:300,lineHeight:30,verticalAlign:"middle",textBaseline:"bottom"}},componentConfig:{Keyboard:{base:{keyProps:{delete:{title:null,icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAAAXNSR0IArs4c6QAACmpJREFUeF7tnVmoZUcVhv/feY4gBEVEH/KgCCZxCK2itNo4xQQH+kUN0TjEiDGKKBqnaExwBjUaR6KY+NQgiQkOMSYhYEScIopGJOqDE2hHjfP0y4p1Oqdv33v2qr32Prv2Paug6Ye7Vu2qv75TtWvtGohMqUBAAQZ80zUVQAKUEIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypfPsAJJ0NYC92XRHKPB3AAfLv18BuBLAFSR/NKZWswJI0vkA3jCmILsw75sAvIfkR8eo22wAknQSgMvGEGFD8vwxgFeQvGrI+s4CIEnHAPgugHsMWfkNzevDAM4i+Z8h6t88QJLuXOB5yBAVzjxuVeBaAM8ieXNUjzkAdAmA50Yrmv5HKPATACeQ/GNEm6YBkvRyANblZhpHAXsfekpkOGsWIEmPAHA9gDuOo13mWhS4gOSZfdVoEiBJ9wFwA4D7961Y+lUpsK/v7KxVgL4K4ElOCS4l+Uyn7a41k3Q0gMcC2ANgH4CHV1T2OyStx69OzQEk6TwAZztr8lMAx5P8s9N+Y8wk2cTjfQDu66z080h+zml7yKwpgCSdCOByZyX+BuBRJH/otN84M0kWN/s0gOc4Kv8Nko922B1m0gxAkh4I4AcVwcL9JA/UVnjT7CXdHYD9yEzfVUkAjib5uxqNmgCoBAu/CeBhzsJ/kORZTtuNN5Nk70bXAZ0Hy59G8qIawVoB6LMAnu8suE3tH0/y3077NAMg6esAuoaoC0la7M2dJgdI0ssAXOgs8W8BHEvS/s9UoYCkdwN4bYfL5STto7U7TQpQZbDQehzreawHylSpgKSTAVza4XYDyeNqsp4MoB7BwteQfH9N5dL2NgWK3l0vyAdJWhDXnSYBSNLtANh3GO/KwgMk97trlYbbKiDJPpzea5U8JKuYqDIeql0kvQPAG5352ZLMR5L8q9M+zXZQYFcAJOnJAL7sbGWLMFuk2SLOmYIKzB6gEiz8HoB7O7U4meQXnLZp1qGApD8BuOcsh7AewcL3kuyadg4OjSSbhRxH0j4BjJok2Ufga0j+YdQHlcznDlBNsPAa+xpP8r/rEHbxjAKPbRuyHvKFY0Ik6QUALOprPfIT1gHRbAGSdDoA77aSX5Zg4e8nhGfx6FEgWoJn8Zy1QCTplq5vjc3NwnoEC/eQ/HYD8IwC0TbwrA2i2QHUI1h4JskLGoJnUIhWwLMWiGYFkCSLMX2t5WDhlneeLm5Dw5kDntEhkmRhEVvesWNqZgiTdC6AN3W1Svn72oOFkuxF+WcVIQUrai+IKuA5BBHJ453auc1mA1AJFn7Jsf7EKj9ZsLBHw1ZDtI5neAmaBUBzCxaO2cBj5u2FZtlO0l8A3K3ZIaxHsPB8kt5vYn00c/mM0dBj5OmqzAqjOQDUfLBwJ32HbPAh84pCM5seSNJLAHzcWeFJgoVdZRui4YfIo6ucff8uyVY03LW5IawyWPgvW5u77mChV/QIABFfb/kidk0CVKbDth3Huw35dJLeniqiV2/fniDYx1f7vlWTeoUFah6wZQhrqwcqwUKbrtsaH0+6mOQpHsOpbXpCVFPstcJjBZNkmzHv0swQJultAN7iVO375TyafzjtJzcbEaK1w9McQJXBQlvvYmtsfjE5FZUFGAGiSeBpCqDKYKFtmX0qya9Utl0z5gNCNBk8BSA7CtiODNwxjf4trEew8BySNtTNOg0A0aTwtARQTbDQeh3rfawXmn0KQDQ5PC0B9EkAL3LSkAD9X6hWALIJzJ3mNoSdS9I7U3NyuX6zQO+zKOzkEEmaHqDSFdpZM97tOfkSfRvvk0LUDEAFIgseetf85DS+AYgk/bPr1NvRZ2HLg4ektwI4xzmgZCBxYohaBMjWPeenDOcvaIvZ2oez5gAqQ5mtLbb3oa4z+Bb6nTHW1UP92vFIr54vzJ8BcGplGdYKkSRbCXGHSWdh2z1ckp1taGccroxyFt9cznG4iGuDqFmASk9kZxxakNGTckHZBBA1DVCB6BMAXuwhyA4VmGL/+05l6zlsbdt7DJmXU0uXmSQ7JvD2zQ1hiwJJsotRvlVxXO87SU5+heUYDT5Gni5KVhg1D1DphWqCjOYy6RlAYzb0mHn3gWkWABWIaoKMubHwSBpGebGWZNdc2vmUO6a1BhJXFUSSff/yLuOYamvzzwEcVfFr7tWwPXqi6uN2PXWYG0C1Qca1n8RaDlewl3kPRL3gWXo/XBwo1dXWdk/a3jEOnJoVQGUoqw0yvpLkh7oUHvLvTohC8FRANBo8pT3sxLeVJ/M2M4QtiVYTZJzkNPoOiAaBxwHRqPDMFqBS8Jog4yT3YewA0aDwrIBodHhmDVApvG0mtO3PnjTJjTxbIBoFnm0gWgs8pQ06lxY3N4QtCWZBRgPDezdnHvPr+alV2EiaL0DlF2Dbn20bdB40XtHwQ5nOHqAC0SyCjEM1Wkv57AqACkRvBvB2p7hrDzI6yzU7s90EUPNBxtnR4SjwrgGo9EK1Qca8cM4ByU4mkuz++F93ZHELyZX3iW31n+S+sKWZWfNBxkCbNeUq6ekArugo1I0kH1xT8EkBKj1R80HGGkFbtZVkZ3bb2d2r0tUkn1hTh8kBKhB9DMBLnQWfJMjoLFuTZpJsO/ONAB7UUcBLSHqvX781q1YAqg0yfoDkq5psrQYLJeldAF7nKFr1x+wmACq9kAUZLazvvTV4P8kDDlE22kTSQ4uuK9dCF5HuR/I3NYI1A1CBaB+AK50VsAMj7TJeixNl2kYBSccCsB/ZMQ6Brif5GIfdYSZNAVQg8rzsLSphl/Hapby2LDZTUaBcq/56ALb1fOVxLkuinULy4loRmwOoQGQX7T7DWZnPk3y203bXmkl6AIA91isDOBGADV3e1HsJbasA1QYZvUKl3fYKPI2knXFQnZoEqPRCNUHG6oqnwyEFLiJ5Wl89mgWoQFQTZOyrwSb7WUztcSRtu0+v1DRABaKPADijV+3SaZUCNgE5geTNEZnmAFBtkDGix6b4Xld2BNvJcaHUPEClF6oNMoZE2eXOtm3q1ZFha1mfWQBUINoL4Kqurbm7vPEj1bOAqx3udW0kk62+swGoQHQ2gPOGFGAD8roJgF0t+qkx6jorgApElwE4aQwxZp6n3YNxsPyzA7yst/4iSdvEMFqaHUCjKZEZ91IgAeolWzotFEiAkoWQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnT+H0jPT81J3xWWAAAAAElFTkSuQmCC"}}}}}};function ka(){let n,t,e=0;const r=1,o={duration:750,easing:"ease-in-out"},i={alpha:r,color:4294967295};function s(l){if(l.startsWith("#")){n.color=l,n.src="",n.alpha=1,e=1,t.alpha=0;return}else n.color=4294967295;if(e===0){n.src=l,e=1;return}if(e===1){t.src=l,e=2,t.alpha=0,t.animate({alpha:r},o).start(),n.animate({alpha:0},o).start();return}e===2&&(n.src=l,e=1,n.alpha=0,n.animate({alpha:r},o).start(),t.animate({alpha:0},o).start())}const a=nn(s,400);return ze(Xe(Na,l=>{a(l)},{defer:!0})),c(D,{width:1920,height:1080,zIndex:-5,get children(){return[c(D,{ref(l){var d=n;typeof d=="function"?d(l):n=l},style:i}),c(D,{ref(l){var d=t;typeof d=="function"?d(l):t=l},style:i,alpha:0}),c(D,{src:"/assets/hero-mask-inverted.png",get color(){return z(g.color.materialBrand)},width:1920,height:1080})]}})}var _n,Cn,En,Rn,In,Bn,Nn,kn,Mn,Ln,Fn,Pn,Dn,Un,zn,On;const Ma={inverse:"base",brand:"base",focus:"base",disabled:"base","neutral-focus":"focus","neutral-disabled":"disabled","inverse-focus":"focus","inverse-disabled":"disabled","brand-focus":"focus","brand-disabled":"disabled"};function W({themeKeys:n,base:t,toneModes:e,themeStyles:r,toneModeFallbackMap:o=Ma}){const i=(f,m)=>{var y;return(y=r==null?void 0:r[f])==null?void 0:y[m]},s=f=>(Object.keys(o).filter(p=>!Object.keys(f).includes(p)).forEach(p=>{f[p]={...f[o[p]],...r==null?void 0:r[p]}}),f),a=(f,m,y)=>{const p=Object.entries(m);return Object.fromEntries(p.map(([x,T])=>{var w;return[x,(w=i(f,y[x]))!=null?w:T]}))},l=(f,m,y)=>{if(!m)return f;const p=Object.entries(m);return{...f,...Object.fromEntries(p.map(([x,T])=>[x,a(x,T,y)]))}},d=(f,m)=>{const y=Object.entries(f);return Object.fromEntries(y.map(([p,x])=>{var w;const T=m!=null&&m[p]&&(w=i("base",m[p]))!=null?w:x;return[p,T]}))};return((f,m,y)=>{const p=d(f,y),x=l(p,m,y);return s(x)})(t,e,n)}function Eo(n=0){return(t,e,r,o)=>{if(t.children.length===0)return;const i=t.gap||0,s=t.scroll||"auto",[a,l]=La(t),d=t.flexDirection==="row"?t.x:t.y,u=t.flexDirection==="row"?e.x:e.y,f=t.flexDirection==="row"?e.width:e.height,m=r>o?"positive":"negative";let y=d;s==="auto"?t.scrollIndex!=null&&t.scrollIndex>=0?t.selected>=t.scrollIndex&&(m==="positive"?y=d-f-i:y=d+f+i):(Math.abs(d)+l<a.position+a.size||u<Math.abs(d))&&(y=-u+n):s==="always"||s==="edge"&&m==="negative"&&Math.abs(d)>u?y=-u+n:s==="edge"&&m==="positive"&&Math.abs(d)+l<u+f&&(y=d-f-i),t.flexDirection==="row"&&t.x!==y?t.x=y:t.flexDirection==="column"&&t.y!==y&&(t.y=y)}}function La(n){let t,e;return n.flexDirection==="row"?(t={position:n.children[n.children.length-1].x,size:n.children[n.children.length-1].width},e=n.width):(t={position:n.children[n.children.length-1].y,size:n.children[n.children.length-1].height},e=n.height),[t,e]}const lt=(...n)=>{const t=n.filter(e=>typeof e=="function");if(t.length!==0)return function(...e){for(const r of t)if(r.apply(this,e)===!0)return!0}};function Ro(){if(!this||this.selected===void 0||this.children.length===0)return!1;let n=this.children[this.selected];for(;n!=null&&n.skipFocus;)this.selected++,n=this.children[this.selected];if(!(n instanceof ct))return!1;n.setFocus()}function Zt(n){return function(){var t,e;const r=this.children.length,o=this.wrap,i=this.selected||0;if(r===0)return!1;if(n==="right"||n==="down")do if(this.selected=(this.selected||0)%r+1,this.selected>=r){if(!o){this.selected=void 0;break}this.selected=0}while((t=this.children[this.selected])!=null&&t.skipFocus);else if(n==="left"||n==="up")do if(this.selected=(this.selected||0)%r-1,this.selected<0){if(!o){this.selected=void 0;break}this.selected=r-1}while((e=this.children[this.selected])!=null&&e.skipFocus);if(this.selected===void 0&&(this.selected=i,this.children[this.selected].states.has("focus")))return!1;const s=this.children[this.selected];if(this.onSelectedChanged&&this.onSelectedChanged.call(this,this,s,this.selected,i),this.plinko&&i!==void 0){const l=this.children[i].selected||0;s.selected=l<s.children.length?l:s.children.length-1}return s.setFocus(),!0}}const{Artwork:{styles:Fa,defaultTone:Pc}={styles:{},defaultTone:"neutral"}}=(_n=g)==null?void 0:_n.componentConfig,Pa={themeKeys:{fillColor:"fillColor",borderRadius:"borderRadius",scale:"imageScale",pivotX:"imageScalePivotX",pivotY:"imageScalePivotY"},base:{borderRadius:g.radius.md,fallbackSrc:void 0,fillColor:g.color.overlay,gradientColor:g.color.material,pivotX:.5,pivotY:.5,scale:void 0},themeStyles:Fa};W(Pa);const{Icon:{styles:Da,defaultTone:Dc}={styles:{},defaultTone:"neutral"}}=(Cn=g)==null?void 0:Cn.componentConfig,Ua={themeKeys:{color:"color"},base:{width:100,height:100,color:g.color.fillInverse},toneModes:{inverse:{color:g.color.fillInverse},brand:{color:g.color.fillBrand}},themeStyles:Da};W(Ua);const{Badge:{styles:on,defaultTone:Uc}={styles:{},defaultTone:"neutral"}}=(En=g)==null?void 0:En.componentConfig,za={themeKeys:{color:"backgroundColor"},base:{color:g.color.fillInverseSecondary,borderRadius:g.radius.sm,border:{color:g.color.strokeInverse,width:g.stroke.sm},display:"flex",justifyContent:"spaceEvenly",padding:[g.spacer.md-g.stroke.sm,g.spacer.xs+g.stroke.sm,g.spacer.md+g.stroke.sm,g.spacer.md+g.stroke.sm]},toneModes:{inverse:{color:g.color.fillNeutralSecondary,border:{color:g.color.strokeInverseSecondary,width:g.stroke.sm}},brand:{color:g.color.fillBrand,border:{color:g.color.strokeInverseSecondary,width:g.stroke.sm}}},themeStyles:on},Oa={themeKeys:{color:"textColor"},base:{...g.typography.tag1,color:g.color.textNeutral},toneModes:{inverse:{color:g.color.textInverse},brand:{color:g.color.textNeutral}},themeStyles:on},Wa={themeKeys:{color:"iconColor"},base:{color:g.color.textNeutral},toneModes:{inverse:{color:g.color.textInverse},brand:{color:g.color.textNeutral}},themeStyles:on};W(za);W(Wa);W(Oa);const{Button:{styles:Io,defaultTone:zc}={styles:{},defaultTone:"neutral"}}=(Rn=g)==null?void 0:Rn.componentConfig,Xa={themeKeys:{textAlign:"textAlign",borderRadius:"borderRadius",color:"backgroundColor",justifyContent:"justifyContent",contentColor:"contentColor"},base:{height:g.typography.button1.lineHeight+g.spacer.xl*2,display:"flex",padding:[g.spacer.xxxl,g.spacer.xl],color:g.color.interactiveNeutral,justifyContent:"center",alignItems:"center",borderRadius:g.radius.sm,contentColor:g.color.fillNeutral},toneModes:{focus:{color:g.color.interactiveNeutralFocus,contentColor:g.color.fillInverse},disabled:{color:g.color.fillNeutralDisabled,contentColor:g.color.textNeutralDisabled},inverse:{color:g.color.interactiveInverse},brand:{contentColor:g.color.fillBrand},"inverse-focus":{color:g.color.interactiveInverseFocus,contentColor:g.color.fillNeutral},"brand-focus":{contentColor:g.color.fillNeutral}},themeStyles:Io},Ya={themeKeys:{color:"textColor"},base:{textAlign:"left",color:g.color.textNeutral,...g.typography.button1},toneModes:{focus:{color:g.color.textInverse},disabled:{color:g.color.textNeutralDisabled},"inverse-focus":{color:g.color.textNeutral}},themeStyles:Io};W(Xa);W(Ya);const{Checkbox:{styles:Bo,defaultTone:Oc}={styles:{},defaultTone:"neutral"}}=(In=g)==null?void 0:In.componentConfig,Ge=g.stroke.sm,Sr=g.spacer.xxl,$a={themeKeys:{color:"color",borderRadius:"borderRadius",border:"border",justifyContent:"justifyContent"},base:{width:Sr,height:Sr,display:"flex",justifyContent:"center",color:g.color.fillNeutral,alignItems:"center",borderRadius:Sr/4,border:{color:g.color.strokeInverse,width:Ge}},toneModes:{neutral:{border:{color:g.color.strokeNeutralSecondary,width:Ge},color:g.color.fillInverseSecondary},"neutral-checked":{border:{color:g.color.strokeNeutralSecondary,width:Ge},color:g.color.fillNeutral},inverse:{border:{color:g.color.strokeInverseSecondary,width:Ge},color:g.color.fillNeutralSecondary},"inverse-checked":{border:{color:g.color.strokeInverseSecondary,width:Ge},color:g.color.fillInverse},brand:{border:{color:g.color.strokeNeutralSecondary,width:Ge},color:g.color.fillNeutralSecondary},"brand-checked":{border:{color:g.color.strokeNeutralSecondary,width:Ge},color:g.color.fillBrand},disabled:{alpha:g.alpha.inactive}},themeStyles:Bo},Ha={themeKeys:{color:"color"},base:{width:g.spacer.lg,height:g.spacer.lg,src:g.asset.check},toneModes:{neutral:{color:g.color.fillInverse},inverse:{color:g.color.fillNeutral},brand:{color:g.color.fillInverse}},themeStyles:Bo};W($a);W(Ha);const{Column:{styles:Ga,defaultTone:Qa}={styles:{},defaultTone:"neutral"}}=(Bn=g)==null?void 0:Bn.componentConfig,ja={themeKeys:{gap:"itemSpacing",scrollIndex:"scrollIndex",itemTransition:"itemTransition"},base:{display:"flex",justifyContent:"flexStart",flexDirection:"column",gap:g.layout.gutterY,itemTransition:{...g.animation.standardEntrance,duration:g.animation.duration.fast}},toneModes:{},themeStyles:Ga},Va=W(ja),qe={tone:Qa,Container:Va},J=n=>{const t=Zt("up"),e=Zt("down");return c(D,H(n,{get onUp(){return lt(n.onUp,t)},get onDown(){return lt(n.onDown,e)},get selected(){return n.selected||0},forwardFocus:Ro,get onSelectedChanged(){return lt(n.onSelectedChanged,n.scroll!=="none"?Eo(n.y):void 0)},get tone(){var r;return(r=n.tone)!=null?r:qe.tone},get style(){var r,o,i,s;return[...[n.style].flat(),(r=n.style)==null?void 0:r.Container,(i=(o=n.style)==null?void 0:o.Container)==null?void 0:i[n.tone||qe.tone],qe.Container,(s=qe.Container)==null?void 0:s[n.tone||qe.tone]]},get states(){var r;return(r=n.tone)!=null?r:qe.tone}}))},{Label:{styles:No,defaultTone:Wc}={styles:{},defaultTone:"neutral"}}=(Nn=g)==null?void 0:Nn.componentConfig,Ka={themeKeys:{color:"backgroundColor",borderRadius:"radius"},base:{display:"flex",color:g.color.textNeutral,padding:[g.spacer.md,g.spacer.lg],borderRadius:[g.radius.md,g.radius.md,g.radius.md,g.radius.none],height:g.typography.caption1.lineHeight+g.spacer.md,neutral:{backgroundColor:g.color.fillNeutral}},toneModes:{inverse:{color:g.color.fillInverse},brand:{color:g.color.orange},"brand-focus":{color:g.color.orange}},themeStyles:No},qa={themeKeys:{color:"textColor"},base:{...g.typography.caption1,color:g.color.textInverse},toneModes:{inverse:{color:g.color.textNeutral},brand:{color:g.color.textNeutral}},themeStyles:No};W(Ka);W(qa);const{Rating:{styles:sn,defaultTone:Xc}={styles:{},defaultTone:"neutral"}}=(kn=g)==null?void 0:kn.componentConfig,Za={themeKeys:{justifyContent:"justifyContent",itemSpacing:"itemSpacing"},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart",itemSpacing:g.spacer.sm},toneModes:{},themeStyles:sn},Ja={themeKeys:{color:"textColor"},base:{color:g.color.textNeutral,...g.typography.body2},toneModes:{},themeStyles:sn},el={themeKeys:{color:"color"},base:{height:g.typography.body2.lineHeight,width:g.typography.body2.lineHeight,color:g.color.fillNeutral,marginRight:g.spacer.sm},toneModes:{},themeStyles:sn};W(Za);W(el);W(Ja);const{Details:{styles:ko,defaultTone:Yc}={styles:{},defaultTone:"neutral"}}=(Mn=g)==null?void 0:Mn.componentConfig,tl={themeKeys:{alignItems:"alignItems",contentSpacing:"contentSpacing",badgeContentSpacing:"badgeContentSpacing",ratingContentSpacing:"ratingContentSpacing"},base:{display:"flex",flexDirection:"row",alignItems:"center",contentSpacing:g.spacer.lg,badgeContentSpacing:g.spacer.sm,ratingContentSpacing:g.spacer.lg},toneModes:{},themeStyles:ko},rl={themeKeys:{color:"textColor"},base:{...g.typography.body2,marginRight:g.spacer.lg,color:g.color.textNeutral},toneModes:{inverse:{color:g.color.textInverse},brand:{color:g.color.textNeutral},"inverse-disabled":{color:g.color.textNeutralDisabled},"neutral-disabled":{color:g.color.textNeutralDisabled},"brand-disabled":{color:g.color.textNeutralDisabled}},themeStyles:ko};W(tl);W(rl);const{Metadata:{styles:an,defaultTone:$c}={styles:{},defaultTone:"neutral"}}=(Ln=g)==null?void 0:Ln.componentConfig,nl={themeKeys:{justifyContent:"justifyContent",alpha:"alpha"},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart",alpha:g.alpha.primary},toneModes:{disabled:{alpha:g.alpha.inactive}},themeStyles:an},ol={themeKeys:{color:"textColor"},base:{maxLines:1,contain:"width",...g.typography.headline3,color:g.color.textNeutral},toneModes:{inverse:{color:g.color.textInverse},brand:{color:g.color.textNeutral},"inverse-disabled":{color:g.color.textNeutralDisabled},"neutral-disabled":{color:g.color.textNeutralDisabled},"brand-disabled":{color:g.color.textNeutralDisabled}},themeStyles:an},il={themeKeys:{color:"textColor"},base:{contain:"width",maxLines:2,...g.typography.body2,color:g.color.textNeutralSecondary},toneModes:{inverse:{color:g.color.textInverseSecondary},brand:{color:g.color.textNeutralSecondary},"inverse-disabled":{color:g.color.textNeutralDisabled},"neutral-disabled":{color:g.color.textNeutralDisabled},"brand-disabled":{color:g.color.textNeutralDisabled}},themeStyles:an};W(nl);W(il);W(ol);const{ProgressBar:{styles:Mo,defaultTone:Hc}={styles:{},defaultTone:"neutral"}}=(Fn=g)==null?void 0:Fn.componentConfig,sl={themeKeys:{color:"barColor",borderRadius:"borderRadius"},base:{height:g.spacer.md,color:g.color.fillNeutralTertiary,borderRadius:g.radius.xs},toneModes:{inverse:{color:g.color.fillInverseTertiary}},themeStyles:Mo},al={themeKeys:{color:"progressColor",borderRadius:"borderRadius"},base:{borderRadius:g.radius.xs,color:g.color.fillNeutral},toneModes:{inverse:{color:g.color.fillInverse},brand:{color:g.color.fillBrand}},themeStyles:Mo};W(sl);W(al);const{Row:{styles:ll,defaultTone:cl}={styles:{},defaultTone:"neutral"}}=(Pn=g)==null?void 0:Pn.componentConfig,hl={themeKeys:{gap:"itemSpacing",scrollIndex:"scrollIndex",itemTransition:"itemTransition"},base:{display:"flex",justifyContent:"flexStart",flexDirection:"row",gap:g.layout.gutterX,width:g.layout.screenW,itemTransition:{...g.animation.standardEntrance,duration:g.animation.duration.fast}},toneModes:{},themeStyles:ll},ul=W(hl),Ze={tone:cl,Container:ul},V=n=>{const t=Zt("left"),e=Zt("right");return c(D,H(n,{get selected(){return n.selected||0},get onLeft(){return lt(n.onLeft,t)},get onRight(){return lt(n.onRight,e)},forwardFocus:Ro,get onSelectedChanged(){return lt(n.onSelectedChanged,n.scroll!=="none"?Eo(n.x):void 0)},get tone(){var r;return(r=n.tone)!=null?r:Ze.tone},get style(){var r,o,i,s;return[...[n.style].flat(),(r=n.style)==null?void 0:r.Container,(i=(o=n.style)==null?void 0:o.Container)==null?void 0:i[n.tone||Ze.tone],Ze.Container,(s=Ze.Container)==null?void 0:s[n.tone||Ze.tone]]},get states(){var r;return(r=n.tone)!=null?r:Ze.tone}}))},{Keyboard:{styles:ln,defaultTone:Gc}={styles:{},defaultTone:"neutral"}}=(Dn=g)==null?void 0:Dn.componentConfig,dl={themeKeys:{keySpacing:"keySpacing",screenW:"screenW",marginX:"marginX"},base:{keySpacing:g.spacer.md,screenW:g.layout.screenW,marginX:g.layout.marginX,height:100},toneModes:{},themeStyles:ln},fl={themeKeys:{keySpacing:"keySpacing",textAlign:"textAlign",borderRadius:"borderRadius",color:"backgroundColor",justifyContent:"justifyContent",baseWidth:"baseWidth",sizes:"sizes",contentColor:"contentColor"},base:{keySpacing:g.spacer.md,height:g.spacer.md*9,paddingX:g.spacer.md,sizes:{sm:1,md:2,lg:3,xl:4,xxl:5},contentColor:g.color.fillNeutral,padding:[g.spacer.xxxl,g.spacer.xl],baseWidth:g.spacer.md*7,color:g.color.interactiveNeutral,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:g.radius.sm},toneModes:{focus:{color:g.color.interactiveNeutralFocus,contentColor:g.color.fillInverse},disabled:{color:g.color.fillNeutralDisabled,contentColor:g.color.fillNeutralDisabled},inverse:{color:g.color.interactiveInverse},"inverse-focus":{color:g.color.interactiveInverseFocus,contentColor:g.color.fillNeutral},"brand-focus":{contentColor:g.color.fillNeutral}},themeStyles:ln},gl={themeKeys:{color:"textColor"},base:{textAlign:"left",color:g.color.textNeutral,...g.typography.headline2},toneModes:{focus:{color:g.color.textInverse},disabled:{color:g.color.textNeutralDisabled},"inverse-focus":{color:g.color.textNeutral}},themeStyles:ln};W(dl);W(fl);W(gl);const{Key:{styles:Lo,defaultTone:Qc}={styles:{},defaultTone:"neutral"}}=(Un=g)==null?void 0:Un.componentConfig,pl={themeKeys:{keySpacing:"keySpacing",textAlign:"textAlign",borderRadius:"borderRadius",color:"backgroundColor",justifyContent:"justifyContent",baseWidth:"baseWidth",sizes:"sizes",contentColor:"contentColor"},base:{keySpacing:g.spacer.md,height:g.spacer.md*9,paddingX:g.spacer.md,contentColor:g.color.fillNeutral,sizes:{sm:1,md:2,lg:3,xl:4,xxl:5},padding:[g.spacer.xxxl,g.spacer.xl],baseWidth:g.spacer.md*7,color:g.color.interactiveNeutral,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:g.radius.sm},toneModes:{focus:{color:g.color.interactiveNeutralFocus,contentColor:g.color.fillInverse},disabled:{color:g.color.fillNeutralDisabled,contentColor:g.color.fillNeutralDisabled},inverse:{color:g.color.interactiveInverse},"inverse-focus":{color:g.color.interactiveInverseFocus,contentColor:g.color.fillNeutral},"brand-focus":{contentColor:g.color.fillNeutral}},themeStyles:Lo},ml={themeKeys:{color:"textColor"},base:{textAlign:"left",color:g.color.textNeutral,...g.typography.headline2},toneModes:{focus:{color:g.color.textInverse},disabled:{color:g.color.textNeutralDisabled},"inverse-focus":{color:g.color.textNeutral}},themeStyles:Lo};W(pl);W(ml);const{Tile:{styles:ur,defaultTone:jc}={styles:{},defaultTone:"neutral"}}=(zn=g)==null?void 0:zn.componentConfig,{Surface:{styles:xl}={styles:{}}}=(On=g)==null?void 0:On.componentConfig,yl={themeKeys:{alpha:"alpha"},base:{width:400,height:240,padding:[40,10],paddingYProgress:g.spacer.xl,paddingYBetweenContent:g.spacer.md,borderRadius:g.radius.md,alpha:g.alpha.primary},toneModes:{disabled:{alpha:g.alpha.inactive}},themeStyles:{...xl,...ur}},vl={themeKeys:{},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart",mountY:1},toneModes:{},themeStyles:ur},Al={themeKeys:{},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart"},toneModes:{},themeStyles:ur},Sl={themeKeys:{},base:{width:g.spacer.lg*5,height:g.spacer.xxl+g.spacer.md},toneModes:{},themeStyles:ur};W(yl);W(vl);W(Al);W(Sl);const zr={Column:{flexDirection:"column",display:"flex",width:320,height:600,y:360,gap:20,zIndex:101,transition:{x:{duration:250,easing:"ease-in-out"}},x:8,focus:{x:g.layout.marginX}},Gradient:{zIndex:99,color:z("#000000"),src:"/assets/sidenav.png",alpha:0,width:1200,height:1080,focus:{alpha:1},transition:{alpha:!0}},NavButton:{zIndex:102,height:70,width:100,borderRadius:8,focus:{color:z(g.color.material)},active:{width:328,height:70}}},wl="/solid-demo-app/",bl=[{name:"experiment",width:81,height:100,x:0,y:0},{name:"trending",width:100,height:56,x:81,y:0},{name:"tv",width:100,height:68,x:181,y:0},{name:"movie",width:94,height:100,x:282,y:0}];function Tl(n){const t=Ba(wl+"assets/icons_white.png",bl);return c(D,H(n,{get texture(){return t[n.name]},get width(){return t[n.name].props.width},get height(){return t[n.name].props.height},get x(){return(100-(t[n.name].props.width||0))/2},get y(){return(100-(t[n.name].props.height||0))/2}}))}function Dt(n){return c(D,H(n,{forwardStates:!0,get style(){return zr.NavButton},get children(){return[c(D,{y:-16,get children(){return c(Tl,{scale:.5,get name(){return n.icon}})}}),c(M,{get style(){return{...g.typography.button1,fontSize:38,x:116,y:16,height:50,alpha:0,active:{alpha:1}}},get children(){return n.children}})]}}))}function _l(n){let t;const e=ft();function r(){t.states.add("focus"),this.children.forEach(i=>i.states.add("active")),this.children.selected.setFocus()}function o(){t.states.remove("focus"),this.selected=0,this.children.forEach(i=>i.states.remove("active"))}return[c(J,H(n,{onFocus:r,onBlur:o,get style(){return zr.Column},scroll:"none",get children(){return[c(Dt,{onEnter:()=>e("/browse/all"),icon:"trending",children:"Trending"}),c(Dt,{icon:"movie",onEnter:()=>e("/browse/movie"),children:"Movies"}),c(Dt,{icon:"tv",onEnter:()=>e("/browse/tv"),children:"TV"}),c(Dt,{icon:"experiment",onEnter:()=>e("/examples"),children:"Examples"})]}})),c(D,{ref(i){var s=t;typeof s=="function"?s(i):t=i},get style(){return zr.Gradient}})]}const Cl={color:255,height:90,width:330,x:1500,y:20,alpha:.8,zIndex:100},Ut={x:10,fontSize:36,textColor:z("#ffffff")},zt={fontSize:36,textColor:z("#ffffff")},[El,Rl]=Y(0),[Il,Bl]=Y(0),[Nl,Fo]=Y(99),[kl,Ml]=Y(0);let Or=0,Wr=0;const Ll=nn(()=>{Wr=0,Or=0,Fo(99)},1e4),Fl=n=>{n&&(Rl(n),Fo(t=>Math.min(n,t)),Ml(t=>Math.max(n,t)),Wr+=n,Or++,Bl(Math.round(Wr/Or)),Ll())};function Pl(n){n.renderer.on("fpsUpdate",(t,e)=>{const r=typeof e=="number"?e:e.fps;r>5&&Fl(r)})}const Dl=n=>c(D,H(n,{style:Cl,get children(){return[c(D,{get children(){return[c(M,{style:Ut,children:"FPS:"}),c(M,{style:zt,x:94,get children(){return El().toString()}})]}}),c(D,{x:160,get children(){return[c(M,{style:Ut,children:"AVG:"}),c(M,{style:zt,x:104,get children(){return Il().toString()}})]}}),c(D,{x:0,y:40,get children(){return[c(M,{style:Ut,children:"MIN:"}),c(M,{style:zt,x:94,get children(){return Nl().toString()}})]}}),c(D,{x:160,y:40,get children(){return[c(M,{style:Ut,children:"MAX:"}),c(M,{style:zt,x:104,get children(){return kl().toString()}})]}})]}})),Ul=n=>{wa({Announcer:"a",Menu:"m",Escape:"Escape"});const t=Ia();t.enabled=!1;const e=ft();let r,o;return c(D,{ref(i){var s=window.APP;typeof s=="function"?s(i):window.APP=i},onAnnouncer:()=>t.enabled=!t.enabled,onLast:()=>history.back(),onMenu:()=>e("/"),style:{width:1920,height:1080},onLeft:()=>{if(r.states.has("focus"))return!1;o=jr(),r.setFocus()},onRight:()=>r.states.has("focus")&&o.setFocus(),get children(){return[c(ka,{}),c(Dl,{}),lr(()=>n.children),c(_l,{ref(i){var s=r;typeof s=="function"?s(i):r=i}})]}})},ge={Page:{width:1920,height:1080},headlineText:{width:1200,height:240,x:360,y:455,contain:"both",fontSize:66,textAlign:"center"},headlineSubText:{width:960,height:170,x:530,y:655,contain:"both",fontSize:48,textAlign:"center"},itemsContainer:{width:g.layout.screenW,height:600,y:560,x:0,zIndex:2},Thumbnail:{borderRadius:16,width:185,height:278,scale:1,zIndex:2,transition:{scale:{duration:250,easing:"ease-in-out"}},border:{width:0,color:0},focus:{scale:1.1,border:{color:g.color.materialBrand,width:6}}},FocusRing:{borderRadius:16,width:194,height:286,y:-5,x:-5,zIndex:-1},FPS:{color:255,height:42,width:140,x:20,y:20,zIndex:100},FPSLabel:{x:10,y:0,fontSize:36,textColor:z("#ffffff")},FPSValue:{x:90,y:0,fontSize:36,textColor:z("#ffffff")},showHeadline:{x:70,y:20},headlineBlur:{width:1920,height:150,x:0,y:0,zIndex:14,alpha:.9,color:z("#000000")},RowTitle:{height:60,width:300,marginTop:20,fontSize:36,color:z("#f0f0f0"),zIndex:2},Row:{display:"flex",justifyContent:"spaceBetween",height:300},Column:{display:"flex",flexDirection:"column",justifyContent:"flexStart",gap:20,width:g.layout.screenW-2*g.layout.marginX,x:g.layout.marginX+g.layout.gutterX,y:48,transition:{y:{duration:250,easing:"ease-in-out"}},zIndex:2},Rect:{width:250,height:100,y:10,x:300,color:z("#0000ff")},peopleBio:{...g.typography.body1,contain:"both",width:1500,height:400}},Jt={width:120,height:40,color:z("#000000"),borderRadius:8,border:{width:2,color:z("#3333ff")},scale:1,focus:{scale:1.1,border:{width:5,color:z("#333333")}},transition:{scale:!0,color:!0}},zl={color:z("#00A699"),height:8,y:2,x:-4,width:Jt.width+8},Ol={fontSize:12,y:12,contain:"width",textAlign:"center",color:z("#F6F6F9"),height:Jt.height,width:Jt.width},er={container:Jt,topBar:zl,text:Ol},Wn={width:386,height:136,color:z("#715cab"),focus:{color:z("#5a39a2")},disabled:{color:z("#291d43")}},Wl={fontSize:32,contain:"width",textAlign:"center",mountY:-.35,color:z("#FFFFFF"),height:Wn.height,width:Wn.width,focus:{fontSize:40},disabled:{color:z("#909090")}};function Xl(n){return c(D,H(n,{get style(){return ge.Thumbnail}}))}function tr(n){const[t,e]=si(n,["items"]);return c(V,H(e,{get style(){return ge.Row},get children(){return c(sr,{get each(){return t.items},children:r=>c(Xl,r)})}}))}function Yl(n){return c(D,H(n,{forwardStates:!0,get style(){return er.container},get children(){return c(M,{get style(){return er.text},get children(){return n.children}})}}))}const $l="eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIyZDE4YjEwMTA0YjdiZTlkNjFiMWYwYjVlMGEwNzM2OCIsInN1YiI6IjYwZTVjMTdlNGNhNjc2MDA3NTA4Njc3MSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.D_nqH9kd-bhhWzeVsTDPYhHnsUaNAuyAa6YATmKHqsA",Hl="https://api.themoviedb.org/3";let Po,Do;const Gl="w185",Ql={headers:{"Content-Type":"application/json",Authorization:"Bearer "+$l}};function bt(n,t=Gl){return Do+t+n}function jl(n,t={}){return Po?Xr(n,t):Uo().then(()=>Xr(n,t))}function Xr(n,t={}){return fetch(Hl+n,{...Ql,...t}).then(e=>e.json())}function Uo(){return Xr("/configuration").then(n=>{var t;return Po=n,Do=(t=n.images)==null?void 0:t.secure_base_url,n})}const je={get:jl,loadConfig:Uo};function Vl(n,t){return n.length>t?n.substring(0,t-3)+"...":n}function Kl(n,t=7){let e=[];for(let r=0,o=n.length;r<o;r+=t)e.push(n.slice(r,r+t));return e}function Rt(n=[]){return n.map(t=>({src:bt(t.poster_path||t.profile_path),tileSrc:bt(t.backdrop_path||t.profile_path,"w300"),backdrop:bt(t.backdrop_path,"w1280"),href:"/entity/".concat(t.media_type||"people","/").concat(t.id),shortTitle:Vl(t.title||t.name,30),title:t.title||t.name,data:t,entityInfo:{type:t.media_type||"people",id:t.id},heroContent:{title:t.title||t.name,description:t.overview}}))}let wr=new Map;const Ot=new Map;function ql(n){return t=>{const e="/trending/".concat(n,"/week?page=").concat(t);if(wr.has(e))return wr.get(e);let r=je.get(e).then(o=>{let i=o.results.filter(l=>!l.adult),s=(Ot.has(n)?Ot.get(n):[]).concat(Rt(i)),a=Kl(s);return a[a.length-1].length<7?Ot.set(n,a.pop()):Ot.delete(n),a});return wr.set(e,r),r}}function Zl(n){const[t,e]=Y([]),[r,o]=Y(1),[i,s]=Y(!1),[a]=Qe(r,n);return br(()=>{const l=a();l&&Ko(()=>{l.length===0&&s(!0),e(d=>[...d,...l])})}),{pages:t,page:r,setPage:o,setPages:e,end:i,setEnd:s}}const dr=1100,Jl={...g.typography.display2,width:dr,height:58,contain:"both"},ec=n=>c(M,H(n,{style:Jl,get children(){return n.children}})),tc={...g.typography.body1,width:dr,height:72,contain:"both"},rc={fontSize:20,lineHeight:20},nc=n=>c(M,H(n,{style:tc,get children(){return n.children}}));function oc(n){return[c(Me,{get when(){return(n==null?void 0:n.rtCrit)&&(n==null?void 0:n.rtCrit)!=="0"},get children(){return[c(D,{src:"https://upload.wikimedia.org/wikipedia/commons/b/b6/Tomato-Torrent-Icon.png",title:"Rotten Tomatoes Rating",style:{width:30,height:30,marginRight:-6}}),c(M,{style:Yr,get children(){return n.rtCrit+"%"}})]}}),c(Me,{get when(){return(n==null?void 0:n.rtFan)&&(n==null?void 0:n.rtFan)!=="0"},get children(){return[c(D,{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/Rotten_Tomatoes_positive_audience.svg/80px-Rotten_Tomatoes_positive_audience.svg.png",title:"Rotten Tomatoes Rating",style:{width:24,height:30,marginRight:-6}}),c(M,{style:Yr,get children(){return n.rtFan+"%"}})]}})]}const ic=n=>(()=>{var t=dt("node");return en(Co,t,()=>[8,15,13,15]),cr(t,H(n,{style:{color:"0x00000099",borderRadius:8,border:{width:3,color:"0xffffffff"}}}),!0),Jr(t,c(M,{style:rc,get children(){return n.children}})),t})(),Yr=g.typography.body2,sc=n=>c(D,{style:{display:"flex",flexDirection:"row",gap:12,width:dr,height:48},get children(){return[c(M,{style:Yr,get children(){return n.metaText}}),c(sr,{get each(){return n.badges},children:t=>c(ic,{y:-5,children:t})}),lr(()=>oc(n.reviews))]}}),zo=n=>c(D,H(n,{style:{display:"flex",flexDirection:"column",width:dr,height:160,gap:16},get children(){return[c(ec,{get children(){return n.title}}),c(nc,{get children(){return n.description}}),c(sc,{get metaText(){return n.metaText},get badges(){return n.badges},get reviews(){return n.reviews}})]}}));function ac(n){const t=Math.floor(n/60),e=n%60;return t+"h "+(e<10?"0":"")+e+"m"}function Xn(n){return n.split("-")[0]}function lc({type:n,id:t}){return je.get("/".concat(n,"/").concat(t,"/recommendations")).then(({results:e})=>e.length?Rt(e.slice(0,7)):je.get("/trending/".concat(n,"/week?page=1")).then(({results:r})=>Rt(r.slice(0,7))))}function cc({type:n,id:t}){return je.get("/".concat(n,"/").concat(t,"/credits")).then(({cast:e})=>Rt(e.slice(0,7)))}function Oo({type:n,id:t}){let e=n==="movie"?{rtCrit:86,rtFan:92}:{};return je.get("/".concat(n,"/").concat(t)).then(r=>({backgroundImage:bt(r.backdrop_path,"original"),heroContent:{title:r.title||r.name,description:r.overview,badges:["HD"],metaText:n==="movie"?ac(r.runtime)+" - "+r.release_date:"".concat(Xn(r.first_air_date)," - ").concat(Xn(r.last_air_date)),reviews:e},...r}))}const Yn=()=>{const n=rn(),[t,e]=Y(0),[r,o]=Y();Qe(r,Oo);const[i,s]=Y({}),a=ft(),l=jn(()=>0),d=re(()=>Zl(ql(n.filter||"all")));ze(Xe(jr,m=>{m.backdrop&&Ye(m.backdrop),m.heroContent&&s(m.heroContent)},{defer:!0}));function u(){var y;(y=this.children.selected)==null||y.setFocus(),e((this.y||0)*-1+24);let m=d().pages().length;(m===0||this.parent.selected&&this.parent.selected>=m-2)&&d().setPage(p=>p+1)}function f(){let m=this.children.selected;m&&m.href,a(m.href)}return c(Me,{get when(){return d().pages().length},get children(){return[c(zo,H({y:360,x:150},i)),c(D,{clipping:!0,get style(){return ge.itemsContainer},get children(){return c(J,{plinko:!0,announce:"All Trending - Week",get y(){return t()},get style(){return ge.Column},get children(){return c(sr,{get each(){return d().pages()},children:(m,y)=>c(tr,{get autofocus(){return l(y())},items:m,onFocus:u,onEnter:f})})}})}})]}})},hc=()=>{const n=ft(),t=jn(()=>0);function e(){let l=this.children.selected;l&&l.id,n("/"+l.id)}const r=[{title:"Flex Row",id:"flex",description:"Flex Row Implementation"},{title:"Flex Column",id:"flexcolumn",description:"Flex Column Implementation"},{title:"Flex Row Vertical Align",id:"flexsize",description:"Flex Row Vertical Align Implementation"},{title:"Flex Column Vertical Align",id:"flexcolumnsize",description:"Flex Column Vertical Align Implementation"},{title:"Buttons",id:"buttons",description:"Demo a few buttons"},{title:"Text",id:"text",description:"Text layout with flexbox"}];function o(l){const d={width:370,height:320,borderRadius:6,scale:1,color:405488895,transition:{color:!0,scale:!0},focus:{scale:1.1,color:4294967295}},[u,f]=Y(4294967295);return c(D,H(l,{onFocus:()=>f(255),onBlur:()=>f(4294967295),style:d,get children(){return c(D,{x:30,get children(){return[c(M,{y:30,fontSize:84,get color(){return u()},get children(){return l.index}}),c(M,{y:140,fontSize:42,width:340,height:42,contain:"both",get color(){return u()},get children(){return l.title}}),c(M,{y:200,fontSize:28,width:330,contain:"width",get color(){return u()},get children(){return l.description}})]}})}}))}const[i,s]=Y(140);function a(l){s(l.selected*-400+140)}return c(D,{colorTop:1147903743,colorBottom:743406847,get children(){return[c(D,{x:120,get children(){return[c(D,{src:"/assets/solidjs.png",width:101,height:90,y:40}),c(M,{fontSize:90,x:110,y:40,children:"Examples"}),c(D,{y:140,height:1,width:1800,color:3906468351})]}}),c(V,{onSelectedChanged:a,onEnter:e,transition:{x:{delay:20,duration:300}},get x(){return i()},y:300,width:4400,get style(){return ge.Row},justifyContent:"flexStart",gap:40,get children(){return c(sr,{each:r,children:(l,d)=>c(o,H({get autofocus(){return t(d())},get index(){return d()}},l))})}})]}})},uc=()=>{const n={width:900,height:500,y:350,x:150,gap:25,display:"flex",flexDirection:"column",justifyContent:"flexStart",color:z("00000000")},t={width:900,height:36,gap:6,display:"flex",flexDirection:"row",justifyContent:"flexStart",color:z("00000000")},e={fontSize:42},r={width:n.width,fontSize:26,contain:"width"},o={fontSize:26};return ht(()=>{Ye("0x000000ff")}),c(D,{autofocus:!0,style:n,get children(){return[c(M,{style:e,children:"Title of the Page"}),c(M,{style:r,children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer vel tempor tellus. Sed eu leo purus. Vestibulum sollicitudin eget tellus a varius. Phasellus est turpis, volutpat sed blandit sit amet, rutrum sit amet mauris. In dignissim elit orci, a sollicitudin ipsum faucibus et. Quisque vel quam rutrum, faucibus augue sed, scelerisque nunc."}),c(D,{style:t,get children(){return[c(M,{style:o,children:"Subline Text"}),c(D,{width:28,height:28,src:"/assets/rt-popcorn.png"}),c(M,{style:o,children:"More Text"})]}})]}})},dc=()=>{function n(o,i){this.states.toggle("disabled")}const t={display:"flex",justifyContent:"flexStart",width:1500,height:300,color:z("00000000"),gap:26,y:400};function e(o){return c(D,H(o,{forwardStates:!0,get style(){return er.container},get children(){return c(M,{get style(){return er.text},get children(){return o.children}})}}))}const r=o=>(()=>{var i=dt("node");return en(Co,i,()=>[10,15]),cr(i,H(o,{get style(){return{color:z("#000000be"),borderRadius:8,border:{width:2,color:z("#ffffff")}}}}),!0),Jr(i,c(M,{style:{fontSize:20},get children(){return o.children}})),i})();return[c(V,{x:100,y:200,gap:5,style:t,get children(){return[c(r,{children:"HD"}),c(r,{children:"PG13"}),c(r,{children:"NC17"}),c(M,{fontSize:30,children:"I like bananas"}),c(r,{children:"DOLBY"})]}}),c(V,{x:100,gap:40,style:t,get children(){return[c(e,{autofocus:!0,onEnter:n,children:"TV Shows"}),c(e,{states:{active:!0,disabled:!1},children:"Movies"}),c(e,{states:"active",children:"Sports"}),c(e,{states:"disabled",children:"News"})]}})]},fc=()=>{const n={display:"flex",justifyContent:"flexStart",width:1600,height:110,color:z("#4dabf5")},t={fontSize:44,marginTop:25,marginBottom:-20,skipFocus:!0};function e(a){return c(D,H(a,{style:{width:200,height:100,y:5,color:392801023}}))}const[r,o]=Y(50);function i(){var a;(a=this.children.selected)==null||a.setFocus(),o(150+(this.y||0)*-1)}ht(()=>{Ye("#333333")});const s=50;return c(J,{x:160,get y(){return r()},gap:30,height:850,get width(){return n.width},get style(){return ge.Column},get children(){return[c(M,{style:t,children:"Flex Start"}),c(V,{gap:s,style:n,onFocus:i,get children(){return[c(e,{autofocus:!0}),c(e,{}),c(e,{}),c(e,{}),c(e,{})]}}),c(M,{style:t,children:"Flex Start - Margin Left"}),c(V,{gap:s,style:n,onFocus:i,get children(){return[c(e,{marginLeft:100}),c(e,{}),c(e,{marginLeft:100}),c(e,{}),c(e,{})]}}),c(M,{style:t,children:"Flex End"}),c(V,{gap:s,justifyContent:"flexEnd",style:n,onFocus:i,get children(){return[c(e,{}),c(e,{}),c(e,{}),c(e,{}),c(e,{})]}}),c(M,{style:t,children:"Flex End - Margin Right"}),c(V,{gap:s,justifyContent:"flexEnd",style:n,onFocus:i,get children(){return[c(e,{}),c(e,{marginRight:100}),c(e,{}),c(e,{}),c(e,{marginRight:100})]}}),c(M,{style:t,children:"Center - No Margin Support"}),c(V,{gap:s,justifyContent:"center",style:n,onFocus:i,get children(){return[c(e,{}),c(e,{}),c(e,{}),c(e,{}),c(e,{})]}}),c(M,{style:t,children:"Space Between - No Margin Support"}),c(V,{gap:s,justifyContent:"spaceBetween",style:n,onFocus:i,get children(){return[c(e,{}),c(e,{}),c(e,{}),c(e,{}),c(e,{})]}}),c(M,{style:t,children:"Space Evenly - No Margin Support"}),c(V,{gap:s,justifyContent:"spaceEvenly",style:n,onFocus:i,get children(){return[c(e,{}),c(e,{}),c(e,{}),c(e,{}),c(e,{})]}})]}})},gc=()=>{const n={display:"flex",justifyContent:"flexStart",width:1600,height:110,color:z("#4dabf5")},t={fontSize:44,marginTop:25,marginBottom:-20,skipFocus:!0};function e(l){return c(D,H(l,{style:{width:200,height:100,y:5,color:392801023}}))}function r(){return Math.floor(Math.random()*91)+10}const[o,i]=Y(50);function s(){var l;(l=this.children.selected)==null||l.setFocus(),i(150+(this.y||0)*-1)}ht(()=>{Ye("#333333")});const a=50;return c(J,{x:160,get y(){return o()},gap:30,height:850,get width(){return n.width},get style(){return ge.Column},get children(){return[c(M,{style:t,children:"Flex Start - AlignItems: center"}),c(V,{alignItems:"center",gap:a,style:n,onFocus:s,get children(){return[c(e,{autofocus:!0,get height(){return r()}}),c(e,{get height(){return r()}}),c(e,{get height(){return r()}}),c(e,{get height(){return r()}}),c(e,{get height(){return r()}})]}}),c(M,{style:t,children:"Flex Start - Margin Left - AlignItems: flexStart"}),c(V,{gap:a,alignItems:"flexStart",style:n,onFocus:s,get children(){return[c(e,{marginLeft:100,get height(){return r()}}),c(e,{get height(){return r()}}),c(e,{marginLeft:100,get height(){return r()}}),c(e,{get height(){return r()}}),c(e,{get height(){return r()}})]}}),c(M,{style:t,children:"Flex End - AlignItems: flexEnd"}),c(V,{gap:a,justifyContent:"flexEnd",alignItems:"flexEnd",style:n,onFocus:s,get children(){return[c(e,{get height(){return r()}}),c(e,{get height(){return r()}}),c(e,{get height(){return r()}}),c(e,{get height(){return r()}}),c(e,{get height(){return r()}})]}}),c(M,{style:t,children:"Flex End - Margin Right"}),c(V,{gap:a,justifyContent:"flexEnd",style:n,onFocus:s,get children(){return[c(e,{get height(){return r()}}),c(e,{marginRight:100,get height(){return r()}}),c(e,{get height(){return r()}}),c(e,{get height(){return r()}}),c(e,{marginRight:100,get height(){return r()}})]}}),c(M,{style:t,children:"Center - No Margin Support"}),c(V,{gap:a,justifyContent:"center",style:n,onFocus:s,get children(){return[c(e,{get height(){return r()}}),c(e,{get height(){return r()}}),c(e,{get height(){return r()}}),c(e,{get height(){return r()}}),c(e,{get height(){return r()}})]}}),c(M,{style:t,children:"Space Between - No Margin Support"}),c(V,{gap:a,justifyContent:"spaceBetween",style:n,onFocus:s,get children(){return[c(e,{get height(){return r()}}),c(e,{get height(){return r()}}),c(e,{get height(){return r()}}),c(e,{get height(){return r()}}),c(e,{get height(){return r()}})]}}),c(M,{style:t,children:"Space Evenly - No Margin Support"}),c(V,{gap:a,justifyContent:"spaceEvenly",style:n,onFocus:s,get children(){return[c(e,{get height(){return r()}}),c(e,{get height(){return r()}}),c(e,{get height(){return r()}}),c(e,{get height(){return r()}}),c(e,{get height(){return r()}})]}})]}})},pc=()=>{const n={display:"flex",justifyContent:"spaceEvenly",width:1920,y:100,height:880,color:z("00000000")},t={display:"flex",flexDirection:"column",justifyContent:"flexStart",color:z("#4dabf5"),height:850,width:80},e={fontSize:44,y:20,x:150};function r(d){const u={width:o(),height:80,x:5,color:z("#1769aa")};return c(D,H(d,{style:u}))}function o(){return Math.floor(Math.random()*61)+10}const[i,s]=Y(50);function a(){var d;(d=this.children.selected)==null||d.setFocus(),s(150+(this.y||0)*-1)}ht(()=>{Ye("#333333")});const l=50;return[c(M,{style:e,children:"Start, MarginTop, End, MarginBottom, Center, Between, Evenly"}),c(V,{gap:l,style:n,onFocus:a,get children(){return[c(J,{gap:30,style:t,alignItems:"center",get children(){return[c(r,{autofocus:!0}),c(r,{}),c(r,{}),c(r,{}),c(r,{})]}}),c(J,{gap:l,style:t,onFocus:a,alignItems:"flexStart",get children(){return[c(r,{marginTop:100}),c(r,{}),c(r,{marginTop:100}),c(r,{}),c(r,{})]}}),c(J,{gap:l,alignItems:"flexEnd",justifyContent:"flexEnd",style:t,onFocus:a,get children(){return[c(r,{}),c(r,{}),c(r,{}),c(r,{}),c(r,{})]}}),c(J,{gap:l,justifyContent:"flexEnd",style:t,onFocus:a,get children(){return[c(r,{}),c(r,{marginBottom:100}),c(r,{}),c(r,{}),c(r,{marginBottom:100})]}}),c(J,{gap:l,justifyContent:"center",style:t,onFocus:a,get children(){return[c(r,{}),c(r,{}),c(r,{}),c(r,{}),c(r,{})]}}),c(J,{gap:l,justifyContent:"spaceBetween",style:t,onFocus:a,get children(){return[c(r,{}),c(r,{}),c(r,{}),c(r,{}),c(r,{})]}}),c(J,{gap:l,justifyContent:"spaceEvenly",style:t,onFocus:a,get children(){return[c(r,{}),c(r,{}),c(r,{}),c(r,{}),c(r,{})]}})]}})]},mc=()=>{const n={display:"flex",justifyContent:"spaceEvenly",width:1920,y:100,height:880,color:z("00000000")},t={display:"flex",flexDirection:"column",justifyContent:"flexStart",color:z("#4dabf5"),height:850,width:60},e={fontSize:44,y:20,x:150};function r(l){const d={width:50,height:80,x:5,color:z("#1769aa")};return c(D,H(l,{style:d}))}const[o,i]=Y(50);function s(){var l;(l=this.children.selected)==null||l.setFocus(),i(150+(this.y||0)*-1)}ht(()=>{Ye("#333333")});const a=50;return[c(M,{style:e,children:"Start, MarginTop, End, MarginBottom, Center, Between, Evenly"}),c(V,{gap:a,style:n,onFocus:s,get children(){return[c(J,{gap:30,style:t,get children(){return[c(r,{autofocus:!0}),c(r,{}),c(r,{}),c(r,{}),c(r,{})]}}),c(J,{gap:a,style:t,onFocus:s,get children(){return[c(r,{marginTop:100}),c(r,{}),c(r,{marginTop:100}),c(r,{}),c(r,{})]}}),c(J,{gap:a,justifyContent:"flexEnd",style:t,onFocus:s,get children(){return[c(r,{}),c(r,{}),c(r,{}),c(r,{}),c(r,{})]}}),c(J,{gap:a,justifyContent:"flexEnd",style:t,onFocus:s,get children(){return[c(r,{}),c(r,{marginBottom:100}),c(r,{}),c(r,{}),c(r,{marginBottom:100})]}}),c(J,{gap:a,justifyContent:"center",style:t,onFocus:s,get children(){return[c(r,{}),c(r,{}),c(r,{}),c(r,{}),c(r,{})]}}),c(J,{gap:a,justifyContent:"spaceBetween",style:t,onFocus:s,get children(){return[c(r,{}),c(r,{}),c(r,{}),c(r,{}),c(r,{})]}}),c(J,{gap:a,justifyContent:"spaceEvenly",style:t,onFocus:s,get children(){return[c(r,{}),c(r,{}),c(r,{}),c(r,{}),c(r,{})]}})]}})]},xc=()=>{function n(i,s){this.states.toggle("disabled")}const t={display:"flex",justifyContent:"flexStart",width:1500,height:300,color:z("00000000"),gap:26,y:400,x:100},e={width:386,height:136,color:"0x715cabff",focus:{color:"0x5a39a2ff"},disabled:{color:"0x291d43ff"}},r=["RoundedRectangle",{radius:65}];function o(i){return c(D,H(i,{forwardStates:!0,style:e,shader:r,get children(){return c(M,{style:Wl,get children(){return i.children}})}}))}return c(V,{style:t,get children(){return[c(o,{autofocus:!0,onEnter:n,children:"Focused"}),c(o,{states:{active:!0,disabled:!1},children:"Normal"}),c(o,{states:"disabled",children:"Disabled"})]}})},yc="https://storage.googleapis.com/shaka-demo-assets/angel-one/dash.mpd";function vc(){shaka.polyfill.installAll(),shaka.Player.isBrowserSupported()?Ac():console.error("Browser not supported!")}async function Ac(){const n=document.getElementById("video"),t=new shaka.Player;await t.attach(n),window.player=t,t.addEventListener("error",Sc);try{await t.load(yc),console.log("The video has now been loaded!")}catch(e){Wo(e)}}function Sc(n){Wo(n.detail)}function Wo(n){console.error("Error code",n.code,"object",n)}function wc(){const n=document.getElementById("video");return n.hidden=!1,setTimeout(()=>n.play(),50),n.focus(),n}function bc(){const n=document.getElementById("video");return n.hidden=!0,n.pause(),n}document.addEventListener("DOMContentLoaded",vc);const Tc=()=>{const n=rn(),t=ft(),[e]=Qe(()=>({...n}),Oo),[r]=Qe(()=>({...n}),cc),[o]=Qe(()=>({...n}),lc),[i,s]=Y(0);ze(Xe(e,w=>{Ye(w.backgroundImage)},{defer:!0}));const a=600,l={color:z("#000000"),alpha:0,width:1900,height:890,x:10,y:a,borderRadius:30};function d(){var w;(w=this.children.selected)==null||w.setFocus(),p.y=a,x.y=a,x.alpha=0}function u(){var w;(w=this.children.selected)==null||w.setFocus(),p.y=200,x.y=160,x.alpha=.9}function f(){let w=this.children.selected;w&&w.href,t(w.href)}function m(){bc(),document.getElementsByTagName("canvas")[0].focus(),Cr(T),s(0)}function y(){const w=wc();Cr(w),s(.9)}let p,x,T;return c(Me,{get when(){return e()},keyed:!0,get children(){return[c(D,{onUp:()=>T.setFocus(),onEscape:m,get children(){return[c(zo,H({y:360,x:150},()=>e().heroContent)),c(Yl,{autofocus:!0,ref(w){var S=T;typeof S=="function"?S(w):T=w},y:560,x:150,onDown:()=>p.setFocus(),onEnter:y,children:"Watch Trailer"}),c(J,{ref(w){var S=p;typeof S=="function"?S(w):p=w},y:a,x:140,get style(){return ge.Column},zIndex:5,get children(){return c(Me,{get when(){return lr(()=>!!o())()&&r()},get children(){return[c(M,{skipFocus:!0,get style(){return ge.RowTitle},children:"Recommendations"}),c(tr,{onFocus:d,onEnter:f,get items(){return o()}}),c(M,{skipFocus:!0,get style(){return ge.RowTitle},children:"Cast and Crew"}),c(tr,{onFocus:u,onEnter:f,get items(){return r()}})]}})}}),c(D,{ref(w){var S=x;typeof S=="function"?S(w):x=w},style:l,transition:{alpha:!0,y:!0}})]}}),c(D,{get alpha(){return i()},get color(){return z("#000000")},zIndex:200,transition:{alpha:!0}})]}})};function _c({id:n}){return je.get("/person/".concat(n,"/combined_credits")).then(({cast:t})=>Rt(t.slice(0,7)))}function Cc({id:n}){return je.get("/person/".concat(n)).then(t=>({backgroundImage:bt(t.profile_path,"original"),heroContent:{title:t.title||t.name,description:t.biography},...t}))}const Ec=()=>{const n=rn(),t=ft(),[e]=Qe(()=>({...n}),Cc),[r]=Qe(()=>({...n}),_c);ze(Xe(e,s=>{Ye(s.backgroundImage)},{defer:!0}));const o={color:z("#000000"),alpha:.8,width:1540,height:440,x:130,y:180,borderRadius:30};function i(){let s=this.children.selected;s&&s.href,t(s.href)}return c(Me,{get when(){return e()},keyed:!0,get children(){return[c(D,{x:150,y:200,get style(){return ge.Column},zIndex:3,get children(){return[c(M,{get style(){return g.typography.display2},get children(){return e().name}}),c(M,{get style(){return ge.peopleBio},get children(){return e().biography}})]}}),c(D,{style:o}),c(J,{y:670,x:140,get style(){return ge.Column},get children(){return c(Me,{get when(){return r()},get children(){return[c(M,{skipFocus:!0,get style(){return ge.RowTitle},children:"Credits"}),c(tr,{autofocus:!0,onEnter:i,get items(){return r()}})]}})}})]}})},Rc=()=>(()=>{var n=dt("node");return Us(n,"style",{width:1920,height:1080,color:868483072}),n})(),Ic=new URL("AppCoreExtensions-BOmK1eVF.js",import.meta.url).href;we.debug=!1;we.animationsEnabled=!0;we.fontSettings.fontFamily="Ubuntu";we.fontSettings.color=z("#ffffff");we.fontSettings.fontSize=100;Ds(()=>c(Ms,{options:{coreExtensionModule:Ic,threadXCoreWorkerUrl:void 0,fpsUpdateInterval:1e3},ref:n=>Pl(n),get children(){return c(ga,{root:n=>c(Ul,n),get children(){return[c(pe,{path:"",component:Yn}),c(pe,{path:"examples",component:hc}),c(pe,{path:"browse/:filter",component:Yn}),c(pe,{path:"text",component:uc}),c(pe,{path:"buttons",component:dc}),c(pe,{path:"flex",component:fc}),c(pe,{path:"flexsize",component:gc}),c(pe,{path:"flexcolumnsize",component:pc}),c(pe,{path:"flexcolumn",component:mc}),c(pe,{path:"buttonsmaterial",component:xc}),c(pe,{path:"entity/people/:id",component:Ec}),c(pe,{path:"entity/:type/:id",component:Tc}),c(pe,{path:"*all",component:Rc})]}})}}));export{Nc as __vite_legacy_guard};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=index-BMatJ4V3.js.map
