const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Buttons-Dqr6OPlT.js","assets/Button-gbR7XSuo.js","assets/Entity-Dc3fE06P.js","assets/Login-DN7NLOWR.js"])))=>i.map(i=>d[i]);
var To=Object.defineProperty;var So=(n,t,e)=>t in n?To(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var c=(n,t,e)=>So(n,typeof t!="symbol"?t+"":t,e);function Cd(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();const wo="modulepreload",_o=function(n){return"/solid-demo-app/"+n},Ln={},me=function(t,e,r){let s=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),i=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.all(e.map(a=>{if(a=_o(a),a in Ln)return;Ln[a]=!0;const l=a.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(document.querySelector('link[href="'.concat(a,'"]').concat(d)))return;const f=document.createElement("link");if(f.rel=l?"stylesheet":wo,l||(f.as="script",f.crossOrigin=""),f.href=a,i&&f.setAttribute("nonce",i),document.head.appendChild(f),l)return new Promise((h,p)=>{f.addEventListener("load",h),f.addEventListener("error",()=>p(new Error("Unable to preload CSS for ".concat(a))))})}))}return s.then(()=>t()).catch(o=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o})},Eo={BASE_URL:"/solid-demo-app/",DEV:!1,LEGACY:!1,MODE:"production",PROD:!0,SSR:!1};function Ro(n,t){const e={alpha:!0,antialias:!1,depth:!1,stencil:!0,desynchronized:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!1},r=n.getContext("webgl",e)||n.getContext("experimental-webgl",e);if(!r)throw new Error("Unable to create WebGL context");return t?new Proxy(r,{get(s,o){const i=s[o];return typeof i=="function"?(t.increment(String(o)),i.bind(s)):i}}):r}function k(n,t){if(!gn()&&!n)throw new Error(t||"Assertion failed")}function Fn(n,t,e){const r=Math.trunc(n>>>24),s=Math.trunc(n>>>16&255),o=Math.trunc(n>>>8&255),i=Math.trunc(n&255),a=Math.trunc(t>>>24),l=Math.trunc(t>>>16&255),d=Math.trunc(t>>>8&255),f=Math.trunc(t&255),h=Math.round(a*e+r*(1-e)),p=Math.round(l*e+s*(1-e)),v=Math.round(d*e+o*(1-e)),y=Math.round(f*e+i*(1-e));return(h<<24|p<<16|v<<8|y)>>>0}function Co(n,t){const e=n>>>24,r=n>>>16&255,s=n>>>8&255,o=Math.trunc((n&255)*t);return(e<<24|r<<16|s<<8|o)>>>0}let us=!0;function Io(n){us=n==="webgl"}function Pt(n,t,e=!1){const r=(n&255)/255*t,s=us?r:1,o=Math.trunc((n>>>24)*s),i=Math.trunc((n>>>16&255)*s),a=Math.trunc((n>>>8&255)*s),l=Math.trunc(r*255);return e?(l<<24|a<<16|i<<8|o)>>>0:(o<<24|i<<16|a<<8|l)>>>0}function Vr(n,t){return Object.prototype.hasOwnProperty.call(n,t)}function gn(){return Eo&&!0}let Bo=1;function Mo(){return Bo++}class je{constructor(){c(this,"eventListeners",{})}on(t,e){let r=this.eventListeners[t];r||(r=[]),r.push(e),this.eventListeners[t]=r}off(t,e){const r=this.eventListeners[t];if(!r)return;if(!e){delete this.eventListeners[t];return}const s=r.indexOf(e);s>=0&&r.splice(s,1)}once(t,e){const r=(s,o)=>{this.off(t,r),e(s,o)};this.on(t,r)}emit(t,e){const r=this.eventListeners[t];r&&[...r].forEach(s=>{s(this,e)})}removeAllListeners(){this.eventListeners={}}}const ko=/^(data|ftps?|https?):/,vr=n=>{const t=n>>>24,e=n>>>16&255,r=n>>>8&255,s=n&255;return[t/255,e/255,r/255,s/255]};function Lt(n,t,e,r,s){return s?(s.x1=n,s.y1=t,s.x2=e,s.y2=r,s):{x1:n,y1:t,x2:e,y2:r}}function Er(n,t){return n.x1<t.x2&&n.x2>t.x1&&n.y1<t.y2&&n.y2>t.y1}function Po(n,t){return t?(t.x=n.x1,t.y=n.y1,t.width=n.x2-n.x1,t.height=n.y2-n.y1,t):{x:n.x1,y:n.y1,width:n.x2-n.x1,height:n.y2-n.y1}}function ds(n,t,e){const r=Math.max(n.x,t.x),s=Math.max(n.y,t.y),o=Math.min(n.x+n.width,t.x+t.width)-r,i=Math.min(n.y+n.height,t.y+t.height)-s;return o>0&&i>0?e?(e.x=r,e.y=s,e.width=o,e.height=i,e):{x:r,y:s,width:o,height:i}:e?(e.x=0,e.y=0,e.width=0,e.height=0,e):{x:0,y:0,width:0,height:0}}function hs(n,t){return t?(t.x=n.x,t.y=n.y,t.width=n.width,t.height=n.height,t):{x:n.x,y:n.y,width:n.width,height:n.height}}function Lo(n,t){return n===t?!0:n===null||t===null?!1:n.x===t.x&&n.y===t.y&&n.width===t.width&&n.height===t.height}function Nn(n,t){return n.x1<=t.x2&&n.y1<=t.y2&&n.x2>=t.x1&&n.y2>=t.y1}function Fo(n){return n.x1<n.x2&&n.y1<n.y2}function No(n){if(self.location.protocol==="file:"&&!ko.test(n)){const e=self.location.pathname.split("/");e.pop();const r=e.join("/"),s=self.location.protocol+"//"+r;return n.charAt(0)==="."&&(n=n.slice(1)),n.charAt(0)==="/"&&(n=n.slice(1)),s+"/"+n}return new URL(n,self.location.href).href}class ge{constructor(){c(this,"ta");c(this,"tb");c(this,"tx");c(this,"tc");c(this,"td");c(this,"ty");c(this,"_floatArr",null);c(this,"mutation");this.ta=0,this.tb=0,this.tx=0,this.tc=0,this.td=0,this.ty=0,this.mutation=!0}static get temp(){return Do}static multiply(t,e,r){const s=t.ta*e.ta+t.tb*e.tc,o=t.ta*e.tb+t.tb*e.td,i=t.ta*e.tx+t.tb*e.ty+t.tx,a=t.tc*e.ta+t.td*e.tc,l=t.tc*e.tb+t.td*e.td,d=t.tc*e.tx+t.td*e.ty+t.ty;return r||(r=new ge),r.ta=s,r.tb=o,r.tx=i,r.tc=a,r.td=l,r.ty=d,r.mutation=!0,r}static identity(t){return t||(t=new ge),t.ta=1,t.tb=0,t.tx=0,t.tc=0,t.td=1,t.ty=0,t.mutation=!0,t}static translate(t,e,r){return r||(r=new ge),r.ta=1,r.tb=0,r.tx=t,r.tc=0,r.td=1,r.ty=e,r.mutation=!0,r}static scale(t,e,r){return r||(r=new ge),r.ta=t,r.tb=0,r.tx=0,r.tc=0,r.td=e,r.ty=0,r.mutation=!0,r}static rotate(t,e){const r=Math.cos(t),s=Math.sin(t);return e||(e=new ge),e.ta=r,e.tb=-s,e.tx=0,e.tc=s,e.td=r,e.ty=0,e.mutation=!0,e}static copy(t,e){return e||(e=new ge),e.ta=t.ta,e.tc=t.tc,e.tb=t.tb,e.td=t.td,e.tx=t.tx,e.ty=t.ty,e.mutation=!0,e}translate(t,e){return this.tx=this.ta*t+this.tb*e+this.tx,this.ty=this.tc*t+this.td*e+this.ty,this.mutation=!0,this}scale(t,e){return this.ta=this.ta*t,this.tb=this.tb*e,this.tc=this.tc*t,this.td=this.td*e,this.mutation=!0,this}rotate(t){if(t===0||!(t%Math.PI*2))return this;const e=Math.cos(t),r=Math.sin(t),s=this.ta*e+this.tb*r,o=this.tb*e-this.ta*r,i=this.tc*e+this.td*r,a=this.td*e-this.tc*r;return this.ta=s,this.tb=o,this.tc=i,this.td=a,this.mutation=!0,this}multiply(t){return ge.multiply(this,t,this)}getFloatArr(){return this._floatArr||(this._floatArr=new Float32Array(9)),this.mutation&&(this._floatArr[0]=this.ta,this._floatArr[1]=this.tc,this._floatArr[2]=0,this._floatArr[3]=this.tb,this._floatArr[4]=this.td,this._floatArr[5]=0,this._floatArr[6]=this.tx,this._floatArr[7]=this.ty,this._floatArr[8]=1,this.mutation=!1),this._floatArr}}const Do=new ge,Ft=0,Nt=2,Dt=4,Ut=6,Ot=1,zt=3,Wt=5,Ht=7;class rr{constructor(t){c(this,"data");this.data=new Float32Array(8),t&&(this.data[Ft]=t[Ft],this.data[Nt]=t[Nt],this.data[Dt]=t[Dt],this.data[Ut]=t[Ut],this.data[Ot]=t[Ot],this.data[zt]=t[zt],this.data[Wt]=t[Wt],this.data[Ht]=t[Ht])}static translate(t,e,r,s,o,i,a,l,d){return d||(d=new rr),d.data[Ft]=t,d.data[Nt]=r,d.data[Dt]=o,d.data[Ut]=a,d.data[Ot]=e,d.data[zt]=s,d.data[Wt]=i,d.data[Ht]=l,d}get x1(){return this.data[Ft]}get x2(){return this.data[Nt]}get x3(){return this.data[Dt]}get x4(){return this.data[Ut]}get y1(){return this.data[Ot]}get y2(){return this.data[zt]}get y3(){return this.data[Wt]}get y4(){return this.data[Ht]}}const Dn=n=>n&&!(n&n-1),fs=(n,t,e,r)=>{const s=3*n,o=3*(e-n)-s,i=1-s-o,a=3*t,l=3*(r-t)-a,d=1-a-l;return function(f){if(f>=1)return 1;if(f<=0)return 0;let h=.5,p,v,y;for(let w=0;w<20;w++){if(p=h*(h*(h*i+o)+s),y=f-p,y>-1e-8&&y<1e-8)return h*(h*(h*d+l)+a);if(v=h*(h*(3*i)+2*o)+s,v>1e-10&&v<1e-10)break;h+=y/v}let x=0,A=1;for(let w=0;w<20;w++){if(h=.5*(x+A),p=h*(h*(h*i+o)+s),y=f-p,y>-1e-8&&y<1e-8)return h*(h*(h*d+l)+a);y<0?A=h:x=h}}},Zt={},Uo={ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],"ease-in-sine":[.12,0,.39,0],"ease-out-sine":[.12,0,.39,0],"ease-in-out-sine":[.37,0,.63,1],"ease-in-cubic":[.32,0,.67,0],"ease-out-cubic":[.33,1,.68,1],"ease-in-out-cubic":[.65,0,.35,1],"ease-in-circ":[.55,0,1,.45],"ease-out-circ":[0,.55,.45,1],"ease-in-out-circ":[.85,0,.15,1],"ease-in-back":[.36,0,.66,-.56],"ease-out-back":[.34,1.56,.64,1],"ease-in-out-back":[.68,-.6,.32,1.6]},Jt=n=>n,Oo=n=>{const t=/-?\d*\.?\d+/g,e=n.match(t);if(e){const[r,s,o,i]=e,a=parseFloat(r||"0.42"),l=parseFloat(s||"0"),d=parseFloat(o||"1"),f=parseFloat(i||"1"),h=fs(a,l,d,f);return Zt[n]=h,h}return console.warn("Unknown cubic-bezier timing: "+n),Jt},zo=n=>{if(n==="linear")return Jt;if(Zt[n]!==void 0)return Zt[n]||Jt;if(n==="step-start")return()=>1;if(n==="step-end")return e=>e===1?1:0;const t=Uo[n];if(t!==void 0){const[e,r,s,o]=t,i=fs(e,r,s,o);return Zt[n]=i,i}return n.startsWith("cubic-bezier")?Oo(n):(console.warn("Unknown timing function: "+n),Jt)};function Un(n){return(n/1024/1024).toFixed(2)}class Wo extends je{constructor(e,r,s){var a,l,d,f,h,p;super();c(this,"node");c(this,"props");c(this,"settings");c(this,"progress",0);c(this,"delayFor",0);c(this,"timingFunction");c(this,"propValuesMap",{});c(this,"dynPropValuesMap");this.node=e,this.props=r;for(const v in r)if(v!=="shaderProps")this.propValuesMap.props===void 0&&(this.propValuesMap.props={}),this.propValuesMap.props[v]={start:e[v]||0,target:r[v]};else if(e.shader.type!=="DynamicShader"){this.propValuesMap.shaderProps={};for(const y in r.shaderProps)this.propValuesMap.shaderProps[y]={start:e.shader.props[y],target:r.shaderProps[y]}}else{const y=Object.keys(r.shaderProps),x=y.length;this.dynPropValuesMap={};for(let A=0;A<x;A++){const w=y[A],m=r.shaderProps[w];this.dynPropValuesMap[w]={};const b=Object.entries(m),g=b.length;for(let T=0;T<g;T++){const[_,R]=b[T];this.dynPropValuesMap[w][_]={start:e.shader.props[w][_],target:R}}}}const o=s.easing||"linear",i=(a=s.delay)!=null?a:0;this.settings={duration:(l=s.duration)!=null?l:0,delay:i,easing:o,loop:(d=s.loop)!=null?d:!1,repeat:(f=s.repeat)!=null?f:0,repeatDelay:(h=s.repeatDelay)!=null?h:0,stopMethod:(p=s.stopMethod)!=null?p:!1},this.timingFunction=zo(o),this.delayFor=i}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restoreValues(e,r){const s=Object.entries(r),o=s.length;for(let i=0;i<o;i++){const[a,l]=s[i];e[a]=l.start}}restore(){if(this.reset(),this.propValuesMap.props!==void 0&&this.restoreValues(this.node,this.propValuesMap.props),this.propValuesMap.shaderProps!==void 0&&this.restoreValues(this.node.shader.props,this.propValuesMap.shaderProps),this.dynPropValuesMap!==void 0){const e=Object.keys(this.dynPropValuesMap),r=e.length;if(r>0)for(let s=0;s<r;s++){const o=e[s];this.restoreValues(this.node.shader.props[o],this.dynPropValuesMap[o])}}}reverseValues(e){const r=Object.entries(e),s=r.length;for(let o=0;o<s;o++){const[i,a]=r[o];e[i]={start:a.target,target:a.start}}}reverse(){if(this.progress=0,this.propValuesMap.props!==void 0&&this.reverseValues(this.propValuesMap.props),this.propValuesMap.shaderProps!==void 0&&this.reverseValues(this.propValuesMap.shaderProps),this.dynPropValuesMap!==void 0){const e=Object.keys(this.dynPropValuesMap),r=e.length;if(r>0)for(let s=0;s<r;s++){const o=e[s];this.reverseValues(this.dynPropValuesMap[o])}}this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(e,r,s){return(this.timingFunction(e)||e)*(s-r)+r}updateValue(e,r,s,o){if(this.progress===1)return r;if(this.progress===0)return s;const i=r;if(e.indexOf("color")!==-1){if(s===i)return s;if(o){const a=this.timingFunction(this.progress)||this.progress;return Fn(s,i,a)}return Fn(s,i,this.progress)}return o?this.applyEasing(this.progress,s,i):s+(i-s)*this.progress}updateValues(e,r,s){const o=Object.entries(r),i=o.length;for(let a=0;a<i;a++){const[l,d]=o[a];e[l]=this.updateValue(l,d.target,d.start,s)}}update(e){const{duration:r,loop:s,easing:o,stopMethod:i}=this.settings,{delayFor:a}=this;if(r===0&&a===0){this.emit("finished",{});return}if(this.delayFor>0){if(this.delayFor-=e,this.delayFor>=0)return;e=-this.delayFor,this.delayFor=0}if(r===0){this.emit("finished",{});return}if(this.progress===0&&this.emit("animating",{}),this.progress+=e/r,this.progress>1&&(this.progress=s?0:1,i)){this.emit("finished",{});return}if(this.propValuesMap.props!==void 0&&this.updateValues(this.node,this.propValuesMap.props,o),this.propValuesMap.shaderProps!==void 0&&this.updateValues(this.node.shader.props,this.propValuesMap.shaderProps,o),this.dynPropValuesMap!==void 0){const l=Object.keys(this.dynPropValuesMap),d=l.length;if(d>0)for(let f=0;f<d;f++){const h=l[f];this.updateValues(this.node.shader.props[h],this.dynPropValuesMap[h],o)}}this.progress===1&&this.emit("finished",{})}}class Ho extends je{constructor(e,r){super();c(this,"manager");c(this,"animation");c(this,"stoppedPromise");c(this,"stoppedResolve",null);c(this,"state");this.manager=e,this.animation=r,this.state="stopped",this.stoppedPromise=Promise.resolve(),this.onAnimating=this.onAnimating.bind(this),this.onFinished=this.onFinished.bind(this)}start(){return this.state!=="running"&&(this.makeStoppedPromise(),this.registerAnimation(),this.state="running"),this}stop(){return this.unregisterAnimation(),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this)),this.animation.reset(),this.state="stopped",this}pause(){return this.unregisterAnimation(),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){return this.stoppedPromise}registerAnimation(){this.animation.once("finished",this.onFinished),this.animation.on("animating",this.onAnimating),this.manager.registerAnimation(this.animation)}unregisterAnimation(){this.manager.unregisterAnimation(this.animation),this.animation.off("finished",this.onFinished),this.animation.off("animating",this.onAnimating)}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(e=>{this.stoppedResolve=e}))}onFinished(){k(this.stoppedResolve);const{loop:e,stopMethod:r}=this.animation.settings;if(r==="reverse"){this.animation.once("finished",this.onFinished),this.animation.reverse();return}e||(this.unregisterAnimation(),this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this),this.state="stopped")}onAnimating(){this.emit("animating",this)}}var we;(function(n){n[n.Init=0]="Init",n[n.OutOfBounds=2]="OutOfBounds",n[n.InBounds=4]="InBounds",n[n.InViewport=8]="InViewport"})(we||(we={}));const Bt=new Map;Bt.set(we.Init,"init");Bt.set(we.OutOfBounds,"outOfBounds");Bt.set(we.InBounds,"inBounds");Bt.set(we.InViewport,"inViewport");var B;(function(n){n[n.Children=1]="Children",n[n.ScaleRotate=2]="ScaleRotate",n[n.Local=4]="Local",n[n.Global=8]="Global",n[n.Clipping=16]="Clipping",n[n.CalculatedZIndex=32]="CalculatedZIndex",n[n.ZIndexSortedChildren=64]="ZIndexSortedChildren",n[n.PremultipliedColors=128]="PremultipliedColors",n[n.WorldAlpha=256]="WorldAlpha",n[n.RenderState=512]="RenderState",n[n.IsRenderable=1024]="IsRenderable",n[n.RenderTexture=2048]="RenderTexture",n[n.ParentRenderTexture=4096]="ParentRenderTexture",n[n.None=0]="None",n[n.All=8191]="All"})(B||(B={}));class Xr extends je{constructor(e,r){super();c(this,"stage");c(this,"children",[]);c(this,"_id",Mo());c(this,"props");c(this,"updateType",B.All);c(this,"globalTransform");c(this,"scaleRotateTransform");c(this,"localTransform");c(this,"renderCoords");c(this,"renderBound");c(this,"strictBound");c(this,"preloadBound");c(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1});c(this,"isRenderable",!1);c(this,"renderState",we.Init);c(this,"worldAlpha",1);c(this,"premultipliedColorTl",0);c(this,"premultipliedColorTr",0);c(this,"premultipliedColorBl",0);c(this,"premultipliedColorBr",0);c(this,"calcZIndex",0);c(this,"hasRTTupdates",!1);c(this,"parentHasRenderTexture",!1);c(this,"onTextureLoaded",(e,r)=>{var s,o;this.autosizeNode(r),this.stage.requestRender(),this.parentHasRenderTexture&&this.setRTTUpdates(1),this.emit("loaded",{type:"texture",dimensions:r}),((o=(s=this.props.textureOptions)==null?void 0:s.resizeMode)==null?void 0:o.type)==="contain"&&this.setUpdateType(B.Local)});c(this,"onTextureFailed",(e,r)=>{this.emit("failed",{type:"texture",error:r})});c(this,"onTextureFreed",()=>{this.emit("freed",{type:"texture"})});this.stage=e,this.props={...r,parent:null,texture:null,src:null,rtt:!1},this.parent=r.parent,this.texture=r.texture,this.src=r.src,this.rtt=r.rtt,this.updateScaleRotateTransform()}loadTexture(){const{texture:e}=this.props;k(e),queueMicrotask(()=>{e.preventCleanup=this.props.preventCleanup,this.textureOptions.preload&&e.ctxTexture.load(),e.state==="loaded"?(k(e.dimensions),this.onTextureLoaded(e,e.dimensions)):e.state==="failed"?(k(e.error),this.onTextureFailed(e,e.error)):e.state==="freed"&&this.onTextureFreed(e),e.on("loaded",this.onTextureLoaded),e.on("failed",this.onTextureFailed),e.on("freed",this.onTextureFreed)})}unloadTexture(){this.texture&&(this.texture.off("loaded",this.onTextureLoaded),this.texture.off("failed",this.onTextureFailed),this.texture.off("freed",this.onTextureFreed),this.texture.setRenderableOwner(this,!1))}autosizeNode(e){this.autosize&&(this.width=e.width,this.height=e.height)}setUpdateType(e){this.updateType|=e;const r=this.props.parent;r&&!(r.updateType&B.Children)&&r.setUpdateType(B.Children),this.parentHasRenderTexture&&this.setRTTUpdates(e)}sortChildren(){this.children.sort((e,r)=>e.calcZIndex-r.calcZIndex)}updateScaleRotateTransform(){const{rotation:e,scaleX:r,scaleY:s}=this.props;if(e===0&&r===1&&s===1){this.scaleRotateTransform=void 0;return}this.scaleRotateTransform=ge.rotate(e,this.scaleRotateTransform).scale(r,s)}updateLocalTransform(){var d,f;const{x:e,y:r,width:s,height:o}=this.props,i=this.props.mountX*s,a=this.props.mountY*o;if(this.scaleRotateTransform){const h=this.props.pivotX*s,p=this.props.pivotY*o;this.localTransform=ge.translate(e-i+h,r-a+p,this.localTransform).multiply(this.scaleRotateTransform).translate(-h,-p)}else this.localTransform=ge.translate(e-i,r-a,this.localTransform);const l=this.props.texture;if(l&&l.dimensions&&((f=(d=this.props.textureOptions)==null?void 0:d.resizeMode)==null?void 0:f.type)==="contain"){let h=1,p=1,v=0,y=0;const{width:x,height:A}=l.dimensions,w=x/A,m=s/o;if(w>m){const b=s/x,g=A*b;y=(o-g)/2,p=g/o}else{const b=o/A,g=x*b;v=(s-g)/2,h=g/s}this.localTransform.translate(v,y).scale(h,p)}this.setUpdateType(B.Global)}update(e,r){var i;this.updateType&B.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(B.Local)),this.updateType&B.Local&&(this.updateLocalTransform(),this.setUpdateType(B.Global));const s=this.props.parent;let o=B.None;if(this.updateType&B.ParentRenderTexture){let a=this.parent;for(;a;)a.rtt&&(this.parentHasRenderTexture=!0),a=a.parent}this.updateType^B.All&&this.updateType&B.RenderTexture&&this.children.forEach(a=>{a.setUpdateType(B.All)}),this.updateType&B.Global&&(k(this.localTransform),this.globalTransform=ge.copy((s==null?void 0:s.globalTransform)||this.localTransform,this.globalTransform),this.parentHasRenderTexture&&((i=this.props.parent)!=null&&i.rtt)&&(this.globalTransform=ge.identity()),s&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(B.Clipping|B.RenderState|B.Children),o|=B.Global),this.updateType&B.Clipping&&(this.calculateClippingRect(r),this.setUpdateType(B.Children),o|=B.Clipping),this.updateType&B.WorldAlpha&&(s?this.worldAlpha=s.worldAlpha*this.props.alpha:this.worldAlpha=this.props.alpha,this.setUpdateType(B.Children|B.PremultipliedColors|B.IsRenderable),o|=B.WorldAlpha),this.updateType&B.PremultipliedColors&&(this.premultipliedColorTl=Pt(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=Pt(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=Pt(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=Pt(this.props.colorBr,this.worldAlpha,!0))),this.updateType&B.RenderState&&(this.updateRenderState(r),this.setUpdateType(B.IsRenderable)),this.updateType&B.IsRenderable&&this.updateIsRenderable(),s&&this.updateType&B.CalculatedZIndex&&(this.calculateZIndex(),s.setUpdateType(B.ZIndexSortedChildren)),this.updateType&B.Children&&this.children.length&&!this.rtt&&this.children.forEach(a=>{a.setUpdateType(o),a.updateType!==0&&a.update(e,this.clippingRect)}),this.updateType&B.ZIndexSortedChildren&&this.sortChildren(),this.updateType=0}checkRenderProps(){return this.props.texture?!0:!this.props.width||!this.props.height?!1:!!(this.props.shader!==this.stage.defShaderCtr||this.props.clipping||this.props.color!==0||this.props.colorTop!==0||this.props.colorBottom!==0||this.props.colorLeft!==0||this.props.colorRight!==0||this.props.colorTl!==0||this.props.colorTr!==0||this.props.colorBl!==0||this.props.colorBr!==0)}checkRenderBounds(e){k(this.renderBound);const r=e.width||this.stage.root.width,s=e.height||this.stage.root.height;if(this.strictBound=Lt(e.x,e.y,e.x+r,e.y+s,this.strictBound),Nn(this.renderBound,this.strictBound))return we.InViewport;const o=this.stage.boundsMargin;return this.preloadBound=Lt(this.strictBound.x1-o[3],this.strictBound.y1-o[0],this.strictBound.x2+o[1],this.strictBound.y2+o[2],this.preloadBound),Nn(this.renderBound,this.preloadBound)?we.InBounds:we.OutOfBounds}updateRenderState(e){const r=this.checkRenderBounds(e);if(r===this.renderState)return;const s=this.renderState;this.renderState=r;const o=Bt.get(r);k(o),this.emit(o,{previous:s,current:r})}updateIsRenderable(){let e;this.worldAlpha===0||!this.checkRenderProps()?e=!1:e=this.renderState>we.OutOfBounds,this.isRenderable!==e&&(this.isRenderable=e,this.onChangeIsRenderable(e))}onChangeIsRenderable(e){var r;(r=this.texture)==null||r.setRenderableOwner(this,e)}calculateRenderCoords(){const{width:e,height:r,globalTransform:s}=this;k(s);const{tx:o,ty:i,ta:a,tb:l,tc:d,td:f}=s;if(l===0&&d===0){const h=o,p=o+e*a,v=i,y=i+r*f;this.renderCoords=rr.translate(h,v,p,v,p,y,h,y,this.renderCoords)}else this.renderCoords=rr.translate(o,i,o+e*a,i+e*d,o+e*a+r*l,i+e*d+r*f,o+r*l,i+r*f,this.renderCoords)}updateBoundingRect(){const{renderCoords:e,globalTransform:r}=this;k(r),k(e);const{tb:s,tc:o}=r,{x1:i,y1:a,x3:l,y3:d}=e;if(s===0||o===0)this.renderBound=Lt(i,a,l,d,this.renderBound);else{const{x2:f,x4:h,y2:p,y4:v}=e;this.renderBound=Lt(Math.min(i,f,l,h),Math.min(a,p,d,v),Math.max(i,f,l,h),Math.max(a,p,d,v),this.renderBound)}}calculateClippingRect(e){k(this.globalTransform);const{clippingRect:r,props:s,globalTransform:o}=this,{clipping:i}=s,a=o.tb!==0||o.tc!==0;i&&!a?(r.x=o.tx,r.y=o.ty,r.width=this.width*o.ta,r.height=this.height*o.td,r.valid=!0):r.valid=!1,e.valid&&r.valid?ds(e,r,r):e.valid&&(hs(e,r),r.valid=!0)}calculateZIndex(){var i,a;const e=this.props,r=e.zIndex||0,s=((i=e.parent)==null?void 0:i.zIndex)||0;let o=r;(a=e.parent)!=null&&a.zIndexLocked&&(o=r<s?r:s),this.calcZIndex=o}destroy(){this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,delete this.renderCoords,delete this.renderBound,delete this.strictBound,delete this.preloadBound,delete this.globalTransform,delete this.scaleRotateTransform,delete this.localTransform,this.props.texture=null,this.props.shader=this.stage.defShaderCtr;const e=[...this.children];for(let r=0;r<e.length;r++)e[r].destroy();this.parent=null,this.rtt&&this.stage.renderer.removeRTTNode(this),this.removeAllListeners()}renderQuads(e){const{texture:r,width:s,height:o,textureOptions:i,rtt:a,shader:l}=this.props;if(this.parentHasRenderTexture&&(!e.renderToTextureActive||this.parentRenderTexture!==e.activeRttNode))return;const{premultipliedColorTl:d,premultipliedColorTr:f,premultipliedColorBl:h,premultipliedColorBr:p}=this,{zIndex:v,worldAlpha:y,globalTransform:x,clippingRect:A,renderCoords:w}=this;k(x),k(w),e.addQuad({width:s,height:o,colorTl:d,colorTr:f,colorBl:h,colorBr:p,texture:r,textureOptions:i,zIndex:v,shader:l.shader,shaderProps:l.getResolvedProps(),alpha:y,clippingRect:A,tx:x.tx,ty:x.ty,ta:x.ta,tb:x.tb,tc:x.tc,td:x.td,renderCoords:w,rtt:a,parentHasRenderTexture:this.parentHasRenderTexture,framebufferDimensions:this.framebufferDimensions})}get id(){return this._id}get data(){return this.props.data}set data(e){this.props.data=e}get x(){return this.props.x}set x(e){this.props.x!==e&&(this.props.x=e,this.setUpdateType(B.Local))}get absX(){var e,r,s;return this.props.x+-this.props.width*this.props.mountX+(((e=this.props.parent)==null?void 0:e.absX)||((s=(r=this.props.parent)==null?void 0:r.globalTransform)==null?void 0:s.tx)||0)}get absY(){var e,r;return this.props.y+-this.props.height*this.props.mountY+((r=(e=this.props.parent)==null?void 0:e.absY)!=null?r:0)}get y(){return this.props.y}set y(e){this.props.y!==e&&(this.props.y=e,this.setUpdateType(B.Local))}get width(){return this.props.width}set width(e){this.props.width!==e&&(this.props.width=e,this.setUpdateType(B.Local),this.props.rtt&&(this.texture=this.stage.txManager.loadTexture("RenderTexture",{width:this.width,height:this.height}),this.textureOptions.preload=!0,this.setUpdateType(B.RenderTexture)))}get height(){return this.props.height}set height(e){this.props.height!==e&&(this.props.height=e,this.setUpdateType(B.Local),this.props.rtt&&(this.texture=this.stage.txManager.loadTexture("RenderTexture",{width:this.width,height:this.height}),this.textureOptions.preload=!0,this.setUpdateType(B.RenderTexture)))}get scale(){return this.scaleX}set scale(e){this.scaleX=e,this.scaleY=e}get scaleX(){return this.props.scaleX}set scaleX(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.setUpdateType(B.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.setUpdateType(B.ScaleRotate))}get mount(){return this.props.mount}set mount(e){(this.props.mountX!==e||this.props.mountY!==e)&&(this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.setUpdateType(B.Local))}get mountX(){return this.props.mountX}set mountX(e){this.props.mountX!==e&&(this.props.mountX=e,this.setUpdateType(B.Local))}get mountY(){return this.props.mountY}set mountY(e){this.props.mountY!==e&&(this.props.mountY=e,this.setUpdateType(B.Local))}get pivot(){return this.props.pivot}set pivot(e){(this.props.pivotX!==e||this.props.pivotY!==e)&&(this.props.pivotX=e,this.props.pivotY=e,this.props.pivot=e,this.setUpdateType(B.Local))}get pivotX(){return this.props.pivotX}set pivotX(e){this.props.pivotX!==e&&(this.props.pivotX=e,this.setUpdateType(B.Local))}get pivotY(){return this.props.pivotY}set pivotY(e){this.props.pivotY!==e&&(this.props.pivotY=e,this.setUpdateType(B.Local))}get rotation(){return this.props.rotation}set rotation(e){this.props.rotation!==e&&(this.props.rotation=e,this.setUpdateType(B.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(e){this.props.alpha=e,this.setUpdateType(B.PremultipliedColors|B.WorldAlpha)}get autosize(){return this.props.autosize}set autosize(e){this.props.autosize=e}get clipping(){return this.props.clipping}set clipping(e){this.props.clipping=e,this.setUpdateType(B.Clipping)}get color(){return this.props.color}set color(e){this.colorTop=e,this.colorBottom=e,this.colorLeft=e,this.colorRight=e,this.props.color=e,this.setUpdateType(B.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(e){(this.props.colorTl!==e||this.props.colorTr!==e)&&(this.colorTl=e,this.colorTr=e),this.props.colorTop=e,this.setUpdateType(B.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(e){(this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e,this.setUpdateType(B.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(e){(this.props.colorTl!==e||this.props.colorBl!==e)&&(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e,this.setUpdateType(B.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(e){(this.props.colorTr!==e||this.props.colorBr!==e)&&(this.colorTr=e,this.colorBr=e),this.props.colorRight=e,this.setUpdateType(B.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(e){this.props.colorTl=e,this.setUpdateType(B.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(e){this.props.colorTr=e,this.setUpdateType(B.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(e){this.props.colorBl=e,this.setUpdateType(B.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(e){this.props.colorBr=e,this.setUpdateType(B.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(e){this.props.zIndexLocked=e,this.setUpdateType(B.CalculatedZIndex|B.Children),this.children.forEach(r=>{r.setUpdateType(B.CalculatedZIndex)})}get zIndex(){return this.props.zIndex}set zIndex(e){this.props.zIndex=e,this.setUpdateType(B.CalculatedZIndex|B.Children),this.children.forEach(r=>{r.setUpdateType(B.CalculatedZIndex)})}get parent(){return this.props.parent}set parent(e){const r=this.props.parent;if(r!==e){if(this.props.parent=e,r){const s=r.children.indexOf(this);k(s!==-1,"CoreNode.parent: Node not found in old parent's children!"),r.children.splice(s,1),r.setUpdateType(B.Children|B.ZIndexSortedChildren)}e&&(e.children.push(this),this.setUpdateType(B.All),e.setUpdateType(B.Children|B.ZIndexSortedChildren),(e.rtt||e.parentHasRenderTexture)&&this.setRTTUpdates(B.All)),this.updateScaleRotateTransform()}}get preventCleanup(){return this.props.preventCleanup}set preventCleanup(e){this.props.preventCleanup=e}get rtt(){return this.props.rtt}set rtt(e){var r,s;if(this.props.rtt===!0&&(this.props.rtt=e,e===!1&&this.texture!==null)){this.unloadTexture(),this.setUpdateType(B.All),this.children.forEach(o=>{o.parentHasRenderTexture=!1}),(r=this.stage.renderer)==null||r.removeRTTNode(this);return}e!==!1&&(this.texture=this.stage.txManager.loadTexture("RenderTexture",{width:this.width,height:this.height}),this.textureOptions.preload=!0,this.props.rtt=!0,this.hasRTTupdates=!0,this.setUpdateType(B.All),this.children.forEach(o=>{o.setUpdateType(B.All)}),(s=this.stage.renderer)==null||s.renderToTexture(this))}get shader(){return this.props.shader}set shader(e){this.props.shader!==e&&(this.props.shader=e,this.setUpdateType(B.IsRenderable))}get src(){return this.props.src}set src(e){if(this.props.src!==e){if(this.props.src=e,!e){this.texture=null;return}this.texture=this.stage.txManager.loadTexture("ImageTexture",{src:e,width:this.props.width,height:this.props.height,type:this.props.imageType,sx:this.props.srcX,sy:this.props.srcY,sw:this.props.srcWidth,sh:this.props.srcHeight})}}set imageType(e){this.props.imageType!==e&&(this.props.imageType=e)}get imageType(){return this.props.imageType||null}get srcHeight(){return this.props.srcHeight}set srcHeight(e){this.props.srcHeight=e}get srcWidth(){return this.props.srcWidth}set srcWidth(e){this.props.srcWidth=e}get srcX(){return this.props.srcX}set srcX(e){this.props.srcX=e}get srcY(){return this.props.srcY}set srcY(e){this.props.srcY=e}get framebufferDimensions(){return this.parentHasRenderTexture&&!this.rtt&&this.parent?this.parent.framebufferDimensions:{width:this.width,height:this.height}}get parentRenderTexture(){let e=this.parent;for(;e;){if(e.rtt)return e;e=e.parent}return null}get texture(){return this.props.texture}set texture(e){if(this.props.texture===e)return;const r=this.props.texture;r&&(r.setRenderableOwner(this,!1),this.unloadTexture()),this.props.texture=e,e&&(e.setRenderableOwner(this,this.isRenderable),this.loadTexture()),this.setUpdateType(B.IsRenderable)}set textureOptions(e){this.props.textureOptions=e}get textureOptions(){return this.props.textureOptions}setRTTUpdates(e){var r;this.hasRTTupdates=!0,(r=this.parent)==null||r.setRTTUpdates(e)}animate(e,r){const s=new Wo(this,e,r);return new Ho(this.stage.animationManager,s)}flush(){}}const Vo=n=>{let t=!1;const e=()=>{if(n.updateFrameTime(),n.updateAnimations(),!n.hasSceneUpdates()){n.calculateFps(),setTimeout(e,16.666666666666668),t||(n.txMemManager.checkCleanup()&&n.txMemManager.cleanup(),n.eventBus.emit("idle"),t=!0),n.flushFrameEvents();return}t=!1,n.drawFrame(),n.flushFrameEvents(),requestAnimationFrame(e)};requestAnimationFrame(e)},Xo=()=>performance?performance.now():Date.now();class $o{constructor(){c(this,"activeAnimations",new Set)}registerAnimation(t){this.activeAnimations.add(t)}unregisterAnimation(t){this.activeAnimations.delete(t)}update(t){this.activeAnimations.forEach(e=>{e.update(t)})}}class ct extends je{constructor(e){super();c(this,"txManager");c(this,"dimensions",null);c(this,"error",null);c(this,"state","freed");c(this,"renderableOwners",new Set);c(this,"renderable",!1);c(this,"lastRenderableChangeTime",0);c(this,"preventCleanup",!1);this.txManager=e}setRenderableOwner(e,r){var o,i;const s=this.renderableOwners.size;if(r){this.renderableOwners.add(e);const a=this.renderableOwners.size;a>s&&a===1&&(this.renderable=!0,this.lastRenderableChangeTime=this.txManager.frameTime,(o=this.onChangeIsRenderable)==null||o.call(this,!0))}else{this.renderableOwners.delete(e);const a=this.renderableOwners.size;a<s&&a===0&&(this.renderable=!1,this.lastRenderableChangeTime=this.txManager.frameTime,(i=this.onChangeIsRenderable)==null||i.call(this,!1))}}get ctxTexture(){const e=this.txManager.renderer.createCtxTexture(this);return Object.defineProperty(this,"ctxTexture",{value:e}),e}setState(e,...r){if(this.state!==e){if(this.state=e,e==="loaded"){const s=r;this.dimensions=s[0]}else if(e==="failed"){const s=r;this.error=s[0]}this.emit(e,...r)}}static makeCacheKey(e){return!1}static resolveDefaults(e){return{}}}function Go(){function n(e){return e.indexOf("image/png")!==-1}function t(e,r,s,o,i,a){return new Promise(function(l,d){var f=new XMLHttpRequest;f.open("GET",e,!0),f.responseType="blob",f.onload=function(){if(f.status!==200)return d(new Error("Failed to load image: "+f.statusText));var h=f.response,p=r!==void 0?r:n(h.type);if(i!==null&&a!==null){createImageBitmap(h,s||0,o||0,i,a,{premultiplyAlpha:p?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}).then(function(v){l({data:v,premultiplyAlpha:r})}).catch(function(v){d(v)});return}createImageBitmap(h,{premultiplyAlpha:p?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}).then(function(v){l({data:v,premultiplyAlpha:r})}).catch(function(v){d(v)})},f.onerror=function(){d(new Error("Network error occurred while trying to fetch the image."))},f.send()})}self.onmessage=e=>{var r=e.data.src,s=e.data.id,o=e.data.premultiplyAlpha,i=e.data.sx,a=e.data.sy,l=e.data.sw,d=e.data.sh;t(r,o,i,a,l,d).then(function(f){self.postMessage({id:s,src:r,data:f})}).catch(function(f){self.postMessage({id:s,src:r,error:f.message})})}}class Yo{constructor(t){c(this,"imageWorkersEnabled",!0);c(this,"messageManager",{});c(this,"workers",[]);c(this,"workerIndex",0);c(this,"nextId",0);this.workers=this.createWorkers(t),this.workers.forEach(e=>{e.onmessage=this.handleMessage.bind(this)})}handleMessage(t){const{id:e,data:r,error:s}=t.data,o=this.messageManager[e];if(o){const[i,a]=o;delete this.messageManager[e],s?a(new Error(s)):i(r)}}createWorkers(t=1){const e="(".concat(Go.toString(),")()"),r=new Blob([e.replace('"use strict";',"")],{type:"application/javascript"}),s=(self.URL?URL:webkitURL).createObjectURL(r),o=[];for(let i=0;i<t;i++)o.push(new Worker(s));return o}getNextWorker(){const t=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,t}getImage(t,e,r,s,o,i){return new Promise((a,l)=>{try{if(this.workers){const d=this.nextId++;this.messageManager[d]=[a,l];const f=this.getNextWorker();f&&f.postMessage({id:d,src:t,premultiplyAlpha:e,sx:r,sy:s,sw:o,sh:i})}}catch(d){l(d)}})}}const wt=class wt extends ct{constructor(e,r){super(e);c(this,"props");this.props=wt.resolveDefaults(r||{})}get color(){return this.props.color}set color(e){this.props.color=e}async getTextureData(){const e=new Uint32Array([this.color]),r=new Uint8ClampedArray(e.buffer);return{data:new ImageData(r,1,1),premultiplyAlpha:!0}}static makeCacheKey(e){const r=wt.resolveDefaults(e);return"ColorTexture,".concat(r.color)}static resolveDefaults(e){return{color:e.color||4294967295}}};c(wt,"z$__type__Props");let nr=wt;function Ko(n){return/\.(ktx|pvr)$/.test(n)}const On=async n=>{const e=await(await fetch(n)).arrayBuffer();return n.indexOf(".ktx")!==-1?Qo(e):jo(e)},Qo=async n=>{const t=new DataView(n),e=t.getUint32(12)===16909060,r=[],s={glInternalFormat:t.getUint32(28,e),pixelWidth:t.getUint32(36,e),pixelHeight:t.getUint32(40,e),numberOfMipmapLevels:t.getUint32(56,e),bytesOfKeyValueData:t.getUint32(60,e)};let o=64;o+=s.bytesOfKeyValueData;for(let i=0;i<s.numberOfMipmapLevels;i++){const a=t.getUint32(o);o+=4,r.push(t.buffer.slice(o,a)),o+=a}return{data:{glInternalFormat:s.glInternalFormat,mipmaps:r,width:s.pixelWidth||0,height:s.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1}},jo=async n=>{const a=n,l=new Int32Array(a,0,13),d=l[12]+52,f=new Uint8Array(a,d),h=[],p={pixelWidth:l[7],pixelHeight:l[6],numberOfMipmapLevels:l[11]||0};let v=0,y=p.pixelWidth||0,x=p.pixelHeight||0;for(let A=0;A<p.numberOfMipmapLevels;A++){const w=(y+3>>2)*(x+3>>2)*8,m=new Uint8Array(a,f.byteOffset+v,w);h.push(m),v+=w,y=y>>1,x=x>>1}return{data:{glInternalFormat:36196,mipmaps:h,width:p.pixelWidth||0,height:p.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1}};function qo(n){return/\.(svg)$/.test(n)}const zn=(n,t,e,r,s,o,i)=>new Promise((a,l)=>{const d=document.createElement("canvas"),f=d.getContext("2d");k(f),f.imageSmoothingEnabled=!0;const h=new Image;h.onload=()=>{const p=r!=null?r:0,v=s!=null?s:0,y=t||h.width,x=e||h.height;d.width=y,d.height=x,f.drawImage(h,0,0,y,x),a({data:f.getImageData(p,v,o!=null?o:y,i!=null?i:x),premultiplyAlpha:!1})},h.onerror=p=>{l(p)},h.src=n}),_t=class _t extends ct{constructor(e,r){super(e);c(this,"props");this.props=_t.resolveDefaults(r)}hasAlphaChannel(e){return e.indexOf("image/png")!==-1}async loadImage(e){const{premultiplyAlpha:r,sx:s,sy:o,sw:i,sh:a,width:l,height:d}=this.props;if(this.txManager.imageWorkerManager!==null)return await this.txManager.imageWorkerManager.getImage(e,r,s,o,i,a);if(this.txManager.hasCreateImageBitmap===!0){const h=await(await fetch(e)).blob(),p=r!=null?r:this.hasAlphaChannel(h.type);return i!==null&&a!==null?{data:await createImageBitmap(h,s!=null?s:0,o!=null?o:0,i,a,{premultiplyAlpha:p?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:p}:{data:await createImageBitmap(h,{premultiplyAlpha:p?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:p}}else{const f=new Image(l||void 0,d||void 0);return e.substr(0,5)!=="data:"&&(f.crossOrigin="Anonymous"),f.src=e,await new Promise((h,p)=>{f.onload=()=>h(),f.onerror=()=>p(new Error("Failed to load image"))}).catch(h=>{console.error(h)}),{data:f,premultiplyAlpha:r!=null?r:!0}}}async getTextureData(){const{src:e,premultiplyAlpha:r,type:s}=this.props;if(e===null)return{data:null};if(typeof e!="string")return e instanceof ImageData?{data:e,premultiplyAlpha:r}:{data:e(),premultiplyAlpha:r};const o=No(e);return s==="regular"?this.loadImage(o):s==="svg"?zn(o,this.props.width,this.props.height,this.props.sx,this.props.sy,this.props.sw,this.props.sh):qo(e)===!0?zn(o,this.props.width,this.props.height,this.props.sx,this.props.sy,this.props.sw,this.props.sh):s==="compressed"||Ko(e)===!0?On(o):this.loadImage(o)}static makeCacheKey(e){var i,a,l;const r=_t.resolveDefaults(e),s=r.key||r.src;if(typeof s!="string")return!1;let o="";return r.sh!==null&&r.sw!==null&&(o+=",",o+=(i=r.sx)!=null?i:"",o+=(a=r.sy)!=null?a:"",o+=r.sw||"",o+=r.sh||""),"ImageTexture,".concat(s,",").concat((l=r.premultiplyAlpha)!=null?l:"true").concat(o)}static resolveDefaults(e){var r,s,o,i,a,l,d,f,h,p;return{src:(r=e.src)!=null?r:"",premultiplyAlpha:(s=e.premultiplyAlpha)!=null?s:!0,key:(o=e.key)!=null?o:null,type:(i=e.type)!=null?i:null,width:(a=e.width)!=null?a:null,height:(l=e.height)!=null?l:null,sx:(d=e.sx)!=null?d:null,sy:(f=e.sy)!=null?f:null,sw:(h=e.sw)!=null?h:null,sh:(p=e.sh)!=null?p:null}}};c(_t,"z$__type__Props");let sr=_t;const Et=class Et extends ct{constructor(e,r){super(e);c(this,"props");this.props=Et.resolveDefaults(r)}async getTextureData(){const{width:e,height:r}=this.props,s=e*r*4,o=new Uint8ClampedArray(s);for(let i=0;i<s;i+=4){const a=Math.floor(Math.random()*256);o[i]=a,o[i+1]=a,o[i+2]=a,o[i+3]=255}return{data:new ImageData(o,e,r)}}static makeCacheKey(e){if(e.cacheId===void 0)return!1;const r=Et.resolveDefaults(e);return"NoiseTexture,".concat(r.width,",").concat(r.height,",").concat(r.cacheId)}static resolveDefaults(e){var r,s,o;return{width:(r=e.width)!=null?r:128,height:(s=e.height)!=null?s:128,cacheId:(o=e.cacheId)!=null?o:0}}};c(Et,"z$__type__Props");let $r=Et;const mr=class mr extends ct{constructor(e,r){super(e);c(this,"props");c(this,"parentTexture");c(this,"onParentTxLoaded",()=>{this.setState("loaded",{width:this.props.width,height:this.props.height})});c(this,"onParentTxFailed",(e,r)=>{this.setState("failed",r)});this.props=mr.resolveDefaults(r||{}),this.parentTexture=this.props.texture,queueMicrotask(()=>{const s=this.parentTexture;s.state==="loaded"?this.onParentTxLoaded(s,s.dimensions):s.state==="failed"&&this.onParentTxFailed(s,s.error),s.on("loaded",this.onParentTxLoaded),s.on("failed",this.onParentTxFailed)})}onChangeIsRenderable(e){this.parentTexture.setRenderableOwner(this,e)}async getTextureData(){return{data:this.props}}static makeCacheKey(e){return!1}static resolveDefaults(e){return{texture:e.texture,x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0}}};c(mr,"z$__type__Props");let Rt=mr;const xr=class xr extends ct{constructor(e,r){super(e);c(this,"props");this.props=xr.resolveDefaults(r||{})}get width(){return this.props.width}set width(e){this.props.width=e}get height(){return this.props.height}set height(e){this.props.height=e}async getTextureData(){return{data:null,premultiplyAlpha:null}}static resolveDefaults(e){return{width:e.width||256,height:e.height||256}}};c(xr,"z$__type__Props");let Ct=xr;class Zo{constructor(t){c(this,"keyCache",new Map);c(this,"inverseKeyCache",new WeakMap);c(this,"txConstructors",{});c(this,"imageWorkerManager",null);c(this,"hasCreateImageBitmap",!!self.createImageBitmap);c(this,"hasWorker",!!self.Worker);c(this,"renderer");c(this,"frameTime",0);this.hasCreateImageBitmap&&this.hasWorker&&t>0&&(this.imageWorkerManager=new Yo(t)),this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.registerTextureType("ImageTexture",sr),this.registerTextureType("ColorTexture",nr),this.registerTextureType("NoiseTexture",$r),this.registerTextureType("SubTexture",Rt),this.registerTextureType("RenderTexture",Ct)}registerTextureType(t,e){this.txConstructors[t]=e}loadTexture(t,e){let r;const s=this.txConstructors[t];if(!s)throw new Error('Texture type "'.concat(t,'" is not registered'));if(!r){const o=s.makeCacheKey(e);o&&this.keyCache.has(o)?r=this.keyCache.get(o):(r=new s(this,e),o&&this.initTextureToCache(r,o))}return r}initTextureToCache(t,e){const{keyCache:r,inverseKeyCache:s}=this;r.set(e,t),s.set(t,e)}removeTextureFromCache(t){const{inverseKeyCache:e,keyCache:r}=this,s=e.get(t);s&&r.delete(s)}}const Rr=new Map,Jo={normal:400,bold:700,bolder:900,lighter:100},Wn=n=>typeof n=="number"?n:Jo[n]||400;function ei(n,t,e,r,s){let o=Wn(e);for(const i of n){const a=i[t];if(!a)continue;if(a.size===1)return console.warn("TrFontManager: Only one font face found for family: '".concat(t,"' - will be used for all weights and styles")),a.values().next().value;const l=new Map;for(const f of a){const h=Wn(f.descriptors.weight);if(h===o&&f.descriptors.style===r&&f.descriptors.stretch===s)return f;l.set(h,f)}const d="TrFontManager: No exact match: '".concat(t," Weight: ").concat(o," Style: ").concat(r," Stretch: ").concat(s,"'");if(console.error(d),o===400&&l.has(500))return l.get(500);if(o===500&&l.has(400))return l.get(400);if(o<400){for(;o>0;){if(l.has(o))return l.get(o);o-=100}o=600}for(;o<1e3;){if(l.has(o))return l.get(o);o+=100}for(o=500;o>0;){if(l.has(o))return l.get(o);o-=100}}}class ps{constructor(t){c(this,"textRenderers");this.textRenderers=t}addFontFace(t){for(const e in this.textRenderers){const r=this.textRenderers[e];r&&r.isFontFaceSupported(t)&&r.addFontFace(t)}}static resolveFontFace(t,e){const{fontFamily:r,fontWeight:s,fontStyle:o,fontStretch:i}=e,a="".concat(r).concat(o).concat(s).concat(i);if(Rr.has(a)===!0)return Rr.get(a);const l=ei(t,r,s,o,i);return l!==void 0&&Rr.set(a,l),l}}class gs{static makeCacheKey(t){return!1}static resolveDefaults(t){return{}}}function Hn(n,t,e){const r=n.createShader(t);if(!r)throw new Error;if(n.shaderSource(r,e),n.compileShader(r),n.getShaderParameter(r,n.COMPILE_STATUS))return r;console.log(n.getShaderInfoLog(r)),n.deleteShader(r)}function ti(n,t,e){const r=n.createProgram();if(!r)throw new Error;if(n.attachShader(r,t),n.attachShader(r,e),n.linkProgram(r),n.getProgramParameter(r,n.LINK_STATUS))return r;console.log(n.getProgramInfoLog(r)),n.deleteProgram(r)}class ze extends gs{constructor(e){super();c(this,"boundBufferCollection",null);c(this,"buffersBound",!1);c(this,"program");c(this,"vao");c(this,"renderer");c(this,"glw");c(this,"attributeBuffers");c(this,"attributeLocations");c(this,"attributeNames");c(this,"uniformLocations");c(this,"uniformTypes");c(this,"supportsIndexedTextures");const r=this.renderer=e.renderer,s=this.glw=this.renderer.glw;this.supportsIndexedTextures=e.supportsIndexedTextures||!1;const o=s.isWebGl2(),i=o&&e.webgl2Extensions||!o&&e.webgl1Extensions||[],a=o?"2.0":"1.0";i.forEach(x=>{if(!s.getExtension(x))throw new Error('Shader "'.concat(this.constructor.name,'" requires extension "').concat(x,'" for WebGL ').concat(a," but wasn't found"))});const l=e.shaderSources||this.constructor.shaderSources;if(l)o&&(l!=null&&l.webGl2)&&(l.fragment=l.webGl2.fragment,l.vertex=l.webGl2.vertex,delete l.webGl2);else throw new Error('Shader "'.concat(this.constructor.name,'" is missing shaderSources.'));const d=r.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,f=l.vertex instanceof Function?l.vertex(d):l.vertex,h=l.fragment instanceof Function?l.fragment(d):l.fragment,p=Hn(s,s.VERTEX_SHADER,f),v=Hn(s,s.FRAGMENT_SHADER,h);if(!p||!v)throw new Error;const y=ti(s,p,v);if(!y)throw new Error;if(this.program=y,o){const x=s.createVertexArray();if(!x)throw new Error;this.vao=x,s.bindVertexArray(this.vao)}this.attributeLocations={},this.attributeBuffers={},this.attributeNames=[],[...e.attributes].forEach(x=>{const A=s.getAttribLocation(this.program,x);if(A<0)throw new Error("".concat(this.constructor.name,': Vertex shader must have an attribute "').concat(x,'"!'));const w=s.createBuffer();if(!w)throw new Error("".concat(this.constructor.name,': Could not create buffer for attribute "').concat(x,'"'));this.attributeLocations[x]=A,this.attributeBuffers[x]=w,this.attributeNames.push(x)}),this.uniformLocations={},this.uniformTypes={},e.uniforms.forEach(x=>{const A=s.getUniformLocation(this.program,x.name);if(this.uniformTypes[x.name]=x.uniform,!A){console.warn('Shader "'.concat(this.constructor.name,'" could not get uniform location for "').concat(x.name,'"'));return}this.uniformLocations[x.name]=A})}bindBufferAttribute(e,r,s){const{glw:o}=this;o.enableVertexAttribArray(e),o.vertexAttribPointer(r,e,s.size,s.type,s.normalized,s.stride,s.offset)}disableAttribute(e){this.glw.disableVertexAttribArray(e)}disableAttributes(){for(const e in this.attributeLocations)this.disableAttribute(this.attributeLocations[e]);this.boundBufferCollection=null}canBatchShaderProps(e,r){return!1}bindRenderOp(e,r){this.bindBufferCollection(e.buffers),e.textures.length>0&&this.bindTextures(e.textures);const{glw:s,parentHasRenderTexture:o,renderToTexture:i}=e;if(!(i&&o)){if(o){const{width:a,height:l}=e.framebufferDimensions||{};this.setUniform("u_pixelRatio",1),this.setUniform("u_resolution",new Float32Array([a!=null?a:0,l!=null?l:0]))}else this.setUniform("u_pixelRatio",e.options.pixelRatio),this.setUniform("u_resolution",new Float32Array([s.canvas.width,s.canvas.height]));if(r){if(Vr(r,"$dimensions")){let a=r.$dimensions;a||(a=e.dimensions),this.setUniform("u_dimensions",[a.width,a.height])}if(Vr(r,"$alpha")){let a=r.$alpha;a||(a=e.alpha),this.setUniform("u_alpha",a)}this.bindProps(r)}}}setUniform(e,...r){this.glw.setUniform(this.uniformTypes[e],this.uniformLocations[e],...r)}bindBufferCollection(e){if(this.boundBufferCollection!==e){for(const r in this.attributeLocations){const s=e.getBuffer(r),o=e.getAttributeInfo(r);k(s,'Buffer for "'.concat(r,'" not found')),k(o),this.bindBufferAttribute(this.attributeLocations[r],s,o)}this.boundBufferCollection=e}}bindProps(e){}bindTextures(e){}attach(){this.glw.useProgram(this.program),this.glw.useProgram(this.program),this.glw.isWebGl2()&&this.vao&&this.glw.bindVertexArray(this.vao)}detach(){this.disableAttributes()}}c(ze,"shaderSources");class ms extends ze{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(t){const{glw:e}=this;e.activeTexture(0),e.bindTexture(t[0].ctxTexture)}}c(ms,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio;\n        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);\n\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);\n        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    "});class xs extends ze{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});c(this,"supportsIndexedTextures",!0)}bindTextures(e){const{renderer:r,glw:s}=this;if(e.length>r.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error("DefaultShaderBatched: Cannot bind more than ".concat(r.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS," textures"));e.forEach((i,a)=>{s.activeTexture(a),s.bindTexture(i.ctxTexture)});const o=Array.from(Array(e.length).keys());this.setUniform("u_textures[0]",o)}}c(xs,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:e=>"\n      #define txUnits ".concat(e,"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[").concat(e,"], int idx, vec2 uv) {\n        ").concat(Array.from(Array(e).keys()).map(r=>"\n          ".concat(r!==0?"else ":"","if (idx == ").concat(r,") {\n            return texture2D(textures[").concat(r,"], uv);\n          }\n        ")).join(""),"\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    ")});class oe{constructor(t){c(this,"priority",1);c(this,"name","");c(this,"ref");c(this,"target");c(this,"passParameters","");c(this,"declaredUniforms","");c(this,"uniformInfo",{});const{ref:e,target:r,props:s={}}=t;this.ref=e,this.target=r;const o={},i=[];let a="";const l=this.constructor.uniforms||{};for(const d in l){const f=l[d],h=f.type,p="".concat(e,"_").concat(d);let v="";f.size&&(v="[".concat(f.size(s),"]")),i.push(p),a+="uniform ".concat(h," ").concat(p).concat(v,";"),o[d]={name:p,uniform:l[d].method}}this.passParameters=i.join(","),this.declaredUniforms=a,this.uniformInfo=o}static getEffectKey(t){return""}static getMethodParameters(t,e){const r=[];for(const s in t){const o=t[s];let i="";o.size&&(i="[".concat(o.size(e),"]")),r.push("".concat(o.type," ").concat(s).concat(i))}return r.join(",")}static resolveDefaults(t){return{}}static makeEffectKey(t){return!1}}c(oe,"uniforms",{}),c(oe,"methods"),c(oe,"onShaderMask"),c(oe,"onColorize"),c(oe,"onEffectMask");const Cr=new Map,ri=(n,t)=>{const e=JSON.stringify(n);if(Cr.has(e))return Cr.get(e);n=n!=null?n:[];const r=[],s=n.length;let o=0;for(;o<s;o++){const{name:i,type:a,props:l}=n[o],d={name:i,type:a,props:{}},f=t[a],h=f.resolveDefaults(l),p=f.uniforms,v=Object.keys(p),y=v.length;let x=0;for(;x<y;x++){const A=v[x],w=p[A],m={value:h[A],programValue:void 0,updateOnBind:w.updateOnBind||!1,hasValidator:w.validator!==void 0,hasProgramValueUpdater:w.updateProgramValue!==void 0},b=m.hasValidator&&w.validator(h[A],h)||h[A];h[A]!==b&&(m.validatedValue=b),m.hasProgramValueUpdater&&w.updateProgramValue(m),m.programValue===void 0&&(m.programValue=m.value),d.props[A]=m}r.push(d)}return Cr.set(e,r),r},Fe=class Fe extends ze{constructor(e,r,s){const o=Fe.createShader(r,s);super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...o.uniforms],shaderSources:{vertex:o.vertex,fragment:o.fragment}});c(this,"effects",[]);this.effects=o.effects}bindTextures(e){const{glw:r}=this;r.activeTexture(0),r.bindTexture(e[0].ctxTexture)}bindProps(e){var i;const r=e.effects,s=r.length;let o=0;for(;o<s;o++){const a=r[o],l=this.effects[o].uniformInfo,d=Object.keys(a.props),f=d.length;let h=0;for(;h<f;h++){const p=d[h];if(a.props[p].updateOnBind===!0){const y=(i=this.renderer.shManager.getRegisteredEffects()[a.type])==null?void 0:i.uniforms[p];y==null||y.updateProgramValue(a.props[p],e)}this.setUniform(l[p].name,a.props[p].programValue)}}}canBatchShaderProps(e,r){if(e.$dimensions.width!==r.$dimensions.width||e.$dimensions.height!==r.$dimensions.height||e.effects.length!==r.effects.length)return!1;const s=e.effects.length;let o=0;for(;o<s;o++){const i=e.effects[o],a=r.effects[o];if(i.type!==a.type)return!1;for(const l in i.props)if(a.props&&!a.props[l]||i.props[l].value!==a.props[l].value)return!1}return!0}static createShader(e,r){const s={},o={};let i="";const a=[],l=[],d=e.effects.map(y=>{const x=r[y.type],A=x.getEffectKey(y.props||{});s[A]=s[A]?++s[A]:1;const w=s[A];w===1&&l.push({key:A,type:y.type,props:y.props});const m=new x({ref:"".concat(A).concat(w===1?"":w),target:A,props:y.props});return i+=m.declaredUniforms,a.push(...Object.values(m.uniformInfo)),m});let f="";l==null||l.forEach(y=>{var R;const x=r[y.type],A=x.resolveDefaults((R=y.props)!=null?R:{}),w=[];for(const I in x.methods){let C=I;const M=x.methods[I];o[I]&&o[I]!==M&&(C=Fe.resolveMethodDuplicate(I,M,o)),o[C]=M.replace("function",C),w.push({m:I,cm:C})}let m=x.onShaderMask instanceof Function?x.onShaderMask(A):x.onShaderMask,b=x.onColorize instanceof Function?x.onColorize(A):x.onColorize,g=x.onEffectMask instanceof Function?x.onEffectMask(A):x.onEffectMask;w.forEach(I=>{const{m:C,cm:M}=I,S=new RegExp("\\$".concat(C),"g");m&&(m=m.replace(S,M)),b&&(b=b.replace(S,M)),g&&(g=g.replace(S,M))});const T=x.getMethodParameters(x.uniforms,A),_=T.length>0?", ".concat(T):"";m&&(f+="\n        float fx_".concat(y.key,"_onShaderMask(float shaderMask ").concat(_,") {\n          ").concat(m,"\n        }\n        ")),b&&(f+="\n          vec4 fx_".concat(y.key,"_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(_,") {\n            ").concat(b,"\n          }\n        ")),g&&(f+="\n          vec4 fx_".concat(y.key,"_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(_,") {\n            ").concat(g,"\n          }\n        "))});let h="";for(const y in o)h+=o[y];let p="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",v="\n\n    ";for(let y=0;y<d.length;y++){const x=d[y],A=x.passParameters.length>0?", ".concat(x.passParameters):"",w=r[x.name];w.onShaderMask&&(v+="\n        shaderMask = fx_".concat(x.target,"_onShaderMask(shaderMask ").concat(A,");\n        ")),w.onColorize&&(v+="\n        maskColor = fx_".concat(x.target,"_onColorize(shaderMask, maskColor, shaderColor").concat(A,");\n        ")),w.onEffectMask&&(p="fx_".concat(x.target,"_onEffectMask(shaderMask, maskColor, shaderColor").concat(A,")"));const m=d[y+1];(m===void 0||r[m.name].onEffectMask)&&(v+="\n          shaderColor = ".concat(p,";\n        "))}return{effects:d,uniforms:a,fragment:Fe.fragment(i,h,f,v),vertex:Fe.vertex()}}static resolveMethodDuplicate(e,r,s,o=0){const i=e+(o>0?o:"");return s[i]&&s[i]!==r?this.resolveMethodDuplicate(e,r,s,++o):i}static resolveDefaults(e,r){var s;return k(r),{effects:ri((s=e.effects)!=null?s:[],r),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(e,r){var o;let s="";return(o=e.effects)==null||o.forEach(i=>{const l=r[i.type].getEffectKey(i.props||{});s+=",".concat(l)}),"DynamicShader".concat(s)}};c(Fe,"z$__type__Props"),c(Fe,"vertex",()=>"\n    # ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  "),c(Fe,"fragment",(e,r,s,o)=>"\n    # ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ".concat(e,"\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n\n    ").concat(r,"\n\n    ").concat(s,"\n\n    void main() {\n      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ").concat(o,"\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  "));let lt=Fe;class Gr extends ze{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(t){return{radius:t.radius||10,$dimensions:{width:0,height:0}}}bindTextures(t){const{glw:e}=this;e.activeTexture(0),e.bindTexture(t[0].ctxTexture)}bindProps(t){const e=Math.min(t.$dimensions.width,t.$dimensions.height)/(2*t.radius);this.setUniform("u_radius",t.radius*Math.min(e,1))}canBatchShaderProps(t,e){return t.radius===e.radius&&t.$dimensions.width===e.$dimensions.width&&t.$dimensions.height===e.$dimensions.height}}c(Gr,"z$__type__Props"),c(Gr,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    "});const ni=new Float32Array([1,0,0,0,1,0,0,0,1]),yr=class yr extends ze{constructor(t){super({renderer:t,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(t){const{glw:e}=this;e.activeTexture(0),e.bindTexture(t[0].ctxTexture)}bindProps(t){const e=yr.resolveDefaults(t);for(const r in e)if(r==="transform")this.setUniform("u_transform",!1,e[r]);else if(r==="scrollY")this.setUniform("u_scrollY",e[r]);else if(r==="color"){const s=vr(e.color);this.setUniform("u_color",s)}else r==="size"?this.setUniform("u_size",e[r]):r==="distanceRange"?this.setUniform("u_distanceRange",e[r]):r==="debug"&&this.setUniform("u_debug",e[r]?1:0)}static resolveDefaults(t={}){var e,r,s,o,i,a;return{transform:(e=t.transform)!=null?e:ni,scrollY:(r=t.scrollY)!=null?r:0,color:(s=t.color)!=null?s:4294967295,size:(o=t.size)!=null?o:16,distanceRange:(i=t.distanceRange)!=null?i:1,debug:(a=t.debug)!=null?a:!1}}};c(yr,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n\n        // Calculate screen space with pixel ratio\n        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);\n\n        gl_Position = vec4(screenSpace, 0.0, 1.0);\n        v_texcoord = a_textureCoordinate;\n\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    "});let Yr=yr;const ut=n=>{n.programValue===void 0&&(n.programValue=new Float32Array(4));const t=n.value,e=n.programValue;e[0]=(t>>>24)/255,e[1]=(t>>>16&255)/255,e[2]=(t>>>8&255)/255,e[3]=(t&255)/255},si=n=>{const t=n.validatedValue||n.value;if(n.programValue instanceof Float32Array){const e=n.programValue;e[0]=t[0],e[1]=t[1]}else n.programValue=new Float32Array(t)},oi=n=>{const t=n.validatedValue||n.value;if(n.programValue instanceof Float32Array){const e=n.programValue;e[0]=t[0],e[1]=t[1],e[2]=t[1],e[3]=t[1]}else n.programValue=new Float32Array(t)},ys=n=>{const t=n.validatedValue||n.value;if(n.programValue instanceof Float32Array){const e=t.length,r=n.programValue;for(let s=0;s<e;s++)r[s]=t[s]}else n.programValue=new Float32Array(t)},mn=n=>{const t=Array.isArray(n);if(t){if(t&&n.length===4)return n;if(t&&n.length===2)return[n[0],n[1],n[0],n[1]];if(t&&n.length===3)return[n[0],n[1],n[2],n[0]]}else return[n,n,n,n];return[n[0],n[0],n[0],n[0]]},vs=(n,t)=>{n.programValue===void 0&&(n.programValue=new Float32Array(4));const e=n.programValue,r=n.validatedValue||n.value;if(t===void 0&&n.$dimensions===void 0){e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3];return}let s=n.$dimensions;if(t!==void 0){const{$dimensions:p}=t;if(s!==void 0&&(s.width===p.width||s.height===p.height))return;s===void 0&&(s={width:p==null?void 0:p.width,height:p==null?void 0:p.height},n.$dimensions=s)}const{width:o,height:i}=s,[a,l,d,f]=r,h=Math.min(Math.min(Math.min(o/Math.max(o,a+l),o/Math.max(o,d+f)),Math.min(i/Math.max(i,a+d),i/Math.max(i,l+f))),1);e[0]=a*h,e[1]=l*h,e[2]=d*h,e[3]=f*h};class tt extends oe{constructor(){super(...arguments);c(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(e){var r;return{radius:(r=e.radius)!=null?r:10}}}c(tt,"z$__type__Props"),c(tt,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:mn,updateProgramValue:vs}}),c(tt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),c(tt,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);\n  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);\n  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  "),c(tt,"onEffectMask","\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  ");class gt extends oe{constructor(){super(...arguments);c(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(e){var r,s;return{width:(r=e.width)!=null?r:10,color:(s=e.color)!=null?s:4294967295}}}c(gt,"z$__type__Props"),c(gt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:ut,method:"uniform4fv",type:"vec4"}}),c(gt,"onEffectMask","\n  float intR = shaderMask + 1.0;\n  float mask = clamp(intR + width, 0.0, 1.0) - clamp(intR, 0.0, 1.0);\n  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);\n  "),c(gt,"onColorize","\n    return color;\n  ");const Ue=class Ue extends oe{constructor(){super(...arguments);c(this,"name","linearGradient")}static getEffectKey(e){return"linearGradient".concat(e.colors.length)}static resolveDefaults(e){var o,i;const r=(o=e.colors)!=null?o:[4278190080,4294967295];let s=e.stops||[];if(s.length===0||s.length!==r.length){const a=r.length;let l=0;const d=s;for(;l<a;l++)s[l]?(d[l]=s[l],s[l-1]===void 0&&d[l-2]!==void 0&&(d[l-1]=d[l-2]+(s[l]-d[l-2])/2)):d[l]=l*(1/(r.length-1));s=d}return{colors:r,stops:s,angle:(i=e.angle)!=null?i:0}}};c(Ue,"z$__type__Props"),c(Ue,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:e=>e.reduce((r,s)=>r.concat(vr(s)),[]),updateProgramValue:ys,size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),c(Ue,"methods",{fromLinear:"\n      vec4 function(vec4 linearRGB) {\n        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n        vec4 lower = linearRGB * vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",toLinear:"\n      vec4 function(vec4 sRGB) {\n        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n        vec4 lower = sRGB/vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",calcPoint:"\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    "}),c(Ue,"ColorLoop",e=>{let r="";for(let s=2;s<e;s++)r+="colorOut = mix(colorOut, colors[".concat(s,"], clamp((dist - stops[").concat(s-1,"]) / (stops[").concat(s,"] - stops[").concat(s-1,"]), 0.0, 1.0));");return r}),c(Ue,"onColorize",e=>{const r=e.colors.length||1;return"\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));\n      ".concat(Ue.ColorLoop(r),"\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")});let Kr=Ue;class Qr extends oe{constructor(){super(...arguments);c(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(e){var r;return{amount:(r=e.amount)!=null?r:1}}}c(Qr,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),c(Qr,"onColorize","\n    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;\n    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);\n  ");class rt extends oe{constructor(){super(...arguments);c(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(e){var r,s;return{width:(r=e.width)!=null?r:10,color:(s=e.color)!=null?s:4294967295}}}c(rt,"z$__type__Props"),c(rt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:ut,method:"uniform4fv",type:"vec4"}}),c(rt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),c(rt,"onEffectMask","\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),c(rt,"onColorize","\n    return color;\n  ");class nt extends oe{constructor(){super(...arguments);c(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(e){var r,s;return{width:(r=e.width)!=null?r:10,color:(s=e.color)!=null?s:4294967295}}}c(nt,"z$__type__Props"),c(nt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:ut,method:"uniform4fv",type:"vec4"}}),c(nt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),c(nt,"onEffectMask","\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),c(nt,"onColorize","\n    return color;\n  ");class st extends oe{constructor(){super(...arguments);c(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(e){var r,s;return{width:(r=e.width)!=null?r:10,color:(s=e.color)!=null?s:4294967295}}}c(st,"z$__type__Props"),c(st,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:ut,method:"uniform4fv",type:"vec4"}}),c(st,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),c(st,"onEffectMask","\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),c(st,"onColorize","\n    return color;\n  ");class ot extends oe{constructor(){super(...arguments);c(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(e){var r,s;return{width:(r=e.width)!=null?r:10,color:(s=e.color)!=null?s:4294967295}}}c(ot,"z$__type__Props"),c(ot,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:ut,method:"uniform4fv",type:"vec4"}}),c(ot,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),c(ot,"onEffectMask","\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),c(ot,"onColorize","\n    return color;\n  ");class mt extends oe{constructor(){super(...arguments);c(this,"name","glitch")}static getEffectKey(e){return"glitch"}static resolveDefaults(e){var r,s,o,i,a;return{amplitude:(r=e.amplitude)!=null?r:.2,narrowness:(s=e.narrowness)!=null?s:4,blockiness:(o=e.blockiness)!=null?o:2,minimizer:(i=e.minimizer)!=null?i:8,time:(a=e.time)!=null?a:Date.now()}}}c(mt,"z$__type__Props"),c(mt,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",updateOnBind:!0,updateProgramValue:e=>{const r=e.value=(Date.now()-e.value)%1e3;e.programValue=r},type:"float"}}),c(mt,"methods",{rand:"\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    ",noise:"\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    ",fbm:"\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    "}),c(mt,"onColorize","\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  ");class er extends oe{constructor(){super(...arguments);c(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(e){var r;return{fade:(r=e.fade)!=null?r:10}}}c(er,"z$__type__Props"),c(er,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:mn,updateProgramValue:oi}}),c(er,"onColorize","\n  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  ");const Ke=class Ke extends oe{constructor(){super(...arguments);c(this,"name","radialGradient")}static getEffectKey(e){return"radialGradient".concat(e.colors.length)}static resolveDefaults(e){var o,i,a,l,d;const r=(o=e.colors)!=null?o:[4278190080,4294967295];let s=e.stops||[];if(s.length===0||s.length!==r.length){const f=r.length;let h=0;const p=s;for(;h<f;h++)s[h]?(p[h]=s[h],s[h-1]===void 0&&p[h-2]!==void 0&&(p[h-1]=p[h-2]+(s[h]-p[h-2])/2)):p[h]=h*(1/(r.length-1));s=p}return{colors:r,stops:s,width:(i=e.width)!=null?i:0,height:(l=(a=e.height)!=null?a:e.width)!=null?l:0,pivot:(d=e.pivot)!=null?d:[.5,.5]}}};c(Ke,"z$__type__Props"),c(Ke,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],updateProgramValue:si,method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:e=>e.reduce((r,s)=>r.concat(vr(s)),[]),updateProgramValue:ys,size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),c(Ke,"ColorLoop",e=>{let r="";for(let s=2;s<e;s++)r+="colorOut = mix(colorOut, colors[".concat(s,"], clamp((dist - stops[").concat(s-1,"]) / (stops[").concat(s,"] - stops[").concat(s-1,"]), 0.0, 1.0));");return r}),c(Ke,"onColorize",e=>{const r=e.colors.length||1;return"\n      vec2 point = v_textureCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = mix(colors[0], colors[1], stopCalc);\n      ".concat(Ke.ColorLoop(r),"\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")});let jr=Ke;class it extends oe{constructor(){super(...arguments);c(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(e){var r,s,o,i,a,l,d;return{width:(r=e.width)!=null?r:10,progress:(s=e.progress)!=null?s:.5,offset:(o=e.offset)!=null?o:0,range:(i=e.range)!=null?i:Math.PI*2,rounded:(a=e.rounded)!=null?a:!1,radius:(l=e.radius)!=null?l:1,color:(d=e.color)!=null?d:4294967295}}}c(it,"z$__type__Props"),c(it,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:e=>e?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:ut,method:"uniform4fv",type:"vec4"}}),c(it,"methods",{rotateUV:"\n    vec2 function(vec2 uv, float d) {\n      float s = sin(d);\n      float c = cos(d);\n      mat2 rotMatrix = mat2(c, -s, s, c);\n      return uv * rotMatrix;\n    }\n    ",drawDot:"\n    float function(vec2 uv, vec2 p, float r) {\n      uv += p;\n      float circle = length(uv) - r;\n      return clamp(-circle, 0.0, 1.0);\n    }\n    "}),c(it,"onEffectMask","\n    float outerRadius = radius * u_dimensions.y * 0.5;\n\n    float endAngle = range * progress - 0.0005;\n\n    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;\n\n    uv = $rotateUV(uv, -(offset));\n    float linewidth = width * u_pixelRatio;\n    float circle = length(uv) - (outerRadius - linewidth) ;\n    circle = abs(circle) - linewidth;\n    circle = clamp(-circle, 0.0, 1.0);\n\n    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);\n    float p = endAngle / (PI * 2.);\n\n    circle *= step(fract(angle), fract(p));\n\n    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));\n    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));\n\n    return mix(shaderColor, maskColor, circle);\n  "),c(it,"onColorize","\n    return color;\n  ");class at extends oe{constructor(){super(...arguments);c(this,"name","holePunch")}static getEffectKey(){return"holePunch"}static resolveDefaults(e){var r;return{x:e.x||0,y:e.y||0,width:e.width||50,height:e.height||50,radius:(r=e.radius)!=null?r:0}}}c(at,"z$__type__Props"),c(at,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:mn,updateProgramValue:vs}}),c(at,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),c(at,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  vec2 size = vec2(width, height) * 0.5;\n  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);\n  vec2 pos = basePos - size;\n  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);\n  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);\n  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);\n  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);\n  return $boxDist(pos, size, r);\n  "),c(at,"onEffectMask","\n  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));\n  ");const ii="RoundedRectangle";class ai extends gs{constructor(e){super();c(this,"shType");this.shType=e,e!==ii&&console.warn("Unsupported shader:",e)}bindRenderOp(){}bindProps(){}attach(){}detach(){}}class li{constructor(t,e,r,s){c(this,"type");c(this,"shader");c(this,"resolvedProps");c(this,"props");this.type=t,this.shader=e,this.resolvedProps=r;const o=Object.keys(r),i=o.length,a={};for(let l=0;l<i;l++){const d=o[l];Object.defineProperty(a,d,{get:()=>this.resolvedProps[d],set:f=>{this.resolvedProps[d]=f,s.requestRender()}})}this.props=a}getResolvedProps(){return this.resolvedProps}}class ci{constructor(t,e,r){c(this,"shader");c(this,"resolvedProps");c(this,"props");c(this,"type");this.shader=t,this.type="DynamicShader",this.resolvedProps=e;const s=r.getRegisteredEffects(),o={},i=e.effects,a=i.length;for(let l=0;l<a;l++){const{name:d,props:f,type:h}=i[l];if(d===void 0)continue;const p={},v=Object.keys(f),y=v.length;for(let x=0;x<y;x++){const A=v[x];Object.defineProperty(p,A,{get:()=>this.resolvedProps.effects[l].props[A].value,set:w=>{var b,g;const m=this.resolvedProps.effects[l].props[A];m.value=w,m.hasValidator&&(w=m.validatedValue=(b=s[h].uniforms[A])==null?void 0:b.validator(w,f)),m.hasProgramValueUpdater?(g=s[h].uniforms[A])==null||g.updateProgramValue(m):m.programValue=w,r.renderer.stage.requestRender()}})}Object.defineProperty(o,d,{get:()=>p})}this.props=o}getResolvedProps(){return this.resolvedProps}}class ui{constructor(){c(this,"shCache",new Map);c(this,"shConstructors",{});c(this,"attachedShader",null);c(this,"effectConstructors",{});c(this,"renderer");this.registerShaderType("DefaultShader",ms),this.registerShaderType("DefaultShaderBatched",xs),this.registerShaderType("RoundedRectangle",Gr),this.registerShaderType("DynamicShader",lt),this.registerShaderType("SdfShader",Yr),this.registerEffectType("border",gt),this.registerEffectType("borderBottom",st),this.registerEffectType("borderLeft",ot),this.registerEffectType("borderRight",rt),this.registerEffectType("borderTop",nt),this.registerEffectType("fadeOut",er),this.registerEffectType("linearGradient",Kr),this.registerEffectType("radialGradient",jr),this.registerEffectType("grayscale",Qr),this.registerEffectType("glitch",mt),this.registerEffectType("radius",tt),this.registerEffectType("radialProgress",it),this.registerEffectType("holePunch",at)}registerShaderType(t,e){this.shConstructors[t]=e}registerEffectType(t,e){this.effectConstructors[t]=e}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(t,e){if(!this.renderer)throw new Error("Renderer is not been defined");const r=this.shConstructors[t];if(!r)throw new Error('Shader type "'.concat(t,'" is not registered'));if(this.renderer.mode==="canvas"&&r.prototype instanceof ze)return this._createShaderCtr(t,new ai(t),e);if(t==="DynamicShader")return this.loadDynamicShader(e);const s=r.resolveDefaults(e),o=r.makeCacheKey(s)||r.name;if(o&&this.shCache.has(o))return this._createShaderCtr(t,this.shCache.get(o),s);const i=new r(this.renderer,e);return o&&this.shCache.set(o,i),this._createShaderCtr(t,i,s)}loadDynamicShader(t){if(!this.renderer)throw new Error("Renderer is not been defined");const e=lt.resolveDefaults(t,this.effectConstructors),r=lt.makeCacheKey(e,this.effectConstructors);if(r&&this.shCache.has(r))return this._createDynShaderCtr(this.shCache.get(r),e);const s=new lt(this.renderer,t,this.effectConstructors);return r&&this.shCache.set(r,s),this._createDynShaderCtr(s,e)}_createShaderCtr(t,e,r){return new li(t,e,r,this.renderer.stage)}_createDynShaderCtr(t,e){return new ci(t,e,this)}useShader(t){this.attachedShader!==t&&(this.attachedShader&&this.attachedShader.detach(),t.attach(),this.attachedShader=t)}}const di={x:(n,t)=>{n.props.x=t},y:(n,t)=>{n.props.y=t},width:(n,t)=>{n.props.width=t},height:(n,t)=>{n.props.height=t},color:(n,t)=>{n.props.color=t},zIndex:(n,t)=>{n.props.zIndex=t},fontFamily:(n,t)=>{n.props.fontFamily=t},fontWeight:(n,t)=>{n.props.fontWeight=t},fontStyle:(n,t)=>{n.props.fontStyle=t},fontStretch:(n,t)=>{n.props.fontStretch=t},fontSize:(n,t)=>{n.props.fontSize=t},text:(n,t)=>{n.props.text=t},textAlign:(n,t)=>{n.props.textAlign=t},contain:(n,t)=>{n.props.contain=t},offsetY:(n,t)=>{n.props.offsetY=t},scrollable:(n,t)=>{n.props.scrollable=t},scrollY:(n,t)=>{n.props.scrollY=t},letterSpacing:(n,t)=>{n.props.letterSpacing=t},lineHeight:(n,t)=>{n.props.lineHeight=t},maxLines:(n,t)=>{n.props.maxLines=t},textBaseline:(n,t)=>{n.props.textBaseline=t},verticalAlign:(n,t)=>{n.props.verticalAlign=t},overflowSuffix:(n,t)=>{n.props.overflowSuffix=t},debug:(n,t)=>{n.props.debug=t}};class bs{constructor(t){c(this,"stage");c(this,"set");this.stage=t;const e={...di,...this.getPropertySetters()};this.set=Object.freeze(Object.fromEntries(Object.entries(e).map(([r,s])=>[r,(o,i)=>{o.props[r]!==i&&(s(o,i),this.stage.requestRender())}])))}setStatus(t,e,r){t.status!==e&&(t.status=e,t.emitter.emit(e,r))}setIsRenderable(t,e){t.isRenderable=e}destroyState(t){this.setStatus(t,"destroyed"),t.emitter.removeAllListeners()}scheduleUpdateState(t){t.updateScheduled||(t.updateScheduled=!0,queueMicrotask(()=>{t.status!=="destroyed"&&(t.updateScheduled=!1,this.updateState(t))}))}}class hi{constructor(){c(this,"data",{})}reset(){this.data={}}increment(t){this.data[t]||(this.data[t]=0),this.data[t]++}getData(){return{...this.data}}}class fi{constructor(t,e){c(this,"stage");c(this,"memUsed",0);c(this,"loadedTextures",new Map);c(this,"criticalThreshold");c(this,"targetThreshold");c(this,"cleanupInterval");c(this,"debugLogging");c(this,"lastCleanupTime",0);c(this,"criticalCleanupRequested",!1);c(this,"frameTime",0);this.stage=t;const{criticalThreshold:r}=e;this.criticalThreshold=Math.round(r);const s=Math.max(0,Math.min(1,e.targetThresholdLevel));if(this.targetThreshold=Math.round(r*s),this.cleanupInterval=e.cleanupInterval,this.debugLogging=e.debugLogging,e.debugLogging){let o=0;setInterval(()=>{o!==this.memUsed&&(o=this.memUsed,console.log("[TextureMemoryManager] Memory used: ".concat(Un(this.memUsed)," mb / ").concat(Un(this.criticalThreshold)," mb (").concat((this.memUsed/this.criticalThreshold*100).toFixed(1),"%)")))},1e3)}r===0&&(this.setTextureMemUse=()=>{})}setTextureMemUse(t,e){if(this.loadedTextures.has(t)&&(this.memUsed-=this.loadedTextures.get(t)),e===0){this.loadedTextures.delete(t);return}else this.memUsed+=e,this.loadedTextures.set(t,e);this.memUsed>this.criticalThreshold&&(this.criticalCleanupRequested=!0)}checkCleanup(){return this.criticalCleanupRequested||this.memUsed>this.targetThreshold&&this.frameTime-this.lastCleanupTime>=this.cleanupInterval}cleanup(){const t=this.criticalCleanupRequested;this.lastCleanupTime=this.frameTime,this.criticalCleanupRequested=!1,t&&this.stage.queueFrameEvent("criticalCleanup",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),this.debugLogging&&console.log("[TextureMemoryManager] Cleaning up textures. Critical: ".concat(t));const e=[...this.loadedTextures.keys()].sort((o,i)=>{const a=o.renderable,l=i.renderable;return a===l?o.lastRenderableChangeTime-i.lastRenderableChangeTime:a?1:l?-1:0}),r=this.targetThreshold,s=this.stage.txManager;for(const o of e)if(o.renderable||(o.preventCleanup===!1&&(o.ctxTexture.free(),s.removeTextureFromCache(o)),this.memUsed<=r))break;this.memUsed>=this.criticalThreshold&&(this.stage.queueFrameEvent("criticalCleanupFailed",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),console.warn("[TextureMemoryManager] Memory usage above critical threshold after cleanup: ".concat(this.memUsed)))}getMemoryInfo(){let t=0;const e=[...this.loadedTextures.keys()].reduce((r,s)=>(t+=s.renderable?1:0,r+(s.renderable?this.loadedTextures.get(s):0)),0);return{criticalThreshold:this.criticalThreshold,targetThreshold:this.targetThreshold,renderableMemUsed:e,memUsed:this.memUsed,renderableTexturesLoaded:t,loadedTextures:this.loadedTextures.size}}}class pi{constructor(t,e){c(this,"textureSource");c(this,"memManager");this.memManager=t,this.textureSource=e}setTextureMemUse(t){this.memManager.setTextureMemUse(this.textureSource,t)}get renderable(){return this.textureSource.renderable}}class gi{constructor(t){c(this,"options");c(this,"mode");c(this,"stage");c(this,"txManager");c(this,"txMemManager");c(this,"shManager");c(this,"rttNodes",[]);this.options=t,this.stage=t.stage,this.txManager=t.txManager,this.txMemManager=t.txMemManager,this.shManager=t.shManager}}class mi extends Xr{constructor(e,r,s){super(e,r);c(this,"textRenderer");c(this,"trState");c(this,"_textRendererOverride",null);c(this,"onTextLoaded",()=>{const{contain:e}=this,r=this.trState.props.width,s=this.trState.props.height,o=this.trState.textW||0,i=this.trState.textH||0;e==="both"?(this.props.width=r,this.props.height=s):e==="width"?(this.props.width=r,this.props.height=i):e==="none"&&(this.props.width=o,this.props.height=i),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});c(this,"onTextFailed",(e,r)=>{this.emit("failed",{type:"text",error:r})});this._textRendererOverride=r.textRendererOverride,this.textRenderer=s;const o=this.createState({x:this.absX,y:this.absY,width:r.width,height:r.height,textAlign:r.textAlign,color:r.color,zIndex:r.zIndex,contain:r.contain,scrollable:r.scrollable,scrollY:r.scrollY,offsetY:r.offsetY,letterSpacing:r.letterSpacing,debug:r.debug,fontFamily:r.fontFamily,fontSize:r.fontSize,fontStretch:r.fontStretch,fontStyle:r.fontStyle,fontWeight:r.fontWeight,text:r.text,lineHeight:r.lineHeight,maxLines:r.maxLines,textBaseline:r.textBaseline,verticalAlign:r.verticalAlign,overflowSuffix:r.overflowSuffix});this.trState=o}get width(){return this.props.width}set width(e){this.props.width=e,this.textRenderer.set.width(this.trState,e),this.contain==="none"&&this.setUpdateType(B.Local)}get height(){return this.props.height}set height(e){this.props.height=e,this.textRenderer.set.height(this.trState,e),this.contain!=="both"&&this.setUpdateType(B.Local)}get color(){return this.trState.props.color}set color(e){this.textRenderer.set.color(this.trState,e)}get text(){return this.trState.props.text}set text(e){this.textRenderer.set.text(this.trState,e)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(e){this._textRendererOverride=e,this.textRenderer.destroyState(this.trState);const r=this.stage.resolveTextRenderer(this.trState.props,this._textRendererOverride);if(!r){console.warn("Text Renderer not found for font",this.trState.props.fontFamily);return}this.textRenderer=r,this.trState=this.createState(this.trState.props)}get fontSize(){return this.trState.props.fontSize}set fontSize(e){this.textRenderer.set.fontSize(this.trState,e)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(e){this.textRenderer.set.fontFamily(this.trState,e)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(e){this.textRenderer.set.fontStretch(this.trState,e)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(e){this.textRenderer.set.fontStyle(this.trState,e)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(e){this.textRenderer.set.fontWeight(this.trState,e)}get textAlign(){return this.trState.props.textAlign}set textAlign(e){this.textRenderer.set.textAlign(this.trState,e)}get contain(){return this.trState.props.contain}set contain(e){this.textRenderer.set.contain(this.trState,e)}get scrollable(){return this.trState.props.scrollable}set scrollable(e){this.textRenderer.set.scrollable(this.trState,e)}get scrollY(){return this.trState.props.scrollY}set scrollY(e){this.textRenderer.set.scrollY(this.trState,e)}get offsetY(){return this.trState.props.offsetY}set offsetY(e){this.textRenderer.set.offsetY(this.trState,e)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(e){this.textRenderer.set.letterSpacing(this.trState,e)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(e){this.textRenderer.set.lineHeight(this.trState,e)}get maxLines(){return this.trState.props.maxLines}set maxLines(e){this.textRenderer.set.maxLines(this.trState,e)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(e){this.textRenderer.set.textBaseline(this.trState,e)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(e){this.textRenderer.set.verticalAlign(this.trState,e)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(e){this.textRenderer.set.overflowSuffix(this.trState,e)}get debug(){return this.trState.props.debug}set debug(e){this.textRenderer.set.debug(this.trState,e)}update(e,r){super.update(e,r),k(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkRenderProps(){return this.trState&&this.trState.props.text!==""?!0:super.checkRenderProps()}onChangeIsRenderable(e){super.onChangeIsRenderable(e),this.textRenderer.setIsRenderable(this.trState,e)}renderQuads(e){var r;if(k(this.globalTransform),!this.textRenderer.renderQuads){super.renderQuads(e);return}this.parentHasRenderTexture&&(!e.renderToTextureActive||this.parentRenderTexture!==e.activeRttNode)||(this.parentHasRenderTexture&&((r=this.props.parent)!=null&&r.rtt)&&(this.globalTransform=ge.identity(),this.localTransform&&this.globalTransform.multiply(this.localTransform)),k(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha,this.parentHasRenderTexture,this.framebufferDimensions))}destroy(){super.destroy(),this.textRenderer.destroyState(this.trState)}createState(e){const r=this.textRenderer.createState(e,this);return r.emitter.on("loaded",this.onTextLoaded),r.emitter.on("failed",this.onTextFailed),this.textRenderer.scheduleUpdateState(r),r}}function xi(n){const t={boolean:!0,string:!0,number:!0,undefined:!0},e=Object.keys(n);for(let r=0;r<e.length;r++){const s=e[r];if(!s)continue;const o=n[s],i=typeof o;i==="string"&&o.length>2048&&(console.warn("Custom Data value for ".concat(s," is too long, it will be truncated to 2048 characters")),n[s]=o.substring(0,2048)),t[i]||(console.warn("Custom Data value for ".concat(s," is not a boolean, string, or number, it will be ignored")),delete n[s])}return n}const yi=2e6;class vi{constructor(t){c(this,"options");c(this,"animationManager");c(this,"txManager");c(this,"txMemManager");c(this,"fontManager");c(this,"textRenderers");c(this,"shManager");c(this,"renderer");c(this,"root");c(this,"boundsMargin");c(this,"defShaderCtr");c(this,"eventBus");c(this,"deltaTime",0);c(this,"lastFrameTime",0);c(this,"currentFrameTime",0);c(this,"fpsNumFrames",0);c(this,"fpsElapsedTime",0);c(this,"renderRequested",!1);c(this,"frameEventQueue",[]);c(this,"fontResolveMap",{});c(this,"contextSpy",null);this.options=t;const{canvas:e,clearColor:r,appWidth:s,appHeight:o,boundsMargin:i,enableContextSpy:a,numImageWorkers:l,textureMemory:d,renderEngine:f,fontEngines:h}=t;this.eventBus=t.eventBus,this.txManager=new Zo(l),this.txMemManager=new fi(this,d),this.shManager=new ui,this.animationManager=new $o,this.contextSpy=a?new hi:null;let p=[0,0,0,0];i&&(p=Array.isArray(i)?i:[i,i,i,i]),this.boundsMargin=p;const v={stage:this,canvas:e,pixelRatio:t.devicePhysicalPixelRatio*t.deviceLogicalPixelRatio,clearColor:r!=null?r:4278190080,bufferMemory:yi,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy};this.renderer=new f(v);const y=this.renderer.mode||"webgl";this.defShaderCtr=this.renderer.getDefShaderCtr(),Io(y),this.txManager.renderer=this.renderer,this.textRenderers={},h.forEach(A=>{const w=new A(this),m=w.type;if(m==="sdf"&&y==="canvas"){console.warn("SdfTextRenderer is not compatible with Canvas renderer. Skipping...");return}w instanceof bs&&(m==="canvas"?this.textRenderers.canvas=w:m==="sdf"&&(this.textRenderers.sdf=w))}),Object.keys(this.textRenderers).length===0&&console.warn("No text renderers available. Your text will not render."),this.fontManager=new ps(this.textRenderers);const x=new Xr(this,{x:0,y:0,width:s,height:o,alpha:1,autosize:!1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:{},shader:this.defShaderCtr,rtt:!1,src:null,scale:1,preventCleanup:!1});this.root=x,Vo(this)}updateFrameTime(){const t=Xo();this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=t,this.deltaTime=this.lastFrameTime?t-this.lastFrameTime:100/6,this.txManager.frameTime=t,this.txMemManager.frameTime=t,this.eventBus.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime})}updateAnimations(){const{animationManager:t}=this;this.root&&t.update(this.deltaTime)}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested}drawFrame(){const{renderer:t,renderRequested:e}=this;k(t),this.root.updateType!==0&&this.root.update(this.deltaTime,this.root.clippingRect),t.reset(),this.txMemManager.criticalCleanupRequested&&this.txMemManager.cleanup(),t.rttNodes.length>0&&t.renderRTTNodes(),this.addQuads(this.root),t==null||t.render(),this.calculateFps(),e&&(this.renderRequested=!1)}queueFrameEvent(t,e){this.frameEventQueue.push([t,e])}flushFrameEvents(){for(const[t,e]of this.frameEventQueue)this.eventBus.emit(t,e);this.frameEventQueue=[]}calculateFps(){var e,r,s;const{fpsUpdateInterval:t}=this.options;if(t&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=t)){const o=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.queueFrameEvent("fpsUpdate",{fps:o,contextSpyData:(r=(e=this.contextSpy)==null?void 0:e.getData())!=null?r:null}),(s=this.contextSpy)==null||s.reset()}}addQuads(t){k(this.renderer&&t.globalTransform),t.isRenderable&&t.renderQuads(this.renderer);for(let e=0;e<t.children.length;e++){const r=t.children[e];r&&(r==null?void 0:r.worldAlpha)!==0&&this.addQuads(r)}}requestRender(){this.renderRequested=!0}resolveTextRenderer(t,e=null){const r="".concat(t.fontFamily).concat(t.fontStyle).concat(t.fontWeight).concat(t.fontStretch).concat(e||"");if(this.fontResolveMap[r]!==void 0)return this.fontResolveMap[r];let s=e,o=!1;if(s){const a=this.textRenderers[s];a?a.canRenderFont(t)||(console.warn("Cannot use override text renderer '".concat(s,"' for font"),t),s=null,o=!0):(console.warn("Text renderer override '".concat(s,"' not found.")),s=null,o=!0)}if(!s){for(const[a,l]of Object.entries(this.textRenderers))if(l.canRenderFont(t)){s=a;break}!s&&this.textRenderers.canvas!==void 0&&(s="canvas")}if(o&&console.warn("Falling back to text renderer ".concat(String(s))),!s)return null;const i=this.textRenderers[s];return k(i,"resolvedTextRenderer undefined"),this.fontResolveMap[r]=i,i}createShaderCtr(t,e){return this.shManager.loadShader(t,e)}createNode(t){const e=this.resolveNodeDefaults(t);return new Xr(this,e)}createTextNode(t){var o,i,a,l,d,f,h,p,v,y,x,A,w,m,b,g,T,_;const e=(o=t.fontSize)!=null?o:16,r={...this.resolveNodeDefaults(t),text:(i=t.text)!=null?i:"",textRendererOverride:(a=t.textRendererOverride)!=null?a:null,fontSize:e,fontFamily:(l=t.fontFamily)!=null?l:"sans-serif",fontStyle:(d=t.fontStyle)!=null?d:"normal",fontWeight:(f=t.fontWeight)!=null?f:"normal",fontStretch:(h=t.fontStretch)!=null?h:"normal",textAlign:(p=t.textAlign)!=null?p:"left",contain:(v=t.contain)!=null?v:"none",scrollable:(y=t.scrollable)!=null?y:!1,scrollY:(x=t.scrollY)!=null?x:0,offsetY:(A=t.offsetY)!=null?A:0,letterSpacing:(w=t.letterSpacing)!=null?w:0,lineHeight:t.lineHeight,maxLines:(m=t.maxLines)!=null?m:0,textBaseline:(b=t.textBaseline)!=null?b:"alphabetic",verticalAlign:(g=t.verticalAlign)!=null?g:"middle",overflowSuffix:(T=t.overflowSuffix)!=null?T:"...",debug:(_=t.debug)!=null?_:{},shaderProps:null},s=this.resolveTextRenderer(r,t.textRendererOverride);if(!s)throw new Error("No compatible text renderer found for ".concat(r.fontFamily));return new mi(this,r,s)}resolveNodeDefaults(t){var l,d,f,h,p,v,y,x,A,w,m,b,g,T,_,R,I,C,M,S,N,L,P,F,U,O,Y,Q,H,ce,Te,ae,Ve,Ee,ye,fe,Z,q,te,J,G,pe,ue,de,Pe,Xe,$e,dt,ht,Pn;const e=(l=t.color)!=null?l:4294967295,r=(h=(f=(d=t.colorTl)!=null?d:t.colorTop)!=null?f:t.colorLeft)!=null?h:e,s=(y=(v=(p=t.colorTr)!=null?p:t.colorTop)!=null?v:t.colorRight)!=null?y:e,o=(w=(A=(x=t.colorBl)!=null?x:t.colorBottom)!=null?A:t.colorLeft)!=null?w:e,i=(g=(b=(m=t.colorBr)!=null?m:t.colorBottom)!=null?b:t.colorRight)!=null?g:e,a=xi((T=t.data)!=null?T:{});return{x:(_=t.x)!=null?_:0,y:(R=t.y)!=null?R:0,width:(I=t.width)!=null?I:0,height:(C=t.height)!=null?C:0,alpha:(M=t.alpha)!=null?M:1,autosize:(S=t.autosize)!=null?S:!1,clipping:(N=t.clipping)!=null?N:!1,color:e,colorTop:(L=t.colorTop)!=null?L:e,colorBottom:(P=t.colorBottom)!=null?P:e,colorLeft:(F=t.colorLeft)!=null?F:e,colorRight:(U=t.colorRight)!=null?U:e,colorBl:o,colorBr:i,colorTl:r,colorTr:s,zIndex:(O=t.zIndex)!=null?O:0,zIndexLocked:(Y=t.zIndexLocked)!=null?Y:0,parent:(Q=t.parent)!=null?Q:null,texture:(H=t.texture)!=null?H:null,textureOptions:(ce=t.textureOptions)!=null?ce:{},shader:(Te=t.shader)!=null?Te:this.defShaderCtr,src:(ae=t.src)!=null?ae:null,srcHeight:t.srcHeight,srcWidth:t.srcWidth,srcX:t.srcX,srcY:t.srcY,scale:(Ve=t.scale)!=null?Ve:null,scaleX:(ye=(Ee=t.scaleX)!=null?Ee:t.scale)!=null?ye:1,scaleY:(Z=(fe=t.scaleY)!=null?fe:t.scale)!=null?Z:1,mount:(q=t.mount)!=null?q:0,mountX:(J=(te=t.mountX)!=null?te:t.mount)!=null?J:0,mountY:(pe=(G=t.mountY)!=null?G:t.mount)!=null?pe:0,pivot:(ue=t.pivot)!=null?ue:.5,pivotX:(Pe=(de=t.pivotX)!=null?de:t.pivot)!=null?Pe:.5,pivotY:($e=(Xe=t.pivotY)!=null?Xe:t.pivot)!=null?$e:.5,rotation:(dt=t.rotation)!=null?dt:0,rtt:(ht=t.rtt)!=null?ht:!1,data:a,preventCleanup:(Pn=t.preventCleanup)!=null?Pn:!1,imageType:t.imageType}}}class bi extends je{constructor(e,r){var x,A,w,m,b,g,T;super();c(this,"root");c(this,"canvas");c(this,"settings");c(this,"stage");c(this,"inspector",null);const s={criticalThreshold:((x=e.textureMemory)==null?void 0:x.criticalThreshold)||124e6,targetThresholdLevel:((A=e.textureMemory)==null?void 0:A.targetThresholdLevel)||.5,cleanupInterval:((w=e.textureMemory)==null?void 0:w.cleanupInterval)||3e4,debugLogging:((m=e.textureMemory)==null?void 0:m.debugLogging)||!1},o={appWidth:e.appWidth||1920,appHeight:e.appHeight||1080,textureMemory:s,boundsMargin:e.boundsMargin||0,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:(b=e.clearColor)!=null?b:0,fpsUpdateInterval:e.fpsUpdateInterval||0,numImageWorkers:e.numImageWorkers!==void 0?e.numImageWorkers:2,enableContextSpy:(g=e.enableContextSpy)!=null?g:!1,inspector:e.inspector,renderEngine:e.renderEngine,quadBufferSize:(T=e.quadBufferSize)!=null?T:4*1024*1024,fontEngines:e.fontEngines};this.settings=o;const{appWidth:i,appHeight:a,deviceLogicalPixelRatio:l,devicePhysicalPixelRatio:d,inspector:f}=o,h=i*l,p=a*l,v=document.createElement("canvas");this.canvas=v,v.width=h*d,v.height=p*d,v.style.width="".concat(h,"px"),v.style.height="".concat(p,"px"),this.stage=new vi({appWidth:this.settings.appWidth,appHeight:this.settings.appHeight,boundsMargin:this.settings.boundsMargin,clearColor:this.settings.clearColor,canvas:this.canvas,deviceLogicalPixelRatio:this.settings.deviceLogicalPixelRatio,devicePhysicalPixelRatio:this.settings.devicePhysicalPixelRatio,enableContextSpy:this.settings.enableContextSpy,fpsUpdateInterval:this.settings.fpsUpdateInterval,numImageWorkers:this.settings.numImageWorkers,renderEngine:this.settings.renderEngine,textureMemory:s,eventBus:this,quadBufferSize:this.settings.quadBufferSize,fontEngines:this.settings.fontEngines}),this.root=this.stage.root;let y;if(typeof r=="string"?y=document.getElementById(r):y=r,!y)throw new Error("Could not find target element");y.appendChild(v),f&&!gn()&&(this.inspector=new f(v,o))}createNode(e){k(this.stage,"Stage is not initialized");const r=this.stage.createNode(e);return this.inspector?this.inspector.createNode(r):r}createTextNode(e){const r=this.stage.createTextNode(e);return this.inspector?this.inspector.createTextNode(r):r}destroyNode(e){return this.inspector&&this.inspector.destroyNode(e.id),e.destroy()}createTexture(e,r){return this.stage.txManager.loadTexture(e,r)}createShader(e,r){return this.stage.shManager.loadShader(e,r)}createDynamicShader(e){return this.stage.shManager.loadDynamicShader({effects:e})}createEffect(e,r,s){return{name:s,type:e,props:r}}getNodeById(e){var o;const r=(o=this.stage)==null?void 0:o.root;if(!r)return null;const s=i=>{if(i.id===e)return i;for(const a of i.children){const l=s(a);if(l)return l}return null};return s(r)}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}getBufferInfo(){return this.stage.renderer.getBufferInfo()}rerender(){throw new Error("Not implemented")}}class As extends je{constructor(e){super();c(this,"fontFamily");c(this,"descriptors");c(this,"loaded",!1);c(this,"metrics",null);const{fontFamily:r,descriptors:s,metrics:o}=e;o&&(this.metrics={ascender:o.ascender/o.unitsPerEm,descender:o.descender/o.unitsPerEm,lineGap:o.lineGap/o.unitsPerEm}),this.fontFamily=r,this.descriptors={style:"normal",weight:"normal",stretch:"normal",...s}}static convertToCssFontFaceDescriptors(e){return{style:e.style,weight:typeof e.weight=="number"?"".concat(e.weight):e.weight,stretch:e.stretch,unicodeRange:e.unicodeRange,featureSettings:e.featureSettings,display:e.display}}}class Ai extends As{constructor(e){super(e);c(this,"fontFace");c(this,"fontUrl");const{fontFamily:r,fontUrl:s}=e,o=s.replace(/\(|\)/g,""),i=this.descriptors,a={style:i.style,weight:typeof i.weight=="number"?"".concat(i.weight):i.weight,stretch:i.stretch,unicodeRange:i.unicodeRange,featureSettings:i.featureSettings,display:i.display},l=new FontFace(r,"url(".concat(o,")"),a);o.length>0?l.load().then(()=>{this.loaded=!0,this.emit("loaded")}).catch(console.error):(this.loaded=!0,this.emit("loaded")),this.fontFace=l,this.fontUrl=s}}class Ti{}class Ts extends Ti{constructor(e,r,s,o,i,a,l,d,f,h,p,v,y){super();c(this,"glw");c(this,"options");c(this,"buffers");c(this,"shader");c(this,"shaderProps");c(this,"alpha");c(this,"clippingRect");c(this,"dimensions");c(this,"bufferIdx");c(this,"zIndex");c(this,"renderToTexture");c(this,"parentHasRenderTexture");c(this,"framebufferDimensions");c(this,"length",0);c(this,"numQuads",0);c(this,"textures",[]);c(this,"maxTextures");this.glw=e,this.options=r,this.buffers=s,this.shader=o,this.shaderProps=i,this.alpha=a,this.clippingRect=l,this.dimensions=d,this.bufferIdx=f,this.zIndex=h,this.renderToTexture=p,this.parentHasRenderTexture=v,this.framebufferDimensions=y,this.maxTextures=o.supportsIndexedTextures?e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS):1}addTexture(e){const{textures:r,maxTextures:s}=this,o=r.findIndex(a=>a===e);if(o!==-1)return o;const i=r.length;return i>=s?4294967295:(this.textures.push(e),i)}draw(){const{glw:e,shader:r,shaderProps:s,options:o}=this,{shManager:i}=o;i.useShader(r),r.bindRenderOp(this,s);const a=this.bufferIdx/24*6*2;if(this.clippingRect.valid){const{x:l,y:d,width:f,height:h}=this.clippingRect,p=o.pixelRatio,v=o.canvas.height,y=Math.round(l*p),x=Math.round(f*p),A=Math.round(h*p),w=Math.round(v-A-d*p);e.setScissorTest(!0),e.scissor(y,w,x,A)}else e.setScissorTest(!1);e.drawElements(e.TRIANGLES,6*this.numQuads,e.UNSIGNED_SHORT,a)}}function Si(n){const t={MAX_RENDERBUFFER_SIZE:0,MAX_TEXTURE_SIZE:0,MAX_VIEWPORT_DIMS:0,MAX_VERTEX_TEXTURE_IMAGE_UNITS:0,MAX_TEXTURE_IMAGE_UNITS:0,MAX_COMBINED_TEXTURE_IMAGE_UNITS:0,MAX_VERTEX_ATTRIBS:0,MAX_VARYING_VECTORS:0,MAX_VERTEX_UNIFORM_VECTORS:0,MAX_FRAGMENT_UNIFORM_VECTORS:0};return Object.keys(t).forEach(r=>{t[r]=n.getParameter(n[r])}),t}function wi(n){const t={ANGLE_instanced_arrays:null,WEBGL_compressed_texture_s3tc:null,WEBGL_compressed_texture_astc:null,WEBGL_compressed_texture_etc:null,WEBGL_compressed_texture_etc1:null,WEBGL_compressed_texture_pvrtc:null,WEBKIT_WEBGL_compressed_texture_pvrtc:null,WEBGL_compressed_texture_s3tc_srgb:null,OES_vertex_array_object:null};return Object.keys(t).forEach(r=>{t[r]=n.getExtension(r)}),t}function _i(n,t){const e=~~(t/80),r=new Uint16Array(e*6);for(let o=0,i=0;o<e;o+=6,i+=4)r[o]=i,r[o+1]=i+1,r[o+2]=i+2,r[o+3]=i+2,r[o+4]=i+1,r[o+5]=i+3;const s=n.createBuffer();n.elementArrayBufferData(s,r,n.STATIC_DRAW)}function Ei(n){return n!==null&&typeof n=="object"&&n.constructor&&n.constructor.name==="HTMLImageElement"}const Ir=new Uint8Array([0,0,0,0]);class or extends pi{constructor(e,r,s){super(r,s);c(this,"glw");c(this,"_nativeCtxTexture",null);c(this,"_state","freed");c(this,"_w",0);c(this,"_h",0);this.glw=e}get ctxTexture(){return this._state==="freed"&&this.load(),k(this._nativeCtxTexture),this._nativeCtxTexture}get w(){return this._w}get h(){return this._h}load(){this._state==="loading"||this._state==="loaded"||(this._state="loading",this.textureSource.setState("loading"),this._nativeCtxTexture=this.createNativeCtxTexture(),this.onLoadRequest().then(({width:e,height:r})=>{this._state!=="freed"&&(this._state="loaded",this._w=e,this._h=r,this.textureSource.setState("loaded",{width:e,height:r}))}).catch(e=>{this._state!=="freed"&&(this._state="failed",this.textureSource.setState("failed",e),console.error(e))}))}async onLoadRequest(){var i,a;const{glw:e}=this;e.texImage2D(0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null),this.setTextureMemUse(Ir.byteLength);const r=await((i=this.textureSource)==null?void 0:i.getTextureData());if(!this._nativeCtxTexture)return k(this._state==="freed"),{width:0,height:0};let s=0,o=0;if(k(this._nativeCtxTexture),e.activeTexture(0),r.data instanceof ImageBitmap||r.data instanceof ImageData||Ei(r.data)){const l=r.data;s=l.width,o=l.height,e.bindTexture(this._nativeCtxTexture),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!r.premultiplyAlpha),e.texImage2D(0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,l),this.setTextureMemUse(s*o*4),(e.isWebGl2()||Dn(s)&&Dn(o))&&e.generateMipmap()}else if(r.data===null)s=0,o=0,e.bindTexture(this._nativeCtxTexture),e.texImage2D(0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,Ir),this.setTextureMemUse(Ir.byteLength);else if("mipmaps"in r.data&&r.data.mipmaps){const{mipmaps:l,width:d=0,height:f=0,type:h,glInternalFormat:p}=r.data,v=h==="ktx"?new DataView((a=l[0])!=null?a:new ArrayBuffer(0)):l[0];e.bindTexture(this._nativeCtxTexture),e.compressedTexImage2D(0,p,d,f,0,v),e.texParameteri(e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_MIN_FILTER,e.LINEAR),this.setTextureMemUse(v.byteLength)}else console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",r);return{width:s,height:o}}free(){if(this._state==="freed"||(this._state="freed",this.textureSource.setState("freed"),this._w=0,this._h=0,!this._nativeCtxTexture))return;const{glw:e}=this;e.deleteTexture(this._nativeCtxTexture),this.setTextureMemUse(0),this._nativeCtxTexture=null}createNativeCtxTexture(){const{glw:e}=this,r=e.createTexture();if(!r)throw new Error("Could not create WebGL Texture");return e.activeTexture(0),e.bindTexture(r),e.texParameteri(e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),r}}class Ri extends or{constructor(t,e,r){super(t,e,r)}async onLoadRequest(){var e,r;const t=await this.textureSource.getTextureData();return{width:((e=t.data)==null?void 0:e.width)||0,height:((r=t.data)==null?void 0:r.height)||0}}}class Ss{constructor(t){c(this,"config");this.config=t}getBuffer(t){var e;return(e=this.config.find(r=>r.attributes[t]))==null?void 0:e.buffer}getAttributeInfo(t){var e;return(e=this.config.find(r=>r.attributes[t]))==null?void 0:e.attributes[t]}}function Ci(n){return self.WebGL2RenderingContext&&n instanceof self.WebGL2RenderingContext}class Ii{constructor(t){c(this,"gl");c(this,"activeTextureUnit",0);c(this,"texture2dUnits");c(this,"texture2dParams",new WeakMap);c(this,"scissorEnabled");c(this,"scissorX");c(this,"scissorY");c(this,"scissorWidth");c(this,"scissorHeight");c(this,"blendEnabled");c(this,"blendSrcRgb");c(this,"blendDstRgb");c(this,"blendSrcAlpha");c(this,"blendDstAlpha");c(this,"boundArrayBuffer");c(this,"boundElementArrayBuffer");c(this,"curProgram");c(this,"programUniforms",new WeakMap);c(this,"canvas");c(this,"MAX_RENDERBUFFER_SIZE");c(this,"MAX_TEXTURE_SIZE");c(this,"MAX_VIEWPORT_DIMS");c(this,"MAX_VERTEX_TEXTURE_IMAGE_UNITS");c(this,"MAX_TEXTURE_IMAGE_UNITS");c(this,"MAX_COMBINED_TEXTURE_IMAGE_UNITS");c(this,"MAX_VERTEX_ATTRIBS");c(this,"MAX_VARYING_VECTORS");c(this,"MAX_VERTEX_UNIFORM_VECTORS");c(this,"MAX_FRAGMENT_UNIFORM_VECTORS");c(this,"TEXTURE_MAG_FILTER");c(this,"TEXTURE_MIN_FILTER");c(this,"TEXTURE_WRAP_S");c(this,"TEXTURE_WRAP_T");c(this,"LINEAR");c(this,"CLAMP_TO_EDGE");c(this,"RGBA");c(this,"UNSIGNED_BYTE");c(this,"UNPACK_PREMULTIPLY_ALPHA_WEBGL");c(this,"UNPACK_FLIP_Y_WEBGL");c(this,"FLOAT");c(this,"TRIANGLES");c(this,"UNSIGNED_SHORT");c(this,"ONE");c(this,"ONE_MINUS_SRC_ALPHA");c(this,"VERTEX_SHADER");c(this,"FRAGMENT_SHADER");c(this,"STATIC_DRAW");c(this,"COMPILE_STATUS");c(this,"LINK_STATUS");c(this,"DYNAMIC_DRAW");c(this,"COLOR_ATTACHMENT0");this.gl=t,this.activeTextureUnit=t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0;const e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.texture2dUnits=new Array(e).fill(void 0).map((s,o)=>(this.activeTexture(o),t.getParameter(t.TEXTURE_BINDING_2D))),this.activeTexture(this.activeTextureUnit),this.scissorEnabled=t.isEnabled(t.SCISSOR_TEST);const r=t.getParameter(t.SCISSOR_BOX);this.scissorX=r[0],this.scissorY=r[1],this.scissorWidth=r[2],this.scissorHeight=r[3],this.blendEnabled=t.isEnabled(t.BLEND),this.blendSrcRgb=t.getParameter(t.BLEND_SRC_RGB),this.blendDstRgb=t.getParameter(t.BLEND_DST_RGB),this.blendSrcAlpha=t.getParameter(t.BLEND_SRC_ALPHA),this.blendDstAlpha=t.getParameter(t.BLEND_DST_ALPHA),this.boundArrayBuffer=t.getParameter(t.ARRAY_BUFFER_BINDING),this.boundElementArrayBuffer=t.getParameter(t.ELEMENT_ARRAY_BUFFER_BINDING),this.curProgram=t.getParameter(t.CURRENT_PROGRAM),this.canvas=t.canvas,this.MAX_RENDERBUFFER_SIZE=t.MAX_RENDERBUFFER_SIZE,this.MAX_TEXTURE_SIZE=t.MAX_TEXTURE_SIZE,this.MAX_VIEWPORT_DIMS=t.MAX_VIEWPORT_DIMS,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=t.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.MAX_TEXTURE_IMAGE_UNITS=t.MAX_TEXTURE_IMAGE_UNITS,this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS,this.MAX_VERTEX_ATTRIBS=t.MAX_VERTEX_ATTRIBS,this.MAX_VARYING_VECTORS=t.MAX_VARYING_VECTORS,this.MAX_VERTEX_UNIFORM_VECTORS=t.MAX_VERTEX_UNIFORM_VECTORS,this.MAX_FRAGMENT_UNIFORM_VECTORS=t.MAX_FRAGMENT_UNIFORM_VECTORS,this.TEXTURE_MAG_FILTER=t.TEXTURE_MAG_FILTER,this.TEXTURE_MIN_FILTER=t.TEXTURE_MIN_FILTER,this.TEXTURE_WRAP_S=t.TEXTURE_WRAP_S,this.TEXTURE_WRAP_T=t.TEXTURE_WRAP_T,this.LINEAR=t.LINEAR,this.CLAMP_TO_EDGE=t.CLAMP_TO_EDGE,this.RGBA=t.RGBA,this.UNSIGNED_BYTE=t.UNSIGNED_BYTE,this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.UNPACK_FLIP_Y_WEBGL=t.UNPACK_FLIP_Y_WEBGL,this.FLOAT=t.FLOAT,this.TRIANGLES=t.TRIANGLES,this.UNSIGNED_SHORT=t.UNSIGNED_SHORT,this.ONE=t.ONE,this.ONE_MINUS_SRC_ALPHA=t.ONE_MINUS_SRC_ALPHA,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=t.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.TRIANGLES=t.TRIANGLES,this.UNSIGNED_SHORT=t.UNSIGNED_SHORT,this.VERTEX_SHADER=t.VERTEX_SHADER,this.FRAGMENT_SHADER=t.FRAGMENT_SHADER,this.STATIC_DRAW=t.STATIC_DRAW,this.COMPILE_STATUS=t.COMPILE_STATUS,this.LINK_STATUS=t.LINK_STATUS,this.DYNAMIC_DRAW=t.DYNAMIC_DRAW,this.COLOR_ATTACHMENT0=t.COLOR_ATTACHMENT0}isWebGl2(){return Ci(this.gl)}activeTexture(t){const{gl:e}=this;this.activeTextureUnit!==t&&(e.activeTexture(t+e.TEXTURE0),this.activeTextureUnit=t)}bindTexture(t){const{gl:e,activeTextureUnit:r,texture2dUnits:s}=this;s[r]!==t&&(s[r]=t,e.bindTexture(this.gl.TEXTURE_2D,t))}_getActiveTexture(){const{activeTextureUnit:t,texture2dUnits:e}=this;return e[t]}texParameteri(t,e){const{gl:r,texture2dParams:s}=this,o=this._getActiveTexture();if(!o)throw new Error("No active texture");let i=s.get(o);i||(i={},s.set(o,i)),i[t]!==e&&(i[t]=e,r.texParameteri(r.TEXTURE_2D,t,e))}texImage2D(t,e,r,s,o,i,a,l){const{gl:d}=this;i?d.texImage2D(d.TEXTURE_2D,t,e,r,s,o,i,a,l):d.texImage2D(d.TEXTURE_2D,t,e,r,s,o)}compressedTexImage2D(t,e,r,s,o,i){const{gl:a}=this;a.compressedTexImage2D(a.TEXTURE_2D,t,e,r,s,o,i)}pixelStorei(t,e){const{gl:r}=this;r.pixelStorei(t,e)}generateMipmap(){const{gl:t}=this;t.generateMipmap(t.TEXTURE_2D)}createTexture(){const{gl:t}=this;return t.createTexture()}deleteTexture(t){const{gl:e}=this;t&&this.texture2dParams.delete(t),e.deleteTexture(t)}viewport(t,e,r,s){const{gl:o}=this;o.viewport(t,e,r,s)}clearColor(t,e,r,s){const{gl:o}=this;o.clearColor(t,e,r,s)}setScissorTest(t){const{gl:e,scissorEnabled:r}=this;t!==r&&(t?e.enable(e.SCISSOR_TEST):e.disable(e.SCISSOR_TEST),this.scissorEnabled=t)}scissor(t,e,r,s){const{gl:o,scissorX:i,scissorY:a,scissorWidth:l,scissorHeight:d}=this;(t!==i||e!==a||r!==l||s!==d)&&(o.scissor(t,e,r,s),this.scissorX=t,this.scissorY=e,this.scissorWidth=r,this.scissorHeight=s)}setBlend(t){const{gl:e,blendEnabled:r}=this;t!==r&&(t?e.enable(e.BLEND):e.disable(e.BLEND),this.blendEnabled=t)}blendFunc(t,e){const{gl:r,blendSrcRgb:s,blendDstRgb:o,blendSrcAlpha:i,blendDstAlpha:a}=this;(t!==s||e!==o||t!==i||e!==a)&&(r.blendFunc(t,e),this.blendSrcRgb=t,this.blendDstRgb=e,this.blendSrcAlpha=t,this.blendDstAlpha=e)}createBuffer(){const{gl:t}=this;return t.createBuffer()}createFramebuffer(){const{gl:t}=this;return t.createFramebuffer()}bindFramebuffer(t){const{gl:e}=this;e.bindFramebuffer(e.FRAMEBUFFER,t)}framebufferTexture2D(t,e,r){const{gl:s}=this;s.framebufferTexture2D(s.FRAMEBUFFER,t,s.TEXTURE_2D,e,r)}clear(){const{gl:t}=this;t.clear(t.COLOR_BUFFER_BIT)}arrayBufferData(t,e,r){const{gl:s,boundArrayBuffer:o}=this;o!==t&&(s.bindBuffer(s.ARRAY_BUFFER,t),this.boundArrayBuffer=t),s.bufferData(s.ARRAY_BUFFER,e,r)}elementArrayBufferData(t,e,r){const{gl:s,boundElementArrayBuffer:o}=this;o!==t&&(s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,t),this.boundElementArrayBuffer=t),s.bufferData(s.ELEMENT_ARRAY_BUFFER,e,r)}vertexAttribPointer(t,e,r,s,o,i,a){const{gl:l,boundArrayBuffer:d}=this;d!==t&&(l.bindBuffer(l.ARRAY_BUFFER,t),this.boundArrayBuffer=t),l.vertexAttribPointer(e,r,s,o,i,a)}useProgram(t){const{gl:e,curProgram:r}=this;r!==t&&(e.useProgram(t),this.curProgram=t)}setUniform(t,e,...r){const{gl:s,programUniforms:o}=this;let i=o.get(this.curProgram);i||(i=new Map,o.set(this.curProgram,i));const a=i.get(e);(!a||!Bi(a,r))&&(i.set(e,r),s[t](e,...r))}getParameter(t){const{gl:e}=this;return e.getParameter(t)}drawElements(t,e,r,s){const{gl:o}=this;o.drawElements(t,e,r,s)}getExtension(t){const{gl:e}=this;return e.getExtension(t)}createVertexArray(){const{gl:t}=this;return k(t instanceof WebGL2RenderingContext),t.createVertexArray()}bindVertexArray(t){const{gl:e}=this;k(e instanceof WebGL2RenderingContext),e.bindVertexArray(t)}getAttribLocation(t,e){const{gl:r}=this;return r.getAttribLocation(t,e)}getUniformLocation(t,e){const{gl:r}=this;return r.getUniformLocation(t,e)}enableVertexAttribArray(t){const{gl:e}=this;e.enableVertexAttribArray(t)}disableVertexAttribArray(t){const{gl:e}=this;e.disableVertexAttribArray(t)}createShader(t){const{gl:e}=this;return e.createShader(t)}compileShader(t){const{gl:e}=this;e.compileShader(t)}attachShader(t,e){const{gl:r}=this;r.attachShader(t,e)}linkProgram(t){const{gl:e}=this;e.linkProgram(t)}deleteProgram(t){const{gl:e}=this;e.deleteProgram(t)}getShaderParameter(t,e){const{gl:r}=this;return r.getShaderParameter(t,e)}getShaderInfoLog(t){const{gl:e}=this;return e.getShaderInfoLog(t)}createProgram(){const{gl:t}=this;return t.createProgram()}getProgramParameter(t,e){const{gl:r}=this;return r.getProgramParameter(t,e)}getProgramInfoLog(t){const{gl:e}=this;return e.getProgramInfoLog(t)}shaderSource(t,e){const{gl:r}=this;r.shaderSource(t,e)}deleteShader(t){const{gl:e}=this;e.deleteShader(t)}}function Bi(n,t){return n.length!==t.length?!1:n.every((e,r)=>Array.isArray(e)||e instanceof Float32Array?!1:e===t[r])}class Vn extends or{constructor(e,r,s){super(e,r,s);c(this,"framebuffer");const o=e.createFramebuffer();k(o,"Unable to create framebuffer"),this.framebuffer=o}async onLoadRequest(){const{glw:e}=this,r=this._nativeCtxTexture=this.createNativeCtxTexture(),{width:s,height:o}=this.textureSource;return e.texImage2D(0,e.RGBA,s,o,0,e.RGBA,e.UNSIGNED_BYTE,null),this.setTextureMemUse(s*o*4),e.bindFramebuffer(this.framebuffer),e.framebufferTexture2D(e.COLOR_ATTACHMENT0,r,0),e.bindFramebuffer(null),{width:s,height:o}}}const Mi=24;class xn extends gi{constructor(e){super(e);c(this,"glw");c(this,"system");c(this,"quadBuffer");c(this,"fQuadBuffer");c(this,"uiQuadBuffer");c(this,"renderOps",[]);c(this,"curBufferIdx",0);c(this,"curRenderOp",null);c(this,"rttNodes",[]);c(this,"activeRttNode",null);c(this,"defShaderCtrl");c(this,"defaultShader");c(this,"quadBufferCollection");c(this,"defaultTexture");c(this,"quadBufferUsage",0);c(this,"renderToTextureActive",!1);this.quadBuffer=new ArrayBuffer(this.stage.options.quadBufferSize),this.fQuadBuffer=new Float32Array(this.quadBuffer),this.uiQuadBuffer=new Uint32Array(this.quadBuffer),this.mode="webgl";const{canvas:r,clearColor:s,bufferMemory:o}=e;this.defaultTexture=new nr(this.txManager),this.defaultTexture.setRenderableOwner(this,!0),this.defaultTexture.once("loaded",()=>{this.stage.requestRender()});const i=Ro(r,e.contextSpy),a=this.glw=new Ii(i),l=vr(s);a.viewport(0,0,r.width,r.height),a.clearColor(l[0],l[1],l[2],l[3]),a.setBlend(!0),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA),_i(a,o),this.system={parameters:Si(this.glw),extensions:wi(this.glw)},this.shManager.renderer=this,this.defShaderCtrl=this.shManager.loadShader("DefaultShader"),this.defaultShader=this.defShaderCtrl.shader;const d=a.createBuffer();k(d);const f=6*Float32Array.BYTES_PER_ELEMENT;this.quadBufferCollection=new Ss([{buffer:d,attributes:{a_position:{name:"a_position",size:2,type:a.FLOAT,normalized:!1,stride:f,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:a.FLOAT,normalized:!1,stride:f,offset:2*Float32Array.BYTES_PER_ELEMENT},a_color:{name:"a_color",size:4,type:a.UNSIGNED_BYTE,normalized:!0,stride:f,offset:4*Float32Array.BYTES_PER_ELEMENT},a_textureIndex:{name:"a_textureIndex",size:1,type:a.FLOAT,normalized:!1,stride:f,offset:5*Float32Array.BYTES_PER_ELEMENT}}}])}reset(){const{glw:e}=this;this.curBufferIdx=0,this.curRenderOp=null,this.renderOps.length=0,e.setScissorTest(!1),e.clear()}getShaderManager(){return this.shManager}createCtxTexture(e){return e instanceof Rt?new Ri(this.glw,this.txMemManager,e):e instanceof Ct?new Vn(this.glw,this.txMemManager,e):new or(this.glw,this.txMemManager,e)}addQuad(e){var Ve,Ee,ye,fe,Z;const{fQuadBuffer:r,uiQuadBuffer:s}=this,{width:o,height:i,colorTl:a,colorTr:l,colorBl:d,colorBr:f,textureOptions:h,shader:p,shaderProps:v,alpha:y,clippingRect:x,tx:A,ty:w,ta:m,tb:b,tc:g,td:T,renderCoords:_,rtt:R,parentHasRenderTexture:I,framebufferDimensions:C}=e;let{texture:M}=e;if(v&&Vr(v,"$dimensions")){const q=v.$dimensions;q.width=o,q.height=i}M=M!=null?M:this.defaultTexture,k(M instanceof ct,"Invalid texture type");let{curBufferIdx:S,curRenderOp:N}=this;const L={width:o,height:i},P=p||this.defaultShader;k(P instanceof ze),this.reuseRenderOp(e)||(this.newRenderOp(P,v,y,L,x,S,R,I,C),N=this.curRenderOp,k(N));const F=(Ve=h==null?void 0:h.flipX)!=null?Ve:!1;let U=(Ee=h==null?void 0:h.flipY)!=null?Ee:!1;M instanceof Ct&&(U=!U);let O=0,Y=0,Q=1,H=1;if(M instanceof Rt){const{x:q,y:te,width:J,height:G}=M.props,{width:pe=0,height:ue=0}=M.parentTexture.dimensions||{width:0,height:0};O=q/pe,Q=O+J/pe,Y=te/ue,H=Y+G/ue,M=M.parentTexture}const ce=(ye=h==null?void 0:h.resizeMode)!=null?ye:!1;if(M instanceof sr&&ce&&M.dimensions){const{width:q,height:te}=M.dimensions;if(ce.type==="cover"){const J=o/q,G=i/te,pe=Math.max(J,G),ue=1/pe;if(pe&&J&&J<pe){const de=ue*o;O=(1-de/q)*((fe=ce.clipX)!=null?fe:.5),Q=O+de/q}if(pe&&G&&G<pe){const de=ue*i;Y=(1-de/te)*((Z=ce.clipY)!=null?Z:.5),H=Y+de/te}}}F&&([O,Q]=[Q,O]),U&&([Y,H]=[H,Y]);const Te=M.ctxTexture;k(Te instanceof or);const ae=this.addTexture(Te,S);if(N=this.curRenderOp,k(N),_){const{x1:q,y1:te,x2:J,y2:G,x3:pe,y3:ue,x4:de,y4:Pe}=_;r[S++]=q,r[S++]=te,r[S++]=O,r[S++]=Y,s[S++]=a,r[S++]=ae,r[S++]=J,r[S++]=G,r[S++]=Q,r[S++]=Y,s[S++]=l,r[S++]=ae,r[S++]=de,r[S++]=Pe,r[S++]=O,r[S++]=H,s[S++]=d,r[S++]=ae,r[S++]=pe,r[S++]=ue,r[S++]=Q,r[S++]=H,s[S++]=f,r[S++]=ae}else if(b!==0||g!==0)r[S++]=A,r[S++]=w,r[S++]=O,r[S++]=Y,s[S++]=a,r[S++]=ae,r[S++]=A+o*m,r[S++]=w+o*g,r[S++]=Q,r[S++]=Y,s[S++]=l,r[S++]=ae,r[S++]=A+i*b,r[S++]=w+i*T,r[S++]=O,r[S++]=H,s[S++]=d,r[S++]=ae,r[S++]=A+o*m+i*b,r[S++]=w+o*g+i*T,r[S++]=Q,r[S++]=H,s[S++]=f,r[S++]=ae;else{const q=A+o*m,te=w+i*T;r[S++]=A,r[S++]=w,r[S++]=O,r[S++]=Y,s[S++]=a,r[S++]=ae,r[S++]=q,r[S++]=w,r[S++]=Q,r[S++]=Y,s[S++]=l,r[S++]=ae,r[S++]=A,r[S++]=te,r[S++]=O,r[S++]=H,s[S++]=d,r[S++]=ae,r[S++]=q,r[S++]=te,r[S++]=Q,r[S++]=H,s[S++]=f,r[S++]=ae}N.length+=Mi,N.numQuads++,this.curBufferIdx=S}newRenderOp(e,r,s,o,i,a,l,d,f){const h=new Ts(this.glw,this.options,this.quadBufferCollection,e,r,s,i,o,a,0,l,d,f);this.curRenderOp=h,this.renderOps.push(h)}addTexture(e,r,s){const{curRenderOp:o}=this;k(o);const i=o.addTexture(e);if(i===4294967295){if(s)throw new Error("Unable to add texture to render op");const{shader:a,shaderProps:l,dimensions:d,clippingRect:f,alpha:h}=o;return this.newRenderOp(a,l,h,d,f,r),this.addTexture(e,r,!0)}return i}reuseRenderOp(e){var d;const{shader:r,shaderProps:s,parentHasRenderTexture:o,rtt:i,clippingRect:a}=e,l=r||this.defaultShader;return!(((d=this.curRenderOp)==null?void 0:d.shader)!==l||!Lo(this.curRenderOp.clippingRect,a)||o||i||this.curRenderOp.shader!==this.defaultShader&&(!s||!this.curRenderOp.shader.canBatchShaderProps(this.curRenderOp.shaderProps,s)))}addRenderOp(e){this.renderOps.push(e),this.curRenderOp=null}render(e="screen"){var a;const{glw:r,quadBuffer:s}=this,o=new Float32Array(s,0,this.curBufferIdx),i=(a=this.quadBufferCollection.getBuffer("a_position"))!=null?a:null;r.arrayBufferData(i,o,r.STATIC_DRAW),this.renderOps.forEach((l,d)=>{l.draw()}),this.quadBufferUsage=this.curBufferIdx*o.BYTES_PER_ELEMENT}renderToTexture(e){for(let r=0;r<this.rttNodes.length;r++)if(this.rttNodes[r]===e)return;this.rttNodes.unshift(e)}renderRTTNodes(){const{glw:e}=this;this.stage;for(let r=0;r<this.rttNodes.length;r++){const s=this.rttNodes[r];if(!s||!s.hasRTTupdates)continue;this.activeRttNode=s,k(s.texture,"RTT node missing texture");const o=s.texture.ctxTexture;k(o instanceof Vn),this.renderToTextureActive=!0,e.bindFramebuffer(o.framebuffer),e.viewport(0,0,o.w,o.h),e.clear();for(let i=0;i<s.children.length;i++){const a=s.children[i];a&&(a.update(this.stage.deltaTime,{x:0,y:0,width:0,height:0,valid:!1}),this.stage.addQuads(a),a.hasRTTupdates=!1)}this.render(),this.renderOps.length=0,s.hasRTTupdates=!1}e.bindFramebuffer(null),e.viewport(0,0,this.glw.canvas.width,this.glw.canvas.height),this.renderToTextureActive=!1}removeRTTNode(e){const r=this.rttNodes.indexOf(e);r!==-1&&this.rttNodes.splice(r,1)}getBufferInfo(){return{totalAvailable:this.stage.options.quadBufferSize,totalUsed:this.quadBufferUsage}}getDefShaderCtr(){return this.defShaderCtrl}}const ki={LINE_FEED:10,CARRIAGE_RETURN:13,SPACE:32,TAB:9,ZERO_WIDTH_SPACE:8203,ZERO_WIDTH_NON_JOINER:8204,ZERO_WIDTH_JOINER:8205,LEFT_TO_RIGHT_MARK:8206,RIGHT_TO_LEFT_MARK:8207,LEFT_TO_RIGHT_EMBEDDING:8234,RIGHT_TO_LEFT_EMBEDDING:8235,POP_DIRECTIONAL_FORMATTING:8236,LEFT_TO_RIGHT_OVERRIDE:8237,RIGHT_TO_LEFT_OVERRIDE:8238,LINE_SEPARATOR:8232,PARAGRAPH_SEPARATOR:8233,OBJECT_REPLACEMENT_CHARACTER:65532,REPLACEMENT_CHARACTER:65533,ZERO_WIDTH_NO_BREAK_SPACE:65279,LEFT_TO_RIGHT_ISOLATE:8294,RIGHT_TO_LEFT_ISOLATE:8295,FIRST_STRONG_ISOLATE:8296,POP_DIRECTIONAL_ISOLATE:8297,INHIBIT_SYMMETRIC_SWAPPING:8298,ACTIVATE_SYMMETRIC_SWAPPING:8299,INHIBIT_ARABIC_FORM_SHAPING:8300,ACTIVATE_ARABIC_FORM_SHAPING:8301,NATIONAL_DIGIT_SHAPES:8302,NOMINAL_DIGIT_SHAPES:8303,LEFT_TO_RIGHT_BOUNDARY:8206,RIGHT_TO_LEFT_BOUNDARY:8207};class Pi{}class Li extends Pi{constructor(e,r){super();c(this,"data");c(this,"glyphMap");c(this,"kernings");this.data=e,this.glyphMap=r;const s=this.kernings={};e.kernings.forEach(o=>{const i=o.second,a=s[i]=s[i]||{};a[o.first]=o.amount}),this.kernings=s}*shapeText(e,r){var i;let s,o;for(;(s=r.peek())&&!s.done;){const a=s.value,l=this.glyphMap.get(a);if(r.next(),l!==void 0){const d=o!==void 0?(((i=this.kernings[l.id])==null?void 0:i[o])||0)+e.letterSpacing:0;o=l.id,yield{mapped:!0,glyphId:l.id,codepoint:a,cluster:r.lastIndex,xAdvance:l.xadvance+d,yAdvance:0,xOffset:l.xoffset+d,yOffset:l.yoffset,xBearing:0,yBearing:0,width:l.width,height:l.height}}else a===ki.LINE_FEED&&(o=void 0),yield{mapped:!1,codepoint:a,cluster:r.lastIndex}}}}class qr extends As{constructor(e,r){super(r);c(this,"type");c(this,"texture");c(this,"maxCharHeight",0);c(this,"data");c(this,"shaper");c(this,"glyphMap",new Map);const{atlasUrl:s,atlasDataUrl:o,stage:i}=r;this.type=e;const a=i.renderer;k(a instanceof xn,"SDF Font Faces can only be used with the WebGL Renderer"),this.texture=i.txManager.loadTexture("ImageTexture",{src:s,premultiplyAlpha:!1}),this.texture.on("loaded",()=>{this.checkLoaded(),i.requestRender()}),this.texture.ctxTexture.load(),fetch(o).then(async l=>{var f;this.data=await l.json(),k(this.data);let d=0;if(this.data.chars.forEach(h=>{this.glyphMap.set(h.id,h);const p=h.yoffset+h.height;p>d&&(d=p)}),this.maxCharHeight=d,this.shaper=new Li(this.data,this.glyphMap),!this.metrics)if((f=this.data)!=null&&f.lightningMetrics){const{ascender:h,descender:p,lineGap:v,unitsPerEm:y}=this.data.lightningMetrics;this.metrics={ascender:h/y,descender:p/y,lineGap:v/y}}else throw new Error("Font metrics not found in ".concat(this.type," font ").concat(this.fontFamily,". ")+"Make sure you are using the latest version of the Lightning 3 `msdf-generator` tool to generate your SDF fonts.");this.checkLoaded()}).catch(console.error)}getAtlasEntry(e){const r=this.glyphMap.get(e);if(r===void 0)throw new Error("Glyph ".concat(e," not found in font ").concat(this.fontFamily));return{x:r.x,y:r.y,width:r.width,height:r.height}}checkLoaded(){this.loaded||this.texture.state==="loaded"&&this.data&&(this.loaded=!0,this.emit("loaded"))}}let Ie,yn;function Fi(n,t="app"){return Ie=new bi(n,t),yn=Ie.createShader.bind(Ie),Ie}function Ni(n){const t=Ie.stage;for(const e of n)"type"in e?t.fontManager.addFontFace(new qr(e.type,{...e,stage:t})):t.fontManager.addFontFace(new Ai(e))}const Di={BASE_URL:"/solid-demo-app/",DEV:!1,LEGACY:!1,MODE:"production",PROD:!0,SSR:!1};function Ui(){return!!(Di&&!1)}const Oi=Ui()||!1,ee={debug:!1,focusDebug:!1,animationsEnabled:!0,animationSettings:{duration:250,easing:"ease-in-out"},fontSettings:{fontFamily:"Ubuntu",fontSize:100},setActiveElement:()=>{}};function Xn(n){return zi(n)&&n.debug}function Qe(n,t,...e){Oi&&(ee.debug||Xn(t)||Xn(e[0]))&&console.log(n,t,...e)}const Je=n=>n instanceof Function;function zi(n){return typeof n=="object"}function It(n){return Array.isArray(n)}function $n(n){return typeof n=="string"}function Wi(n){return typeof n=="number"}function Hi(n){return Number.isInteger(n)}function Vi(n){return"destroy"in n&&typeof n.destroy=="function"}function Vt(n){return n instanceof Be}function Xi(n,t){for(const e of t)if(e in n)return!0;return!1}function ws(n,t={}){if(It(n))n.forEach(e=>{ws(e,t)});else if(n)for(const e in n)t[e]===void 0&&(t[e]=n[e]);return t}class Gn extends Array{constructor(e,r={}){var t=(...th)=>(super(...th),c(this,"onChange"),this);return It(r)?t(...r):$n(r)?t(r):t(...Object.entries(r).filter(([s,o])=>o).map(([s])=>s)),this.onChange=e,this}has(e){return this.indexOf(e)>=0}is(e){return this.indexOf(e)>=0}add(e){this.has(e)||(this.push(e),this.onChange())}toggle(e,r){r===!0?this.add(e):r===!1?this.remove(e):this.has(e)?this.remove(e):this.add(e)}merge(e){if(It(e))this.length=0,this.push(...e);else if($n(e))this.length=0,this.push(e);else for(const r in e)this.toggle(r,e[r]);return this}remove(e){const r=this.indexOf(e);r>=0&&(this.splice(r,1),this.onChange())}}const Ge={Element:"element",TextNode:"textNode",Text:"text"};function $i(n){const t=[];let e=!1,r=0;for(let g=0;g<n.children.length;g++){const T=n.children[g];T._type===Ge.Text||T.flexItem===!1||(T.flexOrder!==void 0&&(e=!0),T.flexGrow!==void 0&&(r+=T.flexGrow),t.push(T))}e&&t.sort((g,T)=>(g.flexOrder||0)-(T.flexOrder||0));const s=t.length,i=(n.flexDirection||"row")==="row",a=i?"width":"height",l=i?"height":"width",d=i?"marginLeft":"marginTop",f=i?"marginRight":"marginBottom",h=i?"x":"y",p=i?"y":"x",v=n[a]||0,y=n[l]||0,x=n.gap||0,A=n.justifyContent||"flexStart",w=n.alignItems;if(r){const g=t.reduce((_,R)=>_+(R.flexGrow?0:R[a]||0)+(R[d]||0)+(R[f]||0),0),T=(v-g-x*(s-1))/r;for(let _=0;_<t.length;_++){const R=t[_];R.flexGrow!==void 0&&R.flexGrow>0&&(R[a]=R.flexGrow*T)}}let m=0;["center","spaceBetween","spaceEvenly"].includes(A)&&(m=t.reduce((g,T)=>g+(T[a]||0)+(T[d]||0)+(T[f]||0),0));const b=y&&w?g=>{w==="flexStart"?g[p]=0:w==="center"?g[p]=(y-(g[l]||0))/2:w==="flexEnd"&&(g[p]=y-(g[l]||0))}:g=>g;if(A==="flexStart"){let g=0;for(let T=0;T<t.length;T++){const _=t[T];_[h]=g+(_[d]||0),g+=(_[a]||0)+x+(_[d]||0)+(_[f]||0),b(_)}if(n.flexBoundary!=="fixed"){const T=g-x;if(T!==n[a])return n[a]=T,!0}}else if(A==="flexEnd"){let g=v;for(let T=s-1;T>=0;T--){const _=t[T];_[h]=g-(_[a]||0)-(_[f]||0),g-=(_[a]||0)+x+(_[d]||0)+(_[f]||0),b(_)}if(n.flexBoundary!=="fixed"){const T=g-x;if(T!==n[a])return n[a]=T,!0}}else if(A==="center"){let g=(v-(m+x*(s-1)))/2;for(let T=0;T<t.length;T++){const _=t[T];_[h]=g+(_[d]||0),g+=(_[a]||0)+x+(_[d]||0)+(_[f]||0),b(_)}}else if(A==="spaceBetween"){const g=(v-m)/(s-1);let T=0;for(let _=0;_<t.length;_++){const R=t[_];R[h]=T+(R[d]||0),T+=(R[a]||0)+g+(R[d]||0)+(R[f]||0),b(R)}}else if(A==="spaceEvenly"){const g=(v-m)/(s+1);let T=g;for(let _=0;_<t.length;_++){const R=t[_];R[h]=T+(R[d]||0),T+=(R[a]||0)+g+(R[d]||0)+(R[f]||0),b(R)}}return!1}const Zr={ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"Enter",l:"Last"," ":"Space",Backspace:"Back",Escape:"Escape"},_s={},Yn=(n,t)=>{for(const[e,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{t[s]=e}):r===null?delete t[e]:t[r]=e};let Kn=!0;const Gi=(n,t)=>{if(Kn){const e=document.createElement("style");e.type="text/css",e.innerHTML='\n      [data-focus="3"] {\n        border: 2px solid rgba(255, 33, 33, 0.2);\n        border-radius: 5px;\n        transition: border-color 0.3s ease;\n      }\n\n      [data-focus="2"] {\n        border: 2px solid rgba(255, 33, 33, 0.4);\n        border-radius: 5px;\n        transition: border-color 0.3s ease;\n      }\n\n      [data-focus="1"] {\n        border: 4px solid rgba(255, 33, 33, 0.9);\n        border-radius: 5px;\n        transition: border-color 0.5s ease;\n      }\n    ',document.head.appendChild(e),Kn=!1}n.forEach(e=>{e.data={...e.data,focus:void 0}}),t.forEach((e,r)=>{e.data={...e.data,focus:r+1}})};let Qn;const Yi=n=>{Ki(n,Qn),Qn=n,ee.setActiveElement(n)};let bt=[];const Ki=(n,t)=>{var s,o;let e=n;const r=[];for(;e;)(!e.states.has("focus")||e===n)&&(e.states.add("focus"),(s=e.onFocus)==null||s.call(e,n,t),(o=e.onFocusChanged)==null||o.call(e,!0,n,t)),r.push(e),e=e.parent;return bt.forEach(i=>{var a,l;r.includes(i)||(i.states.remove("focus"),(a=i.onBlur)==null||a.call(i,n,t),(l=i.onFocusChanged)==null||l.call(i,!1,n,t))}),ee.focusDebug&&Gi(bt,r),bt=r,r},Jr=(n,t,e)=>{let r;for(const s of bt){if(r=r||s,t){const i=s["on".concat(t)];if((i==null?void 0:i.call(s,n,s,r))===!0)break}else console.log("Unhandled key event: ".concat(n.key||n.keyCode));const o=e?s.onKeyHold:s.onKeyPress;if((o==null?void 0:o.call(s,n,t,s,r))===!0)break}return!1},Qi=200,De={},ji=(n,t)=>{delete De[n.key||n.keyCode],Jr(n,t,!0)},qi=(n,t,e)=>{if(t){const r=t.key||t.keyCode,s=_s[r],o=Zr[r];s?(De[r]&&clearTimeout(De[r]),De[r]=window.setTimeout(()=>ji(t,s),n)):Jr(t,o,!1)}if(e){const r=e.key||e.keyCode,s=Zr[r];De[r]&&(clearTimeout(De[r]),delete De[r],Jr(e,s,!1))}},Zi=({userKeyMap:n,keyHoldOptions:t,ownerContext:e=r=>{r()}}={})=>{n&&Yn(n,Zr),t!=null&&t.userKeyHoldMap&&Yn(t.userKeyHoldMap,_s);const r=(t==null?void 0:t.holdThreshold)||Qi,s=qi.bind(null,r),o=a=>e(()=>{s(a,void 0)}),i=a=>e(()=>{s(void 0,a)});return document.addEventListener("keyup",i),document.addEventListener("keydown",o),{cleanup:()=>{document.removeEventListener("keydown",o),document.removeEventListener("keyup",i);for(const[a,l]of Object.entries(De))l&&clearTimeout(l)},focusPath:()=>bt}},ir=new Set;let en=0,Br=!1;function jn(){Br||(Br=!0,setTimeout(()=>{const n=[...ir];ir.clear();for(let t=n.length-1;t>=0;t--)n[t].updateLayout();Br=!1,en=0},0))}function qn(n){const t=[];let e=0;for(const[r,s]of Object.entries(n))t.push({name:"effect".concat(e),type:r,props:s}),e++;return yn("DynamicShader",{effects:t})}function ft(n=""){return{set(t){Wi(t)&&(t={width:t,color:255}),this.effects=this.effects?{...this.effects||{},["border".concat(n)]:t}:{["border".concat(n)]:t}},get(){var t;return(t=this.effects)==null?void 0:t["border".concat(n)]}}}const Ji=["alpha","color","colorTop","colorRight","colorLeft","colorBottom","colorTl","colorTr","colorBl","colorBr","height","fontSize","lineHeight","mount","mountX","mountY","pivot","pivotX","pivotY","rotation","scale","scaleX","scaleY","width","worldX","worldY","x","y","zIndex","zIndexLocked"],ea=["absX","absY","autosize","clipping","contain","data","fontFamily","fontStretch","fontStyle","fontWeight","letterSpacing","maxLines","offsetY","overflowSuffix","rtt","scrollable","scrollY","src","text","textAlign","textBaseline","textOverflow","texture","textureOptions","verticalAlign","wordWrap"];class Be extends Object{constructor(t){super(),this._type=t==="text"?Ge.TextNode:Ge.Element,this.rendered=!1,this.lng={},this.children=[]}get effects(){return this._effects}set effects(t){this._effects=t,this.rendered&&(this.shader=qn(t))}set id(t){var e;this._id=t,(e=ee.rendererOptions)!=null&&e.inspector&&(this.data={...this.data,testId:t})}get id(){return this._id}get parent(){return this._parent}set parent(t){var e;this._parent=t,this.rendered&&(this.lng.parent=(e=t==null?void 0:t.lng)!=null?e:null)}insertChild(t,e){if(t.parent=this,e){this.removeChild(t);const r=this.children.indexOf(e);if(r>=0){this.children.splice(r,0,t);return}}this.children.push(t)}removeChild(t){const e=this.children.indexOf(t);e>=0&&this.children.splice(e,1)}get selectedNode(){const t=this.selected||0;for(let e=t;e<this.children.length;e++){const r=this.children[e];if(Vt(r))return this.selected=e,r}}set shader(t){let e=t;It(t)&&(e=yn(...t)),this.lng.shader=e}_sendToLightningAnimatable(t,e){if(this.transition&&this.rendered&&ee.animationsEnabled&&(this.transition===!0||this.transition[t])){const r=this.transition===!0||this.transition[t]===!0?void 0:this.transition[t],s=this.animate({[t]:e},r);return Je(this.onAnimationStarted)&&s.once("animating",o=>{var i;(i=this.onAnimationStarted)==null||i.call(this,o,t,e)}),Je(this.onAnimationFinished)&&s.once("stopped",o=>{var i;(i=this.onAnimationFinished)==null||i.call(this,o,t,e)}),s.start()}this.lng[t]=e}animate(t,e){return k(this.rendered,"Node must be rendered before animating"),this.lng.animate(t,e||this.animationSettings)}chain(t,e){return this._animationRunning&&(this._animationQueue=[],this._animationRunning=!1),e?this._animationQueueSettings=e:this._animationQueueSettings||(this._animationQueueSettings=e||this.animationSettings),e=e||this._animationQueueSettings,this._animationQueue=this._animationQueue||[],this._animationQueue.push({props:t,animationSettings:e}),this}async start(){let t=this._animationQueue.shift();for(;t;)this._animationRunning=!0,await this.animate(t.props,t.animationSettings).start().waitUntilStopped(),t=this._animationQueue.shift();this._animationRunning=!1,this._animationQueueSettings=void 0}setFocus(){if(!this.skipFocus)if(this.rendered){if(this.forwardFocus!==void 0)if(Je(this.forwardFocus)){if(this.forwardFocus.call(this,this)!==!1)return}else{const t=typeof this.forwardFocus=="number"?this.forwardFocus:null,e=this.children;if(t!==null&&t<e.length){const r=e[t];Vt(r)&&r.setFocus();return}}queueMicrotask(()=>Yi(this))}else this._autofocus=!0}isTextNode(){return this._type===Ge.TextNode}_layoutOnLoad(){en++,this.lng.on("loaded",()=>{ir.add(this.parent),jn()})}getText(){let t="";for(let e=0;e<this.children.length;e++)t+=this.children[e].text;return t}destroy(){var t;this._queueDelete&&Vi(this.lng)&&(this.lng.destroy(),(t=this.parent)!=null&&t.requiresLayout()&&this.parent.updateLayout())}set onEvents(t){this._events=t}get onEvents(){return this._events}set style(t){It(t)?this._style=ws(t):this._style=t;for(const e in this._style)this[e]===void 0&&(this[e]=this._style[e])}get style(){return this._style}get hasChildren(){return this.children.length>0}getChildById(t){return this.children.find(e=>e.id===t)}searchChildrenById(t){for(let e=0;e<this.children.length;e++){const r=this.children[e];if(Vt(r)){if(r.id===t)return r;const s=r.searchChildrenById(t);if(s)return s}}}set states(t){this._states=this._states?this._states.merge(t):new Gn(this._stateChanged.bind(this),t),this.rendered&&this._stateChanged()}get states(){return this._states=this._states||new Gn(this._stateChanged.bind(this)),this._states}get animationSettings(){return this._animationSettings||ee.animationSettings}set animationSettings(t){this._animationSettings=t}set hidden(t){this.alpha=t?0:1}get hidden(){return this.alpha===0}set autofocus(t){this._autofocus=!!t,this._autofocus&&this.setFocus()}get autofocus(){return this._autofocus}requiresLayout(){return this.display==="flex"||this.onBeforeLayout||this.onLayout}set updateLayoutOn(t){this.updateLayout()}get updateLayoutOn(){return null}updateLayout(){var t,e;if(this.hasChildren){Qe("Layout: ",this);let r=!1;Je(this.onBeforeLayout)&&(console.warn("onBeforeLayout is deprecated"),r=this.onBeforeLayout.call(this,this)||!1),this.display==="flex"?($i(this)||r)&&((t=this.parent)==null||t.updateLayout()):r&&((e=this.parent)==null||e.updateLayout()),Je(this.onLayout)&&this.onLayout.call(this,this)}}_stateChanged(){if(Qe("State Changed: ",this,this.states),this.forwardStates){const e=this.states.slice();this.children.forEach(r=>{r.states=e})}const t=this.states;if(this._undoStyles||this.style&&Xi(this.style,t)){this._undoStyles=this._undoStyles||[];const e={};this._undoStyles.forEach(s=>{e[s]=this.style[s]});const r=t.reduce((s,o)=>{const i=this.style[o];return i&&(s={...s,...i}),s},{});this._undoStyles=Object.keys(r),r.transition!==void 0&&(this.transition=r.transition),Object.assign(this,e,r)}}render(t){var o;const e=this,r=this.parent;if(!r){console.warn("Parent not set - no node created for: ",this);return}if(!r.rendered){console.warn("Parent not rendered yet: ",this);return}if(r.requiresLayout()&&ir.add(r),this.rendered)return;this._states&&this._stateChanged();const s=e.lng;if((this.right||this.right===0)&&(s.x=(r.width||0)-this.right,s.mountX=1),(this.bottom||this.bottom===0)&&(s.y=(r.height||0)-this.bottom,s.mountY=1),s.x=s.x||0,s.y=s.y||0,s.parent=r.lng,e._effects&&(s.shader=qn(e._effects)),e.isTextNode()){const i=s;if(ee.fontSettings)for(const a in ee.fontSettings)i[a]===void 0&&(i[a]=ee.fontSettings[a]);i.text=i.text||e.getText(),i.textAlign&&!i.contain&&console.warn("Text align requires contain: ",e.getText()),i.contain&&(i.width||(i.width=(r.width||0)-i.x-(i.marginRight||0)),i.contain==="both"&&!i.height&&!i.maxLines?i.height=(r.height||0)-i.y-(i.marginBottom||0):i.maxLines===1&&(i.height=i.height||i.lineHeight||i.fontSize)),Qe("Rendering: ",this,s),e.lng=Ie.createTextNode(s),r.requiresLayout()&&(!s.width||!s.height)&&e._layoutOnLoad()}else s.texture||(isNaN(s.width)&&(s.width=(r.width||0)-s.x),isNaN(s.height)&&(s.height=(r.height||0)-s.y),s.rtt&&!s.color&&(s.color=4294967295),!s.color&&!s.src&&(s.color=0)),Qe("Rendering: ",this,s),e.lng=Ie.createNode(s);if(e.rendered=!0,e.autosize&&r.requiresLayout()&&e._layoutOnLoad(),e.onFail&&e.lng.on("failed",e.onFail),e.onLoad&&e.lng.on("loaded",e.onLoad),Je(this.onCreate)&&this.onCreate.call(this,e),e.onEvents&&e.onEvents.forEach(([i,a])=>{e.lng.on(i,(l,d)=>a(e,d))}),(o=e.lng)!=null&&o.div&&(e.lng.div.element=e),e._type===Ge.Element){const i=e.children.length;for(let a=0;a<i;a++){const l=e.children[a];k(l,"Child is undefined"),Vt(l)?l.render():l.text&&l._type===Ge.Text&&console.warn("TextNode outside of <Text>: ",l)}}t&&!en&&jn(),e._autofocus&&e.setFocus()}}for(const n of Ji)Object.defineProperty(Be.prototype,n,{get(){return this.lng[n]},set(t){this._sendToLightningAnimatable(n,t)}});for(const n of ea)Object.defineProperty(Be.prototype,n,{get(){return this.lng[n]},set(t){this.lng[n]=t}});function Mr(n){return{set(t){this.effects=this.effects?{...this.effects,[n]:t}:{[n]:t}},get(){var t;return(t=this.effects)==null?void 0:t[n]}}}Object.defineProperties(Be.prototype,{border:ft(),borderLeft:ft("Left"),borderRight:ft("Right"),borderTop:ft("Top"),borderBottom:ft("Bottom"),linearGradient:Mr("linearGradient"),radialGradient:Mr("radialGradient"),radialProgress:Mr("radialProgressGradient"),borderRadius:{set(n){this.effects=this.effects?{...this.effects,radius:{radius:n}}:{radius:{radius:n}}},get(){var n,t;return(t=(n=this.effects)==null?void 0:n.radius)==null?void 0:t.radius}}});const V={context:void 0,registry:void 0,done:!1,getContextId(){return Zn(this.context.count)},getNextContextId(){return Zn(this.context.count++)}};function Zn(n){const t=String(n),e=t.length-1;return V.context.id+(e?String.fromCharCode(96+e):"")+t}function xt(n){V.context=n}const Es=(n,t)=>n===t,ar=Symbol("solid-proxy"),Rs=Symbol("solid-track"),lr={equals:Es};let Cs=Ns;const _e=1,cr=2,Is={owned:null,cleanups:null,context:null,owner:null},kr={};var X=null;let Pr=null,ta=null,$=null,le=null,Me=null,br=0;function Ne(n,t){const e=$,r=X,s=n.length===0,o=t===void 0?r:t,i=s?Is:{owned:null,cleanups:null,context:o?o.context:null,owner:o},a=s?n:()=>n(()=>ie(()=>Ar(i)));X=i,$=null;try{return ke(a,!0)}finally{$=e,X=r}}function W(n,t){t=t?Object.assign({},lr,t):lr;const e={value:n,observers:null,observerSlots:null,comparator:t.equals||void 0},r=s=>(typeof s=="function"&&(s=s(e.value)),Fs(e,s));return[Ls.bind(e),r]}function tn(n,t,e){const r=Mt(n,t,!0,_e);Ze(r)}function Ce(n,t,e){const r=Mt(n,t,!1,_e);Ze(r)}function We(n,t,e){Cs=ca;const r=Mt(n,t,!1,_e);r.user=!0,Me?Me.push(r):Ze(r)}function j(n,t,e){e=e?Object.assign({},lr,e):lr;const r=Mt(n,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=e.equals||void 0,Ze(r),Ls.bind(r)}function ra(n){return n&&typeof n=="object"&&"then"in n}function Bs(n,t,e){let r,s,o;arguments.length===2&&typeof t=="object"||arguments.length===1?(r=!0,s=n,o=t||{}):(r=n,s=t,o={});let i=null,a=kr,l=null,d=!1,f="initialValue"in o,h=typeof r=="function"&&j(r);const p=new Set,[v,y]=(o.storage||W)(o.initialValue),[x,A]=W(void 0),[w,m]=W(void 0,{equals:!1}),[b,g]=W(f?"ready":"unresolved");V.context&&(l=V.getNextContextId(),o.ssrLoadFrom==="initial"?a=o.initialValue:V.load&&V.has(l)&&(a=V.load(l)));function T(C,M,S,N){return i===C&&(i=null,N!==void 0&&(f=!0),(C===a||M===a)&&o.onHydrated&&queueMicrotask(()=>o.onHydrated(N,{value:M})),a=kr,_(M,S)),M}function _(C,M){ke(()=>{M===void 0&&y(()=>C),g(M!==void 0?"errored":f?"ready":"unresolved"),A(M);for(const S of p.keys())S.decrement();p.clear()},!1)}function R(){const C=ia,M=v(),S=x();if(S!==void 0&&!i)throw S;return $&&!$.user&&C&&tn(()=>{w(),i&&(C.resolved||p.has(C)||(C.increment(),p.add(C)))}),M}function I(C=!0){if(C!==!1&&d)return;d=!1;const M=h?h():r;if(M==null||M===!1){T(i,ie(v));return}const S=a!==kr?a:ie(()=>s(M,{value:v(),refetching:C}));return ra(S)?(i=S,"value"in S?(S.status==="success"?T(i,S.value,void 0,M):T(i,void 0,rn(S.value),M),S):(d=!0,queueMicrotask(()=>d=!1),ke(()=>{g(f?"refreshing":"pending"),m()},!1),S.then(N=>T(S,N,void 0,M),N=>T(S,void 0,rn(N),M)))):(T(i,S,void 0,M),S)}return Object.defineProperties(R,{state:{get:()=>b()},error:{get:()=>x()},loading:{get(){const C=b();return C==="pending"||C==="refreshing"}},latest:{get(){if(!f)return R();const C=x();if(C&&!i)throw C;return v()}}}),h?tn(()=>I(!1)):I(!1),[R,{refetch:I,mutate:y}]}function na(n,t=Es,e){const r=new Map,s=Mt(o=>{const i=n();for(const[a,l]of r.entries())if(t(a,i)!==t(a,o))for(const d of l.values())d.state=_e,d.pure?le.push(d):Me.push(d);return i},void 0,!0,_e);return Ze(s),o=>{const i=$;if(i){let a;(a=r.get(o))?a.add(i):r.set(o,a=new Set([i])),be(()=>{a.delete(i),!a.size&&r.delete(o)})}return t(o,s.value)}}function vn(n){return ke(n,!1)}function ie(n){if($===null)return n();const t=$;$=null;try{return n()}finally{$=t}}function qe(n,t,e){const r=Array.isArray(n);let s,o=e&&e.defer;return i=>{let a;if(r){a=Array(n.length);for(let d=0;d<n.length;d++)a[d]=n[d]()}else a=n();if(o)return o=!1,i;const l=ie(()=>t(a,s,i));return s=a,l}}function sa(n){We(()=>ie(n))}function be(n){return X===null||(X.cleanups===null?X.cleanups=[n]:X.cleanups.push(n)),n}function Ms(){return $}function He(){return X}function bn(n,t){const e=X,r=$;X=n,$=null;try{return ke(t,!0)}catch(s){Tn(s)}finally{X=e,$=r}}function oa(n){const t=$,e=X;return Promise.resolve().then(()=>{$=t,X=e;let r;return ke(n,!1),$=X=null,r?r.done:void 0})}function ks(n,t){const e=Symbol("context");return{id:e,Provider:ua(e),defaultValue:n}}function Ps(n){let t;return X&&X.context&&(t=X.context[n.id])!==void 0?t:n.defaultValue}function An(n){const t=j(n),e=j(()=>nn(t()));return e.toArray=()=>{const r=e();return Array.isArray(r)?r:r!=null?[r]:[]},e}let ia;function Ls(){if(this.sources&&this.state)if(this.state===_e)Ze(this);else{const n=le;le=null,ke(()=>dr(this),!1),le=n}if($){const n=this.observers?this.observers.length:0;$.sources?($.sources.push(this),$.sourceSlots.push(n)):($.sources=[this],$.sourceSlots=[n]),this.observers?(this.observers.push($),this.observerSlots.push($.sources.length-1)):(this.observers=[$],this.observerSlots=[$.sources.length-1])}return this.value}function Fs(n,t,e){let r=n.value;return(!n.comparator||!n.comparator(r,t))&&(n.value=t,n.observers&&n.observers.length&&ke(()=>{for(let s=0;s<n.observers.length;s+=1){const o=n.observers[s],i=Pr&&Pr.running;i&&Pr.disposed.has(o),(i?!o.tState:!o.state)&&(o.pure?le.push(o):Me.push(o),o.observers&&Ds(o)),i||(o.state=_e)}if(le.length>1e6)throw le=[],new Error},!1)),t}function Ze(n){if(!n.fn)return;Ar(n);const t=br;aa(n,n.value,t)}function aa(n,t,e){let r;const s=X,o=$;$=X=n;try{r=n.fn(t)}catch(i){return n.pure&&(n.state=_e,n.owned&&n.owned.forEach(Ar),n.owned=null),n.updatedAt=e+1,Tn(i)}finally{$=o,X=s}(!n.updatedAt||n.updatedAt<=e)&&(n.updatedAt!=null&&"observers"in n?Fs(n,r):n.value=r,n.updatedAt=e)}function Mt(n,t,e,r=_e,s){const o={fn:n,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:X,context:X?X.context:null,pure:e};return X===null||X!==Is&&(X.owned?X.owned.push(o):X.owned=[o]),o}function ur(n){if(n.state===0)return;if(n.state===cr)return dr(n);if(n.suspense&&ie(n.suspense.inFallback))return n.suspense.effects.push(n);const t=[n];for(;(n=n.owner)&&(!n.updatedAt||n.updatedAt<br);)n.state&&t.push(n);for(let e=t.length-1;e>=0;e--)if(n=t[e],n.state===_e)Ze(n);else if(n.state===cr){const r=le;le=null,ke(()=>dr(n,t[0]),!1),le=r}}function ke(n,t){if(le)return n();let e=!1;t||(le=[]),Me?e=!0:Me=[],br++;try{const r=n();return la(e),r}catch(r){e||(Me=null),le=null,Tn(r)}}function la(n){if(le&&(Ns(le),le=null),n)return;const t=Me;Me=null,t.length&&ke(()=>Cs(t),!1)}function Ns(n){for(let t=0;t<n.length;t++)ur(n[t])}function ca(n){let t,e=0;for(t=0;t<n.length;t++){const r=n[t];r.user?n[e++]=r:ur(r)}if(V.context){if(V.count){V.effects||(V.effects=[]),V.effects.push(...n.slice(0,e));return}else V.effects&&(n=[...V.effects,...n],e+=V.effects.length,delete V.effects);xt()}for(t=0;t<e;t++)ur(n[t])}function dr(n,t){n.state=0;for(let e=0;e<n.sources.length;e+=1){const r=n.sources[e];if(r.sources){const s=r.state;s===_e?r!==t&&(!r.updatedAt||r.updatedAt<br)&&ur(r):s===cr&&dr(r,t)}}}function Ds(n){for(let t=0;t<n.observers.length;t+=1){const e=n.observers[t];e.state||(e.state=cr,e.pure?le.push(e):Me.push(e),e.observers&&Ds(e))}}function Ar(n){let t;if(n.sources)for(;n.sources.length;){const e=n.sources.pop(),r=n.sourceSlots.pop(),s=e.observers;if(s&&s.length){const o=s.pop(),i=e.observerSlots.pop();r<s.length&&(o.sourceSlots[i]=r,s[r]=o,e.observerSlots[r]=i)}}if(n.owned){for(t=n.owned.length-1;t>=0;t--)Ar(n.owned[t]);n.owned=null}if(n.cleanups){for(t=n.cleanups.length-1;t>=0;t--)n.cleanups[t]();n.cleanups=null}n.state=0}function rn(n){return n instanceof Error?n:new Error(typeof n=="string"?n:"Unknown error",{cause:n})}function Tn(n,t=X){throw rn(n)}function nn(n){if(typeof n=="function"&&!n.length)return nn(n());if(Array.isArray(n)){const t=[];for(let e=0;e<n.length;e++){const r=nn(n[e]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return n}function ua(n,t){return function(r){let s;return Ce(()=>s=ie(()=>(X.context={...X.context,[n]:r.value},An(()=>r.children))),void 0),s}}const sn=Symbol("fallback");function hr(n){for(let t=0;t<n.length;t++)n[t]()}function da(n,t,e={}){let r=[],s=[],o=[],i=0,a=t.length>1?[]:null;return be(()=>hr(o)),()=>{let l=n()||[],d=l.length,f,h;return l[Rs],ie(()=>{let v,y,x,A,w,m,b,g,T;if(d===0)i!==0&&(hr(o),o=[],r=[],s=[],i=0,a&&(a=[])),e.fallback&&(r=[sn],s[0]=Ne(_=>(o[0]=_,e.fallback())),i=1);else if(i===0){for(s=new Array(d),h=0;h<d;h++)r[h]=l[h],s[h]=Ne(p);i=d}else{for(x=new Array(d),A=new Array(d),a&&(w=new Array(d)),m=0,b=Math.min(i,d);m<b&&r[m]===l[m];m++);for(b=i-1,g=d-1;b>=m&&g>=m&&r[b]===l[g];b--,g--)x[g]=s[b],A[g]=o[b],a&&(w[g]=a[b]);for(v=new Map,y=new Array(g+1),h=g;h>=m;h--)T=l[h],f=v.get(T),y[h]=f===void 0?-1:f,v.set(T,h);for(f=m;f<=b;f++)T=r[f],h=v.get(T),h!==void 0&&h!==-1?(x[h]=s[f],A[h]=o[f],a&&(w[h]=a[f]),h=y[h],v.set(T,h)):o[f]();for(h=m;h<d;h++)h in x?(s[h]=x[h],o[h]=A[h],a&&(a[h]=w[h],a[h](h))):s[h]=Ne(p);s=s.slice(0,i=d),r=l.slice(0)}return s});function p(v){if(o[h]=v,a){const[y,x]=W(h);return a[h]=x,t(l[h],y)}return t(l[h])}}}function ha(n,t,e={}){let r=[],s=[],o=[],i=[],a=0,l;return be(()=>hr(o)),()=>{const d=n()||[],f=d.length;return d[Rs],ie(()=>{if(f===0)return a!==0&&(hr(o),o=[],r=[],s=[],a=0,i=[]),e.fallback&&(r=[sn],s[0]=Ne(p=>(o[0]=p,e.fallback())),a=1),s;for(r[0]===sn&&(o[0](),o=[],r=[],s=[],a=0),l=0;l<f;l++)l<r.length&&r[l]!==d[l]?i[l](()=>d[l]):l>=r.length&&(s[l]=Ne(h));for(;l<r.length;l++)o[l]();return a=i.length=o.length=f,r=d.slice(0),s=s.slice(0,a)});function h(p){o[l]=p;const[v,y]=W(d[l]);return i[l]=y,t(v,l)}}}function Us(n,t){return ie(()=>n(t||{}))}function Xt(){return!0}const on={get(n,t,e){return t===ar?e:n.get(t)},has(n,t){return t===ar?!0:n.has(t)},set:Xt,deleteProperty:Xt,getOwnPropertyDescriptor(n,t){return{configurable:!0,enumerable:!0,get(){return n.get(t)},set:Xt,deleteProperty:Xt}},ownKeys(n){return n.keys()}};function Lr(n){return(n=typeof n=="function"?n():n)?n:{}}function fa(){for(let n=0,t=this.length;n<t;++n){const e=this[n]();if(e!==void 0)return e}}function Sn(...n){let t=!1;for(let i=0;i<n.length;i++){const a=n[i];t=t||!!a&&ar in a,n[i]=typeof a=="function"?(t=!0,j(a)):a}if(t)return new Proxy({get(i){for(let a=n.length-1;a>=0;a--){const l=Lr(n[a])[i];if(l!==void 0)return l}},has(i){for(let a=n.length-1;a>=0;a--)if(i in Lr(n[a]))return!0;return!1},keys(){const i=[];for(let a=0;a<n.length;a++)i.push(...Object.keys(Lr(n[a])));return[...new Set(i)]}},on);const e={},r=Object.create(null);for(let i=n.length-1;i>=0;i--){const a=n[i];if(!a)continue;const l=Object.getOwnPropertyNames(a);for(let d=l.length-1;d>=0;d--){const f=l[d];if(f==="__proto__"||f==="constructor")continue;const h=Object.getOwnPropertyDescriptor(a,f);if(!r[f])r[f]=h.get?{enumerable:!0,configurable:!0,get:fa.bind(e[f]=[h.get.bind(a)])}:h.value!==void 0?h:void 0;else{const p=e[f];p&&(h.get?p.push(h.get.bind(a)):h.value!==void 0&&p.push(()=>h.value))}}}const s={},o=Object.keys(r);for(let i=o.length-1;i>=0;i--){const a=o[i],l=r[a];l&&l.get?Object.defineProperty(s,a,l):s[a]=l?l.value:void 0}return s}function pa(n,...t){if(ar in n){const s=new Set(t.length>1?t.flat():t[0]),o=t.map(i=>new Proxy({get(a){return i.includes(a)?n[a]:void 0},has(a){return i.includes(a)&&a in n},keys(){return i.filter(a=>a in n)}},on));return o.push(new Proxy({get(i){return s.has(i)?void 0:n[i]},has(i){return s.has(i)?!1:i in n},keys(){return Object.keys(n).filter(i=>!s.has(i))}},on)),o}const e={},r=t.map(()=>({}));for(const s of Object.getOwnPropertyNames(n)){const o=Object.getOwnPropertyDescriptor(n,s),i=!o.get&&!o.set&&o.enumerable&&o.writable&&o.configurable;let a=!1,l=0;for(const d of t)d.includes(s)&&(a=!0,i?r[l][s]=o.value:Object.defineProperty(r[l],s,o)),++l;a||(i?e[s]=o.value:Object.defineProperty(e,s,o))}return[...r,e]}function xe(n){let t,e;const r=s=>{const o=V.context;if(o){const[a,l]=W();V.count||(V.count=0),V.count++,(e||(e=n())).then(d=>{!V.done&&xt(o),V.count--,l(()=>d.default),xt()}),t=a}else if(!t){const[a]=Bs(()=>(e||(e=n())).then(l=>l.default));t=a}let i;return j(()=>(i=t())?ie(()=>{if(!o||V.done)return i(s);const a=V.context;xt(o);const l=i(s);return xt(a),l}):"")};return r.preload=()=>e||((e=n()).then(s=>t=()=>s.default),e),r}const ga=n=>"Stale read from <".concat(n,">.");function Os(n){const t="fallback"in n&&{fallback:()=>n.fallback};return j(da(()=>n.each,n.children,t||void 0))}function ma(n){const t="fallback"in n&&{fallback:()=>n.fallback};return j(ha(()=>n.each,n.children,t||void 0))}function Tr(n){const t=n.keyed,e=j(()=>n.when,void 0,{equals:(r,s)=>t?r===s:!r==!s});return j(()=>{const r=e();if(r){const s=n.children;return typeof s=="function"&&s.length>0?ie(()=>s(t?r:()=>{if(!ie(e))throw ga("Show");return n.when})):s}return n.fallback},void 0,void 0)}const xa=void 0,[Sr,zs]=W(void 0);function ya(n=""){return Hi(n)?n:typeof n=="string"?n.startsWith("#")?+(n.replace("#","0x")+(n.length===7?"ff":"")):n.startsWith("0x")?Number(n):+("0x"+(n.length===6?n+"ff":n)):0}function va({createElement:n,createTextNode:t,isTextNode:e,replaceText:r,insertNode:s,removeNode:o,setProperty:i,getParentNode:a,getFirstChild:l,getNextSibling:d}){function f(m,b,g,T){if(g!==void 0&&!T&&(T=[]),typeof b!="function")return h(m,b,T,g);Ce(_=>h(m,b(),_,g),T)}function h(m,b,g,T,_){for(;typeof g=="function";)g=g();if(b===g)return g;const R=typeof b,I=T!==void 0;if(R==="string"||R==="number")if(R==="number"&&(b=b.toString()),I){let C=g[0];C&&e(C)?r(C,b):C=t(b),g=y(m,g,T,C)}else g!==""&&typeof g=="string"?r(l(m),g=b):(y(m,g,T,t(b)),g=b);else if(b==null||R==="boolean")g=y(m,g,T);else{if(R==="function")return Ce(()=>{let C=b();for(;typeof C=="function";)C=C();g=h(m,C,g,T)}),()=>g;if(Array.isArray(b)){const C=[];if(p(C,b,_))return Ce(()=>g=h(m,C,g,T,!0)),()=>g;if(C.length===0){const M=y(m,g,T);if(I)return g=M}else Array.isArray(g)?g.length===0?x(m,C,T):v(m,g,C):g==null||g===""?x(m,C):v(m,I&&g||[l(m)],C);g=C}else{if(Array.isArray(g)){if(I)return g=y(m,g,T,b);y(m,g,null,b)}else g==null||g===""||!l(m)?s(m,b):A(m,b,l(m));g=b}}return g}function p(m,b,g){let T=!1;for(let _=0,R=b.length;_<R;_++){let I=b[_],C;if(!(I==null||I===!0||I===!1))if(Array.isArray(I))T=p(m,I)||T;else if((C=typeof I)=="string"||C==="number")m.push(t(I));else if(C==="function")if(g){for(;typeof I=="function";)I=I();T=p(m,Array.isArray(I)?I:[I])||T}else m.push(I),T=!0;else m.push(I)}return T}function v(m,b,g){let T=g.length,_=b.length,R=T,I=0,C=0,M=d(b[_-1]),S=null;for(;I<_||C<R;){if(b[I]===g[C]){I++,C++;continue}for(;b[_-1]===g[R-1];)_--,R--;if(_===I){const N=R<T?C?d(g[C-1]):g[R-C]:M;for(;C<R;)s(m,g[C++],N)}else if(R===C)for(;I<_;)(!S||!S.has(b[I]))&&o(m,b[I]),I++;else if(b[I]===g[R-1]&&g[C]===b[_-1]){const N=d(b[--_]);s(m,g[C++],d(b[I++])),s(m,g[--R],N),b[_]=g[R]}else{if(!S){S=new Map;let L=C;for(;L<R;)S.set(g[L],L++)}const N=S.get(b[I]);if(N!=null)if(C<N&&N<R){let L=I,P=1,F;for(;++L<_&&L<R&&!((F=S.get(b[L]))==null||F!==N+P);)P++;if(P>N-C){const U=b[I];for(;C<N;)s(m,g[C++],U)}else A(m,g[C++],b[I++])}else I++;else o(m,b[I++])}}}function y(m,b,g,T){if(g===void 0){let R;for(;R=l(m);)o(m,R);return T&&s(m,T),""}const _=T||t("");if(b.length){let R=!1;for(let I=b.length-1;I>=0;I--){const C=b[I];if(_!==C){const M=a(C)===m;!R&&!I?M?A(m,_,C):s(m,_,g):M&&o(m,C)}else R=!0}}else s(m,_,g);return[_]}function x(m,b,g){for(let T=0,_=b.length;T<_;T++)s(m,b[T],g)}function A(m,b,g){s(m,b,g),o(m,g)}function w(m,b,g={},T){return b||(b={}),T||Ce(()=>g.children=h(m,b.children,g.children)),Ce(()=>b.ref&&b.ref(m)),Ce(()=>{for(const _ in b){if(_==="children"||_==="ref")continue;const R=b[_];R!==g[_]&&(i(m,_,R,g[_]),g[_]=R)}}),g}return{render(m,b){let g;return Ne(T=>{g=T,f(b,m())}),g},insert:f,spread(m,b,g){typeof b=="function"?Ce(T=>w(m,b(),T,g)):w(m,b,void 0,g)},createElement:n,createTextNode:t,insertNode:s,setProp(m,b,g,T){return i(m,b,g,T),g},mergeProps:Sn,effect:Ce,memo:j,createComponent:Us,use(m,b,g){return ie(()=>m(b,g))}}}function ba(n){const t=va(n);return t.mergeProps=Sn,t}const Ws={createElement(n){return new Be(n)},createTextNode(n){return{_type:Ge.Text,text:n,parent:void 0}},replaceText(n,t){Qe("Replace Text: ",n,t),n.text=t;const e=n.parent;k(e),e.text=e.getText()},setProperty(n,t,e=!0){n[t]=e},insertNode(n,t,e){Qe("INSERT: ",n,t,e),n.insertChild(t,e),t._queueDelete=!1,t instanceof Be?n.rendered&&t.render(!0):n.isTextNode()&&(n.text=n.getText())},isTextNode(n){return n.isTextNode()},removeNode(n,t){Qe("REMOVE: ",n,t),n.removeChild(t),t._queueDelete=!0,t instanceof Be&&queueMicrotask(()=>t.destroy())},getParentNode(n){return n.parent},getFirstChild(n){return n.children[0]},getNextSibling(n){const t=n.parent.children||[],e=t.indexOf(n)+1;if(e<t.length)return t[e]}},Hs=ba(Ws);let Fr;const At=Ws.createElement("App"),Aa=function(n){return Hs.render(n,At)};function Ta(n,t){return Fr=Fi(ee.rendererOptions,"app"),ee.setActiveElement=zs,At.lng=Fr.root,At.rendered=!0,{renderer:Fr,rootNode:At,render:Aa}}const{effect:Id,memo:kt,createComponent:E,createElement:wn,createTextNode:Bd,insertNode:Md,insert:kd,spread:Vs,setProp:Sa,mergeProps:Ae,use:Pd}=Hs,z=n=>{const t=wn("node");return Vs(t,n,!1),t},K=n=>{const t=wn("text");return Vs(t,n,!1),t},wa=24;function _a(n,t,e,r,s,o,i,a,l){const d=Math.min(Math.max(i.firstLineIdx,0),a.length),f=0,{metrics:h}=e;k(h,"Font metrics not loaded"),k(e.data,"Font data not loaded");const p=(h.ascender-h.descender)*n;let v=0;r==="middle"?v=(t-p)/2:r==="bottom"&&(v=t-p);const y=s/o,x=e.data.common.base,w=h.ascender*n-x,m=y+w+d*t+v;if(!(l&&m>=l/o))return{sdfX:f,sdfY:m,lineIndex:d}}class yt{constructor(t,e=0){c(this,"iterator");c(this,"peekBuffer",[]);c(this,"_lastIndex");this.iterator=t,this.iterator=t,this._lastIndex=e-1,this.peekBuffer=[]}next(){const t=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return t.done?this._lastIndex=-1:this._lastIndex++,t}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const t=this.iterator.next();return this.peekBuffer.push(t),t}get lastIndex(){return this._lastIndex}}function*vt(n,t=0){let e=t;for(;e<n.length;){const r=n.codePointAt(e);if(r===void 0)throw new Error("Invalid Unicode code point");yield r,e+=r<=65535?1:2}}function Ea(n,t,e){const r=e.shapeText(t,new yt(vt(n,0),0));let s=0;for(const o of r)o.mapped&&(s+=o.xAdvance);return s}function Ra(n,t,e,r,s,o,i,a,l,d,f,h,p,v,y,x,A,w,m){k(y,"Font face must be loaded"),k(y.loaded,"Font face must be loaded"),k(y.data,"Font face must be loaded"),k(y.shaper,"Font face must be loaded");const b=a/y.data.info.size,g=l/b,T=o/b,_=d/b,R=p[n],I=(R==null?void 0:R.codepointIndex)||0,C=(R==null?void 0:R.maxX)||0,M=(R==null?void 0:R.maxY)||0;let S=C,N=M,L=t,P=e,F=0;const U={codepointIndex:-1,bufferOffset:-1,xStart:-1},O=y.shaper,Y={letterSpacing:_};let Q=O.shapeText(Y,new yt(vt(r,I),I)),H,ce=-1;const Te=[],ae=i/b,Ve=Ea(w,Y,O);let Ee=!0;for(;Ee;){const ye=(m===0||n+1<m)&&(h!=="both"||A||P+g+y.maxCharHeight<=ae),fe=ye?T:T-Ve;let Z=0;const q=P+y.maxCharHeight>=v.y1,te=P<=v.y2,J=q&&te;for(;(H=Q.next())&&!H.done;){const G=H.value;if(n===p.length)p.push({codepointIndex:G.cluster,maxY:N,maxX:S});else if(n>p.length)throw new Error("Unexpected lineCache length");if(G.codepoint===32||G.codepoint===10?U.codepointIndex!==-1&&(U.codepointIndex=-1,Z=L):U.codepointIndex===-1&&(U.codepointIndex=G.cluster,U.bufferOffset=F,U.xStart=Z),G.mapped){const pe=L+G.xOffset+G.width;if(h!=="none"&&pe>=fe&&U.codepointIndex!==-1&&U.xStart>0)if(ye){Q=O.shapeText(Y,new yt(vt(r,U.codepointIndex),U.codepointIndex)),F=U.bufferOffset;break}else Q=O.shapeText(Y,new yt(vt(w,0),0)),L=U.xStart,F=U.bufferOffset,h="none";else{const ue=L+G.xOffset,de=P+G.yOffset;if(J){ce===-1&&(ce=F);const Pe=y.getAtlasEntry(G.glyphId),Xe=Pe.x/y.data.common.scaleW,$e=Pe.y/y.data.common.scaleH,dt=Pe.width/y.data.common.scaleW,ht=Pe.height/y.data.common.scaleH;f[F++]=ue,f[F++]=de,f[F++]=Xe,f[F++]=$e,f[F++]=ue+G.width,f[F++]=de,f[F++]=Xe+dt,f[F++]=$e,f[F++]=ue,f[F++]=de+G.height,f[F++]=Xe,f[F++]=$e+ht,f[F++]=ue+G.width,f[F++]=de+G.height,f[F++]=Xe+dt,f[F++]=$e+ht}N=Math.max(N,de+G.height),S=Math.max(S,ue+G.width),L+=G.xAdvance}}else if(G.codepoint===10){if(ye)break;Q=O.shapeText(Y,new yt(vt(w,0),0)),h="none"}}ce!==-1&&(Te.push({bufferStart:ce,bufferEnd:F}),ce=-1),L=0,P+=g,n++,U.codepointIndex=-1,Z=0,!x&&h==="both"&&P>v.y2||H&&H.done?Ee=!1:ye||(Ee=!1)}if(s==="center"){const ye=h==="none"?S:T;for(let fe=0;fe<Te.length;fe++){const Z=Te[fe],q=f[Z.bufferEnd-4]-f[Z.bufferStart],te=(ye-q)/2;for(let J=Z.bufferStart;J<Z.bufferEnd;J+=4)f[J]+=te}}else if(s==="right"){const ye=h==="none"?S:T;for(let fe=0;fe<Te.length;fe++){const Z=Te[fe],q=Z.bufferEnd===Z.bufferStart?0:f[Z.bufferEnd-4]-f[Z.bufferStart],te=ye-q;for(let J=Z.bufferStart;J<Z.bufferEnd;J+=4)f[J]+=te}}return k(H),{bufferNumFloats:F,bufferNumQuads:F/16,layoutNumCharacters:H.done?r.length-I:H.value.cluster-I+1,fullyProcessed:!!H.done,maxX:S,maxY:N,numLines:p.length}}function Ca(n,t){return Math.ceil(n/t)*t}function Ia(n,t){return Math.floor(n/t)*t}function Ba(n,t,e,r,s,o,i,a){const{screen:l,sdf:d}=n;if(!Fo(i))l.x1=0,l.y1=0,l.x2=0,l.y2=0,d.x1=0,d.y1=0,d.x2=0,d.y2=0,n.numLines=0,n.firstLineIdx=0;else{const f=i.x1-t,h=f+(i.x2-i.x1),p=i.y1-e+r,v=Ia(p-o,s||1),y=Ca(p+(i.y2-i.y1)+o,s||1);l.x1=f,l.y1=v,l.x2=h,l.y2=y,d.x1=f/a,d.y1=v/a,d.x2=h/a,d.y2=y/a,n.numLines=Math.ceil((y-v)/s),n.firstLineIdx=s?Math.floor(v/s):0}n.valid=!0}function Ma(n,t){return t*(n.ascender-n.descender+n.lineGap)}const ka={x:0,y:0,width:0,height:0};class Pa extends bs{constructor(e){super(e);c(this,"ssdfFontFamilies",{});c(this,"msdfFontFamilies",{});c(this,"fontFamilyArray",[this.ssdfFontFamilies,this.msdfFontFamilies]);c(this,"sdfShader");c(this,"rendererBounds");c(this,"type","sdf");this.sdfShader=this.stage.shManager.loadShader("SdfShader").shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,r)=>{e.props.fontFamily=r,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontWeight:(e,r)=>{e.props.fontWeight=r,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStyle:(e,r)=>{e.props.fontStyle=r,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStretch:(e,r)=>{e.props.fontStretch=r,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontSize:(e,r)=>{e.props.fontSize=r,this.invalidateLayoutCache(e)},text:(e,r)=>{e.props.text=r,this.invalidateLayoutCache(e)},textAlign:(e,r)=>{e.props.textAlign=r,this.invalidateLayoutCache(e)},color:(e,r)=>{e.props.color=r},x:(e,r)=>{e.props.x=r,e.elementBounds.valid&&(this.setElementBoundsX(e),!e.renderWindow.valid&&Er(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},y:(e,r)=>{e.props.y=r,e.elementBounds.valid&&(this.setElementBoundsY(e),!e.renderWindow.valid&&Er(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},contain:(e,r)=>{e.props.contain=r,this.invalidateLayoutCache(e)},width:(e,r)=>{e.props.width=r,e.props.contain!=="none"&&this.invalidateLayoutCache(e)},height:(e,r)=>{e.props.height=r,e.props.contain==="both"&&this.invalidateLayoutCache(e)},offsetY:(e,r)=>{e.props.offsetY=r,this.invalidateLayoutCache(e)},scrollable:(e,r)=>{e.props.scrollable=r,this.invalidateLayoutCache(e)},scrollY:(e,r)=>{e.props.scrollY=r,this.scheduleUpdateState(e)},letterSpacing:(e,r)=>{e.props.letterSpacing=r,this.invalidateLayoutCache(e)},lineHeight:(e,r)=>{e.props.lineHeight=r,e.resLineHeight=void 0,this.invalidateLayoutCache(e)},maxLines:(e,r)=>{e.props.maxLines=r,this.invalidateLayoutCache(e)},textBaseline:(e,r)=>{e.props.textBaseline=r,this.invalidateLayoutCache(e)},verticalAlign:(e,r)=>{e.props.verticalAlign=r,this.invalidateLayoutCache(e)},overflowSuffix:(e,r)=>{e.props.overflowSuffix=r,this.invalidateLayoutCache(e)},debug:(e,r)=>{e.props.debug=r}}}canRenderFont(e){const{fontFamily:r}=e;return r in this.ssdfFontFamilies||r in this.msdfFontFamilies||r==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(e){return e instanceof qr}addFontFace(e){k(e instanceof qr);const r=e.fontFamily,s=e.type==="ssdf"?this.ssdfFontFamilies:e.type==="msdf"?this.msdfFontFamilies:void 0;if(!s){console.warn("Invalid font face type: ".concat(e.type));return}let o=s[r];o||(o=new Set,s[r]=o),o.add(e)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new je,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,resLineHeight:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(e){let{trFontFace:r}=e;const{textH:s,lineCache:o,debugData:i,forceFullLayoutCalc:a}=e;if(i.updateCount++,e.status==="initialState"&&this.setStatus(e,"loading"),!r){if(r=this.resolveFontFace(e.props),e.trFontFace=r,!r){const O="SdfTextRenderer: Could not resolve font face for family: '".concat(e.props.fontFamily,"'");console.error(O),this.setStatus(e,"failed",new Error(O));return}r.texture.setRenderableOwner(e,!0)}if(!r.loaded){r.once("loaded",()=>{this.scheduleUpdateState(e)});return}k(r.data,"Font face data should be loaded"),k(r.metrics,"Font face metrics should be loaded");const{text:l,fontSize:d,x:f,y:h,contain:p,width:v,height:y,verticalAlign:x,scrollable:A,overflowSuffix:w,maxLines:m}=e.props,b=p==="both"&&A?e.props.scrollY:0,{renderWindow:g}=e,T=r.data.info.size,_=d/T;let R=e.resLineHeight;if(R===void 0){const O=e.props.lineHeight;O===void 0?R=Ma(r.metrics,d):R=O,e.resLineHeight=R}const I=R/_;e.distanceRange=_*r.data.distanceField.distanceRange;const C=l.length*wa;let M=e.vertexBuffer;(!M||M.length<C)&&(M=new Float32Array(C*2));const S=e.elementBounds;if(S.valid||(this.setElementBoundsX(e),this.setElementBoundsY(e),S.valid=!0),!a&&g.valid){const O=g.screen;if(f+O.x1<=S.x1&&f+O.x2>=S.x2&&h-b+O.y1<=S.y1&&h-b+O.y2>=S.y2){this.setStatus(e,"loaded");return}g.valid=!1,this.setStatus(e,"loading")}const{offsetY:N,textAlign:L}=e.props;if(!g.valid){if(!Er(S,this.rendererBounds))return;Ba(g,f,h,b,R,p==="both"?S.y2-S.y1:0,S,_)}const P=_a(T,I,r,x,N,_,g,o,s);if(!P){this.setStatus(e,"loaded");return}const{letterSpacing:F}=e.props,U=Ra(P.lineIndex,P.sdfX,P.sdfY,l,L,v,y,d,R,F,M,p,o,g.sdf,r,a,A,w,m);e.bufferUploaded=!1,e.bufferNumFloats=U.bufferNumFloats,e.bufferNumQuads=U.bufferNumQuads,e.vertexBuffer=M,e.renderWindow=g,i.lastLayoutNumCharacters=U.layoutNumCharacters,i.bufferSize=M.byteLength,U.fullyProcessed&&(e.textW=U.maxX*_,e.textH=U.numLines*I*_),this.setStatus(e,"loaded")}renderQuads(e,r,s,o,i,a){var S,N,L;if(!e.vertexBuffer)return;const l=this.stage.renderer;k(l instanceof xn);const{fontSize:d,color:f,contain:h,scrollable:p,zIndex:v,debug:y}=e.props,x=h==="both"&&p?e.props.scrollY:0,{textW:A=0,textH:w=0,distanceRange:m,vertexBuffer:b,bufferUploaded:g,trFontFace:T,elementBounds:_}=e;let{webGlBuffers:R}=e;if(!R){const P=l.glw,F=4*Float32Array.BYTES_PER_ELEMENT,U=P.createBuffer();k(U),e.webGlBuffers=new Ss([{buffer:U,attributes:{a_position:{name:"a_position",size:2,type:P.FLOAT,normalized:!1,stride:F,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:P.FLOAT,normalized:!1,stride:F,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,k(e.webGlBuffers),R=e.webGlBuffers}if(!g){const P=l.glw,F=(S=R==null?void 0:R.getBuffer("a_textureCoordinate"))!=null?S:null;P.arrayBufferData(F,b,P.STATIC_DRAW),e.bufferUploaded=!0}if(k(T),p&&h==="both"){k(_.valid);const P=Po(_,ka);s.valid?(e.clippingRect.valid=!0,s=ds(s,P,e.clippingRect)):(e.clippingRect.valid=!0,s=hs(P,e.clippingRect))}const I=new Ts(l.glw,l.options,R,this.sdfShader,{transform:r.getFloatArr(),color:Co(f,o),size:d/(((N=T.data)==null?void 0:N.info.size)||0),scrollY:x,distanceRange:m,debug:y.sdfShaderDebug},o,s,{height:w,width:A},0,v,!1,i,a),C=(L=e.trFontFace)==null?void 0:L.texture;k(C);const M=C.ctxTexture;I.addTexture(M),I.length=e.bufferNumFloats,I.numQuads=e.bufferNumQuads,l.addRenderOp(I)}setIsRenderable(e,r){var s;super.setIsRenderable(e,r),(s=e.trFontFace)==null||s.texture.setRenderableOwner(e,r)}destroyState(e){var r;super.destroyState(e),(r=e.trFontFace)==null||r.texture.setRenderableOwner(e,!1)}resolveFontFace(e){return ps.resolveFontFace(this.fontFamilyArray,e)}releaseFontFace(e){e.resLineHeight=void 0,e.trFontFace&&(e.trFontFace.texture.setRenderableOwner(e,!1),e.trFontFace=void 0)}invalidateLayoutCache(e){e.renderWindow.valid=!1,e.elementBounds.valid=!1,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading"),this.scheduleUpdateState(e)}setElementBoundsX(e){const{x:r,contain:s,width:o}=e.props,{elementBounds:i}=e;i.x1=r,i.x2=s!=="none"?r+o:1/0}setElementBoundsY(e){const{y:r,contain:s,height:o}=e.props,{elementBounds:i}=e;i.y1=r,i.y2=s==="both"?r+o:1/0}}const $t={alpha:n=>n===1?null:{prop:"opacity",value:"".concat(n)},x:n=>({prop:"left",value:"".concat(n,"px")}),y:n=>({prop:"top",value:"".concat(n,"px")}),width:n=>n===0?null:{prop:"width",value:"".concat(n,"px")},height:n=>n===0?null:{prop:"height",value:"".concat(n,"px")},zIndex:()=>"zIndex",fontFamily:()=>"font-family",fontSize:()=>"font-size",fontStyle:()=>"font-style",fontWeight:()=>"font-weight",fontStretch:()=>"font-stretch",lineHeight:()=>"line-height",letterSpacing:()=>"letter-spacing",textAlign:()=>"text-align",overflowSuffix:()=>"overflow-suffix",maxLines:()=>"max-lines",contain:()=>"contain",verticalAlign:()=>"vertical-align",clipping:n=>n===!1?null:{prop:"overflow",value:n?"hidden":"visible"},rotation:n=>n===0?null:{prop:"transform",value:"rotate(".concat(n,"rad)")},scale:n=>n===1?null:{prop:"transform",value:"scale(".concat(n,")")},scaleX:n=>n===1?null:{prop:"transform",value:"scaleX(".concat(n,")")},scaleY:n=>n===1?null:{prop:"transform",value:"scaleY(".concat(n,")")},color:n=>n===0?null:{prop:"color",value:Xs(n)}},Xs=n=>{const t=(n&255)/255,e=n>>8&255,r=n>>16&255,s=n>>24&255;return"rgba(".concat(s,",").concat(r,",").concat(e,",").concat(t,")")},Jn={id:"test-id"};class La{constructor(t,e){c(this,"root",null);c(this,"canvas",null);c(this,"height",1080);c(this,"width",1920);c(this,"scaleX",1);c(this,"scaleY",1);var o,i,a,l,d,f;if(gn())return;if(!e)throw new Error("settings is required");this.height=Math.ceil((i=e.appHeight)!=null?i:1080/((o=e.deviceLogicalPixelRatio)!=null?o:1)),this.width=Math.ceil((l=e.appWidth)!=null?l:1920/((a=e.deviceLogicalPixelRatio)!=null?a:1)),this.scaleX=(d=e.deviceLogicalPixelRatio)!=null?d:1,this.scaleY=(f=e.deviceLogicalPixelRatio)!=null?f:1,this.canvas=t,this.root=document.createElement("div"),this.setRootPosition(),document.body.appendChild(this.root),new MutationObserver(this.setRootPosition.bind(this)).observe(t,{attributes:!0,childList:!1,subtree:!1}),new ResizeObserver(this.setRootPosition.bind(this)).observe(t),window.addEventListener("resize",this.setRootPosition.bind(this)),console.warn("Inspector is enabled, this will impact performance")}setRootPosition(){if(this.root===null||this.canvas===null)return;const t=this.canvas.getBoundingClientRect(),e=document.documentElement.scrollTop+t.top,r=document.documentElement.scrollLeft+t.left;this.root.id="root",this.root.style.left="".concat(r,"px"),this.root.style.top="".concat(e,"px"),this.root.style.width="".concat(this.width,"px"),this.root.style.height="".concat(this.height,"px"),this.root.style.position="absolute",this.root.style.transformOrigin="0 0 0",this.root.style.transform="scale(".concat(this.scaleX,", ").concat(this.scaleY,")"),this.root.style.overflow="hidden",this.root.style.zIndex="65534"}createDiv(t,e){const r=document.createElement("div");r.style.position="absolute",r.id=t.toString();for(const s in e)this.updateNodeProperty(r,s,e[s]);return r}createNode(t){const e=this.createDiv(t.id,t.props);return e.node=t,t.div=e,this.createProxy(t,e)}createTextNode(t){const e=this.createDiv(t.id,t.props);return e.node=t,t.div=e,this.createProxy(t,e)}createProxy(t,e){return new Proxy(t,{set:(r,s,o)=>(this.updateNodeProperty(e,s,o),Reflect.set(r,s,o)),get:(r,s,o)=>(s==="destroy"&&this.destroyNode(r.id),s==="animate"?(i,a)=>{const l=r.animate(i,a);return new Proxy(l,{get:(d,f,h)=>(f==="start"&&this.animateNode(e,i,a),Reflect.get(d,f,h))})}:Reflect.get(r,s,o))})}destroyNode(t){const e=document.getElementById(t.toString());e==null||e.remove()}updateNodeProperty(t,e,r){var s;if(!(this.root===null||r===void 0||r===null)){if(e==="parent"){const o=r.id;if(o===1){this.root.appendChild(t);return}const i=document.getElementById(o.toString());i==null||i.appendChild(t);return}if(e==="text"){t.innerHTML=String(r),t.style.visibility="hidden";return}if(e==="src"&&r){t.setAttribute("data-src",String(r));return}if($t[e]){const o=(s=$t[e])==null?void 0:s.call($t,r);if(o===null)return;if(typeof o=="string"){t.style.setProperty(o,String(r));return}typeof o=="object"&&t.style.setProperty(o.prop,o.value);return}if(Jn[e]){const o=Jn[e];if(!o)return;t.setAttribute(String(o),String(r));return}if(e==="data"){for(const o in r){const i=r[o];i===void 0?t.removeAttribute("data-".concat(o)):t.setAttribute("data-".concat(o),String(i))}return}}}animateNode(t,e,r){const{duration:s=1e3,delay:o=0}=r,{x:i,y:a,width:l,height:d,alpha:f=1,rotation:h=0,scale:p=1,color:v}=e;function y(){setTimeout(()=>{t.style.top="".concat(a,"px"),t.style.left="".concat(i,"px"),t.style.width="".concat(l,"px"),t.style.height="".concat(d,"px"),t.style.opacity="".concat(f),t.style.rotate="".concat(h,"rad"),t.style.scale="".concat(p),t.style.color=Xs(v)},s)}setTimeout(y,o)}}const es="_$DX_DELEGATE";function Fa(n,t=window.document){const e=t[es]||(t[es]=new Set);for(let r=0,s=n.length;r<s;r++){const o=n[r];e.has(o)||(e.add(o),t.addEventListener(o,Na))}}function Na(n){if(V.registry&&V.events&&V.events.find(([r,s])=>s===n))return;const t="$$".concat(n.type);let e=n.composedPath&&n.composedPath()[0]||n.target;for(n.target!==e&&Object.defineProperty(n,"target",{configurable:!0,value:e}),Object.defineProperty(n,"currentTarget",{configurable:!0,get(){return e||document}}),V.registry&&!V.done&&(V.done=_$HY.done=!0);e;){const r=e[t];if(r&&!e.disabled){const s=e["".concat(t,"Data")];if(s!==void 0?r.call(e,s,n):r.call(e,n),n.cancelBubble)return}e=e._$host||e.parentNode||e.host}}const Da=!1;function $s(){let n=new Set;function t(s){return n.add(s),()=>n.delete(s)}let e=!1;function r(s,o){if(e)return!(e=!1);const i={to:s,options:o,defaultPrevented:!1,preventDefault:()=>i.defaultPrevented=!0};for(const a of n)a.listener({...i,from:a.location,retry:l=>{l&&(e=!0),a.navigate(s,{...o,resolve:!1})}});return!i.defaultPrevented}return{subscribe:t,confirm:r}}let an;function _n(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),an=window.history.state._depth}_n();function Ua(n){return{...n,_depth:window.history.state&&window.history.state._depth}}function Oa(n,t){let e=!1;return()=>{const r=an;_n();const s=r==null?null:an-r;if(e){e=!1;return}s&&t(s)?(e=!0,window.history.go(-s)):n()}}const za=/^(?:[a-z0-9]+:)?\/\//i,Wa=/^\/+|(\/)\/+$/g,Gs="http://sr";function Tt(n,t=!1){const e=n.replace(Wa,"$1");return e?t||/^[?#]/.test(e)?e:"/"+e:""}function tr(n,t,e){if(za.test(t))return;const r=Tt(n),s=e&&Tt(e);let o="";return!s||t.startsWith("/")?o=r:s.toLowerCase().indexOf(r.toLowerCase())!==0?o=r+s:o=s,(o||"/")+Tt(t,!o)}function Ha(n,t){if(n==null)throw new Error(t);return n}function Va(n,t){return Tt(n).replace(/\/*(\*.*)?$/g,"")+Tt(t)}function Ys(n){const t={};return n.searchParams.forEach((e,r)=>{t[r]=e}),t}function Ks(n,t,e){const[r,s]=n.split("/*",2),o=r.split("/").filter(Boolean),i=o.length;return a=>{const l=a.split("/").filter(Boolean),d=l.length-i;if(d<0||d>0&&s===void 0&&!t)return null;const f={path:i?"":"/",params:{}},h=p=>e===void 0?void 0:e[p];for(let p=0;p<i;p++){const v=o[p],y=l[p],x=v[0]===":",A=x?v.slice(1):v;if(x&&Nr(y,h(A)))f.params[A]=y;else if(x||!Nr(y,v))return null;f.path+="/".concat(y)}if(s){const p=d?l.slice(-d).join("/"):"";if(Nr(p,h(s)))f.params[s]=p;else return null}return f}}function Nr(n,t){const e=r=>r.localeCompare(n,void 0,{sensitivity:"base"})===0;return t===void 0?!0:typeof t=="string"?e(t):typeof t=="function"?t(n):Array.isArray(t)?t.some(e):t instanceof RegExp?t.test(n):!1}function Xa(n){const[t,e]=n.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((s,o)=>s+(o.startsWith(":")?2:3),r.length-(e===void 0?0:1))}function Qs(n){const t=new Map,e=He();return new Proxy({},{get(r,s){return t.has(s)||bn(e,()=>t.set(s,j(()=>n()[s]))),t.get(s)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(n())}})}function En(n){let t=/(\/?\:[^\/]+)\?/.exec(n);if(!t)return[n];let e=n.slice(0,t.index),r=n.slice(t.index+t[0].length);const s=[e,e+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)s.push(e+=t[1]),r=r.slice(t[0].length);return En(r).reduce((o,i)=>[...o,...s.map(a=>a+i)],[])}const $a=100,js=ks(),qs=ks(),Rn=()=>Ha(Ps(js),"<A> and 'use' router primitives can be only used inside a Route."),Cn=()=>Rn().navigatorFactory(),Zs=()=>Rn().location,Ga=(n,t)=>{const e=Zs(),r=j(()=>En(n()).map(s=>Ks(s,void 0,t)));return j(()=>{for(const s of r()){const o=s(e.pathname);if(o)return o}})},Ya=()=>Rn().params;function Ka(n,t=""){const{component:e,preload:r,load:s,children:o,info:i}=n,a=!o||Array.isArray(o)&&!o.length,l={key:n,component:e,preload:r||s,info:i};return Js(n.path).reduce((d,f)=>{for(const h of En(f)){const p=Va(t,h);let v=a?p:p.split("/*",1)[0];v=v.split("/").map(y=>y.startsWith(":")||y.startsWith("*")?y:encodeURIComponent(y)).join("/"),d.push({...l,originalPath:f,pattern:v,matcher:Ks(v,!a,n.matchFilters)})}return d},[])}function Qa(n,t=0){return{routes:n,score:Xa(n[n.length-1])*1e4-t,matcher(e){const r=[];for(let s=n.length-1;s>=0;s--){const o=n[s],i=o.matcher(e);if(!i)return null;r.unshift({...i,route:o})}return r}}}function Js(n){return Array.isArray(n)?n:[n]}function eo(n,t="",e=[],r=[]){const s=Js(n);for(let o=0,i=s.length;o<i;o++){const a=s[o];if(a&&typeof a=="object"){a.hasOwnProperty("path")||(a.path="");const l=Ka(a,t);for(const d of l){e.push(d);const f=Array.isArray(a.children)&&a.children.length===0;if(a.children&&!f)eo(a.children,d.pattern,e,r);else{const h=Qa([...e],r.length);r.push(h)}e.pop()}}}return e.length?r:r.sort((o,i)=>i.score-o.score)}function Dr(n,t){for(let e=0,r=n.length;e<r;e++){const s=n[e].matcher(t);if(s)return s}return[]}function ja(n,t){const e=new URL(Gs),r=j(l=>{const d=n();try{return new URL(d,e)}catch(f){return console.error("Invalid path ".concat(d)),l}},e,{equals:(l,d)=>l.href===d.href}),s=j(()=>r().pathname),o=j(()=>r().search,!0),i=j(()=>r().hash),a=()=>"";return{get pathname(){return s()},get search(){return o()},get hash(){return i()},get state(){return t()},get key(){return a()},query:Qs(qe(o,()=>Ys(r())))}}let Ye;function qa(){return Ye}function Za(n,t,e,r={}){const{signal:[s,o],utils:i={}}=n,a=i.parsePath||(L=>L),l=i.renderPath||(L=>L),d=i.beforeLeave||$s(),f=tr("",r.base||"");if(f===void 0)throw new Error("".concat(f," is not a valid base path"));f&&!s().value&&o({value:f,replace:!0,scroll:!1});const[h,p]=W(!1);let v;const y=(L,P)=>{P.value===x()&&P.state===w()||(v===void 0&&p(!0),Ye=L,v=P,oa(()=>{v===P&&(A(v.value),m(v.state),T[1]([]))}).finally(()=>{v===P&&vn(()=>{Ye=void 0,L==="navigate"&&S(v),p(!1),v=void 0})}))},[x,A]=W(s().value),[w,m]=W(s().state),b=ja(x,w),g=[],T=W([]),_=j(()=>typeof r.transformUrl=="function"?Dr(t(),r.transformUrl(b.pathname)):Dr(t(),b.pathname)),R=Qs(()=>{const L=_(),P={};for(let F=0;F<L.length;F++)Object.assign(P,L[F].params);return P}),I={pattern:f,path:()=>f,outlet:()=>null,resolvePath(L){return tr(f,L)}};return Ce(qe(s,L=>y("native",L),{defer:!0})),{base:I,location:b,params:R,isRouting:h,renderPath:l,parsePath:a,navigatorFactory:M,matches:_,beforeLeave:d,preloadRoute:N,singleFlight:r.singleFlight===void 0?!0:r.singleFlight,submissions:T};function C(L,P,F){ie(()=>{if(typeof P=="number"){P&&(i.go?i.go(P):console.warn("Router integration does not support relative routing"));return}const{replace:U,resolve:O,scroll:Y,state:Q}={replace:!1,resolve:!0,scroll:!0,...F},H=O?L.resolvePath(P):tr("",P);if(H===void 0)throw new Error("Path '".concat(P,"' is not a routable path"));if(g.length>=$a)throw new Error("Too many redirects");const ce=x();(H!==ce||Q!==w())&&(Da||d.confirm(H,F)&&(g.push({value:ce,replace:U,scroll:Y,state:w()}),y("navigate",{value:H,state:Q})))})}function M(L){return L=L||Ps(qs)||I,(P,F)=>C(L,P,F)}function S(L){const P=g[0];P&&(o({...L,replace:P.replace,scroll:P.scroll}),g.length=0)}function N(L,P={}){const F=Dr(t(),L.pathname),U=Ye;Ye="preload";for(let O in F){const{route:Y,params:Q}=F[O];Y.component&&Y.component.preload&&Y.component.preload();const{preload:H}=Y;P.preloadData&&H&&bn(e(),()=>H({params:Q,location:{pathname:L.pathname,search:L.search,hash:L.hash,query:Ys(L),state:null,key:""},intent:"preload"}))}Ye=U}}function Ja(n,t,e,r){const{base:s,location:o,params:i}=n,{pattern:a,component:l,preload:d}=r().route,f=j(()=>r().path);l&&l.preload&&l.preload();const h=d?d({params:i,location:o,intent:Ye||"initial"}):void 0;return{parent:t,pattern:a,path:f,outlet:()=>l?Us(l,{params:i,location:o,data:h,get children(){return e()}}):e(),resolvePath(v){return tr(s.path(),v,f())}}}const el=n=>t=>{const{base:e}=t,r=An(()=>t.children),s=j(()=>eo(r(),t.base||""));let o;const i=Za(n,s,()=>o,{base:e,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return n.create&&n.create(i),E(js.Provider,{value:i,get children(){return E(tl,{routerState:i,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[kt(()=>(o=He())&&null),E(rl,{routerState:i,get branches(){return s()}})]}})}})};function tl(n){const t=n.routerState.location,e=n.routerState.params,r=j(()=>n.preload&&ie(()=>{n.preload({params:e,location:t,intent:qa()||"initial"})}));return E(Tr,{get when(){return n.root},keyed:!0,get fallback(){return n.children},children:s=>E(s,{params:e,location:t,get data(){return r()},get children(){return n.children}})})}function rl(n){const t=[];let e;const r=j(qe(n.routerState.matches,(s,o,i)=>{let a=o&&s.length===o.length;const l=[];for(let d=0,f=s.length;d<f;d++){const h=o&&o[d],p=s[d];i&&h&&p.route.key===h.route.key?l[d]=i[d]:(a=!1,t[d]&&t[d](),Ne(v=>{t[d]=v,l[d]=Ja(n.routerState,l[d-1]||n.routerState.base,ts(()=>r()[d+1]),()=>n.routerState.matches()[d])}))}return t.splice(s.length).forEach(d=>d()),i&&a?i:(e=l[0],l)}));return ts(()=>r()&&e)()}const ts=n=>()=>E(Tr,{get when(){return n()},keyed:!0,children:t=>E(qs.Provider,{value:t,get children(){return t.outlet()}})}),re=n=>{const t=An(()=>n.children);return Sn(n,{get children(){return t()}})};function nl([n,t],e,r){return[n,r?s=>t(r(s)):t]}function sl(n){if(n==="#")return null;try{return document.querySelector(n)}catch(t){return null}}function ol(n){let t=!1;const e=s=>typeof s=="string"?{value:s}:s,r=nl(W(e(n.get()),{equals:(s,o)=>s.value===o.value&&s.state===o.state}),void 0,s=>(!t&&n.set(s),s));return n.init&&be(n.init((s=n.get())=>{t=!0,r[1](e(s)),t=!1})),el({signal:r,create:n.create,utils:n.utils})}function il(n,t,e){return n.addEventListener(t,e),()=>n.removeEventListener(t,e)}function al(n,t){const e=sl("#".concat(n));e?e.scrollIntoView():t&&window.scrollTo(0,0)}const ll=new Map;function cl(n=!0,t=!1,e="/_server",r){return s=>{const o=s.base.path(),i=s.navigatorFactory(s.base);let a={};function l(x){return x.namespaceURI==="http://www.w3.org/2000/svg"}function d(x){if(x.defaultPrevented||x.button!==0||x.metaKey||x.altKey||x.ctrlKey||x.shiftKey)return;const A=x.composedPath().find(_=>_ instanceof Node&&_.nodeName.toUpperCase()==="A");if(!A||t&&!A.hasAttribute("link"))return;const w=l(A),m=w?A.href.baseVal:A.href;if((w?A.target.baseVal:A.target)||!m&&!A.hasAttribute("state"))return;const g=(A.getAttribute("rel")||"").split(/\s+/);if(A.hasAttribute("download")||g&&g.includes("external"))return;const T=w?new URL(m,document.baseURI):new URL(m);if(!(T.origin!==window.location.origin||o&&T.pathname&&!T.pathname.toLowerCase().startsWith(o.toLowerCase())))return[A,T]}function f(x){const A=d(x);if(!A)return;const[w,m]=A,b=s.parsePath(m.pathname+m.search+m.hash),g=w.getAttribute("state");x.preventDefault(),i(b,{resolve:!1,replace:w.hasAttribute("replace"),scroll:!w.hasAttribute("noscroll"),state:g&&JSON.parse(g)})}function h(x){const A=d(x);if(!A)return;const[w,m]=A;a[m.pathname]||s.preloadRoute(m,{preloadData:w.getAttribute("preload")!=="false"})}function p(x){const A=d(x);if(!A)return;const[w,m]=A;a[m.pathname]||(a[m.pathname]=setTimeout(()=>{s.preloadRoute(m,{preloadData:w.getAttribute("preload")!=="false"}),delete a[m.pathname]},200))}function v(x){const A=d(x);if(!A)return;const[,w]=A;a[w.pathname]&&(clearTimeout(a[w.pathname]),delete a[w.pathname])}function y(x){if(x.defaultPrevented)return;let A=x.submitter&&x.submitter.hasAttribute("formaction")?x.submitter.getAttribute("formaction"):x.target.getAttribute("action");if(!A)return;if(!A.startsWith("https://action/")){const m=new URL(A,Gs);if(A=s.parsePath(m.pathname+m.search),!A.startsWith(e))return}if(x.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const w=ll.get(A);if(w){x.preventDefault();const m=new FormData(x.target,x.submitter);w.call({r:s,f:x.target},x.target.enctype==="multipart/form-data"?m:new URLSearchParams(m))}}Fa(["click","submit"]),document.addEventListener("click",f),n&&(document.addEventListener("mouseover",p),document.addEventListener("mouseout",v),document.addEventListener("focusin",h),document.addEventListener("touchstart",h)),document.addEventListener("submit",y),be(()=>{document.removeEventListener("click",f),n&&(document.removeEventListener("mouseover",p),document.removeEventListener("mouseout",v),document.removeEventListener("focusin",h),document.removeEventListener("touchstart",h)),document.removeEventListener("submit",y)})}}function ul(n){const t=n.replace(/^.*?#/,"");if(!t.startsWith("/")){const[,e="/"]=window.location.hash.split("#",2);return"".concat(e,"#").concat(t)}return t}function dl(n){const t=()=>window.location.hash.slice(1),e=$s();return ol({get:t,set({value:r,replace:s,scroll:o,state:i}){s?window.history.replaceState(Ua(i),"","#"+r):window.history.pushState(i,"","#"+r);const a=r.indexOf("#"),l=a>=0?r.slice(a+1):"";al(l,o),_n()},init:r=>il(window,"hashchange",Oa(r,s=>!e.confirm(s&&s<0?s:t()))),create:cl(n.preload,n.explicitLinks,n.actionBase),utils:{go:r=>window.history.go(r),renderPath:r=>"#".concat(r),parsePath:ul,beforeLeave:e}})(n)}const[to,hl]=W([]),fl=(n,t)=>{const e=He(),r=bn.bind(void 0,e);ee.setActiveElement=i=>r(()=>zs(i));const{cleanup:s,focusPath:o}=Zi({userKeyMap:n,keyHoldOptions:t,ownerContext:r});We(qe(Sr,()=>{hl([...o()])},{defer:!0})),be(s)};function pl(n=[]){const t=[];let e;for(e=0;e<n.length;e++){const r=n[e];if(typeof r=="string"&&!r.includes("PAUSE-"))t.push(n[e]);else break}return[t.join(",\b ")].concat(n.slice(e))}function rs(n){return new Promise(t=>{setTimeout(t,n)})}function gl(n,t,e="en-US"){const r=window.speechSynthesis;return new Promise((s,o)=>{const i=new SpeechSynthesisUtterance(n);i.lang=e,i.onend=()=>{s()},i.onerror=a=>{o(a)},t.push(i),r.speak(i)})}function ln(n,t,e=!0){const r=window.speechSynthesis,s=pl(Array.isArray(n)?n:[n]),o=[],i=[];let a=!0;return{series:(async()=>{try{for(;a&&s.length;){const d=await Promise.resolve(s.shift());if(a){if(typeof d=="string"&&d.includes("PAUSE-")){let f=Number(d.split("PAUSE-")[1])*1e3;isNaN(f)&&(f=0),await rs(f)}else if(typeof d=="string"&&d.length){let h=3;for(;a&&h>0;)try{await gl(d,i,t),h=0}catch(p){if(p instanceof SpeechSynthesisErrorEvent)if(p.error==="network")h--,console.warn("Speech synthesis network error. Retries left: ".concat(h)),await rs(500*(3-h));else if(p.error==="canceled"||p.error==="interrupted")h=0;else throw new Error("SpeechSynthesisErrorEvent: ".concat(p.error));else throw p}}else if(typeof d=="function"){const f=ln(d(),t,!1);o.push(f),await f.series}else if(Array.isArray(d)){const f=ln(d,t,!1);o.push(f),await f.series}}else break}}finally{a=!1}})(),get active(){return a},append:d=>{s.push(d)},cancel:()=>{a&&(e&&r.cancel(),o.forEach(d=>{d.cancel()}),a=!1)}}}let Gt;function ml(n,t="en-US"){return Gt&&Gt.cancel(),Gt=ln(n,t),Gt}var cn=(n,t)=>{let e;const r=()=>clearTimeout(e);return He()&&be(r),Object.assign((...o)=>{e!==void 0&&r(),e=setTimeout(()=>n(...o),t)},{clear:r})},ro=(n,t)=>{let e=!1,r,s;const o=(...a)=>{s=a,!e&&(e=!0,r=setTimeout(()=>{n(...s),e=!1},t))},i=()=>{clearTimeout(r),e=!1};return He()&&be(i),Object.assign(o,{clear:i})};function xl(n){let t=0,e=!1;const[r,s]=W(void 0,{equals:!1}),o=n(()=>{e=!0,s()});return()=>(e||(o(),r()),e?(e=!!t,!0):(Ms()&&(t++,be(()=>t--)),!1))}let un,St=[],Re,dn=!1;const yl=3e5;function ns(n,t){const e=cn(n,t);let r;const s=o=>{r=o,e(o)};return s.flush=()=>{e.clear(),n(r)},s.clear=e.clear,s}function pt(n){return n.id||n.name}function vl(n=[]){if(!se.onFocusChange||!se.enabled)return;const t=n.every(o=>!o.loading),e=n.filter(o=>!St.includes(o));if(un(),!t&&se.onFocusChange){se.onFocusChange([]);return}St=n.slice(0);const r=[],s=e.reduce((o,i)=>(i.announce?(o.push([pt(i),"Announce",i.announce]),r.push(i.announce)):i.title?(o.push([pt(i),"Title",i.title]),r.push(i.title)):o.push([pt(i),"No Announce",""]),o),[]);if(e.reverse().reduce((o,i)=>(i.announceContext?(o.push([pt(i),"Context",i.announceContext]),r.push(i.announceContext)):o.push([pt(i),"No Context",""]),o),s),se.debug&&console.table(s),r.length)return se.speak(r.reduce((o,i)=>o.concat(i),[]))}function bl(n){if(!dn)return Re=ml(n)}const se={debug:!1,enabled:!0,cancel:function(){Re&&Re.cancel()},clearPrevFocus:function(n=0){St=St.slice(0,n),un()},speak:function(n,{append:t=!1,notification:e=!1}={}){return se.onFocusChange&&se.enabled&&(se.onFocusChange.flush(),t&&Re&&Re.active?Re.append(n):(se.cancel(),bl(n)),e&&(dn=!0,Re==null||Re.series.finally(()=>{dn=!1,se.refresh()}).catch(console.error))),Re},refresh:function(n=0){se.clearPrevFocus(n),se.onFocusChange&&se.onFocusChange(ie(()=>to()))},setupTimers:function({focusDebounce:n=400,focusChangeTimeout:t=yl}={}){se.onFocusChange=ns(vl,n),un=ns(()=>{St=[]},t)}},Al=()=>(se.setupTimers(),We(qe(to,se.onFocusChange,{defer:!0})),se);var Tl=!!xa;function Sl(n){return n!==null&&(typeof n=="object"||typeof n=="function")}function ss(n,...t){return typeof n=="function"?n(...t):n}var wl=Tl?n=>He()?be(n):n:be,_l=()=>{let n=[];const t=()=>n=[];return{push:(...e)=>n.push(...e),execute(e,r,s,o){n.forEach(i=>i(e,r,s,o)),t()},clear:t}};function hn(n,t,e,r){return n.addEventListener(t,e,r),wl(n.removeEventListener.bind(n,t,e,r))}function no(n,t){const{push:e,execute:r}=_l();return[(s,o,i)=>{const a=hn(n,s,o,i!=null?i:t);return e(a),a},be(r)]}function El(n,t=He()){let e=0,r,s;return()=>(e++,be(()=>{e--,queueMicrotask(()=>{!e&&s&&(s(),s=r=void 0)})}),s||Ne(o=>r=n(s=o),t),r)}function Rl(n){const t=He(),e=El(n,t);return()=>V.context?Ne(n,t):e()}function Cl(n){const t={...n},e={...n},r={},s=i=>{let a=r[i];if(!a){if(!Ms())return t[i];r[i]=a=W(t[i],{internal:!0}),delete t[i]}return a[0]()};for(const i in n)Object.defineProperty(e,i,{get:()=>s(i),enumerable:!0});const o=(i,a)=>{const l=r[i];if(l)return l[1](a);i in t&&(t[i]=ss(a,[t[i]]))};return[e,(i,a)=>{if(Sl(i)){const l=ie(()=>Object.entries(ss(i,e)));vn(()=>{for(const[d,f]of l)o(d,()=>f)})}else o(i,a);return e}]}var so={passive:!0},Il={x:0,y:0,isInside:!1,sourceType:null};function Bl(n=window,t,e={}){const{touch:r=!0,followTouch:s=!0}=e,[o,i]=no(n,so),a=l=>t({x:l.pageX,y:l.pageY,sourceType:"mouse"});if(o("mousemove",a),o("dragover",a),r){const l=d=>{d.touches.length&&t({x:d.touches[0].clientX,y:d.touches[0].clientY,sourceType:"touch"})};o("touchstart",l),s&&o("touchmove",l)}return i}function Ml(n=window,t,e={}){const{touch:r=!0}=e,[s,o]=no(n,so);let i=!1,a=!r;function l(d){this==="mouse"?i=d:a=d,t(i||a)}return s("mouseover",l.bind("mouse",!0)),s("mouseout",l.bind("mouse",!1)),s("mousemove",l.bind("mouse",!0),{passive:!0,once:!0}),r&&(s("touchstart",l.bind("touch",!0)),s("touchend",l.bind("touch",!1))),o}function kl(n,t={}){const e={...Il,...t.initialValue},[r,s]=Cl(e),o=i=>{Bl(i,s,t),Ml(i,s.bind(void 0,"isInside"),t)};return typeof n!="function"?o(n):We(()=>o(n())),r}var Pl=Rl(kl.bind(void 0,void 0,void 0));function fr(n,t,e="keydown"){return new KeyboardEvent(e,{key:n,keyCode:t,which:t,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0})}const Ll=ro(n=>{const t=n.deltaY;t<0?document.body.dispatchEvent(fr("ArrowUp",38)):t>0&&document.body.dispatchEvent(fr("ArrowDown",40))},250),Fl=n=>{var r;const t=Sr(),e=((r=ee.rendererOptions)==null?void 0:r.deviceLogicalPixelRatio)||1;t&&oo(n.clientX,n.clientY,t.lng.absX*e,t.lng.absY*e,t.width*e,t.height*e)&&(document.dispatchEvent(fr("Enter",13)),setTimeout(()=>document.body.dispatchEvent(fr("Enter",13,"keyup")),1))};function oo(n,t,e,r,s=0,o=0){return n>=e&&n<=e+s&&t>=r&&t<=r+o}function Nl(n,t,e){var i;const r=[],s=((i=ee.rendererOptions)==null?void 0:i.deviceLogicalPixelRatio)||1;let o=[n];for(;o.length>0;){const a=[];for(const f of o)f.alpha!==0&&oo(t,e,f.lng.absX*s,f.lng.absY*s,f.width*s,f.height*s)&&a.push(f);const l=a.length;if(l===0)break;l>1&&a.sort((f,h)=>(h.zIndex||0)-(f.zIndex||0));const d=a[0];r.push(d),d.isTextNode()?o=[]:o=d.children}return r}function Dl(n=At,t=100){const e=Pl(),r=xl(s=>ro(s,t));hn(window,"wheel",Ll),hn(window,"click",Fl),We(()=>{var s;if(r()){const o=Nl(n,e.x,e.y).filter(i=>(i.focus||i.onFocus||i.onEnter)&&!i.skipFocus);if(o.length){let i=o[o.length-1];for(;(s=i.parent)!=null&&s.forwardStates;)i=i.parent;const a=i.parent;(a==null?void 0:a.selected)!==void 0&&(a.selected=a.children.indexOf(i)),i.setFocus()}}})}const[Ul,Ol]=W(""),u={name:"Base Lightning TV",alpha:{primary:1,secondary:.7,tertiary:.1,inactive:.5,full:1,none:0,alpha1:.1,alpha2:.3,alpha3:.5,alpha4:.7,alpha5:.9,alpha6:.95},animation:{duration:{none:0,xfast:100,fast:250,normal:500,slow:750,xslow:900},delay:{none:0,xfast:10,fast:25,normal:50,slow:75,xslow:90},expressive:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},expressiveEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},expressiveExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standard:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standardEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standardExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utility:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utilityEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utilityExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25}},asset:{arrowLeft:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAi0lEQVRIDWNgGAWjIfD//38JID5Fk5AAGqwKxPeA+D/VLQCaaQLEr0CGgwBVLQCa5wbEn0EGwwDVLAAaGA3Ev2AGw2iqWAA0rBiI/8EMRaYptgBoWDeygehsci1gIlcjWfqArqZdEMFcBLSEdpGMZAntkimSJbTLaEiW0K6oQLKEdoUdzJJRemiHAAD4n+yzPWCs7QAAAABJRU5ErkJggg==",arrowRight:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAg0lEQVRIDWNgGAWjIYArBP7//38KiCVwyVMsDjQcBO4BsSrFhmEzAGw8hHgFpEywqaFIDMkCEPMzELtRZCC6ZjQLQNxfQByNro5sPhYLQEL/gLiYbEORNeKwACbcDVPLBGMMOhrmVDSapkFE00imaTKlaUajaVFB28Ju0CXrUQfhDAEAEgHss6NhpLQAAAAASUVORK5CYII=",backspaceOutline:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAAAXNSR0IArs4c6QAACmpJREFUeF7tnVmoZUcVhv/feY4gBEVEH/KgCCZxCK2itNo4xQQH+kUN0TjEiDGKKBqnaExwBjUaR6KY+NQgiQkOMSYhYEScIopGJOqDE2hHjfP0y4p1Oqdv33v2qr32Prv2Paug6Ye7Vu2qv75TtWvtGohMqUBAAQZ80zUVQAKUEIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypfPsAJJ0NYC92XRHKPB3AAfLv18BuBLAFSR/NKZWswJI0vkA3jCmILsw75sAvIfkR8eo22wAknQSgMvGEGFD8vwxgFeQvGrI+s4CIEnHAPgugHsMWfkNzevDAM4i+Z8h6t88QJLuXOB5yBAVzjxuVeBaAM8ieXNUjzkAdAmA50Yrmv5HKPATACeQ/GNEm6YBkvRyANblZhpHAXsfekpkOGsWIEmPAHA9gDuOo13mWhS4gOSZfdVoEiBJ9wFwA4D7961Y+lUpsK/v7KxVgL4K4ElOCS4l+Uyn7a41k3Q0gMcC2ANgH4CHV1T2OyStx69OzQEk6TwAZztr8lMAx5P8s9N+Y8wk2cTjfQDu66z080h+zml7yKwpgCSdCOByZyX+BuBRJH/otN84M0kWN/s0gOc4Kv8Nko922B1m0gxAkh4I4AcVwcL9JA/UVnjT7CXdHYD9yEzfVUkAjib5uxqNmgCoBAu/CeBhzsJ/kORZTtuNN5Nk70bXAZ0Hy59G8qIawVoB6LMAnu8suE3tH0/y3077NAMg6esAuoaoC0la7M2dJgdI0ssAXOgs8W8BHEvS/s9UoYCkdwN4bYfL5STto7U7TQpQZbDQehzreawHylSpgKSTAVza4XYDyeNqsp4MoB7BwteQfH9N5dL2NgWK3l0vyAdJWhDXnSYBSNLtANh3GO/KwgMk97trlYbbKiDJPpzea5U8JKuYqDIeql0kvQPAG5352ZLMR5L8q9M+zXZQYFcAJOnJAL7sbGWLMFuk2SLOmYIKzB6gEiz8HoB7O7U4meQXnLZp1qGApD8BuOcsh7AewcL3kuyadg4OjSSbhRxH0j4BjJok2Ufga0j+YdQHlcznDlBNsPAa+xpP8r/rEHbxjAKPbRuyHvKFY0Ik6QUALOprPfIT1gHRbAGSdDoA77aSX5Zg4e8nhGfx6FEgWoJn8Zy1QCTplq5vjc3NwnoEC/eQ/HYD8IwC0TbwrA2i2QHUI1h4JskLGoJnUIhWwLMWiGYFkCSLMX2t5WDhlneeLm5Dw5kDntEhkmRhEVvesWNqZgiTdC6AN3W1Svn72oOFkuxF+WcVIQUrai+IKuA5BBHJ453auc1mA1AJFn7Jsf7EKj9ZsLBHw1ZDtI5neAmaBUBzCxaO2cBj5u2FZtlO0l8A3K3ZIaxHsPB8kt5vYn00c/mM0dBj5OmqzAqjOQDUfLBwJ32HbPAh84pCM5seSNJLAHzcWeFJgoVdZRui4YfIo6ucff8uyVY03LW5IawyWPgvW5u77mChV/QIABFfb/kidk0CVKbDth3Huw35dJLeniqiV2/fniDYx1f7vlWTeoUFah6wZQhrqwcqwUKbrtsaH0+6mOQpHsOpbXpCVFPstcJjBZNkmzHv0swQJultAN7iVO375TyafzjtJzcbEaK1w9McQJXBQlvvYmtsfjE5FZUFGAGiSeBpCqDKYKFtmX0qya9Utl0z5gNCNBk8BSA7CtiODNwxjf4trEew8BySNtTNOg0A0aTwtARQTbDQeh3rfawXmn0KQDQ5PC0B9EkAL3LSkAD9X6hWALIJzJ3mNoSdS9I7U3NyuX6zQO+zKOzkEEmaHqDSFdpZM97tOfkSfRvvk0LUDEAFIgseetf85DS+AYgk/bPr1NvRZ2HLg4ektwI4xzmgZCBxYohaBMjWPeenDOcvaIvZ2oez5gAqQ5mtLbb3oa4z+Bb6nTHW1UP92vFIr54vzJ8BcGplGdYKkSRbCXGHSWdh2z1ckp1taGccroxyFt9cznG4iGuDqFmASk9kZxxakNGTckHZBBA1DVCB6BMAXuwhyA4VmGL/+05l6zlsbdt7DJmXU0uXmSQ7JvD2zQ1hiwJJsotRvlVxXO87SU5+heUYDT5Gni5KVhg1D1DphWqCjOYy6RlAYzb0mHn3gWkWABWIaoKMubHwSBpGebGWZNdc2vmUO6a1BhJXFUSSff/yLuOYamvzzwEcVfFr7tWwPXqi6uN2PXWYG0C1Qca1n8RaDlewl3kPRL3gWXo/XBwo1dXWdk/a3jEOnJoVQGUoqw0yvpLkh7oUHvLvTohC8FRANBo8pT3sxLeVJ/M2M4QtiVYTZJzkNPoOiAaBxwHRqPDMFqBS8Jog4yT3YewA0aDwrIBodHhmDVApvG0mtO3PnjTJjTxbIBoFnm0gWgs8pQ06lxY3N4QtCWZBRgPDezdnHvPr+alV2EiaL0DlF2Dbn20bdB40XtHwQ5nOHqAC0SyCjEM1Wkv57AqACkRvBvB2p7hrDzI6yzU7s90EUPNBxtnR4SjwrgGo9EK1Qca8cM4ByU4mkuz++F93ZHELyZX3iW31n+S+sKWZWfNBxkCbNeUq6ekArugo1I0kH1xT8EkBKj1R80HGGkFbtZVkZ3bb2d2r0tUkn1hTh8kBKhB9DMBLnQWfJMjoLFuTZpJsO/ONAB7UUcBLSHqvX781q1YAqg0yfoDkq5psrQYLJeldAF7nKFr1x+wmACq9kAUZLazvvTV4P8kDDlE22kTSQ4uuK9dCF5HuR/I3NYI1A1CBaB+AK50VsAMj7TJeixNl2kYBSccCsB/ZMQ6Brif5GIfdYSZNAVQg8rzsLSphl/Hapby2LDZTUaBcq/56ALb1fOVxLkuinULy4loRmwOoQGQX7T7DWZnPk3y203bXmkl6AIA91isDOBGADV3e1HsJbasA1QYZvUKl3fYKPI2knXFQnZoEqPRCNUHG6oqnwyEFLiJ5Wl89mgWoQFQTZOyrwSb7WUztcSRtu0+v1DRABaKPADijV+3SaZUCNgE5geTNEZnmAFBtkDGix6b4Xld2BNvJcaHUPEClF6oNMoZE2eXOtm3q1ZFha1mfWQBUINoL4Kqurbm7vPEj1bOAqx3udW0kk62+swGoQHQ2gPOGFGAD8roJgF0t+qkx6jorgApElwE4aQwxZp6n3YNxsPyzA7yst/4iSdvEMFqaHUCjKZEZ91IgAeolWzotFEiAkoWQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnT+H0jPT81J3xWWAAAAAElFTkSuQmCC",check:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAOCAYAAAAi2ky3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACtSURBVHgBvdPdDcIgEAfwoy8Nb45QN3AGF2s36Ahu4gpuIDoBfSgfpdoTlCbEWEMh6T8hFzjyg5AAkBHOcQe5UWqspRx435sDpMYj6IYQwwVSEiJ2MKVUBWuzLSLl2HL+uxmNCGFO8yaL7RHxve6qRZoAuS4hxac8735elWVx7jrtMKL1o0Gcat9jhExHSukN/kUIFZ7MpDRtzE1isDRkAUtDvrA8ZI597FUf8gWH9P0b4gko9wAAAABJRU5ErkJggg=="},color:{palette:{},white:"0xffffffff",black:"0x000000ff",grey:"0x929096ff",red:"0xe74c3cff",orange:"0xdc7633ff",yellow:"0xf7dc6fff",green:"0x2ecc71ff",blue:"0x93a9fdff",purple:"0x663399ff",overlay:"0x181819b3",material:"0x181819ff",materialNeutral:"0x181819ff",materialNeutralElevated:"0x373639ff",materialInverse:"0xf8f7faff",materialInverseElevated:"0xffffffff",materialBrand:"0x000033ff",materialBrandElevated:"0x242a65ff",textNeutral:"0xf8f7faff",textNeutralSecondary:"0xf8f7fab3",textNeutralTertiary:"0xf8f7fa1a",textNeutralDisabled:"0xf8f7fa80",textInverse:"0x181819ff",textInverseSecondary:"0x181819b3",textInverseTertiary:"0x1818191a",textInverseDisabled:"0x18181980",textBrand:"0x93a9fdff",textBrandSecondary:"0x93a9fdb3",textBrandTertiary:"0x93a9fd1a",textBrandDisabled:"0x93a9fd80",textPositive:"0x2ecc71ff",textNegative:"0xe74c3cff",textInfo:"0x93a9fdff",textCaution:"0xdc7633ff",fillTransparent:"0xffffff0",fillNeutral:"0xf8f7faff",fillNeutralSecondary:"0xf8f7fab3",fillNeutralTertiary:"0xf8f7fa1a",fillNeutralDisabled:"0xf8f7fa80",fillInverse:"0x181819ff",fillInverseSecondary:"0x181819b3",fillInverseTertiary:"0x1818191a",fillInverseDisabled:"0x18181980",fillBrand:"0x93a9fdff",fillBrandSecondary:"0x93a9fdb3",fillBrandTertiary:"0x93a9fd1a",fillBrandDisabled:"0x93a9fd80",fillPositive:"0x2ecc71ff",fillNegative:"0xe74c3cff",fillInfo:"0x93a9fdff",fillCaution:"0xdc7633ff",strokeNeutral:"0xf8f7faff",strokeNeutralSecondary:"0xf8f7fab3",strokeNeutralTertiary:"0xf8f7fa1a",strokeNeutralDisabled:"0xf8f7fa80",strokeInverse:"0x181819ff",strokeInverseSecondary:"0x181819b3",strokeInverseTertiary:"0x1818191a",strokeInverseDisabled:"0x18181980",strokeBrand:"0x93a9fdff",strokeBrandSecondary:"0x93a9fdb3",strokeBrandTertiary:"0x93a9fd1a",strokeBrandDisabled:"0x93a9fd80",strokePositive:"0x2ecc71ff",strokeNegative:"0xe74c3cff",strokeInfo:"0x93a9fdff",strokeCaution:"0xdc7633ff",interactiveNeutral:"0xffffff1a",interactiveNeutralFocus:"0xffffffff",interactiveNeutralFocusSoft:"0xffffff1a",interactiveInverse:"0x48474b1a",interactiveInverseFocus:"0x48474bff",interactiveInverseFocusSoft:"0x48474b1a",interactiveBrand:"0xbecffe1a",interactiveBrandFocus:"0xbecffeff",interactiveBrandFocusSoft:"0xbecffe1a",shadowNeutral:"0x000000b3",shadowNeutralFocus:"0x000000b3",shadowNeutralFocusSoft:"0x000000b3",shadowNeutralText:"0x000000ff",shadowInverse:"0x000000b3",shadowInverseFocus:"0x000000b3",shadowInverseFocusSoft:"0x000000b3",shadowInverseText:"0x000000ff",shadowBrand:"0x000000b3",shadowBrandFocus:"0x000000b3",shadowBrandFocusSoft:"0x000000b3",shadowBrandText:"0x000000ff"},font:[],layout:{columnCount:10,focusScale:1.2,gutterX:20,gutterY:20,marginX:150,marginY:150,safe:50,screenW:1920,screenH:1080},radius:{none:0,xs:2,sm:4,md:8,lg:16,xl:24},spacer:{none:0,xxs:2,xs:4,sm:8,md:10,lg:20,xl:30,xxl:40,xxxl:50},stroke:{none:0,sm:2,md:4,lg:6,xl:8},typography:{display1:{fontFamily:"Arial",fontSize:75,lineHeight:85,fontWeight:500,verticalAlign:"middle",textBaseline:"bottom"},display2:{fontFamily:"Arial",fontSize:50,lineHeight:60,fontWeight:500,verticalAlign:"middle",textBaseline:"bottom"},display3:{fontFamily:"Arial",fontSize:56,fontWeight:400,lineHeight:68,verticalAlign:"middle",textBaseline:"bottom"},display4:{fontFamily:"Arial",fontSize:48,fontWeight:400,lineHeight:64,verticalAlign:"middle",textBaseline:"bottom"},headline1:{fontFamily:"Arial",fontSize:35,fontWeight:500,lineHeight:48,verticalAlign:"middle",textBaseline:"bottom"},headline2:{fontFamily:"Arial",fontSize:30,fontWeight:500,lineHeight:40,verticalAlign:"middle",textBaseline:"bottom"},headline3:{fontFamily:"Arial",fontSize:25,fontWeight:500,lineHeight:36,verticalAlign:"middle",textBaseline:"bottom"},body1:{fontFamily:"Arial",fontSize:25,fontWeight:300,lineHeight:40,verticalAlign:"middle",textBaseline:"bottom"},body2:{fontFamily:"Arial",fontSize:22,fontWeight:300,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},body3:{fontFamily:"Arial",fontSize:20,fontWeight:300,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},button1:{fontFamily:"Arial",fontSize:25,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},button2:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},callout1:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},caption1:{fontFamily:"Arial",fontSize:15,fontWeight:500,lineHeight:24,verticalAlign:"middle",textBaseline:"bottom"},tag1:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:24,verticalAlign:"middle",textBaseline:"bottom"},footnote1:{fontFamily:"Arial",fontSize:22,fontWeight:300,lineHeight:30,verticalAlign:"middle",textBaseline:"bottom"},subtitle1:{fontFamily:"Arial",fontSize:32,fontWeight:400,lineHeight:36,verticalAlign:"middle",textBaseline:"bottom"},subtitle2:{fontFamily:"Arial",fontSize:28,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},navigation:{fontFamily:"Arial",fontSize:28,fontWeight:400,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"}},componentConfig:{Keyboard:{base:{keyProps:{delete:{title:null,icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAAAXNSR0IArs4c6QAACmpJREFUeF7tnVmoZUcVhv/feY4gBEVEH/KgCCZxCK2itNo4xQQH+kUN0TjEiDGKKBqnaExwBjUaR6KY+NQgiQkOMSYhYEScIopGJOqDE2hHjfP0y4p1Oqdv33v2qr32Prv2Paug6Ye7Vu2qv75TtWvtGohMqUBAAQZ80zUVQAKUEIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypfPsAJJ0NYC92XRHKPB3AAfLv18BuBLAFSR/NKZWswJI0vkA3jCmILsw75sAvIfkR8eo22wAknQSgMvGEGFD8vwxgFeQvGrI+s4CIEnHAPgugHsMWfkNzevDAM4i+Z8h6t88QJLuXOB5yBAVzjxuVeBaAM8ieXNUjzkAdAmA50Yrmv5HKPATACeQ/GNEm6YBkvRyANblZhpHAXsfekpkOGsWIEmPAHA9gDuOo13mWhS4gOSZfdVoEiBJ9wFwA4D7961Y+lUpsK/v7KxVgL4K4ElOCS4l+Uyn7a41k3Q0gMcC2ANgH4CHV1T2OyStx69OzQEk6TwAZztr8lMAx5P8s9N+Y8wk2cTjfQDu66z080h+zml7yKwpgCSdCOByZyX+BuBRJH/otN84M0kWN/s0gOc4Kv8Nko922B1m0gxAkh4I4AcVwcL9JA/UVnjT7CXdHYD9yEzfVUkAjib5uxqNmgCoBAu/CeBhzsJ/kORZTtuNN5Nk70bXAZ0Hy59G8qIawVoB6LMAnu8suE3tH0/y3077NAMg6esAuoaoC0la7M2dJgdI0ssAXOgs8W8BHEvS/s9UoYCkdwN4bYfL5STto7U7TQpQZbDQehzreawHylSpgKSTAVza4XYDyeNqsp4MoB7BwteQfH9N5dL2NgWK3l0vyAdJWhDXnSYBSNLtANh3GO/KwgMk97trlYbbKiDJPpzea5U8JKuYqDIeql0kvQPAG5352ZLMR5L8q9M+zXZQYFcAJOnJAL7sbGWLMFuk2SLOmYIKzB6gEiz8HoB7O7U4meQXnLZp1qGApD8BuOcsh7AewcL3kuyadg4OjSSbhRxH0j4BjJok2Ufga0j+YdQHlcznDlBNsPAa+xpP8r/rEHbxjAKPbRuyHvKFY0Ik6QUALOprPfIT1gHRbAGSdDoA77aSX5Zg4e8nhGfx6FEgWoJn8Zy1QCTplq5vjc3NwnoEC/eQ/HYD8IwC0TbwrA2i2QHUI1h4JskLGoJnUIhWwLMWiGYFkCSLMX2t5WDhlneeLm5Dw5kDntEhkmRhEVvesWNqZgiTdC6AN3W1Svn72oOFkuxF+WcVIQUrai+IKuA5BBHJ453auc1mA1AJFn7Jsf7EKj9ZsLBHw1ZDtI5neAmaBUBzCxaO2cBj5u2FZtlO0l8A3K3ZIaxHsPB8kt5vYn00c/mM0dBj5OmqzAqjOQDUfLBwJ32HbPAh84pCM5seSNJLAHzcWeFJgoVdZRui4YfIo6ucff8uyVY03LW5IawyWPgvW5u77mChV/QIABFfb/kidk0CVKbDth3Huw35dJLeniqiV2/fniDYx1f7vlWTeoUFah6wZQhrqwcqwUKbrtsaH0+6mOQpHsOpbXpCVFPstcJjBZNkmzHv0swQJultAN7iVO375TyafzjtJzcbEaK1w9McQJXBQlvvYmtsfjE5FZUFGAGiSeBpCqDKYKFtmX0qya9Utl0z5gNCNBk8BSA7CtiODNwxjf4trEew8BySNtTNOg0A0aTwtARQTbDQeh3rfawXmn0KQDQ5PC0B9EkAL3LSkAD9X6hWALIJzJ3mNoSdS9I7U3NyuX6zQO+zKOzkEEmaHqDSFdpZM97tOfkSfRvvk0LUDEAFIgseetf85DS+AYgk/bPr1NvRZ2HLg4ektwI4xzmgZCBxYohaBMjWPeenDOcvaIvZ2oez5gAqQ5mtLbb3oa4z+Bb6nTHW1UP92vFIr54vzJ8BcGplGdYKkSRbCXGHSWdh2z1ckp1taGccroxyFt9cznG4iGuDqFmASk9kZxxakNGTckHZBBA1DVCB6BMAXuwhyA4VmGL/+05l6zlsbdt7DJmXU0uXmSQ7JvD2zQ1hiwJJsotRvlVxXO87SU5+heUYDT5Gni5KVhg1D1DphWqCjOYy6RlAYzb0mHn3gWkWABWIaoKMubHwSBpGebGWZNdc2vmUO6a1BhJXFUSSff/yLuOYamvzzwEcVfFr7tWwPXqi6uN2PXWYG0C1Qca1n8RaDlewl3kPRL3gWXo/XBwo1dXWdk/a3jEOnJoVQGUoqw0yvpLkh7oUHvLvTohC8FRANBo8pT3sxLeVJ/M2M4QtiVYTZJzkNPoOiAaBxwHRqPDMFqBS8Jog4yT3YewA0aDwrIBodHhmDVApvG0mtO3PnjTJjTxbIBoFnm0gWgs8pQ06lxY3N4QtCWZBRgPDezdnHvPr+alV2EiaL0DlF2Dbn20bdB40XtHwQ5nOHqAC0SyCjEM1Wkv57AqACkRvBvB2p7hrDzI6yzU7s90EUPNBxtnR4SjwrgGo9EK1Qca8cM4ByU4mkuz++F93ZHELyZX3iW31n+S+sKWZWfNBxkCbNeUq6ekArugo1I0kH1xT8EkBKj1R80HGGkFbtZVkZ3bb2d2r0tUkn1hTh8kBKhB9DMBLnQWfJMjoLFuTZpJsO/ONAB7UUcBLSHqvX781q1YAqg0yfoDkq5psrQYLJeldAF7nKFr1x+wmACq9kAUZLazvvTV4P8kDDlE22kTSQ4uuK9dCF5HuR/I3NYI1A1CBaB+AK50VsAMj7TJeixNl2kYBSccCsB/ZMQ6Brif5GIfdYSZNAVQg8rzsLSphl/Hapby2LDZTUaBcq/56ALb1fOVxLkuinULy4loRmwOoQGQX7T7DWZnPk3y203bXmkl6AIA91isDOBGADV3e1HsJbasA1QYZvUKl3fYKPI2knXFQnZoEqPRCNUHG6oqnwyEFLiJ5Wl89mgWoQFQTZOyrwSb7WUztcSRtu0+v1DRABaKPADijV+3SaZUCNgE5geTNEZnmAFBtkDGix6b4Xld2BNvJcaHUPEClF6oNMoZE2eXOtm3q1ZFha1mfWQBUINoL4Kqurbm7vPEj1bOAqx3udW0kk62+swGoQHQ2gPOGFGAD8roJgF0t+qkx6jorgApElwE4aQwxZp6n3YNxsPyzA7yst/4iSdvEMFqaHUCjKZEZ91IgAeolWzotFEiAkoWQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnT+H0jPT81J3xWWAAAAAElFTkSuQmCC"}}}}}};function zl(){const t=new URLSearchParams(window.location.search).get("disableBG")==="true";let e,r,s,o=0;const i=1,a={duration:750,easing:"ease-in-out"},l={alpha:i,color:4294967295};sa(()=>{if(t){s.src="",s.colorLeft=255,s.colorRight=0;return}});function d(f){if(t){s.src="",s.colorLeft=255,s.colorRight=0;return}if(typeof f!="string"){e.color=f,e.src="",e.alpha=1,o=1,r.alpha=0,s.alpha=0;return}else e.color=4294967295,s.alpha=1;if(o===0){e.src=f,o=1;return}if(o===1){r.src=f,o=2,r.alpha=0,r.animate({alpha:i},a).start(),e.animate({alpha:0},a).start();return}o===2&&(e.src=f,o=1,e.alpha=0,e.animate({alpha:i},a).start(),r.animate({alpha:0},a).start())}return We(qe(Ul,f=>{d(f)},{defer:!0})),E(z,{width:1920,height:1080,zIndex:-5,get children(){return[E(z,{ref(f){var h=e;typeof h=="function"?h(f):e=f},style:l}),E(z,{ref(f){var h=r;typeof h=="function"?h(f):r=f},style:l,alpha:0}),E(z,{ref(f){var h=s;typeof h=="function"?h(f):s=f},src:"./assets/hero-mask-inverted.png",get color(){return ya(u.color.materialBrand)},width:1920,height:1080})]}})}function Yt(n){if(!n||!n[Symbol.iterator])throw new Error("objectFromEntries requires a single iterable argument");const t={};for(const[e,r]of n)t[e]=r;return t}const Wl=["focus","disabled"],Hl=["brand","inverse","neutral"];function D({themeKeys:n,base:t,modes:e={},tones:r={},themeStyles:s,modeKeys:o=Wl,toneKeys:i=Hl},a=!1){const l=(y,x,A)=>{const w=i.map(m=>{var T,_;const b={};return new Set([].concat.apply([],[(T=y==null?void 0:y[m])!=null?T:{},(_=x==null?void 0:x[m])!=null?_:{}].map(Object.keys))).forEach(R=>{var I,C,M;o.includes(R)||(b[R]=(M=(I=x==null?void 0:x[m])==null?void 0:I[R])!=null?M:(C=y==null?void 0:y[m])==null?void 0:C[R])}),o.forEach(R=>{var I,C;b[R]={...A[R],...(I=y==null?void 0:y[m])==null?void 0:I[R],...(C=x==null?void 0:x[m])==null?void 0:C[R]}}),[m,b]});return Yt(w)},d=(y,x)=>{const A=o.map(m=>[m,{...y==null?void 0:y[m],...x==null?void 0:x[m]}]);return Yt(A)},f=(y,x)=>({...y,...x.base}),h=y=>Yt(Object.entries(n).filter(([x,A])=>y[A]).map(([x,A])=>[x,y[A]])),p=y=>Yt(Object.entries(y).map(([A,w])=>{const m=h(w);return Object.entries(w).filter(([b,g])=>o.includes(b)).forEach(([b,g])=>{m[b]=h(g)}),[A,m]}));return((y,x,A)=>{const w=p(s);a&&console.log(w);const m=f(y,w);a&&console.log(m);const b=d(x,w);a&&console.log(b);const g=l(A,w,b);return a&&console.log(g),{base:{...m,...b},tones:g}})(t,e,r)}function io(n){const t=n?"width":"height",e=n?"x":"y";return(r,s,o=0,i)=>{var m,b,g,T,_,R;if(!r.children.length)return;const a=r.gap||0,l=r.scroll||"auto";let d=(b=(m=r._targetPosition)!=null?m:r[e])!=null?b:0;r.offset=(g=r.offset)!=null?g:d;const f=r.offset;s=s||r.children[o];const h=(T=s[e])!=null?T:0,p=(_=s[t])!=null?_:0,v=i===void 0?"none":o>i?"incremental":"decremental";let y=d;const[x,A]=Vl(n,r),w=(I,C)=>Math.abs(d)+A<I+C;if(l==="auto")r.scrollIndex!=null&&r.scrollIndex>=0?r.selected>=r.scrollIndex?y=v==="incremental"?d-p-a:d+p+a:v==="decremental"&&r.selected===r.scrollIndex-1&&(y=d+p+a):(w(x.position,x.size)||h<Math.abs(d))&&(y=-h+f);else if(l==="always"||l==="edge"&&v==="decremental"&&Math.abs(d)>h)y=-h+f;else if(l==="edge"&&v==="incremental"&&w(h,p))y=d-p-a;else if(l==="edge"&&v==="none"){let I=0;const C=w(h,p);for(;I<r.children.length&&C;){const M=r.children[I++];if(M.skipFocus)continue;const S=(R=M[t])!=null?R:0;d-=S+a}y=d}r[e]!==y&&(r[e]=y,r._targetPosition=y)}}function Vl(n,t){var r,s,o,i,a,l;let e;for(let d=t.children.length-1;d>=0;d--)if(!t.children[d].skipFocus){e=t.children[d];break}return n?[{position:(r=e.x)!=null?r:0,size:(s=e.width)!=null?s:0},(o=t.width)!=null?o:0]:[{position:(i=e.y)!=null?i:0,size:(a=e.height)!=null?a:0},(l=t.height)!=null?l:0]}function Oe(...n){const t=n.filter(e=>typeof e=="function");if(t.length!==0)return t.length===1?t[0]:function(...e){let r;for(const s of t)if(r=s.apply(this,e),r===!0)return r;return r}}function ao(){if(!this||this.children.length===0)return!1;let n=this.selected?this.children[this.selected]:this.selectedNode;for(;n!=null&&n.skipFocus;)this.selected++,n=this.children[this.selected];return n instanceof Be?(n.setFocus(),!0):!1}function pr(n){return function(){var o,i,a;const t=this.children.length,e=this.wrap,r=this.selected||0;if(t===0)return!1;if(n==="right"||n==="down")do if(this.selected=(this.selected||0)%t+1,this.selected>=t){if(!e){this.selected=void 0;break}this.selected=0}while((o=this.children[this.selected])!=null&&o.skipFocus);else if(n==="left"||n==="up")do if(this.selected=(this.selected||0)%t-1,this.selected<0){if(!e){this.selected=void 0;break}this.selected=t-1}while((i=this.children[this.selected])!=null&&i.skipFocus);if(this.selected===void 0&&(this.selected=r,(a=this.children[this.selected])!=null&&a.states.has("focus")))return!1;const s=this.children[this.selected];if(k(s instanceof Be),this.onSelectedChanged&&this.onSelectedChanged.call(this,this,s,this.selected,r),this.plinko){const l=this.children[r];k(l instanceof Be);const d=l.selected||0;s.selected=d<s.children.length?d:s.children.length-1}return s.setFocus(),!0}}function Xl(n=1){const t=u.layout.screenW,e=u.layout.columnCount,r=u.layout.marginX,s=u.layout.gutterX;(n<1||n>e)&&(console.error("getWidthByUpCount expects an upCount between 1 & ".concat(e,", received ").concat(n,". Defaulting to upCount 1.")),n=1);const o=t-r*2,i=(n-1)*s;return(o-i)/n}function $l(n,t){const e=Ie.createTexture("ImageTexture",{src:n});return t.reduce((r,s)=>{const{x:o,y:i,width:a,height:l}=s;return r[s.name]=Ie.createTexture("SubTexture",{texture:e,x:o,y:i,width:a,height:l}),r},{})}const{Artwork:{defaultTone:Ld,...Gl}={themeStyles:{}}}=u==null?void 0:u.componentConfig,Yl={themeKeys:{fallbackSrc:"fallbackSrc",fillColor:"fillColor",scale:"imageScale",pivotX:"imageScalePivotX",pivotY:"imageScalePivotY",borderRadius:"radius"},base:{fallbackSrc:void 0,fillColor:u.color.overlay,gradientColor:u.color.material,pivotX:.5,pivotY:.5,scale:void 0,borderRadius:u.radius.md},themeStyles:Gl};D(Yl);const{Badge:{defaultTone:Kl,...In}={themeStyles:{}}}=u.componentConfig,Ql={themeKeys:{color:"backgroundColor",borderRadius:"radius",gap:"contentSpacing"},base:{color:u.color.fillInverseSecondary,borderRadius:u.radius.sm,border:{color:u.color.strokeInverse,width:u.stroke.sm},gap:u.spacer.xs,display:"flex",justifyContent:"flexStart",alignItems:"center"},tones:{inverse:{color:u.color.fillNeutralSecondary,borderRadius:u.radius.sm,border:{color:u.color.strokeInverseSecondary,width:u.stroke.sm}},brand:{color:u.color.fillBrand,borderRadius:u.radius.sm,border:{color:u.color.strokeInverseSecondary,width:u.stroke.sm}}},themeStyles:In},jl={themeKeys:{color:"textColor"},base:{...u.typography.tag1,color:u.color.textNeutral,lineHeight:u.typography.tag1.lineHeight+12,marginRight:u.spacer.md+u.stroke.sm,marginLeft:u.spacer.md+u.stroke.sm},tones:{inverse:{color:u.color.textInverse},brand:{color:u.color.textNeutral}},themeStyles:In},ql={themeKeys:{color:"iconColor"},base:{color:u.color.textNeutral},tones:{inverse:{color:u.color.textInverse},brand:{color:u.color.textNeutral}},themeStyles:In},Zl=D(Ql),Jl=D(ql),ec=D(jl),Fd={tone:Kl||"neutral",Container:Zl,Icon:Jl,Text:ec},{Button:{defaultTone:tc,...rc}={buttonThemeStyles:{}}}=u==null?void 0:u.componentConfig,{Surface:{surfaceDefaultTone:nc,...sc}={surfaceThemeStyles:{}}}=u==null?void 0:u.componentConfig,Bn={...rc,...sc},oc={themeKeys:{borderRadius:"radius",color:"backgroundColor",justifyContent:"justify",itemSpacing:"contentSpacing"},base:{height:u.typography.button1.lineHeight+u.spacer.xl*2,display:"flex",padding:[u.spacer.xxxl,u.spacer.xl],color:u.color.interactiveNeutral,justifyContent:"center",alignItems:"center",flexBoundary:"fixed",borderRadius:u.radius.sm,contentColor:u.color.fillNeutral},modes:{focus:{color:u.color.interactiveNeutralFocus,contentColor:u.color.fillInverse},disabled:{color:u.color.fillNeutralDisabled}},tones:{inverse:{color:u.color.interactiveInverse},brand:{color:u.color.interactiveBrand,focus:{color:u.color.fillNeutral}}},themeStyles:Bn},ic={themeKeys:{color:"contentColor"},base:{color:u.color.textNeutral},modes:{focus:{color:u.color.textInverse},disabled:{color:u.color.textNeutralDisabled}},tones:{inverse:{color:u.color.fillNeutral},brand:{color:u.color.fillBrand,focus:{color:u.color.fillBrand}}},themeStyles:Bn},ac={themeKeys:{color:"textColor"},base:{color:u.color.textNeutral,...u.typography.button1,textAlign:"center",contain:"none"},modes:{focus:{color:u.color.textInverse},disabled:{color:u.color.textNeutralDisabled}},tones:{inverse:{color:u.color.fillNeutral},brand:{color:u.color.fillBrand,focus:{color:u.color.fillBrand}}},themeStyles:Bn},lc=D(oc),cc=D(ic),uc=D(ac),Nd={tone:tc||nc||"neutral",Container:lc,Content:cc,Text:uc},{Checkbox:{defaultTone:Dd,...lo}={themeStyles:{}}}=u==null?void 0:u.componentConfig,dc={themeKeys:{color:"backgroundColor",borderRadius:"radius",border:"border",justifyContent:"justifyContent"},base:{width:u.spacer.xxl,height:u.spacer.xxl,display:"flex",justifyContent:"center",color:u.color.fillNeutral,alignItems:"center",borderRadius:u.spacer.xxl/4,border:{color:u.color.strokeInverse,width:u.stroke.sm}},modes:{disabled:{alpha:u.alpha.inactive}},tones:{brand:{borderRadius:u.spacer.xxl/4,border:{color:u.color.strokeNeutralSecondary,width:u.stroke.sm},color:u.color.fillNeutralSecondary,checked:{borderRadius:u.spacer.xxl/4,border:{color:u.color.strokeNeutralSecondary,width:u.stroke.sm},color:u.color.fillBrand}},neutral:{borderRadius:u.spacer.xxl/4,border:{color:u.color.strokeNeutralSecondary,width:u.stroke.sm},color:u.color.fillInverseSecondary,checked:{borderRadius:u.spacer.xxl/4,border:{color:u.color.strokeNeutralSecondary,width:u.stroke.sm},color:u.color.fillNeutral}},inverse:{borderRadius:u.spacer.xxl/4,border:{color:u.color.strokeInverseSecondary,width:u.stroke.sm},color:u.color.fillNeutralSecondary,checked:{borderRadius:u.spacer.xxl/4,border:{color:u.color.strokeInverseSecondary,width:u.stroke.sm},color:u.color.fillInverse}}},modeKeys:["focus","disabled","checked"],themeStyles:lo},hc={themeKeys:{width:"checkWidth",height:"checkHeight"},base:{width:u.spacer.lg,height:u.spacer.lg,src:u.asset.check},tones:{neutral:{color:u.color.fillInverse},inverse:{color:u.color.fillNeutral},brand:{color:u.color.fillInverse}},themeStyles:lo};D(dc);D(hc);const{Icon:{defaultTone:Ud,...fc}={themeStyles:{}}}=u==null?void 0:u.componentConfig,pc={themeKeys:{color:"color"},base:{width:100,height:100,color:u.color.fillNeutral},tones:{inverse:{color:u.color.fillInverse},brand:{color:u.color.fillBrand}},themeStyles:fc};D(pc);const{Column:{defaultTone:gc,...mc}={themeStyles:{}}}=u==null?void 0:u.componentConfig,xc={themeKeys:{gap:"itemSpacing",scrollIndex:"scrollIndex",transition:"itemTransition"},base:{display:"flex",flexBoundary:"fixed",flexDirection:"column",gap:u.layout.gutterY,transition:{y:{...u.animation.standardEntrance,duration:u.animation.duration.fast}}},themeStyles:mc},yc=D(xc),Ur={tone:gc||"neutral",Container:yc},co=n=>{const t=pr("up"),e=pr("down"),r=io(!1);return E(z,Ae(n,{get onUp(){return Oe(n.onUp,t)},get onDown(){return Oe(n.onDown,e)},get selected(){return n.selected||0},forwardFocus:ao,get onLayout(){return kt(()=>!!n.selected)()?Oe(n.onLayout,r):n.onLayout},get onSelectedChanged(){return Oe(n.onSelectedChanged,n.scroll!=="none"?r:void 0)},get style(){var s;return[n.style,Ur.Container.tones[(s=n.tone)!=null?s:Ur.tone],Ur.Container.base]}}))},{Input:{defaultTone:vc,...uo}={themeStyles:{}}}=u==null?void 0:u.componentConfig,bc={themeKeys:{borderRadius:"radius",color:"backgroundColor",justifyContent:"justify"},base:{width:Xl(4),height:100,display:"flex",flexDirection:"column",padding:[u.spacer.xxxl,u.spacer.xl],color:u.color.interactiveNeutral,contentColor:u.color.fillInverse,borderRadius:u.radius.sm,marginX:u.spacer.xxxl,actualTitle:""},themeStyles:uo},Ac={themeKeys:{color:"textColor"},base:{textAlign:"left",color:u.color.textNeutral,...u.typography.button1},themeStyles:uo},Tc=D(bc),Sc=D(Ac),Od={tone:vc||"neutral",Container:Tc,Text:Sc},{Key:{defaultTone:wc,...ho}={themeStyles:{}}}=u==null?void 0:u.componentConfig,_c={themeKeys:{keySpacing:"keySpacing",borderRadius:"borderRadius",color:"backgroundColor",justifyContent:"justify",baseWidth:"baseWidth",sizes:"sizes",contentColor:"contentColor"},base:{keySpacing:u.spacer.md,height:u.spacer.md*9,paddingX:u.spacer.md,contentColor:u.color.fillNeutral,sizes:{sm:1,md:2,lg:3,xl:4,xxl:5},padding:[u.spacer.md],baseWidth:u.spacer.md*7,color:u.color.interactiveNeutral,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:u.radius.sm},modes:{focus:{color:u.color.interactiveNeutralFocus,contentColor:u.color.fillInverse},disabled:{color:u.color.fillNeutralDisabled,contentColor:u.color.fillNeutralDisabled}},tones:{inverse:{color:u.color.interactiveInverse,focus:{color:u.color.interactiveInverseFocus,contentColor:u.color.fillNeutral}},brand:{focus:{contentColor:u.color.fillNeutral}}},themeStyles:ho},Ec={themeKeys:{color:"textColor"},base:{color:u.color.textNeutral,...u.typography.headline2,textAlign:"center",contain:"none"},modes:{focus:{color:u.color.textInverse},disabled:{color:u.color.textNeutralDisabled}},tones:{inverse:{focus:{color:u.color.textNeutral}}},themeStyles:ho},Rc=D(_c),Cc=D(Ec),zd={tone:wc||"neutral",Container:Rc,Text:Cc},{Keyboard:{defaultTone:Ic,...fo}={}}=u==null?void 0:u.componentConfig,{Key:{...Bc}={}}=u==null?void 0:u.componentConfig,Mc={themeKeys:{gap:"keySpacing",width:"screenW",marginX:"marginX",keyHeight:"keyHeight"},base:{gap:u.spacer.md,width:u.layout.screenW,display:"flex",marginX:u.layout.marginX,keyHeight:100,flexBoundary:"contain"},themeStyles:fo},kc={themeKeys:{gap:"keySpacing",borderRadius:"borderRadius",color:"backgroundColor",justifyContent:"justify",baseWidth:"baseWidth",sizes:"sizes",contentColor:"contentColor"},base:{gap:u.spacer.md,height:u.spacer.md*9,sizes:{sm:1,md:2,lg:3,xl:4,xxl:5},contentColor:u.color.fillNeutral,padding:[u.spacer.xxxl,u.spacer.xl],baseWidth:u.spacer.md*7,color:u.color.interactiveNeutral,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:u.radius.sm},modes:{focus:{color:u.color.interactiveNeutralFocus,contentColor:u.color.fillInverse},disabled:{color:u.color.fillNeutralDisabled,contentColor:u.color.fillNeutralDisabled}},tones:{inverse:{color:u.color.interactiveInverse,focus:{color:u.color.interactiveInverseFocus,contentColor:u.color.fillNeutral}},brand:{focus:{contentColor:u.color.fillNeutral}}},themeStyles:Bc},Pc={themeKeys:{color:"textColor"},base:{color:u.color.textNeutral,...u.typography.headline2},modes:{focus:{color:u.color.textInverse},disabled:{color:u.color.textNeutralDisabled}},tones:{inverse:{focus:{color:u.color.textNeutral}}},themeStyles:fo},Lc=D(Mc),Fc=D(kc),Nc=D(Pc),Wd={tone:Ic,Container:Lc,Key:Fc,Text:Nc},{Row:{defaultTone:Dc,...Uc}={themeStyles:{}}}=u==null?void 0:u.componentConfig,Oc={themeKeys:{gap:"itemSpacing",scrollIndex:"scrollIndex",transition:"itemTransition"},base:{display:"flex",flexBoundary:"fixed",flexDirection:"row",gap:u.layout.gutterX,transition:{x:{...u.animation.standardEntrance,duration:u.animation.duration.fast}}},themeStyles:Uc},zc=D(Oc),Or={tone:Dc,Container:zc},Wc=n=>{const t=pr("left"),e=pr("right"),r=io(!0);return E(z,Ae(n,{get selected(){return n.selected||0},get onLeft(){return Oe(n.onLeft,t)},get onRight(){return Oe(n.onRight,e)},forwardFocus:ao,get onLayout(){return kt(()=>!!n.selected)()?Oe(n.onLayout,r):n.onLayout},get onSelectedChanged(){return Oe(n.onSelectedChanged,n.scroll!=="none"?r:void 0)},get style(){var s;return[n.style,Or.Container.tones[(s=n.tone)!=null?s:Or.tone],Or.Container.base]}}))},{Label:{defaultTone:Hd,...po}={themeStyles:{}}}=u==null?void 0:u.componentConfig,Hc={themeKeys:{color:"backgroundColor",borderRadius:"radius"},base:{display:"flex",justifyContent:"flexStart",color:u.color.textNeutral,padding:[u.spacer.md,u.spacer.lg],height:u.typography.caption1.lineHeight+u.spacer.md*2,borderRadius:[u.radius.md,u.radius.md,u.radius.md,u.radius.none],neutral:{backgroundColor:u.color.fillNeutral}},tones:{inverse:{color:u.color.fillInverse},brand:{color:u.color.fillBrand,focus:{color:u.color.orange}}},themeStyles:po},Vc={themeKeys:{color:"textColor"},base:{...u.typography.caption1,color:u.color.textInverse,lineHeight:u.typography.caption1.lineHeight+u.spacer.md*2,marginRight:u.spacer.lg,marginLeft:u.spacer.lg},tones:{inverse:{color:u.color.textNeutral},brand:{color:u.color.textNeutral}},themeStyles:po};D(Hc);D(Vc);const{Details:{defaultTone:Vd,...go}={themeStyles:{}}}=u==null?void 0:u.componentConfig,Xc={themeKeys:{alignItems:"alignItems",gap:"contentSpacing",badgeContentSpacing:"badgeContentSpacing",ratingContentSpacing:"ratingContentSpacing"},base:{display:"flex",flexDirection:"row",alignItems:"center",gap:u.spacer.sm,flexBoundary:"contain",badgeContentSpacing:u.spacer.sm,ratingContentSpacing:u.spacer.sm},themeStyles:go},$c={themeKeys:{color:"textColor"},base:{...u.typography.body2,marginRight:u.spacer.lg,color:u.color.textNeutral},tones:{neutral:{disabled:{color:u.color.textNeutralDisabled}},inverse:{color:u.color.textInverse,disabled:{color:u.color.textNeutralDisabled}},brand:{color:u.color.textNeutral,disabled:{color:u.color.textNeutralDisabled}}},themeStyles:go};D(Xc);D($c);const{Rating:{defaultTone:Xd,...Mn}={themeStyles:{}}}=u==null?void 0:u.componentConfig,Gc={themeKeys:{justifyContent:"justifyContent",gap:"contentSpacing"},base:{display:"flex",flexDirection:"row",justifyContent:"flexStart",gap:u.spacer.sm,alignItems:"center"},themeStyles:Mn},Yc={themeKeys:{color:"textColor"},base:{color:u.color.textNeutral,...u.typography.body2},tones:{neutral:{disabled:{color:u.color.textNeutralDisabled}},inverse:{color:u.color.textInverse,disabled:{color:u.color.textNeutralDisabled}},brand:{color:u.color.textNeutral,disabled:{color:u.color.textNeutralDisabled}}},themeStyles:Mn},Kc={themeKeys:{color:"color"},base:{height:u.typography.body2.lineHeight,width:u.typography.body2.lineHeight,color:u.color.fillNeutral,marginRight:u.spacer.sm},themeStyles:Mn};D(Gc);D(Kc);D(Yc);const{Metadata:{defaultTone:$d,...kn}={themeStyles:{}}}=u==null?void 0:u.componentConfig,Qc={themeKeys:{justifyContent:"justifyContent",alpha:"alpha"},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart",flexBoundary:"contain",alpha:u.alpha.primary},modes:{disabled:{alpha:u.alpha.inactive}},themeStyles:kn},jc={themeKeys:{color:"textColor"},base:{maxLines:1,contain:"width",...u.typography.headline3,color:u.color.textNeutral},tones:{neutral:{disabled:{color:u.color.textNeutralDisabled}},inverse:{color:u.color.textInverse,disabled:{color:u.color.textNeutralDisabled}},brand:{color:u.color.textNeutral,disabled:{color:u.color.textNeutralDisabled}}},themeStyles:kn},qc={themeKeys:{color:"textColor"},base:{contain:"width",maxLines:2,...u.typography.body3,color:u.color.textNeutralSecondary},tones:{neutral:{disabled:{color:u.color.textNeutralDisabled}},inverse:{color:u.color.textInverseSecondary,disabled:{color:u.color.textNeutralDisabled}},brand:{color:u.color.textNeutralSecondary,disabled:{color:u.color.textNeutralDisabled}}},themeStyles:kn};D(Qc);D(qc);D(jc);const{ProgressBar:{defaultTone:Gd,...mo}={themeStyles:{}}}=u==null?void 0:u.componentConfig,Zc={themeKeys:{color:"barColor",borderRadius:"radius"},base:{height:u.spacer.md,color:u.color.fillNeutralTertiary,borderRadius:u.radius.xs},tones:{inverse:{color:u.color.fillInverseTertiary}},themeStyles:mo},Jc={themeKeys:{color:"progressColor",borderRadius:"radius"},base:{borderRadius:u.radius.xs,color:u.color.fillNeutral},tones:{inverse:{color:u.color.fillInverse},brand:{color:u.color.fillBrand}},themeStyles:mo};D(Zc);D(Jc);const{Radio:{defaultTone:Yd,...xo}={themeStyles:{}}}=u==null?void 0:u.componentConfig,eu={themeKeys:{borderRadius:"radius",color:"backgroundColor",colorChecked:"backgroundColorChecked"},base:{color:u.color.fillNeutralSecondary,height:u.spacer.xxl+u.stroke.sm*2,width:u.spacer.xxl+u.stroke.sm*2,borderRadius:u.spacer.xxl/2+u.stroke.sm,border:{color:u.color.strokeNeutralSecondary,width:u.stroke.sm}},tones:{inverse:{border:{color:u.color.strokeInverseSecondary,width:u.stroke.sm}},brand:{border:{color:u.color.fillBrand,width:u.stroke.sm}}},modeKeys:["focus","disabled","checked"],themeStyles:xo},tu={themeKeys:{width:"knobWidth",height:"knobHeight",borderRadius:"knobRadius",color:"knobColor",colorChecked:"knobColorChecked"},base:{color:u.color.fillInverse,colorChecked:u.color.fillInverse,width:u.spacer.xxl,height:u.spacer.xxl,borderRadius:u.spacer.xxl/2},tones:{inverse:{color:u.color.fillNeutral}},themeStyles:xo};D(eu);D(tu);const{Tile:{defaultTone:Kd,...wr}={tileThemeStyles:{}}}=u==null?void 0:u.componentConfig,{Surface:{defaultSurfaceTone:Qd,...ru}={surfaceThemeStyles:{}}}=u==null?void 0:u.componentConfig,nu={themeKeys:{alpha:"alpha",paddingYProgress:"paddingYProgress",paddingYBetweenContent:"paddingYBetweenContent",contentSpacingY:"contentSpacingY",borderRadius:"radius"},base:{width:400,height:240,padding:[40,10],paddingYProgress:u.spacer.xl,paddingYBetweenContent:u.spacer.md,contentSpacingY:u.spacer.md,borderRadius:u.radius.md,alpha:u.alpha.primary},modes:{disabled:{alpha:u.alpha.inactive}},themeStyles:{...ru,...wr}},su={themeKeys:{},base:{display:"flex",flexDirection:"column",flexBoundary:"contain",mountY:1},themeStyles:wr},ou={themeKeys:{},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart"},themeStyles:wr},iu={themeKeys:{},base:{width:u.spacer.lg*5,height:u.spacer.xxl+u.spacer.md},themeStyles:wr};D(nu);D(su);D(ou);D(iu);const{Toggle:{defaultTone:jd,...yo}={themeStyles:{}}}=u==null?void 0:u.componentConfig,Se=u.spacer.xl,Le=u.spacer.xs,ve=u.stroke.sm,au={themeKeys:{borderRadius:"strokeRadius",color:"backgroundColor",colorChecked:"backgroundColorChecked"},base:{color:u.color.fillInverseTertiary,colorChecked:u.color.fillNeutral,height:Se+(Le+ve)*2,width:(ve+Le*2+Se)*2,borderRadius:Se/2+Le+ve,border:{color:u.color.fillNeutral,width:ve}},modes:{focus:{},disabled:{borderRadius:Se/2+Le+ve,border:{color:u.color.fillNeutralDisabled,width:ve},color:u.color.fillInverseDisabled,colorChecked:u.color.fillNeutralDisabled}},tones:{inverse:{borderRadius:Se/2+Le+ve,border:{color:u.color.fillInverse,width:ve},color:u.color.fillNeutralTertiary,colorChecked:u.color.fillInverse,disabled:{borderRadius:Se/2+Le+ve,border:{color:u.color.fillInverseDisabled,width:ve},color:u.color.fillNeutralDisabled,colorChecked:u.color.fillInverseDisabled}},brand:{borderRadius:Se/2+Le+ve,border:{color:u.color.fillBrand,width:ve},color:u.color.fillBrandTertiary,colorChecked:u.color.fillBrand,disabled:{borderRadius:Se/2+Le+ve,border:{color:u.color.fillNeutralDisabled,width:ve},color:u.color.fillInverseDisabled,colorChecked:u.color.fillNeutralDisabled}}},themeStyles:yo},lu={themeKeys:{width:"knobWidth",height:"knobHeight",padding:"knobPadding",borderRadius:"knobRadius",color:"knobColor",colorChecked:"knobColorChecked"},base:{color:u.color.fillNeutral,colorChecked:u.color.fillInverse,width:Se,height:Se,borderRadius:Se/2,padding:Le},modes:{focus:{},disabled:{color:u.color.fillNeutralDisabled,colorChecked:u.color.fillInverseDisabled}},tones:{inverse:{color:u.color.fillInverse,colorChecked:u.color.fillNeutral,disabled:{color:u.color.fillInverseDisabled,colorChecked:u.color.fillNeutralDisabled}},brand:{color:u.color.fillBrand,colorChecked:u.color.fillInverse,disabled:{color:u.color.fillNeutralDisabled,colorChecked:u.color.fillInverseDisabled}}},themeStyles:yo};D(au);D(lu);const cu={color:255,height:180,width:330,x:1900,y:6,mountX:1,alpha:.8,zIndex:100},he={x:10,fontSize:20,textColor:4143380223},Kt={fontSize:22,textColor:4143380223},[uu,du]=W(0),[hu,fu]=W(0),[pu,gu]=W(99),[mu,xu]=W(0),[yu,vu]=W(""),[bu,Au]=W(""),[Tu,Su]=W(""),[wu,_u]=W(""),[Eu,Ru]=W(0),[Cu,Iu]=W(0);let os=0,is=0;const ne=14;function Qt(n){return(n/1024/1024).toFixed(2)+" Mb"}const Bu=n=>{n&&(du(n),gu(t=>Math.min(n,t)),xu(t=>Math.max(n,t)),is+=n,os++,fu(Math.round(is/os)))};function Mu(n){const t=n.txMemManager.getMemoryInfo();vu(Qt(t.criticalThreshold)),Au(Qt(t.targetThreshold)),Su(Qt(t.renderableMemUsed)),_u(Qt(t.memUsed)),Ru(t.renderableTexturesLoaded),Iu(t.loadedTextures)}let zr=0;function ku(n){n.renderer.on("fpsUpdate",(t,e)=>{const r=typeof e=="number"?e:e.fps;r>5&&(Bu(r),zr%10===0&&(Mu(t.stage),zr=0),zr++)})}const Pu=n=>E(z,Ae(n,{style:cu,get children(){return[E(z,{y:6,get children(){return[E(K,{style:he,children:"FPS:"}),E(K,{style:Kt,x:90,get children(){return uu().toString()}})]}}),E(z,{y:6,x:160,get children(){return[E(K,{style:he,children:"AVG:"}),E(K,{style:Kt,x:100,get children(){return hu().toString()}})]}}),E(z,{x:0,y:26,get children(){return[E(K,{style:he,children:"MIN:"}),E(K,{style:Kt,x:90,get children(){return pu().toString()}})]}}),E(z,{x:160,y:26,get children(){return[E(K,{style:he,children:"MAX:"}),E(K,{style:Kt,x:100,get children(){return mu().toString()}})]}}),E(z,{display:"flex",flexDirection:"column",y:58,gap:4,get children(){return[E(z,{height:ne,get children(){return[E(K,{fontSize:ne,style:he,children:"criticalThreshold:"}),E(K,{fontSize:ne,style:he,x:230,get children(){return yu()}})]}}),E(z,{height:ne,get children(){return[E(K,{fontSize:ne,style:he,children:"targetThreshold:"}),E(K,{fontSize:ne,style:he,x:230,get children(){return bu()}})]}}),E(z,{height:ne,get children(){return[E(K,{fontSize:ne,style:he,children:"renderableMemUsed:"}),E(K,{fontSize:ne,style:he,x:230,get children(){return Tu()}})]}}),E(z,{height:ne,get children(){return[E(K,{fontSize:ne,style:he,children:"memUsed:"}),E(K,{fontSize:ne,style:he,x:230,get children(){return wu()}})]}}),E(z,{height:ne,get children(){return[E(K,{fontSize:ne,style:he,children:"renderableTexturesLoaded:"}),E(K,{fontSize:ne,style:he,x:230,get children(){return Eu()}})]}}),E(z,{height:ne,get children(){return[E(K,{fontSize:ne,style:he,children:"loadedTextures:"}),E(K,{fontSize:ne,style:he,x:230,get children(){return Cu()}})]}})]}})]}})),fn={Column:{flexDirection:"column",display:"flex",width:140,height:600,y:360,gap:20,zIndex:101,transition:{x:{duration:250,easing:"ease-in-out"}},x:8,focus:{width:500,x:u.layout.marginX}},Gradient:{zIndex:99,color:255,src:"./assets/sidenav.png",alpha:0,width:1200,height:1080,focus:{alpha:1},transition:{alpha:!0}},NavButton:{zIndex:102,height:70,width:100,borderRadius:8,focus:{color:1111638783},active:{width:328,height:70}}},Lu="/solid-demo-app/",Fu=[{name:"experiment",width:81,height:100,x:0,y:0},{name:"trending",width:100,height:56,x:81,y:0},{name:"tv",width:100,height:68,x:181,y:0},{name:"movie",width:94,height:100,x:282,y:0}];function Nu(n){const t=$l(Lu+"assets/icons_white.png",Fu);return E(z,Ae(n,{get texture(){return t[n.name]},get width(){return t[n.name].props.width},get height(){return t[n.name].props.height},get x(){return(100-(t[n.name].props.width||0))/2},get y(){return(100-(t[n.name].props.height||0))/2}}))}function jt(n){return E(z,Ae(n,{forwardStates:!0,get style(){return fn.NavButton},get children(){return[E(z,{y:-16,get children(){return E(Nu,{scale:.5,get name(){return n.icon}})}}),E(K,{style:{fontSize:38,x:116,y:18,height:50,alpha:0,active:{alpha:1}},get children(){return n.children}})]}}))}function Du(n){let t;const e=Cn();function r(){t.states.add("focus"),this.children.forEach(i=>i.states.add("active")),this.children[this.selected||0].setFocus()}function s(){t.states.remove("focus"),this.selected=0,this.children.forEach(i=>i.states.remove("active"))}function o(i){if(Ga(()=>i)())return n.focusPage();e(i)}return[E(z,{flexItem:!1,width:300,height:150,x:30,y:15,zIndex:105,get alpha(){return n.showWidgets?1:0},get children(){return[E(K,{x:80,fontSize:28,color:4143380036,children:"Built With:"}),E(z,{y:22,src:"./assets/solidWord.png",width:280,height:52}),E(z,{x:0,y:110,src:"./assets/tmdb.png",width:80,height:41}),E(K,{x:90,y:110,contain:"width",width:160,fontSize:12,color:4143380036,children:"This product uses the TMDB API but is not endorsed or certified by TMDB."})]}}),E(co,Ae(n,{onFocus:r,onBlur:s,get style(){return fn.Column},scroll:"none",get children(){return[E(jt,{onEnter:()=>o("/browse/all"),icon:"trending",children:"Trending"}),E(jt,{icon:"movie",onEnter:()=>o("/browse/movie"),children:"Movies"}),E(jt,{icon:"tv",onEnter:()=>o("/browse/tv"),children:"TV"}),E(jt,{icon:"experiment",onEnter:()=>o("/examples"),children:"Examples"})]}})),E(z,{skipFocus:!0,ref(i){var a=t;typeof a=="function"?a(i):t=i},get style(){return fn.Gradient}})]}const Uu=n=>{fl({Announcer:["a"],Menu:["m"],Escape:["Escape",27],Backspace:["Backspace",8],Left:["ArrowLeft",37],Right:["ArrowRight",39],Up:["ArrowUp",38],Down:["ArrowDown",40],Enter:["Enter",13]}),Dl();const t=Al();t.enabled=!1;const e=Cn();let r,s;ku({renderer:Ie});function o(){return r.states.has("focus")?!1:(s=Sr(),r.setFocus())}const[i,a]=W(!0),l=Zs(),d=["/browse","/entity"];return We(()=>{const f=l.pathname;let h=d.some(p=>f.startsWith(p));f==="/"&&(h=!0),a(h)}),E(z,{ref(f){var h=window.APP;typeof h=="function"?h(f):window.APP=f},onAnnouncer:()=>t.enabled=!t.enabled,onLast:()=>history.back(),onMenu:()=>e("/"),style:{width:1920,height:1080},onBackspace:o,onLeft:o,onRight:()=>r.states.has("focus")&&s.setFocus(),get children(){return[E(zl,{}),E(Pu,{mountX:1,x:1910,y:10,get alpha(){return i()?1:0}}),kt(()=>n.children),E(Du,{ref(f){var h=r;typeof h=="function"?h(f):r=f},focusPage:()=>s.setFocus(),get showWidgets(){return i()}})]}})},Ou=new URLSearchParams(window.location.search),zu=Ou.get("roundPoster")!=="false",gr={Page:{width:1920,height:1080},headlineText:{width:1200,height:240,x:360,y:455,contain:"both",fontSize:66,textAlign:"center"},headlineSubText:{width:960,height:170,x:530,y:655,contain:"both",fontSize:48,textAlign:"center"},itemsContainer:{width:u.layout.screenW,height:800,y:560,x:0,zIndex:2},Thumbnail:{borderRadius:zu?16:0,width:185,height:278,scale:1,zIndex:2,transition:{scale:{duration:250,easing:"ease-in-out"}},border:{width:0,color:0},focus:{scale:1.1,border:{color:4294967142,width:8}}},FocusRing:{borderRadius:16,width:194,height:286,y:-5,x:-5,zIndex:-1},FPS:{color:255,height:42,width:140,x:20,y:20,zIndex:100},FPSLabel:{x:10,y:0,fontSize:36,textColor:4294967295},FPSValue:{x:90,y:0,fontSize:36,textColor:4294967295},showHeadline:{x:70,y:20},headlineBlur:{width:1920,height:150,x:0,y:0,zIndex:14,alpha:.9,color:255},RowTitle:{height:60,width:300,marginBottom:-40,fontSize:36,color:4042322175,zIndex:2},Row:{display:"flex",justifyContent:"spaceBetween",height:300},Column:{display:"flex",flexDirection:"column",justifyContent:"flexStart",flexBoundary:"contain",gap:64,width:u.layout.screenW-2*u.layout.marginX,x:u.layout.marginX+u.layout.gutterX,y:48,transition:{y:{duration:250,easing:"ease-in-out"}},zIndex:2},Rect:{width:250,height:100,y:10,x:300,color:65535},peopleBio:{...u.typography.body1,fontFamily:"Roboto",fontWeight:"normal",contain:"both",width:780,height:340}},as={width:386,height:136,color:1901898751,focus:{color:1513726719},disabled:{color:689783807}},qd={fontSize:32,contain:"width",textAlign:"center",mountY:-.35,color:4294967295,height:as.height,width:as.width,focus:{fontSize:40},disabled:{color:2425393407}};function Wu(n){function t(e){e.color=4294967295}return E(z,Ae(n,{color:16711935,onLoad:t,onFail:e=>e.src="failback.png",get style(){return gr.Thumbnail}}))}function Hu(n){const[t,e]=pa(n,["items"]);return E(Wc,Ae(e,{get style(){return gr.Row},get children(){return E(ma,{get each(){return t.items},children:r=>E(Wu,r)})}}))}const Vu="eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIyZDE4YjEwMTA0YjdiZTlkNjFiMWYwYjVlMGEwNzM2OCIsInN1YiI6IjYwZTVjMTdlNGNhNjc2MDA3NTA4Njc3MSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.D_nqH9kd-bhhWzeVsTDPYhHnsUaNAuyAa6YATmKHqsA",Xu="https://api.themoviedb.org/3";let vo,bo;const $u="w185",Gu={headers:{"Content-Type":"application/json",Authorization:"Bearer "+Vu}};function Wr(n,t=$u){return bo+t+n}function Yu(n,t={}){return vo?pn(n,t):Ao().then(()=>pn(n,t))}function pn(n,t={}){return fetch(Xu+n,{...Gu,...t}).then(e=>e.json())}function Ao(){return pn("/configuration").then(n=>{var t;return vo=n,bo=(t=n.images)==null?void 0:t.secure_base_url,n})}const Ku={get:Yu,loadConfig:Ao};function Qu(n,t){return n.length>t?n.substring(0,t-3)+"...":n}function ju(n,t=7){let e=[];for(let r=0,s=n.length;r<s;r+=t)e.push(n.slice(r,r+t));return e}function qu(n=[]){return n.map(t=>({src:Wr(t.poster_path||t.profile_path),tileSrc:Wr(t.backdrop_path||t.profile_path,"w300"),backdrop:Wr(t.backdrop_path,"w1280"),href:"/entity/".concat(t.media_type||"people","/").concat(t.id),shortTitle:Qu(t.title||t.name,30),title:t.title||t.name,item:t,entityInfo:{type:t.media_type||"people",id:t.id},heroContent:{title:t.title||t.name,description:t.overview}}))}let Hr=new Map;const qt=new Map;function Zu(n){return t=>{const e="/trending/".concat(n,"/week?page=").concat(t);if(Hr.has(e))return Hr.get(e);let r=Ku.get(e).then(s=>{let o=s.results.filter(l=>!l.adult),i=(qt.has(n)?qt.get(n):[]).concat(qu(o)),a=ju(i);return a[a.length-1].length<7?qt.set(n,a.pop()):qt.delete(n),a});return Hr.set(e,r),r}}function Ju(n){const[t,e]=W([]),[r,s]=W(1),[o,i]=W(!1),[a]=Bs(r,n);return tn(()=>{const l=a();l&&vn(()=>{l.length===0&&i(!0),e(d=>[...d,...l])})}),{pages:t,page:r,setPage:s,setPages:e,end:o,setEnd:i}}const _r=900,ed={display:"flex",flexDirection:"column",flexBoundary:"fixed",width:_r,height:220,gap:16},td={...u.typography.display2,fontFamily:"Roboto",fontWeight:700,maxLines:1,width:_r,contain:"width"},rd=n=>E(K,Ae(n,{style:td})),nd={...u.typography.body1,fontFamily:"Roboto",fontWeight:400,lineHeight:32,width:_r,maxLines:3,contain:"width"},sd={fontSize:16,lineHeight:20,marginLeft:13,marginRight:13},od=n=>E(K,Ae(n,{style:nd,get children(){return n.children}})),id=n=>E(z,Ae(n,{style:{color:"0x00000099",borderRadius:8,border:{width:2,color:"0xffffffff"},display:"flex",height:36},get children(){return E(K,{lineHeight:36,style:sd,get children(){return n.children}})}})),ls={...u.typography.body2,fontFamily:"Roboto",fontWeight:400},ad=n=>E(z,{style:{display:"flex",flexDirection:"row",gap:18,width:_r,height:48},get children(){return[E(z,{y:-4,src:"./assets/stars.png",width:188,height:31}),E(z,{y:-4,flexItem:!1,clipping:!0,get width(){return 188*n.voteAverage/10},height:31,get children(){return E(z,{src:"./assets/stars-full.png",width:188,height:31})}}),E(K,{style:ls,get children(){return[kt(()=>n.voteCount)," reviews"]}}),E(K,{style:ls,get children(){return n.metaText}}),E(Os,{get each(){return n.badges},children:t=>E(id,{y:-5,children:t})})]}}),ld=n=>E(z,Ae({id:"contentBlock",style:ed},n,{get children(){return[E(rd,{get children(){return n.content.title}}),E(od,{get children(){return n.content.description}}),E(Tr,{get when(){return n.content.voteCount},get children(){return E(ad,{get metaText(){return n.content.metaText},get badges(){return n.content.badges},get voteCount(){return n.content.voteCount},get voteAverage(){return n.content.voteAverage}})}})]}})),cs=()=>{const n=Ya(),[t,e]=W(0),[r,s]=W({}),o=Cn(),i=na(()=>0),a=j(()=>Ju(Zu(n.filter||"all"))),l=cn(p=>Ol(p),400),d=cn(p=>s(p||{}),200);We(qe(Sr,p=>{p.backdrop&&l(p.backdrop),p.heroContent&&d(p.heroContent)},{defer:!0}));function f(){this.children[this.selected||0].setFocus(),e((this.y||0)*-1+24);let p=a().pages().length;this.parent.selected=this.parent.children.indexOf(this),(p===0||this.parent.selected&&this.parent.selected>=p-2)&&a().setPage(v=>v+1)}function h(){let p=this.children.find(v=>v.states.has("focus"));return k(p&&p.href),o(p.href),!0}return E(Tr,{get when(){return a().pages().length},get children(){return[E(ld,{y:360,x:162,get content(){return r()}}),E(z,{clipping:!0,get style(){return gr.itemsContainer},get children(){return E(co,{id:"BrowseColumn",plinko:!0,announce:"All Trending - Week",get y(){return t()},scroll:"none",get style(){return gr.Column},get children(){return E(Os,{get each(){return a().pages()},children:(p,v)=>E(Hu,{get autofocus(){return i(v())},items:p,width:1620,onFocus:f,onEnter:h})})}})}})]}})},cd=()=>(()=>{var n=wn("node");return Sa(n,"style",{width:1920,height:1080,color:868483072}),n})(),et="/solid-demo-app/",ud=[{type:"msdf",fontFamily:"Roboto",descriptors:{weight:700},atlasDataUrl:et+"fonts/Roboto-Bold.msdf.json",atlasUrl:et+"fonts/Roboto-Bold.msdf.png"},{type:"msdf",fontFamily:"Roboto",descriptors:{weight:400},atlasDataUrl:et+"fonts/Roboto-Regular.msdf.json",atlasUrl:et+"fonts/Roboto-Regular.msdf.png"},{type:"msdf",fontFamily:"Arial",descriptors:{weight:500},atlasDataUrl:et+"fonts/Roboto-Regular.msdf.json",atlasUrl:et+"fonts/Roboto-Regular.msdf.png"}],dd=xe(()=>me(()=>import("./Grid-Bmti8ww9.js"),[])),hd=xe(()=>me(()=>import("./Portal-NmYkFXra.js"),[])),fd=xe(()=>me(()=>import("./Text-ahqtRWrD.js"),[])),pd=xe(()=>me(()=>import("./Create-Bed1EiuT.js"),[])),gd=xe(()=>me(()=>import("./Viewport-DMyWub0_.js"),[])),md=xe(()=>me(()=>import("./Buttons-Dqr6OPlT.js"),__vite__mapDeps([0,1]))),xd=xe(()=>me(()=>import("./Flex-CuyyR7fp.js"),[])),yd=xe(()=>me(()=>import("./FlexSize-BmQiHvGK.js"),[])),vd=xe(()=>me(()=>import("./FlexColumnSize-Cv4mcr5d.js"),[])),bd=xe(()=>me(()=>import("./FlexColumn-B1Tz4DCR.js"),[])),Ad=xe(()=>me(()=>import("./ButtonsMaterial-CHTnvH6P.js"),[])),Td=xe(()=>me(()=>import("./SuperFlex-DCs43Ou7.js"),[])),Sd=xe(()=>me(()=>import("./Entity-Dc3fE06P.js"),__vite__mapDeps([2,1]))),wd=xe(()=>me(()=>import("./People-C_FSFZog.js"),[])),_d=xe(()=>me(()=>import("./Login-DN7NLOWR.js"),__vite__mapDeps([3,1])));ee.debug=!1;ee.animationsEnabled=!0;ee.fontSettings.fontFamily="Roboto";ee.fontSettings.color=4143380223;ee.fontSettings.fontSize=32;ee.rendererOptions={fpsUpdateInterval:200,fontEngines:[Pa],renderEngine:xn,inspector:La,textureMemory:{criticalThreshold:8e7},numImageWorkers:0,deviceLogicalPixelRatio:window.innerHeight/1080};const{render:Ed}=Ta();Ni(ud);Ed(()=>E(dl,{root:n=>E(Uu,n),get children(){return[E(re,{path:"",component:cs}),E(re,{path:"examples",component:hd}),E(re,{path:"browse/:filter",component:cs}),E(re,{path:"grid",component:dd}),E(re,{path:"text",component:fd}),E(re,{path:"login",component:_d}),E(re,{path:"buttons",component:md}),E(re,{path:"flex",component:xd}),E(re,{path:"create",component:pd}),E(re,{path:"viewport",component:gd}),E(re,{path:"flexsize",component:yd}),E(re,{path:"flexcolumnsize",component:vd}),E(re,{path:"flexcolumn",component:bd}),E(re,{path:"superflex",component:Td}),E(re,{path:"buttonsmaterial",component:Ad}),E(re,{path:"entity/people/:id",component:wd}),E(re,{path:"entity/:type/:id",component:Sd}),E(re,{path:"*all",component:cd})]}}));function Zd(){const n=document.getElementById("video");return n.hidden=!1,setTimeout(()=>n.play(),50),n.focus(),n}function Jd(){const n=document.getElementById("video");return n.hidden=!0,n.pause(),n}export{Hu as A,Jd as B,co as C,Zd as D,zs as E,Os as F,Od as G,zd as H,ma as I,Wd as J,Nd as K,qd as M,Wc as R,Tr as S,K as T,z as V,Cd as __vite_legacy_guard,Bs as a,tn as b,W as c,vn as d,na as e,We as f,sa as g,E as h,gr as i,k as j,ya as k,kt as l,Ae as m,An as n,qe as o,be as p,j as q,Fd as r,Ol as s,u as t,Cn as u,Ku as v,qu as w,Wr as x,Ya as y,ld as z};
//# sourceMappingURL=index-B_1DOSdt.js.map
