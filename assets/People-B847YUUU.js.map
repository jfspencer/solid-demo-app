{"version":3,"file":"People-B847YUUU.js","sources":["../../src/api/providers/people.js","../../src/pages/People.tsx"],"sourcesContent":["import api, { getImageUrl } from \"..\";\nimport { convertItemsToTiles } from \"../formatters/ItemFormatter\";\n\nexport function minutesToHMM(minutes) {\n  const hours = Math.floor(minutes / 60);\n  const remainingMinutes = minutes % 60;\n  return (\n    hours + \"h \" + (remainingMinutes < 10 ? \"0\" : \"\") + remainingMinutes + \"m\"\n  );\n}\n\nfunction justYear(dateString) {\n  const parts = dateString.split(\"-\");\n  return parts[0];\n}\n\nexport function getCredits({ id }) {\n  return api\n    .get(`/person/${id}/combined_credits`)\n    .then(({ cast }) => convertItemsToTiles(cast.slice(0, 7)));\n}\n\nexport function getInfo({ id }) {\n  return api.get(`/person/${id}`).then((data) => ({\n    backgroundImage: getImageUrl(data.profile_path, \"original\"),\n    heroContent: {\n      title: data.title || data.name,\n      description: data.biography,\n    },\n    ...data,\n  }));\n}\n","import {\n  ElementNode,\n  Text,\n  View,\n  Show,\n  assertTruthy,\n} from \"@lightningtv/solid\";\nimport { Column } from \"@lightningtv/solid-ui\";\nimport { useParams } from \"@solidjs/router\";\nimport { createResource, onMount } from \"solid-js\";\nimport { TileRow } from \"../components\";\nimport { setGlobalBackground } from \"../state\";\nimport { useNavigate } from \"@solidjs/router\";\nimport theme from \"theme\";\nimport styles from \"../styles\";\nimport * as provider from \"../api/providers/people\";\n\nconst People = () => {\n  const params = useParams();\n  const navigate = useNavigate();\n\n  const [data] = createResource(() => ({ ...params }), provider.getInfo);\n  const [credits] = createResource(() => ({ ...params }), provider.getCredits);\n\n  const Backdrop = {\n    color: \"#000000\",\n    alpha: 0.8,\n    width: 800,\n    height: 440,\n    x: 130,\n    y: 180,\n    borderRadius: 30,\n  };\n\n  function onEnter(this: ElementNode) {\n    let entity = this.children[this.selected || 0];\n    assertTruthy(entity && entity.href);\n    navigate(entity.href);\n  }\n\n  onMount(() => {\n    setGlobalBackground(\"#333333\");\n  });\n\n  return (\n    <Show when={data()} keyed>\n      <View\n        src={data().backgroundImage}\n        width={400}\n        autosize\n        y={0}\n        x={1800}\n        mountX={1}\n      />\n      <View\n        x={150}\n        y={200}\n        width={800}\n        gap={24}\n        style={styles.Column}\n        zIndex={3}\n      >\n        <Text\n          contain=\"width\"\n          fontFamily={\"Roboto\"}\n          style={theme.typography.display2}\n        >\n          {data().name}\n        </Text>\n        <Text contain=\"both\" style={styles.peopleBio}>\n          {data().biography}\n        </Text>\n      </View>\n      <View style={Backdrop} />\n      <Column y={670} x={140} style={styles.Column} scroll=\"none\">\n        <Show when={credits()}>\n          <Text skipFocus style={styles.RowTitle}>\n            Credits\n          </Text>\n          <TileRow autofocus onEnter={onEnter} items={credits()} />\n        </Show>\n      </Column>\n    </Show>\n  );\n};\n\nexport default People;\n"],"names":["People","params","useParams","navigate","useNavigate","data","createResource","provider","credits","Backdrop","color","alpha","width","height","x","y","borderRadius","onEnter","entity","children","selected","href","onMount","setGlobalBackground","_$createComponent","Show","when","keyed","View","src","backgroundImage","autosize","mountX","gap","style","styles","Column","zIndex","Text","contain","fontFamily","theme","typography","display2","name","peopleBio","biography","scroll","skipFocus","RowTitle","TileRow","autofocus","items"],"mappings":"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"}