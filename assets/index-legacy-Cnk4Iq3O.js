!function(){var e=["defaultTone"],t=["defaultTone"],r=["defaultTone"],n=["surfaceDefaultTone"],o=["defaultTone"],i=["defaultTone"],a=["defaultTone"],s=["defaultTone"],l=["defaultTone"],d=["defaultTone"],u=["defaultTone"],h=["defaultTone"],c=["defaultTone"],f=["defaultTone"],p=["defaultTone"],v=["defaultTone"],g=["defaultSurfaceTone"];function m(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function x(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */x=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),s=new E(n||[]);return o(a,"_invoke",{value:k(e,r,s)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var c="suspendedStart",f="suspendedYield",p="executing",v="completed",g={};function m(){}function y(){}function b(){}var w={};d(w,a,(function(){return this}));var S=Object.getPrototypeOf,A=S&&S(S(N([])));A&&A!==r&&n.call(A,a)&&(w=A);var C=b.prototype=m.prototype=Object.create(w);function T(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(o,i,a,s){var l=h(e[o],e,i);if("throw"!==l.type){var d=l.arg,u=d.value;return u&&"object"==typeof u&&n.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(u).then((function(e){d.value=e,a(d)}),(function(e){return r("throw",e,a,s)}))}s(l.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function k(t,r,n){var o=c;return function(i,a){if(o===p)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var s=n.delegate;if(s){var l=I(s,n);if(l){if(l===g)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===c)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=p;var d=h(t,r,n);if("normal"===d.type){if(o=n.done?v:f,d.arg===g)continue;return{value:d.arg,done:n.done}}"throw"===d.type&&(o=v,n.method="throw",n.arg=d.arg)}}}function I(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,I(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var i=h(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,g;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function B(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(B,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(typeof t+" is not iterable")}return y.prototype=b,o(C,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=d(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,d(e,l,"GeneratorFunction")),e.prototype=Object.create(C),e},t.awrap=function(e){return{__await:e}},T(_.prototype),d(_.prototype,s,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new _(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},T(C),d(C,l,"Generator"),d(C,a,(function(){return this})),d(C,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return s.type="throw",s.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),d=n.call(a,"finallyLoc");if(l&&d){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!d)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),R(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}function y(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(d){return void r(d)}s.done?t(l):Promise.resolve(l).then(n,o)}function b(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){y(i,n,o,a,s,"next",e)}function s(e){y(i,n,o,a,s,"throw",e)}a(void 0)}))}}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function A(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,s=[],l=!0,d=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){d=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw o}}return s}}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function _(e,t){if(e){if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}System.register(["./CoreExtension-legacy-D8kop6D9.js"],(function(y,w){"use strict";var _,k,I,B,R,E,N,F,L,z,M,P,D,O,U,W,Y,j,H,Q,K,$,X,G,V,Z,q,J,ee;return{setters:[e=>{_=e.a,k=e.i,I=e.T,B=e.g,R=e.c,E=e.E,N=e.b,F=e.d,L=e.e,z=e.f,M=e.m,P=e.W,D=e.h,O=e.j,U=e.k,W=e.l,Y=e.S,j=e.B,H=e.n,Q=e.o,K=e.p,$=e.q,X=e.C,G=e.r,V=e.s,Z=e.t,q=e.u,J=e.v,ee=e.w}],execute:function(){var y,te,re,ne=x().mark(ar),oe=document.createElement("style");oe.textContent="html,body,*{padding:0;margin:0}video{position:absolute;top:0;left:0;z-index:2;outline:none}.center-element{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}\n",document.head.appendChild(oe);var ie,ae=(e,t)=>e===t,se=Symbol("solid-proxy"),le=Symbol("solid-track"),de={equals:ae},ue=Qe,he=1,ce=2,fe={owned:null,cleanups:null,context:null,owner:null},pe={},ve=null,ge=null,me=null,xe=null,ye=null,be=0;function we(e,t){var r=me,n=ve,o=0===e.length,i=void 0===t?n:t,a=o?fe:{owned:null,cleanups:null,context:i?i.context:null,owner:i},s=o?e:()=>e((()=>Be((()=>Ge(a)))));ve=a,me=null;try{return He(s,!0)}finally{me=r,ve=n}}function Se(e,t){var r={value:e,observers:null,observerSlots:null,comparator:(t=t?Object.assign({},de,t):de).equals||void 0};return[Oe.bind(r),e=>("function"==typeof e&&(e=e(r.value)),Ue(r,e))]}function Ae(e,t,r){We(Ye(e,t,!0,he))}function Ce(e,t,r){We(Ye(e,t,!1,he))}function Te(e,t,r){ue=Ke;var n=Ye(e,t,!1,he);r&&r.render||(n.user=!0),ye?ye.push(n):We(n)}function _e(e,t,r){r=r?Object.assign({},de,r):de;var n=Ye(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,We(n),Oe.bind(n)}function ke(e,t,r){var n,o,i;2===arguments.length&&"object"==typeof t||1===arguments.length?(n=!0,o=e,i=t||{}):(n=e,o=t,i=r||{});var a=null,s=pe,l=!1,d="initialValue"in i,u="function"==typeof n&&_e(n),h=new Set,c=C((i.storage||Se)(i.initialValue),2),f=c[0],p=c[1],v=C(Se(void 0),2),g=v[0],m=v[1],x=C(Se(void 0,{equals:!1}),2),y=x[0],b=x[1],w=C(Se(d?"ready":"unresolved"),2),S=w[0],A=w[1];function _(e,t,r,n){return a===e&&(a=null,void 0!==n&&(d=!0),e!==s&&t!==s||!i.onHydrated||queueMicrotask((()=>i.onHydrated(n,{value:t}))),s=pe,function(e,t){He((()=>{void 0===t&&p((()=>e)),A(void 0!==t?"errored":d?"ready":"unresolved"),m(t);var r,n=T(h.keys());try{for(n.s();!(r=n.n()).done;){r.value.decrement()}}catch(t){n.e(t)}finally{n.f()}h.clear()}),!1)}(t,r)),t}function k(){var e=ie,t=f(),r=g();if(void 0!==r&&!a)throw r;return me&&!me.user&&e&&Ae((()=>{y(),a&&(e.resolved||h.has(e)||(e.increment(),h.add(e)))})),t}function I(e=!0){if(!1===e||!l){l=!1;var t=u?u():n;if(null!=t&&!1!==t){var r,i=s!==pe?s:Be((()=>o(t,{value:f(),refetching:e})));return(r=i)&&"object"==typeof r&&"then"in r?(a=i,"value"in i?("success"===i.status?_(a,i.value,void 0,t):_(a,void 0,void 0,t),i):(l=!0,queueMicrotask((()=>l=!1)),He((()=>{A(d?"refreshing":"pending"),b()}),!1),i.then((e=>_(i,e,void 0,t)),(e=>_(i,void 0,Ve(e),t))))):(_(a,i,void 0,t),i)}_(a,Be(f))}}return Object.defineProperties(k,{state:{get:()=>S()},error:{get:()=>g()},loading:{get(){var e=S();return"pending"===e||"refreshing"===e}},latest:{get(){if(!d)return k();var e=g();if(e&&!a)throw e;return f()}}}),u?Ae((()=>I(!1))):I(!1),[k,{refetch:I,mutate:p}]}function Ie(e,t=ae,r){var n=new Map,o=Ye((r=>{var o,i=e(),a=T(n.entries());try{for(a.s();!(o=a.n()).done;){var s=C(o.value,2),l=s[0],d=s[1];if(t(l,i)!==t(l,r)){var u,h=T(d.values());try{for(h.s();!(u=h.n()).done;){var c=u.value;c.state=he,c.pure?xe.push(c):ye.push(c)}}catch(f){h.e(f)}finally{h.f()}}}}catch(f){a.e(f)}finally{a.f()}return i}),void 0,!0,he);return We(o),e=>{var r,i=me;i&&((r=n.get(e))?r.add(i):n.set(e,r=new Set([i])),Ne((()=>{r.delete(i),!r.size&&n.delete(e)})));return t(e,o.value)}}function Be(e){if(null===me)return e();var t=me;me=null;try{return e()}finally{me=t}}function Re(e,t,r){var n,o=Array.isArray(e),i=r&&r.defer;return r=>{var a;if(o){a=Array(e.length);for(var s=0;s<e.length;s++)a[s]=e[s]()}else a=e();if(i)return i=!1,r;var l=Be((()=>t(a,n,r)));return n=a,l}}function Ee(e){Te((()=>Be(e)))}function Ne(e){return null===ve||(null===ve.cleanups?ve.cleanups=[e]:ve.cleanups.push(e)),e}function Fe(){return ve}function Le(e,t){var r=ve,n=me;ve=e,me=null;try{return He(t,!0)}catch(o){Ze(o)}finally{ve=r,me=n}}function ze(e){var t=me,r=ve;return Promise.resolve().then((()=>{me=t,ve=r,He(e,!1),me=ve=null}))}function Me(e,t){var r=Symbol("context");return{id:r,Provider:Je(r),defaultValue:e}}function Pe(e){return ve&&ve.context&&void 0!==ve.context[e.id]?ve.context[e.id]:e.defaultValue}function De(e){var t=_e(e),r=_e((()=>qe(t())));return r.toArray=()=>{var e=r();return Array.isArray(e)?e:null!=e?[e]:[]},r}function Oe(){if(this.sources&&this.state)if(this.state===he)We(this);else{var e=xe;xe=null,He((()=>$e(this)),!1),xe=e}if(me){var t=this.observers?this.observers.length:0;me.sources?(me.sources.push(this),me.sourceSlots.push(t)):(me.sources=[this],me.sourceSlots=[t]),this.observers?(this.observers.push(me),this.observerSlots.push(me.sources.length-1)):(this.observers=[me],this.observerSlots=[me.sources.length-1])}return this.value}function Ue(e,t,r){var n=e.value;return e.comparator&&e.comparator(n,t)||(e.value=t,e.observers&&e.observers.length&&He((()=>{for(var t=0;t<e.observers.length;t+=1){var r=e.observers[t],n=ge&&ge.running;n&&ge.disposed.has(r),(n?r.tState:r.state)||(r.pure?xe.push(r):ye.push(r),r.observers&&Xe(r)),n||(r.state=he)}if(xe.length>1e6)throw xe=[],new Error}),!1)),t}function We(e){if(e.fn){Ge(e);var t=be;!function(e,t,r){var n,o=ve,i=me;me=ve=e;try{n=e.fn(t)}catch(a){return e.pure&&(e.state=he,e.owned&&e.owned.forEach(Ge),e.owned=null),e.updatedAt=r+1,Ze(a)}finally{me=i,ve=o}(!e.updatedAt||e.updatedAt<=r)&&(null!=e.updatedAt&&"observers"in e?Ue(e,n):e.value=n,e.updatedAt=r)}(e,e.value,t)}}function Ye(e,t,r,n=he,o){var i={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:ve,context:ve?ve.context:null,pure:r};return null===ve||ve!==fe&&(ve.owned?ve.owned.push(i):ve.owned=[i]),i}function je(e){if(0!==e.state){if(e.state===ce)return $e(e);if(e.suspense&&Be(e.suspense.inFallback))return e.suspense.effects.push(e);for(var t=[e];(e=e.owner)&&(!e.updatedAt||e.updatedAt<be);)e.state&&t.push(e);for(var r=t.length-1;r>=0;r--)if((e=t[r]).state===he)We(e);else if(e.state===ce){var n=xe;xe=null,He((()=>$e(e,t[0])),!1),xe=n}}}function He(e,t){if(xe)return e();var r=!1;t||(xe=[]),ye?r=!0:ye=[],be++;try{var n=e();return function(e){xe&&(Qe(xe),xe=null);if(e)return;var t=ye;ye=null,t.length&&He((()=>ue(t)),!1)}(r),n}catch(o){r||(ye=null),xe=null,Ze(o)}}function Qe(e){for(var t=0;t<e.length;t++)je(e[t])}function Ke(e){var t,r=0;for(t=0;t<e.length;t++){var n=e[t];n.user?e[r++]=n:je(n)}for(t=0;t<r;t++)je(e[t])}function $e(e,t){e.state=0;for(var r=0;r<e.sources.length;r+=1){var n=e.sources[r];if(n.sources){var o=n.state;o===he?n!==t&&(!n.updatedAt||n.updatedAt<be)&&je(n):o===ce&&$e(n,t)}}}function Xe(e){for(var t=0;t<e.observers.length;t+=1){var r=e.observers[t];r.state||(r.state=ce,r.pure?xe.push(r):ye.push(r),r.observers&&Xe(r))}}function Ge(e){var t;if(e.sources)for(;e.sources.length;){var r=e.sources.pop(),n=e.sourceSlots.pop(),o=r.observers;if(o&&o.length){var i=o.pop(),a=r.observerSlots.pop();n<o.length&&(i.sourceSlots[a]=n,o[n]=i,r.observerSlots[n]=a)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Ge(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function Ve(e){return e instanceof Error?e:new Error("string"==typeof e?e:"Unknown error",{cause:e})}function Ze(e,t=ve){throw Ve(e)}function qe(e){if("function"==typeof e&&!e.length)return qe(e());if(Array.isArray(e)){for(var t=[],r=0;r<e.length;r++){var n=qe(e[r]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}function Je(e,t){return function(t){var r;return Ce((()=>r=Be((()=>(ve.context=S(S({},ve.context),{},{[e]:t.value}),De((()=>t.children)))))),void 0),r}}var et=Symbol("fallback");function tt(e){for(var t=0;t<e.length;t++)e[t]()}function rt(e,t){return Be((()=>e(t||{})))}function nt(){return!0}var ot={get:(e,t,r)=>t===se?r:e.get(t),has:(e,t)=>t===se||e.has(t),set:nt,deleteProperty:nt,getOwnPropertyDescriptor:(e,t)=>({configurable:!0,enumerable:!0,get:()=>e.get(t),set:nt,deleteProperty:nt}),ownKeys:e=>e.keys()};function it(e){return(e="function"==typeof e?e():e)?e:{}}function at(){for(var e=0,t=this.length;e<t;++e){var r=this[e]();if(void 0!==r)return r}}function st(...e){for(var t=!1,r=0;r<e.length;r++){var n=e[r];t=t||!!n&&se in n,e[r]="function"==typeof n?(t=!0,_e(n)):n}if(t)return new Proxy({get(t){for(var r=e.length-1;r>=0;r--){var n=it(e[r])[t];if(void 0!==n)return n}},has(t){for(var r=e.length-1;r>=0;r--)if(t in it(e[r]))return!0;return!1},keys(){for(var t=[],r=0;r<e.length;r++)t.push(...Object.keys(it(e[r])));return[...new Set(t)]}},ot);for(var o={},i=Object.create(null),a=e.length-1;a>=0;a--){var s=e[a];if(s)for(var l=Object.getOwnPropertyNames(s),d=function(){var e=l[u];if("__proto__"===e||"constructor"===e)return 1;var t=Object.getOwnPropertyDescriptor(s,e);if(i[e]){var r=o[e];r&&(t.get?r.push(t.get.bind(s)):void 0!==t.value&&r.push((()=>t.value)))}else i[e]=t.get?{enumerable:!0,configurable:!0,get:at.bind(o[e]=[t.get.bind(s)])}:void 0!==t.value?t:void 0},u=l.length-1;u>=0;u--)d()}for(var h={},c=Object.keys(i),f=c.length-1;f>=0;f--){var p=c[f],v=i[p];v&&v.get?Object.defineProperty(h,p,v):h[p]=v?v.value:void 0}return h}var lt=e=>`Stale read from <${e}>.`;function dt(e){var t="fallback"in e&&{fallback:()=>e.fallback};return _e(function(e,t,r={}){var n=[],o=[],i=[],a=0,s=t.length>1?[]:null;return Ne((()=>tt(i))),()=>{var l,d,u=e()||[];return u[le],Be((()=>{var e,t,c,f,p,v,g,m,x,y=u.length;if(0===y)0!==a&&(tt(i),i=[],n=[],o=[],a=0,s&&(s=[])),r.fallback&&(n=[et],o[0]=we((e=>(i[0]=e,r.fallback()))),a=1);else if(0===a){for(o=new Array(y),d=0;d<y;d++)n[d]=u[d],o[d]=we(h);a=y}else{for(c=new Array(y),f=new Array(y),s&&(p=new Array(y)),v=0,g=Math.min(a,y);v<g&&n[v]===u[v];v++);for(g=a-1,m=y-1;g>=v&&m>=v&&n[g]===u[m];g--,m--)c[m]=o[g],f[m]=i[g],s&&(p[m]=s[g]);for(e=new Map,t=new Array(m+1),d=m;d>=v;d--)x=u[d],l=e.get(x),t[d]=void 0===l?-1:l,e.set(x,d);for(l=v;l<=g;l++)x=n[l],void 0!==(d=e.get(x))&&-1!==d?(c[d]=o[l],f[d]=i[l],s&&(p[d]=s[l]),d=t[d],e.set(x,d)):i[l]();for(d=v;d<y;d++)d in c?(o[d]=c[d],i[d]=f[d],s&&(s[d]=p[d],s[d](d))):o[d]=we(h);o=o.slice(0,a=y),n=u.slice(0)}return o}));function h(e){if(i[d]=e,s){var r=C(Se(d),2),n=r[0],o=r[1];return s[d]=o,t(u[d],n)}return t(u[d])}}}((()=>e.each),e.children,t||void 0))}function ut(e){var t=e.keyed,r=_e((()=>e.when),void 0,{equals:(e,r)=>t?e===r:!e==!r});return _e((()=>{var n=r();if(n){var o=e.children;return"function"==typeof o&&o.length>0?Be((()=>o(t?n:()=>{if(!Be(r))throw lt("Show");return e.when}))):o}return e.fallback}),void 0,void 0)}var ht=C(Se(void 0),2),ct=ht[0],ft=ht[1];class pt{constructor(e){A(this,"releaseCallback",void 0),this.releaseCallback=e}}class vt extends pt{constructor(e,t){var r,n;super(e),A(this,"textureMap",new Map),A(this,"zeroReferenceTextureSet",new Set),A(this,"options",void 0),this.options={textureCleanupIntervalMs:null!==(r=t.textureCleanupIntervalMs)&&void 0!==r?r:1e4,textureCleanupAgeThreadholdMs:null!==(n=t.textureCleanupAgeThreadholdMs)&&void 0!==n?n:6e4},setInterval((()=>{var e,t=Date.now(),r=this.options.textureCleanupAgeThreadholdMs,n=T(this.zeroReferenceTextureSet);try{for(n.s();!(e=n.n()).done;){var o=e.value;t-o.lastUpdate>r&&(this.releaseCallback(o.id),this.textureMap.delete(o.id),this.zeroReferenceTextureSet.delete(o))}}catch(i){n.e(i)}finally{n.f()}}),this.options.textureCleanupIntervalMs)}registerTexture(e){var t,r=null===(t=e.options)||void 0===t?void 0:t.id;if(_(r,"Texture must have an id to be registered"),!this.textureMap.has(r)){var n={id:r,nodeRefCount:0,lastUpdate:Date.now()};this.textureMap.set(r,n),this.zeroReferenceTextureSet.add(n)}}incrementTextureRefCount(e){var t,r=null===(t=e.options)||void 0===t?void 0:t.id;_(r,"Texture must have an id to be registered");var n=this.textureMap.get(r);n||(this.registerTexture(e),n=this.textureMap.get(r)),_(n,"Texture must have been registered"),"SubTexture"===e.txType&&this.incrementTextureRefCount(e.props.texture),n.nodeRefCount++,n.lastUpdate=Date.now(),this.zeroReferenceTextureSet.has(n)&&this.zeroReferenceTextureSet.delete(n)}decrementTextureRefCount(e){var t,r=null===(t=e.options)||void 0===t?void 0:t.id;_(r,"Texture must have an id to be registered");var n=this.textureMap.get(r);_(n,"Texture must have been registered"),n.nodeRefCount--,n.lastUpdate=Date.now(),0===n.nodeRefCount&&this.zeroReferenceTextureSet.add(n),"SubTexture"===e.txType&&this.decrementTextureRefCount(e.props.texture)}}class gt extends pt{constructor(e){super(e),A(this,"registry",void 0),this.registry=new FinalizationRegistry(e)}registerTexture(e){var t,r;_(null===(t=e.options)||void 0===t?void 0:t.id,"Texture must have an ID to be registered"),this.registry.register(e,null===(r=e.options)||void 0===r?void 0:r.id)}incrementTextureRefCount(){}decrementTextureRefCount(){}}var mt={alpha:e=>1===e?null:{prop:"opacity",value:`${e}`},x:e=>({prop:"left",value:`${e}px`}),y:e=>({prop:"top",value:`${e}px`}),width:e=>0===e?null:{prop:"width",value:`${e}px`},height:e=>0===e?null:{prop:"height",value:`${e}px`},zIndex:()=>"zIndex",fontFamily:()=>"font-family",fontSize:()=>"font-size",fontStyle:()=>"font-style",fontWeight:()=>"font-weight",fontStretch:()=>"font-stretch",lineHeight:()=>"line-height",letterSpacing:()=>"letter-spacing",textAlign:()=>"text-align",overflowSuffix:()=>"overflow-suffix",maxLines:()=>"max-lines",contain:()=>"contain",verticalAlign:()=>"vertical-align",clipping:e=>!1===e?null:{prop:"overflow",value:e?"hidden":"visible"},rotation:e=>0===e?null:{prop:"transform",value:`rotate(${e}rad)`},scale:e=>1===e?null:{prop:"transform",value:`scale(${e})`},scaleX:e=>1===e?null:{prop:"transform",value:`scaleX(${e})`},scaleY:e=>1===e?null:{prop:"transform",value:`scaleY(${e})`},color:e=>0===e?null:{prop:"color",value:xt(e)}},xt=e=>`rgba(${e>>24&255},${e>>16&255},${e>>8&255},${(255&e)/255})`,yt={id:"id"};class bt{constructor(e,t){var r,n,o,i,a,s;if(A(this,"root",null),A(this,"canvas",null),A(this,"height",1080),A(this,"width",1920),A(this,"scaleX",1),A(this,"scaleY",1),!k()){if(!t)throw new Error("settings is required");this.height=Math.ceil(null!==(r=t.appHeight)&&void 0!==r?r:1080/(null!==(n=t.deviceLogicalPixelRatio)&&void 0!==n?n:1)),this.width=Math.ceil(null!==(o=t.appWidth)&&void 0!==o?o:1900/(null!==(i=t.deviceLogicalPixelRatio)&&void 0!==i?i:1)),this.scaleX=null!==(a=t.deviceLogicalPixelRatio)&&void 0!==a?a:1,this.scaleY=null!==(s=t.deviceLogicalPixelRatio)&&void 0!==s?s:1,this.canvas=e,this.root=document.createElement("div"),this.setRootPosition(),document.body.appendChild(this.root),new MutationObserver(this.setRootPosition.bind(this)).observe(e,{attributes:!0,childList:!1,subtree:!1}),new ResizeObserver(this.setRootPosition.bind(this)).observe(e),window.addEventListener("resize",this.setRootPosition.bind(this)),console.warn("Inspector is enabled, this will impact performance")}}setRootPosition(){if(null!==this.root&&null!==this.canvas){var e=this.canvas.getBoundingClientRect(),t=document.documentElement.scrollTop+e.top,r=document.documentElement.scrollLeft+e.left;this.root.id="root",this.root.style.left=`${r}px`,this.root.style.top=`${t}px`,this.root.style.width=`${this.width}px`,this.root.style.height=`${this.height}px`,this.root.style.position="absolute",this.root.style.transformOrigin="0 0 0",this.root.style.transform=`scale(${this.scaleX}, ${this.scaleY})`,this.root.style.overflow="hidden",this.root.style.zIndex="65534"}}createDiv(e,t){var r=document.createElement("div");for(var n in r.style.position="absolute",r.id=e.id.toString(),t)this.updateNodeProperty(r,n,t[n]);return r}createNode(e,t){var r=e.createNode(t),n=this.createDiv(r,t);return n.node=r,r.div=n,this.createProxy(r,n)}createTextNode(e,t){var r=e.createTextNode(t),n=this.createDiv(r,t);return n.node=r,r.div=n,this.createProxy(r,n)}createProxy(e,t){return new Proxy(e,{set:(e,r,n)=>(this.updateNodeProperty(t,r,n),Reflect.set(e,r,n)),get:(r,n,o)=>("destroy"===n&&this.destroyNode(r),"animate"===n?(n,o)=>{var i=r.animate(n,o);return new Proxy(i,{get:(r,i,a)=>("start"===i&&this.animateNode(t,e,n,o),Reflect.get(r,i,a))})}:Reflect.get(r,n,o))})}destroyNode(e){var t=document.getElementById(e.id.toString());null==t||t.remove()}updateNodeProperty(e,t,r){if(null!==this.root&&null!=r)if("parent"!==t){if("text"===t)return e.innerHTML=String(r),void(e.style.visibility="hidden");if("src"===t&&r)e.setAttribute("data-src",String(r));else{if(mt[t]){var n,o=null===(n=mt[t])||void 0===n?void 0:n.call(mt,r);if(null===o)return;return"string"==typeof o?void e.style.setProperty(o,String(r)):void("object"==typeof o&&e.style.setProperty(o.prop,o.value))}if(yt[t])e.setAttribute(String(mt[t]),String(r));else if("data"!==t);else for(var i in r)e.setAttribute(`data-${i}`,String(r[i]))}}else{var a=r.id;if(1===a)return void this.root.appendChild(e);var s=document.getElementById(a.toString());null==s||s.appendChild(e)}}animateNode(e,t,r,n){var o=n.duration,i=void 0===o?1e3:o,a=n.delay,s=void 0===a?0:a,l=r.x,d=r.y,u=r.width,h=r.height,c=r.alpha,f=void 0===c?1:c,p=r.rotation,v=void 0===p?0:p,g=r.scale,m=void 0===g?1:g,x=r.color;setTimeout((function(){setTimeout((()=>{e.style.top=`${d}px`,e.style.left=`${l}px`,e.style.width=`${u}px`,e.style.height=`${h}px`,e.style.opacity=`${f}`,e.style.rotate=`${v}rad`,e.style.scale=`${m}`,e.style.color=xt(x)}),i)}),s)}}var wt=function(e,t,r){var n=Promise.resolve();return n.then((()=>e())).catch((e=>{var t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}))};class St{static getEffectKey(e){return""}static getMethodParameters(e,t){var r=[];for(var n in e){var o=e[n],i="";o.size&&(i=`[${o.size(t)}]`),r.push(`${o.type} ${n}${i}`)}return r.join(",")}constructor(e){A(this,"priority",1),A(this,"name",""),A(this,"ref",void 0),A(this,"target",void 0),A(this,"passParameters",""),A(this,"declaredUniforms",""),A(this,"uniformInfo",{});var t=e.ref,r=e.target,n=e.props,o=void 0===n?{}:n;this.ref=t,this.target=r;var i={},a=[],s="",l=this.constructor.uniforms||{};for(var d in l){var u=l[d],h=u.type,c=`${t}_${d}`,f="";u.size&&(f=`[${u.size(o)}]`),a.push(c),s+=`uniform ${h} ${c}${f};`,i[d]={name:c,uniform:l[d].method}}this.passParameters=a.join(","),this.declaredUniforms=s,this.uniformInfo=i}static resolveDefaults(e){return{}}static makeEffectKey(e){return!1}}A(St,"uniforms",{}),A(St,"methods",void 0),A(St,"onShaderMask",void 0),A(St,"onColorize",void 0),A(St,"onEffectMask",void 0);var At={x:(e,t)=>{e.props.x=t},y:(e,t)=>{e.props.y=t},width:(e,t)=>{e.props.width=t},height:(e,t)=>{e.props.height=t},color:(e,t)=>{e.props.color=t},zIndex:(e,t)=>{e.props.zIndex=t},fontFamily:(e,t)=>{e.props.fontFamily=t},fontWeight:(e,t)=>{e.props.fontWeight=t},fontStyle:(e,t)=>{e.props.fontStyle=t},fontStretch:(e,t)=>{e.props.fontStretch=t},fontSize:(e,t)=>{e.props.fontSize=t},text:(e,t)=>{e.props.text=t},textAlign:(e,t)=>{e.props.textAlign=t},contain:(e,t)=>{e.props.contain=t},offsetY:(e,t)=>{e.props.offsetY=t},scrollable:(e,t)=>{e.props.scrollable=t},scrollY:(e,t)=>{e.props.scrollY=t},letterSpacing:(e,t)=>{e.props.letterSpacing=t},lineHeight:(e,t)=>{e.props.lineHeight=t},maxLines:(e,t)=>{e.props.maxLines=t},textBaseline:(e,t)=>{e.props.textBaseline=t},verticalAlign:(e,t)=>{e.props.verticalAlign=t},overflowSuffix:(e,t)=>{e.props.overflowSuffix=t},debug:(e,t)=>{e.props.debug=t}};class Ct{constructor(e){A(this,"stage",void 0),A(this,"set",void 0),this.stage=e;var t=S(S({},At),this.getPropertySetters());this.set=Object.freeze(Object.fromEntries(Object.entries(t).map((([e,t])=>[e,(r,n)=>{r.props[e]!==n&&(t(r,n),this.stage.requestRender())}]))))}setStatus(e,t,r){e.status!==t&&(e.status=t,e.emitter.emit(t,r))}setIsRenderable(e,t){e.isRenderable=t}destroyState(e){["loading","loaded","failed"].forEach((t=>{e.emitter.off(t)}))}scheduleUpdateState(e){e.updateScheduled||(e.updateScheduled=!0,queueMicrotask((()=>{e.updateScheduled=!1,this.updateState(e)})))}}class Tt extends I{constructor(e,t,r){super(e,t),A(this,"fontFace",void 0),A(this,"fontUrl",void 0);var n=r.replace(/\(|\)/g,""),o=this.descriptors,i={style:o.style,weight:"number"==typeof o.weight?`${o.weight}`:o.weight,stretch:o.stretch,unicodeRange:o.unicodeRange,variant:o.variant,featureSettings:o.featureSettings,display:o.display},a=new FontFace(e,`url(${n})`,i);a.load().then((()=>{this.loaded=!0,this.emit("loaded")})).catch(console.error),this.fontFace=a,this.fontUrl=r}}function _t(e,t,r,n,o){return r*(n-1)+("bottom"!==e?.5*t:0)+Math.max(r,t)+(o||0)}class kt{constructor(e,t){A(this,"_canvas",void 0),A(this,"_context",void 0),A(this,"_settings",void 0),A(this,"renderInfo",void 0),this._canvas=e,this._context=t,this._settings=this.mergeDefaults({})}set settings(e){this._settings=this.mergeDefaults(e)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){for(var e=[this._settings.fontFace],t=[],r=0,n=e.length;r<n;r++)"serif"===e[r]||"sans-serif"===e[r]?t.push(e[r]):t.push(`"${e[r]}"`);return`${this._settings.fontStyle} ${this._settings.fontSize*this.getPrecision()}px ${t.join(",")}`}_load(){if(document.fonts){var e=this._getFontSetting();try{if(!document.fonts.check(e,this._settings.text))return document.fonts.load(e,this._settings.text).catch((t=>{console.warn("[Lightning] Font load error",t,e)})).then((()=>{document.fonts.check(e,this._settings.text)||console.warn("[Lightning] Font not found",e)}))}catch(t){console.warn("[Lightning] Can't check font loading for "+e)}}}calculateRenderInfo(){var e={},t=this.getPrecision(),r=this._settings.paddingLeft*t,n=this._settings.paddingRight*t,o=this._settings.fontSize*t,i=null===this._settings.offsetY?null:this._settings.offsetY*t,a=(this._settings.lineHeight||o)*t,s=this._settings.w*t,l=this._settings.h*t,d=this._settings.wordWrapWidth*t,u=this._settings.cutSx*t,h=this._settings.cutEx*t,c=this._settings.cutSy*t,f=this._settings.cutEy*t,p=(this._settings.letterSpacing||0)*t,v=this._settings.textIndent*t;this.setFontProperties();var g,m=s||2048/this.getPrecision(),x=m-r;if(x<10&&(m+=10-x,x=10),d||(d=x),this._settings.textOverflow&&!this._settings.wordWrap){var y;switch(this._settings.textOverflow){case"clip":y="";break;case"ellipsis":y=this._settings.overflowSuffix;break;default:y=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,d-v,y)}if(this._settings.wordWrap)g=this.wrapText(this._settings.text,d,p,v);else for(var b=(g={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]}).l.length,w=0;w<b-1;w++)g.n.push(w);var S=g.l;if(this._settings.maxLines&&S.length>this._settings.maxLines){var A,C=S.slice(0,this._settings.maxLines),T=null;if(this._settings.overflowSuffix){var _=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,k=this.wrapText(C[C.length-1],d-_,p,v);C[C.length-1]=`${k.l[0]}${this._settings.overflowSuffix}`,T=[k.l.length>1?k.l[1]:""]}else T=[""];var I=S.length,B=0,R=g.n.length;for(A=this._settings.maxLines;A<I;A++)T[B]+=`${T[B]?" ":""}${S[A]}`,A+1<R&&g.n[A+1]&&B++;e.remainingText=T.join("\n"),e.moreTextLines=!0,S=C}else e.moreTextLines=!1,e.remainingText="";for(var E,N=0,F=[],L=0;L<S.length;L++){var z=this.measureText(S[L],p)+(0===L?v:0);F.push(z),N=Math.max(N,z)}return e.lineWidths=F,s||(m=N+r+n,x=N),a=a||o,E=l||_t(this._settings.textBaseline,o,a,S.length,i),null===i&&(i=o),e.w=m,e.h=E,e.lines=S,e.precision=t,m||(m=1),E||(E=1),(u||h)&&(m=Math.min(m,h-u)),(c||f)&&(E=Math.min(E,f-c)),e.width=m,e.innerWidth=x,e.height=E,e.fontSize=o,e.cutSx=u,e.cutSy=c,e.cutEx=h,e.cutEy=f,e.lineHeight=a,e.lineWidths=F,e.offsetY=i,e.paddingLeft=r,e.paddingRight=n,e.letterSpacing=p,e.textIndent=v,e}draw(e,t){var r,n,o=this.getPrecision(),i=(null==t?void 0:t.lines)||e.lines,a=(null==t?void 0:t.lineWidths)||e.lineWidths,s=t?_t(this._settings.textBaseline,e.fontSize,e.lineHeight,t.lines.length,null===this._settings.offsetY?null:this._settings.offsetY*o):e.height;this._canvas.width=Math.min(Math.ceil(e.width+this._settings.textRenderIssueMargin),2048),this._canvas.height=Math.min(Math.ceil(s),2048),this.setFontProperties(),e.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(e.cutSx||e.cutSy)&&this._context.translate(-e.cutSx,-e.cutSy);for(var l=[],d=0,u=i.length;d<u;d++)r=0===d?e.textIndent:0,n=d*e.lineHeight+e.offsetY,"middle"==this._settings.verticalAlign?n+=(e.lineHeight-e.fontSize)/2:"bottom"==this._settings.verticalAlign&&(n+=e.lineHeight-e.fontSize),"right"===this._settings.textAlign?r+=e.innerWidth-a[d]:"center"===this._settings.textAlign&&(r+=(e.innerWidth-a[d])/2),r+=e.paddingLeft,l.push({text:i[d],x:r,y:n,w:a[d]});if(this._settings.highlight){var h=this._settings.highlightColor,c=this._settings.highlightHeight*o||1.5*e.fontSize,f=this._settings.highlightOffset*o,p=null!==this._settings.highlightPaddingLeft?this._settings.highlightPaddingLeft*o:e.paddingLeft,v=null!==this._settings.highlightPaddingRight?this._settings.highlightPaddingRight*o:e.paddingRight;this._context.fillStyle=B(h);for(var g=0;g<l.length;g++){var m=l[g];this._context.fillRect(m.x-p,m.y-e.offsetY+f,m.w+v+p,c)}}var x=null;this._settings.shadow&&(x=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=B(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*o,this._context.shadowOffsetY=this._settings.shadowOffsetY*o,this._context.shadowBlur=this._settings.shadowBlur*o),this._context.fillStyle=B(this._settings.textColor);for(var y=0,b=l.length;y<b;y++){var w=l[y];if(0===e.letterSpacing)this._context.fillText(w.text,w.x,w.y);else for(var S=w.text.split(""),A=w.x,C=0,T=S.length;C<T;C++)this._context.fillText(S[C],A,w.y),A+=this.measureText(S[C],e.letterSpacing)}x&&(this._context.shadowColor=x[0],this._context.shadowOffsetX=x[1],this._context.shadowOffsetY=x[2],this._context.shadowBlur=x[3]),(e.cutSx||e.cutSy)&&this._context.translate(e.cutSx,e.cutSy),this.renderInfo=e}wrapWord(e,t,r){var n=this._context.measureText(r).width,o=e.length,i=this._context.measureText(e).width;if(i<=t)return e;var a=Math.floor(t*o/i),s=this._context.measureText(e.substring(0,a)).width+n;if(s>t)for(;a>0&&(s=this._context.measureText(e.substring(0,a)).width+n)>t;)a-=1;else for(;a<o;){if(!((s=this._context.measureText(e.substring(0,a)).width+n)<t)){a-=1;break}a+=1}return e.substring(0,a)+(t>=n?r:"")}wrapText(e,t,r,n=0){for(var o=e.split(/\r?\n/g),i=[],a=[],s=0;s<o.length;s++){for(var l=[],d="",u=t-n,h=o[s].split(" "),c=0;c<h.length;c++){var f=this.measureText(h[c],r),p=f+this.measureText(" ",r);0===c||p>u?(c>0&&(l.push(d),d=""),d+=h[c],u=t-f-(0===c?n:0)):(u-=p,d+=` ${h[c]}`)}l.push(d),d="",i=i.concat(l),s<o.length-1&&a.push(i.length)}return{l:i,n:a}}measureText(e,t=0){return t?e.split("").reduce(((e,r)=>e+this._context.measureText(r).width+t),0):this._context.measureText(e).width}mergeDefaults(e){return S({text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0},e)}}var It="undefined"==typeof self?globalThis:self,Bt=(null===(y=It.document)||void 0===y?void 0:y.fonts)||It.fonts;var Rt=R(0,0,0,0);class Et extends Ct{constructor(e){super(e),A(this,"canvas",void 0),A(this,"context",void 0),A(this,"rendererBounds",void 0),"undefined"!=typeof OffscreenCanvas?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");var t=this.canvas.getContext("2d");t||(this.canvas=document.createElement("canvas"),t=this.canvas.getContext("2d")),_(t),this.context=t,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,t)=>{e.props.fontFamily=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,t)=>{e.props.fontWeight=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,t)=>{e.props.fontStyle=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,t)=>{e.props.fontStretch=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontSize:(e,t)=>{e.props.fontSize=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},text:(e,t)=>{e.props.text=t,this.invalidateLayoutCache(e)},textAlign:(e,t)=>{e.props.textAlign=t,this.invalidateLayoutCache(e)},color:(e,t)=>{e.props.color=t,this.invalidateLayoutCache(e)},x:(e,t)=>{e.props.x=t,this.invalidateVisibleWindowCache(e)},y:(e,t)=>{e.props.y=t,this.invalidateVisibleWindowCache(e)},contain:(e,t)=>{e.props.contain=t,this.invalidateLayoutCache(e)},width:(e,t)=>{e.props.width=t,"none"!==e.props.contain&&this.invalidateLayoutCache(e)},height:(e,t)=>{e.props.height=t,"both"===e.props.contain&&this.invalidateLayoutCache(e)},offsetY:(e,t)=>{e.props.offsetY=t,this.invalidateLayoutCache(e)},scrollY:(e,t)=>{e.props.scrollY=t},letterSpacing:(e,t)=>{e.props.letterSpacing=t,this.invalidateLayoutCache(e)},lineHeight:(e,t)=>{e.props.lineHeight=t,this.invalidateLayoutCache(e)},maxLines:(e,t)=>{e.props.maxLines=t,this.invalidateLayoutCache(e)},textBaseline:(e,t)=>{e.props.textBaseline=t,this.invalidateLayoutCache(e)},verticalAlign:(e,t)=>{e.props.verticalAlign=t,this.invalidateLayoutCache(e)},overflowSuffix:(e,t)=>{e.props.overflowSuffix=t,this.invalidateLayoutCache(e)}}}canRenderFont(e){return!0}isFontFaceSupported(e){return e instanceof Tt}addFontFace(e){_(e instanceof Tt),Bt.add(e.fontFace)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new E,canvasPages:void 0,lightning2TextRenderer:new kt(this.canvas,this.context),renderWindow:void 0,visibleWindow:{x1:0,y1:0,x2:0,y2:0,valid:!1},renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,fontFaceLoadedHandler:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(e){if("initialState"===e.status&&this.setStatus(e,"loading"),!e.fontInfo){var t=(r=e.props,n=r.fontFamily,[r.fontStyle,r.fontWeight,r.fontStretch,`${r.fontSize}px`,n].join(" "));if(e.fontInfo={cssString:t,loaded:!1},!e.fontInfo.loaded)return void Bt.load(t).then(this.onFontLoaded.bind(this,e,t)).catch(this.onFontLoadError.bind(this,e,t))}var r,n;if(e.fontInfo.loaded){if(!e.renderInfo){var o=e.props.maxLines,i="both"===e.props.contain?Math.floor((e.props.height-e.props.offsetY)/e.props.lineHeight):0,a=i>0&&o>0?Math.min(i,o):Math.max(i,o);e.lightning2TextRenderer.settings={text:e.props.text,textAlign:e.props.textAlign,fontFace:e.props.fontFamily,fontSize:e.props.fontSize,fontStyle:[e.props.fontStretch,e.props.fontStyle,e.props.fontWeight].join(" "),textColor:N(e.props.color),offsetY:e.props.fontSize+e.props.offsetY,wordWrap:"none"!==e.props.contain,wordWrapWidth:"none"===e.props.contain?void 0:e.props.width,letterSpacing:e.props.letterSpacing,lineHeight:e.props.lineHeight,maxLines:a,textBaseline:e.props.textBaseline,verticalAlign:e.props.verticalAlign,overflowSuffix:e.props.overflowSuffix},e.renderInfo=e.lightning2TextRenderer.calculateRenderInfo(),e.textH=e.renderInfo.lineHeight*e.renderInfo.lines.length,e.textW=e.renderInfo.width,e.renderWindow=void 0}var s=e.props,l=s.x,d=s.y,u=s.width,h=s.height,c=s.scrollY,f=s.contain,p=e.visibleWindow,v=e.renderWindow,g=e.canvasPages;if(!p.valid){var m=R(l,d,"none"!==f?l+u:1/0,"both"===f?d+h:1/0,Rt);F(this.rendererBounds,m,p),p.valid=!0}var x=p.y2-p.y1,y=Math.ceil(x/e.renderInfo.lineHeight);if(0===x)return g=void 0,v=void 0,void this.setStatus(e,"loaded");if(v&&g){var b=l+v.x1,w=d-c+v.y1,S=l+v.x2,A=d-c+v.y2;if(b<=p.x1&&S>=p.x2&&w<=p.y1&&A>=p.y2)return void this.setStatus(e,"loaded");A<p.y2?(v.y1+=y*e.renderInfo.lineHeight,v.y2+=y*e.renderInfo.lineHeight,g.push(g.shift()),g[2].lineNumStart=g[1].lineNumStart+y,g[2].lineNumEnd=g[2].lineNumStart+y,g[2].valid=!1):w>p.y1&&(v.y1-=y*e.renderInfo.lineHeight,v.y2-=y*e.renderInfo.lineHeight,g.unshift(g.pop()),g[0].lineNumStart=g[1].lineNumStart-y,g[0].lineNumEnd=g[0].lineNumStart+y,g[0].valid=!1)}else{var C,_,k,I=e.renderInfo.lineHeight*y,B=Math.ceil(c/I),E=B*y,L=E-y,z=E+y;g=[{texture:null===(C=g)||void 0===C?void 0:C[0].texture,lineNumStart:L,lineNumEnd:L+y,valid:!1},{texture:null===(_=g)||void 0===_?void 0:_[1].texture,lineNumStart:E,lineNumEnd:E+y,valid:!1},{texture:null===(k=g)||void 0===k?void 0:k[2].texture,lineNumStart:z,lineNumEnd:z+y,valid:!1}],e.canvasPages=g;var M=B*I;v={x1:0,y1:M-I,x2:u,y2:M+2*I}}e.renderWindow=v,performance.now();var P,D=T(g);try{for(D.s();!(P=D.n()).done;){var O=P.value;if(!O.valid)if(O.lineNumStart<0){var U;null===(U=O.texture)||void 0===U||U.setRenderableOwner(e,!1),O.texture=this.stage.txManager.loadTexture("ImageTexture",{src:""}),O.texture.setRenderableOwner(e,e.isRenderable),O.valid=!0}else{var W;if(e.lightning2TextRenderer.draw(e.renderInfo,{lines:e.renderInfo.lines.slice(O.lineNumStart,O.lineNumEnd),lineWidths:e.renderInfo.lineWidths.slice(O.lineNumStart,O.lineNumEnd)}),0!==this.canvas.width&&0!==this.canvas.height)null===(W=O.texture)||void 0===W||W.setRenderableOwner(e,!1),O.texture=this.stage.txManager.loadTexture("ImageTexture",{src:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)},{preload:!0}),O.texture.setRenderableOwner(e,e.isRenderable);O.valid=!0}}}catch(Y){D.e(Y)}finally{D.f()}this.setStatus(e,"loaded")}}renderQuads(e,t,r,n){var o=this.stage,i=e.canvasPages,a=e.textW,s=void 0===a?0:a,l=e.textH,d=void 0===l?0:l,u=e.renderWindow;if(i&&u){var h=e.props,c=h.x,f=h.y,p=h.scrollY,v=h.contain,g=h.width,m=h.height,x={x:c,y:f,width:"none"!==v?g:s,height:"both"===v?m:d};L({x:0,y:0,width:o.options.appWidth,height:o.options.appHeight},x),_(i,"canvasPages is not defined"),_(u,"renderWindow is not defined");var y,b,w,S,A,C,T=(u.y2-u.y1)/3,k=e.props,I=k.zIndex,B=k.color,R=n*z(B),E=M(4294967295,R);if(i[0].valid)this.stage.renderer.addQuad({alpha:R,clippingRect:r,colorBl:E,colorBr:E,colorTl:E,colorTr:E,width:(null===(y=i[0].texture)||void 0===y||null===(y=y.dimensions)||void 0===y?void 0:y.width)||0,height:(null===(b=i[0].texture)||void 0===b||null===(b=b.dimensions)||void 0===b?void 0:b.height)||0,texture:i[0].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:I,tx:t.tx,ty:t.ty-p+u.y1,ta:t.ta,tb:t.tb,tc:t.tc,td:t.td});if(i[1].valid)this.stage.renderer.addQuad({alpha:R,clippingRect:r,colorBl:E,colorBr:E,colorTl:E,colorTr:E,width:(null===(w=i[1].texture)||void 0===w||null===(w=w.dimensions)||void 0===w?void 0:w.width)||0,height:(null===(S=i[1].texture)||void 0===S||null===(S=S.dimensions)||void 0===S?void 0:S.height)||0,texture:i[1].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:I,tx:t.tx,ty:t.ty-p+u.y1+T,ta:t.ta,tb:t.tb,tc:t.tc,td:t.td});if(i[2].valid)this.stage.renderer.addQuad({alpha:R,clippingRect:r,colorBl:E,colorBr:E,colorTl:E,colorTr:E,width:(null===(A=i[2].texture)||void 0===A||null===(A=A.dimensions)||void 0===A?void 0:A.width)||0,height:(null===(C=i[2].texture)||void 0===C||null===(C=C.dimensions)||void 0===C?void 0:C.height)||0,texture:i[2].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:I,tx:t.tx,ty:t.ty-p+u.y1+T+T,ta:t.ta,tb:t.tb,tc:t.tc,td:t.td})}}setIsRenderable(e,t){var r;super.setIsRenderable(e,t),null===(r=e.canvasPages)||void 0===r||r.forEach((r=>{var n;null===(n=r.texture)||void 0===n||n.setRenderableOwner(e,t)}))}destroyState(e){var t;null===(t=e.canvasPages)||void 0===t||t.forEach((t=>{var r;null===(r=t.texture)||void 0===r||r.setRenderableOwner(e,!1)}))}invalidateVisibleWindowCache(e){e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}invalidateLayoutCache(e){e.renderInfo=void 0,e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}onFontLoaded(e,t){var r;t===(null===(r=e.fontInfo)||void 0===r?void 0:r.cssString)&&e.fontInfo&&(e.fontInfo.loaded=!0,this.scheduleUpdateState(e))}onFontLoadError(e,t,r){var n;t===(null===(n=e.fontInfo)||void 0===n?void 0:n.cssString)&&e.fontInfo&&(e.fontInfo.loaded=!0,console.error(`CanvasTextRenderer: Error loading font '${e.fontInfo.cssString}'`,r),this.scheduleUpdateState(e))}}class Nt extends P{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}}A(Nt,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    "});class Ft extends P{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]}),A(this,"supportsIndexedTextures",!0)}bindTextures(e){var t=this.renderer,r=this.glw;if(e.length>t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error(`DefaultShaderBatched: Cannot bind more than ${t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);e.forEach(((e,t)=>{r.activeTexture(t),r.bindTexture(e.ctxTexture)}));var n=Array.from(Array(e.length).keys());this.setUniform("u_textures[0]",n)}}A(Ft,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:e=>`\n      #define txUnits ${e}\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[${e}], int idx, vec2 uv) {\n        ${Array.from(Array(e).keys()).map((e=>`\n          ${0!==e?"else ":""}if (idx == ${e}) {\n            return texture2D(textures[${e}], uv);\n          }\n        `)).join("")}\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    `});var Lt=new Map,zt=(e,t)=>{var r=JSON.stringify(e);if(Lt.has(r))return Lt.get(r);var n=(null!=e?e:[]).map((e=>({type:e.type,props:t[e.type].resolveDefaults(e.props||{})})));return Lt.set(r,n),n};class Mt extends P{constructor(e,t,r){var n=Mt.createShader(t,r);super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...n.uniforms],shaderSources:{vertex:n.vertex,fragment:n.fragment}}),A(this,"effects",[]),this.effects=n.effects,this.calculateProps=D(this.calculateProps.bind(this))}bindTextures(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}calculateProps(e){var t=this.renderer.shManager.getRegisteredEffects(),r=[];return null==e||e.forEach(((e,n)=>{var o,i=this.effects[n],a=t[i.name],s=null!==(o=e.props)&&void 0!==o?o:{},l=i.uniformInfo;Object.keys(s).forEach((e=>{var t=a.uniforms[e],n=l[e],o=t.validator?t.validator(s[e],s):s[e];Array.isArray(o)&&(o=new Float32Array(o)),r.push({name:n.name,value:o})}))})),r}bindProps(e){this.calculateProps(e.effects).forEach((e=>{this.setUniform(e.name,e.value)}))}canBatchShaderProps(e,t){if(e.$dimensions.width!==t.$dimensions.width||e.$dimensions.height!==t.$dimensions.height||e.effects.length!==t.effects.length)return!1;for(var r=e.effects.length,n=0;n<r;n++){var o=e.effects[n],i=t.effects[n];if(o.type!==i.type)return!1;for(var a in o.props)if(i.props&&!i.props[a]||o.props[a]!==i.props[a])return!1}return!0}static createShader(e,t){var r={},n={},o="",i=[],a=[],s=e.effects.map((e=>{var n=t[e.type],s=n.getEffectKey(e.props||{});r[s]=r[s]?++r[s]:1;var l=r[s];1===l&&a.push({key:s,type:e.type,props:e.props});var d=new n({ref:`${s}${1===l?"":l}`,target:s,props:e.props});return o+=d.declaredUniforms,i.push(...Object.values(d.uniformInfo)),d})),l="";null==a||a.forEach((e=>{var r,o=t[e.type],i=o.resolveDefaults(null!==(r=e.props)&&void 0!==r?r:{}),a=[];for(var s in o.methods){var d=s,u=o.methods[s];n[s]&&n[s]!==u&&(d=Mt.resolveMethodDuplicate(s,u,n)),n[d]=u.replace("function",d),a.push({m:s,cm:d})}var h=o.onShaderMask instanceof Function?o.onShaderMask(i):o.onShaderMask,c=o.onColorize instanceof Function?o.onColorize(i):o.onColorize,f=o.onEffectMask instanceof Function?o.onEffectMask(i):o.onEffectMask;a.forEach((e=>{var t=e.m,r=e.cm,n=new RegExp(`\\$${t}`,"g");h&&(h=h.replace(n,r)),c&&(c=c.replace(n,r)),f&&(f=f.replace(n,r))}));var p=o.getMethodParameters(o.uniforms,i),v=p.length>0?`, ${p}`:"";h&&(l+=`\n        float fx_${e.key}_onShaderMask(float shaderMask ${v}) {\n          ${h}\n        }\n        `),c&&(l+=`\n          vec4 fx_${e.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${v}) {\n            ${c}\n          }\n        `),f&&(l+=`\n          vec4 fx_${e.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${v}) {\n            ${f}\n          }\n        `)}));var d="";for(var u in n)d+=n[u];for(var h="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",c="\n\n    ",f=0;f<s.length;f++){var p=s[f],v=p.passParameters.length>0?`, ${p.passParameters}`:"",g=t[p.name];g.onShaderMask&&(c+=`\n        shaderMask = fx_${p.target}_onShaderMask(shaderMask ${v});\n        `),g.onColorize&&(c+=`\n        maskColor = fx_${p.target}_onColorize(shaderMask, maskColor, shaderColor${v});\n        `),g.onEffectMask&&(h=`fx_${p.target}_onEffectMask(shaderMask, maskColor, shaderColor${v})`);var m=s[f+1];(void 0===m||t[m.name].onEffectMask)&&(c+=`\n          shaderColor = ${h};\n        `)}return{effects:s,uniforms:i,fragment:Mt.fragment(o,d,l,c),vertex:Mt.vertex()}}static resolveMethodDuplicate(e,t,r,n=0){var o=e+(n>0?n:"");return r[o]&&r[o]!==t?this.resolveMethodDuplicate(e,t,r,++n):o}static resolveDefaults(e,t){return{effects:zt(e.effects,t),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(e,t){var r,n="";return null===(r=e.effects)||void 0===r||r.forEach((e=>{var r=t[e.type].getEffectKey(e.props||{});n+=`,${r}`})),`DynamicShader${n}`}}A(Mt,"z$__type__Props",void 0),A(Mt,"vertex",(()=>"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  ")),A(Mt,"fragment",((e,t,r,n)=>`\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ${e}\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n\n    ${t}\n\n    ${r}\n\n    void main() {\n      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ${n}\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  `));class Pt extends P{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(e){return{radius:e.radius||10,$dimensions:{width:0,height:0}}}bindTextures(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}bindProps(e){this.setUniform("u_radius",e.radius)}canBatchShaderProps(e,t){return e.radius===t.radius&&e.$dimensions.width===t.$dimensions.width&&e.$dimensions.height===t.$dimensions.height}}A(Pt,"z$__type__Props",void 0),A(Pt,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    "});var Dt=new Float32Array([1,0,0,0,1,0,0,0,1]);class Ot extends P{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}bindProps(e){var t=Ot.resolveDefaults(e);for(var r in t)if("transform"===r)this.setUniform("u_transform",!1,t[r]);else if("scrollY"===r)this.setUniform("u_scrollY",t[r]);else if("color"===r){var n=N(t.color);this.setUniform("u_color",n)}else"size"===r?this.setUniform("u_size",t[r]):"distanceRange"===r?this.setUniform("u_distanceRange",t[r]):"debug"===r&&this.setUniform("u_debug",t[r]?1:0)}static resolveDefaults(e={}){var t,r,n,o,i,a;return{transform:null!==(t=e.transform)&&void 0!==t?t:Dt,scrollY:null!==(r=e.scrollY)&&void 0!==r?r:0,color:null!==(n=e.color)&&void 0!==n?n:4294967295,size:null!==(o=e.size)&&void 0!==o?o:16,distanceRange:null!==(i=e.distanceRange)&&void 0!==i?i:1,debug:null!==(a=e.debug)&&void 0!==a&&a}}}A(Ot,"shaderSources",{vertex:"\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n        gl_Position = vec4((transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1), 0, 1);\n        v_texcoord = a_textureCoordinate;\n      }\n    ",fragment:"\n      precision highp float;\n\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    "});class Ut extends St{constructor(...e){super(...e),A(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(e){var t;return{radius:null!==(t=e.radius)&&void 0!==t?t:10}}}A(Ut,"z$__type__Props",void 0),A(Ut,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{var t=e;return Array.isArray(t)?2===t.length?t=[t[0],t[1],t[0],t[1]]:3===t.length?t=[t[0],t[1],t[2],t[0]]:4!==t.length&&(t=[t[0],t[0],t[0],t[0]]):"number"==typeof t&&(t=[t,t,t,t]),t}}}),A(Ut,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),A(Ut,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);\n  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);\n  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  "),A(Ut,"onEffectMask","\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  ");class Wt extends St{constructor(...e){super(...e),A(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(e){var t,r;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(r=e.color)&&void 0!==r?r:4294967295}}}A(Wt,"z$__type__Props",void 0),A(Wt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>N(e),method:"uniform4fv",type:"vec4"}}),A(Wt,"onEffectMask","\n  float mask = clamp(shaderMask + width, 0.0, 1.0) - clamp(shaderMask, 0.0, 1.0);\n  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);\n  "),A(Wt,"onColorize","\n    return color;\n  ");class Yt extends St{constructor(...e){super(...e),A(this,"name","linearGradient")}static getEffectKey(e){return`linearGradient${e.colors.length}`}static resolveDefaults(e){var t,r,n=null!==(t=e.colors)&&void 0!==t?t:[4278190080,4294967295],o=e.stops||[];if(0===o.length||o.length!==n.length){for(var i=n.length,a=0,s=o;a<i;a++)o[a]?(s[a]=o[a],void 0===o[a-1]&&void 0!==s[a-2]&&(s[a-1]=s[a-2]+(o[a]-s[a-2])/2)):s[a]=a*(1/(n.length-1));o=s}return{colors:n,stops:o,angle:null!==(r=e.angle)&&void 0!==r?r:0}}}te=Yt,A(Yt,"z$__type__Props",void 0),A(Yt,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:e=>e.map((e=>N(e))).reduce(((e,t)=>e.concat(t)),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),A(Yt,"methods",{fromLinear:"\n      vec4 function(vec4 linearRGB) {\n        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n        vec4 lower = linearRGB * vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",toLinear:"\n      vec4 function(vec4 sRGB) {\n        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n        vec4 lower = sRGB/vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",calcPoint:"\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    "}),A(Yt,"ColorLoop",(e=>{for(var t="",r=2;r<e;r++)t+=`colorOut = mix(colorOut, colors[${r}], clamp((dist - stops[${r-1}]) / (stops[${r}] - stops[${r-1}]), 0.0, 1.0));`;return t})),A(Yt,"onColorize",(e=>{var t=e.colors.length||1;return`\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));\n      ${te.ColorLoop(t)}\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    `}));class jt extends St{constructor(...e){super(...e),A(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(e){var t;return{amount:null!==(t=e.amount)&&void 0!==t?t:1}}}A(jt,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),A(jt,"onColorize","\n    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;\n    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);\n  ");class Ht extends St{constructor(...e){super(...e),A(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(e){var t,r;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(r=e.color)&&void 0!==r?r:4294967295}}}A(Ht,"z$__type__Props",void 0),A(Ht,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>N(e),method:"uniform4fv",type:"vec4"}}),A(Ht,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),A(Ht,"onEffectMask","\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),A(Ht,"onColorize","\n    return color;\n  ");class Qt extends St{constructor(...e){super(...e),A(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(e){var t,r;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(r=e.color)&&void 0!==r?r:4294967295}}}A(Qt,"z$__type__Props",void 0),A(Qt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>N(e),method:"uniform4fv",type:"vec4"}}),A(Qt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),A(Qt,"onEffectMask","\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),A(Qt,"onColorize","\n    return color;\n  ");class Kt extends St{constructor(...e){super(...e),A(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(e){var t,r;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(r=e.color)&&void 0!==r?r:4294967295}}}A(Kt,"z$__type__Props",void 0),A(Kt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>N(e),method:"uniform4fv",type:"vec4"}}),A(Kt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),A(Kt,"onEffectMask","\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),A(Kt,"onColorize","\n    return color;\n  ");class $t extends St{constructor(...e){super(...e),A(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(e){var t,r;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(r=e.color)&&void 0!==r?r:4294967295}}}A($t,"z$__type__Props",void 0),A($t,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>N(e),method:"uniform4fv",type:"vec4"}}),A($t,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),A($t,"onEffectMask","\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),A($t,"onColorize","\n    return color;\n  ");class Xt extends St{constructor(...e){super(...e),A(this,"name","glitch")}static getEffectKey(e){return"glitch"}static resolveDefaults(e){var t,r,n,o,i;return{amplitude:null!==(t=e.amplitude)&&void 0!==t?t:.2,narrowness:null!==(r=e.narrowness)&&void 0!==r?r:4,blockiness:null!==(n=e.blockiness)&&void 0!==n?n:2,minimizer:null!==(o=e.minimizer)&&void 0!==o?o:8,time:null!==(i=e.time)&&void 0!==i?i:Date.now()}}}A(Xt,"z$__type__Props",void 0),A(Xt,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",validator:e=>(Date.now()-e)%1e3,type:"float"}}),A(Xt,"methods",{rand:"\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    ",noise:"\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    ",fbm:"\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    "}),A(Xt,"onColorize","\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  ");class Gt extends St{constructor(...e){super(...e),A(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(e){var t;return{fade:null!==(t=e.fade)&&void 0!==t?t:10}}}A(Gt,"z$__type__Props",void 0),A(Gt,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{var t=e;return Array.isArray(t)?2===t.length?t=[t[0],t[1],t[0],t[1]]:3===t.length?t=[t[0],t[1],t[2],t[0]]:4!==t.length&&(t=[t[0],t[0],t[0],t[0]]):"number"==typeof t&&(t=[t,t,t,t]),t}}}),A(Gt,"onColorize","\n  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  ");class Vt extends St{constructor(...e){super(...e),A(this,"name","radialGradient")}static getEffectKey(e){return`radialGradient${e.colors.length}`}static resolveDefaults(e){var t,r,n,o,i,a=null!==(t=e.colors)&&void 0!==t?t:[4278190080,4294967295],s=e.stops||[];if(0===s.length||s.length!==a.length){for(var l=a.length,d=0,u=s;d<l;d++)s[d]?(u[d]=s[d],void 0===s[d-1]&&void 0!==u[d-2]&&(u[d-1]=u[d-2]+(s[d]-u[d-2])/2)):u[d]=d*(1/(a.length-1));s=u}return{colors:a,stops:s,width:null!==(r=e.width)&&void 0!==r?r:0,height:null!==(n=null!==(o=e.height)&&void 0!==o?o:e.width)&&void 0!==n?n:0,pivot:null!==(i=e.pivot)&&void 0!==i?i:[.5,.5]}}}re=Vt,A(Vt,"z$__type__Props",void 0),A(Vt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:e=>e.map((e=>N(e))).reduce(((e,t)=>e.concat(t)),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),A(Vt,"ColorLoop",(e=>{for(var t="",r=2;r<e;r++)t+=`colorOut = mix(colorOut, colors[${r}], clamp((dist - stops[${r-1}]) / (stops[${r}] - stops[${r-1}]), 0.0, 1.0));`;return t})),A(Vt,"onColorize",(e=>{var t=e.colors.length||1;return`\n      vec2 point = v_textureCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = mix(colors[0], colors[1], stopCalc);\n      ${re.ColorLoop(t)}\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    `}));class Zt extends St{constructor(...e){super(...e),A(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(e){var t,r,n,o,i,a,s;return{width:null!==(t=e.width)&&void 0!==t?t:10,progress:null!==(r=e.progress)&&void 0!==r?r:.5,offset:null!==(n=e.offset)&&void 0!==n?n:0,range:null!==(o=e.range)&&void 0!==o?o:2*Math.PI,rounded:null!==(i=e.rounded)&&void 0!==i&&i,radius:null!==(a=e.radius)&&void 0!==a?a:1,color:null!==(s=e.color)&&void 0!==s?s:4294967295}}}A(Zt,"z$__type__Props",void 0),A(Zt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:e=>e?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>N(e),method:"uniform4fv",type:"vec4"}}),A(Zt,"methods",{rotateUV:"\n    vec2 function(vec2 uv, float d) {\n      float s = sin(d);\n      float c = cos(d);\n      mat2 rotMatrix = mat2(c, -s, s, c);\n      return uv * rotMatrix;\n    }\n    ",drawDot:"\n    float function(vec2 uv, vec2 p, float r) {\n      uv += p;\n      float circle = length(uv) - r;\n      return clamp(-circle, 0.0, 1.0);\n    }\n    "}),A(Zt,"onEffectMask","\n    float outerRadius = radius * u_dimensions.y * 0.5;\n\n    float endAngle = range * progress - 0.0005;\n\n    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;\n\n    uv = $rotateUV(uv, -(offset));\n    float linewidth = width * u_pixelRatio;\n    float circle = length(uv) - (outerRadius - linewidth) ;\n    circle = abs(circle) - linewidth;\n    circle = clamp(-circle, 0.0, 1.0);\n\n    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);\n    float p = endAngle / (PI * 2.);\n\n    circle *= step(fract(angle), fract(p));\n\n    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));\n    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));\n\n    return mix(shaderColor, maskColor, circle);\n  "),A(Zt,"onColorize","\n    return color;\n  ");class qt extends St{constructor(...e){super(...e),A(this,"name","holePunch")}static getEffectKey(){return"holePunch"}static resolveDefaults(e){var t;return{x:e.x||0,y:e.y||0,width:e.width||50,height:e.height||50,radius:null!==(t=e.radius)&&void 0!==t?t:0}}}A(qt,"z$__type__Props",void 0),A(qt,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{var t=e;return Array.isArray(t)?2===t.length?t=[t[0],t[1],t[0],t[1]]:3===t.length?t=[t[0],t[1],t[2],t[0]]:4!==t.length&&(t=[t[0],t[0],t[0],t[0]]):"number"==typeof t&&(t=[t,t,t,t]),t}}}),A(qt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),A(qt,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  vec2 size = vec2(width, height) * 0.5;\n  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);\n  vec2 pos = basePos - size;\n  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);\n  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);\n  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);\n  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);\n  return $boxDist(pos, size, r);\n  "),A(qt,"onEffectMask","\n  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));\n  ");class Jt{constructor(){A(this,"shCache",new Map),A(this,"shConstructors",{}),A(this,"attachedShader",null),A(this,"effectConstructors",{}),A(this,"renderer",void 0),this.registerShaderType("DefaultShader",Nt),this.registerShaderType("DefaultShaderBatched",Ft),this.registerShaderType("RoundedRectangle",Pt),this.registerShaderType("DynamicShader",Mt),this.registerShaderType("SdfShader",Ot),this.registerEffectType("border",Wt),this.registerEffectType("borderBottom",Kt),this.registerEffectType("borderLeft",$t),this.registerEffectType("borderRight",Ht),this.registerEffectType("borderTop",Qt),this.registerEffectType("fadeOut",Gt),this.registerEffectType("linearGradient",Yt),this.registerEffectType("radialGradient",Vt),this.registerEffectType("grayscale",jt),this.registerEffectType("glitch",Xt),this.registerEffectType("radius",Ut),this.registerEffectType("radialProgress",Zt),this.registerEffectType("holePunch",qt)}registerShaderType(e,t){this.shConstructors[e]=t}registerEffectType(e,t){this.effectConstructors[e]=t}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(e,t){if(!this.renderer)throw new Error("Renderer is not been defined");var r=this.shConstructors[e];if(!r)throw new Error(`Shader type "${e}" is not registered`);if("DynamicShader"===e)return this.loadDynamicShader(t);var n=r.resolveDefaults(t),o=r.makeCacheKey(n)||r.name;if(o&&this.shCache.has(o))return{shader:this.shCache.get(o),props:n};var i=new r(this.renderer,t);return o&&this.shCache.set(o,i),{shader:i,props:n}}loadDynamicShader(e){if(!this.renderer)throw new Error("Renderer is not been defined");var t=Mt.resolveDefaults(e,this.effectConstructors),r=Mt.makeCacheKey(t,this.effectConstructors);if(r&&this.shCache.has(r))return{shader:this.shCache.get(r),props:t};var n=new Mt(this.renderer,e,this.effectConstructors);return r&&this.shCache.set(r,n),{shader:n,props:t}}useShader(e){this.attachedShader!==e&&(this.attachedShader&&this.attachedShader.detach(),e.attach(),this.attachedShader=e)}}class er{constructor(){A(this,"data",{})}reset(){this.data={}}increment(e){this.data[e]||(this.data[e]=0),this.data[e]++}getData(){return S({},this.data)}}var tr=function(){var e=b(x().mark((function e(t){var r,n;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return r=e.sent,e.next=5,r.arrayBuffer();case 5:if(n=e.sent,-1===t.indexOf(".ktx")){e.next=8;break}return e.abrupt("return",rr(n));case 8:return e.abrupt("return",nr(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rr=function(){var e=b(x().mark((function e(t){var r,n,o,i,a,s,l;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=new DataView(t),n=16909060===r.getUint32(12),o=[],i={glInternalFormat:r.getUint32(28,n),pixelWidth:r.getUint32(36,n),pixelHeight:r.getUint32(40,n),numberOfMipmapLevels:r.getUint32(56,n),bytesOfKeyValueData:r.getUint32(60,n)},a=64,a+=i.bytesOfKeyValueData,s=0;s<i.numberOfMipmapLevels;s++)l=r.getUint32(a),a+=4,o.push(r.buffer.slice(a,l)),a+=l;return e.abrupt("return",{data:{glInternalFormat:i.glInternalFormat,mipmaps:o,width:i.pixelWidth||0,height:i.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nr=function(){var e=b(x().mark((function e(t){var r,n,o,i,a,s,l,d,u,h,c,f;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(13,36196,7,6,11,12,r=t,n=new Int32Array(r,0,13),o=n[12]+52,i=new Uint8Array(r,o),a=[],s={pixelWidth:n[7],pixelHeight:n[6],numberOfMipmapLevels:n[11]||0},l=0,d=s.pixelWidth||0,u=s.pixelHeight||0,h=0;h<s.numberOfMipmapLevels;h++)c=(d+3>>2)*(u+3>>2)*8,f=new Uint8Array(r,i.byteOffset+l,c),a.push(f),l+=c,d>>=1,u>>=1;return e.abrupt("return",{data:{glInternalFormat:36196,mipmaps:a,width:s.pixelWidth||0,height:s.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();class or extends O{constructor(e,t){super(e),A(this,"props",void 0),this.props=or.resolveDefaults(t)}hasAlphaChannel(e){return-1!==e.indexOf("image/png")}getTextureData(){var e=this;return b(x().mark((function t(){var r,n,o,i,a,s,l;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,n=r.src,o=r.premultiplyAlpha,n){t.next=3;break}return t.abrupt("return",{data:null});case 3:if(!(n instanceof ImageData)){t.next=5;break}return t.abrupt("return",{data:n,premultiplyAlpha:o});case 5:if(!/\.(ktx|pvr)$/.test(n)){t.next=7;break}return t.abrupt("return",tr(n));case 7:if(!e.txManager.imageWorkerManager){t.next=13;break}return t.next=10,e.txManager.imageWorkerManager.getImage(n,o);case 10:return t.abrupt("return",t.sent);case 13:if(!e.txManager.hasCreateImageBitmap){t.next=28;break}return t.next=16,fetch(n);case 16:return i=t.sent,t.next=19,i.blob();case 19:return a=t.sent,s=null!=o?o:e.hasAlphaChannel(a.type),t.next=23,createImageBitmap(a,{premultiplyAlpha:s?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"});case 23:return t.t0=t.sent,t.t1=s,t.abrupt("return",{data:t.t0,premultiplyAlpha:t.t1});case 28:return(l=new Image).src=n,t.next=32,new Promise(((e,t)=>{l.onload=()=>e(),l.onerror=()=>t(new Error("Failed to load image"))})).catch((e=>{console.error(e)}));case 32:return t.abrupt("return",{data:l,premultiplyAlpha:null==o||o});case 33:case"end":return t.stop()}}),t)})))()}static makeCacheKey(e){var t=or.resolveDefaults(e);return!(t.src instanceof ImageData)&&`ImageTexture,${t.src},${t.premultiplyAlpha}`}static resolveDefaults(e){var t,r;return{src:null!==(t=e.src)&&void 0!==t?t:"",premultiplyAlpha:null===(r=e.premultiplyAlpha)||void 0===r||r}}}A(or,"z$__type__Props",void 0);class ir{constructor(e,t=0){A(this,"iterator",void 0),A(this,"peekBuffer",[]),A(this,"_lastIndex",void 0),this.iterator=e,this.iterator=e,this._lastIndex=t-1,this.peekBuffer=[]}next(){var e=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return e.done?this._lastIndex=-1:this._lastIndex++,e}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];var e=this.iterator.next();return this.peekBuffer.push(e),e}get lastIndex(){return this._lastIndex}}function ar(e,t=0){var r,n;return x().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:r=t;case 1:if(!(r<e.length)){o.next=10;break}if(void 0!==(n=e.codePointAt(r))){o.next=5;break}throw new Error("Invalid Unicode code point");case 5:return o.next=7,n;case 7:r+=n<=65535?1:2,o.next=1;break;case 10:case"end":return o.stop()}}),ne)}function sr(e,t,r,n,o,i,a,s,l,d,u,h,c,f,p,v,g,m,x){_(p,"Font face must be loaded"),_(p.loaded,"Font face must be loaded"),_(p.data,"Font face must be loaded"),_(p.shaper,"Font face must be loaded");for(var y,b=s/p.data.info.size,w=l/b,S=i/b,A=d/b,C=c[e],k=(null==C?void 0:C.codepointIndex)||0,I=(null==C?void 0:C.maxX)||0,B=(null==C?void 0:C.maxY)||0,R=t,E=r,N=0,F={codepointIndex:-1,bufferOffset:-1,xStart:-1},L=p.shaper,z={letterSpacing:A},M=L.shapeText(z,new ir(ar(n,k),k)),P=-1,D=[],O=a/b,U=function(e,t,r){var n,o=0,i=T(r.shapeText(t,new ir(ar(e,0),0)));try{for(i.s();!(n=i.n()).done;){var a=n.value;a.mapped&&(o+=a.xAdvance)}}catch(s){i.e(s)}finally{i.f()}return o}(m,z,L),W=!0;W;){for(var Y=(0===x||e+1<x)&&("both"!==h||g||E+w+p.maxCharHeight<=O),j=Y?S:S-U,H=0,Q=E+w>=f.y1,K=E<=f.y2,$=Q&&K;(y=M.next())&&!y.done;){var X=y.value;if(e===c.length)c.push({codepointIndex:X.cluster,maxY:B,maxX:I});else if(e>c.length)throw new Error("Unexpected lineCache length");if(32===X.codepoint||10===X.codepoint?-1!==F.codepointIndex&&(F.codepointIndex=-1,H=R):-1===F.codepointIndex&&(F.codepointIndex=X.cluster,F.bufferOffset=N,F.xStart=H),X.mapped){var G=R+X.xOffset+X.width;if("none"!==h&&G>=j&&-1!==F.codepointIndex&&F.xStart>0){if(Y){M=L.shapeText(z,new ir(ar(n,F.codepointIndex),F.codepointIndex)),N=F.bufferOffset;break}M=L.shapeText(z,new ir(ar(m,0),0)),R=F.xStart,N=F.bufferOffset,h="none"}else{var V=R+X.xOffset,Z=E+X.yOffset;if($){-1===P&&(P=N);var q=p.getAtlasEntry(X.glyphId),J=q.x/p.data.common.scaleW,ee=q.y/p.data.common.scaleH,te=q.width/p.data.common.scaleW,re=q.height/p.data.common.scaleH;u[N++]=V,u[N++]=Z,u[N++]=J,u[N++]=ee,u[N++]=V+X.width,u[N++]=Z,u[N++]=J+te,u[N++]=ee,u[N++]=V,u[N++]=Z+X.height,u[N++]=J,u[N++]=ee+re,u[N++]=V+X.width,u[N++]=Z+X.height,u[N++]=J+te,u[N++]=ee+re}B=Math.max(B,Z+X.height),I=Math.max(I,V+X.width),R+=X.xAdvance}}else if(10===X.codepoint){if(Y)break;M=L.shapeText(z,new ir(ar(m,0),0)),h="none"}}-1!==P&&(D.push({bufferStart:P,bufferEnd:N}),P=-1),R=0,E+=w,e++,F.codepointIndex=-1,H=0,!v&&"both"===h&&E>f.y2||y&&y.done?W=!1:Y||(W=!1)}if("center"===o)for(var ne="none"===h?I:S,oe=0;oe<D.length;oe++)for(var ie=D[oe],ae=(ne-(u[ie.bufferEnd-4]-u[ie.bufferStart]))/2,se=ie.bufferStart;se<ie.bufferEnd;se+=4)u[se]+=ae;else if("right"===o)for(var le="none"===h?I:S,de=0;de<D.length;de++)for(var ue=D[de],he=le-(ue.bufferEnd===ue.bufferStart?0:u[ue.bufferEnd-4]-u[ue.bufferStart]),ce=ue.bufferStart;ce<ue.bufferEnd;ce+=4)u[ce]+=he;return _(y),{bufferNumFloats:N,bufferNumQuads:N/16,layoutNumCharacters:y.done?n.length-k:y.value.cluster-k+1,fullyProcessed:!!y.done,maxX:I,maxY:B}}function lr(e,t,r,n,o,i,a,s){var l,d,u=e.screen,h=e.sdf;if(U(a)){var c=a.x1-t,f=c+(a.x2-a.x1),p=a.y1-r+n,v=(l=p-i,d=o||1,Math.floor(l/d)*d),g=function(e,t){return Math.ceil(e/t)*t}(p+(a.y2-a.y1)+i,o||1);u.x1=c,u.y1=v,u.x2=f,u.y2=g,h.x1=c/s,h.y1=v/s,h.x2=f/s,h.y2=g/s,e.numLines=Math.ceil((g-v)/o),e.firstLineIdx=o?Math.floor(v/o):0}else u.x1=0,u.y1=0,u.x2=0,u.y2=0,h.x1=0,h.y1=0,h.x2=0,h.y2=0,e.numLines=0,e.firstLineIdx=0;e.valid=!0}var dr={normal:400,bold:700,bolder:900,lighter:100},ur=e=>"number"==typeof e?e:dr[e]||400;var hr=D((function(e,t,r,n,o){var i,a=ur(r),s=T(e);try{for(s.s();!(i=s.n()).done;){var l=i.value[t];if(l){if(1===l.size)return console.warn(`TrFontManager: Only one font face found for family: '${t}' - will be used for all weights and styles`),l.values().next().value;var d,u=new Map,h=T(l);try{for(h.s();!(d=h.n()).done;){var c=d.value,f=ur(c.descriptors.weight);if(f===a&&c.descriptors.style===n&&c.descriptors.stretch===o)return c;u.set(f,c)}}catch(v){h.e(v)}finally{h.f()}var p=`TrFontManager: No exact match: '${t} Weight: ${a} Style: ${n} Stretch: ${o}'`;if(console.error(p),400===a&&u.has(500))return u.get(500);if(500===a&&u.has(400))return u.get(400);if(a<400){for(;a>0;){if(u.has(a))return u.get(a);a-=100}a=600}for(;a<1e3;){if(u.has(a))return u.get(a);a+=100}for(a=500;a>0;){if(u.has(a))return u.get(a);a-=100}}}}catch(v){s.e(v)}finally{s.f()}}));class cr{constructor(e){A(this,"textRenderers",void 0),this.textRenderers=e}addFontFace(e){for(var t in this.textRenderers){var r=this.textRenderers[t];r&&r.isFontFaceSupported(e)&&r.addFontFace(e)}}static resolveFontFace(e,t){var r=t.fontFamily,n=t.fontWeight,o=t.fontStyle,i=t.fontStretch;return hr(e,r,n,o,i)}}var fr={x:0,y:0,width:0,height:0};class pr extends Ct{constructor(e){super(e),A(this,"ssdfFontFamilies",{}),A(this,"msdfFontFamilies",{}),A(this,"fontFamilyArray",[this.ssdfFontFamilies,this.msdfFontFamilies]),A(this,"sdfShader",void 0),A(this,"rendererBounds",void 0),this.sdfShader=this.stage.shManager.loadShader("SdfShader").shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,t)=>{e.props.fontFamily=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontWeight:(e,t)=>{e.props.fontWeight=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStyle:(e,t)=>{e.props.fontStyle=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStretch:(e,t)=>{e.props.fontStretch=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontSize:(e,t)=>{e.props.fontSize=t,this.invalidateLayoutCache(e)},text:(e,t)=>{e.props.text=t,this.invalidateLayoutCache(e)},textAlign:(e,t)=>{e.props.textAlign=t,this.invalidateLayoutCache(e)},color:(e,t)=>{e.props.color=t},x:(e,t)=>{e.props.x=t,e.elementBounds.valid&&(this.setElementBoundsX(e),!e.renderWindow.valid&&W(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},y:(e,t)=>{e.props.y=t,e.elementBounds.valid&&(this.setElementBoundsY(e),!e.renderWindow.valid&&W(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},contain:(e,t)=>{e.props.contain=t,this.invalidateLayoutCache(e)},width:(e,t)=>{e.props.width=t,"none"!==e.props.contain&&this.invalidateLayoutCache(e)},height:(e,t)=>{e.props.height=t,"both"===e.props.contain&&this.invalidateLayoutCache(e)},offsetY:(e,t)=>{e.props.offsetY=t,this.invalidateLayoutCache(e)},scrollable:(e,t)=>{e.props.scrollable=t,this.invalidateLayoutCache(e)},scrollY:(e,t)=>{e.props.scrollY=t,this.scheduleUpdateState(e)},letterSpacing:(e,t)=>{e.props.letterSpacing=t,this.invalidateLayoutCache(e)},lineHeight:(e,t)=>{e.props.lineHeight=t,this.invalidateLayoutCache(e)},maxLines:(e,t)=>{e.props.maxLines=t,this.invalidateLayoutCache(e)},textBaseline:(e,t)=>{e.props.textBaseline=t,this.invalidateLayoutCache(e)},verticalAlign:(e,t)=>{e.props.verticalAlign=t,this.invalidateLayoutCache(e)},overflowSuffix:(e,t)=>{e.props.overflowSuffix=t,this.invalidateLayoutCache(e)},debug:(e,t)=>{e.props.debug=t}}}canRenderFont(e){var t=e.fontFamily;return t in this.ssdfFontFamilies||t in this.msdfFontFamilies||"$$SDF_FAILURE_TEST$$"===t}isFontFaceSupported(e){return e instanceof Y}addFontFace(e){_(e instanceof Y);var t=e.fontFamily,r="ssdf"===e.type?this.ssdfFontFamilies:"msdf"===e.type?this.msdfFontFamilies:void 0;if(r){var n=r[t];n||(n=new Set,r[t]=n),n.add(e)}else console.warn(`Invalid font face type: ${e.type}`)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new E,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(e){var t=e.trFontFace,r=e.textH,n=e.lineCache,o=e.debugData,i=e.forceFullLayoutCalc;if(o.updateCount++,"initialState"===e.status&&this.setStatus(e,"loading"),!t){if(t=this.resolveFontFace(e.props),e.trFontFace=t,!t){var a=`SdfTextRenderer: Could not resolve font face for family: '${e.props.fontFamily}'`;return console.error(a),void this.setStatus(e,"failed",new Error(a))}t.texture.setRenderableOwner(e,e.isRenderable)}if(t.loaded){_(t.data,"Font face data should be loaded");var s=e.props,l=s.text,d=s.fontSize,u=s.x,h=s.y,c=s.contain,f=s.width,p=s.height,v=s.lineHeight,g=s.verticalAlign,m=s.scrollable,x=s.overflowSuffix,y=s.maxLines,b="both"===c&&m?e.props.scrollY:0,w=e.renderWindow,S=t.data.info.size,A=d/S,C=v/A;e.distanceRange=A*t.data.distanceField.distanceRange;var T=24*l.length,k=e.vertexBuffer;(!k||k.length<T)&&(k=new Float32Array(2*T));var I=e.elementBounds;if(I.valid||(this.setElementBoundsX(e),this.setElementBoundsY(e),I.valid=!0),!i&&w.valid){var B=w.screen;if(u+B.x1<=I.x1&&u+B.x2>=I.x2&&h-b+B.y1<=I.y1&&h-b+B.y2>=I.y2)return void this.setStatus(e,"loaded");w.valid=!1,this.setStatus(e,"loading")}var R=e.props,E=R.offsetY,N=R.textAlign;if(!w.valid){if(!W(I,this.rendererBounds))return;lr(w,u,h,b,v,"both"===c?I.y2-I.y1:0,I,A)}var F=function(e,t,r,n,o,i,a,s,l){var d=Math.min(Math.max(a.firstLineIdx,0),s.length),u=0;"middle"===n?u=(t-e)/2:"bottom"===n&&(u=t-e);var h=o/i+d*t+u;if(!(l&&h>=l/i))return{sdfX:0,sdfY:h,lineIndex:d}}(S,C,0,g,E,A,w,n,r);if(F){var L=e.props.letterSpacing,z=sr(F.lineIndex,F.sdfX,F.sdfY,l,N,f,p,d,v,L,k,c,n,w.sdf,t,i,m,x,y);e.bufferUploaded=!1,e.bufferNumFloats=z.bufferNumFloats,e.bufferNumQuads=z.bufferNumQuads,e.vertexBuffer=k,e.renderWindow=w,o.lastLayoutNumCharacters=z.layoutNumCharacters,o.bufferSize=k.byteLength,z.fullyProcessed&&(e.textW=z.maxX*A,e.textH=z.maxY*A),this.setStatus(e,"loaded")}else this.setStatus(e,"loaded")}else t.once("loaded",(()=>{this.scheduleUpdateState(e)}))}renderQuads(e,t,r,n){var o,i;if(e.vertexBuffer){var a=this.stage.renderer,s=e.props,l=s.fontSize,d=s.color,u=s.contain,h=s.scrollable,c=s.zIndex,f=s.debug,p="both"===u&&h?e.props.scrollY:0,v=e.textW,g=void 0===v?0:v,m=e.textH,x=void 0===m?0:m,y=e.distanceRange,b=e.vertexBuffer,w=e.bufferUploaded,S=e.trFontFace,A=e.elementBounds,C=e.webGlBuffers;if(!C){var T=a.glw,k=4*Float32Array.BYTES_PER_ELEMENT,I=T.createBuffer();_(I),e.webGlBuffers=new j([{buffer:I,attributes:{a_position:{name:"a_position",size:2,type:T.FLOAT,normalized:!1,stride:k,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:T.FLOAT,normalized:!1,stride:k,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,_(e.webGlBuffers),C=e.webGlBuffers}if(!w){var B,R,E=a.glw,N=null!==(B=null===(R=C)||void 0===R?void 0:R.getBuffer("a_textureCoordinate"))&&void 0!==B?B:null;E.arrayBufferData(N,b,E.STATIC_DRAW),e.bufferUploaded=!0}if(_(S),h&&"both"===u){_(A.valid);var F=H(A,fr);r.valid?(e.clippingRect.valid=!0,r=L(r,F,e.clippingRect)):(e.clippingRect.valid=!0,r=Q(F,e.clippingRect))}var z=new K(a.glw,a.options,C,this.sdfShader,{transform:t.data,color:$(d,n),size:l/((null===(o=S.data)||void 0===o?void 0:o.info.size)||0),scrollY:p,distanceRange:y,debug:f.sdfShaderDebug},n,r,{height:x,width:g},0,c),M=null===(i=e.trFontFace)||void 0===i?void 0:i.texture;_(M);var P=this.stage.txManager.getCtxTexture(M);z.addTexture(P),z.length=e.bufferNumFloats,z.numQuads=e.bufferNumQuads,a.addRenderOp(z)}}setIsRenderable(e,t){var r;super.setIsRenderable(e,t),null===(r=e.trFontFace)||void 0===r||r.texture.setRenderableOwner(e,t)}destroyState(e){var t;super.destroyState(e),null===(t=e.trFontFace)||void 0===t||t.texture.setRenderableOwner(e,!1)}resolveFontFace(e){return cr.resolveFontFace(this.fontFamilyArray,e)}releaseFontFace(e){e.trFontFace&&(e.trFontFace.texture.setRenderableOwner(e,!1),e.trFontFace=void 0)}invalidateLayoutCache(e){e.renderWindow.valid=!1,e.elementBounds.valid=!1,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading"),this.scheduleUpdateState(e)}setElementBoundsX(e){var t=e.props,r=t.x,n=t.contain,o=t.width,i=e.elementBounds;i.x1=r,i.x2="none"!==n?r+o:1/0}setElementBoundsY(e){var t=e.props,r=t.y,n=t.contain,o=t.height,i=e.elementBounds;i.y1=r,i.y2="both"===n?r+o:1/0}}function vr(e,t){return gr.apply(this,arguments)}function gr(){return(gr=b(x().mark((function e(t,r){var n,o,i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Loading core extension",t),e.next=4,wt((()=>w.import(t)),void 0);case 4:n=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error(`The core extension module at '${t}' could not be loaded.`),console.error(e.t0),e.abrupt("return");case 12:if(n.default){e.next=15;break}return console.error(`The core extension module at '${t}' does not have a default export.`),e.abrupt("return");case 15:if(o=n.default,!(o.prototype instanceof X)){e.next=29;break}return i=new o,e.prev=18,e.next=21,i.run(r);case 21:e.next=27;break;case 23:e.prev=23,e.t1=e.catch(18),console.error(`The core extension at '${t}' threw an error.`),console.error(e.t1);case 27:e.next=30;break;case 29:console.error(`The core extension at '${t}' does not extend CoreExtension.`);case 30:case"end":return e.stop()}}),e,null,[[0,7],[18,23]])})))).apply(this,arguments)}function mr(e){for(var t={boolean:!0,string:!0,number:!0},r=Object.keys(e),n=0;n<r.length;n++){var o=r[n];if(o){var i=e[o],a=typeof i;"string"===a&&i.length>2048&&(console.warn(`Custom Data value for ${o} is too long, it will be truncated to 2048 characters`),e[o]=i.substring(0,2048)),t[a]||(console.warn(`Custom Data value for ${o} is not a boolean, string, or number, it will be ignored`),delete e[o])}}return e}class xr extends E{constructor(e,t,r){var n,o,i,a;super(),A(this,"root",null),A(this,"driver",void 0),A(this,"canvas",void 0),A(this,"settings",void 0),A(this,"inspector",null),A(this,"nodes",new Map),A(this,"nextTextureId",1),A(this,"textureTracker",void 0);var s={appWidth:e.appWidth||1920,appHeight:e.appHeight||1080,txMemByteThreshold:e.txMemByteThreshold||124e6,boundsMargin:e.boundsMargin||0,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:null!==(n=e.clearColor)&&void 0!==n?n:0,coreExtensionModule:e.coreExtensionModule||null,experimental_FinalizationRegistryTextureUsageTracker:null!==(o=e.experimental_FinalizationRegistryTextureUsageTracker)&&void 0!==o&&o,textureCleanupOptions:e.textureCleanupOptions||{},fpsUpdateInterval:e.fpsUpdateInterval||0,numImageWorkers:void 0!==e.numImageWorkers?e.numImageWorkers:2,enableContextSpy:null!==(i=e.enableContextSpy)&&void 0!==i&&i,enableInspector:null!==(a=e.enableInspector)&&void 0!==a&&a};this.settings=s;var l=s.appWidth,d=s.appHeight,u=s.deviceLogicalPixelRatio,h=s.devicePhysicalPixelRatio,c=s.enableInspector,f=e=>{this.driver.releaseTexture(e)},p=s.experimental_FinalizationRegistryTextureUsageTracker&&"function"==typeof FinalizationRegistry;this.textureTracker=p?new gt(f):new vt(f,this.settings.textureCleanupOptions);var v=l*u,g=d*u;this.driver=r;var m,x=document.createElement("canvas");if(this.canvas=x,x.width=v*h,x.height=g*h,x.style.width=`${v}px`,x.style.height=`${g}px`,!(m="string"==typeof t?document.getElementById(t):t))throw new Error("Could not find target element");r.onCreateNode=e=>{this.nodes.set(e.id,e)},r.onBeforeDestroyNode=e=>{this.nodes.delete(e.id)},r.onFpsUpdate=e=>{this.emit("fpsUpdate",e)},r.onFrameTick=e=>{this.emit("frameTick",e)},r.onIdle=()=>{this.emit("idle")},m.appendChild(x),c&&!k()&&(this.inspector=new bt(x,s))}init(){var e=this;return b(x().mark((function t(){return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.driver.init(e,e.settings,e.canvas);case 2:e.root=e.driver.getRootNode();case 3:case"end":return t.stop()}}),t)})))()}createNode(e){return this.inspector?this.inspector.createNode(this.driver,this.resolveNodeDefaults(e)):this.driver.createNode(this.resolveNodeDefaults(e))}createTextNode(e){var t,r,n,o,i,a,s,l,d,u,h,c,f,p,v,g,m,x,y,b=null!==(t=e.fontSize)&&void 0!==t?t:16,w=S(S({},this.resolveNodeDefaults(e)),{},{text:null!==(r=e.text)&&void 0!==r?r:"",textRendererOverride:null!==(n=e.textRendererOverride)&&void 0!==n?n:null,fontSize:b,fontFamily:null!==(o=e.fontFamily)&&void 0!==o?o:"sans-serif",fontStyle:null!==(i=e.fontStyle)&&void 0!==i?i:"normal",fontWeight:null!==(a=e.fontWeight)&&void 0!==a?a:"normal",fontStretch:null!==(s=e.fontStretch)&&void 0!==s?s:"normal",textAlign:null!==(l=e.textAlign)&&void 0!==l?l:"left",contain:null!==(d=e.contain)&&void 0!==d?d:"none",scrollable:null!==(u=e.scrollable)&&void 0!==u&&u,scrollY:null!==(h=e.scrollY)&&void 0!==h?h:0,offsetY:null!==(c=e.offsetY)&&void 0!==c?c:0,letterSpacing:null!==(f=e.letterSpacing)&&void 0!==f?f:0,lineHeight:null!==(p=e.lineHeight)&&void 0!==p?p:b,maxLines:null!==(v=e.maxLines)&&void 0!==v?v:0,textBaseline:null!==(g=e.textBaseline)&&void 0!==g?g:"alphabetic",verticalAlign:null!==(m=e.verticalAlign)&&void 0!==m?m:"top",overflowSuffix:null!==(x=e.overflowSuffix)&&void 0!==x?x:"...",debug:null!==(y=e.debug)&&void 0!==y?y:{}});return this.inspector?this.inspector.createTextNode(this.driver,w):this.driver.createTextNode(w)}resolveNodeDefaults(e){var t,r,n,o,i,a,s,l,d,u,h,c,f,p,v,g,m,x,y,b,w,S,A,C,T,_,k,I,B,R,E,N,F,L,z,M,P,D,O,U,W,Y,j,H,Q,K,$,X=null!==(t=e.color)&&void 0!==t?t:4294967295,G=null!==(r=null!==(n=null!==(o=e.colorTl)&&void 0!==o?o:e.colorTop)&&void 0!==n?n:e.colorLeft)&&void 0!==r?r:X,V=null!==(i=null!==(a=null!==(s=e.colorTr)&&void 0!==s?s:e.colorTop)&&void 0!==a?a:e.colorRight)&&void 0!==i?i:X,Z=null!==(l=null!==(d=null!==(u=e.colorBl)&&void 0!==u?u:e.colorBottom)&&void 0!==d?d:e.colorLeft)&&void 0!==l?l:X,q=null!==(h=null!==(c=null!==(f=e.colorBr)&&void 0!==f?f:e.colorBottom)&&void 0!==c?c:e.colorRight)&&void 0!==h?h:X,J=mr(null!==(p=e.data)&&void 0!==p?p:{});return{x:null!==(v=e.x)&&void 0!==v?v:0,y:null!==(g=e.y)&&void 0!==g?g:0,width:null!==(m=e.width)&&void 0!==m?m:0,height:null!==(x=e.height)&&void 0!==x?x:0,alpha:null!==(y=e.alpha)&&void 0!==y?y:1,autosize:null!==(b=e.autosize)&&void 0!==b&&b,clipping:null!==(w=e.clipping)&&void 0!==w&&w,color:X,colorTop:null!==(S=e.colorTop)&&void 0!==S?S:X,colorBottom:null!==(A=e.colorBottom)&&void 0!==A?A:X,colorLeft:null!==(C=e.colorLeft)&&void 0!==C?C:X,colorRight:null!==(T=e.colorRight)&&void 0!==T?T:X,colorBl:Z,colorBr:q,colorTl:G,colorTr:V,zIndex:null!==(_=e.zIndex)&&void 0!==_?_:0,zIndexLocked:null!==(k=e.zIndexLocked)&&void 0!==k?k:0,parent:null!==(I=e.parent)&&void 0!==I?I:null,texture:null!==(B=e.texture)&&void 0!==B?B:null,shader:null!==(R=e.shader)&&void 0!==R?R:null,src:null!==(E=e.src)&&void 0!==E?E:"",scale:null!==(N=e.scale)&&void 0!==N?N:null,scaleX:null!==(F=null!==(L=e.scaleX)&&void 0!==L?L:e.scale)&&void 0!==F?F:1,scaleY:null!==(z=null!==(M=e.scaleY)&&void 0!==M?M:e.scale)&&void 0!==z?z:1,mount:null!==(P=e.mount)&&void 0!==P?P:0,mountX:null!==(D=null!==(O=e.mountX)&&void 0!==O?O:e.mount)&&void 0!==D?D:0,mountY:null!==(U=null!==(W=e.mountY)&&void 0!==W?W:e.mount)&&void 0!==U?U:0,pivot:null!==(Y=e.pivot)&&void 0!==Y?Y:.5,pivotX:null!==(j=null!==(H=e.pivotX)&&void 0!==H?H:e.pivot)&&void 0!==j?j:.5,pivotY:null!==(Q=null!==(K=e.pivotY)&&void 0!==K?K:e.pivot)&&void 0!==Q?Q:.5,rotation:null!==($=e.rotation)&&void 0!==$?$:0,data:J}}destroyNode(e){return this.inspector&&this.inspector.destroyNode(e),this.driver.destroyNode(e)}createTexture(e,t,r){var n=this.nextTextureId++,o={descType:"texture",txType:e,props:t,options:S(S({},r),{},{id:n})};return this.textureTracker.registerTexture(o),o}createShader(e,t){return{descType:"shader",shType:e,props:t}}getNodeById(e){return this.nodes.get(e)||null}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}rerender(){throw new Error("Not implemented")}}class yr extends E{constructor(e,t,r){super(),A(this,"node",void 0),A(this,"props",void 0),A(this,"settings",void 0),A(this,"propStartValues",{}),A(this,"restoreValues",{}),A(this,"progress",0),A(this,"delayFor",0),A(this,"timingFunction",void 0),A(this,"propsList",void 0),this.node=e,this.props=t,this.settings=r,this.propStartValues={},this.propsList=Object.keys(t),this.propsList.forEach((t=>{this.propStartValues[t]=e[t]})),this.timingFunction=e=>e,r.easing&&"string"==typeof r.easing&&(this.timingFunction=G(r.easing)),this.delayFor=r.delay||0}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restore(){this.reset(),Object.keys(this.props).forEach((e=>{this.node[e]=this.propStartValues[e]}))}reverse(){this.progress=0,Object.keys(this.props).forEach((e=>{var t=this.props[e],r=this.propStartValues[e];this.props[e]=r,this.propStartValues[e]=t})),this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(e,t,r){return(this.timingFunction(e)||e)*(r-t)+t}update(e){var t=this.settings,r=t.duration,n=t.loop,o=t.easing,i=t.stopMethod;if(r)if(this.delayFor>0)this.delayFor-=e;else if(this.delayFor<=0&&0===this.progress&&this.emit("start",{}),this.progress+=e/r,this.progress>1&&(this.progress=n?0:1,i))this.emit("finished",{});else{for(var a=0;a<this.propsList.length;a++){var s=this.propsList[a],l=this.props[s],d=this.propStartValues[s],u=l;if(-1===s.indexOf("color"))this.node[s]=o?this.applyEasing(this.progress,d,u):d+(u-d)*this.progress;else{if(d===u){this.node[s]=d;continue}if(o){var h=this.timingFunction(this.progress)||this.progress,c=V(d,u,h);this.node[s]=c;continue}this.node[s]=V(d,u,this.progress)}}1===this.progress&&this.emit("finished",{})}else this.emit("finished",{})}}class br{constructor(e,t){A(this,"manager",void 0),A(this,"animation",void 0),A(this,"startedPromise",null),A(this,"startedResolve",null),A(this,"stoppedPromise",null),A(this,"stoppedResolve",null),A(this,"state",void 0),this.manager=e,this.animation=t,this.state="stopped"}start(){return this.makeStartedPromise(),this.animation.once("start",this.started.bind(this)),this.makeStoppedPromise(),this.animation.once("finished",this.finished.bind(this)),this.manager.activeAnimations.has(this.animation)||this.manager.registerAnimation(this.animation),this.state="running",this}stop(){return this.manager.unregisterAnimation(this.animation),null!==this.stoppedResolve&&(this.stoppedResolve(),this.stoppedResolve=null),this.animation.reset(),this.state="stopped",this}pause(){return this.manager.unregisterAnimation(this.animation),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStarted(){this.makeStartedPromise();var e=this.startedPromise;return _(e),e}waitUntilStopped(){this.makeStoppedPromise();var e=this.stoppedPromise;return _(e),e}makeStartedPromise(){null===this.startedResolve&&(this.startedPromise=new Promise((e=>{this.startedResolve=e})))}makeStoppedPromise(){null===this.stoppedResolve&&(this.stoppedPromise=new Promise((e=>{this.stoppedResolve=e})))}started(){_(this.startedResolve),this.startedResolve(this),this.startedResolve=null}finished(){_(this.stoppedResolve);var e=this.animation.settings,t=e.loop;if("reverse"===e.stopMethod)return this.animation.reverse(),void this.start();this.stoppedResolve(),this.stoppedResolve=null,t||this.manager.unregisterAnimation(this.animation)}}class wr{constructor(e){A(this,"data",void 0),e?(this.data=new Float32Array(9),this.data[0]=e[0],this.data[3]=e[3],this.data[6]=e[6],this.data[1]=e[1],this.data[4]=e[4],this.data[7]=e[7],this.data[2]=e[2],this.data[5]=e[5],this.data[8]=e[8]):this.data=new Float32Array(9)}static get temp(){return Ar}static multiply(e,t,r){var n=e.data[0]*t.data[0]+e.data[3]*t.data[1]+e.data[6]*t.data[2],o=e.data[0]*t.data[3]+e.data[3]*t.data[4]+e.data[6]*t.data[5],i=e.data[0]*t.data[6]+e.data[3]*t.data[7]+e.data[6]*t.data[8],a=e.data[1]*t.data[0]+e.data[4]*t.data[1]+e.data[7]*t.data[2],s=e.data[1]*t.data[3]+e.data[4]*t.data[4]+e.data[7]*t.data[5],l=e.data[1]*t.data[6]+e.data[4]*t.data[7]+e.data[7]*t.data[8],d=e.data[2]*t.data[0]+e.data[5]*t.data[1]+e.data[8]*t.data[2],u=e.data[2]*t.data[3]+e.data[5]*t.data[4]+e.data[8]*t.data[5],h=e.data[2]*t.data[6]+e.data[5]*t.data[7]+e.data[8]*t.data[8];return r||(r=new wr),r.data[0]=n,r.data[3]=o,r.data[6]=i,r.data[1]=a,r.data[4]=s,r.data[7]=l,r.data[2]=d,r.data[5]=u,r.data[8]=h,r}static identity(e){return e||(e=new wr),e.data[0]=1,e.data[3]=0,e.data[6]=0,e.data[1]=0,e.data[4]=1,e.data[7]=0,e.data[2]=0,e.data[5]=0,e.data[8]=1,e}static translate(e,t,r){return r||(r=new wr),r.data[0]=1,r.data[3]=0,r.data[6]=e,r.data[1]=0,r.data[4]=1,r.data[7]=t,r.data[2]=0,r.data[5]=0,r.data[8]=1,r}static scale(e,t,r){return r||(r=new wr),r.data[0]=e,r.data[3]=0,r.data[6]=0,r.data[1]=0,r.data[4]=t,r.data[7]=0,r.data[2]=0,r.data[5]=0,r.data[8]=1,r}static rotate(e,t){var r=Math.cos(e),n=Math.sin(e);return t||(t=new wr),t.data[0]=r,t.data[3]=-n,t.data[6]=0,t.data[1]=n,t.data[4]=r,t.data[7]=0,t.data[2]=0,t.data[5]=0,t.data[8]=1,t}static copy(e,t,r){return t||(t=new wr),t.data[0]=e.data[0],t.data[1]=e.data[1],t.data[2]=e.data[2],t.data[3]=e.data[3],t.data[4]=e.data[4],t.data[5]=e.data[5],t.data[6]=e.data[6],t.data[7]=e.data[7],t.data[8]=e.data[8],t}translate(e,t){return this.data[6]=this.data[0]*e+this.data[3]*t+this.data[6],this.data[7]=this.data[1]*e+this.data[4]*t+this.data[7],this}scale(e,t){return this.data[0]=this.data[0]*e,this.data[3]=this.data[3]*t,this.data[1]=this.data[1]*e,this.data[4]=this.data[4]*t,this}rotate(e){if(0===e||!(e%Math.PI*2))return this;var t=Math.cos(e),r=Math.sin(e),n=this.data[0]*t+this.data[3]*r,o=this.data[3]*t-this.data[0]*r,i=this.data[1]*t+this.data[4]*r,a=this.data[4]*t-this.data[1]*r;return this.data[0]=n,this.data[3]=o,this.data[1]=i,this.data[4]=a,this}multiply(e){return wr.multiply(this,e,this)}get tx(){return this.data[6]}get ty(){return this.data[7]}get ta(){return this.data[0]}get tb(){return this.data[3]}get tc(){return this.data[1]}get td(){return this.data[4]}transformPoint(e,t){return[this.data[0]*e+this.data[3]*t+this.data[6],this.data[1]*e+this.data[4]*t+this.data[1]]}}var Sr,Ar=new wr;class Cr{constructor(e){A(this,"data",void 0),this.data=new Float32Array(8),e&&(this.data[0]=e[0],this.data[2]=e[2],this.data[4]=e[4],this.data[6]=e[6],this.data[1]=e[1],this.data[3]=e[3],this.data[5]=e[5],this.data[7]=e[7])}static translate(e,t,r,n,o,i,a,s,l){return l||(l=new Cr),l.data[0]=e,l.data[2]=r,l.data[4]=o,l.data[6]=a,l.data[1]=t,l.data[3]=n,l.data[5]=i,l.data[7]=s,l}get x1(){return this.data[0]}get x2(){return this.data[2]}get x3(){return this.data[4]}get x4(){return this.data[6]}get y1(){return this.data[1]}get y2(){return this.data[3]}get y3(){return this.data[5]}get y4(){return this.data[7]}}!function(e){e[e.Init=0]="Init",e[e.OutOfBounds=2]="OutOfBounds",e[e.InBounds=4]="InBounds",e[e.InViewport=8]="InViewport"}(Sr||(Sr={}));var Tr,_r=new Map;_r.set(Sr.Init,"init"),_r.set(Sr.OutOfBounds,"outOfBounds"),_r.set(Sr.InBounds,"inBounds"),_r.set(Sr.InViewport,"inViewport"),function(e){e[e.Children=1]="Children",e[e.ScaleRotate=2]="ScaleRotate",e[e.Local=4]="Local",e[e.Global=8]="Global",e[e.Clipping=16]="Clipping",e[e.CalculatedZIndex=32]="CalculatedZIndex",e[e.ZIndexSortedChildren=64]="ZIndexSortedChildren",e[e.PremultipliedColors=128]="PremultipliedColors",e[e.WorldAlpha=256]="WorldAlpha",e[e.RenderState=512]="RenderState",e[e.IsRenderable=1024]="IsRenderable",e[e.None=0]="None",e[e.All=2047]="All"}(Tr||(Tr={}));class kr extends E{constructor(e,t){super(),A(this,"stage",void 0),A(this,"children",[]),A(this,"props",void 0),A(this,"updateType",Tr.All),A(this,"globalTransform",void 0),A(this,"scaleRotateTransform",void 0),A(this,"localTransform",void 0),A(this,"renderCoords",void 0),A(this,"renderBound",void 0),A(this,"strictBound",void 0),A(this,"preloadBound",void 0),A(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1}),A(this,"isRenderable",!1),A(this,"renderState",Sr.Init),A(this,"worldAlpha",1),A(this,"premultipliedColorTl",0),A(this,"premultipliedColorTr",0),A(this,"premultipliedColorBl",0),A(this,"premultipliedColorBr",0),A(this,"calcZIndex",0),A(this,"onTextureLoaded",((e,t)=>{this.autosizeNode(t),this.stage.requestRender(),this.emit("loaded",{type:"texture",dimensions:t})})),A(this,"onTextureFailed",((e,t)=>{this.emit("failed",{type:"texture",error:t})})),A(this,"onTextureFreed",(e=>{this.emit("freed",{type:"texture"})})),this.stage=e,this.props=S(S({},t),{},{parent:null}),this.parent=t.parent,this.updateScaleRotateTransform()}loadTexture(e,t,r=null){this.props.texture&&this.unloadTexture();var n=this.stage.txManager.loadTexture(e,t,r);this.props.texture=n,this.props.textureOptions=r,this.setUpdateType(Tr.IsRenderable),queueMicrotask((()=>{"loaded"===n.state?this.onTextureLoaded(n,n.dimensions):"failed"===n.state?this.onTextureFailed(n,n.error):"freed"===n.state&&this.onTextureFreed(n),n.on("loaded",this.onTextureLoaded),n.on("failed",this.onTextureFailed),n.on("freed",this.onTextureFreed)}))}unloadTexture(){if(this.props.texture){var e=this.props.texture;e.off("loaded",this.onTextureLoaded),e.off("failed",this.onTextureFailed),e.off("freed",this.onTextureFreed),e.setRenderableOwner(this,!1)}this.props.texture=null,this.props.textureOptions=null,this.setUpdateType(Tr.IsRenderable)}autosizeNode(e){this.autosize&&(this.width=e.width,this.height=e.height)}loadShader(e,t){var r=this.stage.renderer.getShaderManager();_(r);var n=r.loadShader(e,t),o=n.shader,i=n.props;this.props.shader=o,this.props.shaderProps=i,this.setUpdateType(Tr.IsRenderable)}setUpdateType(e){this.updateType|=e;var t=this.props.parent;!t||t.updateType&Tr.Children||t.setUpdateType(Tr.Children)}sortChildren(){this.children.sort(((e,t)=>e.calcZIndex-t.calcZIndex))}updateScaleRotateTransform(){this.scaleRotateTransform=wr.rotate(this.props.rotation,this.scaleRotateTransform).scale(this.props.scaleX,this.props.scaleY)}updateLocalTransform(){_(this.scaleRotateTransform);var e=this.props.pivotX*this.props.width,t=this.props.pivotY*this.props.height,r=this.props.mountX*this.props.width,n=this.props.mountY*this.props.height;this.localTransform=wr.translate(e-r+this.props.x,t-n+this.props.y,this.localTransform).multiply(this.scaleRotateTransform).translate(-e,-t),this.setUpdateType(Tr.Global)}update(e,t){this.updateType&Tr.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(Tr.Local)),this.updateType&Tr.Local&&(this.updateLocalTransform(),this.setUpdateType(Tr.Global));var r=this.props.parent,n=Tr.None;this.updateType&Tr.Global&&(_(this.localTransform),this.globalTransform=wr.copy((null==r?void 0:r.globalTransform)||this.localTransform,this.globalTransform),r&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(Tr.Clipping|Tr.RenderState|Tr.Children),n|=Tr.Global),this.updateType&Tr.Clipping&&(this.calculateClippingRect(t),this.setUpdateType(Tr.Children),n|=Tr.Clipping),this.updateType&Tr.WorldAlpha&&(this.worldAlpha=r?r.worldAlpha*this.props.alpha:this.props.alpha,this.setUpdateType(Tr.Children|Tr.PremultipliedColors|Tr.IsRenderable),n|=Tr.WorldAlpha),this.updateType&Tr.PremultipliedColors&&(this.premultipliedColorTl=M(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=M(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=M(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=M(this.props.colorBr,this.worldAlpha,!0))),this.updateType&Tr.RenderState&&(this.updateRenderState(t),this.setUpdateType(Tr.IsRenderable)),this.updateType&Tr.IsRenderable&&this.updateIsRenderable(),r&&this.updateType&Tr.CalculatedZIndex&&(this.calculateZIndex(),r.setUpdateType(Tr.ZIndexSortedChildren)),this.updateType&Tr.Children&&this.children.length&&this.children.forEach((t=>{t.setUpdateType(n),0!==t.updateType&&t.update(e,this.clippingRect)})),this.updateType&Tr.ZIndexSortedChildren&&this.sortChildren(),this.updateType=0}checkRenderProps(){return!!this.props.texture||!(!this.props.width||!this.props.height)&&(!!this.props.shader||(!!this.props.clipping||(0!==this.props.color||(0!==this.props.colorTop||(0!==this.props.colorBottom||(0!==this.props.colorLeft||(0!==this.props.colorRight||(0!==this.props.colorTl||(0!==this.props.colorTr||(0!==this.props.colorBl||0!==this.props.colorBr))))))))))}checkRenderBounds(e){_(this.renderBound);var t=e.width||this.stage.root.width,r=e.height||this.stage.root.height;this.strictBound=R(e.x,e.y,e.x+t,e.y+r,this.strictBound);var n=this.stage.boundsMargin;return this.preloadBound=R(e.x-n[3],e.y-n[0],e.x+t+n[1],e.y+r+n[2],this.preloadBound),Z(this.renderBound,this.strictBound)?Sr.InViewport:Z(this.renderBound,this.preloadBound)?Sr.InBounds:Sr.OutOfBounds}updateRenderState(e){var t=this.checkRenderBounds(e);if(t!==this.renderState){var r=this.renderState;this.renderState=t,r===Sr.InViewport&&this.emit("outOfViewport",{previous:r,current:t}),(r<Sr.InBounds&&t===Sr.InViewport||r>Sr.InBounds&&t===Sr.OutOfBounds)&&(this.emit(_r.get(Sr.InBounds),{previous:r,current:t}),r=Sr.InBounds);var n=_r.get(t);_(n),this.emit(n,{previous:r,current:t})}}setRenderState(e){e!==this.renderState&&(this.renderState=e,this.emit(Sr[e]))}updateIsRenderable(){var e;e=!(0===this.worldAlpha||!this.checkRenderProps())&&this.renderState>Sr.OutOfBounds,this.isRenderable!==e&&(this.isRenderable=e,this.onChangeIsRenderable(e))}onChangeIsRenderable(e){var t;null===(t=this.props.texture)||void 0===t||t.setRenderableOwner(this,e)}calculateRenderCoords(){var e=this.width,t=this.height,r=this.globalTransform;_(r);var n=r.tx,o=r.ty,i=r.ta,a=r.tb,s=r.tc,l=r.td;if(0===a&&0===s){var d=n,u=n+e*i,h=o,c=o+t*l;this.renderCoords=Cr.translate(d,h,u,h,u,c,d,c,this.renderCoords)}else this.renderCoords=Cr.translate(n,o,n+e*i,o+e*s,n+e*i+t*a,o+e*s+t*l,n+t*a,o+t*l,this.renderCoords)}updateBoundingRect(){var e=this.renderCoords,t=this.globalTransform;_(t),_(e);var r=t.tb,n=t.tc,o=e.x1,i=e.y1,a=e.x3,s=e.y3;if(0===r||0===n)this.renderBound=R(o,i,a,s,this.renderBound);else{var l=e.x2,d=e.x4,u=e.y2,h=e.y4;this.renderBound=R(Math.min(o,l,a,d),Math.min(i,u,s,h),Math.max(o,l,a,d),Math.max(i,u,s,h),this.renderBound)}}calculateClippingRect(e){_(this.globalTransform);var t=this.clippingRect,r=this.props,n=this.globalTransform,o=r.clipping,i=0!==n.tb||0!==n.tc;o&&!i?(t.x=n.tx,t.y=n.ty,t.width=this.width*n.ta,t.height=this.height*n.td,t.valid=!0):t.valid=!1,e.valid&&t.valid?L(e,t,t):e.valid&&(Q(e,t),t.valid=!0)}calculateZIndex(){var e,t,r=this.props,n=r.zIndex||0,o=(null===(e=r.parent)||void 0===e?void 0:e.zIndex)||0,i=n;null!==(t=r.parent)&&void 0!==t&&t.zIndexLocked&&(i=n<o?n:o),this.calcZIndex=i}destroy(){this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,delete this.renderCoords,delete this.renderBound,delete this.strictBound,delete this.preloadBound,delete this.globalTransform,delete this.scaleRotateTransform,delete this.localTransform,this.props.texture=null,this.props.shader=null,this.removeAllListeners(),this.parent=null}renderQuads(e){var t=this.props,r=t.width,n=t.height,o=t.texture,i=t.textureOptions,a=t.shader,s=t.shaderProps,l=this.premultipliedColorTl,d=this.premultipliedColorTr,u=this.premultipliedColorBl,h=this.premultipliedColorBr,c=this.zIndex,f=this.worldAlpha,p=this.globalTransform,v=this.clippingRect;_(p),e.addQuad({width:r,height:n,colorTl:l,colorTr:d,colorBl:u,colorBr:h,texture:o,textureOptions:i,zIndex:c,shader:a,shaderProps:s,alpha:f,clippingRect:v,tx:p.tx,ty:p.ty,ta:p.ta,tb:p.tb,tc:p.tc,td:p.td})}get id(){return this.props.id}get x(){return this.props.x}set x(e){this.props.x!==e&&(this.props.x=e,this.setUpdateType(Tr.Local))}get absX(){var e,t;return this.props.x+((null===(e=this.props.parent)||void 0===e?void 0:e.absX)||(null===(t=this.props.parent)||void 0===t||null===(t=t.globalTransform)||void 0===t?void 0:t.tx)||0)}get absY(){var e,t;return this.props.y+(null!==(e=null===(t=this.props.parent)||void 0===t?void 0:t.absY)&&void 0!==e?e:0)}get y(){return this.props.y}set y(e){this.props.y!==e&&(this.props.y=e,this.setUpdateType(Tr.Local))}get width(){return this.props.width}set width(e){this.props.width!==e&&(this.props.width=e,this.setUpdateType(Tr.Local))}get height(){return this.props.height}set height(e){this.props.height!==e&&(this.props.height=e,this.setUpdateType(Tr.Local))}get scale(){return this.scaleX}set scale(e){this.scaleX=e,this.scaleY=e}get scaleX(){return this.props.scaleX}set scaleX(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.setUpdateType(Tr.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.setUpdateType(Tr.ScaleRotate))}get mount(){return this.props.mount}set mount(e){this.props.mountX===e&&this.props.mountY===e||(this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.setUpdateType(Tr.Local))}get mountX(){return this.props.mountX}set mountX(e){this.props.mountX!==e&&(this.props.mountX=e,this.setUpdateType(Tr.Local))}get mountY(){return this.props.mountY}set mountY(e){this.props.mountY!==e&&(this.props.mountY=e,this.setUpdateType(Tr.Local))}get pivot(){return this.props.pivot}set pivot(e){this.props.pivotX===e&&this.props.pivotY===e||(this.props.pivotX=e,this.props.pivotY=e,this.props.pivot=e,this.setUpdateType(Tr.Local))}get pivotX(){return this.props.pivotX}set pivotX(e){this.props.pivotX!==e&&(this.props.pivotX=e,this.setUpdateType(Tr.Local))}get pivotY(){return this.props.pivotY}set pivotY(e){this.props.pivotY!==e&&(this.props.pivotY=e,this.setUpdateType(Tr.Local))}get rotation(){return this.props.rotation}set rotation(e){this.props.rotation!==e&&(this.props.rotation=e,this.setUpdateType(Tr.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(e){this.props.alpha=e,this.setUpdateType(Tr.PremultipliedColors|Tr.WorldAlpha)}get autosize(){return this.props.autosize}set autosize(e){this.props.autosize=e}get clipping(){return this.props.clipping}set clipping(e){this.props.clipping=e,this.setUpdateType(Tr.Clipping)}get color(){return this.props.color}set color(e){this.props.colorTl===e&&this.props.colorTr===e&&this.props.colorBl===e&&this.props.colorBr===e||(this.colorTl=e,this.colorTr=e,this.colorBl=e,this.colorBr=e),this.props.color=e,this.setUpdateType(Tr.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(e){this.props.colorTl===e&&this.props.colorTr===e||(this.colorTl=e,this.colorTr=e),this.props.colorTop=e,this.setUpdateType(Tr.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(e){this.props.colorBl===e&&this.props.colorBr===e||(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e,this.setUpdateType(Tr.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(e){this.props.colorTl===e&&this.props.colorBl===e||(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e,this.setUpdateType(Tr.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(e){this.props.colorTr===e&&this.props.colorBr===e||(this.colorTr=e,this.colorBr=e),this.props.colorRight=e,this.setUpdateType(Tr.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(e){this.props.colorTl=e,this.setUpdateType(Tr.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(e){this.props.colorTr=e,this.setUpdateType(Tr.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(e){this.props.colorBl=e,this.setUpdateType(Tr.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(e){this.props.colorBr=e,this.setUpdateType(Tr.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(e){this.props.zIndexLocked=e,this.setUpdateType(Tr.CalculatedZIndex|Tr.Children),this.children.forEach((e=>{e.setUpdateType(Tr.CalculatedZIndex)}))}get zIndex(){return this.props.zIndex}set zIndex(e){this.props.zIndex=e,this.setUpdateType(Tr.CalculatedZIndex|Tr.Children),this.children.forEach((e=>{e.setUpdateType(Tr.CalculatedZIndex)}))}get parent(){return this.props.parent}set parent(e){var t=this.props.parent;if(t!==e){if(this.props.parent=e,t){var r=t.children.indexOf(this);_(-1!==r,"CoreNode.parent: Node not found in old parent's children!"),t.children.splice(r,1),t.setUpdateType(Tr.Children|Tr.ZIndexSortedChildren)}e&&(e.children.push(this),this.setUpdateType(Tr.All),e.setUpdateType(Tr.Children|Tr.ZIndexSortedChildren)),this.updateScaleRotateTransform()}}}var Ir=1;function Br(){return Ir++}class Rr extends E{constructor(e,t,r,n){var o;super(),A(this,"rendererMain",void 0),A(this,"stage",void 0),A(this,"id",void 0),A(this,"coreNode",void 0),A(this,"_children",[]),A(this,"_src",""),A(this,"_parent",null),A(this,"_texture",null),A(this,"_shader",null),A(this,"_data",{}),A(this,"onTextureLoaded",((e,t)=>{this.emit("loaded",t)})),A(this,"onTextureFailed",((e,t)=>{this.emit("failed",t)})),A(this,"onTextureFreed",((e,t)=>{this.emit("freed",t)})),A(this,"onOutOfBounds",((e,t)=>{this.emit("outOfBounds",t)})),A(this,"onInBounds",((e,t)=>{this.emit("inBounds",t)})),A(this,"onOutOfViewport",((e,t)=>{this.emit("outOfViewport",t)})),A(this,"onInViewport",((e,t)=>{this.emit("inViewport",t)})),this.rendererMain=t,this.stage=r,this.id=null!==(o=null==n?void 0:n.id)&&void 0!==o?o:Br(),this.coreNode=n||new kr(this.stage,{id:this.id,x:e.x,y:e.y,width:e.width,height:e.height,alpha:e.alpha,autosize:e.autosize,clipping:e.clipping,color:e.color,colorTop:e.colorTop,colorBottom:e.colorBottom,colorLeft:e.colorLeft,colorRight:e.colorRight,colorTl:e.colorTl,colorTr:e.colorTr,colorBl:e.colorBl,colorBr:e.colorBr,zIndex:e.zIndex,zIndexLocked:e.zIndexLocked,scaleX:e.scaleX,scaleY:e.scaleY,mountX:e.mountX,mountY:e.mountY,mount:e.mount,pivot:e.pivot,pivotX:e.pivotX,pivotY:e.pivotY,rotation:e.rotation,parent:null,shader:null,shaderProps:null,texture:null,textureOptions:null}),this.coreNode.on("loaded",this.onTextureLoaded),this.coreNode.on("failed",this.onTextureFailed),this.coreNode.on("freed",this.onTextureFreed),this.coreNode.on("outOfBounds",this.onOutOfBounds),this.coreNode.on("inBounds",this.onInBounds),this.coreNode.on("outOfViewport",this.onOutOfViewport),this.coreNode.on("inViewport",this.onInViewport),this.parent=e.parent,this.shader=e.shader,this.texture=e.texture,this.src=e.src,this._data=e.data}get x(){return this.coreNode.x}set x(e){this.coreNode.x=e}get y(){return this.coreNode.y}set y(e){this.coreNode.y=e}get width(){return this.coreNode.width}set width(e){this.coreNode.width=e}get height(){return this.coreNode.height}set height(e){this.coreNode.height=e}get alpha(){return this.coreNode.alpha}set alpha(e){this.coreNode.alpha=e}get autosize(){return this.coreNode.autosize}set autosize(e){this.coreNode.autosize=e}get clipping(){return this.coreNode.clipping}set clipping(e){this.coreNode.clipping=e}get color(){return this.coreNode.color}set color(e){this.coreNode.color=e}get colorTop(){return this.coreNode.colorTop}set colorTop(e){this.coreNode.colorTop=e}get colorBottom(){return this.coreNode.colorBottom}set colorBottom(e){this.coreNode.colorBottom=e}get colorLeft(){return this.coreNode.colorLeft}set colorLeft(e){this.coreNode.colorLeft=e}get colorRight(){return this.coreNode.colorRight}set colorRight(e){this.coreNode.colorRight=e}get colorTl(){return this.coreNode.colorTl}set colorTl(e){this.coreNode.colorTl=e}get colorTr(){return this.coreNode.colorTr}set colorTr(e){this.coreNode.colorTr=e}get colorBl(){return this.coreNode.colorBl}set colorBl(e){this.coreNode.colorBl=e}get colorBr(){return this.coreNode.colorBr}set colorBr(e){this.coreNode.colorBr=e}get scale(){return this.scaleX!==this.scaleY?null:this.coreNode.scaleX}set scale(e){null!==e&&(this.coreNode.scaleX=e,this.coreNode.scaleY=e)}get scaleX(){return this.coreNode.scaleX}set scaleX(e){this.coreNode.scaleX=e}get scaleY(){return this.coreNode.scaleY}set scaleY(e){this.coreNode.scaleY=e}get mount(){return this.coreNode.mount}set mount(e){this.coreNode.mount=e}get mountX(){return this.coreNode.mountX}set mountX(e){this.coreNode.mountX=e}get mountY(){return this.coreNode.mountY}set mountY(e){this.coreNode.mountY=e}get pivot(){return this.coreNode.pivot}set pivot(e){this.coreNode.pivot=e}get pivotX(){return this.coreNode.pivotX}set pivotX(e){this.coreNode.pivotX=e}get pivotY(){return this.coreNode.pivotY}set pivotY(e){this.coreNode.pivotY=e}get rotation(){return this.coreNode.rotation}set rotation(e){this.coreNode.rotation=e}get parent(){return this._parent}set parent(e){var t,r=this._parent;if(this._parent=e,this.coreNode.parent=null!==(t=null==e?void 0:e.coreNode)&&void 0!==t?t:null,r){var n=r.children.indexOf(this);_(-1!==n,"MainOnlyNode.parent: Node not found in old parent's children!"),r.children.splice(n,1)}e&&e.children.push(this)}get children(){return this._children}get zIndex(){return this.coreNode.zIndex}set zIndex(e){this.coreNode.zIndex=e}get zIndexLocked(){return this.coreNode.zIndexLocked}set zIndexLocked(e){this.coreNode.zIndexLocked=e}get src(){return this._src}set src(e){this._src!==e&&(this._src=e,this.texture=e?this.rendererMain.createTexture("ImageTexture",{src:e}):null)}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this.rendererMain.textureTracker.decrementTextureRefCount(this._texture),e&&this.rendererMain.textureTracker.incrementTextureRefCount(e),this._texture=e,e?this.coreNode.loadTexture(e.txType,e.props,e.options):this.coreNode.unloadTexture())}get shader(){return this._shader}set shader(e){this._shader!==e&&(this._shader=e,e&&this.coreNode.loadShader(e.shType,e.props))}get data(){return this._data}set data(e){this._data=mr(e)}destroy(){this.emit("beforeDestroy",{});for(var e=this.children[0];e;)e.destroy(),e=this.children[0];this.coreNode.destroy(),this.parent=null,this.texture=null,this.emit("afterDestroy",{}),this.removeAllListeners()}flush(){}animate(e,t){var r=new yr(this.coreNode,e,t);return new br(this.stage.animationManager,r)}}class Er{constructor(){A(this,"activeAnimations",new Set)}registerAnimation(e){this.activeAnimations.add(e)}unregisterAnimation(e){this.activeAnimations.delete(e)}update(e){this.activeAnimations.forEach((t=>{t.update(e)}))}}class Nr{constructor(e){A(this,"imageWorkersEnabled",!0),A(this,"messageManager",{}),A(this,"workers",[]),A(this,"workerIndex",0),this.workers=this.createWorkers(e),this.workers.forEach((e=>{e.onmessage=this.handleMessage.bind(this)}))}handleMessage(e){var t=e.data,r=t.src,n=t.data,o=t.error,i=this.messageManager[r];if(i){var a=C(i,2),s=a[0],l=a[1];delete this.messageManager[r],o?l(new Error(o)):s(n)}}createWorkers(e=1){for(var t=new Blob(["\n      function hasAlphaChannel(mimeType) {\n          return (mimeType.indexOf(\"image/png\") !== -1);\n      }\n\n      function getImage(src, premultiplyAlpha) {\n        return new Promise(function(resolve, reject) {\n          var xhr = new XMLHttpRequest();\n          xhr.open('GET', src, true);\n          xhr.responseType = 'blob';\n\n          xhr.onload = function() {\n            if (xhr.status === 200) {\n              var blob = xhr.response;\n              var hasAlphaChannel = premultiplyAlpha !== undefined ? premultiplyAlpha : hasAlphaChannel(blob.type);\n\n              createImageBitmap(blob, {\n                premultiplyAlpha: hasAlphaChannel ? 'premultiply' : 'none',\n                colorSpaceConversion: 'none',\n                imageOrientation: 'none'\n              }).then(function(data) {\n                resolve({ data: data, premultiplyAlpha: premultiplyAlpha });\n              }).catch(function(error) {\n                reject(error);\n              });\n            } else {\n              reject(new Error('Failed to load image: ' + xhr.statusText));\n            }\n          };\n\n          xhr.onerror = function() {\n            reject(new Error('Network error occurred while trying to fetch the image.'));\n          };\n\n          xhr.send();\n        });\n      }\n\n      self.onmessage = (event) => {\n        var src = event.data.src;\n        var premultiplyAlpha = event.data.premultiplyAlpha;\n\n        getImage(src, premultiplyAlpha)\n          .then(function(data) {\n              self.postMessage({ src: src, data: data }, [data.data]);\n          })\n          .catch(function(error) {\n              self.postMessage({ src: src, error: error.message });\n          });\n      };\n    ".replace('"use strict";',"")],{type:"application/javascript"}),r=(self.URL?URL:webkitURL).createObjectURL(t),n=[],o=0;o<e;o++)n.push(new Worker(r));return n}getNextWorker(){var e=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,e}convertUrlToAbsolute(e){return new URL(e,self.location.href).href}getImage(e,t){return new Promise(((r,n)=>{try{if(this.workers){var o=this.convertUrlToAbsolute(e);this.messageManager[o]=[r,n],this.getNextWorker().postMessage({src:o,premultiplyAlpha:t})}}catch(i){n(i)}}))}}class Fr extends O{constructor(e,t){super(e),A(this,"props",void 0),this.props=Fr.resolveDefaults(t)}getTextureData(){var e=this;return b(x().mark((function t(){var r,n,o,i,a,s,l;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=e.props,n=r.width,o=r.height,i=n*o*4,a=new Uint8ClampedArray(i),s=0;s<i;s+=4)l=Math.floor(256*Math.random()),a[s]=l,a[s+1]=l,a[s+2]=l,a[s+3]=255;return t.abrupt("return",{data:new ImageData(a,n,o)});case 5:case"end":return t.stop()}}),t)})))()}static makeCacheKey(e){var t=Fr.resolveDefaults(e);return`NoiseTexture,${t.width},${t.height},${t.cacheId}`}static resolveDefaults(e){var t,r,n;return{width:null!==(t=e.width)&&void 0!==t?t:128,height:null!==(r=e.height)&&void 0!==r?r:128,cacheId:null!==(n=e.cacheId)&&void 0!==n?n:0}}}A(Fr,"z$__type__Props",void 0);class Lr{constructor(e){A(this,"usedMemory",0),A(this,"txConstructors",{}),A(this,"textureKeyCache",new Map),A(this,"textureIdCache",new Map),A(this,"ctxTextureCache",new WeakMap),A(this,"textureRefCountMap",new WeakMap),A(this,"imageWorkerManager",null),A(this,"hasCreateImageBitmap",!!self.createImageBitmap),A(this,"hasWorker",!!self.Worker),A(this,"renderer",void 0),this.hasCreateImageBitmap&&this.hasWorker&&(this.imageWorkerManager=new Nr(e)),this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.registerTextureType("ImageTexture",or),this.registerTextureType("ColorTexture",q),this.registerTextureType("NoiseTexture",Fr),this.registerTextureType("SubTexture",J)}registerTextureType(e,t){this.txConstructors[e]=t}loadTexture(e,t,r=null){var n,o=this.txConstructors[e];if(!o)throw new Error(`Texture type "${e}" is not registered`);if(void 0!==(null==r?void 0:r.id)&&this.textureIdCache.has(r.id)&&(n=this.textureIdCache.get(r.id)),!n){var i,a=null==r?void 0:r.id,s=null!==(i=null==r?void 0:r.cacheKey)&&void 0!==i?i:o.makeCacheKey(t);n=s&&this.textureKeyCache.has(s)?this.textureKeyCache.get(s):new o(this,t),a&&this.addTextureIdToCache(a,s,n)}null!=r&&r.preload&&this.getCtxTexture(n).load();return n}addTextureIdToCache(e,t,r){var n=this.textureIdCache,o=this.textureRefCountMap;n.set(e,r),o.has(r)?o.get(r).count++:(o.set(r,{cacheKey:t,count:1}),t&&this.textureKeyCache.set(t,r))}removeTextureIdFromCache(e){var t,r=this.textureIdCache,n=this.textureRefCountMap,o=r.get(e);if(o){if(r.delete(e),n.has(o)){var i=n.get(o);_(i),i.count--,0===i.count&&(n.delete(o),i.cacheKey&&this.textureKeyCache.delete(i.cacheKey))}null===(t=this.ctxTextureCache.get(o))||void 0===t||t.free()}}getDebugInfo(){return{keyCacheSize:this.textureKeyCache.size,idCacheSize:this.textureIdCache.size}}getCtxTexture(e){if(this.ctxTextureCache.has(e))return this.ctxTextureCache.get(e);var t=this.renderer.createCtxTexture(e);return this.ctxTextureCache.set(e,t),t}}class zr{constructor(e){A(this,"memUsed",0),A(this,"textures",new Map),A(this,"threshold",void 0),this.threshold=e,0===e&&(this.setTextureMemUse=()=>{})}setTextureMemUse(e,t){this.textures.has(e)&&(this.memUsed-=this.textures.get(e)),0!==t?(this.memUsed+=t,this.textures.set(e,t),this.memUsed>this.threshold&&this.gc()):this.textures.delete(e)}gc(){this.textures.forEach(((e,t)=>{t.renderable||t.free()}))}}var Mr,Pr;class Dr extends E{constructor(e){super(),A(this,"options",void 0),A(this,"animationManager",void 0),A(this,"txManager",void 0),A(this,"txMemManager",void 0),A(this,"fontManager",void 0),A(this,"textRenderers",void 0),A(this,"shManager",void 0),A(this,"renderer",void 0),A(this,"root",void 0),A(this,"boundsMargin",void 0),A(this,"deltaTime",0),A(this,"lastFrameTime",0),A(this,"currentFrameTime",0),A(this,"fpsNumFrames",0),A(this,"fpsElapsedTime",0),A(this,"renderRequested",!1),A(this,"contextSpy",null),this.options=e;var t=e.canvas,r=e.clearColor,n=e.rootId,o=e.debug,i=e.appWidth,a=e.appHeight,s=e.boundsMargin,l=e.enableContextSpy,d=e.numImageWorkers,u=e.txMemByteThreshold;this.txManager=new Lr(d),this.txMemManager=new zr(u),this.shManager=new Jt,this.animationManager=new Er,this.contextSpy=l?new er:null;var h=[0,0,0,0];s&&(h=Array.isArray(s)?s:[s,s,s,s]),this.boundsMargin=h,null!=o&&o.monitorTextureCache&&setInterval((()=>{_(this.txManager);var e=this.txManager.getDebugInfo();console.log("Texture ID Cache Size: ",e.idCacheSize),console.log("Texture Key Cache Size: ",e.keyCacheSize)}),1e3),this.renderer=new ee({stage:this,canvas:t,pixelRatio:e.devicePhysicalPixelRatio*e.deviceLogicalPixelRatio,clearColor:null!=r?r:4278190080,bufferMemory:2e6,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy}),this.txManager.renderer=this.renderer,this.textRenderers={canvas:new Et(this),sdf:new pr(this)},this.fontManager=new cr(this.textRenderers);var c,f,p,v=new kr(this,{id:n,x:0,y:0,width:i,height:a,alpha:1,autosize:!1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null});this.root=v,c=this,f=!1,p=()=>{if(c.updateAnimations(),!c.hasSceneUpdates())return c.calculateFps(),setTimeout(p,16.666666666666668),void(f||(c.emit("idle"),f=!0));f=!1,c.drawFrame(),requestAnimationFrame(p)},requestAnimationFrame(p)}updateAnimations(){var e=this.animationManager;this.root&&(this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=performance?performance.now():Date.now(),this.deltaTime=this.lastFrameTime?this.currentFrameTime-this.lastFrameTime:100/6,this.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime}),e.update(this.deltaTime))}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested}drawFrame(){var e=this.renderer,t=this.renderRequested;0!==this.root.updateType&&this.root.update(this.deltaTime,this.root.clippingRect),null==e||e.reset(),this.addQuads(this.root),null==e||e.render(),this.calculateFps(),t&&(this.renderRequested=!1)}calculateFps(){var e=this.options.fpsUpdateInterval;if(e&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=e)){var t,r,n,o=Math.round(1e3*this.fpsNumFrames/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.emit("fpsUpdate",{fps:o,contextSpyData:null!==(t=null===(r=this.contextSpy)||void 0===r?void 0:r.getData())&&void 0!==t?t:null}),null===(n=this.contextSpy)||void 0===n||n.reset()}}addQuads(e){_(this.renderer&&e.globalTransform),e.isRenderable&&e.renderQuads(this.renderer);for(var t=0;t<e.children.length;t++){var r=e.children[t];r&&(0!==(null==r?void 0:r.worldAlpha)&&this.addQuads(r))}}requestRender(){this.renderRequested=!0}resolveTextRenderer(e,t=null){var r=t,n=!1;if(r){var o=this.textRenderers[r];o?o.canRenderFont(e)||(console.warn(`Cannot use override text renderer '${r}' for font`,e),r=null,n=!0):(console.warn(`Text renderer override '${r}' not found.`),r=null,n=!0)}if(!r){for(var i=0,a=Object.entries(this.textRenderers);i<a.length;i++){var s=C(a[i],2),l=s[0],d=s[1];if("canvas"!==l&&d.canRenderFont(e)){r=l;break}}r||(r="canvas")}n&&console.warn(`Falling back to text renderer ${String(r)}`);var u=this.textRenderers[r];return _(u,"resolvedTextRenderer undefined"),u}}class Or extends kr{constructor(e,t){super(e,t),A(this,"textRenderer",void 0),A(this,"trState",void 0),A(this,"_textRendererOverride",null),A(this,"onTextLoaded",(()=>{var e=this.contain,t=this.trState.props.width,r=this.trState.props.height,n=this.trState.textW||0,o=this.trState.textH||0;"both"===e?(this.props.width=t,this.props.height=r):"width"===e?(this.props.width=t,this.props.height=o):"none"===e&&(this.props.width=n,this.props.height=o),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})})),A(this,"onTextFailed",((e,t)=>{this.emit("failed",{type:"text",error:t})})),this._textRendererOverride=t.textRendererOverride;var r=this.resolveTextRendererAndState({x:this.absX,y:this.absY,width:t.width,height:t.height,textAlign:t.textAlign,color:t.color,zIndex:t.zIndex,contain:t.contain,scrollable:t.scrollable,scrollY:t.scrollY,offsetY:t.offsetY,letterSpacing:t.letterSpacing,debug:t.debug,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStretch:t.fontStretch,fontStyle:t.fontStyle,fontWeight:t.fontWeight,text:t.text,lineHeight:t.lineHeight,maxLines:t.maxLines,textBaseline:t.textBaseline,verticalAlign:t.verticalAlign,overflowSuffix:t.overflowSuffix}),n=r.resolvedTextRenderer,o=r.textRendererState;this.textRenderer=n,this.trState=o}get width(){return this.props.width}set width(e){this.props.width=e,this.textRenderer.set.width(this.trState,e),"none"===this.contain&&this.setUpdateType(Tr.Local)}get height(){return this.props.height}set height(e){this.props.height=e,this.textRenderer.set.height(this.trState,e),"both"!==this.contain&&this.setUpdateType(Tr.Local)}get color(){return this.trState.props.color}set color(e){this.textRenderer.set.color(this.trState,e)}get text(){return this.trState.props.text}set text(e){this.textRenderer.set.text(this.trState,e)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(e){this._textRendererOverride=e,this.textRenderer.destroyState(this.trState);var t=this.resolveTextRendererAndState(this.trState.props),r=t.resolvedTextRenderer,n=t.textRendererState;this.textRenderer=r,this.trState=n}get fontSize(){return this.trState.props.fontSize}set fontSize(e){this.textRenderer.set.fontSize(this.trState,e)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(e){this.textRenderer.set.fontFamily(this.trState,e)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(e){this.textRenderer.set.fontStretch(this.trState,e)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(e){this.textRenderer.set.fontStyle(this.trState,e)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(e){this.textRenderer.set.fontWeight(this.trState,e)}get textAlign(){return this.trState.props.textAlign}set textAlign(e){this.textRenderer.set.textAlign(this.trState,e)}get contain(){return this.trState.props.contain}set contain(e){this.textRenderer.set.contain(this.trState,e)}get scrollable(){return this.trState.props.scrollable}set scrollable(e){this.textRenderer.set.scrollable(this.trState,e)}get scrollY(){return this.trState.props.scrollY}set scrollY(e){this.textRenderer.set.scrollY(this.trState,e)}get offsetY(){return this.trState.props.offsetY}set offsetY(e){this.textRenderer.set.offsetY(this.trState,e)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(e){this.textRenderer.set.letterSpacing(this.trState,e)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(e){this.textRenderer.set.lineHeight&&this.textRenderer.set.lineHeight(this.trState,e)}get maxLines(){return this.trState.props.maxLines}set maxLines(e){this.textRenderer.set.maxLines&&this.textRenderer.set.maxLines(this.trState,e)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(e){this.textRenderer.set.textBaseline&&this.textRenderer.set.textBaseline(this.trState,e)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(e){this.textRenderer.set.verticalAlign&&this.textRenderer.set.verticalAlign(this.trState,e)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(e){this.textRenderer.set.overflowSuffix&&this.textRenderer.set.overflowSuffix(this.trState,e)}get debug(){return this.trState.props.debug}set debug(e){this.textRenderer.set.debug(this.trState,e)}update(e,t){super.update(e,t),_(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkRenderProps(){return""!==this.trState.props.text||super.checkRenderProps()}onChangeIsRenderable(e){super.onChangeIsRenderable(e),this.textRenderer.setIsRenderable(this.trState,e)}renderQuads(e){_(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha)}destroy(){super.destroy(),this.textRenderer.destroyState(this.trState)}resolveTextRendererAndState(e){var t=this.stage.resolveTextRenderer(e,this._textRendererOverride),r=t.createState(e);return r.emitter.on("loaded",this.onTextLoaded),r.emitter.on("failed",this.onTextFailed),t.scheduleUpdateState(r),{resolvedTextRenderer:t,textRendererState:r}}}class Ur extends Rr{constructor(e,t,r){super(e,t,r,new Or(r,{id:Br(),x:e.x,y:e.y,width:e.width,height:e.height,alpha:e.alpha,autosize:e.autosize,clipping:e.clipping,color:e.color,colorTop:e.colorTop,colorBottom:e.colorBottom,colorLeft:e.colorLeft,colorRight:e.colorRight,colorTl:e.colorTl,colorTr:e.colorTr,colorBl:e.colorBl,colorBr:e.colorBr,zIndex:e.zIndex,zIndexLocked:e.zIndexLocked,scaleX:e.scaleX,scaleY:e.scaleY,mountX:e.mountX,mountY:e.mountY,mount:e.mount,pivot:e.pivot,pivotX:e.pivotX,pivotY:e.pivotY,rotation:e.rotation,text:e.text,fontSize:e.fontSize,fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontStretch:e.fontStretch,fontStyle:e.fontStyle,contain:e.contain,scrollable:e.scrollable,letterSpacing:e.letterSpacing,textAlign:e.textAlign,scrollY:e.scrollY,offsetY:e.offsetY,textRendererOverride:e.textRendererOverride,lineHeight:e.lineHeight,maxLines:e.maxLines,textBaseline:e.textBaseline,verticalAlign:e.verticalAlign,overflowSuffix:e.overflowSuffix,debug:e.debug,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null}))}get text(){return this.coreNode.text}set text(e){this.coreNode.text=e}get textRendererOverride(){return this.coreNode.textRendererOverride}set textRendererOverride(e){this.coreNode.textRendererOverride=e}get fontSize(){return this.coreNode.fontSize}set fontSize(e){this.coreNode.fontSize=e}get fontFamily(){return this.coreNode.fontFamily}set fontFamily(e){this.coreNode.fontFamily=e}get fontWeight(){return this.coreNode.fontWeight}set fontWeight(e){this.coreNode.fontWeight=e}get fontStretch(){return this.coreNode.fontStretch}set fontStretch(e){this.coreNode.fontStretch=e}get fontStyle(){return this.coreNode.fontStyle}set fontStyle(e){this.coreNode.fontStyle=e}get textAlign(){return this.coreNode.textAlign}set textAlign(e){this.coreNode.textAlign=e}get contain(){return this.coreNode.contain}set contain(e){this.coreNode.contain=e}get scrollable(){return this.coreNode.scrollable}set scrollable(e){this.coreNode.scrollable=e}get scrollY(){return this.coreNode.scrollY}set scrollY(e){this.coreNode.scrollY=e}get offsetY(){return this.coreNode.offsetY}set offsetY(e){this.coreNode.offsetY=e}get letterSpacing(){return this.coreNode.letterSpacing}set letterSpacing(e){this.coreNode.letterSpacing=e}get lineHeight(){return this.coreNode.lineHeight}set lineHeight(e){e&&(this.coreNode.lineHeight=e)}get maxLines(){return this.coreNode.maxLines}set maxLines(e){e&&(this.coreNode.maxLines=e)}get textBaseline(){return this.coreNode.textBaseline}set textBaseline(e){e&&(this.coreNode.textBaseline=e)}get verticalAlign(){return this.coreNode.verticalAlign}set verticalAlign(e){e&&(this.coreNode.verticalAlign=e)}get overflowSuffix(){return this.coreNode.overflowSuffix}set overflowSuffix(e){e&&(this.coreNode.overflowSuffix=e)}get debug(){return this.coreNode.debug}set debug(e){this.coreNode.debug=e}}class Wr{constructor(){A(this,"root",null),A(this,"stage",null),A(this,"rendererMain",null)}init(e,t,r){var n=this;return b(x().mark((function o(){var i;return x().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(n.stage=new Dr({rootId:Br(),appWidth:t.appWidth,appHeight:t.appHeight,txMemByteThreshold:t.txMemByteThreshold,boundsMargin:t.boundsMargin,deviceLogicalPixelRatio:t.deviceLogicalPixelRatio,devicePhysicalPixelRatio:t.devicePhysicalPixelRatio,clearColor:t.clearColor,canvas:r,fpsUpdateInterval:t.fpsUpdateInterval,enableContextSpy:t.enableContextSpy,numImageWorkers:t.numImageWorkers,debug:{monitorTextureCache:!1}}),n.rendererMain=e,_(n.stage.root),i=new Rr(e.resolveNodeDefaults({}),n.rendererMain,n.stage,n.stage.root),n.root=i,i.once("beforeDestroy",n.onBeforeDestroyNode.bind(n,i)),n.onCreateNode(i),!t.coreExtensionModule){o.next=10;break}return o.next=10,vr(t.coreExtensionModule,n.stage);case 10:n.stage.on("fpsUpdate",((e,t)=>{n.onFpsUpdate(t)})),n.stage.on("frameTick",((e,t)=>{n.onFrameTick(t)})),n.stage.on("idle",(()=>{n.onIdle()}));case 13:case"end":return o.stop()}}),o)})))()}createNode(e){_(this.rendererMain),_(this.stage);var t=new Rr(e,this.rendererMain,this.stage);return t.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,t)),this.onCreateNode(t),t}createTextNode(e){_(this.rendererMain),_(this.stage);var t=new Ur(e,this.rendererMain,this.stage);return t.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,t)),this.onCreateNode(t),t}destroyNode(e){e.destroy()}releaseTexture(e){var t=this.stage;_(t),t.txManager.removeTextureIdFromCache(e)}getRootNode(){return _(this.root),this.root}onCreateNode(e){throw new Error("Method not implemented.")}onBeforeDestroyNode(e){throw new Error("Method not implemented.")}onFpsUpdate(e){throw new Error("Method not implemented.")}onFrameTick(e){throw new Error("Method not implemented.")}onIdle(){throw new Error("Method not implemented.")}}function Yr(e={},t="app"){var r=new Wr;return Mr=new xr(e,t,r),Pr=Mr.createShader.bind(Mr),Mr}class jr extends Array{constructor(e){super(),this._parent=e}get selected(){return this[this._parent.selected||0]}get firstChild(){return this[0]}insert(e,t){if(t){var r=this.indexOf(t);this.splice(r,0,e)}else this.push(e);e.parent=this._parent,this._parent._isDirty=!0}remove(e){var t=this.indexOf(e);t>=0&&this.splice(t,1)}}var Hr={debug:!1,animationsEnabled:!0,animationSettings:{duration:250,easing:"ease-in-out"},fontSettings:{fontFamily:"Ubuntu",fontSize:100}};function Qr(e,t,...r){false}function Kr(e){return"function"==typeof e}function $r(e){return Array.isArray(e)}function Xr(e,t={}){if($r(e))e.forEach((e=>{Xr(e,t)}));else if(e)for(var r in e)void 0===t[r]&&(t[r]=e[r]);return t}class Gr extends Array{constructor(e,t={}){return $r(t)?super(...t):"string"==typeof t?super(t):super(...Object.entries(t).filter((([e,t])=>t)).map((([e])=>e))),this.onChange=e,this}has(e){return this.indexOf(e)>=0}is(e){return this.indexOf(e)>=0}add(e){this.push(e),this.onChange()}toggle(e){this.has(e)?this.remove(e):this.add(e)}remove(e){var t=this.indexOf(e);t>=0&&(this.splice(t,1),this.onChange())}}var Vr=Hr.animationSettings;function Zr(e){for(var t=[],r=0,n=Object.entries(e);r<n.length;r++){var o=C(n[r],2),i=o[0],a=o[1];t.push({type:i,props:a})}return Pr("DynamicShader",{effects:t})}function qr(e=""){return{set(t){"number"==typeof t&&(t={width:t,color:255}),this.effects=S(S({},this.effects||{}),{[`border${e}`]:t}),this[`_border${e}`]=t},get(){return this[`_border${e}`]}}}class Jr extends Object{constructor(e){super(),this._animationQueue=[],this._animationRunning=!1,this.name=e,this._renderProps={},this.children=new jr(this)}get effects(){return this._effects}set effects(e){this._effects=e,this.lng&&(this.shader=Zr(e))}get parent(){return this._parent}set parent(e){var t;(this._parent=e,this.lng)&&(this.lng.parent=null!==(t=null==e?void 0:e.lng)&&void 0!==t?t:null)}get shader(){return this._shader}set shader(e){$r(e)?this._shader=Pr(...e):this._shader=e,this._sendToLightning("shader",this._shader)}_sendToLightningAnimatable(e,t){if(this.lng){if(Hr.animationsEnabled&&this.transition&&(!0===this.transition||this.transition[e])){var r=!0===this.transition||!0===this.transition[e]?void 0:this.transition[e];return this.animate({[e]:t},r).start()}this.lng[e]=t}else this._renderProps[e]=t}_sendToLightning(e,t){this.lng?this.lng[e]=t:this._renderProps[e]=t}animate(e,t){return _(this.lng,"Node must be rendered before animating"),this.lng.animate(e,t||this.animationSettings)}chain(e,t){return this._animationRunning&&(this._animationQueue=[],this._animationRunning=!1),t?this._animationQueueSettings=t:this._animationQueueSettings||(this._animationQueueSettings=t||this.animationSettings),t=t||this._animationQueueSettings,this._animationQueue.push({props:e,animationSettings:t}),this}start(){var e=this;return b(x().mark((function t(){var r;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e._animationQueue.shift();case 1:if(!r){t.next=8;break}return e._animationRunning=!0,t.next=5,e.animate(r.props,r.animationSettings).start().waitUntilStopped();case 5:r=e._animationQueue.shift(),t.next=1;break;case 8:e._animationRunning=!1,e._animationQueueSettings=void 0;case 10:case"end":return t.stop()}}),t)})))()}setFocus(){if(this.lng){if(void 0!==this.forwardFocus)if(Kr(this.forwardFocus)){if(!1!==this.forwardFocus.call(this,this))return}else{var e="number"==typeof this.forwardFocus?this.forwardFocus:null;if(null!==e&&e<this.children.length){var t=this.children[e];return void(t instanceof Jr&&t.setFocus())}}queueMicrotask((()=>ft(this)))}else this.autofocus=!0}isTextNode(){return"text"===this.name}_resizeOnTextLoad(){this.lng.on("loaded",((e,t)=>{if("text"===t.type){var r=t.dimensions;this.parent.updateLayout(this,r)}}))}getText(){return this.children.map((e=>e.text)).join("")}destroy(){var e;this._queueDelete&&(null===(e=this.lng)||void 0===e||e.destroy())}set onEvents(e){this._events=e}get onEvents(){return this._events||[]}set style(e){for(var t in $r(e)?this._style=Xr(e):this._style=e,this._style)void 0===this[t]&&(this[t]=this._style[t])}get style(){return this._style}get hasChildren(){return this.children.length>0}getChildById(e){return this.children.find((t=>t.id===e))}searchChildrenById(e){var t,r=T(this.children);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.id===e)return n;if(n instanceof Jr){var o=n.searchChildrenById(e);if(o)return o}}}catch(i){r.e(i)}finally{r.f()}}set states(e){this._states=new Gr(this._stateChanged.bind(this),e),this.lng&&this._stateChanged()}get states(){return this._states=this._states||new Gr(this._stateChanged.bind(this)),this._states}get animationSettings(){return this._animationSettings||Vr}set animationSettings(e){this._animationSettings=e}updateLayout(e,t){if(this.hasChildren){Qr();var r,n=!1;if(Kr(this.onBeforeLayout)&&(n=this.onBeforeLayout.call(this,e,t)),"flex"===this.display){if(function(e){for(var t=[],r=!1,n=0;n<e.children.length;n++){var o=e.children[n];if("TextNode"!==o.name&&!1!==o.flexItem){if("text"===o.name&&""!==o.text&&!o.width&&!o.height)return!1;void 0!==o.flexOrder&&(r=!0),t.push(o)}}r&&t.sort(((e,t)=>(e.flexOrder||0)-(t.flexOrder||0)));var i=t.length,a="row"===(e.flexDirection||"row"),s=a?"width":"height",l=a?"height":"width",d=a?"marginLeft":"marginTop",u=a?"marginRight":"marginBottom",h=a?"x":"y",c=a?"y":"x",f=e[s]||0,p=e[l]||0,v=e.gap||0,g=e.justifyContent||"flexStart",m=e.alignItems,x=0;["center","spaceBetween","spaceEvenly"].includes(g)&&(x=t.reduce(((e,t)=>e+(t[s]||0)),0));var y=p&&m?e=>{"flexStart"===m?e[c]=0:"center"===m?e[c]=(p-(e[l]||0))/2:"flexEnd"===m&&(e[c]=p-(e[l]||0))}:e=>e;if("flexStart"===g){var b=0;if(t.forEach((e=>{e[h]=b+(e[d]||0),b+=(e[s]||0)+v+(e[d]||0)+(e[u]||0),y(e)})),"fixed"!==e.flexBoundary){var w=b-v;if(w!==e[s])return e[s]=w,!0}}else if("flexEnd"===g)for(var S=f,A=i-1;A>=0;A--){var C=t[A];_(C),C[h]=S-(C[s]||0)-(C[u]||0),S-=(C[s]||0)+v+(C[d]||0)+(C[u]||0),y(C)}else if("center"===g){var T=(f-(x+v*(i-1)))/2;t.forEach((e=>{e[h]=T,T+=(e[s]||0)+v,y(e)}))}else if("spaceBetween"===g){var k=(f-x)/(i-1),I=0;t.forEach((e=>{e[h]=I,I+=(e[s]||0)+k,y(e)}))}else if("spaceEvenly"===g){var B=(f-x)/(i+1),R=B;t.forEach((e=>{e[h]=R,R+=(e[s]||0)+B,y(e)}))}return!1}(this)||n)null===(r=this.parent)||void 0===r||r.updateLayout()}else if(n){var o;null===(o=this.parent)||void 0===o||o.updateLayout()}Kr(this.onLayout)&&this.onLayout.call(this,e,t)}}_stateChanged(){if(Qr(0,0,this.states),this.forwardStates){var e=this.states.slice();this.children.forEach((t=>t.states=e))}var t=this.states;if(this._undoStyles||this.style&&function(e,t){var r,n=T(t);try{for(n.s();!(r=n.n()).done;)if(r.value in e)return!0}catch(o){n.e(o)}finally{n.f()}return!1}(this.style,t)){this._undoStyles=this._undoStyles||[];var r={};this._undoStyles.forEach((e=>{r[e]=this.style[e]}));var n=t.reduce(((e,t)=>{var r=this.style[t];return r&&(e=S(S({},e),r)),e}),{});this._undoStyles=Object.keys(n),void 0!==n.transition&&(this.transition=n.transition),Object.assign(this,r,n)}}render(){var e=this,t=this.parent;if(t)if(t.lng)if(this.lng)console.warn("Node already rendered: ",this);else{t._isDirty&&(t.updateLayout(),t._isDirty=!1),this.states.length&&this._stateChanged();var r=e._renderProps;if(r.x=r.x||0,r.y=r.y||0,t.lng&&(r.parent=t.lng),e._effects&&(this.shader=Zr(e._effects)),e.isTextNode()){if(Hr.fontSettings)for(var n in Hr.fontSettings)void 0===r[n]&&(r[n]=Hr.fontSettings[n]);r.text=e.getText(),r.contain&&(r.width||(r.width=(t.width||0)-r.x-(r.marginRight||0),e._autosized=!0),"both"!==r.contain||r.height||r.maxLines||(r.height=(t.height||0)-r.y-(r.marginBottom||0),e._autosized=!0)),Qr(0,0),e.lng=Mr.createTextNode(r),r.width&&r.height||(e._autosized=!0,e._resizeOnTextLoad())}else r.texture||(isNaN(r.width)&&(r.width=(t.width||0)-r.x,e._autosized=!0),isNaN(r.height)&&(r.height=(t.height||0)-r.y,e._autosized=!0),r.color||r.src||(r.color=0)),Qr(0,0),e.lng=Mr.createNode(r);e.onFail&&e.lng.on("failed",e.onFail),e.onLoad&&e.lng.on("loaded",e.onLoad),Kr(this.onCreate)&&this.onCreate.call(this,e),e.onEvents.forEach((([t,r])=>{var n;null===(n=e.lng)||void 0===n||n.on(t,((t,n)=>r(e,n)))})),e.lng.div&&(e.lng.div.solid=e),"text"!==e.name&&e.children.forEach((e=>{e.render?e.render():""!==e.text&&console.warn("TextNode outside of <Text>: ",e)})),e.autofocus&&e.setFocus(),delete this._renderProps}else console.warn("Parent not rendered yet: ",this);else console.warn("Parent not set - no node created for: ",this)}}for(var en=function(){var e=rn[tn];Object.defineProperty(Jr.prototype,e,{get(){return this.lng?this.lng[e]:this._renderProps[e]},set(t){this._sendToLightningAnimatable(e,t)}})},tn=0,rn=["alpha","color","colorTop","colorRight","colorLeft","colorBottom","colorTl","colorTr","colorBl","colorBr","height","fontSize","lineHeight","mount","mountX","mountY","pivot","pivotX","pivotY","rotation","scale","width","worldX","worldY","x","y","zIndex","zIndexLocked"];tn<rn.length;tn++)en();for(var nn=function(){var e=an[on];Object.defineProperty(Jr.prototype,e,{get(){return this.lng?this.lng[e]:this._renderProps[e]},set(t){this._sendToLightning(e,t)}})},on=0,an=["autosize","clipping","contain","fontFamily","fontStretch","fontStyle","fontWeight","letterSpacing","maxLines","offsetY","overflowSuffix","rtt","scrollable","scrollY","src","text","textAlign","textBaseline","textOverflow","texture","verticalAlign","wordWrap"];on<an.length;on++)nn();Object.defineProperties(Jr.prototype,{borderRadius:{set(e){this._borderRadius=e,this.effects=S(S({},this.effects||{}),{radius:{radius:e}})},get(){return this._borderRadius}},border:qr(),borderLeft:qr("Left"),borderRight:qr("Right"),borderTop:qr("Top"),borderBottom:qr("Bottom")}),Object.defineProperties(Jr.prototype,{linearGradient:{set(e={}){this._linearGradient=e,this.effects=S(S({},this.effects||{}),{linearGradient:e})},get(){return this._linearGradient}}});var sn=e=>{return t=vn("text"),mn(t,e,!1),t;var t},ln=e=>{return t=vn("node"),mn(t,e,!1),t;var t};function dn({createElement:e,createTextNode:t,isTextNode:r,replaceText:n,insertNode:o,removeNode:i,setProperty:a,getParentNode:s,getFirstChild:l,getNextSibling:d}){function u(e,t,r,n){if(void 0===r||n||(n=[]),"function"!=typeof t)return h(e,t,n,r);Ce((n=>h(e,t(),n,r)),n)}function h(e,i,a,s,d){for(;"function"==typeof a;)a=a();if(i===a)return a;var u=typeof i,m=void 0!==s;if("string"===u||"number"===u)if("number"===u&&(i=i.toString()),m){var x=a[0];x&&r(x)?n(x,i):x=t(i),a=p(e,a,s,x)}else""!==a&&"string"==typeof a?n(l(e),a=i):(p(e,a,s,t(i)),a=i);else if(null==i||"boolean"===u)a=p(e,a,s);else{if("function"===u)return Ce((()=>{for(var t=i();"function"==typeof t;)t=t();a=h(e,t,a,s)})),()=>a;if(Array.isArray(i)){var y=[];if(c(y,i,d))return Ce((()=>a=h(e,y,a,s,!0))),()=>a;if(0===y.length){var b=p(e,a,s);if(m)return a=b}else Array.isArray(a)?0===a.length?v(e,y,s):f(e,a,y):null==a||""===a?v(e,y):f(e,m&&a||[l(e)],y);a=y}else{if(Array.isArray(a)){if(m)return a=p(e,a,s,i);p(e,a,null,i)}else null!=a&&""!==a&&l(e)?g(e,i,l(e)):o(e,i);a=i}}return a}function c(e,r,n){for(var o=!1,i=0,a=r.length;i<a;i++){var s=r[i],l=void 0;if(null==s||!0===s||!1===s);else if(Array.isArray(s))o=c(e,s)||o;else if("string"==(l=typeof s)||"number"===l)e.push(t(s));else if("function"===l)if(n){for(;"function"==typeof s;)s=s();o=c(e,Array.isArray(s)?s:[s])||o}else e.push(s),o=!0;else e.push(s)}return o}function f(e,t,r){for(var n=r.length,a=t.length,s=n,l=0,u=0,h=d(t[a-1]),c=null;l<a||u<s;)if(t[l]!==r[u]){for(;t[a-1]===r[s-1];)a--,s--;if(a===l)for(var f=s<n?u?d(r[u-1]):r[s-u]:h;u<s;)o(e,r[u++],f);else if(s===u)for(;l<a;)c&&c.has(t[l])||i(e,t[l]),l++;else if(t[l]===r[s-1]&&r[u]===t[a-1]){var p=d(t[--a]);o(e,r[u++],d(t[l++])),o(e,r[--s],p),t[a]=r[s]}else{if(!c){c=new Map;for(var v=u;v<s;)c.set(r[v],v++)}var m=c.get(t[l]);if(null!=m)if(u<m&&m<s){for(var x=l,y=1,b=void 0;++x<a&&x<s&&null!=(b=c.get(t[x]))&&b===m+y;)y++;if(y>m-u)for(var w=t[l];u<m;)o(e,r[u++],w);else g(e,r[u++],t[l++])}else l++;else i(e,t[l++])}}else l++,u++}function p(e,r,n,a){if(void 0===n){for(var d;d=l(e);)i(e,d);return a&&o(e,a),""}var u=a||t("");if(r.length)for(var h=!1,c=r.length-1;c>=0;c--){var f=r[c];if(u!==f){var p=s(f)===e;h||c?p&&i(e,f):p?g(e,u,f):o(e,u,n)}else h=!0}else o(e,u,n);return[u]}function v(e,t,r){for(var n=0,i=t.length;n<i;n++)o(e,t[n],r)}function g(e,t,r){o(e,t,r),i(e,r)}function m(e,t,r={},n){return t||(t={}),n||Ce((()=>r.children=h(e,t.children,r.children))),Ce((()=>t.ref&&t.ref(e))),Ce((()=>{for(var n in t)if("children"!==n&&"ref"!==n){var o=t[n];o!==r[n]&&(a(e,n,o,r[n]),r[n]=o)}})),r}return{render(e,t){var r;return we((n=>{r=n,u(t,e())})),r},insert:u,spread(e,t,r){"function"==typeof t?Ce((n=>m(e,t(),n,r))):m(e,t,void 0,r)},createElement:e,createTextNode:t,insertNode:o,setProp:(e,t,r,n)=>(a(e,t,r,n),r),mergeProps:st,effect:Ce,memo:_e,createComponent:rt,use:(e,t,r)=>Be((()=>e(t,r)))}}var un={createElement:e=>new Jr(e),createTextNode:e=>({name:"TextNode",text:e,parent:void 0}),replaceText(e,t){Qr(0,0),e.text=t;var r=e.parent;_(r),r.text=r.getText()},setProperty(e,t,r=!0){e[t]=r},insertNode(e,t,r){Qr(0,0),e.children.insert(t,r),t._queueDelete=!1,t instanceof Jr?e.lng&&t.render():e.isTextNode()&&(e.text=e.getText())},isTextNode:e=>e.isTextNode(),removeNode(e,t){Qr(0,0),e.children.remove(t),t._queueDelete=!0,t instanceof Jr&&queueMicrotask((()=>t.destroy()))},getParentNode:e=>e.parent,getFirstChild:e=>e.children[0],getNextSibling(e){var t=e.parent.children||[],r=t.indexOf(e)+1;if(r<t.length)return t[r]}},hn=function(e){var t=dn(e);return t.mergeProps=st,t}(un),cn=function(){var e=b(x().mark((function e(t,r){var n,o,i;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Yr(Hr.rendererOptions,r),e.next=3,n.init();case 3:return(o=new Jr("App")).lng=n.root,i=hn.render(t,o),e.abrupt("return",{dispose:i,rootNode:o,renderer:n});case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),fn=(hn.effect,hn.memo),pn=hn.createComponent,vn=hn.createElement,gn=(hn.createTextNode,hn.insertNode,hn.insert),mn=hn.spread,xn=hn.setProp,yn=hn.mergeProps,bn=hn.use;function wn(e=""){return t=e,Number.isInteger(t)?e:"string"==typeof e?e.startsWith("#")?Number(e.replace("#","0x")+(7===e.length?"ff":"")):e.startsWith("0x")?Number(e):Number("0x"+(6===e.length?e+"ff":e)):0;var t}var Sn="_$DX_DELEGATE";function An(e){var t=`$$${e.type}`,r=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==r&&Object.defineProperty(e,"target",{configurable:!0,value:r}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>r||document});r;){var n=r[t];if(n&&!r.disabled){var o=r[`${t}Data`];if(void 0!==o?n.call(r,o,e):n.call(r,e),e.cancelBubble)return}r=r._$host||r.parentNode||r.host}}var Cn;function Tn(){var e=new Set;var t=!1;return{subscribe:function(t){return e.add(t),()=>e.delete(t)},confirm:function(r,n){if(t)return!(t=!1);var o,i={to:r,options:n,defaultPrevented:!1,preventDefault:()=>i.defaultPrevented=!0},a=T(e);try{var s=function(){var e=o.value;e.listener(S(S({},i),{},{from:e.location,retry:o=>{o&&(t=!0),e.navigate(r,S(S({},n),{},{resolve:!1}))}}))};for(a.s();!(o=a.n()).done;)s()}catch(l){a.e(l)}finally{a.f()}return!i.defaultPrevented}}}function _n(){window.history.state&&null!=window.history.state._depth||window.history.replaceState(S(S({},window.history.state),{},{_depth:window.history.length-1}),""),Cn=window.history.state._depth}_n();var kn=/^(?:[a-z0-9]+:)?\/\//i,In=/^\/+|(\/)\/+$/g,Bn="http://sr";function Rn(e,t=!1){var r=e.replace(In,"$1");return r?t||/^[?#]/.test(r)?r:"/"+r:""}function En(e,t,r){if(!kn.test(t)){var n=Rn(e),o=r&&Rn(r),i="";return((i=!o||t.startsWith("/")?n:0!==o.toLowerCase().indexOf(n.toLowerCase())?n+o:o)||"/")+Rn(t,!i)}}function Nn(e){var t={};return e.searchParams.forEach(((e,r)=>{t[r]=e})),t}function Fn(e,t,r){var n=C(e.split("/*",2),2),o=n[0],i=n[1],a=o.split("/").filter(Boolean),s=a.length;return e=>{var n=e.split("/").filter(Boolean),o=n.length-s;if(o<0||o>0&&void 0===i&&!t)return null;for(var l={path:s?"":"/",params:{}},d=e=>void 0===r?void 0:r[e],u=0;u<s;u++){var h=a[u],c=n[u],f=":"===h[0],p=f?h.slice(1):h;if(f&&Ln(c,d(p)))l.params[p]=c;else if(f||!Ln(c,h))return null;l.path+=`/${c}`}if(i){var v=o?n.slice(-o).join("/"):"";if(!Ln(v,d(i)))return null;l.params[i]=v}return l}}function Ln(e,t){var r=t=>0===t.localeCompare(e,void 0,{sensitivity:"base"});return void 0===t||("string"==typeof t?r(t):"function"==typeof t?t(e):Array.isArray(t)?t.some(r):t instanceof RegExp&&t.test(e))}function zn(e){var t=new Map,r=Fe();return new Proxy({},{get:(n,o)=>(t.has(o)||Le(r,(()=>t.set(o,_e((()=>e()[o]))))),t.get(o)()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),ownKeys:()=>Reflect.ownKeys(e())})}function Mn(e){var t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];for(var r=e.slice(0,t.index),n=e.slice(t.index+t[0].length),o=[r,r+=t[1]];t=/^(\/\:[^\/]+)\?/.exec(n);)o.push(r+=t[1]),n=n.slice(t[0].length);return Mn(n).reduce(((e,t)=>[...e,...o.map((e=>e+t))]),[])}var Pn,Dn=Me(),On=Me(),Un=()=>function(e,t){if(null==e)throw new Error(t);return e}(Pe(Dn),"<A> and 'use' router primitives can be only used inside a Route."),Wn=()=>Un().navigatorFactory(),Yn=()=>Un().location,jn=()=>Un().params;function Hn(e,t=""){var r=e.component,n=e.load,o=e.children,i=e.info,a=!o||Array.isArray(o)&&!o.length,s={key:e,component:r,load:n,info:i};return Kn(e.path).reduce(((r,n)=>{var o,i,l=T(Mn(n));try{for(l.s();!(o=l.n()).done;){var d=o.value,u=(i=d,Rn(t).replace(/\/*(\*.*)?$/g,"")+Rn(i)),h=a?u:u.split("/*",1)[0];h=h.split("/").map((e=>e.startsWith(":")||e.startsWith("*")?e:encodeURIComponent(e))).join("/"),r.push(S(S({},s),{},{originalPath:d,pattern:h,matcher:Fn(h,!a,e.matchFilters)}))}}catch(c){l.e(c)}finally{l.f()}return r}),[])}function Qn(e,t=0){return{routes:e,score:1e4*(r=e[e.length-1],n=C(r.pattern.split("/*",2),2),o=n[0],i=n[1],a=o.split("/").filter(Boolean),a.reduce(((e,t)=>e+(t.startsWith(":")?2:3)),a.length-(void 0===i?0:1)))-t,matcher(t){for(var r=[],n=e.length-1;n>=0;n--){var o=e[n],i=o.matcher(t);if(!i)return null;r.unshift(S(S({},i),{},{route:o}))}return r}};var r,n,o,i,a}function Kn(e){return Array.isArray(e)?e:[e]}function $n(e,t="",r=[],n=[]){for(var o=Kn(e),i=0,a=o.length;i<a;i++){var s=o[i];if(s&&"object"==typeof s){s.hasOwnProperty("path")||(s.path="");var l,d=T(Hn(s,t));try{for(d.s();!(l=d.n()).done;){var u=l.value;r.push(u);var h=Array.isArray(s.children)&&0===s.children.length;if(s.children&&!h)$n(s.children,u.pattern,r,n);else{var c=Qn([...r],n.length);n.push(c)}r.pop()}}catch(f){d.e(f)}finally{d.f()}}}return r.length?n:n.sort(((e,t)=>t.score-e.score))}function Xn(e,t){for(var r=0,n=e.length;r<n;r++){var o=e[r].matcher(t);if(o)return o}return[]}function Gn(e,t,r,n={}){var o=C(e.signal,2),i=o[0],a=o[1],s=e.utils,l=void 0===s?{}:s,d=l.parsePath||(e=>e),u=l.renderPath||(e=>e),h=l.beforeLeave||Tn(),c=En("",n.base||"");if(void 0===c)throw new Error(`${c} is not a valid base path`);c&&!i().value&&a({value:c,replace:!0,scroll:!1});var f=C(Se(!1),2),p=f[0],v=f[1],g=function(){var e=b(x().mark((function e(t){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.prev=1,e.next=4,ze(t);case 4:return e.prev=4,v(!1),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}(),m=C(Se(i().value),2),y=m[0],w=m[1],A=C(Se(i().state),2),T=A[0],_=A[1],k=function(e,t){var r=new URL(Bn),n=_e((t=>{var n=e();try{return new URL(n,r)}catch(o){return console.error(`Invalid path ${n}`),t}}),r,{equals:(e,t)=>e.href===t.href}),o=_e((()=>n().pathname)),i=_e((()=>n().search),!0),a=_e((()=>n().hash));return{get pathname(){return o()},get search(){return i()},get hash(){return a()},get state(){return t()},get key(){return""},query:zn(Re(i,(()=>Nn(n()))))}}(y,T),I=[],B=Se([]),R=_e((()=>Xn(t(),k.pathname))),E=zn((()=>{for(var e=R(),t={},r=0;r<e.length;r++)Object.assign(t,e[r].params);return t})),N={pattern:c,path:()=>c,outlet:()=>null,resolvePath:e=>En(c,e)};return Ce((()=>{var e=i(),t=e.value,r=e.state;Be((()=>{t!==y()&&g((()=>{Pn="native",w(t),_(r),B[1]([])})).then((()=>{Pn=void 0}))}))})),{base:N,location:k,params:E,isRouting:p,renderPath:u,parsePath:d,navigatorFactory:function(e){return e=e||Pe(On)||N,(t,r)=>function(e,t,r){Be((()=>{if("number"!=typeof t){var n=S({replace:!1,resolve:!0,scroll:!0},r),o=n.replace,i=n.resolve,s=n.scroll,d=n.state,u=i?e.resolvePath(t):En("",t);if(void 0===u)throw new Error(`Path '${t}' is not a routable path`);if(I.length>=100)throw new Error("Too many redirects");var c=y();if((u!==c||d!==T())&&h.confirm(u,r)){var f=I.push({value:c,replace:o,scroll:s,state:T()});g((()=>{Pn="navigate",w(u),_(d),B[1]([])})).then((()=>{var e,t;I.length===f&&(Pn=void 0,e={value:u,state:d},(t=I[0])&&(e.value===t.value&&e.state===t.state||a(S(S({},e),{},{replace:t.replace,scroll:t.scroll})),I.length=0))}))}}else t&&(l.go?l.go(t):console.warn("Router integration does not support relative routing"))}))}(e,t,r)},matches:R,beforeLeave:h,preloadRoute:function(e,n){var o=Xn(t(),e.pathname),i=Pn;Pn="preload";var a=function(){var t=o[s],i=t.route,a=t.params;i.component&&i.component.preload&&i.component.preload();var l=i.load;n&&l&&Le(r(),(()=>l({params:a,location:{pathname:e.pathname,search:e.search,hash:e.hash,query:Nn(e),state:null,key:""},intent:"preload"})))};for(var s in o)a();Pn=i},singleFlight:void 0===n.singleFlight||n.singleFlight,submissions:B}}var Vn=e=>t=>{var r,n=t.base,o=De((()=>t.children)),i=_e((()=>$n(o(),t.base||""))),a=Gn(e,i,(()=>r),{base:n,singleFlight:t.singleFlight});return e.create&&e.create(a),pn(Dn.Provider,{value:a,get children(){return pn(Zn,{routerState:a,get root(){return t.root},get load(){return t.rootLoad},get children(){return[fn((()=>(r=Fe())&&null)),pn(qn,{routerState:a,get branches(){return i()}})]}})}})};function Zn(e){var t=e.routerState.location,r=e.routerState.params,n=_e((()=>e.load&&Be((()=>e.load({params:r,location:t,intent:"preload"})))));return pn(ut,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:o=>pn(o,{params:r,location:t,get data(){return n()},get children(){return e.children}})})}function qn(e){var t,r=[],n=_e(Re(e.routerState.matches,((o,i,a)=>{for(var s=i&&o.length===i.length,l=[],d=function(t){var d=i&&i[t],u=o[t];a&&d&&u.route.key===d.route.key?l[t]=a[t]:(s=!1,r[t]&&r[t](),we((o=>{r[t]=o,l[t]=function(e,t,r,n){var o=e.base,i=e.location,a=e.params,s=n().route,l=s.pattern,d=s.component,u=s.load,h=_e((()=>n().path));d&&d.preload&&d.preload();var c=u?u({params:a,location:i,intent:Pn||"initial"}):void 0;return{parent:t,pattern:l,path:h,outlet:()=>d?rt(d,{params:a,location:i,data:c,get children(){return r()}}):r(),resolvePath:e=>En(o.path(),e,h())}}(e.routerState,l[t-1]||e.routerState.base,Jn((()=>n()[t+1])),(()=>e.routerState.matches()[t]))})))},u=0,h=o.length;u<h;u++)d(u);return r.splice(o.length).forEach((e=>e())),a&&s?a:(t=l[0],l)})));return Jn((()=>n()&&t))()}var Jn=e=>()=>pn(ut,{get when(){return e()},keyed:!0,children:e=>pn(On.Provider,{value:e,get children(){return e.outlet()}})}),eo=e=>{var t=De((()=>e.children));return st(e,{get children(){return t()}})};function to(e,t){var r=function(e){if("#"===e)return null;try{return document.querySelector(e)}catch(t){return null}}(`#${e}`);r?r.scrollIntoView():t&&window.scrollTo(0,0)}var ro=new Map;function no(e=!0,t=!1,r="/_server"){return n=>{var o=n.base.path(),i=n.navigatorFactory(n.base),a={};function s(e){if(!(e.defaultPrevented||0!==e.button||e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)){var r=e.composedPath().find((e=>e instanceof Node&&"A"===e.nodeName.toUpperCase()));if(r&&(!t||r.hasAttribute("link"))){var n="http://www.w3.org/2000/svg"===r.namespaceURI,i=n?r.href.baseVal:r.href;if(!(n?r.target.baseVal:r.target)&&(i||r.hasAttribute("state"))){var a=(r.getAttribute("rel")||"").split(/\s+/);if(!(r.hasAttribute("download")||a&&a.includes("external"))){var s=n?new URL(i,document.baseURI):new URL(i);if(!(s.origin!==window.location.origin||o&&s.pathname&&!s.pathname.toLowerCase().startsWith(o.toLowerCase())))return[r,s]}}}}}function l(e){var t=s(e);if(t){var r=C(t,2),o=r[0],a=r[1],l=n.parsePath(a.pathname+a.search+a.hash),d=o.getAttribute("state");e.preventDefault(),i(l,{resolve:!1,replace:o.hasAttribute("replace"),scroll:!o.hasAttribute("noscroll"),state:d&&JSON.parse(d)})}}function d(e){var t=s(e);if(t){var r=C(t,2),o=r[0],i=r[1];a[i.pathname]||n.preloadRoute(i,"false"!==o.getAttribute("preload"))}}function u(e){var t=s(e);if(t){var r=C(t,2),o=r[0],i=r[1];a[i.pathname]||(a[i.pathname]=setTimeout((()=>{n.preloadRoute(i,"false"!==o.getAttribute("preload")),delete a[i.pathname]}),200))}}function h(e){var t=s(e);if(t){var r=C(t,2)[1];a[r.pathname]&&(clearTimeout(a[r.pathname]),delete a[r.pathname])}}function c(e){var t=e.submitter&&e.submitter.hasAttribute("formaction")?e.submitter.getAttribute("formaction"):e.target.getAttribute("action");if(t){if(!t.startsWith("https://action/")){var o=new URL(t,Bn);if(!(t=n.parsePath(o.pathname+o.search)).startsWith(r))return}if("POST"!==e.target.method.toUpperCase())throw new Error("Only POST forms are supported for Actions");var i=ro.get(t);if(i){e.preventDefault();var a=new FormData(e.target);e.submitter&&e.submitter.name&&a.append(e.submitter.name,e.submitter.value),i.call({r:n,f:e.target},a)}}}!function(e,t=window.document){for(var r=t[Sn]||(t[Sn]=new Set),n=0,o=e.length;n<o;n++){var i=e[n];r.has(i)||(r.add(i),t.addEventListener(i,An))}}(["click","submit"]),document.addEventListener("click",l),e&&(document.addEventListener("mouseover",u),document.addEventListener("mouseout",h),document.addEventListener("focusin",d),document.addEventListener("touchstart",d)),document.addEventListener("submit",c),Ne((()=>{document.removeEventListener("click",l),e&&(document.removeEventListener("mouseover",u),document.removeEventListener("mouseout",h),document.removeEventListener("focusin",d),document.removeEventListener("touchstart",d)),document.removeEventListener("submit",c)}))}}function oo(e){var t=e.replace(/^.*?#/,"");if(!t.startsWith("/")){var r=C(window.location.hash.split("#",2),2)[1];return`${void 0===r?"/":r}#${t}`}return t}function io(e){var t=()=>window.location.hash.slice(1),r=Tn();return function(e){var t=!1,r=e=>"string"==typeof e?{value:e}:e,n=function([e,t],r,n){return[r?()=>r(e()):e,n?e=>t(n(e)):t]}(Se(r(e.get()),{equals:(e,t)=>e.value===t.value}),void 0,(r=>(!t&&e.set(r),r)));return e.init&&Ne(e.init(((o=e.get())=>{t=!0,n[1](r(o)),t=!1}))),Vn({signal:n,create:e.create,utils:e.utils})}({get:t,set({value:e,replace:t,scroll:r,state:n}){t?window.history.replaceState(function(e){return S(S({},e),{},{_depth:window.history.state&&window.history.state._depth})}(n),"","#"+e):window.location.hash=e;var o=e.indexOf("#");to(o>=0?e.slice(o+1):"",r),_n()},init:e=>{return n=window,o="hashchange",i=function(e,t){var r=!1;return()=>{var n=Cn;_n();var o=null==n?null:Cn-n;r?r=!1:o&&t(o)?(r=!0,window.history.go(-o)):e()}}(e,(e=>!r.confirm(e&&e<0?e:t()))),n.addEventListener(o,i),()=>n.removeEventListener(o,i);var n,o,i},create:no(e.preload,e.explicitLinks,e.actionBase),utils:{go:e=>window.history.go(e),renderPath:e=>`#${e}`,parsePath:oo,beforeLeave:r}})(e)}var ao=Ne;function so(e,t=Fe()){var r,n,o=0;return()=>(o++,Ne((()=>{o--,queueMicrotask((()=>{!o&&n&&(n(),n=r=void 0)}))})),n||we((t=>r=e(n=t)),t),r)}var lo=so((()=>{var e,t,r,n,o=C(Se(null),2),i=o[0],a=o[1];return e=window,t="keydown",r=e=>{a(e),setTimeout((()=>a(null)))},e.addEventListener(t,r,n),ao(e.removeEventListener.bind(e,t,r,n)),i}));function uo(e){return"function"==typeof e}var ho,co={ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"Enter",l:"Last"," ":"Space",Backspace:"Back",Escape:"Escape"},fo=C(Se([]),2),po=fo[0],vo=fo[1],go=e=>{var t=lo();if(e)for(var r=function(){var e,t=C(o[n],2),r=t[0],i=t[1];e=i,Array.isArray(e)?i.forEach((e=>{co[e]=r})):co[i]=r},n=0,o=Object.entries(e);n<o.length;n++)r();return Te(Re(ct,((e,t,r=[])=>{for(var n=e,o=[];n;)n.states.has("focus")||(n.states.add("focus"),uo(n.onFocus)&&n.onFocus.call(n,e,t)),o.push(n),n=n.parent;return r.forEach((r=>{o.includes(r)||(r.states.remove("focus"),uo(r.onBlur)&&r.onBlur.call(r,e,t))})),vo(o),o}),{defer:!0})),Te((()=>{var e=t();if(e){var r=co[e.key]||co[e.keyCode];Be((()=>{var t,n=void 0,o=T(po());try{for(o.s();!(t=o.n()).done;){var i=t.value;if(n=n||i,r){var a=i[`on${r}`];if(uo(a)&&!0===a.call(i,e,i,n))break}else console.log(`Unhandled key event: ${e.key}`);if(uo(i.onKeyPress)&&!0===i.onKeyPress.call(i,e,r,i,n))break}}catch(s){o.e(s)}finally{o.f()}return!1}))}})),po};function mo(e,t){var r,n,o,i,a=t();if(Array.isArray(a))if(2===a.length)r=i=a[0],n=o=a[1];else if(3===a.length)r=a[0],n=o=a[1],i=a[2];else{var s=C(a,4);r=s[0],o=s[1],i=s[2],n=s[3]}else r=o=i=n=a;e.onBeforeLayout=(t,a)=>{if(a){e.width=e.children.reduce(((e,t)=>e+(t.width||0)),0)+n+o;var s=e.children[0];s&&(s.x=n,s.marginLeft=n);var l=0;return e.children.forEach((e=>{e.y=r,e.marginTop=r,l=Math.max(l,e.height||0)})),e.height=l+r+i,!0}}}function xo(e){return new Promise((t=>{setTimeout(t,e)}))}function yo(e,t,r="en-US"){var n=window.speechSynthesis;return new Promise(((o,i)=>{var a=new SpeechSynthesisUtterance(e);a.lang=r,a.onend=()=>{o()},a.onerror=e=>{i(e)},t.push(a),n.speak(a)}))}function bo(e,t,r=!0){var n=window.speechSynthesis,o=function(e=[]){var t,r=[];for(t=0;t<e.length;t++){var n=e[t];if("string"!=typeof n||n.includes("PAUSE-"))break;r.push(e[t])}return[r.join(",\b ")].concat(e.slice(t))}(Array.isArray(e)?e:[e]),i=[],a=[],s=!0;return{series:b(x().mark((function e(){var r,n,l,d,u,h;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0;case 1:if(!s||!o.length){e.next=62;break}return e.next=4,Promise.resolve(o.shift());case 4:if(r=e.sent,s){e.next=9;break}return e.abrupt("break",62);case 9:if("string"!=typeof r||!r.includes("PAUSE-")){e.next=16;break}return n=1e3*Number(r.split("PAUSE-")[1]),isNaN(n)&&(n=0),e.next=14,xo(n);case 14:e.next=60;break;case 16:if("string"!=typeof r||!r.length){e.next=48;break}d=l=3;case 19:if(!(s&&d>0)){e.next=46;break}return e.prev=20,e.next=23,yo(r,a,t);case 23:d=0,e.next=44;break;case 26:if(e.prev=26,e.t0=e.catch(20),!(e.t0 instanceof SpeechSynthesisErrorEvent)){e.next=43;break}if("network"!==e.t0.error){e.next=36;break}return d--,console.warn(`Speech synthesis network error. Retries left: ${d}`),e.next=34,xo(500*(l-d));case 34:e.next=41;break;case 36:if("canceled"!==e.t0.error&&"interrupted"!==e.t0.error){e.next=40;break}d=0,e.next=41;break;case 40:throw new Error(`SpeechSynthesisErrorEvent: ${e.t0.error}`);case 41:e.next=44;break;case 43:throw e.t0;case 44:e.next=19;break;case 46:e.next=60;break;case 48:if("function"!=typeof r){e.next=55;break}return u=bo(r(),t,!1),i.push(u),e.next=53,u.series;case 53:e.next=60;break;case 55:if(!Array.isArray(r)){e.next=60;break}return h=bo(r,t,!1),i.push(h),e.next=60,h.series;case 60:e.next=1;break;case 62:return e.prev=62,s=!1,e.finish(62);case 65:case"end":return e.stop()}}),e,null,[[0,,62,65],[20,26]])})))(),get active(){return s},append:e=>{o.push(e)},cancel:()=>{s&&(r&&n.cancel(),i.forEach((e=>{e.cancel()})),s=!1)}}}function wo(e,t="en-US"){return ho&&ho.cancel(),ho=bo(e,t)}var So,Ao,Co=(e,t)=>{var r,n=()=>clearTimeout(r);Fe()&&Ne(n);return Object.assign(((...o)=>{void 0!==r&&n(),r=setTimeout((()=>e(...o)),t)}),{clear:n})},To=[],_o=!1;function ko(e,t){var r,n=Co(e,t),o=e=>{r=e,n(e)};return o.flush=()=>{n.clear(),e(r)},o.clear=n.clear,o}function Io(e){return e.id||e.name}function Bo(e=[]){if(Ro.onFocusChange&&Ro.enabled){var t=e.every((e=>!e.loading)),r=e.filter((e=>!To.includes(e)));if(So(),t||!Ro.onFocusChange){To=e.slice(0);var n=[],o=r.reduce(((e,t)=>(t.announce?(e.push([Io(t),"Announce",t.announce]),n.push(t.announce)):t.title?(e.push([Io(t),"Title",t.title]),n.push(t.title)):e.push([Io(t),"No Announce",""]),e)),[]);return r.reverse().reduce(((e,t)=>(t.announceContext?(e.push([Io(t),"Context",t.announceContext]),n.push(t.announceContext)):e.push([Io(t),"No Context",""]),e)),o),Ro.debug&&console.table(o),n.length?Ro.speak(n.reduce(((e,t)=>e.concat(t)),[])):void 0}Ro.onFocusChange([])}}var Ro={debug:!1,enabled:!0,cancel:function(){Ao&&Ao.cancel()},clearPrevFocus:function(e=0){To=To.slice(0,e),So()},speak:function(e,{append:t=!1,notification:r=!1}={}){var n;Ro.onFocusChange&&Ro.enabled&&(Ro.onFocusChange.flush(),t&&Ao&&Ao.active?Ao.append(e):(Ro.cancel(),function(e){if(!_o)Ao=wo(e)}(e)),r&&(_o=!0,null===(n=Ao)||void 0===n||n.series.finally((()=>{_o=!1,Ro.refresh()})).catch(console.error)));return Ao},refresh:function(e=0){Ro.clearPrevFocus(e),Ro.onFocusChange&&Ro.onFocusChange(Be((()=>po())))},setupTimers:function({focusDebounce:e=400,focusChangeTimeout:t=3e5}={}){Ro.onFocusChange=ko(Bo,e),So=ko((()=>{To=[]}),t)}};var Eo,No,Fo,Lo,zo,Mo,Po,Do,Oo,Uo,Wo,Yo,jo,Ho,Qo,Ko,$o,Xo,Go=C(Se(""),2),Vo=Go[0],Zo=Go[1],qo={name:"Base Lightning TV",alpha:{primary:1,secondary:.7,tertiary:.1,inactive:.5,full:1,none:0,alpha1:.1,alpha2:.3,alpha3:.5,alpha4:.7,alpha5:.9},animation:{duration:{none:0,xfast:.1,fast:.25,normal:.5,slow:.75,xslow:.9},delay:{none:0,xfast:.01,fast:.025,normal:.05,slow:.075,xslow:.09},expressive:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},expressiveEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},expressiveExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standard:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standardEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standardExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utility:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utilityEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utilityExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25}},asset:{arrowLeft:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAi0lEQVRIDWNgGAWjIfD//38JID5Fk5AAGqwKxPeA+D/VLQCaaQLEr0CGgwBVLQCa5wbEn0EGwwDVLAAaGA3Ev2AGw2iqWAA0rBiI/8EMRaYptgBoWDeygehsci1gIlcjWfqArqZdEMFcBLSEdpGMZAntkimSJbTLaEiW0K6oQLKEdoUdzJJRemiHAAD4n+yzPWCs7QAAAABJRU5ErkJggg==",arrowRight:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAg0lEQVRIDWNgGAWjIYArBP7//38KiCVwyVMsDjQcBO4BsSrFhmEzAGw8hHgFpEywqaFIDMkCEPMzELtRZCC6ZjQLQNxfQByNro5sPhYLQEL/gLiYbEORNeKwACbcDVPLBGMMOhrmVDSapkFE00imaTKlaUajaVFB28Ju0CXrUQfhDAEAEgHss6NhpLQAAAAASUVORK5CYII=",backspaceOutline:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAAAXNSR0IArs4c6QAACmpJREFUeF7tnVmoZUcVhv/feY4gBEVEH/KgCCZxCK2itNo4xQQH+kUN0TjEiDGKKBqnaExwBjUaR6KY+NQgiQkOMSYhYEScIopGJOqDE2hHjfP0y4p1Oqdv33v2qr32Prv2Paug6Ye7Vu2qv75TtWvtGohMqUBAAQZ80zUVQAKUEIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypfPsAJJ0NYC92XRHKPB3AAfLv18BuBLAFSR/NKZWswJI0vkA3jCmILsw75sAvIfkR8eo22wAknQSgMvGEGFD8vwxgFeQvGrI+s4CIEnHAPgugHsMWfkNzevDAM4i+Z8h6t88QJLuXOB5yBAVzjxuVeBaAM8ieXNUjzkAdAmA50Yrmv5HKPATACeQ/GNEm6YBkvRyANblZhpHAXsfekpkOGsWIEmPAHA9gDuOo13mWhS4gOSZfdVoEiBJ9wFwA4D7961Y+lUpsK/v7KxVgL4K4ElOCS4l+Uyn7a41k3Q0gMcC2ANgH4CHV1T2OyStx69OzQEk6TwAZztr8lMAx5P8s9N+Y8wk2cTjfQDu66z080h+zml7yKwpgCSdCOByZyX+BuBRJH/otN84M0kWN/s0gOc4Kv8Nko922B1m0gxAkh4I4AcVwcL9JA/UVnjT7CXdHYD9yEzfVUkAjib5uxqNmgCoBAu/CeBhzsJ/kORZTtuNN5Nk70bXAZ0Hy59G8qIawVoB6LMAnu8suE3tH0/y3077NAMg6esAuoaoC0la7M2dJgdI0ssAXOgs8W8BHEvS/s9UoYCkdwN4bYfL5STto7U7TQpQZbDQehzreawHylSpgKSTAVza4XYDyeNqsp4MoB7BwteQfH9N5dL2NgWK3l0vyAdJWhDXnSYBSNLtANh3GO/KwgMk97trlYbbKiDJPpzea5U8JKuYqDIeql0kvQPAG5352ZLMR5L8q9M+zXZQYFcAJOnJAL7sbGWLMFuk2SLOmYIKzB6gEiz8HoB7O7U4meQXnLZp1qGApD8BuOcsh7AewcL3kuyadg4OjSSbhRxH0j4BjJok2Ufga0j+YdQHlcznDlBNsPAa+xpP8r/rEHbxjAKPbRuyHvKFY0Ik6QUALOprPfIT1gHRbAGSdDoA77aSX5Zg4e8nhGfx6FEgWoJn8Zy1QCTplq5vjc3NwnoEC/eQ/HYD8IwC0TbwrA2i2QHUI1h4JskLGoJnUIhWwLMWiGYFkCSLMX2t5WDhlneeLm5Dw5kDntEhkmRhEVvesWNqZgiTdC6AN3W1Svn72oOFkuxF+WcVIQUrai+IKuA5BBHJ453auc1mA1AJFn7Jsf7EKj9ZsLBHw1ZDtI5neAmaBUBzCxaO2cBj5u2FZtlO0l8A3K3ZIaxHsPB8kt5vYn00c/mM0dBj5OmqzAqjOQDUfLBwJ32HbPAh84pCM5seSNJLAHzcWeFJgoVdZRui4YfIo6ucff8uyVY03LW5IawyWPgvW5u77mChV/QIABFfb/kidk0CVKbDth3Huw35dJLeniqiV2/fniDYx1f7vlWTeoUFah6wZQhrqwcqwUKbrtsaH0+6mOQpHsOpbXpCVFPstcJjBZNkmzHv0swQJultAN7iVO375TyafzjtJzcbEaK1w9McQJXBQlvvYmtsfjE5FZUFGAGiSeBpCqDKYKFtmX0qya9Utl0z5gNCNBk8BSA7CtiODNwxjf4trEew8BySNtTNOg0A0aTwtARQTbDQeh3rfawXmn0KQDQ5PC0B9EkAL3LSkAD9X6hWALIJzJ3mNoSdS9I7U3NyuX6zQO+zKOzkEEmaHqDSFdpZM97tOfkSfRvvk0LUDEAFIgseetf85DS+AYgk/bPr1NvRZ2HLg4ektwI4xzmgZCBxYohaBMjWPeenDOcvaIvZ2oez5gAqQ5mtLbb3oa4z+Bb6nTHW1UP92vFIr54vzJ8BcGplGdYKkSRbCXGHSWdh2z1ckp1taGccroxyFt9cznG4iGuDqFmASk9kZxxakNGTckHZBBA1DVCB6BMAXuwhyA4VmGL/+05l6zlsbdt7DJmXU0uXmSQ7JvD2zQ1hiwJJsotRvlVxXO87SU5+heUYDT5Gni5KVhg1D1DphWqCjOYy6RlAYzb0mHn3gWkWABWIaoKMubHwSBpGebGWZNdc2vmUO6a1BhJXFUSSff/yLuOYamvzzwEcVfFr7tWwPXqi6uN2PXWYG0C1Qca1n8RaDlewl3kPRL3gWXo/XBwo1dXWdk/a3jEOnJoVQGUoqw0yvpLkh7oUHvLvTohC8FRANBo8pT3sxLeVJ/M2M4QtiVYTZJzkNPoOiAaBxwHRqPDMFqBS8Jog4yT3YewA0aDwrIBodHhmDVApvG0mtO3PnjTJjTxbIBoFnm0gWgs8pQ06lxY3N4QtCWZBRgPDezdnHvPr+alV2EiaL0DlF2Dbn20bdB40XtHwQ5nOHqAC0SyCjEM1Wkv57AqACkRvBvB2p7hrDzI6yzU7s90EUPNBxtnR4SjwrgGo9EK1Qca8cM4ByU4mkuz++F93ZHELyZX3iW31n+S+sKWZWfNBxkCbNeUq6ekArugo1I0kH1xT8EkBKj1R80HGGkFbtZVkZ3bb2d2r0tUkn1hTh8kBKhB9DMBLnQWfJMjoLFuTZpJsO/ONAB7UUcBLSHqvX781q1YAqg0yfoDkq5psrQYLJeldAF7nKFr1x+wmACq9kAUZLazvvTV4P8kDDlE22kTSQ4uuK9dCF5HuR/I3NYI1A1CBaB+AK50VsAMj7TJeixNl2kYBSccCsB/ZMQ6Brif5GIfdYSZNAVQg8rzsLSphl/Hapby2LDZTUaBcq/56ALb1fOVxLkuinULy4loRmwOoQGQX7T7DWZnPk3y203bXmkl6AIA91isDOBGADV3e1HsJbasA1QYZvUKl3fYKPI2knXFQnZoEqPRCNUHG6oqnwyEFLiJ5Wl89mgWoQFQTZOyrwSb7WUztcSRtu0+v1DRABaKPADijV+3SaZUCNgE5geTNEZnmAFBtkDGix6b4Xld2BNvJcaHUPEClF6oNMoZE2eXOtm3q1ZFha1mfWQBUINoL4Kqurbm7vPEj1bOAqx3udW0kk62+swGoQHQ2gPOGFGAD8roJgF0t+qkx6jorgApElwE4aQwxZp6n3YNxsPyzA7yst/4iSdvEMFqaHUCjKZEZ91IgAeolWzotFEiAkoWQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnT+H0jPT81J3xWWAAAAAElFTkSuQmCC",check:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAOCAYAAAAi2ky3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACtSURBVHgBvdPdDcIgEAfwoy8Nb45QN3AGF2s36Ahu4gpuIDoBfSgfpdoTlCbEWEMh6T8hFzjyg5AAkBHOcQe5UWqspRx435sDpMYj6IYQwwVSEiJ2MKVUBWuzLSLl2HL+uxmNCGFO8yaL7RHxve6qRZoAuS4hxac8735elWVx7jrtMKL1o0Gcat9jhExHSukN/kUIFZ7MpDRtzE1isDRkAUtDvrA8ZI597FUf8gWH9P0b4gko9wAAAABJRU5ErkJggg=="},color:{palette:{"blue-20":"0xbecffeff","blue-40":"0x93a9fdff","blue-90":"0x000033ff","grey-05":"0xf8f7faff","grey-40":"0x929096ff","grey-70":"0x48474bff","grey-90":"0x181819ff"},white:"0xffffffff",black:"0x000000ff",grey:"0x929096ff",red:"0xe74c3cff",orange:"0xdc7633ff",yellow:"0xf7dc6fff",green:"0x2ecc71ff",blue:"0x93a9fdff",purple:"0x663399ff",material:"0x181819ff",materialBrand:"0x000033ff",overlay:"0x181819b3",textNeutral:"0xf8f7faff",textNeutralSecondary:"0xf8f7fab3",textNeutralTertiary:"0xf8f7fa1a",textNeutralDisabled:"0xf8f7fa80",textInverse:"0x181819ff",textInverseSecondary:"0x181819b3",textInverseTertiary:"0x1818191a",textInverseDisabled:"0x18181980",textBrand:"0x93a9fdff",textBrandSecondary:"0x93a9fdb3",textBrandTertiary:"0x93a9fd1a",textBrandDisabled:"0x93a9fd80",textPositive:"0x2ecc71ff",textNegative:"0xe74c3cff",textInfo:"0x93a9fdff",textCaution:"0xdc7633ff",fillTransparent:"0xffffff0",fillNeutral:"0xf8f7faff",fillNeutralSecondary:"0xf8f7fab3",fillNeutralTertiary:"0xf8f7fa1a",fillNeutralDisabled:"0xf8f7fa80",fillInverse:"0x181819ff",fillInverseSecondary:"0x181819b3",fillInverseTertiary:"0x1818191a",fillInverseDisabled:"0x18181980",fillBrand:"0x93a9fdff",fillBrandSecondary:"0x93a9fdb3",fillBrandTertiary:"0x93a9fd1a",fillBrandDisabled:"0x93a9fd80",fillPositive:"0x2ecc71ff",fillNegative:"0xe74c3cff",fillInfo:"0x93a9fdff",fillCaution:"0xdc7633ff",strokeNeutral:"0xf8f7faff",strokeNeutralSecondary:"0xf8f7fab3",strokeNeutralTertiary:"0xf8f7fa1a",strokeNeutralDisabled:"0xf8f7fa80",strokeInverse:"0x181819ff",strokeInverseSecondary:"0x181819b3",strokeInverseTertiary:"0x1818191a",strokeInverseDisabled:"0x18181980",strokeBrand:"0x93a9fdff",strokeBrandSecondary:"0x93a9fdb3",strokeBrandTertiary:"0x93a9fd1a",strokeBrandDisabled:"0x93a9fd80",strokePositive:"0x2ecc71ff",strokeNegative:"0xe74c3cff",strokeInfo:"0x93a9fdff",strokeCaution:"0xdc7633ff",interactiveNeutral:"0xffffff1a",interactiveNeutralFocus:"0xffffffff",interactiveNeutralFocusSoft:"0xffffff1a",interactiveInverse:"0x48474b1a",interactiveInverseFocus:"0x48474bff",interactiveInverseFocusSoft:"0x48474b1a",interactiveBrand:"0xbecffe1a",interactiveBrandFocus:"0xbecffeff",interactiveBrandFocusSoft:"0xbecffe1a",shadowNeutral:"0x000000b3",shadowNeutralFocus:"0x000000b3",shadowNeutralFocusSoft:"0x000000b3",shadowNeutralText:"0x000000ff",shadowInverse:"0x000000b3",shadowInverseFocus:"0x000000b3",shadowInverseFocusSoft:"0x000000b3",shadowInverseText:"0x000000ff",shadowBrand:"0x000000b3",shadowBrandFocus:"0x000000b3",shadowBrandFocusSoft:"0x000000b3",shadowBrandText:"0x000000ff"},font:[],layout:{columnCount:10,focusScale:1.2,gutterX:20,gutterY:20,marginX:150,marginY:150,safe:50,screenW:1920,screenH:1080},radius:{none:0,xs:2,sm:4,md:8,lg:16,xl:24},spacer:{none:0,xxs:2,xs:4,sm:8,md:10,lg:20,xl:30,xxl:40,xxxl:50},stroke:{none:0,sm:2,md:4,lg:6,xl:8},typography:{display1:{fontFamily:"Arial",fontSize:75,lineHeight:85,fontWeight:500,verticalAlign:"middle",textBaseline:"bottom"},display2:{fontFamily:"Arial",fontSize:50,lineHeight:60,fontWeight:500,verticalAlign:"middle",textBaseline:"bottom"},headline1:{fontFamily:"Arial",fontSize:35,fontWeight:500,lineHeight:48,verticalAlign:"middle",textBaseline:"bottom"},headline2:{fontFamily:"Arial",fontSize:30,fontWeight:500,lineHeight:40,verticalAlign:"middle",textBaseline:"bottom"},headline3:{fontFamily:"Arial",fontSize:25,fontWeight:500,lineHeight:36,verticalAlign:"middle",textBaseline:"bottom"},body1:{fontFamily:"Arial",fontSize:25,fontWeight:300,lineHeight:40,verticalAlign:"middle",textBaseline:"bottom"},body2:{fontFamily:"Arial",fontSize:22,fontWeight:300,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},body3:{fontFamily:"Arial",fontSize:20,fontWeight:300,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},button1:{fontFamily:"Arial",fontSize:25,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},button2:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},callout1:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},caption1:{fontFamily:"Arial",fontSize:15,fontWeight:500,lineHeight:24,verticalAlign:"middle",textBaseline:"bottom"},tag1:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:24,verticalAlign:"middle",textBaseline:"bottom"},footnote1:{fontFamily:"Arial",fontSize:22,fontWeight:300,lineHeight:30,verticalAlign:"middle",textBaseline:"bottom"}},componentConfig:{Keyboard:{base:{keyProps:{delete:{title:null,icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAAAXNSR0IArs4c6QAACmpJREFUeF7tnVmoZUcVhv/feY4gBEVEH/KgCCZxCK2itNo4xQQH+kUN0TjEiDGKKBqnaExwBjUaR6KY+NQgiQkOMSYhYEScIopGJOqDE2hHjfP0y4p1Oqdv33v2qr32Prv2Paug6Ye7Vu2qv75TtWvtGohMqUBAAQZ80zUVQAKUEIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypfPsAJJ0NYC92XRHKPB3AAfLv18BuBLAFSR/NKZWswJI0vkA3jCmILsw75sAvIfkR8eo22wAknQSgMvGEGFD8vwxgFeQvGrI+s4CIEnHAPgugHsMWfkNzevDAM4i+Z8h6t88QJLuXOB5yBAVzjxuVeBaAM8ieXNUjzkAdAmA50Yrmv5HKPATACeQ/GNEm6YBkvRyANblZhpHAXsfekpkOGsWIEmPAHA9gDuOo13mWhS4gOSZfdVoEiBJ9wFwA4D7961Y+lUpsK/v7KxVgL4K4ElOCS4l+Uyn7a41k3Q0gMcC2ANgH4CHV1T2OyStx69OzQEk6TwAZztr8lMAx5P8s9N+Y8wk2cTjfQDu66z080h+zml7yKwpgCSdCOByZyX+BuBRJH/otN84M0kWN/s0gOc4Kv8Nko922B1m0gxAkh4I4AcVwcL9JA/UVnjT7CXdHYD9yEzfVUkAjib5uxqNmgCoBAu/CeBhzsJ/kORZTtuNN5Nk70bXAZ0Hy59G8qIawVoB6LMAnu8suE3tH0/y3077NAMg6esAuoaoC0la7M2dJgdI0ssAXOgs8W8BHEvS/s9UoYCkdwN4bYfL5STto7U7TQpQZbDQehzreawHylSpgKSTAVza4XYDyeNqsp4MoB7BwteQfH9N5dL2NgWK3l0vyAdJWhDXnSYBSNLtANh3GO/KwgMk97trlYbbKiDJPpzea5U8JKuYqDIeql0kvQPAG5352ZLMR5L8q9M+zXZQYFcAJOnJAL7sbGWLMFuk2SLOmYIKzB6gEiz8HoB7O7U4meQXnLZp1qGApD8BuOcsh7AewcL3kuyadg4OjSSbhRxH0j4BjJok2Ufga0j+YdQHlcznDlBNsPAa+xpP8r/rEHbxjAKPbRuyHvKFY0Ik6QUALOprPfIT1gHRbAGSdDoA77aSX5Zg4e8nhGfx6FEgWoJn8Zy1QCTplq5vjc3NwnoEC/eQ/HYD8IwC0TbwrA2i2QHUI1h4JskLGoJnUIhWwLMWiGYFkCSLMX2t5WDhlneeLm5Dw5kDntEhkmRhEVvesWNqZgiTdC6AN3W1Svn72oOFkuxF+WcVIQUrai+IKuA5BBHJ453auc1mA1AJFn7Jsf7EKj9ZsLBHw1ZDtI5neAmaBUBzCxaO2cBj5u2FZtlO0l8A3K3ZIaxHsPB8kt5vYn00c/mM0dBj5OmqzAqjOQDUfLBwJ32HbPAh84pCM5seSNJLAHzcWeFJgoVdZRui4YfIo6ucff8uyVY03LW5IawyWPgvW5u77mChV/QIABFfb/kidk0CVKbDth3Huw35dJLeniqiV2/fniDYx1f7vlWTeoUFah6wZQhrqwcqwUKbrtsaH0+6mOQpHsOpbXpCVFPstcJjBZNkmzHv0swQJultAN7iVO375TyafzjtJzcbEaK1w9McQJXBQlvvYmtsfjE5FZUFGAGiSeBpCqDKYKFtmX0qya9Utl0z5gNCNBk8BSA7CtiODNwxjf4trEew8BySNtTNOg0A0aTwtARQTbDQeh3rfawXmn0KQDQ5PC0B9EkAL3LSkAD9X6hWALIJzJ3mNoSdS9I7U3NyuX6zQO+zKOzkEEmaHqDSFdpZM97tOfkSfRvvk0LUDEAFIgseetf85DS+AYgk/bPr1NvRZ2HLg4ektwI4xzmgZCBxYohaBMjWPeenDOcvaIvZ2oez5gAqQ5mtLbb3oa4z+Bb6nTHW1UP92vFIr54vzJ8BcGplGdYKkSRbCXGHSWdh2z1ckp1taGccroxyFt9cznG4iGuDqFmASk9kZxxakNGTckHZBBA1DVCB6BMAXuwhyA4VmGL/+05l6zlsbdt7DJmXU0uXmSQ7JvD2zQ1hiwJJsotRvlVxXO87SU5+heUYDT5Gni5KVhg1D1DphWqCjOYy6RlAYzb0mHn3gWkWABWIaoKMubHwSBpGebGWZNdc2vmUO6a1BhJXFUSSff/yLuOYamvzzwEcVfFr7tWwPXqi6uN2PXWYG0C1Qca1n8RaDlewl3kPRL3gWXo/XBwo1dXWdk/a3jEOnJoVQGUoqw0yvpLkh7oUHvLvTohC8FRANBo8pT3sxLeVJ/M2M4QtiVYTZJzkNPoOiAaBxwHRqPDMFqBS8Jog4yT3YewA0aDwrIBodHhmDVApvG0mtO3PnjTJjTxbIBoFnm0gWgs8pQ06lxY3N4QtCWZBRgPDezdnHvPr+alV2EiaL0DlF2Dbn20bdB40XtHwQ5nOHqAC0SyCjEM1Wkv57AqACkRvBvB2p7hrDzI6yzU7s90EUPNBxtnR4SjwrgGo9EK1Qca8cM4ByU4mkuz++F93ZHELyZX3iW31n+S+sKWZWfNBxkCbNeUq6ekArugo1I0kH1xT8EkBKj1R80HGGkFbtZVkZ3bb2d2r0tUkn1hTh8kBKhB9DMBLnQWfJMjoLFuTZpJsO/ONAB7UUcBLSHqvX781q1YAqg0yfoDkq5psrQYLJeldAF7nKFr1x+wmACq9kAUZLazvvTV4P8kDDlE22kTSQ4uuK9dCF5HuR/I3NYI1A1CBaB+AK50VsAMj7TJeixNl2kYBSccCsB/ZMQ6Brif5GIfdYSZNAVQg8rzsLSphl/Hapby2LDZTUaBcq/56ALb1fOVxLkuinULy4loRmwOoQGQX7T7DWZnPk3y203bXmkl6AIA91isDOBGADV3e1HsJbasA1QYZvUKl3fYKPI2knXFQnZoEqPRCNUHG6oqnwyEFLiJ5Wl89mgWoQFQTZOyrwSb7WUztcSRtu0+v1DRABaKPADijV+3SaZUCNgE5geTNEZnmAFBtkDGix6b4Xld2BNvJcaHUPEClF6oNMoZE2eXOtm3q1ZFha1mfWQBUINoL4Kqurbm7vPEj1bOAqx3udW0kk62+swGoQHQ2gPOGFGAD8roJgF0t+qkx6jorgApElwE4aQwxZp6n3YNxsPyzA7yst/4iSdvEMFqaHUCjKZEZ91IgAeolWzotFEiAkoWQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnT+H0jPT81J3xWWAAAAAElFTkSuQmCC"}}}}}};function Jo(){var e,t,r,n=0,o={duration:750,easing:"ease-in-out"},i={alpha:1,color:4294967295};return Te(Re(Vo,(i=>{!function(i){i.startsWith("#")?(e.color=wn(i),e.src="",e.alpha=1,n=1,t.alpha=0,r.alpha=0):(e.color=4294967295,r.alpha=1,0===n?(e.src=i,n=1):1===n?(t.src=i,n=2,t.alpha=0,t.animate({alpha:1},o).start(),e.animate({alpha:0},o).start()):2===n&&(e.src=i,n=1,e.alpha=0,e.animate({alpha:1},o).start(),t.animate({alpha:0},o).start()))}(i)}),{defer:!0})),pn(ln,{width:1920,height:1080,zIndex:-5,get children(){return[pn(ln,{ref(t){"function"==typeof e?e(t):e=t},style:i}),pn(ln,{ref(e){"function"==typeof t?t(e):t=e},style:i,alpha:0}),pn(ln,{ref(e){"function"==typeof r?r(e):r=e},src:"./assets/hero-mask-inverted.png",get color(){return wn(qo.color.materialBrand)},width:1920,height:1080})]}})}function ei(e){if(!e||!e[Symbol.iterator])throw new Error("objectFromEntries requires a single iterable argument");var t,r={},n=T(e);try{for(n.s();!(t=n.n()).done;){var o=C(t.value,2),i=o[0],a=o[1];r[i]=a}}catch(s){n.e(s)}finally{n.f()}return r}var ti=["focus","disabled"],ri=["brand","inverse","neutral"];function ni({themeKeys:e,base:t,modes:r,tones:n,themeStyles:o,modeKeys:i=ti,toneKeys:a=ri},s=!1){var l=t=>ei(Object.entries(e).filter((([e,r])=>t[r])).map((([e,r])=>[e,t[r]])));return((e,t,r)=>{var n,d=(n=o,ei(Object.entries(n).map((([e,t])=>{var r=l(t);return Object.entries(t).filter((([e,t])=>i.includes(e))).forEach((([e,t])=>{r[e]=l(t)})),[e,r]}))));s&&console.log(d);var u=((e,t)=>S(S({},e),t.base))(e,d);s&&console.log(u);var h=((e,t)=>ei(i.map((r=>[r,S(S({},null==e?void 0:e[r]),null==t?void 0:t[r])]))))(t,d);s&&console.log(h);var c=((e,t,r)=>ei(a.map((n=>{var o,a,s={};return new Set([].concat.apply([],[null!==(o=null==e?void 0:e[n])&&void 0!==o?o:{},null!==(a=null==t?void 0:t[n])&&void 0!==a?a:{}].map(Object.keys))).forEach((r=>{var o,a,l;i.includes(r)||(s[r]=null!==(l=null==(o=null==t?void 0:t[n])?void 0:o[r])&&void 0!==l?l:null==(a=null==e?void 0:e[n])?void 0:a[r])})),i.forEach((o=>{var i,a;s[o]=S(S(S({},r[o]),null==(i=null==e?void 0:e[n])?void 0:i[o]),null==(a=null==t?void 0:t[n])?void 0:a[o])})),[n,s]}))))(r,d,h);return s&&console.log(c),{base:S(S({},u),h),tones:c}})(t,r,n)}function oi(e=0){return(t,r,n=0,o)=>{var i,a,s;if(0!==t.children.length){var l="row"===t.flexDirection?"width":"height",d="row"===t.flexDirection?"x":"y",u=t.gap||0,h=t.scroll||"auto",c=function(e){var t,r;"row"===e.flexDirection?(t={position:e.children[e.children.length-1].x,size:e.children[e.children.length-1].width},r=e.width):(t={position:e.children[e.children.length-1].y,size:e.children[e.children.length-1].height},r=e.height);return[t,r]}(t),f=C(c,2),p=f[0],v=f[1],g=null!==(i=t[d])&&void 0!==i?i:0,m=null!==(a=null==r?void 0:r[d])&&void 0!==a?a:0,x=null!==(s=null==r?void 0:r[l])&&void 0!==s?s:0,y=void 0===o?"none":n>o?"positive":"negative",b=g;if("auto"===h)null!=t.scrollIndex&&t.scrollIndex>=0?t.selected>=t.scrollIndex&&(b="positive"===y?g-x-u:g+x+u):(Math.abs(g)+v<p.position+p.size||m<Math.abs(g))&&(b=-m+e);else if("always"===h||"edge"===h&&"negative"===y&&Math.abs(g)>m)b=-m+e;else if("edge"===h&&"positive"===y&&Math.abs(g)+v<m+x)b=g-x-u;else if("edge"===h&&"none"===y){for(var w=0;w<t.children.length&&Math.abs(g)+v<m+x;){var S;g-=(null!==(S=t.children[w++][l])&&void 0!==S?S:0)+u}b=g}"x"===d&&t.x!==b?t.x=b:"y"===d&&t.y!==b&&(t.y=b)}}}var ii=(...e)=>{var t=e.filter((e=>"function"==typeof e));if(0!==t.length)return 1===t.length?t[0]:function(...e){var r,n,o=T(t);try{for(o.s();!(n=o.n()).done;){if(!0===(r=n.value.apply(this,e)))return r}}catch(i){o.e(i)}finally{o.f()}return r}};function ai(){if(!this||void 0===this.selected||0===this.children.length)return!1;for(var e=this.children[this.selected];null==e?void 0:e.skipFocus;)this.selected++,e=this.children[this.selected];return e instanceof Jr&&(e.setFocus(),!0)}function si(e){return function(){var t,r,n,o=this.children.length,i=this.wrap,a=this.selected||0;if(0===o)return!1;if("right"===e||"down"===e){do{if(this.selected=(this.selected||0)%o+1,this.selected>=o){if(!i){this.selected=void 0;break}this.selected=0}}while(null==(t=this.children[this.selected])?void 0:t.skipFocus)}else if("left"===e||"up"===e)do{if(this.selected=(this.selected||0)%o-1,this.selected<0){if(!i){this.selected=void 0;break}this.selected=o-1}}while(null==(r=this.children[this.selected])?void 0:r.skipFocus);if(void 0===this.selected&&(this.selected=a,null==(n=this.children[this.selected])?void 0:n.states.has("focus")))return!1;var s=this.children[this.selected];if(this.onSelectedChanged&&this.onSelectedChanged.call(this,this,s,this.selected,a),this.plinko&&void 0!==a){var l=this.children[a].selected||0;s.selected=l<s.children.length?l:s.children.length-1}return s.setFocus(),!0}}var li=(null==(Eo=qo)?void 0:Eo.componentConfig).Artwork,di=void 0===li?{styles:{}}:li,ui=(di.defaultTone,m(di,e));ni({themeKeys:{fillColor:"fillColor",scale:"imageScale",pivotX:"imageScalePivotX",pivotY:"imageScalePivotY"},base:{fallbackSrc:void 0,fillColor:qo.color.overlay,gradientColor:qo.color.material,pivotX:.5,pivotY:.5,scale:void 0},themeStyles:ui});var hi=(null==(No=qo)?void 0:No.componentConfig).Badge,ci=void 0===hi?{styles:{}}:hi,fi=(ci.defaultTone,m(ci,t)),pi={themeKeys:{color:"backgroundColor"},base:{color:qo.color.fillInverseSecondary,borderRadius:qo.radius.sm,border:{color:qo.color.strokeInverse,width:qo.stroke.sm},display:"flex",justifyContent:"spaceEvenly",padding:[qo.spacer.md-qo.stroke.sm,qo.spacer.xs+qo.stroke.sm,qo.spacer.md+qo.stroke.sm,qo.spacer.md+qo.stroke.sm]},tones:{inverse:{color:qo.color.fillNeutralSecondary,borderRadius:qo.radius.sm,border:{color:qo.color.strokeInverseSecondary,width:qo.stroke.sm}},brand:{color:qo.color.fillBrand,borderRadius:qo.radius.sm,border:{color:qo.color.strokeInverseSecondary,width:qo.stroke.sm}}},themeStyles:fi},vi={themeKeys:{color:"textColor"},base:S(S({},qo.typography.tag1),{},{color:qo.color.textNeutral}),tones:{inverse:{color:qo.color.textInverse},brand:{color:qo.color.textNeutral}},themeStyles:fi},gi={themeKeys:{color:"iconColor"},base:{color:qo.color.textNeutral},tones:{inverse:{color:qo.color.textInverse},brand:{color:qo.color.textNeutral}},themeStyles:fi};ni(pi),ni(gi),ni(vi);var mi=(null==(Fo=qo)?void 0:Fo.componentConfig).Button,xi=void 0===mi?{styles:{}}:mi,yi=xi.defaultTone,bi=m(xi,r),wi=(null==(Lo=qo)?void 0:Lo.componentConfig).Surface,Si=void 0===wi?{styles:{}}:wi,Ai=Si.surfaceDefaultTone,Ci=m(Si,n),Ti={themeKeys:{textAlign:"textAlign",borderRadius:"radius",color:"backgroundColor",justifyContent:"justifyContent"},base:{height:qo.typography.button1.lineHeight+2*qo.spacer.xl,display:"flex",padding:[qo.spacer.xxxl,qo.spacer.xl],color:qo.color.interactiveNeutral,justifyContent:"center",alignItems:"center",borderRadius:qo.radius.sm,contentColor:qo.color.fillNeutral},modes:{focus:{color:qo.color.interactiveNeutralFocus,contentColor:qo.color.fillInverse},disabled:{color:qo.color.fillNeutralDisabled}},tones:{inverse:{color:qo.color.interactiveInverse},brand:{color:qo.color.interactiveBrand,focus:{color:qo.color.fillNeutral}}},themeStyles:S(S({},Ci),bi)},_i={themeKeys:{color:"contentColor"},base:{color:qo.color.textNeutral},modes:{focus:{color:qo.color.textInverse},disabled:{color:qo.color.textNeutralDisabled}},tones:{inverse:{color:qo.color.fillNeutral},brand:{color:qo.color.fillBrand,focus:{color:qo.color.fillBrand}}},themeStyles:S(S({},Ci),bi)},ki={themeKeys:{color:"textColor"},base:S({textAlign:"left",color:qo.color.textNeutral},qo.typography.button1),modes:{focus:{color:qo.color.textInverse},disabled:{color:qo.color.textNeutralDisabled}},tones:{inverse:{color:qo.color.fillNeutral},brand:{color:qo.color.fillBrand,focus:{color:qo.color.fillBrand}}},themeStyles:S(S({},Ci),bi)},Ii={tone:yi||Ai||"neutral",Container:ni(Ti),Content:ni(_i),Text:ni(ki)},Bi=e=>pn(ln,yn(e,{get style(){var t,r;return[...[e.style].flat(),null==(r=Ii.Container.tones)?void 0:r[null!==(t=e.tone)&&void 0!==t?t:Ii.tone],Ii.Container.base]},forwardStates:!0,get children(){return pn(sn,{get style(){var t,r;return[...[null==(r=e.style)?void 0:r.Text].flat(),Ii.Text.tones[null!==(t=e.tone)&&void 0!==t?t:Ii.tone],Ii.Text.base]},get children(){return e.children}})}})),Ri=(null==(zo=qo)?void 0:zo.componentConfig).Checkbox,Ei=void 0===Ri?{styles:{}}:Ri,Ni=(Ei.defaultTone,m(Ei,o)),Fi=qo.stroke.sm,Li=qo.spacer.xxl,zi={themeKeys:{color:"color",borderRadius:"borderRadius",border:"border",justifyContent:"justifyContent"},base:{width:Li,height:Li,display:"flex",justifyContent:"center",color:qo.color.fillNeutral,alignItems:"center",borderRadius:Li/4,border:{color:qo.color.strokeInverse,width:Fi}},modes:{disabled:{alpha:qo.alpha.inactive}},tones:{brand:{borderRadius:Li/4,border:{color:qo.color.strokeNeutralSecondary,width:Fi},color:qo.color.fillNeutralSecondary,checked:{borderRadius:Li/4,border:{color:qo.color.strokeNeutralSecondary,width:Fi},color:qo.color.fillBrand}},neutral:{borderRadius:Li/4,border:{color:qo.color.strokeNeutralSecondary,width:Fi},color:qo.color.fillInverseSecondary,checked:{borderRadius:Li/4,border:{color:qo.color.strokeNeutralSecondary,width:Fi},color:qo.color.fillNeutral}},inverse:{borderRadius:Li/4,border:{color:qo.color.strokeInverseSecondary,width:Fi},color:qo.color.fillNeutralSecondary,checked:{borderRadius:Li/4,border:{color:qo.color.strokeInverseSecondary,width:Fi},color:qo.color.fillInverse}}},modeKeys:["focus","disabled","checked"],themeStyles:Ni},Mi={themeKeys:{color:"color"},base:{width:qo.spacer.lg,height:qo.spacer.lg,src:qo.asset.check},tones:{neutral:{color:qo.color.fillInverse},inverse:{color:qo.color.fillNeutral},brand:{color:qo.color.fillInverse}},themeStyles:Ni};ni(zi),ni(Mi);var Pi=(null==(Mo=qo)?void 0:Mo.componentConfig).Icon,Di=void 0===Pi?{styles:{}}:Pi,Oi=(Di.defaultTone,m(Di,i));ni({themeKeys:{color:"color"},base:{width:100,height:100,color:qo.color.fillInverse},tones:{inverse:{color:qo.color.fillInverse},brand:{color:qo.color.fillBrand}},themeStyles:Oi});var Ui=(null==(Po=qo)?void 0:Po.componentConfig).Column,Wi=void 0===Ui?{styles:{}}:Ui,Yi=Wi.defaultTone,ji=m(Wi,a),Hi={tone:Yi||"neutral",Container:ni({themeKeys:{gap:"itemSpacing",scrollIndex:"scrollIndex",itemTransition:"itemTransition"},base:{display:"flex",flexBoundary:"fixed",flexDirection:"column",gap:qo.layout.gutterY,itemTransition:S(S({},qo.animation.standardEntrance),{},{duration:qo.animation.duration.fast})},themeStyles:ji})},Qi=e=>{var t=si("up"),r=si("down");return pn(ln,yn(e,{get onUp(){return ii(e.onUp,t)},get onDown(){return ii(e.onDown,r)},get selected(){return e.selected||0},forwardFocus:ai,get onCreate(){return ii((t=>{var r,n;return oi(e.y).call(t,t,t.children[null!==(r=e.selected)&&void 0!==r?r:0],null!==(n=e.selected)&&void 0!==n?n:0,void 0)}),e.onCreate)},get onSelectedChanged(){return ii(e.onSelectedChanged,"none"!==e.scroll?oi(e.y):void 0)},get style(){var t;return[...[e.style].flat(),Hi.Container.tones[null!==(t=e.tone)&&void 0!==t?t:Hi.tone],Hi.Container.base]}}))},Ki=(null==(Do=qo)?void 0:Do.componentConfig).Label,$i=void 0===Ki?{styles:{}}:Ki,Xi=($i.defaultTone,m($i,s)),Gi={themeKeys:{color:"backgroundColor",borderRadius:"radius"},base:{display:"flex",justifyContent:"center",color:qo.color.textNeutral,padding:[qo.spacer.md,qo.spacer.lg],borderRadius:[qo.radius.md,qo.radius.md,qo.radius.md,qo.radius.none],height:qo.typography.caption1.lineHeight+qo.spacer.md,neutral:{backgroundColor:qo.color.fillNeutral}},tones:{inverse:{color:qo.color.fillInverse},brand:{color:qo.color.fillBrand,focus:{color:qo.color.orange}}},themeStyles:Xi},Vi={themeKeys:{color:"textColor"},base:S(S({},qo.typography.caption1),{},{color:qo.color.textInverse}),tones:{inverse:{color:qo.color.textNeutral},brand:{color:qo.color.textNeutral}},themeStyles:Xi};ni(Gi),ni(Vi);var Zi=(null==(Oo=qo)?void 0:Oo.componentConfig).Rating,qi=void 0===Zi?{styles:{},defaultTone:"neutral"}:Zi,Ji=qi.styles,ea=(qi.defaultTone,{themeKeys:{justifyContent:"justifyContent",itemSpacing:"itemSpacing"},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart",itemSpacing:qo.spacer.sm},toneModes:{},themeStyles:Ji}),ta={themeKeys:{color:"textColor"},base:S({color:qo.color.textNeutral},qo.typography.body2),toneModes:{},themeStyles:Ji},ra={themeKeys:{color:"color"},base:{height:qo.typography.body2.lineHeight,width:qo.typography.body2.lineHeight,color:qo.color.fillNeutral,marginRight:qo.spacer.sm},toneModes:{},themeStyles:Ji};ni(ea),ni(ra),ni(ta);var na=(null==(Uo=qo)?void 0:Uo.componentConfig).Details,oa=void 0===na?{styles:{}}:na,ia=(oa.defaultTone,m(oa,l)),aa={themeKeys:{alignItems:"alignItems",contentSpacing:"contentSpacing",badgeContentSpacing:"badgeContentSpacing",ratingContentSpacing:"ratingContentSpacing"},base:{display:"flex",flexDirection:"row",alignItems:"center",contentSpacing:qo.spacer.lg,badgeContentSpacing:qo.spacer.sm,ratingContentSpacing:qo.spacer.lg},themeStyles:ia},sa={themeKeys:{color:"textColor"},base:S(S({},qo.typography.body2),{},{marginRight:qo.spacer.lg,color:qo.color.textNeutral}),tones:{neutral:{disabled:{color:qo.color.textNeutralDisabled}},inverse:{color:qo.color.textInverse,disabled:{color:qo.color.textNeutralDisabled}},brand:{color:qo.color.textNeutral,disabled:{color:qo.color.textNeutralDisabled}}},themeStyles:ia};ni(aa),ni(sa);var la=(null==(Wo=qo)?void 0:Wo.componentConfig).Metadata,da=void 0===la?{styles:{}}:la,ua=(da.defaultTone,m(da,d)),ha={themeKeys:{justifyContent:"justifyContent",alpha:"alpha"},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart",alpha:qo.alpha.primary},modes:{disabled:{alpha:qo.alpha.inactive}},themeStyles:ua},ca={themeKeys:{color:"textColor"},base:S(S({maxLines:1,contain:"width"},qo.typography.headline3),{},{color:qo.color.textNeutral}),tones:{neutral:{disabled:{color:qo.color.textNeutralDisabled}},inverse:{color:qo.color.textInverse,disabled:{color:qo.color.textNeutralDisabled}},brand:{color:qo.color.textNeutral,disabled:{color:qo.color.textNeutralDisabled}}},themeStyles:ua},fa={themeKeys:{color:"textColor"},base:S(S({contain:"width",maxLines:2},qo.typography.body2),{},{color:qo.color.textNeutralSecondary}),tones:{neutral:{disabled:{color:qo.color.textNeutralDisabled}},inverse:{color:qo.color.textInverseSecondary,disabled:{color:qo.color.textNeutralDisabled}},brand:{color:qo.color.textNeutralSecondary,disabled:{color:qo.color.textNeutralDisabled}}},themeStyles:ua};ni(ha),ni(fa),ni(ca);var pa=(null==(Yo=qo)?void 0:Yo.componentConfig).ProgressBar,va=void 0===pa?{styles:{}}:pa,ga=(va.defaultTone,m(va,u)),ma={themeKeys:{color:"barColor",borderRadius:"borderRadius"},base:{height:qo.spacer.md,color:qo.color.fillNeutralTertiary,borderRadius:qo.radius.xs},tones:{inverse:{color:qo.color.fillInverseTertiary}},themeStyles:ga},xa={themeKeys:{color:"progressColor",borderRadius:"borderRadius"},base:{borderRadius:qo.radius.xs,color:qo.color.fillNeutral},tones:{inverse:{color:qo.color.fillInverse},brand:{color:qo.color.fillBrand}},themeStyles:ga};ni(ma),ni(xa);var ya=(null==(jo=qo)?void 0:jo.componentConfig).Row,ba=void 0===ya?{styles:{}}:ya,wa=ba.defaultTone,Sa=m(ba,h),Aa={tone:wa,Container:ni({themeKeys:{gap:"itemSpacing",scrollIndex:"scrollIndex",itemTransition:"itemTransition"},base:{display:"flex",flexBoundary:"fixed",flexDirection:"row",gap:qo.layout.gutterX,itemTransition:S(S({},qo.animation.standardEntrance),{},{duration:qo.animation.duration.fast})},themeStyles:Sa})},Ca=e=>{var t=si("left"),r=si("right");return pn(ln,yn(e,{get selected(){return e.selected||0},get onLeft(){return ii(e.onLeft,t)},get onRight(){return ii(e.onRight,r)},forwardFocus:ai,get onCreate(){return ii((t=>{var r,n;return oi(e.x).call(t,t,t.children[null!==(r=e.selected)&&void 0!==r?r:0],null!==(n=e.selected)&&void 0!==n?n:0,void 0)}),e.onCreate)},get onSelectedChanged(){return ii(e.onSelectedChanged,"none"!==e.scroll?oi(e.x):void 0)},get tone(){var t;return null!==(t=e.tone)&&void 0!==t?t:Aa.tone},get style(){return[...[e.style].flat(),Aa.Container.tones[e.tone||Aa.tone],Aa.Container.base]},get states(){var t;return null!==(t=e.tone)&&void 0!==t?t:Aa.tone}}))},Ta=(null==(Ho=qo)?void 0:Ho.componentConfig).Keyboard,_a=void 0===Ta?{styles:{}}:Ta,ka=(_a.defaultTone,m(_a,c)),Ia={themeKeys:{keySpacing:"keySpacing",screenW:"screenW",marginX:"marginX"},base:{keySpacing:qo.spacer.md,screenW:qo.layout.screenW,marginX:qo.layout.marginX,height:100},themeStyles:ka},Ba={themeKeys:{keySpacing:"keySpacing",textAlign:"textAlign",borderRadius:"borderRadius",color:"backgroundColor",justifyContent:"justifyContent",baseWidth:"baseWidth",sizes:"sizes",contentColor:"contentColor"},base:{keySpacing:qo.spacer.md,height:9*qo.spacer.md,paddingX:qo.spacer.md,sizes:{sm:1,md:2,lg:3,xl:4,xxl:5},contentColor:qo.color.fillNeutral,padding:[qo.spacer.xxxl,qo.spacer.xl],baseWidth:7*qo.spacer.md,color:qo.color.interactiveNeutral,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:qo.radius.sm},modes:{focus:{color:qo.color.interactiveNeutralFocus,contentColor:qo.color.fillInverse},disabled:{color:qo.color.fillNeutralDisabled,contentColor:qo.color.fillNeutralDisabled}},tones:{inverse:{color:qo.color.interactiveInverse,focus:{color:qo.color.interactiveInverseFocus,contentColor:qo.color.fillNeutral}},brand:{focus:{contentColor:qo.color.fillNeutral}}},themeStyles:ka},Ra={themeKeys:{color:"textColor"},base:S({textAlign:"left",color:qo.color.textNeutral},qo.typography.headline2),modes:{focus:{color:qo.color.textInverse},disabled:{color:qo.color.textNeutralDisabled}},tones:{inverse:{focus:{color:qo.color.textNeutral}}},themeStyles:ka};ni(Ia),ni(Ba),ni(Ra);var Ea=(null==(Qo=qo)?void 0:Qo.componentConfig).Key,Na=void 0===Ea?{styles:{}}:Ea,Fa=(Na.defaultTone,m(Na,f)),La={themeKeys:{keySpacing:"keySpacing",textAlign:"textAlign",borderRadius:"borderRadius",color:"backgroundColor",justifyContent:"justifyContent",baseWidth:"baseWidth",sizes:"sizes",contentColor:"contentColor"},base:{keySpacing:qo.spacer.md,height:9*qo.spacer.md,paddingX:qo.spacer.md,contentColor:qo.color.fillNeutral,sizes:{sm:1,md:2,lg:3,xl:4,xxl:5},padding:[qo.spacer.md],baseWidth:7*qo.spacer.md,color:qo.color.interactiveNeutral,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:qo.radius.sm},modes:{focus:{color:qo.color.interactiveNeutralFocus,contentColor:qo.color.fillInverse},disabled:{color:qo.color.fillNeutralDisabled,contentColor:qo.color.fillNeutralDisabled}},tones:{inverse:{color:qo.color.interactiveInverse,focus:{color:qo.color.interactiveInverseFocus,contentColor:qo.color.fillNeutral}},brand:{focus:{contentColor:qo.color.fillNeutral}}},themeStyles:Fa},za={themeKeys:{color:"textColor"},base:S({textAlign:"left",color:qo.color.textNeutral},qo.typography.headline2),modes:{focus:{color:qo.color.textInverse},disabled:{color:qo.color.textNeutralDisabled}},tones:{inverse:{focus:{color:qo.color.textNeutral}}},themeStyles:Fa};ni(La),ni(za);var Ma=(null==(Ko=qo)?void 0:Ko.componentConfig).Input,Pa=void 0===Ma?{styles:{}}:Ma,Da=(Pa.defaultTone,m(Pa,p)),Oa={themeKeys:{justifyContent:"justifyContent"},base:{display:"flex",justifyContent:"flexStart",flexDirection:"column",width:100,height:100,actualTitle:""},themeStyles:Da},Ua={themeKeys:{borderRadius:"borderRadius",color:"backgroundColor"},base:{width:function(e,t=1){var r=e.layout.screenW,n=e.layout.columnCount,o=e.layout.marginX,i=e.layout.gutterX;if(!(t<1||t>n))return(r-2*o-(t-1)*i)/t;console.error(`Column expects a number between 1 & ${n}. Received ${t}`)}(qo,4),height:100,display:"flex",flexDirection:"column",padding:[qo.spacer.xxxl,qo.spacer.xl],color:qo.color.interactiveNeutral,contentColor:qo.color.fillInverse,borderRadius:qo.radius.sm,marginX:qo.spacer.xxxl},modes:{focus:{color:qo.color.interactiveNeutralFocus},disabled:{color:qo.color.fillNeutralDisabled}},tones:{inverse:{color:qo.color.interactiveInverse},brand:{color:qo.color.interactiveBrand,focus:{color:qo.color.fillNeutral}}},themeStyles:Da},Wa={themeKeys:{color:"textColor"},base:S({textAlign:"left",color:qo.color.textNeutral},qo.typography.button1),themeStyles:Da};ni(Oa),ni(Ua),ni(Wa);var Ya=(null==($o=qo)?void 0:$o.componentConfig).Tile,ja=void 0===Ya?{styles:{}}:Ya,Ha=(ja.defaultTone,m(ja,v)),Qa=(null==(Xo=qo)?void 0:Xo.componentConfig).Surface,Ka=void 0===Qa?{styles:{}}:Qa,$a=(Ka.defaultSurfaceTone,m(Ka,g)),Xa={themeKeys:{alpha:"alpha",paddingYProgress:"paddingYProgress"},base:{width:400,height:240,padding:[40,10],paddingYProgress:qo.spacer.xl,paddingYBetweenContent:qo.spacer.md,borderRadius:qo.radius.md,alpha:qo.alpha.primary},modes:{disabled:{alpha:qo.alpha.inactive}},themeStyles:S(S({},$a),Ha)},Ga={themeKeys:{},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart",mountY:1},themeStyles:Ha},Va={themeKeys:{},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart"},themeStyles:Ha},Za={themeKeys:{},base:{width:5*qo.spacer.lg,height:qo.spacer.xxl+qo.spacer.md},themeStyles:Ha};ni(Xa),ni(Ga),ni(Va),ni(Za);var qa={color:255,height:150,width:330,x:1910,y:10,mountX:1,alpha:.8,zIndex:100},Ja={x:10,fontSize:22,textColor:wn("#f6f6f6")},es={fontSize:22,textColor:wn("#f6f6f6")},ts=C(Se(0),2),rs=ts[0],ns=ts[1],os=C(Se(0),2),is=os[0],as=os[1],ss=C(Se(99),2),ls=ss[0],ds=ss[1],us=C(Se(0),2),hs=us[0],cs=us[1],fs=C(Se(0),2),ps=fs[0],vs=fs[1],gs=C(Se(0),2),ms=gs[0],xs=gs[1],ys=C(Se(0),2),bs=ys[0],ws=ys[1],Ss=0,As=0;function Cs(e){e.renderer.on("fpsUpdate",((e,t)=>{var r,n,o,i,a="number"==typeof t?t:t.fps;a>5&&((e=>{e&&(ns(e),ds((t=>Math.min(e,t))),cs((t=>Math.max(e,t))),As+=e,Ss++,as(Math.round(As/Ss)))})(a),r=e.root.stage,n=0,o=0,i=0,r.txManager.textureIdCache.forEach(((e,t,r)=>{"loaded"===e.state&&n++,"loading"===e.state&&o++,"failed"===e.state&&i++})),vs(n),xs(o),ws(i))}))}var Ts=e=>pn(ln,yn(e,{style:qa,get children(){return[pn(ln,{get children(){return[pn(sn,{style:Ja,children:"FPS:"}),pn(sn,{style:es,x:90,get children(){return rs()}})]}}),pn(ln,{x:160,get children(){return[pn(sn,{style:Ja,children:"AVG:"}),pn(sn,{style:es,x:100,get children(){return is()}})]}}),pn(ln,{x:0,y:20,get children(){return[pn(sn,{style:Ja,children:"MIN:"}),pn(sn,{style:es,x:90,get children(){return ls()}})]}}),pn(ln,{x:160,y:20,get children(){return[pn(sn,{style:Ja,children:"MAX:"}),pn(sn,{style:es,x:100,get children(){return hs()}})]}}),pn(ln,{x:0,y:50,get children(){return[pn(sn,{style:Ja,children:"Loaded Textures Cnt:"}),pn(sn,{style:Ja,x:270,get children(){return ps()}})]}}),pn(ln,{x:0,y:80,get children(){return[pn(sn,{style:Ja,children:"Loading Textures Cnt:"}),pn(sn,{style:Ja,x:270,get children(){return ms()}})]}}),pn(ln,{x:0,y:110,get children(){return[pn(sn,{style:Ja,children:"Failed Textures Cnt:"}),pn(sn,{style:Ja,x:270,get children(){return bs()}})]}})]}})),_s={Column:{flexDirection:"column",display:"flex",width:320,height:600,y:360,gap:20,zIndex:101,transition:{x:{duration:250,easing:"ease-in-out"}},x:8,focus:{x:qo.layout.marginX}},Gradient:{zIndex:99,color:wn("#000000"),src:"./assets/sidenav.png",alpha:0,width:1200,height:1080,focus:{alpha:1},transition:{alpha:!0}},NavButton:{zIndex:102,height:70,width:100,borderRadius:8,focus:{color:wn("#424242")},active:{width:328,height:70}}},ks="/solid-demo-app/",Is=[{name:"experiment",width:81,height:100,x:0,y:0},{name:"trending",width:100,height:56,x:81,y:0},{name:"tv",width:100,height:68,x:181,y:0},{name:"movie",width:94,height:100,x:282,y:0}];function Bs(e){var t,r,n,o=(t=ks+"assets/icons_white.png",r=Is,n=Mr.createTexture("ImageTexture",{src:t}),r.reduce(((e,t)=>{var r=t.x,o=t.y,i=t.width,a=t.height;return e[t.name]=Mr.createTexture("SubTexture",{texture:n,x:r,y:o,width:i,height:a}),e}),{}));return pn(ln,yn(e,{get texture(){return o[e.name]},get width(){return o[e.name].props.width},get height(){return o[e.name].props.height},get x(){return(100-(o[e.name].props.width||0))/2},get y(){return(100-(o[e.name].props.height||0))/2}}))}function Rs(e){return pn(ln,yn(e,{forwardStates:!0,get style(){return _s.NavButton},get children(){return[pn(ln,{y:-16,get children(){return pn(Bs,{scale:.5,get name(){return e.icon}})}}),pn(sn,{style:{fontSize:38,x:116,y:18,height:50,alpha:0,active:{alpha:1}},get children(){return e.children}})]}}))}function Es(e){var t,r=Wn();function n(t){var n,o,i,a;if((n=()=>t,i=Yn(),a=_e((()=>Mn(n()).map((e=>Fn(e,void 0,o))))),_e((()=>{var e,t=T(a());try{for(t.s();!(e=t.n()).done;){var r=(0,e.value)(i.pathname);if(r)return r}}catch(n){t.e(n)}finally{t.f()}})))())return e.focusPage();r(t)}return[pn(ln,{flexItem:!1,x:40,y:30,zIndex:105,get alpha(){return e.showWidgets?1:0},get children(){return[pn(sn,{x:80,fontSize:28,color:4143380036,children:"Built With:"}),pn(ln,{y:22,src:"./assets/solidWord.png",width:280,height:52})]}}),pn(Qi,yn(e,{onFocus:function(){t.states.add("focus"),this.children.forEach((e=>e.states.add("active"))),this.children.selected.setFocus()},onBlur:function(){t.states.remove("focus"),this.selected=0,this.children.forEach((e=>e.states.remove("active")))},get style(){return _s.Column},scroll:"none",get children(){return[pn(Rs,{onEnter:()=>n("/browse/all"),icon:"trending",children:"Trending"}),pn(Rs,{icon:"movie",onEnter:()=>n("/browse/movie"),children:"Movies"}),pn(Rs,{icon:"tv",onEnter:()=>n("/browse/tv"),children:"TV"}),pn(Rs,{icon:"experiment",onEnter:()=>n("/examples"),children:"Examples"})]}})),pn(ln,{ref(e){"function"==typeof t?t(e):t=e},get style(){return _s.Gradient}})]}var Ns=e=>{go({Announcer:"a",Menu:"m",Escape:"Escape",Backspace:"Backspace"});var t=(Ro.setupTimers(),Te(Re(po,Ro.onFocusChange,{defer:!0})),Ro);t.enabled=!1;var r,n,o=Wn(),i=Fe();function a(){return!r.states.has("focus")&&(n=ct(),r.setFocus())}console.log("root2",i),Cs({renderer:Mr});var s=C(Se(!0),2),l=s[0],d=s[1],u=Yn(),h=["/browse","/entity"];return Te((()=>{var e=u.pathname,t=h.some((t=>e.startsWith(t)));"/"===e&&(t=!0),d(t)})),pn(ln,{onAnnouncer:()=>t.enabled=!t.enabled,onLast:()=>history.back(),onMenu:()=>o("/"),style:{width:1920,height:1080},onBackspace:a,onLeft:a,onRight:()=>r.states.has("focus")&&n.setFocus(),get children(){return[pn(Jo,{}),pn(Ts,{mountX:1,x:1910,y:10,get alpha(){return l()?1:0}}),fn((()=>e.children)),pn(Es,{ref(e){"function"==typeof r?r(e):r=e},focusPage:()=>n.setFocus(),get showWidgets(){return l()}})]}})},Fs={Page:{width:1920,height:1080},headlineText:{width:1200,height:240,x:360,y:455,contain:"both",fontSize:66,textAlign:"center"},headlineSubText:{width:960,height:170,x:530,y:655,contain:"both",fontSize:48,textAlign:"center"},itemsContainer:{width:qo.layout.screenW,height:600,y:560,x:0,zIndex:2},Thumbnail:{borderRadius:16,width:185,height:278,scale:1,zIndex:2,transition:{scale:{duration:250,easing:"ease-in-out"}},border:{width:0,color:0},focus:{scale:1.1,border:{color:4294967142,width:8}}},FocusRing:{borderRadius:16,width:194,height:286,y:-5,x:-5,zIndex:-1},FPS:{color:255,height:42,width:140,x:20,y:20,zIndex:100},FPSLabel:{x:10,y:0,fontSize:36,textColor:wn("#ffffff")},FPSValue:{x:90,y:0,fontSize:36,textColor:wn("#ffffff")},showHeadline:{x:70,y:20},headlineBlur:{width:1920,height:150,x:0,y:0,zIndex:14,alpha:.9,color:wn("#000000")},RowTitle:{height:60,width:300,marginBottom:-40,fontSize:36,color:wn("#f0f0f0"),zIndex:2},Row:{display:"flex",justifyContent:"spaceBetween",height:300},Column:{display:"flex",flexDirection:"column",justifyContent:"flexStart",gap:64,width:qo.layout.screenW-2*qo.layout.marginX,x:qo.layout.marginX+qo.layout.gutterX,y:48,transition:{y:{duration:250,easing:"ease-in-out"}},zIndex:2},Rect:{width:250,height:100,y:10,x:300,color:wn("#0000ff")},peopleBio:S(S({},qo.typography.body1),{},{fontFamily:"Ubuntu",fontWeight:"normal",contain:"both",width:780,height:340})},Ls={width:120,height:40,color:wn("#000000"),borderRadius:8,border:{width:2,color:wn("#3333ff")},scale:1,focus:{scale:1.1,border:{width:5,color:wn("#333333")}},transition:{scale:!0,color:!0}},zs={container:Ls,topBar:{color:wn("#00A699"),height:8,y:2,x:-4,width:Ls.width+8},text:{fontSize:12,y:12,contain:"width",textAlign:"center",color:wn("#F6F6F9"),height:Ls.height,width:Ls.width}},Ms=386,Ps=136,Ds=(wn("#715cab"),wn("#5a39a2"),wn("#291d43"),{fontSize:32,contain:"width",textAlign:"center",mountY:-.35,color:wn("#FFFFFF"),height:Ps,width:Ms,focus:{fontSize:40},disabled:{color:wn("#909090")}});function Os(e){return pn(ln,yn(e,{get style(){return Fs.Thumbnail}}))}function Us(e){var t=function(e,...t){if(se in e){var r=new Set(t.length>1?t.flat():t[0]),n=t.map((t=>new Proxy({get:r=>t.includes(r)?e[r]:void 0,has:r=>t.includes(r)&&r in e,keys:()=>t.filter((t=>t in e))},ot)));return n.push(new Proxy({get:t=>r.has(t)?void 0:e[t],has:t=>!r.has(t)&&t in e,keys:()=>Object.keys(e).filter((e=>!r.has(e)))},ot)),n}var o,i={},a=t.map((()=>({}))),s=T(Object.getOwnPropertyNames(e));try{for(s.s();!(o=s.n()).done;){var l,d=o.value,u=Object.getOwnPropertyDescriptor(e,d),h=!u.get&&!u.set&&u.enumerable&&u.writable&&u.configurable,c=!1,f=0,p=T(t);try{for(p.s();!(l=p.n()).done;)l.value.includes(d)&&(c=!0,h?a[f][d]=u.value:Object.defineProperty(a[f],d,u)),++f}catch(v){p.e(v)}finally{p.f()}c||(h?i[d]=u.value:Object.defineProperty(i,d,u))}}catch(v){s.e(v)}finally{s.f()}return[...a,i]}(e,["items"]),r=C(t,2),n=r[0],o=r[1];return pn(Ca,yn(o,{get style(){return Fs.Row},get children(){return pn(dt,{get each(){return n.items},children:e=>pn(Os,e)})}}))}var Ws,Ys,js="https://api.themoviedb.org/3",Hs="w185",Qs={headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIyZDE4YjEwMTA0YjdiZTlkNjFiMWYwYjVlMGEwNzM2OCIsInN1YiI6IjYwZTVjMTdlNGNhNjc2MDA3NTA4Njc3MSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.D_nqH9kd-bhhWzeVsTDPYhHnsUaNAuyAa6YATmKHqsA"}};function Ks(e,t=Hs){return Ys+t+e}function $s(e,t={}){return fetch(js+e,S(S({},Qs),t)).then((e=>e.json()))}function Xs(){return $s("/configuration").then((e=>{var t;return Ws=e,Ys=null===(t=e.images)||void 0===t?void 0:t.secure_base_url,e}))}var Gs={get:function(e,t={}){return Ws?$s(e,t):Xs().then((()=>$s(e,t)))},loadConfig:Xs};function Vs(e=[]){return e.map((e=>{return{src:Ks(e.poster_path||e.profile_path),tileSrc:Ks(e.backdrop_path||e.profile_path,"w300"),backdrop:Ks(e.backdrop_path,"w1280"),href:`/entity/${e.media_type||"people"}/${e.id}`,shortTitle:(t=e.title||e.name,r=30,t.length>r?t.substring(0,r-3)+"...":t),title:e.title||e.name,data:e,entityInfo:{type:e.media_type||"people",id:e.id},heroContent:{title:e.title||e.name,description:e.overview}};var t,r}))}var Zs=new Map,qs=new Map;function Js(e){var t=C(Se([]),2),r=t[0],n=t[1],o=C(Se(1),2),i=o[0],a=o[1],s=C(Se(!1),2),l=s[0],d=s[1],u=C(ke(i,e),1)[0];return Ae((()=>{var e=u();e&&He((()=>{0===e.length&&d(!0),n((t=>[...t,...e]))}),!1)})),{pages:r,page:i,setPage:a,setPages:n,end:l,setEnd:d}}var el=900,tl=S(S({},qo.typography.display2),{},{fontFamily:"Ubuntu",fontWeight:700,maxLines:1,width:el,contain:"width"}),rl=e=>pn(sn,yn(e,{style:tl})),nl=S(S({},qo.typography.body1),{},{fontFamily:"Ubuntu",fontWeight:400,lineHeight:32,width:el,maxLines:3,contain:"width"}),ol={fontSize:16,lineHeight:20},il=e=>pn(sn,yn(e,{style:nl,get children(){return e.children}})),al=e=>{return t=vn("node"),bn(mo,t,(()=>[8,13,11,13])),mn(t,yn(e,{style:{color:"0x00000099",borderRadius:8,border:{width:2,color:"0xffffffff"}}}),!0),gn(t,pn(sn,{style:ol,get children(){return e.children}})),t;var t},sl=S(S({},qo.typography.body2),{},{fontFamily:"Ubuntu",fontWeight:400}),ll=e=>pn(ln,{style:{display:"flex",flexDirection:"row",gap:18,width:el,height:48},get children(){return[pn(ln,{y:-4,src:"./assets/stars.png",width:188,height:31}),pn(ln,{y:-4,flexItem:!1,clipping:!0,get width(){return 188*e.voteAverage/10},height:31,get children(){return pn(ln,{src:"./assets/stars-full.png",width:188,height:31})}}),pn(sn,{style:sl,get children(){return[fn((()=>e.voteCount))," reviews"]}}),pn(sn,{style:sl,get children(){return e.metaText}}),pn(dt,{get each(){return e.badges},children:e=>pn(al,{y:-5,children:e})})]}}),dl=e=>pn(ln,yn(e,{style:{display:"flex",flexDirection:"column",width:el,height:220,gap:16},get children(){return[pn(rl,{get children(){return e.title}}),pn(il,{get children(){return e.description}}),pn(ut,{get when(){return e.voteCount},get children(){return pn(ll,{get metaText(){return e.metaText},get badges(){return e.badges},get voteCount(){return e.voteCount},get voteAverage(){return e.voteAverage}})}})]}}));function ul(e){return e.split("-")[0]}function hl({type:e,id:t}){return Gs.get(`/${e}/${t}/recommendations`).then((({results:t})=>t.length?Vs(t.slice(0,7)):Gs.get(`/trending/${e}/week?page=1`).then((({results:e})=>Vs(e.slice(0,7))))))}function cl({type:e,id:t}){return Gs.get(`/${e}/${t}/credits`).then((({cast:e})=>Vs(e.slice(0,7))))}function fl({type:e,id:t}){var r="movie"===e?{rtCrit:86,rtFan:92}:{};return Gs.get(`/${e}/${t}`).then((t=>{return S({backgroundImage:Ks(t.backdrop_path,"w1280"),heroContent:{title:t.title||t.name,description:t.overview,badges:["HD","CC"],voteAverage:t.vote_average,voteCount:t.vote_count,metaText:"movie"===e?(i=t.runtime,a=i%60,Math.floor(i/60)+"h "+(a<10?"0":"")+a+"min   "+(n=t.release_date,o=n.split("-"),o[1]+"/"+o[2]+"/"+o[0])):`${ul(t.first_air_date)} - ${ul(t.last_air_date)}`,reviews:r}},t);var n,o,i,a}))}var pl=()=>{var e=jn(),t=C(Se(0),2),r=t[0],n=t[1],o=C(Se(),2),i=o[0];o[1];ke(i,fl);var a=C(Se({}),2),s=a[0],l=a[1],d=Wn(),u=Ie((()=>0)),h=_e((()=>{return Js((t=e.filter||"all",e=>{var r=`/trending/${t}/week?page=${e}`;if(Zs.has(r))return Zs.get(r);var n=Gs.get(r).then((e=>{var r=e.results.filter((e=>!e.adult)),n=function(e,t=7){for(var r=[],n=0,o=e.length;n<o;n+=t)r.push(e.slice(n,n+t));return r}((qs.has(t)?qs.get(t):[]).concat(Vs(r)));return n[n.length-1].length<7?qs.set(t,n.pop()):qs.delete(t),n}));return Zs.set(r,n),n}));var t})),c=Co((e=>Zo(e)),400),f=Co((e=>l(e)),200);function p(){var e;null===(e=this.children.selected)||void 0===e||e.setFocus(),n(-1*(this.y||0)+24);var t=h().pages().length;(0===t||this.parent.selected&&this.parent.selected>=t-2)&&h().setPage((e=>e+1))}function v(){var e=this.children.selected;return _(e&&e.href),d(e.href),!0}return Te(Re(ct,(e=>{e.backdrop&&c(e.backdrop),e.heroContent&&f(e.heroContent)}),{defer:!0})),pn(ut,{get when(){return h().pages().length},get children(){return[pn(dl,yn({y:360,x:162},s)),pn(ln,{clipping:!0,get style(){return Fs.itemsContainer},get children(){return pn(Qi,{plinko:!0,announce:"All Trending - Week",get y(){return r()},get style(){return Fs.Column},get children(){return pn(dt,{get each(){return h().pages()},children:(e,t)=>pn(Us,{get autofocus(){return u(t())},items:e,width:1620,onFocus:p,onEnter:v})})}})}})]}})},vl=()=>{var e=Wn(),t=Ie((()=>0));function r(){var t=this.children.selected;_(t&&t.id),e("/"+t.id)}var n=[{title:"Flex Row",id:"flex",description:"Flex Row Implementation"},{title:"Flex Column",id:"flexcolumn",description:"Flex Column Implementation"},{title:"Flex Row Vertical Align",id:"flexsize",description:"Flex Row Vertical Align Implementation"},{title:"Flex Column Vertical Align",id:"flexcolumnsize",description:"Flex Column Vertical Align Implementation"},{title:"Buttons",id:"buttons",description:"Demo a few buttons"},{title:"Text",id:"text",description:"Text layout with flexbox"},{title:"Create Elements",id:"create",description:"Testing Show + children + inserting text"},{title:"Viewport",id:"viewport",description:"Events going in and out of viewport"}];function o(e){var t=C(Se(4294967295),2),r=t[0],n=t[1];return pn(ln,yn(e,{onFocus:()=>n(255),onBlur:()=>n(4294967295),style:{width:370,height:320,borderRadius:6,scale:1,color:405488895,transition:{color:!0,scale:!0},focus:{scale:1.1,color:4294967295}},get children(){return pn(ln,{x:30,get children(){return[pn(sn,{y:30,fontSize:84,get color(){return r()},get children(){return e.index}}),pn(sn,{y:140,fontSize:42,width:340,height:42,contain:"both",get color(){return r()},get children(){return e.title}}),pn(sn,{y:200,fontSize:28,width:330,contain:"width",get color(){return r()},get children(){return e.description}})]}})}}))}var i=C(Se(140),2),a=i[0],s=i[1];function l(e){s(-400*e.selected+140)}return pn(ln,{colorTop:1147903743,colorBottom:743406847,get children(){return[pn(ln,{x:120,get children(){return[pn(ln,{src:"/assets/solidjs.png",width:101,height:90,y:40}),pn(sn,{fontSize:90,x:110,y:40,children:"Examples"}),pn(ln,{y:140,height:1,width:1800,color:3906468351})]}}),pn(Ca,{onSelectedChanged:l,onEnter:r,transition:{x:{delay:20,duration:300}},get x(){return a()},y:300,width:4400,get style(){return Fs.Row},justifyContent:"flexStart",gap:40,get children(){return pn(dt,{each:n,children:(e,r)=>pn(o,yn({get autofocus(){return t(r())},get index(){return r()}},e))})}})]}})},gl=()=>{var e={width:900,height:500,y:350,x:150,gap:25,display:"flex",flexDirection:"column",justifyContent:"flexStart",color:wn("00000000")},t={width:900,height:36,gap:6,display:"flex",flexDirection:"row",justifyContent:"flexStart",color:wn("00000000")},r={fontSize:42},n={width:e.width,fontSize:26,contain:"width"},o={fontSize:26};return Ee((()=>{Zo("#000000")})),pn(ln,{autofocus:!0,style:e,get children(){return[pn(sn,{style:r,children:"Title of the Page"}),pn(sn,{style:n,children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer vel tempor tellus. Sed eu leo purus. Vestibulum sollicitudin eget tellus a varius. Phasellus est turpis, volutpat sed blandit sit amet, rutrum sit amet mauris. In dignissim elit orci, a sollicitudin ipsum faucibus et. Quisque vel quam rutrum, faucibus augue sed, scelerisque nunc."}),pn(ln,{style:t,get children(){return[pn(sn,{style:o,children:"Subline Text"}),pn(ln,{width:28,height:28,src:"/assets/rt-popcorn.png"}),pn(sn,{style:o,children:"More Text"})]}})]}})},ml=()=>{var e,t,r={width:900,height:500,y:50,x:150,gap:25,display:"flex",flexDirection:"column",justifyContent:"flexStart",color:wn("00000000")},n={width:900,height:36,gap:6,display:"flex",flexDirection:"row",justifyContent:"flexStart",color:wn("00000000")},o={fontSize:42},i={fontSize:26};Ee((()=>{Zo("#000000"),e.animate({x:100},{duration:2e3}).start()}));var a=C(Se(),2),s=a[0],l=a[1],d=C(Se(),2),u=d[0];d[1];setTimeout((()=>{var e;l("- Inserted -"),null===(e=t.getChildById("child1"))||void 0===e||e.animate({x:600},{duration:2e3}).start()}),2e3);var h={width:400,height:300,color:wn("#0000ff")},c={color:wn("#f54242"),focus:{color:wn("#4287f5")}};function f(e){var t=De((()=>e.children));return pn(ln,yn(e,{get style(){return[c,e.style,[h]]},get children(){return[pn(ln,{id:"child1",width:100,height:100,get color(){return wn("#ff0000")},y:25,get children(){return[fn((()=>t())),pn(ln,{id:"subChild",x:150,width:100,height:100,get color(){return wn("#00ff00")}}),pn(sn,{get children(){return e.title}})]}}),pn(ln,{width:100,height:100,get color(){return wn("#ffff00")},y:175,get children(){return t()}})]}}))}var p={borderLeft:{width:8,color:95598118},borderTop:{width:8,color:631422246},borderRight:{width:8,color:95598118},borderBottom:{width:8,color:3316790822}},v={color:wn("#cccccc"),focus:{color:wn("#000000")}},g={color:wn("#ffffff"),focus:{color:wn("#f6f6cc")}};return pn(ln,{style:r,get children(){return[pn(sn,{style:o,children:"Title of the Page"}),pn(ln,{style:n,get children(){return[pn(sn,{get children(){return u()}}),pn(sn,{style:i,get children(){return["Sub ",fn((()=>s()))," Text"]}}),pn(ut,{get when(){return s()},get children(){return pn(ln,{width:28,height:28,src:"/assets/rt-popcorn.png"})}}),pn(sn,{style:i,children:"More Text"})]}}),pn(f,{autofocus:!0,ref(e){"function"==typeof t?t(e):t=e},style:[g,v],get children(){return pn(sn,{children:"Child Test"})}}),pn(ln,{ref(t){"function"==typeof e?e(t):e=t},style:p,width:100,height:100,get color(){return wn("#00ff00")},x:900,y:400,get alpha(){return e.states.has("focus")?1:.2}})]}})},xl=()=>{var e,t,r=C(Se([]),2),n=r[0],o=r[1],i={width:100,height:100,x:-400,y:-400,rotation:0,borderRadius:50,color:wn("#4287f5"),transition:{x:{duration:1250,easing:"linear"},y:{duration:1250,easing:"linear"},rotation:{duration:1400,easing:"ease-in-out"}}},a={fontSize:32,x:960,y:540,mount:.5,lineheight:52},s=(e,t)=>Math.floor(Math.random()*(t-e+1)+e);function l(e,t){o((t=>[...t,e].slice(-4))),console.log(e)}return Ee((()=>{Zo("#000000"),e.x=910,e.y=490,t=setInterval((()=>{e.rotation=s(-90,90),e.x=s(-300,2220),e.y=s(-300,1380)}),2500)})),Ne((()=>{clearInterval(t)})),pn(ln,{get children(){return[pn(sn,{style:a,get children(){return n().join("\n")}}),pn(ln,{autofocus:!0,style:i,ref(t){"function"==typeof e?e(t):e=t},onEvents:[["inBounds",e=>l("inBounds")],["outOfBounds",e=>l("outOfBounds")],["inViewport",e=>l("inViewport")],["outOfViewport",e=>l("outOfViewport")]]})]}})},yl=()=>{function e(e,t){this.states.toggle("disabled")}var t={display:"flex",justifyContent:"flexStart",width:1500,height:300,color:wn("00000000"),gap:26,y:400};function r(e){return pn(ln,yn(e,{forwardStates:!0,get style(){return zs.container},get children(){return pn(sn,{get style(){return zs.text},get children(){return e.children}})}}))}var n=e=>{return t=vn("node"),bn(mo,t,(()=>[10,15])),mn(t,yn(e,{get style(){return{color:wn("#000000be"),borderRadius:8,border:{width:2,color:wn("#ffffff")}}}}),!0),gn(t,pn(sn,{style:{fontSize:20},get children(){return e.children}})),t;var t};return[pn(Ca,{x:100,y:200,gap:5,style:t,get children(){return[pn(n,{children:"HD"}),pn(n,{children:"PG13"}),pn(n,{children:"NC17"}),pn(sn,{fontSize:30,children:"I like bananas"}),pn(n,{children:"DOLBY"})]}}),pn(Ca,{x:100,gap:40,style:t,get children(){return[pn(r,{autofocus:!0,onEnter:e,children:"TV Shows"}),pn(r,{states:{active:!0,disabled:!1},children:"Movies"}),pn(r,{states:"active",children:"Sports"}),pn(r,{states:"disabled",children:"News"})]}})]},bl=()=>{var e={display:"flex",justifyContent:"flexStart",width:1600,height:110,color:wn("#4dabf5")},t={fontSize:44,marginTop:25,marginBottom:-20,skipFocus:!0};function r(e){return pn(ln,yn(e,{style:{width:200,height:100,y:5,color:392801023}}))}var n=C(Se(50),2),o=n[0],i=n[1];function a(){var e;null===(e=this.children.selected)||void 0===e||e.setFocus(),i(150+-1*(this.y||0))}Ee((()=>{Zo("#333333")}));var s=50;return pn(Qi,{x:160,get y(){return o()},gap:30,height:850,get width(){return e.width},get style(){return Fs.Column},get children(){return[pn(sn,{style:t,children:"Flex Start"}),pn(Ca,{gap:s,style:e,onFocus:a,get children(){return[pn(r,{autofocus:!0}),pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{})]}}),pn(sn,{style:t,children:"Flex Start - Margin Left"}),pn(Ca,{gap:s,style:e,onFocus:a,get children(){return[pn(r,{marginLeft:100}),pn(r,{}),pn(r,{marginLeft:100}),pn(r,{}),pn(r,{})]}}),pn(sn,{style:t,children:"Flex End"}),pn(Ca,{gap:s,justifyContent:"flexEnd",style:e,onFocus:a,get children(){return[pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{})]}}),pn(sn,{style:t,children:"Flex End - Margin Right"}),pn(Ca,{gap:s,justifyContent:"flexEnd",style:e,onFocus:a,get children(){return[pn(r,{}),pn(r,{marginRight:100}),pn(r,{}),pn(r,{}),pn(r,{marginRight:100})]}}),pn(sn,{style:t,children:"Center - No Margin Support"}),pn(Ca,{gap:s,justifyContent:"center",style:e,onFocus:a,get children(){return[pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{})]}}),pn(sn,{style:t,children:"Space Between - No Margin Support"}),pn(Ca,{gap:s,justifyContent:"spaceBetween",style:e,onFocus:a,get children(){return[pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{})]}}),pn(sn,{style:t,children:"Space Evenly - No Margin Support"}),pn(Ca,{gap:s,justifyContent:"spaceEvenly",style:e,onFocus:a,get children(){return[pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{})]}})]}})},wl=()=>{var e={display:"flex",justifyContent:"flexStart",width:1600,height:110,color:wn("#4dabf5")},t={fontSize:44,marginTop:25,marginBottom:-20,skipFocus:!0};function r(e){return pn(ln,yn(e,{style:{width:200,height:100,y:5,color:392801023}}))}function n(){return Math.floor(91*Math.random())+10}var o=C(Se(50),2),i=o[0],a=o[1];function s(){var e;null===(e=this.children.selected)||void 0===e||e.setFocus(),a(150+-1*(this.y||0))}Ee((()=>{Zo("#333333")}));var l=50;return pn(Qi,{x:160,get y(){return i()},gap:30,height:850,get width(){return e.width},get style(){return Fs.Column},get children(){return[pn(sn,{style:t,children:"Flex Start - AlignItems: center"}),pn(Ca,{alignItems:"center",gap:l,style:e,onFocus:s,get children(){return[pn(r,{autofocus:!0,get height(){return n()}}),pn(r,{get height(){return n()}}),pn(r,{get height(){return n()}}),pn(r,{get height(){return n()}}),pn(r,{get height(){return n()}})]}}),pn(sn,{style:t,children:"Flex Start - Margin Left - AlignItems: flexStart"}),pn(Ca,{gap:l,alignItems:"flexStart",style:e,onFocus:s,get children(){return[pn(r,{marginLeft:100,get height(){return n()}}),pn(r,{get height(){return n()}}),pn(r,{marginLeft:100,get height(){return n()}}),pn(r,{get height(){return n()}}),pn(r,{get height(){return n()}})]}}),pn(sn,{style:t,children:"Flex End - AlignItems: flexEnd"}),pn(Ca,{gap:l,justifyContent:"flexEnd",alignItems:"flexEnd",style:e,onFocus:s,get children(){return[pn(r,{get height(){return n()}}),pn(r,{get height(){return n()}}),pn(r,{get height(){return n()}}),pn(r,{get height(){return n()}}),pn(r,{get height(){return n()}})]}}),pn(sn,{style:t,children:"Flex End - Margin Right"}),pn(Ca,{gap:l,justifyContent:"flexEnd",style:e,onFocus:s,get children(){return[pn(r,{get height(){return n()}}),pn(r,{marginRight:100,get height(){return n()}}),pn(r,{get height(){return n()}}),pn(r,{get height(){return n()}}),pn(r,{marginRight:100,get height(){return n()}})]}}),pn(sn,{style:t,children:"Center - No Margin Support"}),pn(Ca,{gap:l,justifyContent:"center",style:e,onFocus:s,get children(){return[pn(r,{get height(){return n()}}),pn(r,{get height(){return n()}}),pn(r,{get height(){return n()}}),pn(r,{get height(){return n()}}),pn(r,{get height(){return n()}})]}}),pn(sn,{style:t,children:"Space Between - No Margin Support"}),pn(Ca,{gap:l,justifyContent:"spaceBetween",style:e,onFocus:s,get children(){return[pn(r,{get height(){return n()}}),pn(r,{get height(){return n()}}),pn(r,{get height(){return n()}}),pn(r,{get height(){return n()}}),pn(r,{get height(){return n()}})]}}),pn(sn,{style:t,children:"Space Evenly - No Margin Support"}),pn(Ca,{gap:l,justifyContent:"spaceEvenly",style:e,onFocus:s,get children(){return[pn(r,{get height(){return n()}}),pn(r,{get height(){return n()}}),pn(r,{get height(){return n()}}),pn(r,{get height(){return n()}}),pn(r,{get height(){return n()}})]}})]}})},Sl=()=>{var e={display:"flex",justifyContent:"spaceEvenly",width:1920,y:100,height:880,color:wn("00000000")},t={display:"flex",flexDirection:"column",justifyContent:"flexStart",color:wn("#4dabf5"),height:850,width:80};function r(e){var t={width:Math.floor(61*Math.random())+10,height:80,x:5,color:wn("#1769aa")};return pn(ln,yn(e,{style:t}))}var n=C(Se(50),2),o=(n[0],n[1]);function i(){var e;null===(e=this.children.selected)||void 0===e||e.setFocus(),o(150+-1*(this.y||0))}Ee((()=>{Zo("#333333")}));var a=50;return[pn(sn,{style:{fontSize:44,y:20,x:150},children:"Start, MarginTop, End, MarginBottom, Center, Between, Evenly"}),pn(Ca,{gap:a,style:e,onFocus:i,get children(){return[pn(Qi,{gap:30,style:t,alignItems:"center",get children(){return[pn(r,{autofocus:!0}),pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{})]}}),pn(Qi,{gap:a,style:t,onFocus:i,alignItems:"flexStart",get children(){return[pn(r,{marginTop:100}),pn(r,{}),pn(r,{marginTop:100}),pn(r,{}),pn(r,{})]}}),pn(Qi,{gap:a,alignItems:"flexEnd",justifyContent:"flexEnd",style:t,onFocus:i,get children(){return[pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{})]}}),pn(Qi,{gap:a,justifyContent:"flexEnd",style:t,onFocus:i,get children(){return[pn(r,{}),pn(r,{marginBottom:100}),pn(r,{}),pn(r,{}),pn(r,{marginBottom:100})]}}),pn(Qi,{gap:a,justifyContent:"center",style:t,onFocus:i,get children(){return[pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{})]}}),pn(Qi,{gap:a,justifyContent:"spaceBetween",style:t,onFocus:i,get children(){return[pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{})]}}),pn(Qi,{gap:a,justifyContent:"spaceEvenly",style:t,onFocus:i,get children(){return[pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{})]}})]}})]},Al=()=>{var e={display:"flex",justifyContent:"spaceEvenly",width:1920,y:100,height:880,color:wn("00000000")},t={display:"flex",flexDirection:"column",justifyContent:"flexStart",color:wn("#4dabf5"),height:850,width:60};function r(e){var t={width:50,height:80,x:5,color:wn("#1769aa")};return pn(ln,yn(e,{style:t}))}var n=C(Se(50),2),o=(n[0],n[1]);function i(){var e;null===(e=this.children.selected)||void 0===e||e.setFocus(),o(150+-1*(this.y||0))}Ee((()=>{Zo("#333333")}));var a=50;return[pn(sn,{style:{fontSize:44,y:20,x:150},children:"Start, MarginTop, End, MarginBottom, Center, Between, Evenly"}),pn(Ca,{gap:a,style:e,onFocus:i,get children(){return[pn(Qi,{gap:30,style:t,get children(){return[pn(r,{autofocus:!0}),pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{})]}}),pn(Qi,{gap:a,style:t,onFocus:i,get children(){return[pn(r,{marginTop:100}),pn(r,{}),pn(r,{marginTop:100}),pn(r,{}),pn(r,{})]}}),pn(Qi,{gap:a,justifyContent:"flexEnd",style:t,onFocus:i,get children(){return[pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{})]}}),pn(Qi,{gap:a,justifyContent:"flexEnd",style:t,onFocus:i,get children(){return[pn(r,{}),pn(r,{marginBottom:100}),pn(r,{}),pn(r,{}),pn(r,{marginBottom:100})]}}),pn(Qi,{gap:a,justifyContent:"center",style:t,onFocus:i,get children(){return[pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{})]}}),pn(Qi,{gap:a,justifyContent:"spaceBetween",style:t,onFocus:i,get children(){return[pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{})]}}),pn(Qi,{gap:a,justifyContent:"spaceEvenly",style:t,onFocus:i,get children(){return[pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{}),pn(r,{})]}})]}})]},Cl=()=>{function e(e,t){this.states.toggle("disabled")}var t={display:"flex",justifyContent:"flexStart",width:1500,height:300,color:wn("00000000"),gap:26,y:400,x:100},r={width:386,height:136,color:"0x715cabff",focus:{color:"0x5a39a2ff"},disabled:{color:"0x291d43ff"}},n=["RoundedRectangle",{radius:65}];function o(e){return pn(ln,yn(e,{forwardStates:!0,style:r,shader:n,get children(){return pn(sn,{style:Ds,get children(){return e.children}})}}))}return pn(Ca,{style:t,get children(){return[pn(o,{autofocus:!0,onEnter:e,children:"Focused"}),pn(o,{states:{active:!0,disabled:!1},children:"Normal"}),pn(o,{states:"disabled",children:"Disabled"})]}})},Tl="https://storage.googleapis.com/shaka-demo-assets/angel-one/dash.mpd";function _l(){return(_l=b(x().mark((function e(){var t,r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("video"),r=new shaka.Player,e.next=4,r.attach(t);case 4:return window.player=r,r.addEventListener("error",kl),e.prev=6,e.next=9,r.load(Tl);case 9:console.log("The video has now been loaded!"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),Il(e.t0);case 15:case"end":return e.stop()}}),e,null,[[6,12]])})))).apply(this,arguments)}function kl(e){Il(e.detail)}function Il(e){console.error("Error code",e.code,"object",e)}document.addEventListener("DOMContentLoaded",(function(){shaka.polyfill.installAll(),shaka.Player.isBrowserSupported()?function(){_l.apply(this,arguments)}():console.error("Browser not supported!")}));var Bl=()=>{var e=jn(),t=Wn(),r=C(ke((()=>S({},e)),fl),1)[0],n=C(ke((()=>S({},e)),cl),1)[0],o=C(ke((()=>S({},e)),hl),1)[0],i=C(Se(0),2),a=i[0],s=i[1];Te(Re(r,(e=>{Zo(e.backgroundImage)}),{defer:!0}));var l,d,u,h=640,c={color:wn("#000000"),alpha:0,width:1900,height:890,x:-160,y:h,borderRadius:30};function f(){var e;null===(e=this.children.selected)||void 0===e||e.setFocus(),l.y=h,d.y=h,d.alpha=0}function p(){var e;null===(e=this.children.selected)||void 0===e||e.setFocus(),l.y=200,d.y=160,d.alpha=.9}function v(){var e=this.children.selected;_(e&&e.href),t(e.href)}function g(){var e;(e=document.getElementById("video")).hidden=!0,e.pause(),document.getElementsByTagName("canvas")[0].focus(),u.setFocus(),s(0)}function m(){var e=function(){var e=document.getElementById("video");return e.hidden=!1,setTimeout((()=>e.play()),50),e.focus(),e}();ft(e),s(.9)}return pn(ut,{get when(){return r()},keyed:!0,get children(){return[pn(ln,{x:170,onUp:()=>u.setFocus(),onEscape:g,get children(){return[pn(dl,yn({y:260},(()=>r().heroContent))),pn(Ca,{ref(e){"function"==typeof u?u(e):u=e},y:500,scroll:"none",height:90,width:640,gap:40,onDown:()=>l.setFocus(),onEnter:m,get children(){return[pn(Bi,{width:300,autofocus:!0,children:"Play"}),pn(Bi,{width:300,children:"Resume"})]}}),pn(Qi,{ref(e){"function"==typeof l?l(e):l=e},x:0,y:h,get style(){return Fs.Column},zIndex:5,get children(){return pn(ut,{get when(){return fn((()=>!!o()))()&&n()},get children(){return[pn(sn,{skipFocus:!0,get style(){return Fs.RowTitle},children:"Recommendations"}),pn(Us,{onFocus:f,onEnter:v,get items(){return o()},width:1620}),pn(sn,{skipFocus:!0,get style(){return Fs.RowTitle},children:"Cast and Crew"}),pn(Us,{onFocus:p,onEnter:v,get items(){return n()},width:1620})]}})}}),pn(ln,{ref(e){"function"==typeof d?d(e):d=e},style:c,transition:{alpha:!0,y:!0}})]}}),pn(ln,{get alpha(){return a()},get color(){return wn("#000000")},zIndex:200,transition:{alpha:!0}})]}})};function Rl({id:e}){return Gs.get(`/person/${e}/combined_credits`).then((({cast:e})=>Vs(e.slice(0,7))))}function El({id:e}){return Gs.get(`/person/${e}`).then((e=>S({backgroundImage:Ks(e.profile_path,"original"),heroContent:{title:e.title||e.name,description:e.biography}},e)))}var Nl=()=>{var e=jn(),t=Wn(),r=C(ke((()=>S({},e)),El),1)[0],n=C(ke((()=>S({},e)),Rl),1)[0],o={color:wn("#000000"),alpha:.8,width:800,height:440,x:130,y:180,borderRadius:30};function i(){var e=this.children.selected;_(e&&e.href),t(e.href)}return Ee((()=>{Zo("#333333")})),pn(ut,{get when(){return r()},keyed:!0,get children(){return[pn(ln,{get src(){return r().backgroundImage},width:400,autosize:!0,y:0,x:1800,mountX:1}),pn(ln,{x:150,y:200,width:800,gap:24,get style(){return Fs.Column},zIndex:3,get children(){return[pn(sn,{contain:"width",fontFamily:"Ubuntu",get style(){return qo.typography.display2},get children(){return r().name}}),pn(sn,{contain:"both",get style(){return Fs.peopleBio},get children(){return r().biography}})]}}),pn(ln,{style:o}),pn(Qi,{y:670,x:140,get style(){return Fs.Column},scroll:"none",get children(){return pn(ut,{get when(){return n()},get children(){return[pn(sn,{skipFocus:!0,get style(){return Fs.RowTitle},children:"Credits"}),pn(Us,{autofocus:!0,onEnter:i,get items(){return n()}})]}})}})]}})},Fl=()=>{return e=vn("node"),xn(e,"style",{width:1920,height:1080,color:868483072}),e;var e},Ll=new URL("AppCoreExtensions-legacy-BirIog6e.js",w.meta.url).href;Hr.debug=!1,Hr.animationsEnabled=!0,Hr.fontSettings.fontFamily="Ubuntu",Hr.fontSettings.color=wn("#f6f6f6"),Hr.fontSettings.fontSize=32,Hr.rendererOptions={coreExtensionModule:Ll,fpsUpdateInterval:200,enableInspector:!0},cn((()=>pn(io,{root:e=>pn(Ns,e),get children(){return[pn(eo,{path:"",component:pl}),pn(eo,{path:"examples",component:vl}),pn(eo,{path:"browse/:filter",component:pl}),pn(eo,{path:"text",component:gl}),pn(eo,{path:"buttons",component:yl}),pn(eo,{path:"flex",component:bl}),pn(eo,{path:"create",component:ml}),pn(eo,{path:"viewport",component:xl}),pn(eo,{path:"flexsize",component:wl}),pn(eo,{path:"flexcolumnsize",component:Sl}),pn(eo,{path:"flexcolumn",component:Al}),pn(eo,{path:"buttonsmaterial",component:Cl}),pn(eo,{path:"entity/people/:id",component:Nl}),pn(eo,{path:"entity/:type/:id",component:Bl}),pn(eo,{path:"*all",component:Fl})]}})))}}}))}();
//# sourceMappingURL=index-legacy-Cnk4Iq3O.js.map
