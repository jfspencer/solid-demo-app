!function(){function e(t){var n="function"==typeof Map?new Map:void 0;return e=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return function(e,t,n){if(s())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var o=new(e.bind.apply(e,r));return n&&d(o,n.prototype),o}(e,arguments,l(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),d(t,e)},e(t)}function t(){return t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},t.apply(this,arguments)}function n(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */n=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new B(r||[]);return i(a,"_invoke",{value:E(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f="suspendedStart",p="suspendedYield",v="executing",g="completed",y={};function m(){}function x(){}function b(){}var w={};c(w,s,(function(){return this}));var A=Object.getPrototypeOf,S=A&&A(A(N([])));S&&S!==r&&o.call(S,s)&&(w=S);var T=b.prototype=m.prototype=Object.create(w);function k(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(r,i,a,s){var l=h(e[r],e,i);if("throw"!==l.type){var u=l.arg,c=u.value;return c&&"object"==typeof c&&o.call(c,"__await")?t.resolve(c.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(c).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var r;i(this,"_invoke",{value:function(e,o){function i(){return new t((function(t,r){n(e,o,t,r)}))}return r=r?r.then(i,i):i()}})}function E(t,n,r){var o=f;return function(i,a){if(o===v)throw new Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var l=C(s,r);if(l){if(l===y)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var u=h(t,n,r);if("normal"===u.type){if(o=r.done?g:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=g,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=h(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function B(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function n(){for(;++r<t.length;)if(o.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(typeof t+" is not iterable")}return x.prototype=b,i(T,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:x,configurable:!0}),x.displayName=c(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,u,"GeneratorFunction")),e.prototype=Object.create(T),e},t.awrap=function(e){return{__await:e}},k(_.prototype),c(_.prototype,l,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new _(d(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(T),c(T,u,"Generator"),c(T,s,(function(){return this})),c(T,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,B.prototype={constructor:B,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,o){return s.type="throw",s.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(l&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;I(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function r(e,t,n,r,o,i,a){try{var s=e[i](a),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,i){var a=e.apply(t,n);function s(e){r(a,o,i,s,l,"next",e)}function l(e){r(a,o,i,s,l,"throw",e)}s(void 0)}))}}function i(e,t,n){return t=l(t),a(e,s()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function a(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,x(r.key),r)}}function f(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return(t=x(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,s=[],l=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return s}}(e,t)||A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=A(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function A(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}System.register(["./CoreExtension-legacy-BFR7w_7i.js"],(function(r,s){"use strict";var d,h,g,x;return{setters:[function(e){d=e.E,h=e.S,g=e.W,x=e.C}],execute:function(){var r,A=document.createElement("style");A.textContent="html,body,*{padding:0;margin:0}video{position:absolute;top:0;left:0;z-index:2;outline:none}.center-element{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}\n",document.head.appendChild(A);var S,T=function(e,t){return e===t},k=Symbol("solid-proxy"),_=Symbol("solid-track"),E={equals:T},C=ue,R=1,I=2,B={owned:null,cleanups:null,context:null,owner:null},N={},M=null,L=null,F=null,P=null,D=null,U=0;function O(e,t){var n=F,r=M,o=0===e.length,i=void 0===t?r:t,a=o?B:{owned:null,cleanups:null,context:i?i.context:null,owner:i},s=o?e:function(){return e((function(){return Q((function(){return fe(a)}))}))};M=a,F=null;try{return le(s,!0)}finally{F=n,M=r}}function z(e,t){var n={value:e,observers:null,observerSlots:null,comparator:(t=t?Object.assign({},E,t):E).equals||void 0};return[re.bind(n),function(e){return"function"==typeof e&&(e=e(n.value)),oe(n,e)}]}function W(e,t,n){ie(ae(e,t,!0,R))}function X(e,t,n){ie(ae(e,t,!1,R))}function Y(e,t,n){C=ce;var r=ae(e,t,!1,R);n&&n.render||(r.user=!0),D?D.push(r):ie(r)}function G(e,t,n){n=n?Object.assign({},E,n):E;var r=ae(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,ie(r),re.bind(r)}function j(e,t,n){var r,o,i;2===arguments.length&&"object"==typeof t||1===arguments.length?(r=!0,o=e,i=t||{}):(r=e,o=t,i=n||{});var a=null,s=N,l=!1,u="initialValue"in i,c="function"==typeof r&&G(r),d=new Set,h=b((i.storage||z)(i.initialValue),2),f=h[0],p=h[1],v=b(z(void 0),2),g=v[0],y=v[1],m=b(z(void 0,{equals:!1}),2),x=m[0],A=m[1],T=b(z(u?"ready":"unresolved"),2),k=T[0],_=T[1];function E(e,t,n,r){return a===e&&(a=null,void 0!==r&&(u=!0),e!==s&&t!==s||!i.onHydrated||queueMicrotask((function(){return i.onHydrated(r,{value:t})})),s=N,function(e,t){le((function(){void 0===t&&p((function(){return e})),_(void 0!==t?"errored":u?"ready":"unresolved"),y(t);var n,r=w(d.keys());try{for(r.s();!(n=r.n()).done;){n.value.decrement()}}catch(t){r.e(t)}finally{r.f()}d.clear()}),!1)}(t,n)),t}function C(){var e=S,t=f(),n=g();if(void 0!==n&&!a)throw n;return F&&!F.user&&e&&W((function(){x(),a&&(e.resolved||d.has(e)||(e.increment(),d.add(e)))})),t}function R(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!1===e||!l){l=!1;var t=c?c():r;if(null!=t&&!1!==t){var n,i=s!==N?s:Q((function(){return o(t,{value:f(),refetching:e})}));return(n=i)&&"object"==typeof n&&"then"in n?(a=i,"value"in i?("success"===i.status?E(a,i.value,void 0,t):E(a,void 0,void 0,t),i):(l=!0,queueMicrotask((function(){return l=!1})),le((function(){_(u?"refreshing":"pending"),A()}),!1),i.then((function(e){return E(i,e,void 0,t)}),(function(e){return E(i,void 0,pe(e),t)})))):(E(a,i,void 0,t),i)}E(a,Q(f))}}return Object.defineProperties(C,{state:{get:function(){return k()}},error:{get:function(){return g()}},loading:{get:function(){var e=k();return"pending"===e||"refreshing"===e}},latest:{get:function(){if(!u)return C();var e=g();if(e&&!a)throw e;return f()}}}),c?W((function(){return R(!1)})):R(!1),[C,{refetch:R,mutate:p}]}function H(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T,n=new Map,r=ae((function(r){var o,i=e(),a=w(n.entries());try{for(a.s();!(o=a.n()).done;){var s=b(o.value,2),l=s[0],u=s[1];if(t(l,i)!==t(l,r)){var c,d=w(u.values());try{for(d.s();!(c=d.n()).done;){var h=c.value;h.state=R,h.pure?P.push(h):D.push(h)}}catch(f){d.e(f)}finally{d.f()}}}}catch(f){a.e(f)}finally{a.f()}return i}),void 0,!0,R);return ie(r),function(e){var o,i=F;i&&((o=n.get(e))?o.add(i):n.set(e,o=new Set([i])),Z((function(){o.delete(i),!o.size&&n.delete(e)})));return t(e,r.value)}}function Q(e){if(null===F)return e();var t=F;F=null;try{return e()}finally{F=t}}function K(e,t,n){var r,o=Array.isArray(e),i=n&&n.defer;return function(n){var a;if(o){a=Array(e.length);for(var s=0;s<e.length;s++)a[s]=e[s]()}else a=e();if(!i){var l=Q((function(){return t(a,r,n)}));return r=a,l}i=!1}}function V(e){Y((function(){return Q(e)}))}function Z(e){return null===M||(null===M.cleanups?M.cleanups=[e]:M.cleanups.push(e)),e}function q(){return M}function J(e,t){var n=M,r=F;M=e,F=null;try{return le(t,!0)}catch(o){ve(o)}finally{M=n,F=r}}function $(e){var t=F,n=M;return Promise.resolve().then((function(){F=t,M=n,le(e,!1),F=M=null}))}function ee(e,t){var n=Symbol("context");return{id:n,Provider:ye(n),defaultValue:e}}function te(e){return M&&M.context&&void 0!==M.context[e.id]?M.context[e.id]:e.defaultValue}function ne(e){var t=G(e),n=G((function(){return ge(t())}));return n.toArray=function(){var e=n();return Array.isArray(e)?e:null!=e?[e]:[]},n}function re(){var e=this;if(this.sources&&this.state)if(this.state===R)ie(this);else{var t=P;P=null,le((function(){return de(e)}),!1),P=t}if(F){var n=this.observers?this.observers.length:0;F.sources?(F.sources.push(this),F.sourceSlots.push(n)):(F.sources=[this],F.sourceSlots=[n]),this.observers?(this.observers.push(F),this.observerSlots.push(F.sources.length-1)):(this.observers=[F],this.observerSlots=[F.sources.length-1])}return this.value}function oe(e,t,n){var r=e.value;return e.comparator&&e.comparator(r,t)||(e.value=t,e.observers&&e.observers.length&&le((function(){for(var t=0;t<e.observers.length;t+=1){var n=e.observers[t],r=L&&L.running;r&&L.disposed.has(n),(r?n.tState:n.state)||(n.pure?P.push(n):D.push(n),n.observers&&he(n)),r||(n.state=R)}if(P.length>1e6)throw P=[],new Error}),!1)),t}function ie(e){if(e.fn){fe(e);var t=U;!function(e,t,n){var r,o=M,i=F;F=M=e;try{r=e.fn(t)}catch(a){return e.pure&&(e.state=R,e.owned&&e.owned.forEach(fe),e.owned=null),e.updatedAt=n+1,ve(a)}finally{F=i,M=o}(!e.updatedAt||e.updatedAt<=n)&&(null!=e.updatedAt&&"observers"in e?oe(e,r):e.value=r,e.updatedAt=n)}(e,e.value,t)}}function ae(e,t,n){var r={fn:e,state:arguments.length>3&&void 0!==arguments[3]?arguments[3]:R,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:M,context:M?M.context:null,pure:n};return null===M||M!==B&&(M.owned?M.owned.push(r):M.owned=[r]),r}function se(e){if(0!==e.state){if(e.state===I)return de(e);if(e.suspense&&Q(e.suspense.inFallback))return e.suspense.effects.push(e);for(var t=[e];(e=e.owner)&&(!e.updatedAt||e.updatedAt<U);)e.state&&t.push(e);for(var n=t.length-1;n>=0;n--)if((e=t[n]).state===R)ie(e);else if(e.state===I){var r=P;P=null,le((function(){return de(e,t[0])}),!1),P=r}}}function le(e,t){if(P)return e();var n=!1;t||(P=[]),D?n=!0:D=[],U++;try{var r=e();return function(e){P&&(ue(P),P=null);if(e)return;var t=D;D=null,t.length&&le((function(){return C(t)}),!1)}(n),r}catch(o){n||(D=null),P=null,ve(o)}}function ue(e){for(var t=0;t<e.length;t++)se(e[t])}function ce(e){var t,n=0;for(t=0;t<e.length;t++){var r=e[t];r.user?e[n++]=r:se(r)}for(t=0;t<n;t++)se(e[t])}function de(e,t){e.state=0;for(var n=0;n<e.sources.length;n+=1){var r=e.sources[n];if(r.sources){var o=r.state;o===R?r!==t&&(!r.updatedAt||r.updatedAt<U)&&se(r):o===I&&de(r,t)}}}function he(e){for(var t=0;t<e.observers.length;t+=1){var n=e.observers[t];n.state||(n.state=I,n.pure?P.push(n):D.push(n),n.observers&&he(n))}}function fe(e){var t;if(e.sources)for(;e.sources.length;){var n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){var i=o.pop(),a=n.observerSlots.pop();r<o.length&&(i.sourceSlots[a]=r,o[r]=i,n.observerSlots[r]=a)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)fe(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function pe(e){return e instanceof Error?e:new Error("string"==typeof e?e:"Unknown error",{cause:e})}function ve(e){throw pe(e)}function ge(e){if("function"==typeof e&&!e.length)return ge(e());if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++){var r=ge(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function ye(e,t){return function(t){var n;return X((function(){return n=Q((function(){return M.context=y(y({},M.context),{},m({},e,t.value)),ne((function(){return t.children}))}))}),void 0),n}}var me=Symbol("fallback");function xe(e){for(var t=0;t<e.length;t++)e[t]()}function be(e,t){return Q((function(){return e(t||{})}))}function we(){return!0}var Ae={get:function(e,t,n){return t===k?n:e.get(t)},has:function(e,t){return t===k||e.has(t)},set:we,deleteProperty:we,getOwnPropertyDescriptor:function(e,t){return{configurable:!0,enumerable:!0,get:function(){return e.get(t)},set:we,deleteProperty:we}},ownKeys:function(e){return e.keys()}};function Se(e){return(e="function"==typeof e?e():e)?e:{}}function Te(){for(var e=0,t=this.length;e<t;++e){var n=this[e]();if(void 0!==n)return n}}function ke(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=!1,o=0;o<t.length;o++){var i=t[o];r=r||!!i&&k in i,t[o]="function"==typeof i?(r=!0,G(i)):i}if(r)return new Proxy({get:function(e){for(var n=t.length-1;n>=0;n--){var r=Se(t[n])[e];if(void 0!==r)return r}},has:function(e){for(var n=t.length-1;n>=0;n--)if(e in Se(t[n]))return!0;return!1},keys:function(){for(var e=[],n=0;n<t.length;n++)e.push.apply(e,v(Object.keys(Se(t[n]))));return v(new Set(e))}},Ae);for(var a={},s=Object.create(null),l=t.length-1;l>=0;l--){var u=t[l];if(u)for(var c=Object.getOwnPropertyNames(u),d=function(){var e=c[h];if("__proto__"===e||"constructor"===e)return 1;var t=Object.getOwnPropertyDescriptor(u,e);if(s[e]){var n=a[e];n&&(t.get?n.push(t.get.bind(u)):void 0!==t.value&&n.push((function(){return t.value})))}else s[e]=t.get?{enumerable:!0,configurable:!0,get:Te.bind(a[e]=[t.get.bind(u)])}:void 0!==t.value?t:void 0},h=c.length-1;h>=0;h--)d()}for(var f={},p=Object.keys(s),g=p.length-1;g>=0;g--){var y=p[g],m=s[y];m&&m.get?Object.defineProperty(f,y,m):f[y]=m?m.value:void 0}return f}var _e=function(e){return"Stale read from <".concat(e,">.")};function Ee(e){var t="fallback"in e&&{fallback:function(){return e.fallback}};return G(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[],o=[],i=[],a=0,s=t.length>1?[]:null;return Z((function(){return xe(i)})),function(){var l,u,c=e()||[];return c[_],Q((function(){var e,t,h,f,p,v,g,y,m,x=c.length;if(0===x)0!==a&&(xe(i),i=[],r=[],o=[],a=0,s&&(s=[])),n.fallback&&(r=[me],o[0]=O((function(e){return i[0]=e,n.fallback()})),a=1);else if(0===a){for(o=new Array(x),u=0;u<x;u++)r[u]=c[u],o[u]=O(d);a=x}else{for(h=new Array(x),f=new Array(x),s&&(p=new Array(x)),v=0,g=Math.min(a,x);v<g&&r[v]===c[v];v++);for(g=a-1,y=x-1;g>=v&&y>=v&&r[g]===c[y];g--,y--)h[y]=o[g],f[y]=i[g],s&&(p[y]=s[g]);for(e=new Map,t=new Array(y+1),u=y;u>=v;u--)m=c[u],l=e.get(m),t[u]=void 0===l?-1:l,e.set(m,u);for(l=v;l<=g;l++)m=r[l],void 0!==(u=e.get(m))&&-1!==u?(h[u]=o[l],f[u]=i[l],s&&(p[u]=s[l]),u=t[u],e.set(m,u)):i[l]();for(u=v;u<x;u++)u in h?(o[u]=h[u],i[u]=f[u],s&&(s[u]=p[u],s[u](u))):o[u]=O(d);o=o.slice(0,a=x),r=c.slice(0)}return o}));function d(e){if(i[u]=e,s){var n=b(z(u),2),r=n[0],o=n[1];return s[u]=o,t(c[u],r)}return t(c[u])}}}((function(){return e.each}),e.children,t||void 0))}function Ce(e){var t=e.keyed,n=G((function(){return e.when}),void 0,{equals:function(e,n){return t?e===n:!e==!n}});return G((function(){var r=n();if(r){var o=e.children;return"function"==typeof o&&o.length>0?Q((function(){return o(t?r:function(){if(!Q(n))throw _e("Show");return e.when})})):o}return e.fallback}),void 0,void 0)}var Re=b(z(void 0),2),Ie=Re[0],Be=Re[1];function Ne(e,t,n){var r=Math.trunc(e>>>24),o=Math.trunc(e>>>16&255),i=Math.trunc(e>>>8&255),a=Math.trunc(255&e),s=Math.trunc(t>>>24),l=Math.trunc(t>>>16&255),u=Math.trunc(t>>>8&255),c=Math.trunc(255&t);return(Math.round(s*n+r*(1-n))<<24|Math.round(l*n+o*(1-n))<<16|Math.round(u*n+i*(1-n))<<8|Math.round(c*n+a*(1-n)))>>>0}function Me(e,t){return(e>>>24<<24|(e>>>16&255)<<16|(e>>>8&255)<<8|Math.trunc((255&e)*t))>>>0}function Le(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(255&e)/255*t,o=Math.trunc((e>>>24)*r),i=Math.trunc((e>>>16&255)*r),a=Math.trunc((e>>>8&255)*r),s=Math.trunc(255*r);return n?(s<<24|a<<16|i<<8|o)>>>0:(o<<24|i<<16|a<<8|s)>>>0}function Fe(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Pe=f((function e(t){p(this,e),m(this,"releaseCallback",void 0),this.releaseCallback=t})),De=function(e){function t(e,n){var r,o,a;return p(this,t),m(u(a=i(this,t,[e])),"textureMap",new Map),m(u(a),"zeroReferenceTextureSet",new Set),m(u(a),"options",void 0),a.options={textureCleanupIntervalMs:null!==(r=n.textureCleanupIntervalMs)&&void 0!==r?r:1e4,textureCleanupAgeThreadholdMs:null!==(o=n.textureCleanupAgeThreadholdMs)&&void 0!==o?o:6e4},setInterval((function(){var e,t=Date.now(),n=a.options.textureCleanupAgeThreadholdMs,r=w(a.zeroReferenceTextureSet);try{for(r.s();!(e=r.n()).done;){var o=e.value;t-o.lastUpdate>n&&(a.releaseCallback(o.id),a.textureMap.delete(o.id),a.zeroReferenceTextureSet.delete(o))}}catch(i){r.e(i)}finally{r.f()}}),a.options.textureCleanupIntervalMs),a}return c(t,e),f(t,[{key:"registerTexture",value:function(e){var t,n=null===(t=e.options)||void 0===t?void 0:t.id;if(!this.textureMap.has(n)){var r={id:n,nodeRefCount:0,lastUpdate:Date.now()};this.textureMap.set(n,r),this.zeroReferenceTextureSet.add(r)}}},{key:"incrementTextureRefCount",value:function(e){var t,n=null===(t=e.options)||void 0===t?void 0:t.id,r=this.textureMap.get(n);r||(this.registerTexture(e),r=this.textureMap.get(n)),"SubTexture"===e.txType&&this.incrementTextureRefCount(e.props.texture),r.nodeRefCount++,r.lastUpdate=Date.now(),this.zeroReferenceTextureSet.has(r)&&this.zeroReferenceTextureSet.delete(r)}},{key:"decrementTextureRefCount",value:function(e){var t,n=null===(t=e.options)||void 0===t?void 0:t.id,r=this.textureMap.get(n);r.nodeRefCount--,r.lastUpdate=Date.now(),0===r.nodeRefCount&&this.zeroReferenceTextureSet.add(r),"SubTexture"===e.txType&&this.decrementTextureRefCount(e.props.texture)}}]),t}(Pe),Ue=function(e){function t(e){var n;return p(this,t),m(u(n=i(this,t,[e])),"registry",void 0),n.registry=new FinalizationRegistry(e),n}return c(t,e),f(t,[{key:"registerTexture",value:function(e){var t,n;null===(t=e.options)||void 0===t||t.id,this.registry.register(e,null===(n=e.options)||void 0===n?void 0:n.id)}},{key:"incrementTextureRefCount",value:function(){}},{key:"decrementTextureRefCount",value:function(){}}]),t}(Pe),Oe=function(e){function t(e,n,r){var o,a,s,l,c;p(this,t),m(u(c=i(this,t)),"root",null),m(u(c),"driver",void 0),m(u(c),"canvas",void 0),m(u(c),"settings",void 0),m(u(c),"inspector",null),m(u(c),"nodes",new Map),m(u(c),"nextTextureId",1),m(u(c),"textureTracker",void 0);var d={appWidth:e.appWidth||1920,appHeight:e.appHeight||1080,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:null!==(o=e.clearColor)&&void 0!==o?o:0,coreExtensionModule:e.coreExtensionModule||null,experimental_FinalizationRegistryTextureUsageTracker:null!==(a=e.experimental_FinalizationRegistryTextureUsageTracker)&&void 0!==a&&a,textureCleanupOptions:e.textureCleanupOptions||{},fpsUpdateInterval:e.fpsUpdateInterval||0,numImageWorkers:void 0!==e.numImageWorkers?e.numImageWorkers:2,enableContextSpy:null!==(s=e.enableContextSpy)&&void 0!==s&&s,enableInspector:null!==(l=e.enableInspector)&&void 0!==l&&l};c.settings=d;var h=d.appWidth,f=d.appHeight,v=d.deviceLogicalPixelRatio,g=d.devicePhysicalPixelRatio,y=function(e){c.driver.releaseTexture(e)},x=d.experimental_FinalizationRegistryTextureUsageTracker&&"function"==typeof FinalizationRegistry;c.textureTracker=x?new Ue(y):new De(y,c.settings.textureCleanupOptions);var b=h*v,w=f*v;c.driver=r;var A,S=document.createElement("canvas");if(c.canvas=S,S.width=b*g,S.height=w*g,S.style.width="".concat(b,"px"),S.style.height="".concat(w,"px"),!(A="string"==typeof n?document.getElementById(n):n))throw new Error("Could not find target element");return r.onCreateNode=function(e){c.nodes.set(e.id,e)},r.onBeforeDestroyNode=function(e){c.nodes.delete(e.id)},r.onFpsUpdate=function(e){c.emit("fpsUpdate",e)},r.onFrameTick=function(e){c.emit("frameTick",e)},A.appendChild(S),c}var r;return c(t,e),f(t,[{key:"init",value:(r=o(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.driver.init(this,this.settings,this.canvas);case 2:this.root=this.driver.getRootNode();case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"createNode",value:function(e){return this.inspector?this.inspector.createNode(this.driver,this.resolveNodeDefaults(e)):this.driver.createNode(this.resolveNodeDefaults(e))}},{key:"createTextNode",value:function(e){var t,n,r,o,i,a,s,l,u,c,d,h,f,p,v,g,m,x,b,w=null!==(t=e.fontSize)&&void 0!==t?t:16,A=y(y({},this.resolveNodeDefaults(e)),{},{text:null!==(n=e.text)&&void 0!==n?n:"",textRendererOverride:null!==(r=e.textRendererOverride)&&void 0!==r?r:null,fontSize:w,fontFamily:null!==(o=e.fontFamily)&&void 0!==o?o:"sans-serif",fontStyle:null!==(i=e.fontStyle)&&void 0!==i?i:"normal",fontWeight:null!==(a=e.fontWeight)&&void 0!==a?a:"normal",fontStretch:null!==(s=e.fontStretch)&&void 0!==s?s:"normal",textAlign:null!==(l=e.textAlign)&&void 0!==l?l:"left",contain:null!==(u=e.contain)&&void 0!==u?u:"none",scrollable:null!==(c=e.scrollable)&&void 0!==c&&c,scrollY:null!==(d=e.scrollY)&&void 0!==d?d:0,offsetY:null!==(h=e.offsetY)&&void 0!==h?h:0,letterSpacing:null!==(f=e.letterSpacing)&&void 0!==f?f:0,lineHeight:null!==(p=e.lineHeight)&&void 0!==p?p:w,maxLines:null!==(v=e.maxLines)&&void 0!==v?v:0,textBaseline:null!==(g=e.textBaseline)&&void 0!==g?g:"alphabetic",verticalAlign:null!==(m=e.verticalAlign)&&void 0!==m?m:"top",overflowSuffix:null!==(x=e.overflowSuffix)&&void 0!==x?x:"...",debug:null!==(b=e.debug)&&void 0!==b?b:{}});return this.inspector?this.inspector.createTextNode(this.driver,A):this.driver.createTextNode(A)}},{key:"resolveNodeDefaults",value:function(e){var t,n,r,o,i,a,s,l,u,c,d,h,f,p,v,g,y,m,x,b,w,A,S,T,k,_,E,C,R,I,B,N,M,L,F,P,D,U,O,z,W,X,Y,G,j,H=null!==(t=e.color)&&void 0!==t?t:4294967295,Q=null!==(n=null!==(r=null!==(o=e.colorTl)&&void 0!==o?o:e.colorTop)&&void 0!==r?r:e.colorLeft)&&void 0!==n?n:H,K=null!==(i=null!==(a=null!==(s=e.colorTr)&&void 0!==s?s:e.colorTop)&&void 0!==a?a:e.colorRight)&&void 0!==i?i:H,V=null!==(l=null!==(u=null!==(c=e.colorBl)&&void 0!==c?c:e.colorBottom)&&void 0!==u?u:e.colorLeft)&&void 0!==l?l:H,Z=null!==(d=null!==(h=null!==(f=e.colorBr)&&void 0!==f?f:e.colorBottom)&&void 0!==h?h:e.colorRight)&&void 0!==d?d:H;return{x:null!==(p=e.x)&&void 0!==p?p:0,y:null!==(v=e.y)&&void 0!==v?v:0,width:null!==(g=e.width)&&void 0!==g?g:0,height:null!==(y=e.height)&&void 0!==y?y:0,alpha:null!==(m=e.alpha)&&void 0!==m?m:1,clipping:null!==(x=e.clipping)&&void 0!==x&&x,color:H,colorTop:null!==(b=e.colorTop)&&void 0!==b?b:H,colorBottom:null!==(w=e.colorBottom)&&void 0!==w?w:H,colorLeft:null!==(A=e.colorLeft)&&void 0!==A?A:H,colorRight:null!==(S=e.colorRight)&&void 0!==S?S:H,colorBl:V,colorBr:Z,colorTl:Q,colorTr:K,zIndex:null!==(T=e.zIndex)&&void 0!==T?T:0,zIndexLocked:null!==(k=e.zIndexLocked)&&void 0!==k?k:0,parent:null!==(_=e.parent)&&void 0!==_?_:null,texture:null!==(E=e.texture)&&void 0!==E?E:null,shader:null!==(C=e.shader)&&void 0!==C?C:null,src:null!==(R=e.src)&&void 0!==R?R:"",scale:null!==(I=e.scale)&&void 0!==I?I:null,scaleX:null!==(B=null!==(N=e.scaleX)&&void 0!==N?N:e.scale)&&void 0!==B?B:1,scaleY:null!==(M=null!==(L=e.scaleY)&&void 0!==L?L:e.scale)&&void 0!==M?M:1,mount:null!==(F=e.mount)&&void 0!==F?F:0,mountX:null!==(P=null!==(D=e.mountX)&&void 0!==D?D:e.mount)&&void 0!==P?P:0,mountY:null!==(U=null!==(O=e.mountY)&&void 0!==O?O:e.mount)&&void 0!==U?U:0,pivot:null!==(z=e.pivot)&&void 0!==z?z:.5,pivotX:null!==(W=null!==(X=e.pivotX)&&void 0!==X?X:e.pivot)&&void 0!==W?W:.5,pivotY:null!==(Y=null!==(G=e.pivotY)&&void 0!==G?G:e.pivot)&&void 0!==Y?Y:.5,rotation:null!==(j=e.rotation)&&void 0!==j?j:0}}},{key:"destroyNode",value:function(e){return this.inspector&&this.inspector.destroyNode(e),this.driver.destroyNode(e)}},{key:"createTexture",value:function(e,t,n){var r=this.nextTextureId++,o={descType:"texture",txType:e,props:t,options:y(y({},n),{},{id:r})};return this.textureTracker.registerTexture(o),o}},{key:"createShader",value:function(e,t){return{descType:"shader",shType:e,props:t}}},{key:"getNodeById",value:function(e){return this.nodes.get(e)||null}},{key:"toggleFreeze",value:function(){throw new Error("Not implemented")}},{key:"advanceFrame",value:function(){throw new Error("Not implemented")}},{key:"rerender",value:function(){throw new Error("Not implemented")}}]),t}(d);function ze(e,t){var n,r,o=0;function i(){var i,a,s=n,l=arguments.length;e:for(;s;){if(s.args.length===arguments.length){for(a=0;a<l;a++)if(s.args[a]!==arguments[a]){s=s.next;continue e}return s!==n&&(s===r&&(r=s.prev),s.prev.next=s.next,s.next&&(s.next.prev=s.prev),s.next=n,s.prev=null,n.prev=s,n=s),s.val}s=s.next}for(i=new Array(l),a=0;a<l;a++)i[a]=arguments[a];return s={args:i,val:e.apply(null,i)},n?(n.prev=s,s.next=n):r=s,o===t.maxSize?(r=r.prev).next=null:o++,n=s,s.val}return t=t||{},i.clear=function(){n=null,r=null,o=0},i}var We=function(e){return e&&!(e&e-1)},Xe=function(e,t,n,r){var o=3*e,i=3*(n-e)-o,a=1-o-i,s=3*t,l=3*(r-t)-s,u=1-s-l;return function(e){if(e>=1)return 1;if(e<=0)return 0;for(var t,n,r=.5,c=0;c<20;c++){if((n=e-r*(r*(r*a+i)+o))>-1e-8&&n<1e-8)return r*(r*(r*u+l)+s);if((t=r*(r*(3*a)+2*i)+o)>1e-10&&t<1e-10)break;r+=n/t}for(var d=0,h=1,f=0;f<20;f++){if((n=e-(r=.5*(d+h))*(r*(r*a+i)+o))>-1e-8&&n<1e-8)return r*(r*(r*u+l)+s);n<0?h=r:d=r}}},Ye=ze((function(e){switch(e){case"linear":return function(e){return e};case"ease":return Xe(.25,.1,.25,1);case"ease-in":return Xe(.42,0,1,1);case"ease-out":return Xe(0,0,.58,1);case"ease-in-out":return Xe(.42,0,.58,1);case"ease-in-sine":case"ease-out-sine":return Xe(.12,0,.39,0);case"ease-in-out-sine":return Xe(.37,0,.63,1);case"ease-in-cubic":return Xe(.32,0,.67,0);case"ease-out-cubic":return Xe(.33,1,.68,1);case"ease-in-out-cubic":return Xe(.65,0,.35,1);case"ease-in-circ":return Xe(.55,0,1,.45);case"ease-out-circ":return Xe(0,.55,.45,1);case"ease-in-out-circ":return Xe(.85,0,.15,1);case"ease-in-back":return Xe(.36,0,.66,-.56);case"ease-out-back":return Xe(.34,1.56,.64,1);case"ease-in-out-back":return Xe(.68,-.6,.32,1.6);case"step-start":return function(){return 1};case"step-end":return function(e){return 1===e?1:0};default:var t="cubic-bezier(";if(e&&0===e.indexOf(t)){var n=e.substr(13,e.length-13-1).split(",");if(4!==n.length)return console.warn("Unknown timing function: "+e),function(e){return e};var r=parseFloat(n[0]||"0.42"),o=parseFloat(n[1]||"0"),i=parseFloat(n[2]||"1"),a=parseFloat(n[3]||"1");return isNaN(r)||isNaN(o)||isNaN(i)||isNaN(a)?(console.warn(" Unknown timing function: "+e),function(e){return e}):Xe(r,o,i,a)}return console.warn("Unknown timing function: "+e),function(e){return e}}}));Math.hypot||(Math.hypot=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=0,o=t.length;o--;)r+=t[o]*t[o];return Math.sqrt(r)});var Ge=function(e){function t(e,n,r){var o;return p(this,t),m(u(o=i(this,t)),"node",void 0),m(u(o),"props",void 0),m(u(o),"settings",void 0),m(u(o),"propStartValues",{}),m(u(o),"restoreValues",{}),m(u(o),"progress",0),m(u(o),"delayFor",0),m(u(o),"timingFunction",void 0),m(u(o),"propsList",void 0),o.node=e,o.props=n,o.settings=r,o.propStartValues={},o.propsList=Object.keys(n),o.propsList.forEach((function(t){o.propStartValues[t]=e[t]})),o.timingFunction=function(e){return e},r.easing&&"string"==typeof r.easing&&(o.timingFunction=Ye(r.easing)),o.delayFor=r.delay||0,o}return c(t,e),f(t,[{key:"reset",value:function(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}},{key:"restore",value:function(){var e=this;this.reset(),Object.keys(this.props).forEach((function(t){e.node[t]=e.propStartValues[t]}))}},{key:"reverse",value:function(){var e=this;this.progress=0,Object.keys(this.props).forEach((function(t){var n=e.props[t],r=e.propStartValues[t];e.props[t]=r,e.propStartValues[t]=n})),this.settings.loop||(this.settings.stopMethod=!1)}},{key:"applyEasing",value:function(e,t,n){return(this.timingFunction(e)||e)*(n-t)+t}},{key:"update",value:function(e){var t=this.settings,n=t.duration,r=t.loop,o=t.easing,i=t.stopMethod;if(n)if(this.delayFor>0)this.delayFor-=e;else if(this.delayFor<=0&&0===this.progress&&this.emit("start",{}),this.progress+=e/n,this.progress>1&&(this.progress=r?0:1,i))this.emit("finished",{});else{for(var a=0;a<this.propsList.length;a++){var s=this.propsList[a],l=this.props[s],u=this.propStartValues[s],c=l;if(-1===s.indexOf("color"))this.node[s]=o?this.applyEasing(this.progress,u,c):u+(c-u)*this.progress;else{if(u===c){this.node[s]=u;continue}if(o){var d=Ne(u,c,this.timingFunction(this.progress)||this.progress);this.node[s]=d;continue}this.node[s]=Ne(u,c,this.progress)}}1===this.progress&&this.emit("finished",{})}else this.emit("finished",{})}}]),t}(d),je=function(){function e(t,n){p(this,e),m(this,"manager",void 0),m(this,"animation",void 0),m(this,"startedPromise",null),m(this,"startedResolve",null),m(this,"stoppedPromise",null),m(this,"stoppedResolve",null),m(this,"state",void 0),this.manager=t,this.animation=n,this.state="stopped"}return f(e,[{key:"start",value:function(){return this.makeStartedPromise(),this.animation.once("start",this.started.bind(this)),this.makeStoppedPromise(),this.animation.once("finished",this.finished.bind(this)),this.manager.activeAnimations.has(this.animation)||this.manager.registerAnimation(this.animation),this.state="running",this}},{key:"stop",value:function(){return this.manager.unregisterAnimation(this.animation),null!==this.stoppedResolve&&(this.stoppedResolve(),this.stoppedResolve=null),this.animation.reset(),this.state="stopped",this}},{key:"pause",value:function(){return this.manager.unregisterAnimation(this.animation),this.state="paused",this}},{key:"restore",value:function(){return this.stoppedResolve=null,this.animation.restore(),this}},{key:"waitUntilStarted",value:function(){return this.makeStartedPromise(),this.startedPromise}},{key:"waitUntilStopped",value:function(){return this.makeStoppedPromise(),this.stoppedPromise}},{key:"makeStartedPromise",value:function(){var e=this;null===this.startedResolve&&(this.startedPromise=new Promise((function(t){e.startedResolve=t})))}},{key:"makeStoppedPromise",value:function(){var e=this;null===this.stoppedResolve&&(this.stoppedPromise=new Promise((function(t){e.stoppedResolve=t})))}},{key:"started",value:function(){this.startedResolve,this.startedResolve(this),this.startedResolve=null}},{key:"finished",value:function(){this.stoppedResolve;var e=this.animation.settings,t=e.loop;if("reverse"===e.stopMethod)return this.animation.reverse(),void this.start();this.stoppedResolve(),this.stoppedResolve=null,t||this.manager.unregisterAnimation(this.animation)}}]),e}(),He=function(e){return[(e>>>24)/255,(e>>>16&255)/255,(e>>>8&255)/255,(255&e)/255]};function Qe(e){var t=Math.floor(255*e[0]),n=Math.floor(255*e[1]),r=Math.floor(255*e[2]),o=Math.floor(255*e[3]);return"rgba(".concat(t,",").concat(n,",").concat(r,",").concat(o.toFixed(4),")")}function Ke(e,t,n,r,o){return o?(o.x1=e,o.y1=t,o.x2=n,o.y2=r,o):{x1:e,y1:t,x2:n,y2:r}}function Ve(e,t){return e.x1<t.x2&&e.x2>t.x1&&e.y1<t.y2&&e.y2>t.y1}function Ze(e,t,n){var r=Math.max(e.x,t.x),o=Math.max(e.y,t.y),i=Math.min(e.x+e.width,t.x+t.width)-r,a=Math.min(e.y+e.height,t.y+t.height)-o;return i>0&&a>0?n?(n.x=r,n.y=o,n.width=i,n.height=a,n):{x:r,y:o,width:i,height:a}:n?(n.x=0,n.y=0,n.width=0,n.height=0,n):{x:0,y:0,width:0,height:0}}function qe(e,t){return t?(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t):{x:e.x,y:e.y,width:e.width,height:e.height}}var Je,$e=function(){function e(t){p(this,e),m(this,"data",void 0),t?(this.data=new Float32Array(9),this.data[0]=t[0],this.data[3]=t[3],this.data[6]=t[6],this.data[1]=t[1],this.data[4]=t[4],this.data[7]=t[7],this.data[2]=t[2],this.data[5]=t[5],this.data[8]=t[8]):this.data=new Float32Array(9)}return f(e,[{key:"translate",value:function(e,t){return this.data[6]=this.data[0]*e+this.data[3]*t+this.data[6],this.data[7]=this.data[1]*e+this.data[4]*t+this.data[7],this}},{key:"scale",value:function(e,t){return this.data[0]=this.data[0]*e,this.data[3]=this.data[3]*t,this.data[1]=this.data[1]*e,this.data[4]=this.data[4]*t,this}},{key:"rotate",value:function(e){if(0===e||!(e%Math.PI*2))return this;var t=Math.cos(e),n=Math.sin(e),r=this.data[0]*t+this.data[3]*n,o=this.data[3]*t-this.data[0]*n,i=this.data[1]*t+this.data[4]*n,a=this.data[4]*t-this.data[1]*n;return this.data[0]=r,this.data[3]=o,this.data[1]=i,this.data[4]=a,this}},{key:"multiply",value:function(t){return e.multiply(this,t,this)}},{key:"tx",get:function(){return this.data[6]}},{key:"ty",get:function(){return this.data[7]}},{key:"ta",get:function(){return this.data[0]}},{key:"tb",get:function(){return this.data[3]}},{key:"tc",get:function(){return this.data[1]}},{key:"td",get:function(){return this.data[4]}},{key:"transformPoint",value:function(e,t){return[this.data[0]*e+this.data[3]*t+this.data[6],this.data[1]*e+this.data[4]*t+this.data[1]]}}],[{key:"temp",get:function(){return et}},{key:"multiply",value:function(t,n,r){var o=t.data[0]*n.data[0]+t.data[3]*n.data[1]+t.data[6]*n.data[2],i=t.data[0]*n.data[3]+t.data[3]*n.data[4]+t.data[6]*n.data[5],a=t.data[0]*n.data[6]+t.data[3]*n.data[7]+t.data[6]*n.data[8],s=t.data[1]*n.data[0]+t.data[4]*n.data[1]+t.data[7]*n.data[2],l=t.data[1]*n.data[3]+t.data[4]*n.data[4]+t.data[7]*n.data[5],u=t.data[1]*n.data[6]+t.data[4]*n.data[7]+t.data[7]*n.data[8],c=t.data[2]*n.data[0]+t.data[5]*n.data[1]+t.data[8]*n.data[2],d=t.data[2]*n.data[3]+t.data[5]*n.data[4]+t.data[8]*n.data[5],h=t.data[2]*n.data[6]+t.data[5]*n.data[7]+t.data[8]*n.data[8];return r||(r=new e),r.data[0]=o,r.data[3]=i,r.data[6]=a,r.data[1]=s,r.data[4]=l,r.data[7]=u,r.data[2]=c,r.data[5]=d,r.data[8]=h,r}},{key:"identity",value:function(t){return t||(t=new e),t.data[0]=1,t.data[3]=0,t.data[6]=0,t.data[1]=0,t.data[4]=1,t.data[7]=0,t.data[2]=0,t.data[5]=0,t.data[8]=1,t}},{key:"translate",value:function(t,n,r){return r||(r=new e),r.data[0]=1,r.data[3]=0,r.data[6]=t,r.data[1]=0,r.data[4]=1,r.data[7]=n,r.data[2]=0,r.data[5]=0,r.data[8]=1,r}},{key:"scale",value:function(t,n,r){return r||(r=new e),r.data[0]=t,r.data[3]=0,r.data[6]=0,r.data[1]=0,r.data[4]=n,r.data[7]=0,r.data[2]=0,r.data[5]=0,r.data[8]=1,r}},{key:"rotate",value:function(t,n){var r=Math.cos(t),o=Math.sin(t);return n||(n=new e),n.data[0]=r,n.data[3]=-o,n.data[6]=0,n.data[1]=o,n.data[4]=r,n.data[7]=0,n.data[2]=0,n.data[5]=0,n.data[8]=1,n}},{key:"copy",value:function(t,n,r){return n||(n=new e),n.data[0]=t.data[0],n.data[1]=t.data[1],n.data[2]=t.data[2],n.data[3]=t.data[3],n.data[4]=t.data[4],n.data[5]=t.data[5],n.data[6]=t.data[6],n.data[7]=t.data[7],n.data[8]=t.data[8],n}}]),e}(),et=new $e;!function(e){e[e.Children=1]="Children",e[e.ScaleRotate=2]="ScaleRotate",e[e.Local=4]="Local",e[e.Global=8]="Global",e[e.Clipping=16]="Clipping",e[e.CalculatedZIndex=32]="CalculatedZIndex",e[e.ZIndexSortedChildren=64]="ZIndexSortedChildren",e[e.PremultipliedColors=128]="PremultipliedColors",e[e.WorldAlpha=256]="WorldAlpha",e[e.None=0]="None",e[e.All=511]="All"}(Je||(Je={}));var tt=function(e){function t(e,n){var r;return p(this,t),m(u(r=i(this,t)),"stage",void 0),m(u(r),"children",[]),m(u(r),"props",void 0),m(u(r),"updateType",Je.All),m(u(r),"globalTransform",void 0),m(u(r),"scaleRotateTransform",void 0),m(u(r),"localTransform",void 0),m(u(r),"clippingRect",{x:0,y:0,width:0,height:0,valid:!1}),m(u(r),"isRenderable",!1),m(u(r),"worldAlpha",1),m(u(r),"premultipliedColorTl",0),m(u(r),"premultipliedColorTr",0),m(u(r),"premultipliedColorBl",0),m(u(r),"premultipliedColorBr",0),m(u(r),"calcZIndex",0),m(u(r),"isComplex",!1),m(u(r),"onTextureLoaded",(function(e,t){r.stage.requestRender(),r.emit("loaded",{type:"texture",dimensions:t})})),m(u(r),"onTextureFailed",(function(e,t){r.emit("failed",{type:"texture",error:t})})),r.stage=e,r.props=y(y({},n),{},{parent:null}),r.parent=n.parent,r.updateScaleRotateTransform(),r}return c(t,e),f(t,[{key:"loadTexture",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.props.texture&&this.unloadTexture();var o=this.stage.txManager.loadTexture(e,t,r);this.props.texture=o,this.props.textureOptions=r,this.checkIsRenderable(),queueMicrotask((function(){"loaded"===o.state?n.onTextureLoaded(o,o.dimensions):"failed"===o.state&&n.onTextureFailed(o,o.error),o.on("loaded",n.onTextureLoaded),o.on("failed",n.onTextureFailed)}))}},{key:"unloadTexture",value:function(){this.props.texture&&(this.props.texture.off("loaded",this.onTextureLoaded),this.props.texture.off("failed",this.onTextureFailed)),this.props.texture=null,this.props.textureOptions=null,this.checkIsRenderable()}},{key:"loadShader",value:function(e,t){var n=this.stage.renderer.getShaderManager().loadShader(e,t),r=n.shader,o=n.props;this.props.shader=r,this.props.shaderProps=o,this.checkIsRenderable()}},{key:"setUpdateType",value:function(e){this.updateType|=e;var t=this.props.parent;!t||t.updateType&Je.Children||t.setUpdateType(Je.Children)}},{key:"sortChildren",value:function(){this.children.sort((function(e,t){return e.calcZIndex-t.calcZIndex}))}},{key:"updateScaleRotateTransform",value:function(){this.scaleRotateTransform=$e.rotate(this.props.rotation,this.scaleRotateTransform).scale(this.props.scaleX,this.props.scaleY)}},{key:"updateLocalTransform",value:function(){this.scaleRotateTransform;var e=this.props.pivotX*this.props.width,t=this.props.pivotY*this.props.height,n=this.props.mountX*this.props.width,r=this.props.mountY*this.props.height;this.localTransform=$e.translate(e-n+this.props.x,t-r+this.props.y,this.localTransform).multiply(this.scaleRotateTransform).translate(-e,-t),this.setUpdateType(Je.Global)}},{key:"update",value:function(e,t){var n=this;this.updateType&Je.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(Je.Local)),this.updateType&Je.Local&&(this.updateLocalTransform(),this.setUpdateType(Je.Global));var r=this.props.parent,o=Je.None;this.updateType&Je.Global&&(this.localTransform,this.globalTransform=$e.copy((null==r?void 0:r.globalTransform)||this.localTransform,this.globalTransform),r&&this.globalTransform.multiply(this.localTransform),this.setUpdateType(Je.Clipping|Je.Children),o|=Je.Global),this.updateType&Je.Clipping&&(this.calculateClippingRect(t),this.checkIsRenderable(),this.setUpdateType(Je.Children),o|=Je.Clipping),this.updateType&Je.WorldAlpha&&(this.worldAlpha=r?r.worldAlpha*this.props.alpha:this.props.alpha,this.setUpdateType(Je.Children|Je.PremultipliedColors),o|=Je.WorldAlpha),this.updateType&Je.PremultipliedColors&&(this.premultipliedColorTl=Le(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=Le(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=Le(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=Le(this.props.colorBr,this.worldAlpha,!0)),this.checkIsRenderable(),this.setUpdateType(Je.Children),o|=Je.PremultipliedColors),r&&this.updateType&Je.CalculatedZIndex&&(this.calculateZIndex(),r.setUpdateType(Je.ZIndexSortedChildren)),this.updateType&Je.Children&&this.children.length&&this.children.forEach((function(t){t.setUpdateType(o),0!==t.updateType&&t.update(e,n.clippingRect)})),this.updateType&Je.ZIndexSortedChildren&&this.sortChildren(),this.updateType=0}},{key:"checkIsRenderable",value:function(){return this.props.texture||this.props.width&&this.props.height&&(this.props.shader||this.props.clipping||0!==this.props.color||0!==this.props.colorTop||0!==this.props.colorBottom||0!==this.props.colorLeft||0!==this.props.colorRight||0!==this.props.colorTl||0!==this.props.colorTr||0!==this.props.colorBl||0!==this.props.colorBr)?this.isRenderable=!0:this.isRenderable=!1}},{key:"calculateClippingRect",value:function(e){this.globalTransform;var t=this.clippingRect,n=this.props,r=this.globalTransform,o=n.clipping,i=0!==r.tb||0!==r.tc;o&&!i?(t.x=r.tx,t.y=r.ty,t.width=this.width*r.ta,t.height=this.height*r.td,t.valid=!0):t.valid=!1,e.valid&&t.valid?Ze(e,t,t):e.valid&&(qe(e,t),t.valid=!0)}},{key:"calculateZIndex",value:function(){var e,t,n=this.props,r=n.zIndex||0,o=(null===(e=n.parent)||void 0===e?void 0:e.zIndex)||0,i=r;null!==(t=n.parent)&&void 0!==t&&t.zIndexLocked&&(i=r<o?r:o),this.calcZIndex=i}},{key:"renderQuads",value:function(e){var t=this.props,n=t.width,r=t.height,o=t.texture,i=t.textureOptions,a=t.shader,s=t.shaderProps,l=this.premultipliedColorTl,u=this.premultipliedColorTr,c=this.premultipliedColorBl,d=this.premultipliedColorBr,h=this.zIndex,f=this.worldAlpha,p=this.globalTransform,v=this.clippingRect;e.addQuad({width:n,height:r,colorTl:l,colorTr:u,colorBl:c,colorBr:d,texture:o,textureOptions:i,zIndex:h,shader:a,shaderProps:s,alpha:f,clippingRect:v,tx:p.tx,ty:p.ty,ta:p.ta,tb:p.tb,tc:p.tc,td:p.td})}},{key:"id",get:function(){return this.props.id}},{key:"x",get:function(){return this.props.x},set:function(e){this.props.x!==e&&(this.props.x=e,this.setUpdateType(Je.Local))}},{key:"absX",get:function(){var e,t;return this.props.x+((null===(e=this.props.parent)||void 0===e?void 0:e.absX)||(null===(t=this.props.parent)||void 0===t||null===(t=t.globalTransform)||void 0===t?void 0:t.tx)||0)}},{key:"absY",get:function(){var e,t;return this.props.y+(null!==(e=null===(t=this.props.parent)||void 0===t?void 0:t.absY)&&void 0!==e?e:0)}},{key:"y",get:function(){return this.props.y},set:function(e){this.props.y!==e&&(this.props.y=e,this.setUpdateType(Je.Local))}},{key:"width",get:function(){return this.props.width},set:function(e){this.props.width!==e&&(this.props.width=e,this.setUpdateType(Je.Local))}},{key:"height",get:function(){return this.props.height},set:function(e){this.props.height!==e&&(this.props.height=e,this.setUpdateType(Je.Local))}},{key:"scale",get:function(){return this.scaleX},set:function(e){this.scaleX=e,this.scaleY=e}},{key:"scaleX",get:function(){return this.props.scaleX},set:function(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.setUpdateType(Je.ScaleRotate))}},{key:"scaleY",get:function(){return this.props.scaleY},set:function(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.setUpdateType(Je.ScaleRotate))}},{key:"mount",get:function(){return this.props.mount},set:function(e){this.props.mountX===e&&this.props.mountY===e||(this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.setUpdateType(Je.Local))}},{key:"mountX",get:function(){return this.props.mountX},set:function(e){this.props.mountX!==e&&(this.props.mountX=e,this.setUpdateType(Je.Local))}},{key:"mountY",get:function(){return this.props.mountY},set:function(e){this.props.mountY!==e&&(this.props.mountY=e,this.setUpdateType(Je.Local))}},{key:"pivot",get:function(){return this.props.pivot},set:function(e){this.props.pivotX===e&&this.props.pivotY===e||(this.props.pivotX=e,this.props.pivotY=e,this.props.pivot=e,this.setUpdateType(Je.Local))}},{key:"pivotX",get:function(){return this.props.pivotX},set:function(e){this.props.pivotX!==e&&(this.props.pivotX=e,this.setUpdateType(Je.Local))}},{key:"pivotY",get:function(){return this.props.pivotY},set:function(e){this.props.pivotY!==e&&(this.props.pivotY=e,this.setUpdateType(Je.Local))}},{key:"rotation",get:function(){return this.props.rotation},set:function(e){this.props.rotation!==e&&(this.props.rotation=e,this.setUpdateType(Je.ScaleRotate))}},{key:"alpha",get:function(){return this.props.alpha},set:function(e){this.props.alpha=e,this.setUpdateType(Je.PremultipliedColors|Je.WorldAlpha)}},{key:"clipping",get:function(){return this.props.clipping},set:function(e){this.props.clipping=e,this.setUpdateType(Je.Clipping)}},{key:"color",get:function(){return this.props.color},set:function(e){this.props.colorTl===e&&this.props.colorTr===e&&this.props.colorBl===e&&this.props.colorBr===e||(this.colorTl=e,this.colorTr=e,this.colorBl=e,this.colorBr=e),this.props.color=e,this.setUpdateType(Je.PremultipliedColors)}},{key:"colorTop",get:function(){return this.props.colorTop},set:function(e){this.props.colorTl===e&&this.props.colorTr===e||(this.colorTl=e,this.colorTr=e),this.props.colorTop=e,this.setUpdateType(Je.PremultipliedColors)}},{key:"colorBottom",get:function(){return this.props.colorBottom},set:function(e){this.props.colorBl===e&&this.props.colorBr===e||(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e,this.setUpdateType(Je.PremultipliedColors)}},{key:"colorLeft",get:function(){return this.props.colorLeft},set:function(e){this.props.colorTl===e&&this.props.colorBl===e||(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e,this.setUpdateType(Je.PremultipliedColors)}},{key:"colorRight",get:function(){return this.props.colorRight},set:function(e){this.props.colorTr===e&&this.props.colorBr===e||(this.colorTr=e,this.colorBr=e),this.props.colorRight=e,this.setUpdateType(Je.PremultipliedColors)}},{key:"colorTl",get:function(){return this.props.colorTl},set:function(e){this.props.colorTl=e,this.setUpdateType(Je.PremultipliedColors)}},{key:"colorTr",get:function(){return this.props.colorTr},set:function(e){this.props.colorTr=e,this.setUpdateType(Je.PremultipliedColors)}},{key:"colorBl",get:function(){return this.props.colorBl},set:function(e){this.props.colorBl=e,this.setUpdateType(Je.PremultipliedColors)}},{key:"colorBr",get:function(){return this.props.colorBr},set:function(e){this.props.colorBr=e,this.setUpdateType(Je.PremultipliedColors)}},{key:"zIndexLocked",get:function(){return this.props.zIndexLocked||0},set:function(e){this.props.zIndexLocked=e,this.setUpdateType(Je.CalculatedZIndex|Je.Children),this.children.forEach((function(e){e.setUpdateType(Je.CalculatedZIndex)}))}},{key:"zIndex",get:function(){return this.props.zIndex},set:function(e){this.props.zIndex=e,this.setUpdateType(Je.CalculatedZIndex|Je.Children),this.children.forEach((function(e){e.setUpdateType(Je.CalculatedZIndex)}))}},{key:"parent",get:function(){return this.props.parent},set:function(e){var t=this.props.parent;if(t!==e){if(this.props.parent=e,t){var n=t.children.indexOf(this);t.children.splice(n,1)}e&&(e.children.push(this),this.setUpdateType(Je.All),e.setUpdateType(Je.Children|Je.ZIndexSortedChildren)),this.updateScaleRotateTransform()}}}]),t}(d),nt=1;function rt(){return nt++}var ot=function(e){function t(e,n,r,o){var a,s;return p(this,t),m(u(s=i(this,t)),"rendererMain",void 0),m(u(s),"stage",void 0),m(u(s),"id",void 0),m(u(s),"coreNode",void 0),m(u(s),"_children",[]),m(u(s),"_src",""),m(u(s),"_parent",null),m(u(s),"_texture",null),m(u(s),"_shader",null),m(u(s),"onTextureLoaded",(function(e,t){s.emit("loaded",t)})),m(u(s),"onTextureFailed",(function(e,t){s.emit("failed",t)})),s.rendererMain=n,s.stage=r,s.id=null!==(a=null==o?void 0:o.id)&&void 0!==a?a:rt(),s.coreNode=o||new tt(s.stage,{id:s.id,x:e.x,y:e.y,width:e.width,height:e.height,alpha:e.alpha,clipping:e.clipping,color:e.color,colorTop:e.colorTop,colorBottom:e.colorBottom,colorLeft:e.colorLeft,colorRight:e.colorRight,colorTl:e.colorTl,colorTr:e.colorTr,colorBl:e.colorBl,colorBr:e.colorBr,zIndex:e.zIndex,zIndexLocked:e.zIndexLocked,scaleX:e.scaleX,scaleY:e.scaleY,mountX:e.mountX,mountY:e.mountY,mount:e.mount,pivot:e.pivot,pivotX:e.pivotX,pivotY:e.pivotY,rotation:e.rotation,parent:null,shader:null,shaderProps:null,texture:null,textureOptions:null}),s.coreNode.on("loaded",s.onTextureLoaded),s.coreNode.on("failed",s.onTextureFailed),s.parent=e.parent,s.shader=e.shader,s.texture=e.texture,s.src=e.src,s}return c(t,e),f(t,[{key:"x",get:function(){return this.coreNode.x},set:function(e){this.coreNode.x=e}},{key:"y",get:function(){return this.coreNode.y},set:function(e){this.coreNode.y=e}},{key:"width",get:function(){return this.coreNode.width},set:function(e){this.coreNode.width=e}},{key:"height",get:function(){return this.coreNode.height},set:function(e){this.coreNode.height=e}},{key:"alpha",get:function(){return this.coreNode.alpha},set:function(e){this.coreNode.alpha=e}},{key:"clipping",get:function(){return this.coreNode.clipping},set:function(e){this.coreNode.clipping=e}},{key:"color",get:function(){return this.coreNode.color},set:function(e){this.coreNode.color=e}},{key:"colorTop",get:function(){return this.coreNode.colorTop},set:function(e){this.coreNode.colorTop=e}},{key:"colorBottom",get:function(){return this.coreNode.colorBottom},set:function(e){this.coreNode.colorBottom=e}},{key:"colorLeft",get:function(){return this.coreNode.colorLeft},set:function(e){this.coreNode.colorLeft=e}},{key:"colorRight",get:function(){return this.coreNode.colorRight},set:function(e){this.coreNode.colorRight=e}},{key:"colorTl",get:function(){return this.coreNode.colorTl},set:function(e){this.coreNode.colorTl=e}},{key:"colorTr",get:function(){return this.coreNode.colorTr},set:function(e){this.coreNode.colorTr=e}},{key:"colorBl",get:function(){return this.coreNode.colorBl},set:function(e){this.coreNode.colorBl=e}},{key:"colorBr",get:function(){return this.coreNode.colorBr},set:function(e){this.coreNode.colorBr=e}},{key:"scale",get:function(){return this.scaleX!==this.scaleY?null:this.coreNode.scaleX},set:function(e){null!==e&&(this.coreNode.scaleX=e,this.coreNode.scaleY=e)}},{key:"scaleX",get:function(){return this.coreNode.scaleX},set:function(e){this.coreNode.scaleX=e}},{key:"scaleY",get:function(){return this.coreNode.scaleY},set:function(e){this.coreNode.scaleY=e}},{key:"mount",get:function(){return this.coreNode.mount},set:function(e){this.coreNode.mount=e}},{key:"mountX",get:function(){return this.coreNode.mountX},set:function(e){this.coreNode.mountX=e}},{key:"mountY",get:function(){return this.coreNode.mountY},set:function(e){this.coreNode.mountY=e}},{key:"pivot",get:function(){return this.coreNode.pivot},set:function(e){this.coreNode.pivot=e}},{key:"pivotX",get:function(){return this.coreNode.pivotX},set:function(e){this.coreNode.pivotX=e}},{key:"pivotY",get:function(){return this.coreNode.pivotY},set:function(e){this.coreNode.pivotY=e}},{key:"rotation",get:function(){return this.coreNode.rotation},set:function(e){this.coreNode.rotation=e}},{key:"parent",get:function(){return this._parent},set:function(e){var t,n=this._parent;if(this._parent=e,this.coreNode.parent=null!==(t=null==e?void 0:e.coreNode)&&void 0!==t?t:null,n){var r=n.children.indexOf(this);n.children.splice(r,1)}e&&e.children.push(this)}},{key:"children",get:function(){return this._children}},{key:"zIndex",get:function(){return this.coreNode.zIndex},set:function(e){this.coreNode.zIndex=e}},{key:"zIndexLocked",get:function(){return this.coreNode.zIndexLocked},set:function(e){this.coreNode.zIndexLocked=e}},{key:"src",get:function(){return this._src},set:function(e){this._src!==e&&(this._src=e,this.texture=e?this.rendererMain.createTexture("ImageTexture",{src:e}):null)}},{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture&&this.rendererMain.textureTracker.decrementTextureRefCount(this._texture),e&&this.rendererMain.textureTracker.incrementTextureRefCount(e),this._texture=e,e?this.coreNode.loadTexture(e.txType,e.props,e.options):this.coreNode.unloadTexture())}},{key:"shader",get:function(){return this._shader},set:function(e){this._shader!==e&&(this._shader=e,e&&this.coreNode.loadShader(e.shType,e.props))}},{key:"destroy",value:function(){this.emit("beforeDestroy",{}),this.parent=null,this.texture=null,this.emit("afterDestroy",{}),this.removeAllListeners()}},{key:"flush",value:function(){}},{key:"animate",value:function(e,t){var n=new Ge(this.coreNode,e,t);return new je(this.stage.animationManager,n)}}]),t}(d),it=f((function e(t){p(this,e),m(this,"textureSource",void 0),this.textureSource=t})),at=f((function e(t){p(this,e),m(this,"stage",void 0),this.stage=t})),st=f((function e(){p(this,e)}));function lt(e,t,n){var r=e.createShader(t);if(!r)throw new Error;if(e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))return r;console.log(e.getShaderInfoLog(r)),e.deleteShader(r)}var ut=function(e){function t(e){var n;p(this,t),m(u(n=i(this,t)),"boundBufferCollection",null),m(u(n),"buffersBound",!1),m(u(n),"program",void 0),m(u(n),"vao",void 0),m(u(n),"renderer",void 0),m(u(n),"glw",void 0),m(u(n),"attributeBuffers",void 0),m(u(n),"attributeLocations",void 0),m(u(n),"attributeNames",void 0),m(u(n),"uniformLocations",void 0),m(u(n),"uniformTypes",void 0),m(u(n),"supportsIndexedTextures",void 0);var r=n.renderer=e.renderer,o=n.glw=n.renderer.glw;n.supportsIndexedTextures=e.supportsIndexedTextures||!1;var a=o.isWebGl2(),s=a&&e.webgl2Extensions||!a&&e.webgl1Extensions||[],l=a?"2.0":"1.0";s.forEach((function(e){if(!o.getExtension(e))throw new Error('Shader "'.concat(n.constructor.name,'" requires extension "').concat(e,'" for WebGL ').concat(l," but wasn't found"))}));var c=e.shaderSources||n.constructor.shaderSources;if(!c)throw new Error('Shader "'.concat(n.constructor.name,'" is missing shaderSources.'));a&&null!=c&&c.webGl2&&(c.fragment=c.webGl2.fragment,c.vertex=c.webGl2.vertex,delete c.webGl2);var d=r.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,h=c.vertex instanceof Function?c.vertex(d):c.vertex,f=c.fragment instanceof Function?c.fragment(d):c.fragment,g=lt(o,o.VERTEX_SHADER,h),y=lt(o,o.FRAGMENT_SHADER,f);if(!g||!y)throw new Error;var x=function(e,t,n){var r=e.createProgram();if(!r)throw new Error;if(e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS))return r;console.log(e.getProgramInfoLog(r)),e.deleteProgram(r)}(o,g,y);if(!x)throw new Error;if(n.program=x,a){var b=o.createVertexArray();if(!b)throw new Error;n.vao=b,o.bindVertexArray(n.vao)}return n.attributeLocations={},n.attributeBuffers={},n.attributeNames=[],v(e.attributes).forEach((function(e){var t=o.getAttribLocation(n.program,e);if(t<0)throw new Error("".concat(n.constructor.name,': Vertex shader must have an attribute "').concat(e,'"!'));var r=o.createBuffer();if(!r)throw new Error("".concat(n.constructor.name,': Could not create buffer for attribute "').concat(e,'"'));n.attributeLocations[e]=t,n.attributeBuffers[e]=r,n.attributeNames.push(e)})),n.uniformLocations={},n.uniformTypes={},e.uniforms.forEach((function(e){var t=o.getUniformLocation(n.program,e.name);n.uniformTypes[e.name]=e.uniform,t?n.uniformLocations[e.name]=t:console.warn('Shader "'.concat(n.constructor.name,'" could not get uniform location for "').concat(e.name,'"'))})),n}return c(t,e),f(t,[{key:"bindBufferAttribute",value:function(e,t,n){var r=this.glw;r.enableVertexAttribArray(e),r.vertexAttribPointer(t,e,n.size,n.type,n.normalized,n.stride,n.offset)}},{key:"disableAttribute",value:function(e){this.glw.disableVertexAttribArray(e)}},{key:"disableAttributes",value:function(){for(var e in this.attributeLocations)this.disableAttribute(this.attributeLocations[e]);this.boundBufferCollection=null}},{key:"canBatchShaderProps",value:function(e,t){return!1}},{key:"bindRenderOp",value:function(e,t){this.bindBufferCollection(e.buffers),e.textures.length>0&&this.bindTextures(e.textures);var n=e.glw;if(this.setUniform("u_resolution",[n.canvas.width,n.canvas.height]),this.setUniform("u_pixelRatio",e.options.pixelRatio),t){if(Fe(t,"$dimensions")){var r=t.$dimensions;r||(r=e.dimensions),this.setUniform("u_dimensions",[r.width,r.height])}if(Fe(t,"$alpha")){var o=t.$alpha;o||(o=e.alpha),this.setUniform("u_alpha",o)}this.bindProps(t)}}},{key:"setUniform",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=this.glw).setUniform.apply(t,[this.uniformTypes[e],this.uniformLocations[e]].concat(r))}},{key:"bindBufferCollection",value:function(e){if(this.boundBufferCollection!==e){for(var t in this.attributeLocations){var n=e.getBuffer(t),r=e.getAttributeInfo(t);this.bindBufferAttribute(this.attributeLocations[t],n,r)}this.boundBufferCollection=e}}},{key:"bindProps",value:function(e){}},{key:"bindTextures",value:function(e){}},{key:"attach",value:function(){this.glw.useProgram(this.program),this.glw.useProgram(this.program),this.glw.isWebGl2()&&this.vao&&this.glw.bindVertexArray(this.vao)}},{key:"detach",value:function(){this.disableAttributes()}}]),t}(function(){function e(){p(this,e)}return f(e,null,[{key:"makeCacheKey",value:function(e){return!1}},{key:"resolveDefaults",value:function(e){return{}}}]),e}());m(ut,"shaderSources",void 0);var ct=function(e){function t(e,n,r,o,a,s,l,c,d,h){var f;return p(this,t),m(u(f=i(this,t)),"glw",void 0),m(u(f),"options",void 0),m(u(f),"buffers",void 0),m(u(f),"shader",void 0),m(u(f),"shaderProps",void 0),m(u(f),"alpha",void 0),m(u(f),"clippingRect",void 0),m(u(f),"dimensions",void 0),m(u(f),"bufferIdx",void 0),m(u(f),"zIndex",void 0),m(u(f),"length",0),m(u(f),"numQuads",0),m(u(f),"textures",[]),m(u(f),"maxTextures",void 0),f.glw=e,f.options=n,f.buffers=r,f.shader=o,f.shaderProps=a,f.alpha=s,f.clippingRect=l,f.dimensions=c,f.bufferIdx=d,f.zIndex=h,f.maxTextures=o.supportsIndexedTextures?e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS):1,f}return c(t,e),f(t,[{key:"addTexture",value:function(e){var t=this.textures,n=this.maxTextures,r=t.findIndex((function(t){return t===e}));if(-1!==r)return r;var o=t.length;return o>=n?4294967295:(this.textures.push(e),o)}},{key:"draw",value:function(){var e=this.glw,t=this.shader,n=this.shaderProps,r=this.options;r.shManager.useShader(t),t.bindRenderOp(this,n);var o=this.bufferIdx/24*6*2;if(this.clippingRect.valid){var i=this.clippingRect,a=i.x,s=i.y,l=i.width,u=i.height,c=r.pixelRatio,d=r.canvas.height,h=Math.round(a*c),f=Math.round(l*c),p=Math.round(u*c),v=Math.round(d-p-s*c);e.setScissorTest(!0),e.scissor(h,v,f,p)}else e.setScissorTest(!1);e.drawElements(e.TRIANGLES,6*this.numQuads,e.UNSIGNED_SHORT,o)}}]),t}(st);function dt(e){var t={MAX_RENDERBUFFER_SIZE:0,MAX_TEXTURE_SIZE:0,MAX_VIEWPORT_DIMS:0,MAX_VERTEX_TEXTURE_IMAGE_UNITS:0,MAX_TEXTURE_IMAGE_UNITS:0,MAX_COMBINED_TEXTURE_IMAGE_UNITS:0,MAX_VERTEX_ATTRIBS:0,MAX_VARYING_VECTORS:0,MAX_VERTEX_UNIFORM_VECTORS:0,MAX_FRAGMENT_UNIFORM_VECTORS:0};return Object.keys(t).forEach((function(n){t[n]=e.getParameter(e[n])})),t}function ht(e){var t={ANGLE_instanced_arrays:null,WEBGL_compressed_texture_s3tc:null,WEBGL_compressed_texture_astc:null,WEBGL_compressed_texture_etc:null,WEBGL_compressed_texture_etc1:null,WEBGL_compressed_texture_pvrtc:null,WEBKIT_WEBGL_compressed_texture_pvrtc:null,WEBGL_compressed_texture_s3tc_srgb:null,OES_vertex_array_object:null};return Object.keys(t).forEach((function(n){t[n]=e.getExtension(n)})),t}var ft=new Uint8Array([0,0,0,0]),pt=function(e){function t(e,n){var r;return p(this,t),m(u(r=i(this,t,[n])),"glw",void 0),m(u(r),"_nativeCtxTexture",null),m(u(r),"_state","freed"),m(u(r),"_w",0),m(u(r),"_h",0),r.glw=e,r}var r;return c(t,e),f(t,[{key:"ctxTexture",get:function(){return"freed"===this._state&&this.load(),this._nativeCtxTexture,this._nativeCtxTexture}},{key:"w",get:function(){return this._w}},{key:"h",get:function(){return this._h}},{key:"load",value:function(){var e=this;"loading"!==this._state&&"loaded"!==this._state&&(this._state="loading",this.textureSource.setState("loading"),this.onLoadRequest().then((function(t){var n=t.width,r=t.height;e._state="loaded",e._w=n,e._h=r,e.textureSource.setState("loaded",{width:n,height:r})})).catch((function(t){e._state="failed",e.textureSource.setState("failed",t),console.error(t)})))}},{key:"onLoadRequest",value:(r=o(n().mark((function e(){var t,r,o,i,a,s,l,u,c,d,h,f,p,v,g,y;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._nativeCtxTexture=this.createNativeCtxTexture(),(r=this.glw).activeTexture(0),r.bindTexture(this._nativeCtxTexture),r.texParameteri(r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texImage2D(0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,ft),e.next=11,null===(t=this.textureSource)||void 0===t?void 0:t.getTextureData();case 11:return o=e.sent,i=0,a=0,this._nativeCtxTexture,r.activeTexture(0),o.data instanceof ImageBitmap||o.data instanceof ImageData?(s=o.data,i=s.width,a=s.height,r.bindTexture(this._nativeCtxTexture),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!o.premultiplyAlpha),r.texImage2D(0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,s),(r.isWebGl2()||We(i)&&We(a))&&r.generateMipmap()):null===o.data?(i=0,a=0,r.bindTexture(this._nativeCtxTexture),r.texImage2D(0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,ft)):"mipmaps"in o.data&&o.data.mipmaps?(u=o.data,c=u.mipmaps,d=u.width,h=void 0===d?0:d,f=u.height,p=void 0===f?0:f,v=u.type,g=u.glInternalFormat,y="ktx"===v?new DataView(null!==(l=c[0])&&void 0!==l?l:new ArrayBuffer(0)):c[0],r.bindTexture(this._nativeCtxTexture),r.compressedTexImage2D(0,g,h,p,0,y),r.texParameteri(r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_MIN_FILTER,r.LINEAR)):console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",o),e.abrupt("return",{width:i,height:a});case 18:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"free",value:function(){"freed"!==this._state&&(this._state="freed",this._w=0,this._h=0,this._nativeCtxTexture&&(this.glw.deleteTexture(this._nativeCtxTexture),this._nativeCtxTexture=null))}},{key:"createNativeCtxTexture",value:function(){var e=this.glw.createTexture();if(!e)throw new Error("Could not create WebGL Texture");return e}}]),t}(it),vt=function(e){function t(e){var n;return p(this,t),m(u(n=i(this,t)),"txManager",void 0),m(u(n),"dimensions",null),m(u(n),"error",null),m(u(n),"state","loading"),n.txManager=e,n}return c(t,e),f(t,[{key:"setState",value:function(e){if(this.state!==e){this.state=e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("loaded"===e){var o=n;this.dimensions=o[0]}else if("failed"===e){var i=n;this.error=i[0]}this.emit.apply(this,[e].concat(n))}}}],[{key:"makeCacheKey",value:function(e){return!1}},{key:"resolveDefaults",value:function(e){return{}}}]),t}(d),gt=function(e){function t(e,n){var r;return p(this,t),m(u(r=i(this,t,[e])),"props",void 0),r.props=t.resolveDefaults(n||{}),r}var r;return c(t,e),f(t,[{key:"color",get:function(){return this.props.color},set:function(e){this.props.color=e}},{key:"getTextureData",value:(r=o(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Uint32Array([this.color]),r=new Uint8ClampedArray(t.buffer),e.abrupt("return",{data:new ImageData(r,1,1),premultiplyAlpha:!0});case 3:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}],[{key:"makeCacheKey",value:function(e){var n=t.resolveDefaults(e);return"ColorTexture,".concat(n.color)}},{key:"resolveDefaults",value:function(e){return{color:e.color||4294967295}}}]),t}(vt);m(gt,"z$__type__Props",void 0);var yt=function(e){function t(e,n){var r;return p(this,t),m(u(r=i(this,t,[e])),"props",void 0),m(u(r),"parentTexture",void 0),m(u(r),"onParentTxLoaded",(function(){r.setState("loaded",{width:r.props.width,height:r.props.height})})),m(u(r),"onParentTxFailed",(function(e,t){r.setState("failed",t)})),r.parentTexture=r.txManager.loadTexture(n.texture.txType,n.texture.props,n.texture.options),r.props=t.resolveDefaults(n||{}),queueMicrotask((function(){var e=r.parentTexture;"loaded"===e.state?r.onParentTxLoaded(e,e.dimensions):"failed"===e.state&&r.onParentTxFailed(e,e.error),e.on("loaded",r.onParentTxLoaded),e.on("failed",r.onParentTxFailed)})),r}var r;return c(t,e),f(t,[{key:"getTextureData",value:(r=o(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{data:this.props});case 1:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}],[{key:"makeCacheKey",value:function(e){return!1}},{key:"resolveDefaults",value:function(e){return{texture:e.texture,x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0}}}]),t}(vt);m(yt,"z$__type__Props",void 0);var mt=function(e){function t(e,n){return p(this,t),i(this,t,[e,n])}var r;return c(t,e),f(t,[{key:"onLoadRequest",value:(r=o(n().mark((function e(){var t,r,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.textureSource.getTextureData();case 2:return o=e.sent,e.abrupt("return",{width:(null===(t=o.data)||void 0===t?void 0:t.width)||0,height:(null===(r=o.data)||void 0===r?void 0:r.height)||0});case 4:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}]),t}(pt),xt=function(e){function t(e){return p(this,t),i(this,t,[{renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]}])}return c(t,e),f(t,[{key:"bindTextures",value:function(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}}]),t}(ut);m(xt,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    "});var bt=function(e){function t(e){var n;return p(this,t),m(u(n=i(this,t,[{renderer:e,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]}])),"supportsIndexedTextures",!0),n}return c(t,e),f(t,[{key:"bindTextures",value:function(e){var t=this.renderer,n=this.glw;if(e.length>t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error("DefaultShaderBatched: Cannot bind more than ".concat(t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS," textures"));e.forEach((function(e,t){n.activeTexture(t),n.bindTexture(e.ctxTexture)}));var r=Array.from(Array(e.length).keys());this.setUniform("u_textures[0]",r)}}]),t}(ut);m(bt,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:function(e){return"\n      #define txUnits ".concat(e,"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[").concat(e,"], int idx, vec2 uv) {\n        ").concat(Array.from(Array(e).keys()).map((function(e){return"\n          ".concat(0!==e?"else ":"","if (idx == ").concat(e,") {\n            return texture2D(textures[").concat(e,"], uv);\n          }\n        ")})).join(""),"\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    ")}});var wt=function(){function e(t){p(this,e),m(this,"priority",1),m(this,"name",""),m(this,"ref",void 0),m(this,"target",void 0),m(this,"passParameters",""),m(this,"declaredUniforms",""),m(this,"uniformInfo",{});var n=t.ref,r=t.target,o=t.props,i=void 0===o?{}:o;this.ref=n,this.target=r;var a={},s=[],l="",u=this.constructor.uniforms||{};for(var c in u){var d=u[c],h=d.type,f="".concat(n,"_").concat(c),v="";d.size&&(v="[".concat(d.size(i),"]")),s.push(f),l+="uniform ".concat(h," ").concat(f).concat(v,";"),a[c]={name:f,uniform:u[c].method}}this.passParameters=s.join(","),this.declaredUniforms=l,this.uniformInfo=a}return f(e,null,[{key:"getEffectKey",value:function(e){return""}},{key:"getMethodParameters",value:function(e,t){var n=[];for(var r in e){var o=e[r],i="";o.size&&(i="[".concat(o.size(t),"]")),n.push("".concat(o.type," ").concat(r).concat(i))}return n.join(",")}},{key:"resolveDefaults",value:function(e){return{}}},{key:"makeEffectKey",value:function(e){return!1}}]),e}();m(wt,"uniforms",{}),m(wt,"methods",void 0),m(wt,"onShaderMask",void 0),m(wt,"onColorize",void 0),m(wt,"onEffectMask",void 0);var At=new Map,St=function(e,t){var n=JSON.stringify(e);if(At.has(n))return At.get(n);var r=(null!=e?e:[]).map((function(e){return{type:e.type,props:t[e.type].resolveDefaults(e.props||{})}}));return At.set(n,r),r},Tt=function(e){function t(e,n,r){var o;p(this,t);var a=t.createShader(n,r);return m(u(o=i(this,t,[{renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"}].concat(v(a.uniforms)),shaderSources:{vertex:a.vertex,fragment:a.fragment}}])),"effects",[]),o.effects=a.effects,o.calculateProps=ze(o.calculateProps.bind(u(o))),o}return c(t,e),f(t,[{key:"bindTextures",value:function(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}},{key:"calculateProps",value:function(e){var t=this,n=this.renderer.shManager.getRegisteredEffects(),r=[];return null==e||e.forEach((function(e,o){var i,a=t.effects[o],s=n[a.name],l=null!==(i=e.props)&&void 0!==i?i:{},u=a.uniformInfo;Object.keys(l).forEach((function(e){var t=s.uniforms[e],n=u[e],o=t.validator?t.validator(l[e],l):l[e];Array.isArray(o)&&(o=new Float32Array(o)),r.push({name:n.name,value:o})}))})),r}},{key:"bindProps",value:function(e){var t=this;this.calculateProps(e.effects).forEach((function(e){t.setUniform(e.name,e.value)}))}}],[{key:"createShader",value:function(e,n){var r={},o={},i="",a=[],s=[],l=e.effects.map((function(e){var t=n[e.type],o=t.getEffectKey(e.props||{});r[o]=r[o]?++r[o]:1;var l=r[o];1===l&&s.push({key:o,type:e.type,props:e.props});var u=new t({ref:"".concat(o).concat(1===l?"":l),target:o,props:e.props});return i+=u.declaredUniforms,a.push.apply(a,v(Object.values(u.uniformInfo))),u})),u="";null==s||s.forEach((function(e){var r,i=n[e.type],a=i.resolveDefaults(null!==(r=e.props)&&void 0!==r?r:{}),s=[];for(var l in i.methods){var c=l,d=i.methods[l];o[l]&&o[l]!==d&&(c=t.resolveMethodDuplicate(l,d,o)),o[c]=d.replace("function",c),s.push({m:l,cm:c})}var h=i.onShaderMask instanceof Function?i.onShaderMask(a):i.onShaderMask,f=i.onColorize instanceof Function?i.onColorize(a):i.onColorize,p=i.onEffectMask instanceof Function?i.onEffectMask(a):i.onEffectMask;s.forEach((function(e){var t=e.m,n=e.cm,r=new RegExp("\\$".concat(t),"g");h&&(h=h.replace(r,n)),f&&(f=f.replace(r,n)),p&&(p=p.replace(r,n))}));var v=i.getMethodParameters(i.uniforms,a),g=v.length>0?", ".concat(v):"";h&&(u+="\n        float fx_".concat(e.key,"_onShaderMask(float shaderMask ").concat(g,") {\n          ").concat(h,"\n        }\n        ")),f&&(u+="\n          vec4 fx_".concat(e.key,"_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(g,") {\n            ").concat(f,"\n          }\n        ")),p&&(u+="\n          vec4 fx_".concat(e.key,"_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(g,") {\n            ").concat(p,"\n          }\n        "))}));var c="";for(var d in o)c+=o[d];for(var h="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",f="\n\n    ",p=0;p<l.length;p++){var g=l[p],y=g.passParameters.length>0?", ".concat(g.passParameters):"",m=n[g.name];m.onShaderMask&&(f+="\n        shaderMask = fx_".concat(g.target,"_onShaderMask(shaderMask ").concat(y,");\n        ")),m.onColorize&&(f+="\n        maskColor = fx_".concat(g.target,"_onColorize(shaderMask, maskColor, shaderColor").concat(y,");\n        ")),m.onEffectMask&&(h="fx_".concat(g.target,"_onEffectMask(shaderMask, maskColor, shaderColor").concat(y,")"));var x=l[p+1];(void 0===x||n[x.name].onEffectMask)&&(f+="\n          shaderColor = ".concat(h,";\n        "))}return{effects:l,uniforms:a,fragment:t.fragment(i,c,u,f),vertex:t.vertex()}}},{key:"resolveMethodDuplicate",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=e+(r>0?r:"");return n[o]&&n[o]!==t?this.resolveMethodDuplicate(e,t,n,++r):o}},{key:"resolveDefaults",value:function(e,t){return{effects:St(e.effects,t),$dimensions:{width:0,height:0},$alpha:0}}},{key:"makeCacheKey",value:function(e,t){var n,r="";return null===(n=e.effects)||void 0===n||n.forEach((function(e){var n=t[e.type].getEffectKey(e.props||{});r+=",".concat(n)})),"DynamicShader".concat(r)}}]),t}(ut);m(Tt,"z$__type__Props",void 0),m(Tt,"vertex",(function(){return"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  "})),m(Tt,"fragment",(function(e,t,n,r){return"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ".concat(e,"\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n\n    ").concat(t,"\n\n    ").concat(n,"\n\n    void main() {\n      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ").concat(r,"\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  ")}));var kt=function(e){function t(e){return p(this,t),i(this,t,[{renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]}])}return c(t,e),f(t,[{key:"bindTextures",value:function(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}},{key:"bindProps",value:function(e){this.setUniform("u_radius",e.radius)}},{key:"canBatchShaderProps",value:function(e,t){return e.radius===t.radius&&e.$dimensions.width===t.$dimensions.width&&e.$dimensions.height===t.$dimensions.height}}],[{key:"resolveDefaults",value:function(e){return{radius:e.radius||10,$dimensions:{width:0,height:0}}}}]),t}(ut);m(kt,"z$__type__Props",void 0),m(kt,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    "});var _t=new Float32Array([1,0,0,0,1,0,0,0,1]),Et=function(e){function t(e){return p(this,t),i(this,t,[{renderer:e,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]}])}return c(t,e),f(t,[{key:"bindTextures",value:function(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}},{key:"bindProps",value:function(e){var n=t.resolveDefaults(e);for(var r in n)if("transform"===r)this.setUniform("u_transform",!1,n[r]);else if("scrollY"===r)this.setUniform("u_scrollY",n[r]);else if("color"===r){var o=He(n.color);this.setUniform("u_color",o)}else"size"===r?this.setUniform("u_size",n[r]):"distanceRange"===r?this.setUniform("u_distanceRange",n[r]):"debug"===r&&this.setUniform("u_debug",n[r]?1:0)}}],[{key:"resolveDefaults",value:function(){var e,t,n,r,o,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{transform:null!==(e=a.transform)&&void 0!==e?e:_t,scrollY:null!==(t=a.scrollY)&&void 0!==t?t:0,color:null!==(n=a.color)&&void 0!==n?n:4294967295,size:null!==(r=a.size)&&void 0!==r?r:16,distanceRange:null!==(o=a.distanceRange)&&void 0!==o?o:1,debug:null!==(i=a.debug)&&void 0!==i&&i}}}]),t}(ut);m(Et,"shaderSources",{vertex:"\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n        gl_Position = vec4((transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1), 0, 1);\n        v_texcoord = a_textureCoordinate;\n      }\n    ",fragment:"\n      precision highp float;\n\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    "});var Ct=function(e){function t(){var e;p(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(u(e=i(this,t,[].concat(r))),"name","radius"),e}return c(t,e),f(t,null,[{key:"getEffectKey",value:function(){return"radius"}},{key:"resolveDefaults",value:function(e){var t;return{radius:null!==(t=e.radius)&&void 0!==t?t:10}}}]),t}(wt);m(Ct,"z$__type__Props",void 0),m(Ct,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",validator:function(e){var t=e;return Array.isArray(t)?2===t.length?t=[t[0],t[1],t[0],t[1]]:3===t.length?t=[t[0],t[1],t[2],t[0]]:4!==t.length&&(t=[t[0],t[0],t[0],t[0]]):"number"==typeof t&&(t=[t,t,t,t]),t}}}),m(Ct,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),m(Ct,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);\n  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);\n  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  "),m(Ct,"onEffectMask","\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  ");var Rt=function(e){function t(){var e;p(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(u(e=i(this,t,[].concat(r))),"name","border"),e}return c(t,e),f(t,null,[{key:"getEffectKey",value:function(){return"border"}},{key:"resolveDefaults",value:function(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}]),t}(wt);m(Rt,"z$__type__Props",void 0),m(Rt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:function(e){return He(e)},method:"uniform4fv",type:"vec4"}}),m(Rt,"onEffectMask","\n  float mask = clamp(shaderMask + width, 0.0, 1.0) - clamp(shaderMask, 0.0, 1.0);\n  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);\n  "),m(Rt,"onColorize","\n    return color;\n  ");var It=function(e){function t(){var e;p(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(u(e=i(this,t,[].concat(r))),"name","linearGradient"),e}return c(t,e),f(t,null,[{key:"getEffectKey",value:function(e){return"linearGradient".concat(e.colors.length)}},{key:"resolveDefaults",value:function(e){var t,n,r=null!==(t=e.colors)&&void 0!==t?t:[4278190080,4294967295],o=e.stops;if(!o){o=[];for(var i=r.length-1,a=0;a<r.length;a++)o.push(a*(1/i))}return{colors:r,stops:o,angle:null!==(n=e.angle)&&void 0!==n?n:0}}}]),t}(wt);m(It,"z$__type__Props",void 0),m(It,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:function(e){return e.map((function(e){return He(e)})).reduce((function(e,t){return e.concat(t)}),[])},size:function(e){return e.colors.length},method:"uniform4fv",type:"vec4"},stops:{value:[],validator:function(e,t){var n,r=null!==(n=t.colors)&&void 0!==n?n:[],o=e,i=e;if(0===o.length||o&&o.length!==r.length){for(var a=0;a<r.length;a++)o[a]?(i[a]=o[a],void 0===o[a-1]&&void 0!==i[a-2]&&(i[a-1]=i[a-2]+(o[a]-i[a-2])/2)):i[a]=a*(1/(r.length-1));o=i}return i},size:function(e){return e.colors.length},method:"uniform1fv",type:"float"}}),m(It,"methods",{fromLinear:"\n      vec4 function(vec4 linearRGB) {\n        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n        vec4 lower = linearRGB * vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",toLinear:"\n      vec4 function(vec4 sRGB) {\n        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n        vec4 lower = sRGB/vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",calcPoint:"\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    "}),m(It,"ColorLoop",(function(e){for(var t="",n=2;n<e;n++)t+="colorOut = mix(colorOut, colors[".concat(n,"], clamp((dist - stops[").concat(n-1,"]) / (stops[").concat(n,"] - stops[").concat(n-1,"]), 0.0, 1.0));");return t})),m(It,"onColorize",(function(e){var t=e.colors.length||1;return"\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));\n      for(int i = 1; i < ".concat(t,"-1; i++) {\n        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);\n        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));\n      }\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")}));var Bt=function(e){function t(){var e;p(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(u(e=i(this,t,[].concat(r))),"name","grayscale"),e}return c(t,e),f(t,null,[{key:"getEffectKey",value:function(){return"grayscale"}},{key:"resolveDefaults",value:function(e){var t;return{amount:null!==(t=e.amount)&&void 0!==t?t:1}}}]),t}(wt);m(Bt,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),m(Bt,"onColorize","\n    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;\n    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);\n  ");var Nt=function(e){function t(){var e;p(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(u(e=i(this,t,[].concat(r))),"name","borderRight"),e}return c(t,e),f(t,null,[{key:"getEffectKey",value:function(){return"borderRight"}},{key:"resolveDefaults",value:function(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}]),t}(wt);m(Nt,"z$__type__Props",void 0),m(Nt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:function(e){return He(e)},method:"uniform4fv",type:"vec4"}}),m(Nt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),m(Nt,"onEffectMask","\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),m(Nt,"onColorize","\n    return color;\n  ");var Mt=function(e){function t(){var e;p(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(u(e=i(this,t,[].concat(r))),"name","borderTop"),e}return c(t,e),f(t,null,[{key:"getEffectKey",value:function(){return"borderTop"}},{key:"resolveDefaults",value:function(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}]),t}(wt);m(Mt,"z$__type__Props",void 0),m(Mt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:function(e){return He(e)},method:"uniform4fv",type:"vec4"}}),m(Mt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),m(Mt,"onEffectMask","\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),m(Mt,"onColorize","\n    return color;\n  ");var Lt=function(e){function t(){var e;p(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(u(e=i(this,t,[].concat(r))),"name","borderBottom"),e}return c(t,e),f(t,null,[{key:"getEffectKey",value:function(){return"borderBottom"}},{key:"resolveDefaults",value:function(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}]),t}(wt);m(Lt,"z$__type__Props",void 0),m(Lt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:function(e){return He(e)},method:"uniform4fv",type:"vec4"}}),m(Lt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),m(Lt,"onEffectMask","\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),m(Lt,"onColorize","\n    return color;\n  ");var Ft=function(e){function t(){var e;p(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(u(e=i(this,t,[].concat(r))),"name","borderLeft"),e}return c(t,e),f(t,null,[{key:"getEffectKey",value:function(){return"borderLeft"}},{key:"resolveDefaults",value:function(e){var t,n;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(n=e.color)&&void 0!==n?n:4294967295}}}]),t}(wt);m(Ft,"z$__type__Props",void 0),m(Ft,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:function(e){return He(e)},method:"uniform4fv",type:"vec4"}}),m(Ft,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),m(Ft,"onEffectMask","\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),m(Ft,"onColorize","\n    return color;\n  ");var Pt=function(e){function t(){var e;p(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(u(e=i(this,t,[].concat(r))),"name","glitch"),e}return c(t,e),f(t,null,[{key:"getEffectKey",value:function(e){return"glitch"}},{key:"resolveDefaults",value:function(e){var t,n,r,o,i;return{amplitude:null!==(t=e.amplitude)&&void 0!==t?t:.2,narrowness:null!==(n=e.narrowness)&&void 0!==n?n:4,blockiness:null!==(r=e.blockiness)&&void 0!==r?r:2,minimizer:null!==(o=e.minimizer)&&void 0!==o?o:8,time:null!==(i=e.time)&&void 0!==i?i:Date.now()}}}]),t}(wt);m(Pt,"z$__type__Props",void 0),m(Pt,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",validator:function(e){return(Date.now()-e)%1e3},type:"float"}}),m(Pt,"methods",{rand:"\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    ",noise:"\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    ",fbm:"\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    "}),m(Pt,"onColorize","\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  ");var Dt=function(e){function t(){var e;p(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(u(e=i(this,t,[].concat(r))),"name","fadeOut"),e}return c(t,e),f(t,null,[{key:"getEffectKey",value:function(){return"fadeOut"}},{key:"resolveDefaults",value:function(e){var t;return{fade:null!==(t=e.fade)&&void 0!==t?t:10}}}]),t}(wt);m(Dt,"z$__type__Props",void 0),m(Dt,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:function(e){var t=e;return Array.isArray(t)?2===t.length?t=[t[0],t[1],t[0],t[1]]:3===t.length?t=[t[0],t[1],t[2],t[0]]:4!==t.length&&(t=[t[0],t[0],t[0],t[0]]):"number"==typeof t&&(t=[t,t,t,t]),t}}}),m(Dt,"onColorize","\n  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  ");var Ut=function(e){function t(){var e;p(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(u(e=i(this,t,[].concat(r))),"name","radialGradient"),e}return c(t,e),f(t,null,[{key:"getEffectKey",value:function(e){return"radialGradient".concat(e.colors.length)}},{key:"resolveDefaults",value:function(e){var t,n,r,o,i,a=null!==(t=e.colors)&&void 0!==t?t:[4278190080,4294967295],s=e.stops;if(!s){s=[];for(var l=a.length-1,u=0;u<a.length;u++)s.push(u*(1/l))}return{colors:a,stops:s,width:null!==(n=e.width)&&void 0!==n?n:0,height:null!==(r=null!==(o=e.height)&&void 0!==o?o:e.width)&&void 0!==r?r:0,pivot:null!==(i=e.pivot)&&void 0!==i?i:[.5,.5]}}}]),t}(wt);m(Ut,"z$__type__Props",void 0),m(Ut,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:function(e){return e.map((function(e){return He(e)})).reduce((function(e,t){return e.concat(t)}),[])},size:function(e){return e.colors.length},method:"uniform4fv",type:"vec4"},stops:{value:[],validator:function(e,t){var n,r=null!==(n=t.colors)&&void 0!==n?n:[],o=e,i=e;if(0===o.length||o&&o.length!==r.length){for(var a=0;a<r.length;a++)o[a]?(i[a]=o[a],void 0===o[a-1]&&void 0!==i[a-2]&&(i[a-1]=i[a-2]+(o[a]-i[a-2])/2)):i[a]=a*(1/(r.length-1));o=i}return i},size:function(e){return e.colors.length},method:"uniform1fv",type:"float"}}),m(Ut,"onColorize",(function(e){var t=e.colors.length||1;return"\n      vec2 point = v_textureCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = mix(colors[0], colors[1], stopCalc);\n      for(int i = 1; i < ".concat(t,"-1; i++) {\n        stopCalc = (dist - stops[i]) / (stops[i + 1] - stops[i]);\n        colorOut = mix(colorOut, colors[i + 1], clamp(stopCalc, 0.0, 1.0));\n      }\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")}));var Ot=function(e){function t(){var e;p(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return m(u(e=i(this,t,[].concat(r))),"name","radialProgress"),e}return c(t,e),f(t,null,[{key:"getEffectKey",value:function(){return"radialProgress"}},{key:"resolveDefaults",value:function(e){var t,n,r,o,i,a,s;return{width:null!==(t=e.width)&&void 0!==t?t:10,progress:null!==(n=e.progress)&&void 0!==n?n:.5,offset:null!==(r=e.offset)&&void 0!==r?r:0,range:null!==(o=e.range)&&void 0!==o?o:2*Math.PI,rounded:null!==(i=e.rounded)&&void 0!==i&&i,radius:null!==(a=e.radius)&&void 0!==a?a:1,color:null!==(s=e.color)&&void 0!==s?s:4294967295}}}]),t}(wt);m(Ot,"z$__type__Props",void 0),m(Ot,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:function(e){return e?1:0}},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,validator:function(e){return He(e)},method:"uniform4fv",type:"vec4"}}),m(Ot,"methods",{rotateUV:"\n    vec2 function(vec2 uv, float d) {\n      float s = sin(d);\n      float c = cos(d);\n      mat2 rotMatrix = mat2(c, -s, s, c);\n      return uv * rotMatrix;\n    }\n    ",drawDot:"\n    float function(vec2 uv, vec2 p, float r) {\n      uv += p;\n      float circle = length(uv) - r;\n      return clamp(-circle, 0.0, 1.0);\n    }\n    "}),m(Ot,"onEffectMask","\n    float outerRadius = radius * u_dimensions.y * 0.5;\n\n    float endAngle = range * progress - 0.0005;\n\n    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;\n\n    uv = $rotateUV(uv, -(offset));\n    float linewidth = width * u_pixelRatio;\n    float circle = length(uv) - (outerRadius - linewidth) ;\n    circle = abs(circle) - linewidth;\n    circle = clamp(-circle, 0.0, 1.0);\n\n    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);\n    float p = endAngle / (PI * 2.);\n\n    circle *= step(fract(angle), fract(p));\n\n    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));\n    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));\n\n    return mix(shaderColor, maskColor, circle);\n  "),m(Ot,"onColorize","\n    return color;\n  ");var zt=function(){function e(){p(this,e),m(this,"shCache",new Map),m(this,"shConstructors",{}),m(this,"attachedShader",null),m(this,"effectConstructors",{}),m(this,"renderer",void 0),this.registerShaderType("DefaultShader",xt),this.registerShaderType("DefaultShaderBatched",bt),this.registerShaderType("RoundedRectangle",kt),this.registerShaderType("DynamicShader",Tt),this.registerShaderType("SdfShader",Et),this.registerEffectType("border",Rt),this.registerEffectType("borderBottom",Lt),this.registerEffectType("borderLeft",Ft),this.registerEffectType("borderRight",Nt),this.registerEffectType("borderTop",Mt),this.registerEffectType("fadeOut",Dt),this.registerEffectType("linearGradient",It),this.registerEffectType("radialGradient",Ut),this.registerEffectType("grayscale",Bt),this.registerEffectType("glitch",Pt),this.registerEffectType("radius",Ct),this.registerEffectType("radialProgress",Ot)}return f(e,[{key:"registerShaderType",value:function(e,t){this.shConstructors[e]=t}},{key:"registerEffectType",value:function(e,t){this.effectConstructors[e]=t}},{key:"getRegisteredEffects",value:function(){return this.effectConstructors}},{key:"getRegisteredShaders",value:function(){return this.shConstructors}},{key:"loadShader",value:function(e,t){if(!this.renderer)throw new Error("Renderer is not been defined");var n=this.shConstructors[e];if(!n)throw new Error('Shader type "'.concat(e,'" is not registered'));if("DynamicShader"===e)return this.loadDynamicShader(t);var r=n.resolveDefaults(t),o=n.makeCacheKey(r)||n.name;if(o&&this.shCache.has(o))return{shader:this.shCache.get(o),props:r};var i=new n(this.renderer,t);return o&&this.shCache.set(o,i),{shader:i,props:r}}},{key:"loadDynamicShader",value:function(e){if(!this.renderer)throw new Error("Renderer is not been defined");var t=Tt.resolveDefaults(e,this.effectConstructors),n=Tt.makeCacheKey(t,this.effectConstructors);if(n&&this.shCache.has(n))return{shader:this.shCache.get(n),props:t};var r=new Tt(this.renderer,e,this.effectConstructors);return n&&this.shCache.set(n,r),{shader:r,props:t}}},{key:"useShader",value:function(e){this.attachedShader!==e&&(this.attachedShader&&this.attachedShader.detach(),e.attach(),this.attachedShader=e)}}]),e}(),Wt=function(){function e(t){p(this,e),m(this,"config",void 0),this.config=t}return f(e,[{key:"getBuffer",value:function(e){var t;return null===(t=this.config.find((function(t){return t.attributes[e]})))||void 0===t?void 0:t.buffer}},{key:"getAttributeInfo",value:function(e){var t;return null===(t=this.config.find((function(t){return t.attributes[e]})))||void 0===t?void 0:t.attributes[e]}}]),e}(),Xt=function(){function e(){p(this,e),m(this,"data",{})}return f(e,[{key:"reset",value:function(){this.data={}}},{key:"increment",value:function(e){this.data[e]||(this.data[e]=0),this.data[e]++}},{key:"getData",value:function(){return y({},this.data)}}]),e}(),Yt=function(){function e(t){var n=this;p(this,e),m(this,"gl",void 0),m(this,"activeTextureUnit",0),m(this,"texture2dUnits",void 0),m(this,"texture2dParams",new WeakMap),m(this,"scissorEnabled",void 0),m(this,"scissorX",void 0),m(this,"scissorY",void 0),m(this,"scissorWidth",void 0),m(this,"scissorHeight",void 0),m(this,"blendEnabled",void 0),m(this,"blendSrcRgb",void 0),m(this,"blendDstRgb",void 0),m(this,"blendSrcAlpha",void 0),m(this,"blendDstAlpha",void 0),m(this,"boundArrayBuffer",void 0),m(this,"boundElementArrayBuffer",void 0),m(this,"curProgram",void 0),m(this,"programUniforms",new WeakMap),m(this,"canvas",void 0),m(this,"MAX_RENDERBUFFER_SIZE",void 0),m(this,"MAX_TEXTURE_SIZE",void 0),m(this,"MAX_VIEWPORT_DIMS",void 0),m(this,"MAX_VERTEX_TEXTURE_IMAGE_UNITS",void 0),m(this,"MAX_TEXTURE_IMAGE_UNITS",void 0),m(this,"MAX_COMBINED_TEXTURE_IMAGE_UNITS",void 0),m(this,"MAX_VERTEX_ATTRIBS",void 0),m(this,"MAX_VARYING_VECTORS",void 0),m(this,"MAX_VERTEX_UNIFORM_VECTORS",void 0),m(this,"MAX_FRAGMENT_UNIFORM_VECTORS",void 0),m(this,"TEXTURE_MAG_FILTER",void 0),m(this,"TEXTURE_MIN_FILTER",void 0),m(this,"TEXTURE_WRAP_S",void 0),m(this,"TEXTURE_WRAP_T",void 0),m(this,"LINEAR",void 0),m(this,"CLAMP_TO_EDGE",void 0),m(this,"RGBA",void 0),m(this,"UNSIGNED_BYTE",void 0),m(this,"UNPACK_PREMULTIPLY_ALPHA_WEBGL",void 0),m(this,"FLOAT",void 0),m(this,"TRIANGLES",void 0),m(this,"UNSIGNED_SHORT",void 0),m(this,"ONE",void 0),m(this,"ONE_MINUS_SRC_ALPHA",void 0),m(this,"VERTEX_SHADER",void 0),m(this,"FRAGMENT_SHADER",void 0),m(this,"STATIC_DRAW",void 0),m(this,"COMPILE_STATUS",void 0),m(this,"LINK_STATUS",void 0),m(this,"DYNAMIC_DRAW",void 0),this.gl=t,this.activeTextureUnit=t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0;var r=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.texture2dUnits=new Array(r).fill(void 0).map((function(e,r){return n.activeTexture(r),t.getParameter(t.TEXTURE_BINDING_2D)})),this.activeTexture(this.activeTextureUnit),this.scissorEnabled=t.isEnabled(t.SCISSOR_TEST);var o=t.getParameter(t.SCISSOR_BOX);this.scissorX=o[0],this.scissorY=o[1],this.scissorWidth=o[2],this.scissorHeight=o[3],this.blendEnabled=t.isEnabled(t.BLEND),this.blendSrcRgb=t.getParameter(t.BLEND_SRC_RGB),this.blendDstRgb=t.getParameter(t.BLEND_DST_RGB),this.blendSrcAlpha=t.getParameter(t.BLEND_SRC_ALPHA),this.blendDstAlpha=t.getParameter(t.BLEND_DST_ALPHA),this.boundArrayBuffer=t.getParameter(t.ARRAY_BUFFER_BINDING),this.boundElementArrayBuffer=t.getParameter(t.ELEMENT_ARRAY_BUFFER_BINDING),this.curProgram=t.getParameter(t.CURRENT_PROGRAM),this.canvas=t.canvas,this.MAX_RENDERBUFFER_SIZE=t.MAX_RENDERBUFFER_SIZE,this.MAX_TEXTURE_SIZE=t.MAX_TEXTURE_SIZE,this.MAX_VIEWPORT_DIMS=t.MAX_VIEWPORT_DIMS,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=t.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.MAX_TEXTURE_IMAGE_UNITS=t.MAX_TEXTURE_IMAGE_UNITS,this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS,this.MAX_VERTEX_ATTRIBS=t.MAX_VERTEX_ATTRIBS,this.MAX_VARYING_VECTORS=t.MAX_VARYING_VECTORS,this.MAX_VERTEX_UNIFORM_VECTORS=t.MAX_VERTEX_UNIFORM_VECTORS,this.MAX_FRAGMENT_UNIFORM_VECTORS=t.MAX_FRAGMENT_UNIFORM_VECTORS,this.TEXTURE_MAG_FILTER=t.TEXTURE_MAG_FILTER,this.TEXTURE_MIN_FILTER=t.TEXTURE_MIN_FILTER,this.TEXTURE_WRAP_S=t.TEXTURE_WRAP_S,this.TEXTURE_WRAP_T=t.TEXTURE_WRAP_T,this.LINEAR=t.LINEAR,this.CLAMP_TO_EDGE=t.CLAMP_TO_EDGE,this.RGBA=t.RGBA,this.UNSIGNED_BYTE=t.UNSIGNED_BYTE,this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.FLOAT=t.FLOAT,this.TRIANGLES=t.TRIANGLES,this.UNSIGNED_SHORT=t.UNSIGNED_SHORT,this.ONE=t.ONE,this.ONE_MINUS_SRC_ALPHA=t.ONE_MINUS_SRC_ALPHA,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=t.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.TRIANGLES=t.TRIANGLES,this.UNSIGNED_SHORT=t.UNSIGNED_SHORT,this.VERTEX_SHADER=t.VERTEX_SHADER,this.FRAGMENT_SHADER=t.FRAGMENT_SHADER,this.STATIC_DRAW=t.STATIC_DRAW,this.COMPILE_STATUS=t.COMPILE_STATUS,this.LINK_STATUS=t.LINK_STATUS,this.DYNAMIC_DRAW=t.DYNAMIC_DRAW}return f(e,[{key:"isWebGl2",value:function(){return e=this.gl,self.WebGL2RenderingContext&&e instanceof self.WebGL2RenderingContext;var e}},{key:"activeTexture",value:function(e){var t=this.gl;this.activeTextureUnit!==e&&(t.activeTexture(e+t.TEXTURE0),this.activeTextureUnit=e)}},{key:"bindTexture",value:function(e){var t=this.gl,n=this.activeTextureUnit,r=this.texture2dUnits;r[n]!==e&&(r[n]=e,t.bindTexture(this.gl.TEXTURE_2D,e))}},{key:"_getActiveTexture",value:function(){var e=this.activeTextureUnit;return this.texture2dUnits[e]}},{key:"texParameteri",value:function(e,t){var n=this.gl,r=this.texture2dParams,o=this._getActiveTexture();if(!o)throw new Error("No active texture");var i=r.get(o);i||(i={},r.set(o,i)),i[e]!==t&&(i[e]=t,n.texParameteri(n.TEXTURE_2D,e,t))}},{key:"texImage2D",value:function(e,t,n,r,o,i,a,s){var l=this.gl;i?l.texImage2D(l.TEXTURE_2D,e,t,n,r,o,i,a,s):l.texImage2D(l.TEXTURE_2D,e,t,n,r,o)}},{key:"compressedTexImage2D",value:function(e,t,n,r,o,i){var a=this.gl;a.compressedTexImage2D(a.TEXTURE_2D,e,t,n,r,o,i)}},{key:"pixelStorei",value:function(e,t){this.gl.pixelStorei(e,t)}},{key:"generateMipmap",value:function(){var e=this.gl;e.generateMipmap(e.TEXTURE_2D)}},{key:"createTexture",value:function(){return this.gl.createTexture()}},{key:"deleteTexture",value:function(e){var t=this.gl;e&&this.texture2dParams.delete(e),t.deleteTexture(e)}},{key:"viewport",value:function(e,t,n,r){this.gl.viewport(e,t,n,r)}},{key:"clearColor",value:function(e,t,n,r){this.gl.clearColor(e,t,n,r)}},{key:"setScissorTest",value:function(e){var t=this.gl;e!==this.scissorEnabled&&(e?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST),this.scissorEnabled=e)}},{key:"scissor",value:function(e,t,n,r){var o=this.gl,i=this.scissorX,a=this.scissorY,s=this.scissorWidth,l=this.scissorHeight;e===i&&t===a&&n===s&&r===l||(o.scissor(e,t,n,r),this.scissorX=e,this.scissorY=t,this.scissorWidth=n,this.scissorHeight=r)}},{key:"setBlend",value:function(e){var t=this.gl;e!==this.blendEnabled&&(e?t.enable(t.BLEND):t.disable(t.BLEND),this.blendEnabled=e)}},{key:"blendFunc",value:function(e,t){var n=this.gl,r=this.blendSrcRgb,o=this.blendDstRgb,i=this.blendSrcAlpha,a=this.blendDstAlpha;e===r&&t===o&&e===i&&t===a||(n.blendFunc(e,t),this.blendSrcRgb=e,this.blendDstRgb=t,this.blendSrcAlpha=e,this.blendDstAlpha=t)}},{key:"createBuffer",value:function(){return this.gl.createBuffer()}},{key:"clear",value:function(){var e=this.gl;e.clear(e.COLOR_BUFFER_BIT)}},{key:"arrayBufferData",value:function(e,t,n){var r=this.gl;this.boundArrayBuffer!==e&&(r.bindBuffer(r.ARRAY_BUFFER,e),this.boundArrayBuffer=e),r.bufferData(r.ARRAY_BUFFER,t,n)}},{key:"elementArrayBufferData",value:function(e,t,n){var r=this.gl;this.boundElementArrayBuffer!==e&&(r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,e),this.boundElementArrayBuffer=e),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t,n)}},{key:"vertexAttribPointer",value:function(e,t,n,r,o,i,a){var s=this.gl;this.boundArrayBuffer!==e&&(s.bindBuffer(s.ARRAY_BUFFER,e),this.boundArrayBuffer=e),s.vertexAttribPointer(t,n,r,o,i,a)}},{key:"useProgram",value:function(e){var t=this.gl;this.curProgram!==e&&(t.useProgram(e),this.curProgram=e)}},{key:"setUniform",value:function(e,t){var n=this.gl,r=this.programUniforms,o=r.get(this.curProgram);o||(o=new Map,r.set(this.curProgram,o));for(var i=o.get(t),a=arguments.length,s=new Array(a>2?a-2:0),l=2;l<a;l++)s[l-2]=arguments[l];i&&function(e,t){if(e.length!==t.length)return!1;return e.every((function(e,n){return!(Array.isArray(e)||e instanceof Float32Array)&&e===t[n]}))}(i,s)||(o.set(t,s),n[e].apply(n,[t].concat(s)))}},{key:"getParameter",value:function(e){return this.gl.getParameter(e)}},{key:"drawElements",value:function(e,t,n,r){this.gl.drawElements(e,t,n,r)}},{key:"getExtension",value:function(e){return this.gl.getExtension(e)}},{key:"createVertexArray",value:function(){return this.gl.createVertexArray()}},{key:"bindVertexArray",value:function(e){this.gl.bindVertexArray(e)}},{key:"getAttribLocation",value:function(e,t){return this.gl.getAttribLocation(e,t)}},{key:"getUniformLocation",value:function(e,t){return this.gl.getUniformLocation(e,t)}},{key:"enableVertexAttribArray",value:function(e){this.gl.enableVertexAttribArray(e)}},{key:"disableVertexAttribArray",value:function(e){this.gl.disableVertexAttribArray(e)}},{key:"createShader",value:function(e){return this.gl.createShader(e)}},{key:"compileShader",value:function(e){this.gl.compileShader(e)}},{key:"attachShader",value:function(e,t){this.gl.attachShader(e,t)}},{key:"linkProgram",value:function(e){this.gl.linkProgram(e)}},{key:"deleteProgram",value:function(e){this.gl.deleteProgram(e)}},{key:"getShaderParameter",value:function(e,t){return this.gl.getShaderParameter(e,t)}},{key:"getShaderInfoLog",value:function(e){return this.gl.getShaderInfoLog(e)}},{key:"createProgram",value:function(){return this.gl.createProgram()}},{key:"getProgramParameter",value:function(e,t){return this.gl.getProgramParameter(e,t)}},{key:"getProgramInfoLog",value:function(e){return this.gl.getProgramInfoLog(e)}},{key:"shaderSource",value:function(e,t){this.gl.shaderSource(e,t)}},{key:"deleteShader",value:function(e){this.gl.deleteShader(e)}}]),e}();var Gt=function(e){function t(e){var n;p(this,t),m(u(n=i(this,t,[e.stage])),"glw",void 0),m(u(n),"system",void 0),m(u(n),"txManager",void 0),m(u(n),"shManager",void 0),m(u(n),"options",void 0),m(u(n),"quadBuffer",new ArrayBuffer(4194304)),m(u(n),"fQuadBuffer",new Float32Array(n.quadBuffer)),m(u(n),"uiQuadBuffer",new Uint32Array(n.quadBuffer)),m(u(n),"renderOps",[]),m(u(n),"curBufferIdx",0),m(u(n),"curRenderOp",null),m(u(n),"renderables",[]),m(u(n),"defaultShader",void 0),m(u(n),"quadBufferCollection",void 0),m(u(n),"defaultTexture",void 0);var r=e.canvas,o=e.clearColor,a=e.bufferMemory;n.options=e,n.txManager=e.txManager,n.shManager=e.shManager,n.defaultTexture=new gt(n.txManager),n.defaultTexture.once("loaded",(function(){n.stage.requestRender()}));var s=function(e,t){var n={alpha:!0,antialias:!1,depth:!1,stencil:!0,desynchronized:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!1},r=e.getContext("webgl",n)||e.getContext("experimental-webgl",n);if(!r)throw new Error("Unable to create WebGL context");return t?new Proxy(r,{get:function(e,n){var r=e[n];return"function"==typeof r?(t.increment(String(n)),r.bind(e)):r}}):r}(r,e.contextSpy),l=n.glw=new Yt(s),c=He(o);l.viewport(0,0,r.width,r.height),l.clearColor(c[0],c[1],c[2],c[3]),l.setBlend(!0),l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA),function(e,t){for(var n=~~(t/80),r=new Uint16Array(6*n),o=0,i=0;o<n;o+=6,i+=4)r[o]=i,r[o+1]=i+1,r[o+2]=i+2,r[o+3]=i+2,r[o+4]=i+1,r[o+5]=i+3;var a=e.createBuffer();e.elementArrayBufferData(a,r,e.STATIC_DRAW)}(l,a),n.system={parameters:dt(n.glw),extensions:ht(n.glw)},n.shManager.renderer=u(n),n.defaultShader=n.shManager.loadShader("DefaultShader").shader;var d=l.createBuffer(),h=6*Float32Array.BYTES_PER_ELEMENT;return n.quadBufferCollection=new Wt([{buffer:d,attributes:{a_position:{name:"a_position",size:2,type:l.FLOAT,normalized:!1,stride:h,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:l.FLOAT,normalized:!1,stride:h,offset:2*Float32Array.BYTES_PER_ELEMENT},a_color:{name:"a_color",size:4,type:l.UNSIGNED_BYTE,normalized:!0,stride:h,offset:4*Float32Array.BYTES_PER_ELEMENT},a_textureIndex:{name:"a_textureIndex",size:1,type:l.FLOAT,normalized:!1,stride:h,offset:5*Float32Array.BYTES_PER_ELEMENT}}}]),n}return c(t,e),f(t,[{key:"reset",value:function(){var e=this.glw;this.curBufferIdx=0,this.curRenderOp=null,this.renderOps.length=0,e.setScissorTest(!1),e.clear()}},{key:"getShaderManager",value:function(){return this.shManager}},{key:"createCtxTexture",value:function(e){return e instanceof yt?new mt(this.glw,e):new pt(this.glw,e)}},{key:"addQuad",value:function(e){var t,n,r,o=this.fQuadBuffer,i=this.uiQuadBuffer,a=e.width,s=e.height,l=e.colorTl,u=e.colorTr,c=e.colorBl,d=e.colorBr,h=e.textureOptions,f=e.shader,p=e.shaderProps,v=e.alpha,g=e.clippingRect,y=e.tx,m=e.ty,x=e.ta,b=e.tb,w=e.tc,A=e.td,S=e.texture;if(p&&Fe(p,"$dimensions")){var T=p.$dimensions;T.width=a,T.height=s}S=null!==(t=S)&&void 0!==t?t:this.defaultTexture;var k,_,E=this.curBufferIdx,C=this.curRenderOp,R={width:a,height:s},I=f||this.defaultShader;C&&(C.shader===I&&((k=C.clippingRect)===(_=g)||null!==k&&null!==_&&k.x===_.x&&k.y===_.y&&k.width===_.width&&k.height===_.height)&&(C.shader===this.defaultShader||p&&C.shader.canBatchShaderProps(C.shaderProps,p))||(C=null)),C||(this.newRenderOp(I,p,v,R,g,E),C=this.curRenderOp);var B=null!==(n=null==h?void 0:h.flipX)&&void 0!==n&&n,N=null!==(r=null==h?void 0:h.flipY)&&void 0!==r&&r,M=0,L=0,F=1,P=1;if(S instanceof yt){var D=S.props,U=D.x,O=D.y,z=D.width,W=D.height,X=S.parentTexture.dimensions||{width:0,height:0},Y=X.width,G=void 0===Y?0:Y,j=X.height,H=void 0===j?0:j;F=(M=U/G)+z/G,P=(L=O/H)+W/H,S=S.parentTexture}if(B){var Q=[F,M];M=Q[0],F=Q[1]}if(N){var K=[P,L];L=K[0],P=K[1]}var V=this.stage.txManager.getCtxTexture(S),Z=this.addTexture(V,E);if(C=this.curRenderOp,0!==b||0!==w)o[E++]=y,o[E++]=m,o[E++]=M,o[E++]=L,i[E++]=l,o[E++]=Z,o[E++]=y+a*x,o[E++]=m+a*w,o[E++]=F,o[E++]=L,i[E++]=u,o[E++]=Z,o[E++]=y+s*b,o[E++]=m+s*A,o[E++]=M,o[E++]=P,i[E++]=c,o[E++]=Z,o[E++]=y+a*x+s*b,o[E++]=m+a*w+s*A,o[E++]=F,o[E++]=P,i[E++]=d,o[E++]=Z;else{var q=y+a*x,J=m+s*A;o[E++]=y,o[E++]=m,o[E++]=M,o[E++]=L,i[E++]=l,o[E++]=Z,o[E++]=q,o[E++]=m,o[E++]=F,o[E++]=L,i[E++]=u,o[E++]=Z,o[E++]=y,o[E++]=J,o[E++]=M,o[E++]=P,i[E++]=c,o[E++]=Z,o[E++]=q,o[E++]=J,o[E++]=F,o[E++]=P,i[E++]=d,o[E++]=Z}C.length+=24,C.numQuads++,this.curBufferIdx=E}},{key:"newRenderOp",value:function(e,t,n,r,o,i){var a=new ct(this.glw,this.options,this.quadBufferCollection,e,t,n,o,r,i,0);this.curRenderOp=a,this.renderOps.push(a)}},{key:"addTexture",value:function(e,t,n){var r=this.curRenderOp,o=r.addTexture(e);if(4294967295===o){if(n)throw new Error("Unable to add texture to render op");var i=r.shader,a=r.shaderProps,s=r.dimensions,l=r.clippingRect,u=r.alpha;return this.newRenderOp(i,a,u,s,l,t),this.addTexture(e,t,!0)}return o}},{key:"addRenderOp",value:function(e){this.renderOps.push(e),this.curRenderOp=null}},{key:"render",value:function(){var e,t=this.glw,n=this.quadBuffer,r=new Float32Array(n,0,this.curBufferIdx),o=null!==(e=this.quadBufferCollection.getBuffer("a_position"))&&void 0!==e?e:null;t.arrayBufferData(o,r,t.STATIC_DRAW),this.renderOps.forEach((function(e,t){e.draw()})),this.renderables=[]}}]),t}(at),jt=function(){function e(){p(this,e),m(this,"activeAnimations",new Set)}return f(e,[{key:"registerAnimation",value:function(e){this.activeAnimations.add(e)}},{key:"unregisterAnimation",value:function(e){this.activeAnimations.delete(e)}},{key:"update",value:function(e){this.activeAnimations.forEach((function(t){t.update(e)}))}}]),e}(),Ht=function(){function e(t){var n=this;p(this,e),m(this,"isWorkerSupported",!!self.Worker),m(this,"imageWorkersEnabled",!0),m(this,"messageManager",{}),m(this,"workers",[]),m(this,"workerIndex",0),this.isWorkerSupported&&t>0?(this.workers=this.createWorkers(t),this.workers.forEach((function(e){e.onmessage=n.handleMessage.bind(n)}))):this.imageWorkersEnabled=!1}return f(e,[{key:"handleMessage",value:function(e){var t=e.data,n=t.src,r=t.data,o=t.error,i=this.messageManager[n];if(i){var a=b(i,2),s=a[0],l=a[1];delete this.messageManager[n],o?l(new Error(o)):s(r)}}},{key:"createWorkers",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=new Blob(["\n      function hasAlphaChannel(mimeType) {\n          return (mimeType.indexOf(\"image/png\") !== -1);\n      }\n\n      async function getImage(src, premultiplyAlpha) {\n        const response = await fetch(src);\n        const blob = await response.blob();\n        const hasAlphaChannel = premultiplyAlpha ?? this.hasAlphaChannel(blob.type);\n\n        const data = await createImageBitmap(blob, {\n          premultiplyAlpha: hasAlphaChannel ? 'premultiply' : 'none',\n          colorSpaceConversion: 'none',\n          imageOrientation: 'none',\n        });\n\n        return { data, premultiplyAlpha };\n      }\n\n      self.onmessage = async (event) => {\n        const { src, premultiplyAlpha } = event.data;\n\n        try {\n          const data = await getImage(src, premultiplyAlpha);\n          self.postMessage({ src, data }, [data.data]);\n        } catch (error) {\n          self.postMessage({ src, error: error.message });\n        }\n      };\n    ".replace('"use strict";',"")],{type:"application/javascript"}),n=(window.URL?URL:webkitURL).createObjectURL(t),r=[],o=0;o<e;o++)r.push(new Worker(n));return r}},{key:"getNextWorker",value:function(){var e=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,e}},{key:"convertUrlToAbsolute",value:function(e){return new URL(e,self.location.href).href}},{key:"getImage",value:function(e,t){var n=this;return new Promise((function(r,o){try{if(n.workers){var i=n.convertUrlToAbsolute(e);n.messageManager[i]=[r,o],n.getNextWorker().postMessage({src:i,premultiplyAlpha:t})}}catch(a){o(a)}}))}}]),e}();var Qt=function(){var e=o(n().mark((function e(t){var r,o;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return r=e.sent,e.next=5,r.arrayBuffer();case 5:if(o=e.sent,-1===t.indexOf(".ktx")){e.next=8;break}return e.abrupt("return",Kt(o));case 8:return e.abrupt("return",Vt(o));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Kt=function(){var e=o(n().mark((function e(t){var r,o,i,a,s,l,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=new DataView(t),o=16909060===r.getUint32(12),i=[],a={glInternalFormat:r.getUint32(28,o),pixelWidth:r.getUint32(36,o),pixelHeight:r.getUint32(40,o),numberOfMipmapLevels:r.getUint32(56,o),bytesOfKeyValueData:r.getUint32(60,o)},s=64,s+=a.bytesOfKeyValueData,l=0;l<a.numberOfMipmapLevels;l++)u=r.getUint32(s),s+=4,i.push(r.buffer.slice(s,u)),s+=u;return e.abrupt("return",{data:{glInternalFormat:a.glInternalFormat,mipmaps:i,width:a.pixelWidth||0,height:a.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Vt=function(){var e=o(n().mark((function e(t){var r,o,i,a,s,l,u,c,d,h,f,p;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(13,36196,7,6,11,12,r=t,o=new Int32Array(r,0,13),i=o[12]+52,a=new Uint8Array(r,i),s=[],l={pixelWidth:o[7],pixelHeight:o[6],numberOfMipmapLevels:o[11]||0},u=0,c=l.pixelWidth||0,d=l.pixelHeight||0,h=0;h<l.numberOfMipmapLevels;h++)f=(c+3>>2)*(d+3>>2)*8,p=new Uint8Array(r,a.byteOffset+u,f),s.push(p),u+=f,c>>=1,d>>=1;return e.abrupt("return",{data:{glInternalFormat:36196,mipmaps:s,width:l.pixelWidth||0,height:l.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Zt=function(e){function t(e,n){var r;return p(this,t),m(u(r=i(this,t,[e])),"props",void 0),r.props=t.resolveDefaults(n),r}var r;return c(t,e),f(t,[{key:"hasAlphaChannel",value:function(e){return-1!==e.indexOf("image/png")}},{key:"getTextureData",value:(r=o(n().mark((function e(){var t,r,o,i,a,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,r=t.src,o=t.premultiplyAlpha,r){e.next=3;break}return e.abrupt("return",{data:null});case 3:if(!(r instanceof ImageData)){e.next=5;break}return e.abrupt("return",{data:r,premultiplyAlpha:o});case 5:if(!/\.(ktx|pvr)$/.test(r)){e.next=7;break}return e.abrupt("return",Qt(r));case 7:if(!this.txManager.imageWorkerManager.imageWorkersEnabled){e.next=13;break}return e.next=10,this.txManager.imageWorkerManager.getImage(r,o);case 10:return e.abrupt("return",e.sent);case 13:return e.next=15,fetch(r);case 15:return i=e.sent,e.next=18,i.blob();case 18:return a=e.sent,s=null!=o?o:this.hasAlphaChannel(a.type),e.next=22,createImageBitmap(a,{premultiplyAlpha:s?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"});case 22:return e.t0=e.sent,e.t1=s,e.abrupt("return",{data:e.t0,premultiplyAlpha:e.t1});case 25:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}],[{key:"makeCacheKey",value:function(e){var n=t.resolveDefaults(e);return!(n.src instanceof ImageData)&&"ImageTexture,".concat(n.src,",").concat(n.premultiplyAlpha)}},{key:"resolveDefaults",value:function(e){var t,n;return{src:null!==(t=e.src)&&void 0!==t?t:"",premultiplyAlpha:null===(n=e.premultiplyAlpha)||void 0===n||n}}}]),t}(vt);m(Zt,"z$__type__Props",void 0);var qt=function(e){function t(e,n){var r;return p(this,t),m(u(r=i(this,t,[e])),"props",void 0),r.props=t.resolveDefaults(n),r}var r;return c(t,e),f(t,[{key:"getTextureData",value:(r=o(n().mark((function e(){var t,r,o,i,a,s,l;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=this.props,r=t.width,o=t.height,i=r*o*4,a=new Uint8ClampedArray(i),s=0;s<i;s+=4)l=Math.floor(256*Math.random()),a[s]=l,a[s+1]=l,a[s+2]=l,a[s+3]=255;return e.abrupt("return",{data:new ImageData(a,r,o)});case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}],[{key:"makeCacheKey",value:function(e){var n=t.resolveDefaults(e);return"NoiseTexture,".concat(n.width,",").concat(n.height,",").concat(n.cacheId)}},{key:"resolveDefaults",value:function(e){var t,n,r;return{width:null!==(t=e.width)&&void 0!==t?t:128,height:null!==(n=e.height)&&void 0!==n?n:128,cacheId:null!==(r=e.cacheId)&&void 0!==r?r:0}}}]),t}(vt);m(qt,"z$__type__Props",void 0);var Jt=function(){function e(t){p(this,e),m(this,"usedMemory",0),m(this,"txConstructors",{}),m(this,"textureKeyCache",new Map),m(this,"textureIdCache",new Map),m(this,"ctxTextureCache",new WeakMap),m(this,"textureRefCountMap",new WeakMap),m(this,"imageWorkerManager",void 0),m(this,"renderer",void 0),this.imageWorkerManager=new Ht(t),this.registerTextureType("ImageTexture",Zt),this.registerTextureType("ColorTexture",gt),this.registerTextureType("NoiseTexture",qt),this.registerTextureType("SubTexture",yt)}return f(e,[{key:"registerTextureType",value:function(e,t){this.txConstructors[e]=t}},{key:"loadTexture",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=this.txConstructors[e];if(!o)throw new Error('Texture type "'.concat(e,'" is not registered'));if(void 0!==(null==r?void 0:r.id)&&this.textureIdCache.has(r.id)&&(n=this.textureIdCache.get(r.id)),!n){var i,a=null==r?void 0:r.id,s=null!==(i=null==r?void 0:r.cacheKey)&&void 0!==i?i:o.makeCacheKey(t);n=s&&this.textureKeyCache.has(s)?this.textureKeyCache.get(s):new o(this,t),a&&this.addTextureIdToCache(a,s,n)}null!=r&&r.preload&&this.getCtxTexture(n).load();return n}},{key:"addTextureIdToCache",value:function(e,t,n){var r=this.textureIdCache,o=this.textureRefCountMap;r.set(e,n),o.has(n)?o.get(n).count++:(o.set(n,{cacheKey:t,count:1}),t&&this.textureKeyCache.set(t,n))}},{key:"removeTextureIdFromCache",value:function(e){var t=this.textureIdCache,n=this.textureRefCountMap,r=t.get(e);if(r&&(t.delete(e),n.has(r))){var o=n.get(r);o.count--,0===o.count&&(n.delete(r),o.cacheKey&&this.textureKeyCache.delete(o.cacheKey))}}},{key:"getDebugInfo",value:function(){return{keyCacheSize:this.textureKeyCache.size,idCacheSize:this.textureIdCache.size}}},{key:"getCtxTexture",value:function(e){if(this.ctxTextureCache.has(e))return this.ctxTextureCache.get(e);var t=this.renderer.createCtxTexture(e);return this.ctxTextureCache.set(e,t),t}}]),e}(),$t=function(){function e(t){p(this,e),m(this,"textRenderers",void 0),this.textRenderers=t}return f(e,[{key:"addFontFace",value:function(e){for(var t in this.textRenderers){var n=this.textRenderers[t];n&&n.isFontFaceSupported(e)&&n.addFontFace(e)}}}],[{key:"resolveFontFace",value:function(e,t){return e.reduce((function(e,n){if(e)return e;var r=n[t.fontFamily];if(r){var o,i=new Set(r),a=w(i);try{for(a.s();!(o=a.n()).done;){var s=o.value;s.descriptors.stretch===t.fontStretch&&s.descriptors.style===t.fontStyle&&s.descriptors.weight===t.fontWeight||i.delete(s)}}catch(l){a.e(l)}finally{a.f()}return i.values().next().value}}),void 0)||[][0]}}]),e}(),en={x:function(e,t){e.props.x=t},y:function(e,t){e.props.y=t},width:function(e,t){e.props.width=t},height:function(e,t){e.props.height=t},color:function(e,t){e.props.color=t},zIndex:function(e,t){e.props.zIndex=t},fontFamily:function(e,t){e.props.fontFamily=t},fontWeight:function(e,t){e.props.fontWeight=t},fontStyle:function(e,t){e.props.fontStyle=t},fontStretch:function(e,t){e.props.fontStretch=t},fontSize:function(e,t){e.props.fontSize=t},text:function(e,t){e.props.text=t},textAlign:function(e,t){e.props.textAlign=t},contain:function(e,t){e.props.contain=t},offsetY:function(e,t){e.props.offsetY=t},scrollable:function(e,t){e.props.scrollable=t},scrollY:function(e,t){e.props.scrollY=t},letterSpacing:function(e,t){e.props.letterSpacing=t},lineHeight:function(e,t){e.props.lineHeight=t},maxLines:function(e,t){e.props.maxLines=t},textBaseline:function(e,t){e.props.textBaseline=t},verticalAlign:function(e,t){e.props.verticalAlign=t},overflowSuffix:function(e,t){e.props.overflowSuffix=t},debug:function(e,t){e.props.debug=t}},tn=function(){function e(t){var n=this;p(this,e),m(this,"stage",void 0),m(this,"set",void 0),this.stage=t;var r=y(y({},en),this.getPropertySetters());this.set=Object.freeze(Object.fromEntries(Object.entries(r).map((function(e){var t=b(e,2),r=t[0],o=t[1];return[r,function(e,t){e.props[r]!==t&&(o(e,t),n.stage.requestRender())}]}))))}return f(e,[{key:"setStatus",value:function(e,t,n){e.status!==t&&(e.status=t,e.emitter.emit(t,n))}},{key:"scheduleUpdateState",value:function(e){var t=this;e.updateScheduled||(e.updateScheduled=!0,queueMicrotask((function(){e.updateScheduled=!1,t.updateState(e)})))}}]),e}();var nn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;p(this,e),m(this,"iterator",void 0),m(this,"peekBuffer",[]),m(this,"_lastIndex",void 0),this.iterator=t,this.iterator=t,this._lastIndex=n-1,this.peekBuffer=[]}return f(e,[{key:"next",value:function(){var e=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return e.done?this._lastIndex=-1:this._lastIndex++,e}},{key:"peek",value:function(){if(this.peekBuffer.length>0)return this.peekBuffer[0];var e=this.iterator.next();return this.peekBuffer.push(e),e}},{key:"lastIndex",get:function(){return this._lastIndex}}]),e}();function rn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n().mark((function r(){var o,i;return n().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=t;case 1:if(!(o<e.length)){n.next=10;break}if(void 0!==(i=e.codePointAt(o))){n.next=5;break}throw new Error("Invalid Unicode code point");case 5:return n.next=7,i;case 7:o+=i<=65535?1:2,n.next=1;break;case 10:case"end":return n.stop()}}),r)}))()}function on(e,t,n,r,o,i,a,s,l,u,c,d,h,f,p,v,g,y,m){p.loaded,p.data,p.shaper;for(var x,b=s/p.data.info.size,A=l/b,S=i/b,T=u/b,k=h[e],_=(null==k?void 0:k.codepointIndex)||0,E=(null==k?void 0:k.maxX)||0,C=(null==k?void 0:k.maxY)||0,R=t,I=n,B=0,N={codepointIndex:-1,bufferOffset:-1,xStart:-1},M=p.shaper,L={letterSpacing:T},F=M.shapeText(L,new nn(rn(r,_),_)),P=-1,D=[],U=a/b,O=function(e,t,n){var r,o=0,i=w(n.shapeText(t,new nn(rn(e,0),0)));try{for(i.s();!(r=i.n()).done;){var a=r.value;a.mapped&&(o+=a.xAdvance)}}catch(s){i.e(s)}finally{i.f()}return o}(y,L,M),z=!0;z;){for(var W=(0===m||e+1<m)&&("both"!==d||g||I+A+p.maxCharHeight<=U),X=W?S:S-O,Y=0,G=I+A>=f.y1,j=I<=f.y2,H=G&&j;(x=F.next())&&!x.done;){var Q=x.value;if(e===h.length)h.push({codepointIndex:Q.cluster,maxY:C,maxX:E});else if(e>h.length)throw new Error("Unexpected lineCache length");if(32===Q.codepoint||10===Q.codepoint?-1!==N.codepointIndex&&(N.codepointIndex=-1,Y=R):-1===N.codepointIndex&&(N.codepointIndex=Q.cluster,N.bufferOffset=B,N.xStart=Y),Q.mapped){var K=R+Q.xOffset+Q.width;if("none"!==d&&K>=X&&-1!==N.codepointIndex&&N.codepointIndex<Q.cluster&&N.xStart>0){if(W){F=M.shapeText(L,new nn(rn(r,N.codepointIndex),N.codepointIndex)),B=N.bufferOffset;break}F=M.shapeText(L,new nn(rn(y,0),0)),R=N.xStart,B=N.bufferOffset}else{var V=R+Q.xOffset,Z=I+Q.yOffset;if(H){-1===P&&(P=B);var q=p.getAtlasEntry(Q.glyphId),J=q.x/p.data.common.scaleW,$=q.y/p.data.common.scaleH,ee=q.width/p.data.common.scaleW,te=q.height/p.data.common.scaleH;c[B++]=V,c[B++]=Z,c[B++]=J,c[B++]=$,c[B++]=V+Q.width,c[B++]=Z,c[B++]=J+ee,c[B++]=$,c[B++]=V,c[B++]=Z+Q.height,c[B++]=J,c[B++]=$+te,c[B++]=V+Q.width,c[B++]=Z+Q.height,c[B++]=J+ee,c[B++]=$+te}C=Math.max(C,Z+Q.height),R+=Q.xAdvance,E=Math.max(E,R)}}else if(10===Q.codepoint){if(W)break;F=M.shapeText(L,new nn(rn(y,0),0)),d="none"}}-1!==P&&(D.push({bufferStart:P,bufferEnd:B}),P=-1),R=0,I+=A,e++,N.codepointIndex=-1,Y=0,!v&&"both"===d&&I>f.y2||x&&x.done?z=!1:W||(z=!1)}if("center"===o)for(var ne="none"===d?E:S,re=0;re<D.length;re++)for(var oe=D[re],ie=(ne-(c[oe.bufferEnd-4]-c[oe.bufferStart]))/2,ae=oe.bufferStart;ae<oe.bufferEnd;ae+=4)c[ae]+=ie;else if("right"===o)for(var se="none"===d?E:S,le=0;le<D.length;le++)for(var ue=D[le],ce=se-(ue.bufferEnd===ue.bufferStart?0:c[ue.bufferEnd-4]-c[ue.bufferStart]),de=ue.bufferStart;de<ue.bufferEnd;de+=4)c[de]+=ce;return{bufferNumFloats:B,bufferNumQuads:B/16,layoutNumCharacters:x.done?r.length-_:x.value.cluster-_+1,fullyProcessed:!!x.done,maxX:E,maxY:C}}function an(e,t,n,r,o,i,a,s){var l,u,c,d=e.screen,h=e.sdf;if((c=a).x1<c.x2&&c.y1<c.y2){var f=a.x1-t,p=f+(a.x2-a.x1),v=a.y1-n+r,g=(l=v-i,u=o||1,Math.floor(l/u)*u),y=function(e,t){return Math.ceil(e/t)*t}(v+(a.y2-a.y1)+i,o||1);d.x1=f,d.y1=g,d.x2=p,d.y2=y,h.x1=f/s,h.y1=g/s,h.x2=p/s,h.y2=y/s,e.numLines=Math.ceil((y-g)/o),e.firstLineIdx=o?Math.floor(g/o):0}else d.x1=0,d.y1=0,d.x2=0,d.y2=0,h.x1=0,h.y1=0,h.x2=0,h.y2=0,e.numLines=0,e.firstLineIdx=0;e.valid=!0}var sn={x:0,y:0,width:0,height:0},ln=function(e){function t(e){var n;return p(this,t),m(u(n=i(this,t,[e])),"ssdfFontFamilies",{}),m(u(n),"msdfFontFamilies",{}),m(u(n),"sdfShader",void 0),m(u(n),"rendererBounds",void 0),n.sdfShader=n.stage.shManager.loadShader("SdfShader").shader,n.rendererBounds={x1:0,y1:0,x2:n.stage.options.appWidth,y2:n.stage.options.appHeight},n}return c(t,e),f(t,[{key:"getPropertySetters",value:function(){var e=this;return{fontFamily:function(t,n){t.props.fontFamily=n,t.trFontFace=void 0,e.invalidateLayoutCache(t)},fontWeight:function(t,n){t.props.fontWeight=n,t.trFontFace=void 0,e.invalidateLayoutCache(t)},fontStyle:function(t,n){t.props.fontStyle=n,t.trFontFace=void 0,e.invalidateLayoutCache(t)},fontStretch:function(t,n){t.props.fontStretch=n,t.trFontFace=void 0,e.invalidateLayoutCache(t)},fontSize:function(t,n){t.props.fontSize=n,e.invalidateLayoutCache(t)},text:function(t,n){t.props.text=n,e.invalidateLayoutCache(t)},textAlign:function(t,n){t.props.textAlign=n,e.invalidateLayoutCache(t)},color:function(e,t){e.props.color=t},x:function(t,n){t.props.x=n,t.elementBounds.valid&&(e.setElementBoundsX(t),!t.renderWindow.valid&&Ve(t.elementBounds,e.rendererBounds)&&e.scheduleUpdateState(t))},y:function(t,n){t.props.y=n,t.elementBounds.valid&&(e.setElementBoundsY(t),!t.renderWindow.valid&&Ve(t.elementBounds,e.rendererBounds)&&e.scheduleUpdateState(t))},contain:function(t,n){t.props.contain=n,e.invalidateLayoutCache(t)},width:function(t,n){t.props.width=n,e.invalidateLayoutCache(t)},height:function(t,n){t.props.height=n,e.invalidateLayoutCache(t)},offsetY:function(t,n){t.props.offsetY=n,e.invalidateLayoutCache(t)},scrollable:function(t,n){t.props.scrollable=n,e.invalidateLayoutCache(t)},scrollY:function(t,n){t.props.scrollY=n,e.scheduleUpdateState(t)},letterSpacing:function(t,n){t.props.letterSpacing=n,e.invalidateLayoutCache(t)},lineHeight:function(t,n){t.props.lineHeight=n,e.invalidateLayoutCache(t)},maxLines:function(t,n){t.props.maxLines=n,e.invalidateLayoutCache(t)},textBaseline:function(t,n){t.props.textBaseline=n,e.invalidateLayoutCache(t)},verticalAlign:function(t,n){t.props.verticalAlign=n,e.invalidateLayoutCache(t)},overflowSuffix:function(t,n){t.props.overflowSuffix=n,e.invalidateLayoutCache(t)},debug:function(e,t){e.props.debug=t}}}},{key:"canRenderFont",value:function(e){var t=e.fontFamily;return t in this.ssdfFontFamilies||t in this.msdfFontFamilies||"$$SDF_FAILURE_TEST$$"===t}},{key:"isFontFaceSupported",value:function(e){return e instanceof h}},{key:"addFontFace",value:function(e){var t=e.fontFamily,n="ssdf"===e.type?this.ssdfFontFamilies:"msdf"===e.type?this.msdfFontFamilies:void 0;if(n){var r=n[t];r||(r=new Set,n[t]=r),r.add(e)}else console.warn("Invalid font face type: ".concat(e.type))}},{key:"createState",value:function(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new d,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}},{key:"updateState",value:function(e){var t=this,n=e.trFontFace,r=e.textH,o=e.lineCache,i=e.debugData,a=e.forceFullLayoutCalc;if(i.updateCount++,"initialState"===e.status&&this.setStatus(e,"loading"),!n&&(n=this.resolveFontFace(e.props),e.trFontFace=n,!n)){var s="SdfTextRenderer: Could not resolve font face for family: '".concat(e.props.fontFamily,"'");return console.error(s),void this.setStatus(e,"failed",new Error(s))}if(n.loaded){n.data;var l=e.props,u=l.text,c=l.fontSize,d=l.x,h=l.y,f=l.contain,p=l.width,v=l.height,g=l.lineHeight,y=l.verticalAlign,m=l.scrollable,x=l.overflowSuffix,b=l.maxLines,w="both"===f&&m?e.props.scrollY:0,A=e.renderWindow,S=n.data.info.size,T=c/S,k=g/T;e.distanceRange=T*n.data.distanceField.distanceRange;var _=24*u.length,E=e.vertexBuffer;(!E||E.length<_)&&(E=new Float32Array(2*_));var C=e.elementBounds;if(C.valid||(this.setElementBoundsX(e),this.setElementBoundsY(e),C.valid=!0),!a&&A.valid){var R=A.screen;if(d+R.x1<=C.x1&&d+R.x2>=C.x2&&h-w+R.y1<=C.y1&&h-w+R.y2>=C.y2)return void this.setStatus(e,"loaded");A.valid=!1,this.setStatus(e,"loading")}var I=e.props,B=I.offsetY,N=I.textAlign;if(!A.valid){if(!Ve(C,this.rendererBounds))return;an(A,d,h,w,g,"both"===f?C.y2-C.y1:0,C,T)}var M=function(e,t,n,r,o,i,a,s,l){var u=Math.min(Math.max(a.firstLineIdx,0),s.length),c=0;"middle"===r?c=(t-e)/2:"bottom"===r&&(c=t-e);var d=o/i+u*t+c;if(!(l&&d>=l/i))return{sdfX:0,sdfY:d,lineIndex:u}}(S,k,0,y,B,T,A,o,r);if(M){var L=e.props.letterSpacing,F=on(M.lineIndex,M.sdfX,M.sdfY,u,N,p,v,c,g,L,E,f,o,A.sdf,n,a,m,x,b);e.bufferUploaded=!1,e.bufferNumFloats=F.bufferNumFloats,e.bufferNumQuads=F.bufferNumQuads,e.vertexBuffer=E,e.renderWindow=A,i.lastLayoutNumCharacters=F.layoutNumCharacters,i.bufferSize=E.byteLength,F.fullyProcessed&&(e.textW=F.maxX*T,e.textH=F.maxY*T),this.setStatus(e,"loaded")}else this.setStatus(e,"loaded")}else n.once("loaded",(function(){t.scheduleUpdateState(e)}))}},{key:"renderQuads",value:function(e,t,n,r){var o,i;if(e.vertexBuffer){var a,s,l=this.stage.renderer,u=e.props,c=u.fontSize,d=u.color,h=u.contain,f=u.scrollable,p=u.zIndex,v=u.debug,g="both"===h&&f?e.props.scrollY:0,y=e.textW,m=void 0===y?0:y,x=e.textH,b=void 0===x?0:x,w=e.distanceRange,A=e.vertexBuffer,S=e.bufferUploaded,T=e.trFontFace,k=e.elementBounds,_=e.webGlBuffers;if(!_){var E=l.glw,C=4*Float32Array.BYTES_PER_ELEMENT,R=E.createBuffer();e.webGlBuffers=new Wt([{buffer:R,attributes:{a_position:{name:"a_position",size:2,type:E.FLOAT,normalized:!1,stride:C,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:E.FLOAT,normalized:!1,stride:C,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,e.webGlBuffers,_=e.webGlBuffers}if(!S){var I,B,N=l.glw,M=null!==(I=null===(B=_)||void 0===B?void 0:B.getBuffer("a_textureCoordinate"))&&void 0!==I?I:null;N.arrayBufferData(M,A,N.STATIC_DRAW),e.bufferUploaded=!0}if(f&&"both"===h){k.valid;var L=(a=k,(s=sn)?(s.x=a.x1,s.y=a.y1,s.width=a.x2-a.x1,s.height=a.y2-a.y1,s):{x:a.x1,y:a.y1,width:a.x2-a.x1,height:a.y2-a.y1});n.valid?(e.clippingRect.valid=!0,n=Ze(n,L,e.clippingRect)):(e.clippingRect.valid=!0,n=qe(L,e.clippingRect))}var F=new ct(l.glw,l.options,_,this.sdfShader,{transform:t.data,color:Me(d,r),size:c/((null===(o=T.data)||void 0===o?void 0:o.info.size)||0),scrollY:g,distanceRange:w,debug:v.sdfShaderDebug},r,n,{height:b,width:m},0,p),P=null===(i=e.trFontFace)||void 0===i?void 0:i.texture,D=this.stage.txManager.getCtxTexture(P);F.addTexture(D),F.length=e.bufferNumFloats,F.numQuads=e.bufferNumQuads,l.addRenderOp(F)}}},{key:"resolveFontFace",value:function(e){return $t.resolveFontFace([this.msdfFontFamilies,this.ssdfFontFamilies],e)}},{key:"invalidateLayoutCache",value:function(e){e.renderWindow.valid=!1,e.elementBounds.valid=!1,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading"),this.scheduleUpdateState(e)}},{key:"setElementBoundsX",value:function(e){var t=e.props,n=t.x,r=t.contain,o=t.width,i=e.elementBounds;i.x1=n,i.x2="none"!==r?n+o:1/0}},{key:"setElementBoundsY",value:function(e){var t=e.props,n=t.y,r=t.contain,o=t.height,i=e.elementBounds;i.y1=n,i.y2="both"===r?n+o:1/0}}]),t}(tn);function un(e,t,n,r,o){return n*(r-1)+("bottom"!==e?.5*t:0)+Math.max(n,t)+(o||0)}var cn=function(){function e(t,n){p(this,e),m(this,"_canvas",void 0),m(this,"_context",void 0),m(this,"_settings",void 0),m(this,"renderInfo",void 0),this._canvas=t,this._context=n,this._settings=this.mergeDefaults({})}return f(e,[{key:"settings",get:function(){return this._settings},set:function(e){this._settings=this.mergeDefaults(e)}},{key:"getPrecision",value:function(){return this._settings.precision}},{key:"setFontProperties",value:function(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}},{key:"_getFontSetting",value:function(){for(var e=[this._settings.fontFace],t=[],n=0,r=e.length;n<r;n++)"serif"===e[n]||"sans-serif"===e[n]?t.push(e[n]):t.push('"'.concat(e[n],'"'));return"".concat(this._settings.fontStyle," ").concat(this._settings.fontSize*this.getPrecision(),"px ").concat(t.join(","))}},{key:"_load",value:function(){var e=this;if(document.fonts){var t=this._getFontSetting();try{if(!document.fonts.check(t,this._settings.text))return document.fonts.load(t,this._settings.text).catch((function(e){console.warn("[Lightning] Font load error",e,t)})).then((function(){document.fonts.check(t,e._settings.text)||console.warn("[Lightning] Font not found",t)}))}catch(n){console.warn("[Lightning] Can't check font loading for "+t)}}}},{key:"calculateRenderInfo",value:function(){var e={},t=this.getPrecision(),n=this._settings.paddingLeft*t,r=this._settings.paddingRight*t,o=this._settings.fontSize*t,i=null===this._settings.offsetY?null:this._settings.offsetY*t,a=(this._settings.lineHeight||o)*t,s=this._settings.w*t,l=this._settings.h*t,u=this._settings.wordWrapWidth*t,c=this._settings.cutSx*t,d=this._settings.cutEx*t,h=this._settings.cutSy*t,f=this._settings.cutEy*t,p=(this._settings.letterSpacing||0)*t,v=this._settings.textIndent*t;this.setFontProperties();var g,y=s||2048/this.getPrecision(),m=y-n;if(m<10&&(y+=10-m,m=10),u||(u=m),this._settings.textOverflow&&!this._settings.wordWrap){var x;switch(this._settings.textOverflow){case"clip":x="";break;case"ellipsis":x=this._settings.overflowSuffix;break;default:x=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,u-v,x)}if(this._settings.wordWrap)g=this.wrapText(this._settings.text,u,p,v);else for(var b=(g={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]}).l.length,w=0;w<b-1;w++)g.n.push(w);var A=g.l;if(this._settings.maxLines&&A.length>this._settings.maxLines){var S,T=A.slice(0,this._settings.maxLines),k=null;if(this._settings.overflowSuffix){var _=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,E=this.wrapText(T[T.length-1],u-_,p,v);T[T.length-1]="".concat(E.l[0]).concat(this._settings.overflowSuffix),k=[E.l.length>1?E.l[1]:""]}else k=[""];var C=A.length,R=0,I=g.n.length;for(S=this._settings.maxLines;S<C;S++)k[R]+="".concat(k[R]?" ":"").concat(A[S]),S+1<I&&g.n[S+1]&&R++;e.remainingText=k.join("\n"),e.moreTextLines=!0,A=T}else e.moreTextLines=!1,e.remainingText="";for(var B,N=0,M=[],L=0;L<A.length;L++){var F=this.measureText(A[L],p)+(0===L?v:0);M.push(F),N=Math.max(N,F)}return e.lineWidths=M,s||(y=N+n+r,m=N),a=a||o,B=l||un(this._settings.textBaseline,o,a,A.length,i),null===i&&(i=o),e.w=y,e.h=B,e.lines=A,e.precision=t,y||(y=1),B||(B=1),(c||d)&&(y=Math.min(y,d-c)),(h||f)&&(B=Math.min(B,f-h)),e.width=y,e.innerWidth=m,e.height=B,e.fontSize=o,e.cutSx=c,e.cutSy=h,e.cutEx=d,e.cutEy=f,e.lineHeight=a,e.lineWidths=M,e.offsetY=i,e.paddingLeft=n,e.paddingRight=r,e.letterSpacing=p,e.textIndent=v,e}},{key:"draw",value:function(e,t){var n,r,o=this.getPrecision(),i=(null==t?void 0:t.lines)||e.lines,a=(null==t?void 0:t.lineWidths)||e.lineWidths,s=t?un(this._settings.textBaseline,e.fontSize,e.lineHeight,t.lines.length,null===this._settings.offsetY?null:this._settings.offsetY*o):e.height;this._canvas.width=Math.min(Math.ceil(e.width+this._settings.textRenderIssueMargin),2048),this._canvas.height=Math.min(Math.ceil(s),2048),this.setFontProperties(),e.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(e.cutSx||e.cutSy)&&this._context.translate(-e.cutSx,-e.cutSy);for(var l=[],u=0,c=i.length;u<c;u++)n=0===u?e.textIndent:0,r=u*e.lineHeight+e.offsetY,"middle"==this._settings.verticalAlign?r+=(e.lineHeight-e.fontSize)/2:"bottom"==this._settings.verticalAlign&&(r+=e.lineHeight-e.fontSize),"right"===this._settings.textAlign?n+=e.innerWidth-a[u]:"center"===this._settings.textAlign&&(n+=(e.innerWidth-a[u])/2),n+=e.paddingLeft,l.push({text:i[u],x:n,y:r,w:a[u]});if(this._settings.highlight){var d=this._settings.highlightColor,h=this._settings.highlightHeight*o||1.5*e.fontSize,f=this._settings.highlightOffset*o,p=null!==this._settings.highlightPaddingLeft?this._settings.highlightPaddingLeft*o:e.paddingLeft,v=null!==this._settings.highlightPaddingRight?this._settings.highlightPaddingRight*o:e.paddingRight;this._context.fillStyle=Qe(d);for(var g=0;g<l.length;g++){var y=l[g];this._context.fillRect(y.x-p,y.y-e.offsetY+f,y.w+v+p,h)}}var m=null;this._settings.shadow&&(m=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=Qe(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*o,this._context.shadowOffsetY=this._settings.shadowOffsetY*o,this._context.shadowBlur=this._settings.shadowBlur*o),this._context.fillStyle=Qe(this._settings.textColor);for(var x=0,b=l.length;x<b;x++){var w=l[x];if(0===e.letterSpacing)this._context.fillText(w.text,w.x,w.y);else for(var A=w.text.split(""),S=w.x,T=0,k=A.length;T<k;T++)this._context.fillText(A[T],S,w.y),S+=this.measureText(A[T],e.letterSpacing)}m&&(this._context.shadowColor=m[0],this._context.shadowOffsetX=m[1],this._context.shadowOffsetY=m[2],this._context.shadowBlur=m[3]),(e.cutSx||e.cutSy)&&this._context.translate(e.cutSx,e.cutSy),this.renderInfo=e}},{key:"wrapWord",value:function(e,t,n){var r=this._context.measureText(n).width,o=e.length,i=this._context.measureText(e).width;if(i<=t)return e;var a=Math.floor(t*o/i),s=this._context.measureText(e.substring(0,a)).width+r;if(s>t)for(;a>0&&(s=this._context.measureText(e.substring(0,a)).width+r)>t;)a-=1;else for(;a<o;){if(!((s=this._context.measureText(e.substring(0,a)).width+r)<t)){a-=1;break}a+=1}return e.substring(0,a)+(t>=r?n:"")}},{key:"wrapText",value:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=e.split(/\r?\n/g),i=[],a=[],s=0;s<o.length;s++){for(var l=[],u="",c=t-r,d=o[s].split(" "),h=0;h<d.length;h++){var f=this.measureText(d[h],n),p=f+this.measureText(" ",n);0===h||p>c?(h>0&&(l.push(u),u=""),u+=d[h],c=t-f-(0===h?r:0)):(c-=p,u+=" ".concat(d[h]))}l.push(u),u="",i=i.concat(l),s<o.length-1&&a.push(i.length)}return{l:i,n:a}}},{key:"measureText",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n?e.split("").reduce((function(e,r){return e+t._context.measureText(r).width+n}),0):this._context.measureText(e).width}},{key:"mergeDefaults",value:function(e){return y({text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0},e)}}]),e}(),dn="undefined"==typeof self?globalThis:self,hn=(null===(r=dn.document)||void 0===r?void 0:r.fonts)||dn.fonts;var fn=Ke(0,0,0,0),pn=function(e){function t(e){var n;p(this,t),m(u(n=i(this,t,[e])),"canvas",void 0),m(u(n),"context",void 0),m(u(n),"rendererBounds",void 0),"undefined"!=typeof OffscreenCanvas?n.canvas=new OffscreenCanvas(0,0):n.canvas=document.createElement("canvas");var r=n.canvas.getContext("2d");return r||(n.canvas=document.createElement("canvas"),r=n.canvas.getContext("2d")),n.context=r,n.rendererBounds={x1:0,y1:0,x2:n.stage.options.appWidth,y2:n.stage.options.appHeight},n}return c(t,e),f(t,[{key:"getPropertySetters",value:function(){var e=this;return{fontFamily:function(t,n){t.props.fontFamily=n,t.fontInfo=void 0,e.invalidateLayoutCache(t)},fontWeight:function(t,n){t.props.fontWeight=n,t.fontInfo=void 0,e.invalidateLayoutCache(t)},fontStyle:function(t,n){t.props.fontStyle=n,t.fontInfo=void 0,e.invalidateLayoutCache(t)},fontStretch:function(t,n){t.props.fontStretch=n,t.fontInfo=void 0,e.invalidateLayoutCache(t)},fontSize:function(t,n){t.props.fontSize=n,t.fontInfo=void 0,e.invalidateLayoutCache(t)},text:function(t,n){t.props.text=n,e.invalidateLayoutCache(t)},textAlign:function(t,n){t.props.textAlign=n,e.invalidateLayoutCache(t)},color:function(t,n){t.props.color=n,e.invalidateLayoutCache(t)},x:function(t,n){t.props.x=n,e.invalidateVisibleWindowCache(t)},y:function(t,n){t.props.y=n,e.invalidateVisibleWindowCache(t)},contain:function(t,n){t.props.contain=n,e.invalidateLayoutCache(t)},width:function(t,n){t.props.width=n,e.invalidateLayoutCache(t)},height:function(t,n){t.props.height=n,e.invalidateLayoutCache(t)},offsetY:function(t,n){t.props.offsetY=n,e.invalidateLayoutCache(t)},scrollY:function(e,t){e.props.scrollY=t},letterSpacing:function(t,n){t.props.letterSpacing=n,e.invalidateLayoutCache(t)},lineHeight:function(t,n){t.props.lineHeight=n,e.invalidateLayoutCache(t)},maxLines:function(t,n){t.props.maxLines=n,e.invalidateLayoutCache(t)},textBaseline:function(t,n){t.props.textBaseline=n,e.invalidateLayoutCache(t)},verticalAlign:function(t,n){t.props.verticalAlign=n,e.invalidateLayoutCache(t)},overflowSuffix:function(t,n){t.props.overflowSuffix=n,e.invalidateLayoutCache(t)}}}},{key:"canRenderFont",value:function(e){return!0}},{key:"isFontFaceSupported",value:function(e){return e instanceof g}},{key:"addFontFace",value:function(e){hn.add(e.fontFace)}},{key:"createState",value:function(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new d,canvasPages:void 0,lightning2TextRenderer:new cn(this.canvas,this.context),renderWindow:void 0,visibleWindow:{x1:0,y1:0,x2:0,y2:0,valid:!1},renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,fontFaceLoadedHandler:void 0,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}},{key:"updateState",value:function(e){if("initialState"===e.status&&this.setStatus(e,"loading"),!e.fontInfo){var t=(n=e.props,r=n.fontFamily,o=n.fontStyle,i=n.fontWeight,a=n.fontStretch,s=n.fontSize,[o,i,a,"".concat(s,"px"),r].join(" "));if(e.fontInfo={cssString:t,loaded:!1},!e.fontInfo.loaded)return void hn.load(t).then(this.onFontLoaded.bind(this,e,t)).catch(this.onFontLoadError.bind(this,e,t))}var n,r,o,i,a,s;if(e.fontInfo.loaded){if(!e.renderInfo){var l=e.props.maxLines,u="both"===e.props.contain?Math.floor((e.props.height-e.props.offsetY)/e.props.lineHeight):0,c=u>0&&l>0?Math.min(u,l):Math.max(u,l);e.lightning2TextRenderer.settings={text:e.props.text,textAlign:e.props.textAlign,fontFace:e.props.fontFamily,fontSize:e.props.fontSize,fontStyle:[e.props.fontStretch,e.props.fontStyle,e.props.fontWeight].join(" "),textColor:He(e.props.color),offsetY:e.props.fontSize+e.props.offsetY,wordWrap:"none"!==e.props.contain,wordWrapWidth:"none"===e.props.contain?void 0:e.props.width,letterSpacing:e.props.letterSpacing,lineHeight:e.props.lineHeight,maxLines:c,textBaseline:e.props.textBaseline,verticalAlign:e.props.verticalAlign,overflowSuffix:e.props.overflowSuffix},e.renderInfo=e.lightning2TextRenderer.calculateRenderInfo(),e.textH=e.renderInfo.lineHeight*e.renderInfo.lines.length,e.textW=e.renderInfo.width,e.renderWindow=void 0}var d,h,f,p,v=e.props,g=v.x,y=v.y,m=v.width,x=v.height,b=v.scrollY,A=v.contain,S=e.visibleWindow,T=e.renderWindow,k=e.canvasPages;if(!S.valid){var _=Ke(g,y,"none"!==A?g+m:1/0,"both"===A?y+x:1/0,fn);d=this.rendererBounds,h=_,f=S,(p=Ke(Math.max(d.x1,h.x1),Math.max(d.y1,h.y1),Math.min(d.x2,h.x2),Math.min(d.y2,h.y2),f)).x1<p.x2&&p.y1<p.y2||Ke(0,0,0,0,p),S.valid=!0}var E=S.y2-S.y1,C=Math.ceil(E/e.renderInfo.lineHeight);if(0===E)return k=void 0,T=void 0,void this.setStatus(e,"loaded");if(T&&k){var R=g+T.x1,I=y-b+T.y1,B=g+T.x2,N=y-b+T.y2;if(R<=S.x1&&B>=S.x2&&I<=S.y1&&N>=S.y2)return void this.setStatus(e,"loaded");N<S.y2?(T.y1+=C*e.renderInfo.lineHeight,T.y2+=C*e.renderInfo.lineHeight,k.push(k.shift()),k[2].lineNumStart=k[1].lineNumStart+C,k[2].lineNumEnd=k[2].lineNumStart+C,k[2].valid=!1):I>S.y1&&(T.y1-=C*e.renderInfo.lineHeight,T.y2-=C*e.renderInfo.lineHeight,k.unshift(k.pop()),k[0].lineNumStart=k[1].lineNumStart-C,k[0].lineNumEnd=k[0].lineNumStart+C,k[0].valid=!1)}else{var M,L,F,P=e.renderInfo.lineHeight*C,D=Math.ceil(b/P),U=D*C,O=U-C,z=U+C;k=[{texture:null===(M=k)||void 0===M?void 0:M[0].texture,lineNumStart:O,lineNumEnd:O+C,valid:!1},{texture:null===(L=k)||void 0===L?void 0:L[1].texture,lineNumStart:U,lineNumEnd:U+C,valid:!1},{texture:null===(F=k)||void 0===F?void 0:F[2].texture,lineNumStart:z,lineNumEnd:z+C,valid:!1}],e.canvasPages=k;var W=D*P;T={x1:0,y1:W-P,x2:m,y2:W+2*P}}e.renderWindow=T,performance.now();var X,Y=w(k);try{for(Y.s();!(X=Y.n()).done;){var G=X.value;G.valid||(G.lineNumStart<0?(G.texture=this.stage.txManager.loadTexture("ImageTexture",{src:""}),G.valid=!0):(e.lightning2TextRenderer.draw(e.renderInfo,{lines:e.renderInfo.lines.slice(G.lineNumStart,G.lineNumEnd),lineWidths:e.renderInfo.lineWidths.slice(G.lineNumStart,G.lineNumEnd)}),0!==this.canvas.width&&0!==this.canvas.height&&(G.texture=this.stage.txManager.loadTexture("ImageTexture",{src:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)},{preload:!0})),G.valid=!0))}}catch(j){Y.e(j)}finally{Y.f()}this.setStatus(e,"loaded")}}},{key:"renderQuads",value:function(e,t,n,r){var o=this.stage,i=e.canvasPages,a=e.textW,s=void 0===a?0:a,l=e.textH,u=void 0===l?0:l,c=e.renderWindow;if(i&&c){var d=e.props,h=d.x,f=d.y,p=d.scrollY,v=d.contain,g=d.width,y=d.height,m={x:h,y:f,width:"none"!==v?g:s,height:"both"===v?y:u};Ze({x:0,y:0,width:o.options.appWidth,height:o.options.appHeight},m);var x,b,w,A,S,T,k=(c.y2-c.y1)/3,_=e.props,E=_.zIndex,C=_.color,R=r*((255&C)/255),I=Le(4294967295,R);if(i[0].valid)this.stage.renderer.addQuad({alpha:R,clippingRect:n,colorBl:I,colorBr:I,colorTl:I,colorTr:I,width:(null===(x=i[0].texture)||void 0===x||null===(x=x.dimensions)||void 0===x?void 0:x.width)||0,height:(null===(b=i[0].texture)||void 0===b||null===(b=b.dimensions)||void 0===b?void 0:b.height)||0,texture:i[0].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:E,tx:t.tx,ty:t.ty-p+c.y1,ta:t.ta,tb:t.tb,tc:t.tc,td:t.td});if(i[1].valid)this.stage.renderer.addQuad({alpha:R,clippingRect:n,colorBl:I,colorBr:I,colorTl:I,colorTr:I,width:(null===(w=i[1].texture)||void 0===w||null===(w=w.dimensions)||void 0===w?void 0:w.width)||0,height:(null===(A=i[1].texture)||void 0===A||null===(A=A.dimensions)||void 0===A?void 0:A.height)||0,texture:i[1].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:E,tx:t.tx,ty:t.ty-p+c.y1+k,ta:t.ta,tb:t.tb,tc:t.tc,td:t.td});if(i[2].valid)this.stage.renderer.addQuad({alpha:R,clippingRect:n,colorBl:I,colorBr:I,colorTl:I,colorTr:I,width:(null===(S=i[2].texture)||void 0===S||null===(S=S.dimensions)||void 0===S?void 0:S.width)||0,height:(null===(T=i[2].texture)||void 0===T||null===(T=T.dimensions)||void 0===T?void 0:T.height)||0,texture:i[2].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:E,tx:t.tx,ty:t.ty-p+c.y1+k+k,ta:t.ta,tb:t.tb,tc:t.tc,td:t.td})}}},{key:"invalidateVisibleWindowCache",value:function(e){e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}},{key:"invalidateLayoutCache",value:function(e){e.renderInfo=void 0,e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}},{key:"onFontLoaded",value:function(e,t){var n;t===(null===(n=e.fontInfo)||void 0===n?void 0:n.cssString)&&e.fontInfo&&(e.fontInfo.loaded=!0,this.scheduleUpdateState(e))}},{key:"onFontLoadError",value:function(e,t,n){var r;t===(null===(r=e.fontInfo)||void 0===r?void 0:r.cssString)&&e.fontInfo&&(e.fontInfo.loaded=!0,console.error("CanvasTextRenderer: Error loading font '".concat(e.fontInfo.cssString,"'"),n),this.scheduleUpdateState(e))}}]),t}(tn),vn=function(e){function t(e){var n;p(this,t),m(u(n=i(this,t)),"options",void 0),m(u(n),"animationManager",void 0),m(u(n),"txManager",void 0),m(u(n),"fontManager",void 0),m(u(n),"textRenderers",void 0),m(u(n),"shManager",void 0),m(u(n),"renderer",void 0),m(u(n),"root",void 0),m(u(n),"deltaTime",0),m(u(n),"lastFrameTime",0),m(u(n),"currentFrameTime",0),m(u(n),"fpsNumFrames",0),m(u(n),"fpsElapsedTime",0),m(u(n),"renderRequested",!1),m(u(n),"contextSpy",null),n.options=e;var r=e.canvas,o=e.clearColor,a=e.rootId,s=e.debug,l=e.appWidth,c=e.appHeight,d=e.enableContextSpy,h=e.numImageWorkers;n.txManager=new Jt(h),n.shManager=new zt,n.animationManager=new jt,n.contextSpy=d?new Xt:null,null!=s&&s.monitorTextureCache&&setInterval((function(){n.txManager;var e=n.txManager.getDebugInfo();console.log("Texture ID Cache Size: ",e.idCacheSize),console.log("Texture Key Cache Size: ",e.keyCacheSize)}),1e3),n.renderer=new Gt({stage:u(n),canvas:r,pixelRatio:e.devicePhysicalPixelRatio*e.deviceLogicalPixelRatio,clearColor:null!=o?o:4278190080,bufferMemory:2e6,txManager:n.txManager,shManager:n.shManager,contextSpy:n.contextSpy}),n.txManager.renderer=n.renderer,n.textRenderers={canvas:new pn(u(n)),sdf:new ln(u(n))},n.fontManager=new $t(n.textRenderers);var f,v=new tt(u(n),{id:a,x:0,y:0,width:l,height:c,alpha:1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null});return n.root=v,f=u(n),requestAnimationFrame((function e(){f.updateAnimations(),f.hasSceneUpdates()?(f.drawFrame(),requestAnimationFrame(e)):setTimeout(e,16.666666666666668)})),n}return c(t,e),f(t,[{key:"updateAnimations",value:function(){var e=this.animationManager;this.root&&(this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=performance?performance.now():Date.now(),this.deltaTime=this.lastFrameTime?this.currentFrameTime-this.lastFrameTime:100/6,this.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime}),e.update(this.deltaTime))}},{key:"hasSceneUpdates",value:function(){return!!this.root.updateType||this.renderRequested}},{key:"drawFrame",value:function(){var e=this.renderer,t=this.renderRequested;0!==this.root.updateType&&this.root.update(this.deltaTime,this.root.clippingRect),null==e||e.reset(),this.addQuads(this.root),null==e||e.render(),t&&(this.renderRequested=!1);var n=this.options.fpsUpdateInterval;if(n&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=n)){var r,o,i,a=Math.round(1e3*this.fpsNumFrames/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.emit("fpsUpdate",{fps:a,contextSpyData:null!==(r=null===(o=this.contextSpy)||void 0===o?void 0:o.getData())&&void 0!==r?r:null}),null===(i=this.contextSpy)||void 0===i||i.reset()}}},{key:"addQuads",value:function(e){this.renderer&&e.globalTransform,e.isRenderable&&e.renderQuads(this.renderer);for(var t=0;t<e.children.length;t++){var n=e.children[t];n&&(0!==(null==n?void 0:n.worldAlpha)&&this.addQuads(n))}}},{key:"requestRender",value:function(){this.renderRequested=!0}},{key:"resolveTextRenderer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=!1;if(t){var r=this.textRenderers[t];r?r.canRenderFont(e)||(console.warn("Cannot use override text renderer '".concat(t,"' for font"),e),t=null,n=!0):(console.warn("Text renderer override '".concat(t,"' not found.")),t=null,n=!0)}if(!t){for(var o=0,i=Object.entries(this.textRenderers);o<i.length;o++){var a=b(i[o],2),s=a[0],l=a[1];if("canvas"!==s&&l.canRenderFont(e)){t=s;break}}t||(t="canvas")}return n&&console.warn("Falling back to text renderer ".concat(String(t))),this.textRenderers[t]}}]),t}(d),gn=function(e){function n(e,t){var r;p(this,n),m(u(r=i(this,n,[e,t])),"textRenderer",void 0),m(u(r),"trState",void 0),m(u(r),"_textRendererOverride",null),m(u(r),"onTextLoaded",(function(){var e=u(r).contain,t=r.trState.props.width,n=r.trState.props.height,o=r.trState.textW||0,i=r.trState.textH||0;"both"===e?(r.props.width=t,r.props.height=n):"width"===e?(r.props.width=t,r.props.height=i):"none"===e&&(r.props.width=o,r.props.height=i),r.updateLocalTransform(),r.stage.requestRender(),r.emit("loaded",{type:"text",dimensions:{width:r.trState.textW||0,height:r.trState.textH||0}})})),m(u(r),"onTextFailed",(function(e,t){r.emit("failed",{type:"text",error:t})})),r._textRendererOverride=t.textRendererOverride;var o=r.resolveTextRendererAndState({x:r.absX,y:r.absY,width:t.width,height:t.height,textAlign:t.textAlign,color:t.color,zIndex:t.zIndex,contain:t.contain,scrollable:t.scrollable,scrollY:t.scrollY,offsetY:t.offsetY,letterSpacing:t.letterSpacing,debug:t.debug,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStretch:t.fontStretch,fontStyle:t.fontStyle,fontWeight:t.fontWeight,text:t.text,lineHeight:t.lineHeight,maxLines:t.maxLines,textBaseline:t.textBaseline,verticalAlign:t.verticalAlign,overflowSuffix:t.overflowSuffix},void 0),a=o.resolvedTextRenderer,s=o.textRendererState;return r.textRenderer=a,r.trState=s,r}return c(n,e),f(n,[{key:"width",get:function(){return this.trState.props.width},set:function(e){this.textRenderer.set.width(this.trState,e)}},{key:"height",get:function(){return this.trState.props.height},set:function(e){this.textRenderer.set.height(this.trState,e)}},{key:"color",get:function(){return this.trState.props.color},set:function(e){this.textRenderer.set.color(this.trState,e)}},{key:"text",get:function(){return this.trState.props.text},set:function(e){this.textRenderer.set.text(this.trState,e),this.checkIsRenderable()}},{key:"textRendererOverride",get:function(){return this._textRendererOverride},set:function(e){this._textRendererOverride=e;var t=this.resolveTextRendererAndState(this.trState.props,this.trState),n=t.resolvedTextRenderer,r=t.textRendererState;this.textRenderer=n,this.trState=r}},{key:"fontSize",get:function(){return this.trState.props.fontSize},set:function(e){this.textRenderer.set.fontSize(this.trState,e)}},{key:"fontFamily",get:function(){return this.trState.props.fontFamily},set:function(e){this.textRenderer.set.fontFamily(this.trState,e)}},{key:"fontStretch",get:function(){return this.trState.props.fontStretch},set:function(e){this.textRenderer.set.fontStretch(this.trState,e)}},{key:"fontStyle",get:function(){return this.trState.props.fontStyle},set:function(e){this.textRenderer.set.fontStyle(this.trState,e)}},{key:"fontWeight",get:function(){return this.trState.props.fontWeight},set:function(e){this.textRenderer.set.fontWeight(this.trState,e)}},{key:"textAlign",get:function(){return this.trState.props.textAlign},set:function(e){this.textRenderer.set.textAlign(this.trState,e)}},{key:"contain",get:function(){return this.trState.props.contain},set:function(e){this.textRenderer.set.contain(this.trState,e)}},{key:"scrollable",get:function(){return this.trState.props.scrollable},set:function(e){this.textRenderer.set.scrollable(this.trState,e)}},{key:"scrollY",get:function(){return this.trState.props.scrollY},set:function(e){this.textRenderer.set.scrollY(this.trState,e)}},{key:"offsetY",get:function(){return this.trState.props.offsetY},set:function(e){this.textRenderer.set.offsetY(this.trState,e)}},{key:"letterSpacing",get:function(){return this.trState.props.letterSpacing},set:function(e){this.textRenderer.set.letterSpacing(this.trState,e)}},{key:"lineHeight",get:function(){return this.trState.props.lineHeight},set:function(e){this.textRenderer.set.lineHeight&&this.textRenderer.set.lineHeight(this.trState,e)}},{key:"maxLines",get:function(){return this.trState.props.maxLines},set:function(e){this.textRenderer.set.maxLines&&this.textRenderer.set.maxLines(this.trState,e)}},{key:"textBaseline",get:function(){return this.trState.props.textBaseline},set:function(e){this.textRenderer.set.textBaseline&&this.textRenderer.set.textBaseline(this.trState,e)}},{key:"verticalAlign",get:function(){return this.trState.props.verticalAlign},set:function(e){this.textRenderer.set.verticalAlign&&this.textRenderer.set.verticalAlign(this.trState,e)}},{key:"overflowSuffix",get:function(){return this.trState.props.overflowSuffix},set:function(e){this.textRenderer.set.overflowSuffix&&this.textRenderer.set.overflowSuffix(this.trState,e)}},{key:"debug",get:function(){return this.trState.props.debug},set:function(e){this.textRenderer.set.debug(this.trState,e)}},{key:"update",value:function(e,r){t(l(n.prototype),"update",this).call(this,e,r),this.globalTransform,this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}},{key:"checkIsRenderable",value:function(){return!!t(l(n.prototype),"checkIsRenderable",this).call(this)||(""!==this.trState.props.text?this.isRenderable=!0:this.isRenderable=!1)}},{key:"renderQuads",value:function(e){this.globalTransform,this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha)}},{key:"resolveTextRendererAndState",value:function(e,t){var n=this.stage.resolveTextRenderer(e,this._textRendererOverride),r=n.createState(e);return t&&["loading","loaded","failed"].forEach((function(e){t.emitter.off(e)})),r.emitter.on("loaded",this.onTextLoaded),r.emitter.on("failed",this.onTextFailed),n.scheduleUpdateState(r),{resolvedTextRenderer:n,textRendererState:r}}}]),n}(tt),yn=function(e){function t(e,n,r){return p(this,t),i(this,t,[e,n,r,new gn(r,{id:rt(),x:e.x,y:e.y,width:e.width,height:e.height,alpha:e.alpha,clipping:e.clipping,color:e.color,colorTop:e.colorTop,colorBottom:e.colorBottom,colorLeft:e.colorLeft,colorRight:e.colorRight,colorTl:e.colorTl,colorTr:e.colorTr,colorBl:e.colorBl,colorBr:e.colorBr,zIndex:e.zIndex,zIndexLocked:e.zIndexLocked,scaleX:e.scaleX,scaleY:e.scaleY,mountX:e.mountX,mountY:e.mountY,mount:e.mount,pivot:e.pivot,pivotX:e.pivotX,pivotY:e.pivotY,rotation:e.rotation,text:e.text,fontSize:e.fontSize,fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontStretch:e.fontStretch,fontStyle:e.fontStyle,contain:e.contain,scrollable:e.scrollable,letterSpacing:e.letterSpacing,textAlign:e.textAlign,scrollY:e.scrollY,offsetY:e.offsetY,textRendererOverride:e.textRendererOverride,lineHeight:e.lineHeight,maxLines:e.maxLines,textBaseline:e.textBaseline,verticalAlign:e.verticalAlign,overflowSuffix:e.overflowSuffix,debug:e.debug,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null})])}return c(t,e),f(t,[{key:"text",get:function(){return this.coreNode.text},set:function(e){this.coreNode.text=e}},{key:"textRendererOverride",get:function(){return this.coreNode.textRendererOverride},set:function(e){this.coreNode.textRendererOverride=e}},{key:"fontSize",get:function(){return this.coreNode.fontSize},set:function(e){this.coreNode.fontSize=e}},{key:"fontFamily",get:function(){return this.coreNode.fontFamily},set:function(e){this.coreNode.fontFamily=e}},{key:"fontWeight",get:function(){return this.coreNode.fontWeight},set:function(e){this.coreNode.fontWeight=e}},{key:"fontStretch",get:function(){return this.coreNode.fontStretch},set:function(e){this.coreNode.fontStretch=e}},{key:"fontStyle",get:function(){return this.coreNode.fontStyle},set:function(e){this.coreNode.fontStyle=e}},{key:"textAlign",get:function(){return this.coreNode.textAlign},set:function(e){this.coreNode.textAlign=e}},{key:"contain",get:function(){return this.coreNode.contain},set:function(e){this.coreNode.contain=e}},{key:"scrollable",get:function(){return this.coreNode.scrollable},set:function(e){this.coreNode.scrollable=e}},{key:"scrollY",get:function(){return this.coreNode.scrollY},set:function(e){this.coreNode.scrollY=e}},{key:"offsetY",get:function(){return this.coreNode.offsetY},set:function(e){this.coreNode.offsetY=e}},{key:"letterSpacing",get:function(){return this.coreNode.letterSpacing},set:function(e){this.coreNode.letterSpacing=e}},{key:"lineHeight",get:function(){return this.coreNode.lineHeight},set:function(e){e&&(this.coreNode.lineHeight=e)}},{key:"maxLines",get:function(){return this.coreNode.maxLines},set:function(e){e&&(this.coreNode.maxLines=e)}},{key:"textBaseline",get:function(){return this.coreNode.textBaseline},set:function(e){e&&(this.coreNode.textBaseline=e)}},{key:"verticalAlign",get:function(){return this.coreNode.verticalAlign},set:function(e){e&&(this.coreNode.verticalAlign=e)}},{key:"overflowSuffix",get:function(){return this.coreNode.overflowSuffix},set:function(e){e&&(this.coreNode.overflowSuffix=e)}},{key:"debug",get:function(){return this.coreNode.debug},set:function(e){this.coreNode.debug=e}}]),t}(ot),mn=function(e,t,n){var r=Promise.resolve();return r.then((function(){return e()})).catch((function(e){var t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}))};function xn(e,t){return bn.apply(this,arguments)}function bn(){return(bn=o(n().mark((function e(t,r){var o,i,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("Loading core extension",t),e.next=4,mn((function(){return s.import(t)}),void 0);case 4:o=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error("The core extension module at '".concat(t,"' could not be loaded.")),console.error(e.t0),e.abrupt("return");case 12:if(o.default){e.next=15;break}return console.error("The core extension module at '".concat(t,"' does not have a default export.")),e.abrupt("return");case 15:if(i=o.default,!(i.prototype instanceof x)){e.next=29;break}return a=new i,e.prev=18,e.next=21,a.run(r);case 21:e.next=27;break;case 23:e.prev=23,e.t1=e.catch(18),console.error("The core extension at '".concat(t,"' threw an error.")),console.error(e.t1);case 27:e.next=30;break;case 29:console.error("The core extension at '".concat(t,"' does not extend CoreExtension."));case 30:case"end":return e.stop()}}),e,null,[[0,7],[18,23]])})))).apply(this,arguments)}var wn,An,Sn=function(){function e(){p(this,e),m(this,"root",null),m(this,"stage",null),m(this,"rendererMain",null)}var t;return f(e,[{key:"init",value:(t=o(n().mark((function e(t,r,o){var i,a=this;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stage=new vn({rootId:rt(),appWidth:r.appWidth,appHeight:r.appHeight,deviceLogicalPixelRatio:r.deviceLogicalPixelRatio,devicePhysicalPixelRatio:r.devicePhysicalPixelRatio,clearColor:r.clearColor,canvas:o,fpsUpdateInterval:r.fpsUpdateInterval,enableContextSpy:r.enableContextSpy,numImageWorkers:r.numImageWorkers,debug:{monitorTextureCache:!1}}),this.rendererMain=t,this.stage.root,i=new ot(t.resolveNodeDefaults({}),this.rendererMain,this.stage,this.stage.root),this.root=i,i.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,i)),this.onCreateNode(i),!r.coreExtensionModule){e.next=10;break}return e.next=10,xn(r.coreExtensionModule,this.stage);case 10:this.stage.on("fpsUpdate",(function(e,t){a.onFpsUpdate(t)})),this.stage.on("frameTick",(function(e,t){a.onFrameTick(t)}));case 12:case"end":return e.stop()}}),e,this)}))),function(e,n,r){return t.apply(this,arguments)})},{key:"createNode",value:function(e){this.rendererMain,this.stage;var t=new ot(e,this.rendererMain,this.stage);return t.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,t)),this.onCreateNode(t),t}},{key:"createTextNode",value:function(e){this.rendererMain,this.stage;var t=new yn(e,this.rendererMain,this.stage);return t.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,t)),this.onCreateNode(t),t}},{key:"destroyNode",value:function(e){e.destroy()}},{key:"releaseTexture",value:function(e){this.stage.txManager.removeTextureIdFromCache(e)}},{key:"getRootNode",value:function(){return this.root,this.root}},{key:"onCreateNode",value:function(e){throw new Error("Method not implemented.")}},{key:"onBeforeDestroyNode",value:function(e){throw new Error("Method not implemented.")}},{key:"onFpsUpdate",value:function(e){throw new Error("Method not implemented.")}},{key:"onFrameTick",value:function(e){throw new Error("Method not implemented.")}}]),e}();function Tn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Sn;return wn=new Oe(e,e.rootId||"app",t),An=wn.createShader.bind(wn),wn}var kn=function(e){function t(e){var n;return p(this,t),(n=i(this,t))._parent=e,n}return c(t,e),f(t,[{key:"selected",get:function(){return this[this._parent.selected||0]}},{key:"firstChild",get:function(){return this[0]}},{key:"insert",value:function(e,t){if(t){var n=this.indexOf(t);this.splice(n,0,e)}else this.push(e);e.parent=this._parent,this._parent._isDirty=!0}},{key:"remove",value:function(e){var t=this.indexOf(e);t>=0&&this.splice(t,1)}}]),t}(e(Array)),_n={debug:!1,animationsEnabled:!0,animationSettings:{duration:250,easing:"ease-in-out"},fontSettings:{fontFamily:"Ubuntu",fontSize:100}};function En(e){return"function"==typeof e}function Cn(e){return Array.isArray(e)}var Rn=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p(this,t),Cn(r)?n=i(this,t,v(r)):n=i(this,t,"string"==typeof r?[r]:v(Object.entries(r).filter((function(e){var t=b(e,2);t[0];return t[1]})).map((function(e){return b(e,1)[0]})))),n.onChange=e,a(n,u(n))}return c(t,e),f(t,[{key:"has",value:function(e){return this.indexOf(e)>=0}},{key:"is",value:function(e){return this.indexOf(e)>=0}},{key:"add",value:function(e){this.push(e),this.onChange()}},{key:"toggle",value:function(e){this.has(e)?this.remove(e):this.add(e)}},{key:"remove",value:function(e){var t=this.indexOf(e);t>=0&&(this.splice(t,1),this.onChange())}}]),t}(e(Array));var In=_n.animationSettings;function Bn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{set:function(t){"number"==typeof t&&(t={width:t,color:255}),this.effects=y(y({},this.effects||{}),m({},"border".concat(e),t)),this["_border".concat(e)]=t},get:function(){return this["_border".concat(e)]}}}var Nn=["alpha","color","colorTop","colorRight","colorLeft","colorBottom","colorTl","colorTr","colorBl","colorBr","height","fontSize","lineHeight","mount","mountX","mountY","pivot","pivotX","pivotY","rotation","scale","width","worldX","worldY","x","y","zIndex","zIndexLocked"],Mn=["clipping","contain","fontFamily","fontStretch","fontStyle","fontWeight","letterSpacing","maxLines","offsetY","overflowSuffix","scrollable","scrollY","src","text","textAlign","textBaseline","textOverflow","texture","verticalAlign","wordWrap"],Ln=function(e){function t(e){var n;p(this,t),(n=i(this,t))._animationQueue=[],n._animationRunning=!1,n.name=e,n.rendered=!1,n.autofocus=!1,n._renderProps={x:0,y:0},n.children=new kn(u(n));var r,o=w(Nn);try{var a=function(){var e=r.value;Object.defineProperty(u(n),e,{get:function(){return this.lng&&this.lng[e]||this["_".concat(e)]},set:function(t){this["_".concat(e)]=t,this._sendToLightningAnimatable(e,t)}})};for(o.s();!(r=o.n()).done;)a()}catch(d){o.e(d)}finally{o.f()}var s,l=w(Mn);try{var c=function(){var e=s.value;Object.defineProperty(u(n),e,{get:function(){return this.lng&&this.lng[e]||this["_".concat(e)]},set:function(t){this["_".concat(e)]=t,this._sendToLightning(e,t)}})};for(l.s();!(s=l.n()).done;)c()}catch(d){l.e(d)}finally{l.f()}return Object.defineProperties(u(n),{borderRadius:{set:function(e){this._borderRadius=e,this.effects=y(y({},this.effects||{}),{radius:{radius:e}})},get:function(){return this._borderRadius}},border:Bn(),borderLeft:Bn("Left"),borderRight:Bn("Right"),borderTop:Bn("Top"),borderBottom:Bn("Bottom")}),Object.defineProperties(u(n),{linearGradient:{set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._linearGradient=e,this.effects=y(y({},this.effects||{}),{linearGradient:e})},get:function(){return this._linearGradient}}}),n}var r;return c(t,e),f(t,[{key:"effects",get:function(){return this._effects},set:function(e){this._effects=e,this.shader=function(e){for(var t=[],n=0,r=Object.entries(e);n<r.length;n++){var o=b(r[n],2),i=o[0],a=o[1];t.push({type:i,props:a})}return An("DynamicShader",{effects:t})}(e)}},{key:"parent",get:function(){return this._parent},set:function(e){var t;(this._parent=e,this.rendered&&this.lng)&&(this.lng.parent=null!==(t=null==e?void 0:e.lng)&&void 0!==t?t:null)}},{key:"shader",get:function(){return this._shader},set:function(e){Cn(e)?this._shader=An.apply(void 0,v(e)):this._shader=e,this._sendToLightning("shader",this._shader)}},{key:"_sendToLightningAnimatable",value:function(e,t){if(this.lng){if(_n.animationsEnabled&&this.transition&&(!0===this.transition||this.transition[e])){var n=!0===this.transition||!0===this.transition[e]?void 0:this.transition[e];return this.animate(m({},e,t),n).start()}this.lng[e]=t}else this._renderProps[e]=t}},{key:"_sendToLightning",value:function(e,t){this.rendered&&this.lng?this.lng[e]=t:this._renderProps[e]=t}},{key:"animate",value:function(e,t){return this.lng,this.lng.animate(e,t||this.animationSettings)}},{key:"chain",value:function(e,t){return this._animationRunning&&(this._animationQueue=[],this._animationRunning=!1),t?this._animationQueueSettings=t:this._animationQueueSettings||(this._animationQueueSettings=t||this.animationSettings),t=t||this._animationQueueSettings,this._animationQueue.push({props:e,animationSettings:t}),this}},{key:"start",value:(r=o(n().mark((function e(){var t;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this._animationQueue.shift();case 1:if(!t){e.next=8;break}return this._animationRunning=!0,e.next=5,this.animate(t.props,t.animationSettings).start().waitUntilStopped();case 5:t=this._animationQueue.shift(),e.next=1;break;case 8:this._animationRunning=!1,this._animationQueueSettings=void 0;case 10:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"setFocus",value:function(){var e=this;if(this.rendered){if(void 0!==this.forwardFocus)if(En(this.forwardFocus)){if(!1!==this.forwardFocus.call(this,this))return}else{var n="number"==typeof this.forwardFocus?this.forwardFocus:null;if(null!==n&&n<this.children.length){var r=this.children[n];return void(r instanceof t&&r.setFocus())}}queueMicrotask((function(){return Be(e)}))}else this.autofocus=!0}},{key:"isTextNode",value:function(){return"text"===this.name}},{key:"_resizeOnTextLoad",value:function(){var e=this;this.lng.on("loaded",(function(t,n){if("text"===n.type){var r=n.dimensions;if(r.width===e.width&&r.height===e.height)return;"width"===e.contain||(e.width=r.width),e.height=r.height,e.parent.updateLayout(e,r)}}))}},{key:"getText",value:function(){return this.children.map((function(e){return e.text})).join("")}},{key:"destroy",value:function(){this.lng&&wn.destroyNode(this.lng)}},{key:"style",get:function(){return this._style},set:function(e){var t=this,n=Cn(e),r=n?e.filter((function(e){return e})):[e];r.forEach((function(e){for(var n in e)void 0===t[n]&&(t[n]=e[n])})),this._style=n?Object.assign.apply(Object,[{}].concat(v(r.reverse()))):e}},{key:"hasChildren",get:function(){return this.children.length>0}},{key:"states",get:function(){return this._states=this._states||new Rn(this._stateChanged.bind(this)),this._states},set:function(e){this._states=new Rn(this._stateChanged.bind(this),e),this.rendered&&this._stateChanged()}},{key:"animationSettings",get:function(){return this._animationSettings||In},set:function(e){this._animationSettings=e}},{key:"updateLayout",value:function(e,t){if(this.hasChildren){var n;if(En(this.onBeforeLayout)&&this.onBeforeLayout.call(this,e,t),"flex"===this.display)if(function(e){for(var t=[],n=0;n<e.children.length;n++){var r=e.children[n];if("TextNode"!==r.name){if("text"===r.name&&!r.width&&!r.height)return!1;t.push(r)}}var o=t.length,i="row"===(e.flexDirection||"row"),a=i?"width":"height",s=i?"height":"width",l=i?"marginLeft":"marginTop",u=i?"marginRight":"marginBottom",c=i?"x":"y",d=i?"y":"x",h=e[a]||0,f=e[s]||0,p=e.gap||0,v=e.justifyContent||"flexStart",g=e.alignItems,y=0;["center","spaceBetween","spaceEvenly"].includes(v)&&(y=t.reduce((function(e,t){return e+(t[a]||0)}),0));var m=f&&g?function(e){"flexStart"===g?e[d]=0:"center"===g?e[d]=(f-(e[s]||0))/2:"flexEnd"===g&&(e[d]=f-(e[s]||0))}:function(e){return e};if("flexStart"===v){var x=0;if(t.forEach((function(e){e[c]=x+(e[l]||0),x+=(e[a]||0)+p+(e[l]||0)+(e[u]||0),m(e)})),e._autosized){var b=x-p;if(b!==e[a])return e[a]=b,!0}}else if("flexEnd"===v)for(var w=h,A=o-1;A>=0;A--){var S=t[A];S[c]=w-(S[a]||0)-(S[u]||0),w-=(S[a]||0)+p+(S[l]||0)+(S[u]||0),m(S)}else if("center"===v){var T=(h-(y+p*(o-1)))/2;t.forEach((function(e){e[c]=T,T+=(e[a]||0)+p,m(e)}))}else if("spaceBetween"===v){var k=(h-y)/(o-1),_=0;t.forEach((function(e){e[c]=_,_+=(e[a]||0)+k,m(e)}))}else if("spaceEvenly"===v){var E=(h-y)/(o+1),C=E;t.forEach((function(e){e[c]=C,C+=(e[a]||0)+E,m(e)}))}return!1}(this))null===(n=this.parent)||void 0===n||n.updateLayout();En(this.onLayout)&&this.onLayout.call(this,e,t)}}},{key:"_stateChanged",value:function(){var e,t=this;if(this.states,this.forwardStates){var n=this.states.slice();this.children.forEach((function(e){return e.states=n}))}var r=(null===(e=_n.stateMapperHook)||void 0===e?void 0:e.call(_n,this,this.states))||this.states;if(this._undoStates||this.style&&function(e,t){var n,r=w(t);try{for(r.s();!(n=r.n()).done;)if(n.value in e)return!0}catch(o){r.e(o)}finally{r.f()}return!1}(this.style,r)){this._undoStates=this._undoStates||{};for(var o={},i=0,a=Object.entries(this._undoStates);i<a.length;i++){var s=b(a[i],2),l=s[0],u=s[1];r.includes(l)||(o=y(y({},o),u))}var c=r.reduce((function(e,n){var r=t.style[n];return r&&(e=y(y({},e),r),t._undoStates&&!t._undoStates[n]&&(t._undoStates[n]={},Object.keys(r).forEach((function(e){t._undoStates[n][e]=t[e]})))),e}),{});void 0!==c.transition&&(this.transition=c.transition),Object.assign(this,y(y({},o),c))}}},{key:"render",value:function(){var e=this,t=this.parent;t._isDirty&&(t.updateLayout(),t._isDirty=!1),e.updateLayout(),this.states.length&&this._stateChanged();var n=e._renderProps;t.lng&&(n.parent=t.lng),e.isTextNode()?((n=y(y(y({},_n.fontSettings),n),{},{text:e.getText()})).contain&&(n.width||(n.width=(t.width||0)-(n.x||0)-(n.marginRight||0),e._width=n.width,e._autosized=!0),"both"!==n.contain||n.height||n.maxLines||(n.height=(t.height||0)-(n.y||0)-(n.marginBottom||0),e._height=n.height,e._autosized=!0)),e.lng=wn.createTextNode(n),En(this.onCreate)&&this.onCreate.call(this,e),En(e.onLoad)&&e.lng.on("loaded",e.onLoad),e.width&&e.height||(e._autosized=!0,e._resizeOnTextLoad())):(n.src||n.texture||(isNaN(n.width)&&(n.width=(t.width||0)-(n.x||0),e._width=n.width,e._autosized=!0),isNaN(n.height)&&(n.height=(t.height||0)-(n.y||0),e._height=n.height,e._autosized=!0),n.color||(e._color=n.color=0)),e.lng=wn.createNode(n),e.onFail&&e.lng.on("failed",e.onFail),e.onLoad&&e.lng.on("loaded",e.onLoad),En(this.onCreate)&&this.onCreate.call(this,e)),e.rendered=!0,e.autofocus&&e.setFocus(),delete this._renderProps}}]),t}(e(Object)),Fn=function(e){return t=jn("text"),Qn(t,e,!1),t;var t},Pn=function(e){return t=jn("node"),Qn(t,e,!1),t;var t};function Dn(e){e instanceof Ln&&(e.render(),"text"!==e.name&&e.children.forEach((function(e){return Dn(e)})))}var Un=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Tn(t.options),r=n.init();function o(e){e.renderer=n,En(t.ref)?t.ref(e):t.ref=e,r.then((function(){e.lng=n.root,e.children.forEach(Dn),En(t.onFirstRender)&&t.onFirstRender(e)})).catch(console.error)}return e=jn("canvas"),"function"==typeof o?Zn(o,e):o=e,Hn(e,(function(){return t.children})),e};function On(e){var t=e.createElement,n=e.createTextNode,r=e.isTextNode,o=e.replaceText,i=e.insertNode,a=e.removeNode,s=e.setProperty,l=e.getParentNode,u=e.getFirstChild,c=e.getNextSibling;function d(e,t,n,r){if(void 0===n||r||(r=[]),"function"!=typeof t)return h(e,t,r,n);X((function(r){return h(e,t(),r,n)}),r)}function h(e,t,a,s,l){for(;"function"==typeof a;)a=a();if(t===a)return a;var c=typeof t,d=void 0!==s;if("string"===c||"number"===c)if("number"===c&&(t=t.toString()),d){var m=a[0];m&&r(m)?o(m,t):m=n(t),a=v(e,a,s,m)}else""!==a&&"string"==typeof a?o(u(e),a=t):(v(e,a,s,n(t)),a=t);else if(null==t||"boolean"===c)a=v(e,a,s);else{if("function"===c)return X((function(){for(var n=t();"function"==typeof n;)n=n();a=h(e,n,a,s)})),function(){return a};if(Array.isArray(t)){var x=[];if(f(x,t,l))return X((function(){return a=h(e,x,a,s,!0)})),function(){return a};if(0===x.length){var b=v(e,a,s);if(d)return a=b}else Array.isArray(a)?0===a.length?g(e,x,s):p(e,a,x):null==a||""===a?g(e,x):p(e,d&&a||[u(e)],x);a=x}else{if(Array.isArray(a)){if(d)return a=v(e,a,s,t);v(e,a,null,t)}else null!=a&&""!==a&&u(e)?y(e,t,u(e)):i(e,t);a=t}}return a}function f(e,t,r){for(var o=!1,i=0,a=t.length;i<a;i++){var s=t[i],l=void 0;if(null==s||!0===s||!1===s);else if(Array.isArray(s))o=f(e,s)||o;else if("string"==(l=typeof s)||"number"===l)e.push(n(s));else if("function"===l)if(r){for(;"function"==typeof s;)s=s();o=f(e,Array.isArray(s)?s:[s])||o}else e.push(s),o=!0;else e.push(s)}return o}function p(e,t,n){for(var r=n.length,o=t.length,s=r,l=0,u=0,d=c(t[o-1]),h=null;l<o||u<s;)if(t[l]!==n[u]){for(;t[o-1]===n[s-1];)o--,s--;if(o===l)for(var f=s<r?u?c(n[u-1]):n[s-u]:d;u<s;)i(e,n[u++],f);else if(s===u)for(;l<o;)h&&h.has(t[l])||a(e,t[l]),l++;else if(t[l]===n[s-1]&&n[u]===t[o-1]){var p=c(t[--o]);i(e,n[u++],c(t[l++])),i(e,n[--s],p),t[o]=n[s]}else{if(!h){h=new Map;for(var v=u;v<s;)h.set(n[v],v++)}var g=h.get(t[l]);if(null!=g)if(u<g&&g<s){for(var m=l,x=1,b=void 0;++m<o&&m<s&&null!=(b=h.get(t[m]))&&b===g+x;)x++;if(x>g-u)for(var w=t[l];u<g;)i(e,n[u++],w);else y(e,n[u++],t[l++])}else l++;else a(e,t[l++])}}else l++,u++}function v(e,t,r,o){if(void 0===r){for(var s;s=u(e);)a(e,s);return o&&i(e,o),""}var c=o||n("");if(t.length)for(var d=!1,h=t.length-1;h>=0;h--){var f=t[h];if(c!==f){var p=l(f)===e;d||h?p&&a(e,f):p?y(e,c,f):i(e,c,r)}else d=!0}else i(e,c,r);return[c]}function g(e,t,n){for(var r=0,o=t.length;r<o;r++)i(e,t[r],n)}function y(e,t,n){i(e,t,n),a(e,n)}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t||(t={}),(arguments.length>3?arguments[3]:void 0)||X((function(){return n.children=h(e,t.children,n.children)})),X((function(){return t.ref&&t.ref(e)})),X((function(){for(var r in t)if("children"!==r&&"ref"!==r){var o=t[r];o!==n[r]&&(s(e,r,o,n[r]),n[r]=o)}})),n}return{render:function(e,t){var n;return O((function(r){n=r,d(t,e())})),n},insert:d,spread:function(e,t,n){"function"==typeof t?X((function(r){return m(e,t(),r,n)})):m(e,t,void 0,n)},createElement:t,createTextNode:n,insertNode:i,setProp:function(e,t,n,r){return s(e,t,n,r),n},mergeProps:ke,effect:X,memo:G,createComponent:be,use:function(e,t,n){return Q((function(){return e(t,n)}))}}}var zn={createElement:function(e){var t=new Ln(e);return wn.root&&V((function(){return t.render()})),t},createTextNode:function(e){return{name:"TextNode",text:e,parent:void 0}},replaceText:function(e,t){e.text=t;var n=e.parent;n.text=n.getText()},setProperty:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e[t]=n},insertNode:function(e,t,n){e&&(e.children.insert(t,n),"TextNode"===t.name&&e.isTextNode()&&(e.text=e.getText()))},isTextNode:function(e){return e.isTextNode()},removeNode:function(e,t){e.children.remove(t),t instanceof Ln&&t.destroy()},getParentNode:function(e){return e.parent},getFirstChild:function(e){return e.children[0]},getNextSibling:function(e){if(e.parent){var t=e.parent.children||[],n=t.indexOf(e)+1;if(n<t.length)return t[n]}}},Wn=function(e){var t=On(e);return t.mergeProps=ke,t}(zn),Xn=Wn.render,Yn=(Wn.effect,Wn.memo),Gn=Wn.createComponent,jn=Wn.createElement,Hn=(Wn.createTextNode,Wn.insertNode,Wn.insert),Qn=Wn.spread,Kn=Wn.setProp,Vn=Wn.mergeProps,Zn=Wn.use;function qn(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e=t,Number.isInteger(e)?t:"string"==typeof t?t.startsWith("#")?Number(t.replace("#","0x")+(7===t.length?"ff":"")):t.startsWith("0x")?Number(t):Number("0x"+(6===t.length?t+"ff":t)):0}var Jn="_$DX_DELEGATE";function $n(e){var t="$$".concat(e.type),n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:function(){return n||document}});n;){var r=n[t];if(r&&!n.disabled){var o=n["".concat(t,"Data")];if(void 0!==o?r.call(n,o,e):r.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}var er;function tr(){var e=new Set;var t=!1;return{subscribe:function(t){return e.add(t),function(){return e.delete(t)}},confirm:function(n,r){if(t)return!(t=!1);var o,i={to:n,options:r,defaultPrevented:!1,preventDefault:function(){return i.defaultPrevented=!0}},a=w(e);try{var s=function(){var e=o.value;e.listener(y(y({},i),{},{from:e.location,retry:function(o){o&&(t=!0),e.navigate(n,y(y({},r),{},{resolve:!1}))}}))};for(a.s();!(o=a.n()).done;)s()}catch(l){a.e(l)}finally{a.f()}return!i.defaultPrevented}}}function nr(){window.history.state&&null!=window.history.state._depth||window.history.replaceState(y(y({},window.history.state),{},{_depth:window.history.length-1}),""),er=window.history.state._depth}nr();var rr=/^(?:[a-z0-9]+:)?\/\//i,or=/^\/+|(\/)\/+$/g,ir="http://sr";function ar(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.replace(or,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function sr(e,t,n){if(!rr.test(t)){var r=ar(e),o=n&&ar(n),i="";return((i=!o||t.startsWith("/")?r:0!==o.toLowerCase().indexOf(r.toLowerCase())?r+o:o)||"/")+ar(t,!i)}}function lr(e){var t={};return e.searchParams.forEach((function(e,n){t[n]=e})),t}function ur(e,t,n){var r=b(e.split("/*",2),2),o=r[0],i=r[1],a=o.split("/").filter(Boolean),s=a.length;return function(e){var r=e.split("/").filter(Boolean),o=r.length-s;if(o<0||o>0&&void 0===i&&!t)return null;for(var l={path:s?"":"/",params:{}},u=function(e){return void 0===n?void 0:n[e]},c=0;c<s;c++){var d=a[c],h=r[c],f=":"===d[0],p=f?d.slice(1):d;if(f&&cr(h,u(p)))l.params[p]=h;else if(f||!cr(h,d))return null;l.path+="/".concat(h)}if(i){var v=o?r.slice(-o).join("/"):"";if(!cr(v,u(i)))return null;l.params[i]=v}return l}}function cr(e,t){var n=function(t){return 0===t.localeCompare(e,void 0,{sensitivity:"base"})};return void 0===t||("string"==typeof t?n(t):"function"==typeof t?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp&&t.test(e))}function dr(e){var t=new Map,n=q();return new Proxy({},{get:function(r,o){return t.has(o)||J(n,(function(){return t.set(o,G((function(){return e()[o]})))})),t.get(o)()},getOwnPropertyDescriptor:function(){return{enumerable:!0,configurable:!0}},ownKeys:function(){return Reflect.ownKeys(e())}})}function hr(e){var t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];for(var n=e.slice(0,t.index),r=e.slice(t.index+t[0].length),o=[n,n+=t[1]];t=/^(\/\:[^\/]+)\?/.exec(r);)o.push(n+=t[1]),r=r.slice(t[0].length);return hr(r).reduce((function(e,t){return[].concat(v(e),v(o.map((function(e){return e+t}))))}),[])}var fr,pr=ee(),vr=ee(),gr=function(){return function(e,t){if(null==e)throw new Error(t);return e}(te(pr),"Make sure your app is wrapped in a <Router />")},yr=function(){return gr().navigatorFactory()},mr=function(){return(te(vr)||gr().base).params};function xr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.component,r=e.load,o=e.children,i=e.info,a=!o||Array.isArray(o)&&!o.length,s={key:e,component:n,load:r,info:i};return wr(e.path).reduce((function(n,r){var o,i,l=w(hr(r));try{for(l.s();!(o=l.n()).done;){var u=o.value,c=(i=u,ar(t).replace(/\/*(\*.*)?$/g,"")+ar(i)),d=a?c:c.split("/*",1)[0];d=d.split("/").map((function(e){return e.startsWith(":")||e.startsWith("*")?e:encodeURIComponent(e)})).join("/"),n.push(y(y({},s),{},{originalPath:u,pattern:d,matcher:ur(d,!a,e.matchFilters)}))}}catch(h){l.e(h)}finally{l.f()}return n}),[])}function br(e){var t,n,r,o,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return{routes:e,score:1e4*(t=e[e.length-1],n=b(t.pattern.split("/*",2),2),r=n[0],o=n[1],i=r.split("/").filter(Boolean),i.reduce((function(e,t){return e+(t.startsWith(":")?2:3)}),i.length-(void 0===o?0:1)))-a,matcher:function(t){for(var n=[],r=e.length-1;r>=0;r--){var o=e[r],i=o.matcher(t);if(!i)return null;n.unshift(y(y({},i),{},{route:o}))}return n}}}function wr(e){return Array.isArray(e)?e:[e]}function Ar(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=wr(e),i=0,a=o.length;i<a;i++){var s=o[i];if(s&&"object"==typeof s){s.hasOwnProperty("path")||(s.path="");var l,u=w(xr(s,t));try{for(u.s();!(l=u.n()).done;){var c=l.value;n.push(c);var d=Array.isArray(s.children)&&0===s.children.length;if(s.children&&!d)Ar(s.children,c.pattern,n,r);else{var h=br(v(n),r.length);r.push(h)}n.pop()}}catch(f){u.e(f)}finally{u.f()}}}return n.length?r:r.sort((function(e,t){return t.score-e.score}))}function Sr(e,t){for(var n=0,r=e.length;n<r;n++){var o=e[n].matcher(t);if(o)return o}return[]}function Tr(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=b(e.signal,2),s=a[0],l=a[1],u=e.utils,c=void 0===u?{}:u,d=c.parsePath||function(e){return e},h=c.renderPath||function(e){return e},f=c.beforeLeave||tr(),p=sr("",i.base||"");if(void 0===p)throw new Error("".concat(p," is not a valid base path"));p&&!s().value&&l({value:p,replace:!0,scroll:!1});var v=b(z(!1),2),g=v[0],m=v[1],x=function(){var e=o(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,$(t);case 4:return e.prev=4,m(!1),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}(),w=b(z(s().value),2),A=w[0],S=w[1],T=b(z(s().state),2),k=T[0],_=T[1],E=function(e,t){var n=new URL(ir),r=G((function(t){var r=e();try{return new URL(r,n)}catch(o){return console.error("Invalid path ".concat(r)),t}}),n,{equals:function(e,t){return e.href===t.href}}),o=G((function(){return r().pathname})),i=G((function(){return r().search}),!0),a=G((function(){return r().hash}));return{get pathname(){return o()},get search(){return i()},get hash(){return a()},get state(){return t()},get key(){return""},query:dr(K(i,(function(){return lr(r())})))}}(A,k),C=[],R=z([]),I={pattern:p,params:{},path:function(){return p},outlet:function(){return null},resolvePath:function(e){return sr(p,e)}};return X((function(){var e=s(),t=e.value,n=e.state;Q((function(){t!==A()&&x((function(){fr="native",S(t),_(n),R[1]([])})).then((function(){fr=void 0}))}))})),{base:I,location:E,isRouting:g,renderPath:h,parsePath:d,navigatorFactory:function(e){return e=e||te(vr)||I,function(t,n){return function(e,t,n){Q((function(){if("number"!=typeof t){var r=y({replace:!1,resolve:!0,scroll:!0},n),o=r.replace,i=r.resolve,a=r.scroll,s=r.state,u=i?e.resolvePath(t):sr("",t);if(void 0===u)throw new Error("Path '".concat(t,"' is not a routable path"));if(C.length>=100)throw new Error("Too many redirects");var d=A();if((u!==d||s!==k())&&f.confirm(u,n)){var h=C.push({value:d,replace:o,scroll:a,state:k()});x((function(){fr="navigate",S(u),_(s),R[1]([])})).then((function(){var e,t;C.length===h&&(fr=void 0,e={value:u,state:s},(t=C[0])&&(e.value===t.value&&e.state===t.state||l(y(y({},e),{},{replace:t.replace,scroll:t.scroll})),C.length=0))}))}}else t&&(c.go?c.go(t):console.warn("Router integration does not support relative routing"))}))}(e,t,n)}},beforeLeave:f,preloadRoute:function(e,n){var o=Sr(r(),e.pathname),i=fr;fr="preload";var a=function(){var r=o[s],i=r.route,a=r.params;i.component&&i.component.preload&&i.component.preload();var l=i.load;n&&l&&J(t(),(function(){return l({params:a,location:{pathname:e.pathname,search:e.search,hash:e.hash,query:lr(e),state:null,key:""},intent:"preload"})}))};for(var s in o)a();fr=i},singleFlight:void 0===i.singleFlight||i.singleFlight,submissions:R}}var kr=function(e){return function(t){var n,r=t.base,o=ne((function(){return t.children})),i=G((function(){return Ar(t.root?{component:t.root,load:t.rootLoad,children:o()}:o(),t.base||"")})),a=Tr(e,(function(){return n}),i,{base:r,singleFlight:t.singleFlight});return e.create&&e.create(a),Gn(pr.Provider,{value:a,get children(){return[Yn((function(){return(n=q())&&null})),Gn(_r,{routerState:a,get branches(){return i()}})]}})}};function _r(e){var t,n=G((function(){return Sr(e.branches,e.routerState.location.pathname)})),r=dr((function(){for(var e=n(),t={},r=0;r<e.length;r++)Object.assign(t,e[r].params);return t})),o=[],i=G(K(n,(function(a,s,l){for(var u=s&&a.length===s.length,c=[],d=function(t){var d=s&&s[t],h=a[t];l&&d&&h.route.key===d.route.key?c[t]=l[t]:(u=!1,o[t]&&o[t](),O((function(a){o[t]=a,c[t]=function(e,t,n,r,o){var i=e.base,a=e.location,s=r().route,l=s.pattern,u=s.component,c=s.load,d=G((function(){return r().path}));u&&u.preload&&u.preload();var h=c?c({params:o,location:a,intent:fr||"initial"}):void 0;return{parent:t,pattern:l,path:d,params:o,outlet:function(){return u?be(u,{params:o,location:a,data:h,get children(){return n()}}):n()},resolvePath:function(e){return sr(i.path(),e,d())}}}(e.routerState,c[t-1]||e.routerState.base,Er((function(){return i()[t+1]})),(function(){return n()[t]}),r)})))},h=0,f=a.length;h<f;h++)d(h);return o.splice(a.length).forEach((function(e){return e()})),l&&u?l:(t=c[0],c)})));return Gn(Ce,{get when(){return i()&&t},keyed:!0,children:function(e){return Gn(vr.Provider,{value:e,get children(){return e.outlet()}})}})}var Er=function(e){return function(){return Gn(Ce,{get when(){return e()},keyed:!0,children:function(e){return Gn(vr.Provider,{value:e,get children(){return e.outlet()}})}})}},Cr=function(e){var t=ne((function(){return e.children}));return ke(e,{get children(){return t()}})};function Rr(e){var t=!1,n=function(e){return"string"==typeof e?{value:e}:e},r=function(e,t,n){var r=b(e,2),o=r[0],i=r[1];return[t?function(){return t(o())}:o,n?function(e){return i(n(e))}:i]}(z(n(e.get()),{equals:function(e,t){return e.value===t.value}}),void 0,(function(n){return!t&&e.set(n),n}));return e.init&&Z(e.init((function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.get();t=!0,r[1](n(o)),t=!1}))),kr({signal:r,create:e.create,utils:e.utils})}function Ir(e,t){var n=function(e){if("#"===e)return null;try{return document.querySelector(e)}catch(t){return null}}("#".concat(e));n?n.scrollIntoView():t&&window.scrollTo(0,0)}var Br=new Map;function Nr(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/_server";return function(r){var o=r.base.path(),i=r.navigatorFactory(r.base),a={};function s(e){if(!(e.defaultPrevented||0!==e.button||e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)){var n=e.composedPath().find((function(e){return e instanceof Node&&"A"===e.nodeName.toUpperCase()}));if(n&&(!t||n.hasAttribute("link"))){var r="http://www.w3.org/2000/svg"===n.namespaceURI,i=r?n.href.baseVal:n.href;if(!(r?n.target.baseVal:n.target)&&(i||n.hasAttribute("state"))){var a=(n.getAttribute("rel")||"").split(/\s+/);if(!(n.hasAttribute("download")||a&&a.includes("external"))){var s=r?new URL(i,document.baseURI):new URL(i);if(!(s.origin!==window.location.origin||o&&s.pathname&&!s.pathname.toLowerCase().startsWith(o.toLowerCase())))return[n,s]}}}}}function l(e){var t=s(e);if(t){var n=b(t,2),o=n[0],a=n[1],l=r.parsePath(a.pathname+a.search+a.hash),u=o.getAttribute("state");e.preventDefault(),i(l,{resolve:!1,replace:o.hasAttribute("replace"),scroll:!o.hasAttribute("noscroll"),state:u&&JSON.parse(u)})}}function u(e){var t=s(e);if(t){var n=b(t,2),o=n[0],i=n[1];a[i.pathname]||r.preloadRoute(i,"false"!==o.getAttribute("preload"))}}function c(e){var t=s(e);if(t){var n=b(t,2),o=n[0],i=n[1];a[i.pathname]||(a[i.pathname]=setTimeout((function(){r.preloadRoute(i,"false"!==o.getAttribute("preload")),delete a[i.pathname]}),200))}}function d(e){var t=s(e);if(t){var n=b(t,2)[1];a[n.pathname]&&(clearTimeout(a[n.pathname]),delete a[n.pathname])}}function h(e){var t=e.submitter&&e.submitter.hasAttribute("formaction")?e.submitter.getAttribute("formaction"):e.target.getAttribute("action");if(t){if(!t.startsWith("https://action/")){var o=new URL(t,ir);if(!(t=r.parsePath(o.pathname+o.search)).startsWith(n))return}if("POST"!==e.target.method.toUpperCase())throw new Error("Only POST forms are supported for Actions");var i=Br.get(t);if(i){e.preventDefault();var a=new FormData(e.target);e.submitter&&e.submitter.name&&a.append(e.submitter.name,e.submitter.value),i.call(r,a)}}}!function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.document,n=t[Jn]||(t[Jn]=new Set),r=0,o=e.length;r<o;r++){var i=e[r];n.has(i)||(n.add(i),t.addEventListener(i,$n))}}(["click","submit"]),document.addEventListener("click",l),e&&(document.addEventListener("mouseover",c),document.addEventListener("mouseout",d),document.addEventListener("focusin",u),document.addEventListener("touchstart",u)),document.addEventListener("submit",h),Z((function(){document.removeEventListener("click",l),e&&(document.removeEventListener("mouseover",c),document.removeEventListener("mouseout",d),document.removeEventListener("focusin",u),document.removeEventListener("touchstart",u)),document.removeEventListener("submit",h)}))}}function Mr(e){var t=e.replace(/^.*?#/,"");if(!t.startsWith("/")){var n=b(window.location.hash.split("#",2),2)[1];return"".concat(void 0===n?"/":n,"#").concat(t)}return t}function Lr(e){var t=function(){return window.location.hash.slice(1)},n=tr();return Rr({get:t,set:function(e){var t=e.value,n=e.replace,r=e.scroll,o=e.state;n?window.history.replaceState(function(e){return y(y({},e),{},{_depth:window.history.state&&window.history.state._depth})}(o),"","#"+t):window.location.hash=t;var i=t.indexOf("#");Ir(i>=0?t.slice(i+1):"",r),nr()},init:function(e){return r=window,o="hashchange",i=function(e,t){var n=!1;return function(){var r=er;nr();var o=null==r?null:er-r;n?n=!1:o&&t(o)?(n=!0,window.history.go(-o)):e()}}(e,(function(e){return!n.confirm(e&&e<0?e:t())})),r.addEventListener(o,i),function(){return r.removeEventListener(o,i)};var r,o,i},create:Nr(e.preload,e.explicitLinks,e.actionBase),utils:{go:function(e){return window.history.go(e)},renderPath:function(e){return"#".concat(e)},parsePath:Mr,beforeLeave:n}})(e)}var Fr=Z;function Pr(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:q(),o=0;return function(){return o++,Z((function(){o--,queueMicrotask((function(){!o&&n&&(n(),n=t=void 0)}))})),n||O((function(r){return t=e(n=r)}),r),t}}var Dr=Pr((function(){var e,t,n,r,o=b(z(null),2),i=o[0],a=o[1];return e=window,t="keydown",n=function(e){a(e),setTimeout((function(){return a(null)}))},e.addEventListener(t,n,r),Fr(e.removeEventListener.bind(e,t,n,r)),i}));function Ur(e){return"function"==typeof e}var Or,zr={ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"Enter",l:"Last"," ":"Space",Backspace:"Back",Escape:"Escape",37:"Left",39:"Right",38:"Up",40:"Down",13:"Enter",32:"Space",8:"Back",27:"Escape"},Wr=b(z([]),2),Xr=Wr[0],Yr=Wr[1],Gr=function(e){var t=Dr();if(e)for(var n=function(){var e,t=b(o[r],2),n=t[0],i=t[1];e=i,Array.isArray(e)?i.forEach((function(e){zr[e]=n})):zr[i]=n},r=0,o=Object.entries(e);r<o.length;r++)n();return Y(K(Ie,(function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e,o=[];r;)r.states.has("focus")||(r.states.add("focus"),Ur(r.onFocus)&&r.onFocus.call(r,e,t)),o.push(r),r=r.parent;return n.forEach((function(n){o.includes(n)||(n.states.remove("focus"),Ur(n.onBlur)&&n.onBlur.call(n,e,t))})),Yr(o),o}),{defer:!0})),Y((function(){var e=t();if(e){var n=zr[e.key];Q((function(){var t,r=void 0,o=w(Xr());try{for(o.s();!(t=o.n()).done;){var i=t.value;if(r=r||i,n){var a=i["on".concat(n)];if(Ur(a)&&!0===a.call(i,e,i,r))break}else console.log("Unhandled key event: ".concat(e.key));if(Ur(i.onKeyPress)&&!0===i.onKeyPress.call(i,e,n,i,r))break}}catch(s){o.e(s)}finally{o.f()}return!1}))}})),Xr};function jr(e,t){var n,r,o,i,a=t();if(Array.isArray(a))if(2===a.length)n=i=a[0],r=o=a[1];else if(3===a.length)n=a[0],r=o=a[1],i=a[2];else{var s=b(a,4);n=s[0],o=s[1],i=s[2],r=s[3]}else n=o=i=r=a;e.onBeforeLayout=function(t,a){if(a){e.width=e.children.reduce((function(e,t){return e+(t.width||0)}),0)+r+o;var s=e.children[0];s&&(s.x=r,s.marginLeft=r);var l=0;e.children.forEach((function(e){e.y=n,e.marginTop=n,l=Math.max(l,e.height||0)})),e.height=l+n+i}}}function Hr(e){return new Promise((function(t){setTimeout(t,e)}))}function Qr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en-US",r=window.speechSynthesis;return new Promise((function(o,i){var a=new SpeechSynthesisUtterance(e);a.lang=n,a.onend=function(){o()},a.onerror=function(e){i(e)},t.push(a),r.speak(a)}))}function Kr(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=window.speechSynthesis,a=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];for(e=0;e<t.length;e++){var r=t[e];if("string"!=typeof r||r.includes("PAUSE-"))break;n.push(t[e])}return[n.join(",\b ")].concat(t.slice(e))}(Array.isArray(e)?e:[e]),s=[],l=[],u=!0;return{series:o(n().mark((function e(){var r,o,i,c,d,h;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0;case 1:if(!u||!a.length){e.next=62;break}return e.next=4,Promise.resolve(a.shift());case 4:if(r=e.sent,u){e.next=9;break}return e.abrupt("break",62);case 9:if("string"!=typeof r||!r.includes("PAUSE-")){e.next=16;break}return o=1e3*Number(r.split("PAUSE-")[1]),isNaN(o)&&(o=0),e.next=14,Hr(o);case 14:e.next=60;break;case 16:if("string"!=typeof r||!r.length){e.next=48;break}c=i=3;case 19:if(!(u&&c>0)){e.next=46;break}return e.prev=20,e.next=23,Qr(r,l,t);case 23:c=0,e.next=44;break;case 26:if(e.prev=26,e.t0=e.catch(20),!(e.t0 instanceof SpeechSynthesisErrorEvent)){e.next=43;break}if("network"!==e.t0.error){e.next=36;break}return c--,console.warn("Speech synthesis network error. Retries left: ".concat(c)),e.next=34,Hr(500*(i-c));case 34:e.next=41;break;case 36:if("canceled"!==e.t0.error&&"interrupted"!==e.t0.error){e.next=40;break}c=0,e.next=41;break;case 40:throw new Error("SpeechSynthesisErrorEvent: ".concat(e.t0.error));case 41:e.next=44;break;case 43:throw e.t0;case 44:e.next=19;break;case 46:e.next=60;break;case 48:if("function"!=typeof r){e.next=55;break}return d=Kr(r(),t,!1),s.push(d),e.next=53,d.series;case 53:e.next=60;break;case 55:if(!Array.isArray(r)){e.next=60;break}return h=Kr(r,t,!1),s.push(h),e.next=60,h.series;case 60:e.next=1;break;case 62:return e.prev=62,u=!1,e.finish(62);case 65:case"end":return e.stop()}}),e,null,[[0,,62,65],[20,26]])})))(),get active(){return u},append:function(e){a.push(e)},cancel:function(){u&&(r&&i.cancel(),s.forEach((function(e){e.cancel()})),u=!1)}}}function Vr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en-US";return Or&&Or.cancel(),Or=Kr(e,t)}var Zr,qr,Jr=function(e,t){var n,r=function(){return clearTimeout(n)};q()&&Z(r);return Object.assign((function(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];void 0!==n&&r(),n=setTimeout((function(){return e.apply(void 0,i)}),t)}),{clear:r})},$r=[],eo=!1;function to(e,t){var n,r=Jr(e,t),o=function(e){n=e,r(e)};return o.flush=function(){r.clear(),e(n)},o.clear=r.clear,o}function no(e){return e.id||e.name}function ro(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(oo.onFocusChange&&oo.enabled){var t=e.every((function(e){return!e.loading})),n=e.filter((function(e){return!$r.includes(e)}));if(Zr(),t||!oo.onFocusChange){$r=e.slice(0);var r=[],o=n.reduce((function(e,t){return t.announce?(e.push([no(t),"Announce",t.announce]),r.push(t.announce)):t.title?(e.push([no(t),"Title",t.title]),r.push(t.title)):e.push([no(t),"No Announce",""]),e}),[]);return n.reverse().reduce((function(e,t){return t.announceContext?(e.push([no(t),"Context",t.announceContext]),r.push(t.announceContext)):e.push([no(t),"No Context",""]),e}),o),oo.debug&&console.table(o),r.length?oo.speak(r.reduce((function(e,t){return e.concat(t)}),[])):void 0}oo.onFocusChange([])}}var oo={debug:!1,enabled:!0,cancel:function(){qr&&qr.cancel()},clearPrevFocus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;$r=$r.slice(0,e),Zr()},speak:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.append,o=void 0!==r&&r,i=n.notification,a=void 0!==i&&i;oo.onFocusChange&&oo.enabled&&(oo.onFocusChange.flush(),o&&qr&&qr.active?qr.append(e):(oo.cancel(),function(e){if(!eo)qr=Vr(e)}(e)),a&&(eo=!0,null===(t=qr)||void 0===t||t.series.finally((function(){eo=!1,oo.refresh()})).catch(console.error)));return qr},refresh:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;oo.clearPrevFocus(e),oo.onFocusChange&&oo.onFocusChange(Q((function(){return Xr()})))},setupTimers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.focusDebounce,n=void 0===t?400:t,r=e.focusChangeTimeout,o=void 0===r?3e5:r;oo.onFocusChange=to(ro,n),Zr=to((function(){$r=[]}),o)}};var io,ao,so,lo,uo,co,ho,fo,po,vo,go,yo,mo,xo,bo,wo,Ao=b(z(""),2),So=Ao[0],To=Ao[1],ko={name:"Base Lightning TV",alpha:{primary:1,secondary:.7,tertiary:.1,inactive:.5,full:1,none:0,alpha1:.1,alpha2:.3,alpha3:.5,alpha4:.7,alpha5:.9},animation:{duration:{none:0,xfast:.1,fast:.25,normal:.5,slow:.75,xslow:.9},delay:{none:0,xfast:.01,fast:.025,normal:.05,slow:.075,xslow:.09},expressive:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},expressiveEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},expressiveExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standard:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standardEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standardExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utility:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utilityEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utilityExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25}},asset:{arrowLeft:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAi0lEQVRIDWNgGAWjIfD//38JID5Fk5AAGqwKxPeA+D/VLQCaaQLEr0CGgwBVLQCa5wbEn0EGwwDVLAAaGA3Ev2AGw2iqWAA0rBiI/8EMRaYptgBoWDeygehsci1gIlcjWfqArqZdEMFcBLSEdpGMZAntkimSJbTLaEiW0K6oQLKEdoUdzJJRemiHAAD4n+yzPWCs7QAAAABJRU5ErkJggg==",arrowRight:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAg0lEQVRIDWNgGAWjIYArBP7//38KiCVwyVMsDjQcBO4BsSrFhmEzAGw8hHgFpEywqaFIDMkCEPMzELtRZCC6ZjQLQNxfQByNro5sPhYLQEL/gLiYbEORNeKwACbcDVPLBGMMOhrmVDSapkFE00imaTKlaUajaVFB28Ju0CXrUQfhDAEAEgHss6NhpLQAAAAASUVORK5CYII=",backspaceOutline:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAAAXNSR0IArs4c6QAACmpJREFUeF7tnVmoZUcVhv/feY4gBEVEH/KgCCZxCK2itNo4xQQH+kUN0TjEiDGKKBqnaExwBjUaR6KY+NQgiQkOMSYhYEScIopGJOqDE2hHjfP0y4p1Oqdv33v2qr32Prv2Paug6Ye7Vu2qv75TtWvtGohMqUBAAQZ80zUVQAKUEIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypfPsAJJ0NYC92XRHKPB3AAfLv18BuBLAFSR/NKZWswJI0vkA3jCmILsw75sAvIfkR8eo22wAknQSgMvGEGFD8vwxgFeQvGrI+s4CIEnHAPgugHsMWfkNzevDAM4i+Z8h6t88QJLuXOB5yBAVzjxuVeBaAM8ieXNUjzkAdAmA50Yrmv5HKPATACeQ/GNEm6YBkvRyANblZhpHAXsfekpkOGsWIEmPAHA9gDuOo13mWhS4gOSZfdVoEiBJ9wFwA4D7961Y+lUpsK/v7KxVgL4K4ElOCS4l+Uyn7a41k3Q0gMcC2ANgH4CHV1T2OyStx69OzQEk6TwAZztr8lMAx5P8s9N+Y8wk2cTjfQDu66z080h+zml7yKwpgCSdCOByZyX+BuBRJH/otN84M0kWN/s0gOc4Kv8Nko922B1m0gxAkh4I4AcVwcL9JA/UVnjT7CXdHYD9yEzfVUkAjib5uxqNmgCoBAu/CeBhzsJ/kORZTtuNN5Nk70bXAZ0Hy59G8qIawVoB6LMAnu8suE3tH0/y3077NAMg6esAuoaoC0la7M2dJgdI0ssAXOgs8W8BHEvS/s9UoYCkdwN4bYfL5STto7U7TQpQZbDQehzreawHylSpgKSTAVza4XYDyeNqsp4MoB7BwteQfH9N5dL2NgWK3l0vyAdJWhDXnSYBSNLtANh3GO/KwgMk97trlYbbKiDJPpzea5U8JKuYqDIeql0kvQPAG5352ZLMR5L8q9M+zXZQYFcAJOnJAL7sbGWLMFuk2SLOmYIKzB6gEiz8HoB7O7U4meQXnLZp1qGApD8BuOcsh7AewcL3kuyadg4OjSSbhRxH0j4BjJok2Ufga0j+YdQHlcznDlBNsPAa+xpP8r/rEHbxjAKPbRuyHvKFY0Ik6QUALOprPfIT1gHRbAGSdDoA77aSX5Zg4e8nhGfx6FEgWoJn8Zy1QCTplq5vjc3NwnoEC/eQ/HYD8IwC0TbwrA2i2QHUI1h4JskLGoJnUIhWwLMWiGYFkCSLMX2t5WDhlneeLm5Dw5kDntEhkmRhEVvesWNqZgiTdC6AN3W1Svn72oOFkuxF+WcVIQUrai+IKuA5BBHJ453auc1mA1AJFn7Jsf7EKj9ZsLBHw1ZDtI5neAmaBUBzCxaO2cBj5u2FZtlO0l8A3K3ZIaxHsPB8kt5vYn00c/mM0dBj5OmqzAqjOQDUfLBwJ32HbPAh84pCM5seSNJLAHzcWeFJgoVdZRui4YfIo6ucff8uyVY03LW5IawyWPgvW5u77mChV/QIABFfb/kidk0CVKbDth3Huw35dJLeniqiV2/fniDYx1f7vlWTeoUFah6wZQhrqwcqwUKbrtsaH0+6mOQpHsOpbXpCVFPstcJjBZNkmzHv0swQJultAN7iVO375TyafzjtJzcbEaK1w9McQJXBQlvvYmtsfjE5FZUFGAGiSeBpCqDKYKFtmX0qya9Utl0z5gNCNBk8BSA7CtiODNwxjf4trEew8BySNtTNOg0A0aTwtARQTbDQeh3rfawXmn0KQDQ5PC0B9EkAL3LSkAD9X6hWALIJzJ3mNoSdS9I7U3NyuX6zQO+zKOzkEEmaHqDSFdpZM97tOfkSfRvvk0LUDEAFIgseetf85DS+AYgk/bPr1NvRZ2HLg4ektwI4xzmgZCBxYohaBMjWPeenDOcvaIvZ2oez5gAqQ5mtLbb3oa4z+Bb6nTHW1UP92vFIr54vzJ8BcGplGdYKkSRbCXGHSWdh2z1ckp1taGccroxyFt9cznG4iGuDqFmASk9kZxxakNGTckHZBBA1DVCB6BMAXuwhyA4VmGL/+05l6zlsbdt7DJmXU0uXmSQ7JvD2zQ1hiwJJsotRvlVxXO87SU5+heUYDT5Gni5KVhg1D1DphWqCjOYy6RlAYzb0mHn3gWkWABWIaoKMubHwSBpGebGWZNdc2vmUO6a1BhJXFUSSff/yLuOYamvzzwEcVfFr7tWwPXqi6uN2PXWYG0C1Qca1n8RaDlewl3kPRL3gWXo/XBwo1dXWdk/a3jEOnJoVQGUoqw0yvpLkh7oUHvLvTohC8FRANBo8pT3sxLeVJ/M2M4QtiVYTZJzkNPoOiAaBxwHRqPDMFqBS8Jog4yT3YewA0aDwrIBodHhmDVApvG0mtO3PnjTJjTxbIBoFnm0gWgs8pQ06lxY3N4QtCWZBRgPDezdnHvPr+alV2EiaL0DlF2Dbn20bdB40XtHwQ5nOHqAC0SyCjEM1Wkv57AqACkRvBvB2p7hrDzI6yzU7s90EUPNBxtnR4SjwrgGo9EK1Qca8cM4ByU4mkuz++F93ZHELyZX3iW31n+S+sKWZWfNBxkCbNeUq6ekArugo1I0kH1xT8EkBKj1R80HGGkFbtZVkZ3bb2d2r0tUkn1hTh8kBKhB9DMBLnQWfJMjoLFuTZpJsO/ONAB7UUcBLSHqvX781q1YAqg0yfoDkq5psrQYLJeldAF7nKFr1x+wmACq9kAUZLazvvTV4P8kDDlE22kTSQ4uuK9dCF5HuR/I3NYI1A1CBaB+AK50VsAMj7TJeixNl2kYBSccCsB/ZMQ6Brif5GIfdYSZNAVQg8rzsLSphl/Hapby2LDZTUaBcq/56ALb1fOVxLkuinULy4loRmwOoQGQX7T7DWZnPk3y203bXmkl6AIA91isDOBGADV3e1HsJbasA1QYZvUKl3fYKPI2knXFQnZoEqPRCNUHG6oqnwyEFLiJ5Wl89mgWoQFQTZOyrwSb7WUztcSRtu0+v1DRABaKPADijV+3SaZUCNgE5geTNEZnmAFBtkDGix6b4Xld2BNvJcaHUPEClF6oNMoZE2eXOtm3q1ZFha1mfWQBUINoL4Kqurbm7vPEj1bOAqx3udW0kk62+swGoQHQ2gPOGFGAD8roJgF0t+qkx6jorgApElwE4aQwxZp6n3YNxsPyzA7yst/4iSdvEMFqaHUCjKZEZ91IgAeolWzotFEiAkoWQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnT+H0jPT81J3xWWAAAAAElFTkSuQmCC",check:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAOCAYAAAAi2ky3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACtSURBVHgBvdPdDcIgEAfwoy8Nb45QN3AGF2s36Ahu4gpuIDoBfSgfpdoTlCbEWEMh6T8hFzjyg5AAkBHOcQe5UWqspRx435sDpMYj6IYQwwVSEiJ2MKVUBWuzLSLl2HL+uxmNCGFO8yaL7RHxve6qRZoAuS4hxac8735elWVx7jrtMKL1o0Gcat9jhExHSukN/kUIFZ7MpDRtzE1isDRkAUtDvrA8ZI597FUf8gWH9P0b4gko9wAAAABJRU5ErkJggg=="},color:{palette:{"blue-20":"0xbecffeff","blue-40":"0x93a9fdff","blue-90":"0x000033ff","grey-05":"0xf8f7faff","grey-40":"0x929096ff","grey-70":"0x48474bff","grey-90":"0x181819ff"},white:"0xffffffff",black:"0x000000ff",grey:"0x929096ff",red:"0xe74c3cff",orange:"0xdc7633ff",yellow:"0xf7dc6fff",green:"0x2ecc71ff",blue:"0x93a9fdff",purple:"0x663399ff",material:"0x181819ff",materialBrand:"0x000033ff",overlay:"0x181819b3",textNeutral:"0xf8f7faff",textNeutralSecondary:"0xf8f7fab3",textNeutralTertiary:"0xf8f7fa1a",textNeutralDisabled:"0xf8f7fa80",textInverse:"0x181819ff",textInverseSecondary:"0x181819b3",textInverseTertiary:"0x1818191a",textInverseDisabled:"0x18181980",textBrand:"0x93a9fdff",textBrandSecondary:"0x93a9fdb3",textBrandTertiary:"0x93a9fd1a",textBrandDisabled:"0x93a9fd80",textPositive:"0x2ecc71ff",textNegative:"0xe74c3cff",textInfo:"0x93a9fdff",textCaution:"0xdc7633ff",fillTransparent:"0xffffff0",fillNeutral:"0xf8f7faff",fillNeutralSecondary:"0xf8f7fab3",fillNeutralTertiary:"0xf8f7fa1a",fillNeutralDisabled:"0xf8f7fa80",fillInverse:"0x181819ff",fillInverseSecondary:"0x181819b3",fillInverseTertiary:"0x1818191a",fillInverseDisabled:"0x18181980",fillBrand:"0x93a9fdff",fillBrandSecondary:"0x93a9fdb3",fillBrandTertiary:"0x93a9fd1a",fillBrandDisabled:"0x93a9fd80",fillPositive:"0x2ecc71ff",fillNegative:"0xe74c3cff",fillInfo:"0x93a9fdff",fillCaution:"0xdc7633ff",strokeNeutral:"0xf8f7faff",strokeNeutralSecondary:"0xf8f7fab3",strokeNeutralTertiary:"0xf8f7fa1a",strokeNeutralDisabled:"0xf8f7fa80",strokeInverse:"0x181819ff",strokeInverseSecondary:"0x181819b3",strokeInverseTertiary:"0x1818191a",strokeInverseDisabled:"0x18181980",strokeBrand:"0x93a9fdff",strokeBrandSecondary:"0x93a9fdb3",strokeBrandTertiary:"0x93a9fd1a",strokeBrandDisabled:"0x93a9fd80",strokePositive:"0x2ecc71ff",strokeNegative:"0xe74c3cff",strokeInfo:"0x93a9fdff",strokeCaution:"0xdc7633ff",interactiveNeutral:"0xffffff1a",interactiveNeutralFocus:"0xffffffff",interactiveNeutralFocusSoft:"0xffffff1a",interactiveInverse:"0x48474b1a",interactiveInverseFocus:"0x48474bff",interactiveInverseFocusSoft:"0x48474b1a",interactiveBrand:"0xbecffe1a",interactiveBrandFocus:"0xbecffeff",interactiveBrandFocusSoft:"0xbecffe1a",shadowNeutral:"0x000000b3",shadowNeutralFocus:"0x000000b3",shadowNeutralFocusSoft:"0x000000b3",shadowNeutralText:"0x000000ff",shadowInverse:"0x000000b3",shadowInverseFocus:"0x000000b3",shadowInverseFocusSoft:"0x000000b3",shadowInverseText:"0x000000ff",shadowBrand:"0x000000b3",shadowBrandFocus:"0x000000b3",shadowBrandFocusSoft:"0x000000b3",shadowBrandText:"0x000000ff"},font:[],layout:{columnCount:10,focusScale:1.2,gutterX:20,gutterY:20,marginX:150,marginY:150,safe:50,screenW:1920,screenH:1080},radius:{none:0,xs:2,sm:4,md:8,lg:16,xl:24},spacer:{none:0,xxs:2,xs:4,sm:8,md:10,lg:20,xl:30,xxl:40,xxxl:50},stroke:{none:0,sm:2,md:4,lg:6,xl:8},typography:{display1:{fontFamily:"Arial",fontSize:75,lineHeight:85,fontWeight:500,verticalAlign:"middle",textBaseline:"bottom"},display2:{fontFamily:"Arial",fontSize:50,lineHeight:60,fontWeight:500,verticalAlign:"middle",textBaseline:"bottom"},headline1:{fontFamily:"Arial",fontSize:35,fontWeight:500,lineHeight:48,verticalAlign:"middle",textBaseline:"bottom"},headline2:{fontFamily:"Arial",fontSize:30,fontWeight:500,lineHeight:40,verticalAlign:"middle",textBaseline:"bottom"},headline3:{fontFamily:"Arial",fontSize:25,fontWeight:500,lineHeight:36,verticalAlign:"middle",textBaseline:"bottom"},body1:{fontFamily:"Arial",fontSize:25,fontWeight:300,lineHeight:40,verticalAlign:"middle",textBaseline:"bottom"},body2:{fontFamily:"Arial",fontSize:22,fontWeight:300,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},body3:{fontFamily:"Arial",fontSize:20,fontWeight:300,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},button1:{fontFamily:"Arial",fontSize:25,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},button2:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},callout1:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},caption1:{fontFamily:"Arial",fontSize:15,fontWeight:500,lineHeight:24,verticalAlign:"middle",textBaseline:"bottom"},tag1:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:24,verticalAlign:"middle",textBaseline:"bottom"},footnote1:{fontFamily:"Arial",fontSize:22,fontWeight:300,lineHeight:30,verticalAlign:"middle",textBaseline:"bottom"}},componentConfig:{Keyboard:{base:{keyProps:{delete:{title:null,icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAAAXNSR0IArs4c6QAACmpJREFUeF7tnVmoZUcVhv/feY4gBEVEH/KgCCZxCK2itNo4xQQH+kUN0TjEiDGKKBqnaExwBjUaR6KY+NQgiQkOMSYhYEScIopGJOqDE2hHjfP0y4p1Oqdv33v2qr32Prv2Paug6Ye7Vu2qv75TtWvtGohMqUBAAQZ80zUVQAKUEIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypfPsAJJ0NYC92XRHKPB3AAfLv18BuBLAFSR/NKZWswJI0vkA3jCmILsw75sAvIfkR8eo22wAknQSgMvGEGFD8vwxgFeQvGrI+s4CIEnHAPgugHsMWfkNzevDAM4i+Z8h6t88QJLuXOB5yBAVzjxuVeBaAM8ieXNUjzkAdAmA50Yrmv5HKPATACeQ/GNEm6YBkvRyANblZhpHAXsfekpkOGsWIEmPAHA9gDuOo13mWhS4gOSZfdVoEiBJ9wFwA4D7961Y+lUpsK/v7KxVgL4K4ElOCS4l+Uyn7a41k3Q0gMcC2ANgH4CHV1T2OyStx69OzQEk6TwAZztr8lMAx5P8s9N+Y8wk2cTjfQDu66z080h+zml7yKwpgCSdCOByZyX+BuBRJH/otN84M0kWN/s0gOc4Kv8Nko922B1m0gxAkh4I4AcVwcL9JA/UVnjT7CXdHYD9yEzfVUkAjib5uxqNmgCoBAu/CeBhzsJ/kORZTtuNN5Nk70bXAZ0Hy59G8qIawVoB6LMAnu8suE3tH0/y3077NAMg6esAuoaoC0la7M2dJgdI0ssAXOgs8W8BHEvS/s9UoYCkdwN4bYfL5STto7U7TQpQZbDQehzreawHylSpgKSTAVza4XYDyeNqsp4MoB7BwteQfH9N5dL2NgWK3l0vyAdJWhDXnSYBSNLtANh3GO/KwgMk97trlYbbKiDJPpzea5U8JKuYqDIeql0kvQPAG5352ZLMR5L8q9M+zXZQYFcAJOnJAL7sbGWLMFuk2SLOmYIKzB6gEiz8HoB7O7U4meQXnLZp1qGApD8BuOcsh7AewcL3kuyadg4OjSSbhRxH0j4BjJok2Ufga0j+YdQHlcznDlBNsPAa+xpP8r/rEHbxjAKPbRuyHvKFY0Ik6QUALOprPfIT1gHRbAGSdDoA77aSX5Zg4e8nhGfx6FEgWoJn8Zy1QCTplq5vjc3NwnoEC/eQ/HYD8IwC0TbwrA2i2QHUI1h4JskLGoJnUIhWwLMWiGYFkCSLMX2t5WDhlneeLm5Dw5kDntEhkmRhEVvesWNqZgiTdC6AN3W1Svn72oOFkuxF+WcVIQUrai+IKuA5BBHJ453auc1mA1AJFn7Jsf7EKj9ZsLBHw1ZDtI5neAmaBUBzCxaO2cBj5u2FZtlO0l8A3K3ZIaxHsPB8kt5vYn00c/mM0dBj5OmqzAqjOQDUfLBwJ32HbPAh84pCM5seSNJLAHzcWeFJgoVdZRui4YfIo6ucff8uyVY03LW5IawyWPgvW5u77mChV/QIABFfb/kidk0CVKbDth3Huw35dJLeniqiV2/fniDYx1f7vlWTeoUFah6wZQhrqwcqwUKbrtsaH0+6mOQpHsOpbXpCVFPstcJjBZNkmzHv0swQJultAN7iVO375TyafzjtJzcbEaK1w9McQJXBQlvvYmtsfjE5FZUFGAGiSeBpCqDKYKFtmX0qya9Utl0z5gNCNBk8BSA7CtiODNwxjf4trEew8BySNtTNOg0A0aTwtARQTbDQeh3rfawXmn0KQDQ5PC0B9EkAL3LSkAD9X6hWALIJzJ3mNoSdS9I7U3NyuX6zQO+zKOzkEEmaHqDSFdpZM97tOfkSfRvvk0LUDEAFIgseetf85DS+AYgk/bPr1NvRZ2HLg4ektwI4xzmgZCBxYohaBMjWPeenDOcvaIvZ2oez5gAqQ5mtLbb3oa4z+Bb6nTHW1UP92vFIr54vzJ8BcGplGdYKkSRbCXGHSWdh2z1ckp1taGccroxyFt9cznG4iGuDqFmASk9kZxxakNGTckHZBBA1DVCB6BMAXuwhyA4VmGL/+05l6zlsbdt7DJmXU0uXmSQ7JvD2zQ1hiwJJsotRvlVxXO87SU5+heUYDT5Gni5KVhg1D1DphWqCjOYy6RlAYzb0mHn3gWkWABWIaoKMubHwSBpGebGWZNdc2vmUO6a1BhJXFUSSff/yLuOYamvzzwEcVfFr7tWwPXqi6uN2PXWYG0C1Qca1n8RaDlewl3kPRL3gWXo/XBwo1dXWdk/a3jEOnJoVQGUoqw0yvpLkh7oUHvLvTohC8FRANBo8pT3sxLeVJ/M2M4QtiVYTZJzkNPoOiAaBxwHRqPDMFqBS8Jog4yT3YewA0aDwrIBodHhmDVApvG0mtO3PnjTJjTxbIBoFnm0gWgs8pQ06lxY3N4QtCWZBRgPDezdnHvPr+alV2EiaL0DlF2Dbn20bdB40XtHwQ5nOHqAC0SyCjEM1Wkv57AqACkRvBvB2p7hrDzI6yzU7s90EUPNBxtnR4SjwrgGo9EK1Qca8cM4ByU4mkuz++F93ZHELyZX3iW31n+S+sKWZWfNBxkCbNeUq6ekArugo1I0kH1xT8EkBKj1R80HGGkFbtZVkZ3bb2d2r0tUkn1hTh8kBKhB9DMBLnQWfJMjoLFuTZpJsO/ONAB7UUcBLSHqvX781q1YAqg0yfoDkq5psrQYLJeldAF7nKFr1x+wmACq9kAUZLazvvTV4P8kDDlE22kTSQ4uuK9dCF5HuR/I3NYI1A1CBaB+AK50VsAMj7TJeixNl2kYBSccCsB/ZMQ6Brif5GIfdYSZNAVQg8rzsLSphl/Hapby2LDZTUaBcq/56ALb1fOVxLkuinULy4loRmwOoQGQX7T7DWZnPk3y203bXmkl6AIA91isDOBGADV3e1HsJbasA1QYZvUKl3fYKPI2knXFQnZoEqPRCNUHG6oqnwyEFLiJ5Wl89mgWoQFQTZOyrwSb7WUztcSRtu0+v1DRABaKPADijV+3SaZUCNgE5geTNEZnmAFBtkDGix6b4Xld2BNvJcaHUPEClF6oNMoZE2eXOtm3q1ZFha1mfWQBUINoL4Kqurbm7vPEj1bOAqx3udW0kk62+swGoQHQ2gPOGFGAD8roJgF0t+qkx6jorgApElwE4aQwxZp6n3YNxsPyzA7yst/4iSdvEMFqaHUCjKZEZ91IgAeolWzotFEiAkoWQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnT+H0jPT81J3xWWAAAAAElFTkSuQmCC"}}}}}};function _o(){var e,t,n=0,r={duration:750,easing:"ease-in-out"},o={alpha:1,color:4294967295};var i=Jr((function(o){return o.startsWith("#")?(e.color=o,e.src="",e.alpha=1,n=1,void(t.alpha=0)):(e.color=4294967295,0===n?(e.src=o,void(n=1)):1===n?(t.src=o,n=2,t.alpha=0,t.animate({alpha:1},r).start(),void e.animate({alpha:0},r).start()):void(2===n&&(e.src=o,n=1,e.alpha=0,e.animate({alpha:1},r).start(),t.animate({alpha:0},r).start())))}),400);return Y(K(So,(function(e){i(e)}),{defer:!0})),Gn(Pn,{width:1920,height:1080,zIndex:-5,get children(){return[Gn(Pn,{ref:function(t){"function"==typeof e?e(t):e=t},style:o}),Gn(Pn,{ref:function(e){"function"==typeof t?t(e):t=e},style:o,alpha:0}),Gn(Pn,{src:"/assets/hero-mask-inverted.png",get color(){return qn(ko.color.materialBrand)},width:1920,height:1080})]}})}var Eo={inverse:"base",brand:"base",focus:"base",disabled:"base","neutral-focus":"focus","neutral-disabled":"disabled","inverse-focus":"focus","inverse-disabled":"disabled","brand-focus":"focus","brand-disabled":"disabled"};function Co(e){var t,n,r,o,i,a=e.themeKeys,s=e.base,l=e.toneModes,u=e.themeStyles,c=e.toneModeFallbackMap,d=void 0===c?Eo:c,h=function(e,t){var n;return null==(n=null==u?void 0:u[e])?void 0:n[t]},f=function(e,t,n){var r=Object.entries(t);return Object.fromEntries(r.map((function(t){var r,o=b(t,2),i=o[0],a=o[1];return[i,null!==(r=h(e,n[i]))&&void 0!==r?r:a]})))};return t=l,r=function(e,t){var n=Object.entries(e);return Object.fromEntries(n.map((function(e){var n,r=b(e,2),o=r[0],i=r[1];return[o,(null==t?void 0:t[o])&&null!==(n=h("base",t[o]))&&void 0!==n?n:i]})))}(s,n=a),o=function(e,t,n){if(!t)return e;var r=Object.entries(t);return y(y({},e),Object.fromEntries(r.map((function(e){var t=b(e,2),r=t[0],o=t[1];return[r,f(r,o,n)]}))))}(r,t,n),i=function(e){return Object.keys(d).filter((function(t){return!Object.keys(e).includes(t)})).forEach((function(t){e[t]=y(y({},e[d[t]]),null==u?void 0:u[t])})),e}(o),i}function Ro(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(t,n,r,o){if(0!==t.children.length){var i=t.gap||0,a=t.scroll||"auto",s=function(e){var t,n;"row"===e.flexDirection?(t={position:e.children[e.children.length-1].x,size:e.children[e.children.length-1].width},n=e.width):(t={position:e.children[e.children.length-1].y,size:e.children[e.children.length-1].height},n=e.height);return[t,n]}(t),l=b(s,2),u=l[0],c=l[1],d="row"===t.flexDirection?t.x:t.y,h="row"===t.flexDirection?n.x:n.y,f="row"===t.flexDirection?n.width:n.height,p=r>o?"positive":"negative",v=d;"auto"===a?null!=t.scrollIndex&&t.scrollIndex>=0?t.selected>=t.scrollIndex&&(v="positive"===p?d-f-i:d+f+i):(Math.abs(d)+c<u.position+u.size||h<Math.abs(d))&&(v=-h+e):"always"===a||"edge"===a&&"negative"===p&&Math.abs(d)>h?v=-h+e:"edge"===a&&"positive"===p&&Math.abs(d)+c<h+f&&(v=d-f-i),"row"===t.flexDirection&&t.x!==v?t.x=v:"column"===t.flexDirection&&t.y!==v&&(t.y=v)}}}var Io=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter((function(e){return"function"==typeof e}));if(0!==r.length)return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o,i=w(r);try{for(i.s();!(o=i.n()).done;){if(!0===o.value.apply(this,t))return!0}}catch(a){i.e(a)}finally{i.f()}}};function Bo(){if(!this||void 0===this.selected||0===this.children.length)return!1;for(var e=this.children[this.selected];null==e?void 0:e.skipFocus;)this.selected++,e=this.children[this.selected];if(!(e instanceof Ln))return!1;e.setFocus()}function No(e){return function(){var t,n,r=this.children.length,o=this.wrap,i=this.selected||0;if(0===r)return!1;if("right"===e||"down"===e){do{if(this.selected=(this.selected||0)%r+1,this.selected>=r){if(!o){this.selected=void 0;break}this.selected=0}}while(null==(t=this.children[this.selected])?void 0:t.skipFocus)}else if("left"===e||"up"===e)do{if(this.selected=(this.selected||0)%r-1,this.selected<0){if(!o){this.selected=void 0;break}this.selected=r-1}}while(null==(n=this.children[this.selected])?void 0:n.skipFocus);if(void 0===this.selected&&(this.selected=i,this.children[this.selected].states.has("focus")))return!1;var a=this.children[this.selected];if(this.onSelectedChanged&&this.onSelectedChanged.call(this,this,a,this.selected,i),this.plinko&&void 0!==i){var s=this.children[i].selected||0;a.selected=s<a.children.length?s:a.children.length-1}return a.setFocus(),!0}}var Mo=(null==(io=ko)?void 0:io.componentConfig).Artwork,Lo=void 0===Mo?{styles:{},defaultTone:"neutral"}:Mo,Fo=Lo.styles;Lo.defaultTone;Co({themeKeys:{fillColor:"fillColor",borderRadius:"borderRadius",scale:"imageScale",pivotX:"imageScalePivotX",pivotY:"imageScalePivotY"},base:{borderRadius:ko.radius.md,fallbackSrc:void 0,fillColor:ko.color.overlay,gradientColor:ko.color.material,pivotX:.5,pivotY:.5,scale:void 0},themeStyles:Fo});var Po=(null==(ao=ko)?void 0:ao.componentConfig).Icon,Do=void 0===Po?{styles:{},defaultTone:"neutral"}:Po,Uo=Do.styles;Do.defaultTone;Co({themeKeys:{color:"color"},base:{width:100,height:100,color:ko.color.fillInverse},toneModes:{inverse:{color:ko.color.fillInverse},brand:{color:ko.color.fillBrand}},themeStyles:Uo});var Oo=(null==(so=ko)?void 0:so.componentConfig).Badge,zo=void 0===Oo?{styles:{},defaultTone:"neutral"}:Oo,Wo=zo.styles,Xo=(zo.defaultTone,{themeKeys:{color:"backgroundColor"},base:{color:ko.color.fillInverseSecondary,borderRadius:ko.radius.sm,border:{color:ko.color.strokeInverse,width:ko.stroke.sm},display:"flex",justifyContent:"spaceEvenly",padding:[ko.spacer.md-ko.stroke.sm,ko.spacer.xs+ko.stroke.sm,ko.spacer.md+ko.stroke.sm,ko.spacer.md+ko.stroke.sm]},toneModes:{inverse:{color:ko.color.fillNeutralSecondary,border:{color:ko.color.strokeInverseSecondary,width:ko.stroke.sm}},brand:{color:ko.color.fillBrand,border:{color:ko.color.strokeInverseSecondary,width:ko.stroke.sm}}},themeStyles:Wo}),Yo={themeKeys:{color:"textColor"},base:y(y({},ko.typography.tag1),{},{color:ko.color.textNeutral}),toneModes:{inverse:{color:ko.color.textInverse},brand:{color:ko.color.textNeutral}},themeStyles:Wo},Go={themeKeys:{color:"iconColor"},base:{color:ko.color.textNeutral},toneModes:{inverse:{color:ko.color.textInverse},brand:{color:ko.color.textNeutral}},themeStyles:Wo};Co(Xo),Co(Go),Co(Yo);var jo=(null==(lo=ko)?void 0:lo.componentConfig).Button,Ho=void 0===jo?{styles:{},defaultTone:"neutral"}:jo,Qo=Ho.styles,Ko=(Ho.defaultTone,{themeKeys:{textAlign:"textAlign",borderRadius:"borderRadius",color:"backgroundColor",justifyContent:"justifyContent",contentColor:"contentColor"},base:{height:ko.typography.button1.lineHeight+2*ko.spacer.xl,display:"flex",padding:[ko.spacer.xxxl,ko.spacer.xl],color:ko.color.interactiveNeutral,justifyContent:"center",alignItems:"center",borderRadius:ko.radius.sm,contentColor:ko.color.fillNeutral},toneModes:{focus:{color:ko.color.interactiveNeutralFocus,contentColor:ko.color.fillInverse},disabled:{color:ko.color.fillNeutralDisabled,contentColor:ko.color.textNeutralDisabled},inverse:{color:ko.color.interactiveInverse},brand:{contentColor:ko.color.fillBrand},"inverse-focus":{color:ko.color.interactiveInverseFocus,contentColor:ko.color.fillNeutral},"brand-focus":{contentColor:ko.color.fillNeutral}},themeStyles:Qo}),Vo={themeKeys:{color:"textColor"},base:y({textAlign:"left",color:ko.color.textNeutral},ko.typography.button1),toneModes:{focus:{color:ko.color.textInverse},disabled:{color:ko.color.textNeutralDisabled},"inverse-focus":{color:ko.color.textNeutral}},themeStyles:Qo};Co(Ko),Co(Vo);var Zo=(null==(uo=ko)?void 0:uo.componentConfig).Checkbox,qo=void 0===Zo?{styles:{},defaultTone:"neutral"}:Zo,Jo=qo.styles,$o=(qo.defaultTone,ko.stroke.sm),ei=ko.spacer.xxl,ti={themeKeys:{color:"color",borderRadius:"borderRadius",border:"border",justifyContent:"justifyContent"},base:{width:ei,height:ei,display:"flex",justifyContent:"center",color:ko.color.fillNeutral,alignItems:"center",borderRadius:ei/4,border:{color:ko.color.strokeInverse,width:$o}},toneModes:{neutral:{border:{color:ko.color.strokeNeutralSecondary,width:$o},color:ko.color.fillInverseSecondary},"neutral-checked":{border:{color:ko.color.strokeNeutralSecondary,width:$o},color:ko.color.fillNeutral},inverse:{border:{color:ko.color.strokeInverseSecondary,width:$o},color:ko.color.fillNeutralSecondary},"inverse-checked":{border:{color:ko.color.strokeInverseSecondary,width:$o},color:ko.color.fillInverse},brand:{border:{color:ko.color.strokeNeutralSecondary,width:$o},color:ko.color.fillNeutralSecondary},"brand-checked":{border:{color:ko.color.strokeNeutralSecondary,width:$o},color:ko.color.fillBrand},disabled:{alpha:ko.alpha.inactive}},themeStyles:Jo},ni={themeKeys:{color:"color"},base:{width:ko.spacer.lg,height:ko.spacer.lg,src:ko.asset.check},toneModes:{neutral:{color:ko.color.fillInverse},inverse:{color:ko.color.fillNeutral},brand:{color:ko.color.fillInverse}},themeStyles:Jo};Co(ti),Co(ni);var ri=(null==(co=ko)?void 0:co.componentConfig).Column,oi=void 0===ri?{styles:{},defaultTone:"neutral"}:ri,ii=oi.styles,ai={tone:oi.defaultTone,Container:Co({themeKeys:{gap:"itemSpacing",scrollIndex:"scrollIndex",itemTransition:"itemTransition"},base:{display:"flex",justifyContent:"flexStart",flexDirection:"column",gap:ko.layout.gutterY,itemTransition:y(y({},ko.animation.standardEntrance),{},{duration:ko.animation.duration.fast})},toneModes:{},themeStyles:ii})},si=function(e){var t=No("up"),n=No("down");return Gn(Pn,Vn(e,{get onUp(){return Io(e.onUp,t)},get onDown(){return Io(e.onDown,n)},get selected(){return e.selected||0},forwardFocus:Bo,get onSelectedChanged(){return Io(e.onSelectedChanged,"none"!==e.scroll?Ro(e.y):void 0)},get tone(){var t;return null!==(t=e.tone)&&void 0!==t?t:ai.tone},get style(){var t,n,r,o;return[].concat(v([e.style].flat()),[null==(t=e.style)?void 0:t.Container,null==(r=null==(n=e.style)?void 0:n.Container)?void 0:r[e.tone||ai.tone],ai.Container,null==(o=ai.Container)?void 0:o[e.tone||ai.tone]])},get states(){var t;return null!==(t=e.tone)&&void 0!==t?t:ai.tone}}))},li=(null==(ho=ko)?void 0:ho.componentConfig).Label,ui=void 0===li?{styles:{},defaultTone:"neutral"}:li,ci=ui.styles,di=(ui.defaultTone,{themeKeys:{color:"backgroundColor",borderRadius:"radius"},base:{display:"flex",color:ko.color.textNeutral,padding:[ko.spacer.md,ko.spacer.lg],borderRadius:[ko.radius.md,ko.radius.md,ko.radius.md,ko.radius.none],height:ko.typography.caption1.lineHeight+ko.spacer.md,neutral:{backgroundColor:ko.color.fillNeutral}},toneModes:{inverse:{color:ko.color.fillInverse},brand:{color:ko.color.orange},"brand-focus":{color:ko.color.orange}},themeStyles:ci}),hi={themeKeys:{color:"textColor"},base:y(y({},ko.typography.caption1),{},{color:ko.color.textInverse}),toneModes:{inverse:{color:ko.color.textNeutral},brand:{color:ko.color.textNeutral}},themeStyles:ci};Co(di),Co(hi);var fi=(null==(fo=ko)?void 0:fo.componentConfig).Rating,pi=void 0===fi?{styles:{},defaultTone:"neutral"}:fi,vi=pi.styles,gi=(pi.defaultTone,{themeKeys:{justifyContent:"justifyContent",itemSpacing:"itemSpacing"},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart",itemSpacing:ko.spacer.sm},toneModes:{},themeStyles:vi}),yi={themeKeys:{color:"textColor"},base:y({color:ko.color.textNeutral},ko.typography.body2),toneModes:{},themeStyles:vi},mi={themeKeys:{color:"color"},base:{height:ko.typography.body2.lineHeight,width:ko.typography.body2.lineHeight,color:ko.color.fillNeutral,marginRight:ko.spacer.sm},toneModes:{},themeStyles:vi};Co(gi),Co(mi),Co(yi);var xi=(null==(po=ko)?void 0:po.componentConfig).Details,bi=void 0===xi?{styles:{},defaultTone:"neutral"}:xi,wi=bi.styles,Ai=(bi.defaultTone,{themeKeys:{alignItems:"alignItems",contentSpacing:"contentSpacing",badgeContentSpacing:"badgeContentSpacing",ratingContentSpacing:"ratingContentSpacing"},base:{display:"flex",flexDirection:"row",alignItems:"center",contentSpacing:ko.spacer.lg,badgeContentSpacing:ko.spacer.sm,ratingContentSpacing:ko.spacer.lg},toneModes:{},themeStyles:wi}),Si={themeKeys:{color:"textColor"},base:y(y({},ko.typography.body2),{},{marginRight:ko.spacer.lg,color:ko.color.textNeutral}),toneModes:{inverse:{color:ko.color.textInverse},brand:{color:ko.color.textNeutral},"inverse-disabled":{color:ko.color.textNeutralDisabled},"neutral-disabled":{color:ko.color.textNeutralDisabled},"brand-disabled":{color:ko.color.textNeutralDisabled}},themeStyles:wi};Co(Ai),Co(Si);var Ti=(null==(vo=ko)?void 0:vo.componentConfig).Metadata,ki=void 0===Ti?{styles:{},defaultTone:"neutral"}:Ti,_i=ki.styles,Ei=(ki.defaultTone,{themeKeys:{justifyContent:"justifyContent",alpha:"alpha"},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart",alpha:ko.alpha.primary},toneModes:{disabled:{alpha:ko.alpha.inactive}},themeStyles:_i}),Ci={themeKeys:{color:"textColor"},base:y(y({maxLines:1,contain:"width"},ko.typography.headline3),{},{color:ko.color.textNeutral}),toneModes:{inverse:{color:ko.color.textInverse},brand:{color:ko.color.textNeutral},"inverse-disabled":{color:ko.color.textNeutralDisabled},"neutral-disabled":{color:ko.color.textNeutralDisabled},"brand-disabled":{color:ko.color.textNeutralDisabled}},themeStyles:_i},Ri={themeKeys:{color:"textColor"},base:y(y({contain:"width",maxLines:2},ko.typography.body2),{},{color:ko.color.textNeutralSecondary}),toneModes:{inverse:{color:ko.color.textInverseSecondary},brand:{color:ko.color.textNeutralSecondary},"inverse-disabled":{color:ko.color.textNeutralDisabled},"neutral-disabled":{color:ko.color.textNeutralDisabled},"brand-disabled":{color:ko.color.textNeutralDisabled}},themeStyles:_i};Co(Ei),Co(Ri),Co(Ci);var Ii=(null==(go=ko)?void 0:go.componentConfig).ProgressBar,Bi=void 0===Ii?{styles:{},defaultTone:"neutral"}:Ii,Ni=Bi.styles,Mi=(Bi.defaultTone,{themeKeys:{color:"barColor",borderRadius:"borderRadius"},base:{height:ko.spacer.md,color:ko.color.fillNeutralTertiary,borderRadius:ko.radius.xs},toneModes:{inverse:{color:ko.color.fillInverseTertiary}},themeStyles:Ni}),Li={themeKeys:{color:"progressColor",borderRadius:"borderRadius"},base:{borderRadius:ko.radius.xs,color:ko.color.fillNeutral},toneModes:{inverse:{color:ko.color.fillInverse},brand:{color:ko.color.fillBrand}},themeStyles:Ni};Co(Mi),Co(Li);var Fi=(null==(yo=ko)?void 0:yo.componentConfig).Row,Pi=void 0===Fi?{styles:{},defaultTone:"neutral"}:Fi,Di=Pi.styles,Ui={tone:Pi.defaultTone,Container:Co({themeKeys:{gap:"itemSpacing",scrollIndex:"scrollIndex",itemTransition:"itemTransition"},base:{display:"flex",justifyContent:"flexStart",flexDirection:"row",gap:ko.layout.gutterX,width:ko.layout.screenW,itemTransition:y(y({},ko.animation.standardEntrance),{},{duration:ko.animation.duration.fast})},toneModes:{},themeStyles:Di})},Oi=function(e){var t=No("left"),n=No("right");return Gn(Pn,Vn(e,{get selected(){return e.selected||0},get onLeft(){return Io(e.onLeft,t)},get onRight(){return Io(e.onRight,n)},forwardFocus:Bo,get onSelectedChanged(){return Io(e.onSelectedChanged,"none"!==e.scroll?Ro(e.x):void 0)},get tone(){var t;return null!==(t=e.tone)&&void 0!==t?t:Ui.tone},get style(){var t,n,r,o;return[].concat(v([e.style].flat()),[null==(t=e.style)?void 0:t.Container,null==(r=null==(n=e.style)?void 0:n.Container)?void 0:r[e.tone||Ui.tone],Ui.Container,null==(o=Ui.Container)?void 0:o[e.tone||Ui.tone]])},get states(){var t;return null!==(t=e.tone)&&void 0!==t?t:Ui.tone}}))},zi=(null==(mo=ko)?void 0:mo.componentConfig).Keyboard,Wi=void 0===zi?{styles:{},defaultTone:"neutral"}:zi,Xi=Wi.styles,Yi=(Wi.defaultTone,{themeKeys:{keySpacing:"keySpacing",screenW:"screenW",marginX:"marginX"},base:{keySpacing:ko.spacer.md,screenW:ko.layout.screenW,marginX:ko.layout.marginX,height:100},toneModes:{},themeStyles:Xi}),Gi={themeKeys:{keySpacing:"keySpacing",textAlign:"textAlign",borderRadius:"borderRadius",color:"backgroundColor",justifyContent:"justifyContent",baseWidth:"baseWidth",sizes:"sizes",contentColor:"contentColor"},base:{keySpacing:ko.spacer.md,height:9*ko.spacer.md,paddingX:ko.spacer.md,sizes:{sm:1,md:2,lg:3,xl:4,xxl:5},contentColor:ko.color.fillNeutral,padding:[ko.spacer.xxxl,ko.spacer.xl],baseWidth:7*ko.spacer.md,color:ko.color.interactiveNeutral,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:ko.radius.sm},toneModes:{focus:{color:ko.color.interactiveNeutralFocus,contentColor:ko.color.fillInverse},disabled:{color:ko.color.fillNeutralDisabled,contentColor:ko.color.fillNeutralDisabled},inverse:{color:ko.color.interactiveInverse},"inverse-focus":{color:ko.color.interactiveInverseFocus,contentColor:ko.color.fillNeutral},"brand-focus":{contentColor:ko.color.fillNeutral}},themeStyles:Xi},ji={themeKeys:{color:"textColor"},base:y({textAlign:"left",color:ko.color.textNeutral},ko.typography.headline2),toneModes:{focus:{color:ko.color.textInverse},disabled:{color:ko.color.textNeutralDisabled},"inverse-focus":{color:ko.color.textNeutral}},themeStyles:Xi};Co(Yi),Co(Gi),Co(ji);var Hi=(null==(xo=ko)?void 0:xo.componentConfig).Key,Qi=void 0===Hi?{styles:{},defaultTone:"neutral"}:Hi,Ki=Qi.styles,Vi=(Qi.defaultTone,{themeKeys:{keySpacing:"keySpacing",textAlign:"textAlign",borderRadius:"borderRadius",color:"backgroundColor",justifyContent:"justifyContent",baseWidth:"baseWidth",sizes:"sizes",contentColor:"contentColor"},base:{keySpacing:ko.spacer.md,height:9*ko.spacer.md,paddingX:ko.spacer.md,contentColor:ko.color.fillNeutral,sizes:{sm:1,md:2,lg:3,xl:4,xxl:5},padding:[ko.spacer.xxxl,ko.spacer.xl],baseWidth:7*ko.spacer.md,color:ko.color.interactiveNeutral,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:ko.radius.sm},toneModes:{focus:{color:ko.color.interactiveNeutralFocus,contentColor:ko.color.fillInverse},disabled:{color:ko.color.fillNeutralDisabled,contentColor:ko.color.fillNeutralDisabled},inverse:{color:ko.color.interactiveInverse},"inverse-focus":{color:ko.color.interactiveInverseFocus,contentColor:ko.color.fillNeutral},"brand-focus":{contentColor:ko.color.fillNeutral}},themeStyles:Ki}),Zi={themeKeys:{color:"textColor"},base:y({textAlign:"left",color:ko.color.textNeutral},ko.typography.headline2),toneModes:{focus:{color:ko.color.textInverse},disabled:{color:ko.color.textNeutralDisabled},"inverse-focus":{color:ko.color.textNeutral}},themeStyles:Ki};Co(Vi),Co(Zi);var qi=(null==(bo=ko)?void 0:bo.componentConfig).Tile,Ji=void 0===qi?{styles:{},defaultTone:"neutral"}:qi,$i=Ji.styles,ea=(Ji.defaultTone,(null==(wo=ko)?void 0:wo.componentConfig).Surface),ta=(void 0===ea?{styles:{}}:ea).styles,na={themeKeys:{alpha:"alpha"},base:{width:400,height:240,padding:[40,10],paddingYProgress:ko.spacer.xl,paddingYBetweenContent:ko.spacer.md,borderRadius:ko.radius.md,alpha:ko.alpha.primary},toneModes:{disabled:{alpha:ko.alpha.inactive}},themeStyles:y(y({},ta),$i)},ra={themeKeys:{},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart",mountY:1},toneModes:{},themeStyles:$i},oa={themeKeys:{},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart"},toneModes:{},themeStyles:$i},ia={themeKeys:{},base:{width:5*ko.spacer.lg,height:ko.spacer.xxl+ko.spacer.md},toneModes:{},themeStyles:$i};Co(na),Co(ra),Co(oa),Co(ia);var aa={Column:{flexDirection:"column",display:"flex",width:320,height:600,y:360,gap:20,zIndex:101,transition:{x:{duration:250,easing:"ease-in-out"}},x:8,focus:{x:ko.layout.marginX}},Gradient:{zIndex:99,color:qn("#000000"),src:"/assets/sidenav.png",alpha:0,width:1200,height:1080,focus:{alpha:1},transition:{alpha:!0}},NavButton:{zIndex:102,height:70,width:100,borderRadius:8,focus:{color:qn(ko.color.material)},active:{width:328,height:70}}},sa="/solid-demo-app/",la=[{name:"experiment",width:81,height:100,x:0,y:0},{name:"trending",width:100,height:56,x:81,y:0},{name:"tv",width:100,height:68,x:181,y:0},{name:"movie",width:94,height:100,x:282,y:0}];function ua(e){var t,n,r,o=(t=sa+"assets/icons_white.png",n=la,r=wn.createTexture("ImageTexture",{src:t}),n.reduce((function(e,t){var n=t.x,o=t.y,i=t.width,a=t.height;return e[t.name]=wn.createTexture("SubTexture",{texture:r,x:n,y:o,width:i,height:a}),e}),{}));return Gn(Pn,Vn(e,{get texture(){return o[e.name]},get width(){return o[e.name].props.width},get height(){return o[e.name].props.height},get x(){return(100-(o[e.name].props.width||0))/2},get y(){return(100-(o[e.name].props.height||0))/2}}))}function ca(e){return Gn(Pn,Vn(e,{forwardStates:!0,get style(){return aa.NavButton},get children(){return[Gn(Pn,{y:-16,get children(){return Gn(ua,{scale:.5,get name(){return e.icon}})}}),Gn(Fn,{get style(){return y(y({},ko.typography.button1),{},{fontSize:38,x:116,y:16,height:50,alpha:0,active:{alpha:1}})},get children(){return e.children}})]}}))}function da(e){var t,n=yr();return[Gn(si,Vn(e,{onFocus:function(){t.states.add("focus"),this.children.forEach((function(e){return e.states.add("active")})),this.children.selected.setFocus()},onBlur:function(){t.states.remove("focus"),this.selected=0,this.children.forEach((function(e){return e.states.remove("active")}))},get style(){return aa.Column},scroll:"none",get children(){return[Gn(ca,{onEnter:function(){return n("/browse/all")},icon:"trending",children:"Trending"}),Gn(ca,{icon:"movie",onEnter:function(){return n("/browse/movie")},children:"Movies"}),Gn(ca,{icon:"tv",onEnter:function(){return n("/browse/tv")},children:"TV"}),Gn(ca,{icon:"experiment",onEnter:function(){return n("/examples")},children:"Examples"})]}})),Gn(Pn,{ref:function(e){"function"==typeof t?t(e):t=e},get style(){return aa.Gradient}})]}var ha={color:255,height:90,width:330,x:1500,y:20,alpha:.8,zIndex:100},fa={x:10,fontSize:36,textColor:qn("#ffffff")},pa={fontSize:36,textColor:qn("#ffffff")},va=b(z(0),2),ga=va[0],ya=va[1],ma=b(z(0),2),xa=ma[0],ba=ma[1],wa=b(z(99),2),Aa=wa[0],Sa=wa[1],Ta=b(z(0),2),ka=Ta[0],_a=Ta[1],Ea=0,Ca=0,Ra=Jr((function(){Ca=0,Ea=0,Sa(99)}),1e4);function Ia(e){e.renderer.on("fpsUpdate",(function(e,t){var n="number"==typeof t?t:t.fps;n>5&&function(e){e&&(ya(e),Sa((function(t){return Math.min(e,t)})),_a((function(t){return Math.max(e,t)})),Ca+=e,Ea++,ba(Math.round(Ca/Ea)),Ra())}(n)}))}var Ba=function(e){return Gn(Pn,Vn(e,{style:ha,get children(){return[Gn(Pn,{get children(){return[Gn(Fn,{style:fa,children:"FPS:"}),Gn(Fn,{style:pa,x:94,get children(){return ga().toString()}})]}}),Gn(Pn,{x:160,get children(){return[Gn(Fn,{style:fa,children:"AVG:"}),Gn(Fn,{style:pa,x:104,get children(){return xa().toString()}})]}}),Gn(Pn,{x:0,y:40,get children(){return[Gn(Fn,{style:fa,children:"MIN:"}),Gn(Fn,{style:pa,x:94,get children(){return Aa().toString()}})]}}),Gn(Pn,{x:160,y:40,get children(){return[Gn(Fn,{style:fa,children:"MAX:"}),Gn(Fn,{style:pa,x:104,get children(){return ka().toString()}})]}})]}}))},Na=function(e){Gr({Announcer:"a",Menu:"m",Escape:"Escape"});var t=(oo.setupTimers(),Y(K(Xr,oo.onFocusChange,{defer:!0})),oo);t.enabled=!1;var n,r,o=yr();return Gn(Pn,{ref:function(e){var t=window.APP;"function"==typeof t?t(e):window.APP=e},onAnnouncer:function(){return t.enabled=!t.enabled},onLast:function(){return history.back()},onMenu:function(){return o("/")},style:{width:1920,height:1080},onLeft:function(){if(n.states.has("focus"))return!1;r=Ie(),n.setFocus()},onRight:function(){return n.states.has("focus")&&r.setFocus()},get children(){return[Gn(_o,{}),Gn(Ba,{}),Yn((function(){return e.children})),Gn(da,{ref:function(e){"function"==typeof n?n(e):n=e}})]}})},Ma={Page:{width:1920,height:1080},headlineText:{width:1200,height:240,x:360,y:455,contain:"both",fontSize:66,textAlign:"center"},headlineSubText:{width:960,height:170,x:530,y:655,contain:"both",fontSize:48,textAlign:"center"},itemsContainer:{width:ko.layout.screenW,height:600,y:560,x:0,zIndex:2},Thumbnail:{borderRadius:16,width:185,height:278,scale:1,zIndex:2,transition:{scale:{duration:250,easing:"ease-in-out"}},border:{width:0,color:0},focus:{scale:1.1,border:{color:ko.color.materialBrand,width:6}}},FocusRing:{borderRadius:16,width:194,height:286,y:-5,x:-5,zIndex:-1},FPS:{color:255,height:42,width:140,x:20,y:20,zIndex:100},FPSLabel:{x:10,y:0,fontSize:36,textColor:qn("#ffffff")},FPSValue:{x:90,y:0,fontSize:36,textColor:qn("#ffffff")},showHeadline:{x:70,y:20},headlineBlur:{width:1920,height:150,x:0,y:0,zIndex:14,alpha:.9,color:qn("#000000")},RowTitle:{height:60,width:300,marginTop:20,fontSize:36,color:qn("#f0f0f0"),zIndex:2},Row:{display:"flex",justifyContent:"spaceBetween",height:300},Column:{display:"flex",flexDirection:"column",justifyContent:"flexStart",gap:20,width:ko.layout.screenW-2*ko.layout.marginX,x:ko.layout.marginX+ko.layout.gutterX,y:48,transition:{y:{duration:250,easing:"ease-in-out"}},zIndex:2},Rect:{width:250,height:100,y:10,x:300,color:qn("#0000ff")},peopleBio:y(y({},ko.typography.body1),{},{contain:"both",width:1500,height:400})},La={width:120,height:40,color:qn("#000000"),borderRadius:8,border:{width:2,color:qn("#3333ff")},scale:1,focus:{scale:1.1,border:{width:5,color:qn("#333333")}},transition:{scale:!0,color:!0}},Fa={container:La,topBar:{color:qn("#00A699"),height:8,y:2,x:-4,width:La.width+8},text:{fontSize:12,y:12,contain:"width",textAlign:"center",color:qn("#F6F6F9"),height:La.height,width:La.width}},Pa=386,Da=136,Ua=(qn("#715cab"),qn("#5a39a2"),qn("#291d43"),{fontSize:32,contain:"width",textAlign:"center",mountY:-.35,color:qn("#FFFFFF"),height:Da,width:Pa,focus:{fontSize:40},disabled:{color:qn("#909090")}});function Oa(e){return Gn(Pn,Vn(e,{get style(){return Ma.Thumbnail}}))}function za(e){var t=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(k in e){var o=new Set(n.length>1?n.flat():n[0]),i=n.map((function(t){return new Proxy({get:function(n){return t.includes(n)?e[n]:void 0},has:function(n){return t.includes(n)&&n in e},keys:function(){return t.filter((function(t){return t in e}))}},Ae)}));return i.push(new Proxy({get:function(t){return o.has(t)?void 0:e[t]},has:function(t){return!o.has(t)&&t in e},keys:function(){return Object.keys(e).filter((function(e){return!o.has(e)}))}},Ae)),i}var a,s={},l=n.map((function(){return{}})),u=w(Object.getOwnPropertyNames(e));try{for(u.s();!(a=u.n()).done;){var c,d=a.value,h=Object.getOwnPropertyDescriptor(e,d),f=!h.get&&!h.set&&h.enumerable&&h.writable&&h.configurable,p=!1,g=0,y=w(n);try{for(y.s();!(c=y.n()).done;)c.value.includes(d)&&(p=!0,f?l[g][d]=h.value:Object.defineProperty(l[g],d,h)),++g}catch(m){y.e(m)}finally{y.f()}p||(f?s[d]=h.value:Object.defineProperty(s,d,h))}}catch(m){u.e(m)}finally{u.f()}return[].concat(v(l),[s])}(e,["items"]),n=b(t,2),r=n[0],o=n[1];return Gn(Oi,Vn(o,{get style(){return Ma.Row},get children(){return Gn(Ee,{get each(){return r.items},children:function(e){return Gn(Oa,e)}})}}))}function Wa(e){return Gn(Pn,Vn(e,{forwardStates:!0,get style(){return Fa.container},get children(){return Gn(Fn,{get style(){return Fa.text},get children(){return e.children}})}}))}var Xa,Ya,Ga="https://api.themoviedb.org/3",ja="w185",Ha={headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIyZDE4YjEwMTA0YjdiZTlkNjFiMWYwYjVlMGEwNzM2OCIsInN1YiI6IjYwZTVjMTdlNGNhNjc2MDA3NTA4Njc3MSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.D_nqH9kd-bhhWzeVsTDPYhHnsUaNAuyAa6YATmKHqsA"}};function Qa(e){return Ya+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:ja)+e}function Ka(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(Ga+e,y(y({},Ha),t)).then((function(e){return e.json()}))}function Va(){return Ka("/configuration").then((function(e){var t;return Xa=e,Ya=null===(t=e.images)||void 0===t?void 0:t.secure_base_url,e}))}var Za={get:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Xa?Ka(e,t):Va().then((function(){return Ka(e,t)}))},loadConfig:Va};function qa(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){return{src:Qa(e.poster_path||e.profile_path),tileSrc:Qa(e.backdrop_path||e.profile_path,"w300"),backdrop:Qa(e.backdrop_path,"w1280"),href:"/entity/".concat(e.media_type||"people","/").concat(e.id),shortTitle:(t=e.title||e.name,n=30,t.length>n?t.substring(0,n-3)+"...":t),title:e.title||e.name,data:e,entityInfo:{type:e.media_type||"people",id:e.id},heroContent:{title:e.title||e.name,description:e.overview}};var t,n}))}var Ja=new Map,$a=new Map;function es(e){var t=b(z([]),2),n=t[0],r=t[1],o=b(z(1),2),i=o[0],a=o[1],s=b(z(!1),2),l=s[0],u=s[1],c=b(j(i,e),1)[0];return W((function(){var e=c();e&&le((function(){0===e.length&&u(!0),r((function(t){return[].concat(v(t),v(e))}))}),!1)})),{pages:n,page:i,setPage:a,setPages:r,end:l,setEnd:u}}var ts=1100,ns=y(y({},ko.typography.display2),{},{width:ts,height:58,contain:"both"}),rs=function(e){return Gn(Fn,Vn(e,{style:ns,get children(){return e.children}}))},os=y(y({},ko.typography.body1),{},{width:ts,height:72,contain:"both"}),is={fontSize:20,lineHeight:20},as=function(e){return Gn(Fn,Vn(e,{style:os,get children(){return e.children}}))};var ss=function(e){return t=jn("node"),Zn(jr,t,(function(){return[8,15,13,15]})),Qn(t,Vn(e,{style:{color:"0x00000099",borderRadius:8,border:{width:3,color:"0xffffffff"}}}),!0),Hn(t,Gn(Fn,{style:is,get children(){return e.children}})),t;var t},ls=ko.typography.body2,us=function(e){return Gn(Pn,{style:{display:"flex",flexDirection:"row",gap:12,width:ts,height:48},get children(){return[Gn(Fn,{style:ls,get children(){return e.metaText}}),Gn(Ee,{get each(){return e.badges},children:function(e){return Gn(ss,{y:-5,children:e})}}),Yn((function(){return t=e.reviews,[Gn(Ce,{get when(){return(null==t?void 0:t.rtCrit)&&"0"!==(null==t?void 0:t.rtCrit)},get children(){return[Gn(Pn,{src:"https://upload.wikimedia.org/wikipedia/commons/b/b6/Tomato-Torrent-Icon.png",title:"Rotten Tomatoes Rating",style:{width:30,height:30,marginRight:-6}}),Gn(Fn,{style:ls,get children(){return t.rtCrit+"%"}})]}}),Gn(Ce,{get when(){return(null==t?void 0:t.rtFan)&&"0"!==(null==t?void 0:t.rtFan)},get children(){return[Gn(Pn,{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/Rotten_Tomatoes_positive_audience.svg/80px-Rotten_Tomatoes_positive_audience.svg.png",title:"Rotten Tomatoes Rating",style:{width:24,height:30,marginRight:-6}}),Gn(Fn,{style:ls,get children(){return t.rtFan+"%"}})]}})];var t}))]}})},cs=function(e){return Gn(Pn,Vn(e,{style:{display:"flex",flexDirection:"column",width:ts,height:160,gap:16},get children(){return[Gn(rs,{get children(){return e.title}}),Gn(as,{get children(){return e.description}}),Gn(us,{get metaText(){return e.metaText},get badges(){return e.badges},get reviews(){return e.reviews}})]}}))};function ds(e){return e.split("-")[0]}function hs(e){var t=e.type,n=e.id;return Za.get("/".concat(t,"/").concat(n,"/recommendations")).then((function(e){var n=e.results;return n.length?qa(n.slice(0,7)):Za.get("/trending/".concat(t,"/week?page=1")).then((function(e){return qa(e.results.slice(0,7))}))}))}function fs(e){var t=e.type,n=e.id;return Za.get("/".concat(t,"/").concat(n,"/credits")).then((function(e){return qa(e.cast.slice(0,7))}))}function ps(e){var t=e.type,n=e.id,r="movie"===t?{rtCrit:86,rtFan:92}:{};return Za.get("/".concat(t,"/").concat(n)).then((function(e){return y({backgroundImage:Qa(e.backdrop_path,"original"),heroContent:{title:e.title||e.name,description:e.overview,badges:["HD"],metaText:"movie"===t?(n=e.runtime,o=n%60,Math.floor(n/60)+"h "+(o<10?"0":"")+o+"m - "+e.release_date):"".concat(ds(e.first_air_date)," - ").concat(ds(e.last_air_date)),reviews:r}},e);var n,o}))}var vs=function(){var e=mr(),t=b(z(0),2),n=t[0],r=t[1],o=b(z(),2),i=o[0];o[1];j(i,ps);var a=b(z({}),2),s=a[0],l=a[1],u=yr(),c=H((function(){return 0})),d=G((function(){return es((t=e.filter||"all",function(e){var n="/trending/".concat(t,"/week?page=").concat(e);if(Ja.has(n))return Ja.get(n);var r=Za.get(n).then((function(e){var n=e.results.filter((function(e){return!e.adult})),r=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,n=[],r=0,o=e.length;r<o;r+=t)n.push(e.slice(r,r+t));return n}(($a.has(t)?$a.get(t):[]).concat(qa(n)));return r[r.length-1].length<7?$a.set(t,r.pop()):$a.delete(t),r}));return Ja.set(n,r),r}));var t}));function h(){var e;null===(e=this.children.selected)||void 0===e||e.setFocus(),r(-1*(this.y||0)+24);var t=d().pages().length;(0===t||this.parent.selected&&this.parent.selected>=t-2)&&d().setPage((function(e){return e+1}))}function f(){var e=this.children.selected;e&&e.href,u(e.href)}return Y(K(Ie,(function(e){e.backdrop&&To(e.backdrop),e.heroContent&&l(e.heroContent)}),{defer:!0})),Gn(Ce,{get when(){return d().pages().length},get children(){return[Gn(cs,Vn({y:360,x:150},s)),Gn(Pn,{clipping:!0,get style(){return Ma.itemsContainer},get children(){return Gn(si,{plinko:!0,announce:"All Trending - Week",get y(){return n()},get style(){return Ma.Column},get children(){return Gn(Ee,{get each(){return d().pages()},children:function(e,t){return Gn(za,{get autofocus(){return c(t())},items:e,onFocus:h,onEnter:f})}})}})}})]}})},gs=function(){var e=yr(),t=H((function(){return 0}));function n(){var t=this.children.selected;t&&t.id,e("/"+t.id)}var r=[{title:"Flex Row",id:"flex",description:"Flex Row Implementation"},{title:"Flex Column",id:"flexcolumn",description:"Flex Column Implementation"},{title:"Flex Row Vertical Align",id:"flexsize",description:"Flex Row Vertical Align Implementation"},{title:"Flex Column Vertical Align",id:"flexcolumnsize",description:"Flex Column Vertical Align Implementation"},{title:"Buttons",id:"buttons",description:"Demo a few buttons"},{title:"Text",id:"text",description:"Text layout with flexbox"}];function o(e){var t=b(z(4294967295),2),n=t[0],r=t[1];return Gn(Pn,Vn(e,{onFocus:function(){return r(255)},onBlur:function(){return r(4294967295)},style:{width:370,height:320,borderRadius:6,scale:1,color:405488895,transition:{color:!0,scale:!0},focus:{scale:1.1,color:4294967295}},get children(){return Gn(Pn,{x:30,get children(){return[Gn(Fn,{y:30,fontSize:84,get color(){return n()},get children(){return e.index}}),Gn(Fn,{y:140,fontSize:42,width:340,height:42,contain:"both",get color(){return n()},get children(){return e.title}}),Gn(Fn,{y:200,fontSize:28,width:330,contain:"width",get color(){return n()},get children(){return e.description}})]}})}}))}var i=b(z(140),2),a=i[0],s=i[1];function l(e){s(-400*e.selected+140)}return Gn(Pn,{colorTop:1147903743,colorBottom:743406847,get children(){return[Gn(Pn,{x:120,get children(){return[Gn(Pn,{src:"/assets/solidjs.png",width:101,height:90,y:40}),Gn(Fn,{fontSize:90,x:110,y:40,children:"Examples"}),Gn(Pn,{y:140,height:1,width:1800,color:3906468351})]}}),Gn(Oi,{onSelectedChanged:l,onEnter:n,transition:{x:{delay:20,duration:300}},get x(){return a()},y:300,width:4400,get style(){return Ma.Row},justifyContent:"flexStart",gap:40,get children(){return Gn(Ee,{each:r,children:function(e,n){return Gn(o,Vn({get autofocus(){return t(n())},get index(){return n()}},e))}})}})]}})},ys=function(){var e={width:900,height:500,y:350,x:150,gap:25,display:"flex",flexDirection:"column",justifyContent:"flexStart",color:qn("00000000")},t={width:900,height:36,gap:6,display:"flex",flexDirection:"row",justifyContent:"flexStart",color:qn("00000000")},n={fontSize:42},r={width:e.width,fontSize:26,contain:"width"},o={fontSize:26};return V((function(){To("0x000000ff")})),Gn(Pn,{autofocus:!0,style:e,get children(){return[Gn(Fn,{style:n,children:"Title of the Page"}),Gn(Fn,{style:r,children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer vel tempor tellus. Sed eu leo purus. Vestibulum sollicitudin eget tellus a varius. Phasellus est turpis, volutpat sed blandit sit amet, rutrum sit amet mauris. In dignissim elit orci, a sollicitudin ipsum faucibus et. Quisque vel quam rutrum, faucibus augue sed, scelerisque nunc."}),Gn(Pn,{style:t,get children(){return[Gn(Fn,{style:o,children:"Subline Text"}),Gn(Pn,{width:28,height:28,src:"/assets/rt-popcorn.png"}),Gn(Fn,{style:o,children:"More Text"})]}})]}})},ms=function(){function e(e,t){this.states.toggle("disabled")}var t={display:"flex",justifyContent:"flexStart",width:1500,height:300,color:qn("00000000"),gap:26,y:400};function n(e){return Gn(Pn,Vn(e,{forwardStates:!0,get style(){return Fa.container},get children(){return Gn(Fn,{get style(){return Fa.text},get children(){return e.children}})}}))}var r=function(e){return t=jn("node"),Zn(jr,t,(function(){return[10,15]})),Qn(t,Vn(e,{get style(){return{color:qn("#000000be"),borderRadius:8,border:{width:2,color:qn("#ffffff")}}}}),!0),Hn(t,Gn(Fn,{style:{fontSize:20},get children(){return e.children}})),t;var t};return[Gn(Oi,{x:100,y:200,gap:5,style:t,get children(){return[Gn(r,{children:"HD"}),Gn(r,{children:"PG13"}),Gn(r,{children:"NC17"}),Gn(Fn,{fontSize:30,children:"I like bananas"}),Gn(r,{children:"DOLBY"})]}}),Gn(Oi,{x:100,gap:40,style:t,get children(){return[Gn(n,{autofocus:!0,onEnter:e,children:"TV Shows"}),Gn(n,{states:{active:!0,disabled:!1},children:"Movies"}),Gn(n,{states:"active",children:"Sports"}),Gn(n,{states:"disabled",children:"News"})]}})]},xs=function(){var e={display:"flex",justifyContent:"flexStart",width:1600,height:110,color:qn("#4dabf5")},t={fontSize:44,marginTop:25,marginBottom:-20,skipFocus:!0};function n(e){return Gn(Pn,Vn(e,{style:{width:200,height:100,y:5,color:392801023}}))}var r=b(z(50),2),o=r[0],i=r[1];function a(){var e;null===(e=this.children.selected)||void 0===e||e.setFocus(),i(150+-1*(this.y||0))}V((function(){To("#333333")}));var s=50;return Gn(si,{x:160,get y(){return o()},gap:30,height:850,get width(){return e.width},get style(){return Ma.Column},get children(){return[Gn(Fn,{style:t,children:"Flex Start"}),Gn(Oi,{gap:s,style:e,onFocus:a,get children(){return[Gn(n,{autofocus:!0}),Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{})]}}),Gn(Fn,{style:t,children:"Flex Start - Margin Left"}),Gn(Oi,{gap:s,style:e,onFocus:a,get children(){return[Gn(n,{marginLeft:100}),Gn(n,{}),Gn(n,{marginLeft:100}),Gn(n,{}),Gn(n,{})]}}),Gn(Fn,{style:t,children:"Flex End"}),Gn(Oi,{gap:s,justifyContent:"flexEnd",style:e,onFocus:a,get children(){return[Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{})]}}),Gn(Fn,{style:t,children:"Flex End - Margin Right"}),Gn(Oi,{gap:s,justifyContent:"flexEnd",style:e,onFocus:a,get children(){return[Gn(n,{}),Gn(n,{marginRight:100}),Gn(n,{}),Gn(n,{}),Gn(n,{marginRight:100})]}}),Gn(Fn,{style:t,children:"Center - No Margin Support"}),Gn(Oi,{gap:s,justifyContent:"center",style:e,onFocus:a,get children(){return[Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{})]}}),Gn(Fn,{style:t,children:"Space Between - No Margin Support"}),Gn(Oi,{gap:s,justifyContent:"spaceBetween",style:e,onFocus:a,get children(){return[Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{})]}}),Gn(Fn,{style:t,children:"Space Evenly - No Margin Support"}),Gn(Oi,{gap:s,justifyContent:"spaceEvenly",style:e,onFocus:a,get children(){return[Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{})]}})]}})},bs=function(){var e={display:"flex",justifyContent:"flexStart",width:1600,height:110,color:qn("#4dabf5")},t={fontSize:44,marginTop:25,marginBottom:-20,skipFocus:!0};function n(e){return Gn(Pn,Vn(e,{style:{width:200,height:100,y:5,color:392801023}}))}function r(){return Math.floor(91*Math.random())+10}var o=b(z(50),2),i=o[0],a=o[1];function s(){var e;null===(e=this.children.selected)||void 0===e||e.setFocus(),a(150+-1*(this.y||0))}V((function(){To("#333333")}));var l=50;return Gn(si,{x:160,get y(){return i()},gap:30,height:850,get width(){return e.width},get style(){return Ma.Column},get children(){return[Gn(Fn,{style:t,children:"Flex Start - AlignItems: center"}),Gn(Oi,{alignItems:"center",gap:l,style:e,onFocus:s,get children(){return[Gn(n,{autofocus:!0,get height(){return r()}}),Gn(n,{get height(){return r()}}),Gn(n,{get height(){return r()}}),Gn(n,{get height(){return r()}}),Gn(n,{get height(){return r()}})]}}),Gn(Fn,{style:t,children:"Flex Start - Margin Left - AlignItems: flexStart"}),Gn(Oi,{gap:l,alignItems:"flexStart",style:e,onFocus:s,get children(){return[Gn(n,{marginLeft:100,get height(){return r()}}),Gn(n,{get height(){return r()}}),Gn(n,{marginLeft:100,get height(){return r()}}),Gn(n,{get height(){return r()}}),Gn(n,{get height(){return r()}})]}}),Gn(Fn,{style:t,children:"Flex End - AlignItems: flexEnd"}),Gn(Oi,{gap:l,justifyContent:"flexEnd",alignItems:"flexEnd",style:e,onFocus:s,get children(){return[Gn(n,{get height(){return r()}}),Gn(n,{get height(){return r()}}),Gn(n,{get height(){return r()}}),Gn(n,{get height(){return r()}}),Gn(n,{get height(){return r()}})]}}),Gn(Fn,{style:t,children:"Flex End - Margin Right"}),Gn(Oi,{gap:l,justifyContent:"flexEnd",style:e,onFocus:s,get children(){return[Gn(n,{get height(){return r()}}),Gn(n,{marginRight:100,get height(){return r()}}),Gn(n,{get height(){return r()}}),Gn(n,{get height(){return r()}}),Gn(n,{marginRight:100,get height(){return r()}})]}}),Gn(Fn,{style:t,children:"Center - No Margin Support"}),Gn(Oi,{gap:l,justifyContent:"center",style:e,onFocus:s,get children(){return[Gn(n,{get height(){return r()}}),Gn(n,{get height(){return r()}}),Gn(n,{get height(){return r()}}),Gn(n,{get height(){return r()}}),Gn(n,{get height(){return r()}})]}}),Gn(Fn,{style:t,children:"Space Between - No Margin Support"}),Gn(Oi,{gap:l,justifyContent:"spaceBetween",style:e,onFocus:s,get children(){return[Gn(n,{get height(){return r()}}),Gn(n,{get height(){return r()}}),Gn(n,{get height(){return r()}}),Gn(n,{get height(){return r()}}),Gn(n,{get height(){return r()}})]}}),Gn(Fn,{style:t,children:"Space Evenly - No Margin Support"}),Gn(Oi,{gap:l,justifyContent:"spaceEvenly",style:e,onFocus:s,get children(){return[Gn(n,{get height(){return r()}}),Gn(n,{get height(){return r()}}),Gn(n,{get height(){return r()}}),Gn(n,{get height(){return r()}}),Gn(n,{get height(){return r()}})]}})]}})},ws=function(){var e={display:"flex",justifyContent:"spaceEvenly",width:1920,y:100,height:880,color:qn("00000000")},t={display:"flex",flexDirection:"column",justifyContent:"flexStart",color:qn("#4dabf5"),height:850,width:80};function n(e){var t={width:Math.floor(61*Math.random())+10,height:80,x:5,color:qn("#1769aa")};return Gn(Pn,Vn(e,{style:t}))}var r=b(z(50),2),o=(r[0],r[1]);function i(){var e;null===(e=this.children.selected)||void 0===e||e.setFocus(),o(150+-1*(this.y||0))}V((function(){To("#333333")}));var a=50;return[Gn(Fn,{style:{fontSize:44,y:20,x:150},children:"Start, MarginTop, End, MarginBottom, Center, Between, Evenly"}),Gn(Oi,{gap:a,style:e,onFocus:i,get children(){return[Gn(si,{gap:30,style:t,alignItems:"center",get children(){return[Gn(n,{autofocus:!0}),Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{})]}}),Gn(si,{gap:a,style:t,onFocus:i,alignItems:"flexStart",get children(){return[Gn(n,{marginTop:100}),Gn(n,{}),Gn(n,{marginTop:100}),Gn(n,{}),Gn(n,{})]}}),Gn(si,{gap:a,alignItems:"flexEnd",justifyContent:"flexEnd",style:t,onFocus:i,get children(){return[Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{})]}}),Gn(si,{gap:a,justifyContent:"flexEnd",style:t,onFocus:i,get children(){return[Gn(n,{}),Gn(n,{marginBottom:100}),Gn(n,{}),Gn(n,{}),Gn(n,{marginBottom:100})]}}),Gn(si,{gap:a,justifyContent:"center",style:t,onFocus:i,get children(){return[Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{})]}}),Gn(si,{gap:a,justifyContent:"spaceBetween",style:t,onFocus:i,get children(){return[Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{})]}}),Gn(si,{gap:a,justifyContent:"spaceEvenly",style:t,onFocus:i,get children(){return[Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{})]}})]}})]},As=function(){var e={display:"flex",justifyContent:"spaceEvenly",width:1920,y:100,height:880,color:qn("00000000")},t={display:"flex",flexDirection:"column",justifyContent:"flexStart",color:qn("#4dabf5"),height:850,width:60};function n(e){var t={width:50,height:80,x:5,color:qn("#1769aa")};return Gn(Pn,Vn(e,{style:t}))}var r=b(z(50),2),o=(r[0],r[1]);function i(){var e;null===(e=this.children.selected)||void 0===e||e.setFocus(),o(150+-1*(this.y||0))}V((function(){To("#333333")}));var a=50;return[Gn(Fn,{style:{fontSize:44,y:20,x:150},children:"Start, MarginTop, End, MarginBottom, Center, Between, Evenly"}),Gn(Oi,{gap:a,style:e,onFocus:i,get children(){return[Gn(si,{gap:30,style:t,get children(){return[Gn(n,{autofocus:!0}),Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{})]}}),Gn(si,{gap:a,style:t,onFocus:i,get children(){return[Gn(n,{marginTop:100}),Gn(n,{}),Gn(n,{marginTop:100}),Gn(n,{}),Gn(n,{})]}}),Gn(si,{gap:a,justifyContent:"flexEnd",style:t,onFocus:i,get children(){return[Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{})]}}),Gn(si,{gap:a,justifyContent:"flexEnd",style:t,onFocus:i,get children(){return[Gn(n,{}),Gn(n,{marginBottom:100}),Gn(n,{}),Gn(n,{}),Gn(n,{marginBottom:100})]}}),Gn(si,{gap:a,justifyContent:"center",style:t,onFocus:i,get children(){return[Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{})]}}),Gn(si,{gap:a,justifyContent:"spaceBetween",style:t,onFocus:i,get children(){return[Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{})]}}),Gn(si,{gap:a,justifyContent:"spaceEvenly",style:t,onFocus:i,get children(){return[Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{}),Gn(n,{})]}})]}})]},Ss=function(){function e(e,t){this.states.toggle("disabled")}var t={display:"flex",justifyContent:"flexStart",width:1500,height:300,color:qn("00000000"),gap:26,y:400,x:100},n={width:386,height:136,color:"0x715cabff",focus:{color:"0x5a39a2ff"},disabled:{color:"0x291d43ff"}},r=["RoundedRectangle",{radius:65}];function o(e){return Gn(Pn,Vn(e,{forwardStates:!0,style:n,shader:r,get children(){return Gn(Fn,{style:Ua,get children(){return e.children}})}}))}return Gn(Oi,{style:t,get children(){return[Gn(o,{autofocus:!0,onEnter:e,children:"Focused"}),Gn(o,{states:{active:!0,disabled:!1},children:"Normal"}),Gn(o,{states:"disabled",children:"Disabled"})]}})},Ts="https://storage.googleapis.com/shaka-demo-assets/angel-one/dash.mpd";function ks(){return(ks=o(n().mark((function e(){var t,r;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=document.getElementById("video"),r=new shaka.Player,e.next=4,r.attach(t);case 4:return window.player=r,r.addEventListener("error",_s),e.prev=6,e.next=9,r.load(Ts);case 9:console.log("The video has now been loaded!"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),Es(e.t0);case 15:case"end":return e.stop()}}),e,null,[[6,12]])})))).apply(this,arguments)}function _s(e){Es(e.detail)}function Es(e){console.error("Error code",e.code,"object",e)}document.addEventListener("DOMContentLoaded",(function(){shaka.polyfill.installAll(),shaka.Player.isBrowserSupported()?function(){ks.apply(this,arguments)}():console.error("Browser not supported!")}));var Cs=function(){var e=mr(),t=yr(),n=b(j((function(){return y({},e)}),ps),1)[0],r=b(j((function(){return y({},e)}),fs),1)[0],o=b(j((function(){return y({},e)}),hs),1)[0],i=b(z(0),2),a=i[0],s=i[1];Y(K(n,(function(e){To(e.backgroundImage)}),{defer:!0}));var l,u,c,d=600,h={color:qn("#000000"),alpha:0,width:1900,height:890,x:10,y:d,borderRadius:30};function f(){var e;null===(e=this.children.selected)||void 0===e||e.setFocus(),l.y=d,u.y=d,u.alpha=0}function p(){var e;null===(e=this.children.selected)||void 0===e||e.setFocus(),l.y=200,u.y=160,u.alpha=.9}function v(){var e=this.children.selected;e&&e.href,t(e.href)}function g(){var e;(e=document.getElementById("video")).hidden=!0,e.pause(),document.getElementsByTagName("canvas")[0].focus(),Be(c),s(0)}function m(){var e=function(){var e=document.getElementById("video");return e.hidden=!1,setTimeout((function(){return e.play()}),50),e.focus(),e}();Be(e),s(.9)}return Gn(Ce,{get when(){return n()},keyed:!0,get children(){return[Gn(Pn,{onUp:function(){return c.setFocus()},onEscape:g,get children(){return[Gn(cs,Vn({y:360,x:150},(function(){return n().heroContent}))),Gn(Wa,{autofocus:!0,ref:function(e){"function"==typeof c?c(e):c=e},y:560,x:150,onDown:function(){return l.setFocus()},onEnter:m,children:"Watch Trailer"}),Gn(si,{ref:function(e){"function"==typeof l?l(e):l=e},y:d,x:140,get style(){return Ma.Column},zIndex:5,get children(){return Gn(Ce,{get when(){return Yn((function(){return!!o()}))()&&r()},get children(){return[Gn(Fn,{skipFocus:!0,get style(){return Ma.RowTitle},children:"Recommendations"}),Gn(za,{onFocus:f,onEnter:v,get items(){return o()}}),Gn(Fn,{skipFocus:!0,get style(){return Ma.RowTitle},children:"Cast and Crew"}),Gn(za,{onFocus:p,onEnter:v,get items(){return r()}})]}})}}),Gn(Pn,{ref:function(e){"function"==typeof u?u(e):u=e},style:h,transition:{alpha:!0,y:!0}})]}}),Gn(Pn,{get alpha(){return a()},get color(){return qn("#000000")},zIndex:200,transition:{alpha:!0}})]}})};function Rs(e){var t=e.id;return Za.get("/person/".concat(t,"/combined_credits")).then((function(e){return qa(e.cast.slice(0,7))}))}function Is(e){var t=e.id;return Za.get("/person/".concat(t)).then((function(e){return y({backgroundImage:Qa(e.profile_path,"original"),heroContent:{title:e.title||e.name,description:e.biography}},e)}))}var Bs=function(){var e=mr(),t=yr(),n=b(j((function(){return y({},e)}),Is),1)[0],r=b(j((function(){return y({},e)}),Rs),1)[0];Y(K(n,(function(e){To(e.backgroundImage)}),{defer:!0}));var o={color:qn("#000000"),alpha:.8,width:1540,height:440,x:130,y:180,borderRadius:30};function i(){var e=this.children.selected;e&&e.href,t(e.href)}return Gn(Ce,{get when(){return n()},keyed:!0,get children(){return[Gn(Pn,{x:150,y:200,get style(){return Ma.Column},zIndex:3,get children(){return[Gn(Fn,{get style(){return ko.typography.display2},get children(){return n().name}}),Gn(Fn,{get style(){return Ma.peopleBio},get children(){return n().biography}})]}}),Gn(Pn,{style:o}),Gn(si,{y:670,x:140,get style(){return Ma.Column},get children(){return Gn(Ce,{get when(){return r()},get children(){return[Gn(Fn,{skipFocus:!0,get style(){return Ma.RowTitle},children:"Credits"}),Gn(za,{autofocus:!0,onEnter:i,get items(){return r()}})]}})}})]}})},Ns=function(){return e=jn("node"),Kn(e,"style",{width:1920,height:1080,color:868483072}),e;var e},Ms=new URL("AppCoreExtensions-legacy-BHxEIIby.js",s.meta.url).href;_n.debug=!1,_n.animationsEnabled=!0,_n.fontSettings.fontFamily="Ubuntu",_n.fontSettings.color=qn("#ffffff"),_n.fontSettings.fontSize=100,Xn((function(){return Gn(Un,{options:{coreExtensionModule:Ms,threadXCoreWorkerUrl:void 0,fpsUpdateInterval:1e3},ref:function(e){return Ia(e)},get children(){return Gn(Lr,{root:function(e){return Gn(Na,e)},get children(){return[Gn(Cr,{path:"",component:vs}),Gn(Cr,{path:"examples",component:gs}),Gn(Cr,{path:"browse/:filter",component:vs}),Gn(Cr,{path:"text",component:ys}),Gn(Cr,{path:"buttons",component:ms}),Gn(Cr,{path:"flex",component:xs}),Gn(Cr,{path:"flexsize",component:bs}),Gn(Cr,{path:"flexcolumnsize",component:ws}),Gn(Cr,{path:"flexcolumn",component:As}),Gn(Cr,{path:"buttonsmaterial",component:Ss}),Gn(Cr,{path:"entity/people/:id",component:Bs}),Gn(Cr,{path:"entity/:type/:id",component:Cs}),Gn(Cr,{path:"*all",component:Ns})]}})}})}))}}}))}();
//# sourceMappingURL=index-legacy-CJHRO6ST.js.map
