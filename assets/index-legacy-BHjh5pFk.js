!function(){var e=["defaultTone"],t=["defaultTone"],r=["defaultTone"],i=["surfaceDefaultTone"],n=["defaultTone"],o=["defaultTone"],a=["defaultTone"],s=["defaultTone"],l=["defaultTone"],d=["defaultTone"],h=["defaultTone"],u=["defaultTone"],c=["defaultTone"],f=["defaultTone"],p=["defaultTone"],v=["defaultTone"],g=["defaultTone"],m=["defaultTone"],x=["defaultSurfaceTone"],y=["defaultTone"];function b(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.includes(i))continue;r[i]=e[i]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function w(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */w=function(){return t};var e,t={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,r){return e[t]=r}}function h(e,t,r,i){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(i||[]);return n(a,"_invoke",{value:R(e,r,s)}),a}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var c="suspendedStart",f="suspendedYield",p="executing",v="completed",g={};function m(){}function x(){}function y(){}var b={};d(b,a,(function(){return this}));var A=Object.getPrototypeOf,T=A&&A(A(M([])));T&&T!==r&&i.call(T,a)&&(b=T);var S=y.prototype=m.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function r(n,o,a,s){var l=u(e[n],e,o);if("throw"!==l.type){var d=l.arg,h=d.value;return h&&"object"==typeof h&&i.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(h).then((function(e){d.value=e,a(d)}),(function(e){return r("throw",e,a,s)}))}s(l.arg)}var o;n(this,"_invoke",{value:function(e,i){function n(){return new t((function(t,n){r(e,i,t,n)}))}return o=o?o.then(n,n):n()}})}function R(t,r,i){var n=c;return function(o,a){if(n===p)throw Error("Generator is already running");if(n===v){if("throw"===o)throw a;return{value:e,done:!0}}for(i.method=o,i.arg=a;;){var s=i.delegate;if(s){var l=E(s,i);if(l){if(l===g)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===c)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=p;var d=u(t,r,i);if("normal"===d.type){if(n=i.done?v:f,d.arg===g)continue;return{value:d.arg,done:i.done}}"throw"===d.type&&(n=v,i.method="throw",i.arg=d.arg)}}}function E(t,r){var i=r.method,n=t.iterator[i];if(n===e)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=e,E(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var o=u(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function M(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function r(){for(;++n<t.length;)if(i.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return x.prototype=y,n(S,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:x,configurable:!0}),x.displayName=d(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,d(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},_(C.prototype),d(C.prototype,s,(function(){return this})),t.AsyncIterator=C,t.async=function(e,r,i,n,o){void 0===o&&(o=Promise);var a=new C(h(e,r,i,n),o);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(S),d(S,l,"Generator"),d(S,a,(function(){return this})),d(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var i in t)r.push(i);return r.reverse(),function e(){for(;r.length;){var i=r.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=M,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(B),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(i,n){return s.type="throw",s.arg=t,r.next=i,n&&(r.method="next",r.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),d=i.call(a,"finallyLoc");if(l&&d){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!d)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),B(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var n=i.arg;B(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,r,i){return this.delegate={iterator:M(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=e),g}},t}function A(e,t,r,i,n,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function T(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var o=e.apply(t,r);function a(e){A(o,i,n,a,s,"next",e)}function s(e){A(o,i,n,a,s,"throw",e)}a(void 0)}))}}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,s=[],l=!0,d=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(i=o.call(r)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){d=!0,n=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw n}}return s}}(e,t)||I(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=I(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function I(e,t){if(e){if("string"==typeof e)return B(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?B(e,t):void 0}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}System.register([],(function(A,S){"use strict";return{execute:function(){var I,B,k,M=w().mark(Mt),F=document.createElement("style");F.textContent="html,body,*{padding:0;margin:0}video{position:absolute;top:0;left:0;z-index:2;outline:none}.center-element{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}\n",document.head.appendChild(F),A({B:jl,D:Hl,F:ki,H:Ul,I:function(e){var t="fallback"in e&&{fallback:()=>e.fallback};return jr(function(e,t,r={}){var i,n=[],o=[],a=[],s=[],l=0;return Jr((()=>Ai(a))),()=>{var d=e()||[];return d[Ir],qr((()=>{if(0===d.length)return 0!==l&&(Ai(a),a=[],n=[],o=[],l=0,s=[]),r.fallback&&(n=[wi],o[0]=Gr((e=>(a[0]=e,r.fallback()))),l=1),o;for(n[0]===wi&&(a[0](),a=[],n=[],o=[],l=0),i=0;i<d.length;i++)i<n.length&&n[i]!==d[i]?s[i]((()=>d[i])):i>=n.length&&(o[i]=Gr(h));for(;i<n.length;i++)a[i]();return l=s.length=a.length=d.length,n=d.slice(0),o=o.slice(0,l)}));function h(e){a[i]=e;var r=C(Hr(d[i]),2),n=r[0],o=r[1];return s[i]=o,t(n,i)}}}((()=>e.each),e.children,t||void 0))},J:function(){var e=document.getElementById("video");return e.hidden=!0,e.pause(),e},K:function(){var e=document.getElementById("video");return e.hidden=!1,setTimeout((()=>e.play()),50),e.focus(),e},S:Mi,a:Qr,b:Xr,c:Hr,d:$r,e:Kr,f:Yr,g:function(e){Yr((()=>qr(e)))},j:P,k:Ni,n:oi,o:Zr,p:Jr,w:Lo});var L=function(e,t,r){var i=Promise.resolve();return i.then((()=>e())).catch((e=>{var t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}))};function P(e,t){}function N(e,t,r){var i=Math.trunc(e>>>24),n=Math.trunc(e>>>16&255),o=Math.trunc(e>>>8&255),a=Math.trunc(255&e),s=Math.trunc(t>>>24),l=Math.trunc(t>>>16&255),d=Math.trunc(t>>>8&255),h=Math.trunc(255&t);return(Math.round(s*r+i*(1-r))<<24|Math.round(l*r+n*(1-r))<<16|Math.round(d*r+o*(1-r))<<8|Math.round(h*r+a*(1-r)))>>>0}function U(e,t){return(e>>>24<<24|(e>>>16&255)<<16|(e>>>8&255)<<8|Math.trunc((255&e)*t))>>>0}var D=!0;function O(e,t,r=!1){var i=(255&e)/255*t,n=D?i:1,o=Math.trunc((e>>>24)*n),a=Math.trunc((e>>>16&255)*n),s=Math.trunc((e>>>8&255)*n),l=Math.trunc(255*i);return r?(l<<24|s<<16|a<<8|o)>>>0:(o<<24|a<<16|s<<8|l)>>>0}function z(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var W=1;class G{constructor(){R(this,"eventListeners",{})}on(e,t){var r=this.eventListeners[e];r||(r=[]),r.push(t),this.eventListeners[e]=r}off(e,t){var r=this.eventListeners[e];if(r)if(t){var i=r.indexOf(t);i>=0&&r.splice(i,1)}else delete this.eventListeners[e]}once(e,t){var r=(i,n)=>{this.off(e,r),t(i,n)};this.on(e,r)}emit(e,t){var r=this.eventListeners[e];r&&[...r].forEach((e=>{e(this,t)}))}removeAllListeners(){this.eventListeners={}}}var H=/^(data|ftps?|https?):/,X=e=>[(e>>>24)/255,(e>>>16&255)/255,(e>>>8&255)/255,(255&e)/255];function V(e){return`rgba(${Math.floor(255*e[0])},${Math.floor(255*e[1])},${Math.floor(255*e[2])},${Math.floor(255*e[3]).toFixed(4)})`}function Y(e,t,r,i,n){return n?(n.x1=e,n.y1=t,n.x2=r,n.y2=i,n):{x1:e,y1:t,x2:r,y2:i}}function j(e,t){return e.x1<t.x2&&e.x2>t.x1&&e.y1<t.y2&&e.y2>t.y1}function Q(e,t,r){var i=Math.max(e.x,t.x),n=Math.max(e.y,t.y),o=Math.min(e.x+e.width,t.x+t.width)-i,a=Math.min(e.y+e.height,t.y+t.height)-n;return o>0&&a>0?r?(r.x=i,r.y=n,r.width=o,r.height=a,r):{x:i,y:n,width:o,height:a}:r?(r.x=0,r.y=0,r.width=0,r.height=0,r):{x:0,y:0,width:0,height:0}}function K(e,t){return t?(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t):{x:e.x,y:e.y,width:e.width,height:e.height}}function $(e,t){return e.x1<=t.x2&&e.y1<=t.y2&&e.x2>=t.x1&&e.y2>=t.y1}function q(e){if("file:"===self.location.protocol&&!H.test(e)){var t=self.location.pathname.split("/");t.pop();var r=t.join("/"),i=self.location.protocol+"//"+r;return"."===e.charAt(0)&&(e=e.slice(1)),"/"===e.charAt(0)&&(e=e.slice(1)),i+"/"+e}return new URL(e,self.location.href).href}class Z{constructor(){R(this,"ta",void 0),R(this,"tb",void 0),R(this,"tx",void 0),R(this,"tc",void 0),R(this,"td",void 0),R(this,"ty",void 0),R(this,"_floatArr",null),R(this,"mutation",void 0),this.ta=0,this.tb=0,this.tx=0,this.tc=0,this.td=0,this.ty=0,this.mutation=!0}static get temp(){return J}static multiply(e,t,r){var i=e.ta*t.ta+e.tb*t.tc,n=e.ta*t.tb+e.tb*t.td,o=e.ta*t.tx+e.tb*t.ty+e.tx,a=e.tc*t.ta+e.td*t.tc,s=e.tc*t.tb+e.td*t.td,l=e.tc*t.tx+e.td*t.ty+e.ty;return r||(r=new Z),r.ta=i,r.tb=n,r.tx=o,r.tc=a,r.td=s,r.ty=l,r.mutation=!0,r}static identity(e){return e||(e=new Z),e.ta=1,e.tb=0,e.tx=0,e.tc=0,e.td=1,e.ty=0,e.mutation=!0,e}static translate(e,t,r){return r||(r=new Z),r.ta=1,r.tb=0,r.tx=e,r.tc=0,r.td=1,r.ty=t,r.mutation=!0,r}static scale(e,t,r){return r||(r=new Z),r.ta=e,r.tb=0,r.tx=0,r.tc=0,r.td=t,r.ty=0,r.mutation=!0,r}static rotate(e,t){var r=Math.cos(e),i=Math.sin(e);return t||(t=new Z),t.ta=r,t.tb=-i,t.tx=0,t.tc=i,t.td=r,t.ty=0,t.mutation=!0,t}static copy(e,t){return t||(t=new Z),t.ta=e.ta,t.tc=e.tc,t.tb=e.tb,t.td=e.td,t.tx=e.tx,t.ty=e.ty,t.mutation=!0,t}translate(e,t){return this.tx=this.ta*e+this.tb*t+this.tx,this.ty=this.tc*e+this.td*t+this.ty,this.mutation=!0,this}scale(e,t){return this.ta=this.ta*e,this.tb=this.tb*t,this.tc=this.tc*e,this.td=this.td*t,this.mutation=!0,this}rotate(e){if(0===e||!(e%Math.PI*2))return this;var t=Math.cos(e),r=Math.sin(e),i=this.ta*t+this.tb*r,n=this.tb*t-this.ta*r,o=this.tc*t+this.td*r,a=this.td*t-this.tc*r;return this.ta=i,this.tb=n,this.tc=o,this.td=a,this.mutation=!0,this}multiply(e){return Z.multiply(this,e,this)}getFloatArr(){return this._floatArr||(this._floatArr=new Float32Array(9)),this.mutation&&(this._floatArr[0]=this.ta,this._floatArr[1]=this.tc,this._floatArr[2]=0,this._floatArr[3]=this.tb,this._floatArr[4]=this.td,this._floatArr[5]=0,this._floatArr[6]=this.tx,this._floatArr[7]=this.ty,this._floatArr[8]=1,this.mutation=!1),this._floatArr}}var J=new Z;class ee{constructor(e){R(this,"data",void 0),this.data=new Float32Array(8),e&&(this.data[0]=e[0],this.data[2]=e[2],this.data[4]=e[4],this.data[6]=e[6],this.data[1]=e[1],this.data[3]=e[3],this.data[5]=e[5],this.data[7]=e[7])}static translate(e,t,r,i,n,o,a,s,l){return l||(l=new ee),l.data[0]=e,l.data[2]=r,l.data[4]=n,l.data[6]=a,l.data[1]=t,l.data[3]=i,l.data[5]=o,l.data[7]=s,l}get x1(){return this.data[0]}get x2(){return this.data[2]}get x3(){return this.data[4]}get x4(){return this.data[6]}get y1(){return this.data[1]}get y2(){return this.data[3]}get y3(){return this.data[5]}get y4(){return this.data[7]}}var te,re=e=>e&&!(e&e-1),ie=(e,t,r,i)=>{var n=3*e,o=3*(r-e)-n,a=1-n-o,s=3*t,l=3*(i-t)-s,d=1-s-l;return function(e){if(e>=1)return 1;if(e<=0)return 0;for(var t,r,i=.5,h=0;h<20;h++){if((r=e-i*(i*(i*a+o)+n))>-1e-8&&r<1e-8)return i*(i*(i*d+l)+s);if((t=i*(i*(3*a)+2*o)+n)>1e-10&&t<1e-10)break;i+=r/t}for(var u=0,c=1,f=0;f<20;f++){if((r=e-(i=.5*(u+c))*(i*(i*a+o)+n))>-1e-8&&r<1e-8)return i*(i*(i*d+l)+s);r<0?c=i:u=i}}},ne={},oe={ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],"ease-in-sine":[.12,0,.39,0],"ease-out-sine":[.12,0,.39,0],"ease-in-out-sine":[.37,0,.63,1],"ease-in-cubic":[.32,0,.67,0],"ease-out-cubic":[.33,1,.68,1],"ease-in-out-cubic":[.65,0,.35,1],"ease-in-circ":[.55,0,1,.45],"ease-out-circ":[0,.55,.45,1],"ease-in-out-circ":[.85,0,.15,1],"ease-in-back":[.36,0,.66,-.56],"ease-out-back":[.34,1.56,.64,1],"ease-in-out-back":[.68,-.6,.32,1.6]},ae=e=>e,se=e=>{if("linear"===e)return ae;if(void 0!==ne[e])return ne[e]||ae;if("step-start"===e)return()=>1;if("step-end"===e)return e=>1===e?1:0;var t=oe[e];if(void 0!==t){var r=C(t,4),i=r[0],n=r[1],o=r[2],a=r[3],s=ie(i,n,o,a);return ne[e]=s,s}return e.startsWith("cubic-bezier")?(e=>{var t=e.match(/-?\d*\.?\d+/g);if(t){var r=C(t,4),i=r[0],n=r[1],o=r[2],a=r[3],s=parseFloat(i||"0.42"),l=parseFloat(n||"0"),d=parseFloat(o||"1"),h=parseFloat(a||"1"),u=ie(s,l,d,h);return ne[e]=u,u}return console.warn("Unknown cubic-bezier timing: "+e),ae})(e):(console.warn("Unknown timing function: "+e),ae)};function le(e){return(e/1024/1024).toFixed(2)}class de extends G{constructor(e,t,r){var i,n,o,a,s,l;for(var d in super(),R(this,"node",void 0),R(this,"props",void 0),R(this,"settings",void 0),R(this,"progress",0),R(this,"delayFor",0),R(this,"timingFunction",void 0),R(this,"propValuesMap",{}),R(this,"dynPropValuesMap",void 0),this.node=e,this.props=t,t)if("shaderProps"!==d)void 0===this.propValuesMap.props&&(this.propValuesMap.props={}),this.propValuesMap.props[d]={start:e[d],target:t[d]};else if("DynamicShader"!==e.shader.type)for(var h in this.propValuesMap.shaderProps={},t.shaderProps)this.propValuesMap.shaderProps[h]={start:e.shader.props[h],target:t.shaderProps[h]};else{var u=Object.keys(t.shaderProps),c=u.length;this.dynPropValuesMap={};for(var f=0;f<c;f++){var p=u[f],v=t.shaderProps[p];this.dynPropValuesMap[p]={};for(var g=Object.entries(v),m=g.length,x=0;x<m;x++){var y=C(g[x],2),b=y[0],w=y[1];this.dynPropValuesMap[p][b]={start:e.shader.props[p][b],target:w}}}}var A=r.easing||"linear",T=null!==(i=r.delay)&&void 0!==i?i:0;this.settings={duration:null!==(n=r.duration)&&void 0!==n?n:0,delay:T,easing:A,loop:null!==(o=r.loop)&&void 0!==o&&o,repeat:null!==(a=r.repeat)&&void 0!==a?a:0,repeatDelay:null!==(s=r.repeatDelay)&&void 0!==s?s:0,stopMethod:null!==(l=r.stopMethod)&&void 0!==l&&l},this.timingFunction=se(A),this.delayFor=T}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restoreValues(e,t){for(var r=Object.entries(t),i=r.length,n=0;n<i;n++){var o=C(r[n],2),a=o[0],s=o[1];e[a]=s.start}}restore(){if(this.reset(),void 0!==this.propValuesMap.props&&this.restoreValues(this.node,this.propValuesMap.props),void 0!==this.propValuesMap.shaderProps&&this.restoreValues(this.node.shader.props,this.propValuesMap.shaderProps),void 0!==this.dynPropValuesMap){var e=Object.keys(this.dynPropValuesMap),t=e.length;if(t>0)for(var r=0;r<t;r++){var i=e[r];this.restoreValues(this.node.shader.props[i],this.dynPropValuesMap[i])}}}reverseValues(e){for(var t=Object.entries(e),r=t.length,i=0;i<r;i++){var n=C(t[i],2),o=n[0],a=n[1];e[o]={start:a.target,target:a.start}}}reverse(){if(this.progress=0,void 0!==this.propValuesMap.props&&this.reverseValues(this.propValuesMap.props),void 0!==this.propValuesMap.shaderProps&&this.reverseValues(this.propValuesMap.shaderProps),void 0!==this.dynPropValuesMap){var e=Object.keys(this.dynPropValuesMap),t=e.length;if(t>0)for(var r=0;r<t;r++){var i=e[r];this.reverseValues(this.dynPropValuesMap[i])}}this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(e,t,r){return(this.timingFunction(e)||e)*(r-t)+t}updateValue(e,t,r,i){if(1===this.progress)return t;if(0===this.progress)return r;var n=t;return-1!==e.indexOf("color")?r===n?r:N(r,n,i&&this.timingFunction(this.progress)||this.progress):i?this.applyEasing(this.progress,r,n):r+(n-r)*this.progress}updateValues(e,t,r){for(var i=Object.entries(t),n=i.length,o=0;o<n;o++){var a=C(i[o],2),s=a[0],l=a[1];e[s]=this.updateValue(s,l.target,l.start,r)}}update(e){var t=this.settings,r=t.duration,i=t.loop,n=t.easing,o=t.stopMethod,a=this.delayFor;if(0!==r||0!==a){if(this.delayFor>0){if(this.delayFor-=e,this.delayFor>=0)return;e=-this.delayFor,this.delayFor=0}if(0!==r)if(0===this.progress&&this.emit("animating",{}),this.progress+=e/r,this.progress>1&&(this.progress=i?0:1,o))this.emit("finished",{});else{if(void 0!==this.propValuesMap.props&&this.updateValues(this.node,this.propValuesMap.props,n),void 0!==this.propValuesMap.shaderProps&&this.updateValues(this.node.shader.props,this.propValuesMap.shaderProps,n),void 0!==this.dynPropValuesMap){var s=Object.keys(this.dynPropValuesMap),l=s.length;if(l>0)for(var d=0;d<l;d++){var h=s[d];this.updateValues(this.node.shader.props[h],this.dynPropValuesMap[h],n)}}1===this.progress&&this.emit("finished",{})}else this.emit("finished",{})}else this.emit("finished",{})}}class he extends G{constructor(e,t){super(),R(this,"manager",void 0),R(this,"animation",void 0),R(this,"stoppedPromise",void 0),R(this,"stoppedResolve",null),R(this,"state",void 0),this.manager=e,this.animation=t,this.state="stopped",this.stoppedPromise=Promise.resolve(),this.onAnimating=this.onAnimating.bind(this),this.onFinished=this.onFinished.bind(this)}start(){return"running"!==this.state&&(this.makeStoppedPromise(),this.registerAnimation(),this.state="running"),this}stop(){return this.unregisterAnimation(),null!==this.stoppedResolve&&(this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this)),this.animation.reset(),this.state="stopped",this}pause(){return this.unregisterAnimation(),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){return this.stoppedPromise}registerAnimation(){this.animation.once("finished",this.onFinished),this.animation.on("animating",this.onAnimating),this.manager.registerAnimation(this.animation)}unregisterAnimation(){this.manager.unregisterAnimation(this.animation),this.animation.off("finished",this.onFinished),this.animation.off("animating",this.onAnimating)}makeStoppedPromise(){null===this.stoppedResolve&&(this.stoppedPromise=new Promise((e=>{this.stoppedResolve=e})))}onFinished(){this.stoppedResolve;var e=this.animation.settings,t=e.loop;if("reverse"===e.stopMethod)return this.animation.once("finished",this.onFinished),void this.animation.reverse();t||(this.unregisterAnimation(),this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this),this.state="stopped")}onAnimating(){this.emit("animating",this)}}!function(e){e[e.Init=0]="Init",e[e.OutOfBounds=2]="OutOfBounds",e[e.InBounds=4]="InBounds",e[e.InViewport=8]="InViewport"}(te||(te={}));var ue,ce=new Map;ce.set(te.Init,"init"),ce.set(te.OutOfBounds,"outOfBounds"),ce.set(te.InBounds,"inBounds"),ce.set(te.InViewport,"inViewport"),function(e){e[e.Children=1]="Children",e[e.ScaleRotate=2]="ScaleRotate",e[e.Local=4]="Local",e[e.Global=8]="Global",e[e.Clipping=16]="Clipping",e[e.CalculatedZIndex=32]="CalculatedZIndex",e[e.ZIndexSortedChildren=64]="ZIndexSortedChildren",e[e.PremultipliedColors=128]="PremultipliedColors",e[e.WorldAlpha=256]="WorldAlpha",e[e.RenderState=512]="RenderState",e[e.IsRenderable=1024]="IsRenderable",e[e.RenderTexture=2048]="RenderTexture",e[e.ParentRenderTexture=4096]="ParentRenderTexture",e[e.None=0]="None",e[e.All=8191]="All"}(ue||(ue={}));class fe extends G{constructor(e,t){super(),R(this,"stage",void 0),R(this,"children",[]),R(this,"_id",W++),R(this,"props",void 0),R(this,"updateType",ue.All),R(this,"globalTransform",void 0),R(this,"scaleRotateTransform",void 0),R(this,"localTransform",void 0),R(this,"renderCoords",void 0),R(this,"renderBound",void 0),R(this,"strictBound",void 0),R(this,"preloadBound",void 0),R(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1}),R(this,"isRenderable",!1),R(this,"renderState",te.Init),R(this,"worldAlpha",1),R(this,"premultipliedColorTl",0),R(this,"premultipliedColorTr",0),R(this,"premultipliedColorBl",0),R(this,"premultipliedColorBr",0),R(this,"calcZIndex",0),R(this,"hasRTTupdates",!1),R(this,"parentHasRenderTexture",!1),R(this,"onTextureLoaded",((e,t)=>{var r;this.autosizeNode(t),this.stage.requestRender(),this.parentHasRenderTexture&&this.setRTTUpdates(1),this.emit("loaded",{type:"texture",dimensions:t}),"contain"===(null===(r=this.props.textureOptions)||void 0===r||null===(r=r.resizeMode)||void 0===r?void 0:r.type)&&this.setUpdateType(ue.Local)})),R(this,"onTextureFailed",((e,t)=>{this.emit("failed",{type:"texture",error:t})})),R(this,"onTextureFreed",(()=>{this.emit("freed",{type:"texture"})})),this.stage=e,this.props=_(_({},t),{},{parent:null,texture:null,src:null,rtt:!1}),this.parent=t.parent,this.texture=t.texture,this.src=t.src,this.rtt=t.rtt,this.updateScaleRotateTransform()}loadTexture(){var e=this.props.texture;queueMicrotask((()=>{this.textureOptions.preload&&e.ctxTexture.load(),"loaded"===e.state?(e.dimensions,this.onTextureLoaded(e,e.dimensions)):"failed"===e.state?(e.error,this.onTextureFailed(e,e.error)):"freed"===e.state&&this.onTextureFreed(e),e.on("loaded",this.onTextureLoaded),e.on("failed",this.onTextureFailed),e.on("freed",this.onTextureFreed)}))}unloadTexture(){this.texture&&(this.texture.off("loaded",this.onTextureLoaded),this.texture.off("failed",this.onTextureFailed),this.texture.off("freed",this.onTextureFreed),this.texture.setRenderableOwner(this,!1))}autosizeNode(e){this.autosize&&(this.width=e.width,this.height=e.height)}setUpdateType(e){this.updateType|=e;var t=this.props.parent;!t||t.updateType&ue.Children||t.setUpdateType(ue.Children),this.parentHasRenderTexture&&this.setRTTUpdates(e)}sortChildren(){this.children.sort(((e,t)=>e.calcZIndex-t.calcZIndex))}updateScaleRotateTransform(){var e=this.props,t=e.rotation,r=e.scaleX,i=e.scaleY;this.scaleRotateTransform=0!==t||1!==r||1!==i?Z.rotate(t,this.scaleRotateTransform).scale(r,i):void 0}updateLocalTransform(){var e,t=this.props,r=t.x,i=t.y,n=t.width,o=t.height,a=this.props.mountX*n,s=this.props.mountY*o;if(this.scaleRotateTransform){var l=this.props.pivotX*n,d=this.props.pivotY*o;this.localTransform=Z.translate(r-a+l,i-s+d,this.localTransform).multiply(this.scaleRotateTransform).translate(-l,-d)}else this.localTransform=Z.translate(r-a,i-s,this.localTransform);var h=this.props.texture;if(h&&h.dimensions&&"contain"===(null===(e=this.props.textureOptions)||void 0===e||null===(e=e.resizeMode)||void 0===e?void 0:e.type)){var u=1,c=1,f=0,p=0,v=h.dimensions,g=v.width,m=v.height;if(g/m>n/o){var x=m*(n/g);p=(o-x)/2,c=x/o}else{var y=g*(o/m);f=(n-y)/2,u=y/n}this.localTransform.translate(f,p).scale(u,c)}this.setUpdateType(ue.Global)}update(e,t){this.updateType&ue.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(ue.Local)),this.updateType&ue.Local&&(this.updateLocalTransform(),this.setUpdateType(ue.Global));var r,i=this.props.parent,n=ue.None;if(this.updateType&ue.ParentRenderTexture)for(var o=this.parent;o;)o.rtt&&(this.parentHasRenderTexture=!0),o=o.parent;(this.updateType^ue.All&&this.updateType&ue.RenderTexture&&this.children.forEach((e=>{e.setUpdateType(ue.All)})),this.updateType&ue.Global)&&(this.localTransform,this.globalTransform=Z.copy((null==i?void 0:i.globalTransform)||this.localTransform,this.globalTransform),this.parentHasRenderTexture&&null!==(r=this.props.parent)&&void 0!==r&&r.rtt&&(this.globalTransform=Z.identity()),i&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(ue.Clipping|ue.RenderState|ue.Children),n|=ue.Global);this.updateType&ue.Clipping&&(this.calculateClippingRect(t),this.setUpdateType(ue.Children),n|=ue.Clipping),this.updateType&ue.WorldAlpha&&(this.worldAlpha=i?i.worldAlpha*this.props.alpha:this.props.alpha,this.setUpdateType(ue.Children|ue.PremultipliedColors|ue.IsRenderable),n|=ue.WorldAlpha),this.updateType&ue.PremultipliedColors&&(this.premultipliedColorTl=O(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=O(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=O(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=O(this.props.colorBr,this.worldAlpha,!0))),this.updateType&ue.RenderState&&(this.updateRenderState(t),this.setUpdateType(ue.IsRenderable)),this.updateType&ue.IsRenderable&&this.updateIsRenderable(),i&&this.updateType&ue.CalculatedZIndex&&(this.calculateZIndex(),i.setUpdateType(ue.ZIndexSortedChildren)),this.updateType&ue.Children&&this.children.length&&!this.rtt&&this.children.forEach((t=>{t.setUpdateType(n),0!==t.updateType&&t.update(e,this.clippingRect)})),this.updateType&ue.ZIndexSortedChildren&&this.sortChildren(),this.updateType=0}checkRenderProps(){return!!this.props.texture||!(!this.props.width||!this.props.height)&&(this.props.shader!==this.stage.defShaderCtr||(!!this.props.clipping||(0!==this.props.color||(0!==this.props.colorTop||(0!==this.props.colorBottom||(0!==this.props.colorLeft||(0!==this.props.colorRight||(0!==this.props.colorTl||(0!==this.props.colorTr||(0!==this.props.colorBl||0!==this.props.colorBr))))))))))}checkRenderBounds(e){this.renderBound;var t=e.width||this.stage.root.width,r=e.height||this.stage.root.height;if(this.strictBound=Y(e.x,e.y,e.x+t,e.y+r,this.strictBound),$(this.renderBound,this.strictBound))return te.InViewport;var i=this.stage.boundsMargin;return this.preloadBound=Y(this.strictBound.x1-i[3],this.strictBound.y1-i[0],this.strictBound.x2+i[1],this.strictBound.y2+i[2],this.preloadBound),$(this.renderBound,this.preloadBound)?te.InBounds:te.OutOfBounds}updateRenderState(e){var t=this.checkRenderBounds(e);if(t!==this.renderState){var r=this.renderState;this.renderState=t;var i=ce.get(t);this.emit(i,{previous:r,current:t})}}updateIsRenderable(){var e;e=!(0===this.worldAlpha||!this.checkRenderProps())&&this.renderState>te.OutOfBounds,this.isRenderable!==e&&(this.isRenderable=e,this.onChangeIsRenderable(e))}onChangeIsRenderable(e){var t;null===(t=this.texture)||void 0===t||t.setRenderableOwner(this,e)}calculateRenderCoords(){var e=this.width,t=this.height,r=this.globalTransform,i=r.tx,n=r.ty,o=r.ta,a=r.tb,s=r.tc,l=r.td;if(0===a&&0===s){var d=i,h=i+e*o,u=n,c=n+t*l;this.renderCoords=ee.translate(d,u,h,u,h,c,d,c,this.renderCoords)}else this.renderCoords=ee.translate(i,n,i+e*o,n+e*s,i+e*o+t*a,n+e*s+t*l,i+t*a,n+t*l,this.renderCoords)}updateBoundingRect(){var e=this.renderCoords,t=this.globalTransform,r=t.tb,i=t.tc,n=e.x1,o=e.y1,a=e.x3,s=e.y3;if(0===r||0===i)this.renderBound=Y(n,o,a,s,this.renderBound);else{var l=e.x2,d=e.x4,h=e.y2,u=e.y4;this.renderBound=Y(Math.min(n,l,a,d),Math.min(o,h,s,u),Math.max(n,l,a,d),Math.max(o,h,s,u),this.renderBound)}}calculateClippingRect(e){this.globalTransform;var t=this.clippingRect,r=this.props,i=this.globalTransform,n=r.clipping,o=0!==i.tb||0!==i.tc;n&&!o?(t.x=i.tx,t.y=i.ty,t.width=this.width*i.ta,t.height=this.height*i.td,t.valid=!0):t.valid=!1,e.valid&&t.valid?Q(e,t,t):e.valid&&(K(e,t),t.valid=!0)}calculateZIndex(){var e,t,r=this.props,i=r.zIndex||0,n=(null===(e=r.parent)||void 0===e?void 0:e.zIndex)||0,o=i;null!==(t=r.parent)&&void 0!==t&&t.zIndexLocked&&(o=i<n?i:n),this.calcZIndex=o}destroy(){this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,delete this.renderCoords,delete this.renderBound,delete this.strictBound,delete this.preloadBound,delete this.globalTransform,delete this.scaleRotateTransform,delete this.localTransform,this.props.texture=null,this.props.shader=this.stage.defShaderCtr;for(var e=[...this.children],t=0;t<e.length;t++)e[t].destroy();this.parent=null,this.rtt&&this.stage.renderer.removeRTTNode(this),this.removeAllListeners()}renderQuads(e){var t=this.props,r=t.texture,i=t.width,n=t.height,o=t.textureOptions,a=t.rtt,s=t.shader;if(this.parentHasRenderTexture){if(!e.renderToTextureActive)return;if(this.parentRenderTexture!==e.activeRttNode)return}var l=this.premultipliedColorTl,d=this.premultipliedColorTr,h=this.premultipliedColorBl,u=this.premultipliedColorBr,c=this.zIndex,f=this.worldAlpha,p=this.globalTransform,v=this.clippingRect,g=this.renderCoords;e.addQuad({width:i,height:n,colorTl:l,colorTr:d,colorBl:h,colorBr:u,texture:r,textureOptions:o,zIndex:c,shader:s.shader,shaderProps:s.getResolvedProps(),alpha:f,clippingRect:v,tx:p.tx,ty:p.ty,ta:p.ta,tb:p.tb,tc:p.tc,td:p.td,renderCoords:g,rtt:a,parentHasRenderTexture:this.parentHasRenderTexture,framebufferDimensions:this.framebufferDimensions})}get id(){return this._id}get x(){return this.props.x}set x(e){this.props.x!==e&&(this.props.x=e,this.setUpdateType(ue.Local))}get absX(){var e,t;return this.props.x+((null===(e=this.props.parent)||void 0===e?void 0:e.absX)||(null===(t=this.props.parent)||void 0===t||null===(t=t.globalTransform)||void 0===t?void 0:t.tx)||0)}get absY(){var e,t;return this.props.y+(null!==(e=null===(t=this.props.parent)||void 0===t?void 0:t.absY)&&void 0!==e?e:0)}get y(){return this.props.y}set y(e){this.props.y!==e&&(this.props.y=e,this.setUpdateType(ue.Local))}get width(){return this.props.width}set width(e){this.props.width!==e&&(this.props.width=e,this.setUpdateType(ue.Local),this.props.rtt&&(this.texture=this.stage.txManager.loadTexture("RenderTexture",{width:this.width,height:this.height}),this.textureOptions.preload=!0,this.setUpdateType(ue.RenderTexture)))}get height(){return this.props.height}set height(e){this.props.height!==e&&(this.props.height=e,this.setUpdateType(ue.Local),this.props.rtt&&(this.texture=this.stage.txManager.loadTexture("RenderTexture",{width:this.width,height:this.height}),this.textureOptions.preload=!0,this.setUpdateType(ue.RenderTexture)))}get scale(){return this.scaleX}set scale(e){this.scaleX=e,this.scaleY=e}get scaleX(){return this.props.scaleX}set scaleX(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.setUpdateType(ue.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.setUpdateType(ue.ScaleRotate))}get mount(){return this.props.mount}set mount(e){this.props.mountX===e&&this.props.mountY===e||(this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.setUpdateType(ue.Local))}get mountX(){return this.props.mountX}set mountX(e){this.props.mountX!==e&&(this.props.mountX=e,this.setUpdateType(ue.Local))}get mountY(){return this.props.mountY}set mountY(e){this.props.mountY!==e&&(this.props.mountY=e,this.setUpdateType(ue.Local))}get pivot(){return this.props.pivot}set pivot(e){this.props.pivotX===e&&this.props.pivotY===e||(this.props.pivotX=e,this.props.pivotY=e,this.props.pivot=e,this.setUpdateType(ue.Local))}get pivotX(){return this.props.pivotX}set pivotX(e){this.props.pivotX!==e&&(this.props.pivotX=e,this.setUpdateType(ue.Local))}get pivotY(){return this.props.pivotY}set pivotY(e){this.props.pivotY!==e&&(this.props.pivotY=e,this.setUpdateType(ue.Local))}get rotation(){return this.props.rotation}set rotation(e){this.props.rotation!==e&&(this.props.rotation=e,this.setUpdateType(ue.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(e){this.props.alpha=e,this.setUpdateType(ue.PremultipliedColors|ue.WorldAlpha)}get autosize(){return this.props.autosize}set autosize(e){this.props.autosize=e}get clipping(){return this.props.clipping}set clipping(e){this.props.clipping=e,this.setUpdateType(ue.Clipping)}get color(){return this.props.color}set color(e){this.colorTop=e,this.colorBottom=e,this.colorLeft=e,this.colorRight=e,this.props.color=e,this.setUpdateType(ue.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(e){this.props.colorTl===e&&this.props.colorTr===e||(this.colorTl=e,this.colorTr=e),this.props.colorTop=e,this.setUpdateType(ue.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(e){this.props.colorBl===e&&this.props.colorBr===e||(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e,this.setUpdateType(ue.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(e){this.props.colorTl===e&&this.props.colorBl===e||(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e,this.setUpdateType(ue.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(e){this.props.colorTr===e&&this.props.colorBr===e||(this.colorTr=e,this.colorBr=e),this.props.colorRight=e,this.setUpdateType(ue.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(e){this.props.colorTl=e,this.setUpdateType(ue.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(e){this.props.colorTr=e,this.setUpdateType(ue.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(e){this.props.colorBl=e,this.setUpdateType(ue.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(e){this.props.colorBr=e,this.setUpdateType(ue.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(e){this.props.zIndexLocked=e,this.setUpdateType(ue.CalculatedZIndex|ue.Children),this.children.forEach((e=>{e.setUpdateType(ue.CalculatedZIndex)}))}get zIndex(){return this.props.zIndex}set zIndex(e){this.props.zIndex=e,this.setUpdateType(ue.CalculatedZIndex|ue.Children),this.children.forEach((e=>{e.setUpdateType(ue.CalculatedZIndex)}))}get parent(){return this.props.parent}set parent(e){var t=this.props.parent;if(t!==e){if(this.props.parent=e,t){var r=t.children.indexOf(this);t.children.splice(r,1),t.setUpdateType(ue.Children|ue.ZIndexSortedChildren)}e&&(e.children.push(this),this.setUpdateType(ue.All),e.setUpdateType(ue.Children|ue.ZIndexSortedChildren),(e.rtt||e.parentHasRenderTexture)&&this.setRTTUpdates(ue.All)),this.updateScaleRotateTransform()}}get rtt(){return this.props.rtt}set rtt(e){var t,r;if(!0===this.props.rtt&&(this.props.rtt=e,!1===e&&null!==this.texture))return this.unloadTexture(),this.setUpdateType(ue.All),this.children.forEach((e=>{e.parentHasRenderTexture=!1})),void(null===(r=this.stage.renderer)||void 0===r||r.removeRTTNode(this));!1!==e&&(this.texture=this.stage.txManager.loadTexture("RenderTexture",{width:this.width,height:this.height}),this.textureOptions.preload=!0,this.props.rtt=!0,this.hasRTTupdates=!0,this.setUpdateType(ue.All),this.children.forEach((e=>{e.setUpdateType(ue.All)})),null===(t=this.stage.renderer)||void 0===t||t.renderToTexture(this))}get shader(){return this.props.shader}set shader(e){this.props.shader!==e&&(this.props.shader=e,this.setUpdateType(ue.IsRenderable))}get src(){return this.props.src}set src(e){this.props.src!==e&&(this.props.src=e,this.texture=e?this.stage.txManager.loadTexture("ImageTexture",{src:e}):null)}get framebufferDimensions(){return this.parentHasRenderTexture&&!this.rtt&&this.parent?this.parent.framebufferDimensions:{width:this.width,height:this.height}}get parentRenderTexture(){for(var e=this.parent;e;){if(e.rtt)return e;e=e.parent}return null}get texture(){return this.props.texture}set texture(e){if(this.props.texture!==e){var t=this.props.texture;t&&(t.setRenderableOwner(this,!1),this.unloadTexture()),this.props.texture=e,e&&(e.setRenderableOwner(this,this.isRenderable),this.loadTexture()),this.setUpdateType(ue.IsRenderable)}}set textureOptions(e){this.props.textureOptions=e}get textureOptions(){return this.props.textureOptions}setRTTUpdates(e){var t;this.hasRTTupdates=!0,null===(t=this.parent)||void 0===t||t.setRTTUpdates(e)}animate(e,t){var r=new de(this,e,t);return new he(this.stage.animationManager,r)}flush(){}}class pe{constructor(e,t){R(this,"textureSource",void 0),R(this,"memManager",void 0),this.memManager=e,this.textureSource=t}setTextureMemUse(e){this.memManager.setTextureMemUse(this.textureSource,e)}get renderable(){return this.textureSource.renderable}}class ve{constructor(e){R(this,"options",void 0),R(this,"mode",void 0),R(this,"stage",void 0),R(this,"txManager",void 0),R(this,"txMemManager",void 0),R(this,"shManager",void 0),R(this,"rttNodes",[]),this.options=e,this.stage=e.stage,this.txManager=e.txManager,this.txMemManager=e.txMemManager,this.shManager=e.shManager}}class ge{}class me{static makeCacheKey(e){return!1}static resolveDefaults(e){return{}}}function xe(e,t,r){var i=e.createShader(t);if(!i)throw new Error;if(e.shaderSource(i,r),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))return i;console.log(e.getShaderInfoLog(i)),e.deleteShader(i)}class ye extends me{constructor(e){super(),R(this,"boundBufferCollection",null),R(this,"buffersBound",!1),R(this,"program",void 0),R(this,"vao",void 0),R(this,"renderer",void 0),R(this,"glw",void 0),R(this,"attributeBuffers",void 0),R(this,"attributeLocations",void 0),R(this,"attributeNames",void 0),R(this,"uniformLocations",void 0),R(this,"uniformTypes",void 0),R(this,"supportsIndexedTextures",void 0);var t=this.renderer=e.renderer,r=this.glw=this.renderer.glw;this.supportsIndexedTextures=e.supportsIndexedTextures||!1;var i=r.isWebGl2(),n=i&&e.webgl2Extensions||!i&&e.webgl1Extensions||[],o=i?"2.0":"1.0";n.forEach((e=>{if(!r.getExtension(e))throw new Error(`Shader "${this.constructor.name}" requires extension "${e}" for WebGL ${o} but wasn't found`)}));var a=e.shaderSources||this.constructor.shaderSources;if(!a)throw new Error(`Shader "${this.constructor.name}" is missing shaderSources.`);i&&null!=a&&a.webGl2&&(a.fragment=a.webGl2.fragment,a.vertex=a.webGl2.vertex,delete a.webGl2);var s=t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,l=a.vertex instanceof Function?a.vertex(s):a.vertex,d=a.fragment instanceof Function?a.fragment(s):a.fragment,h=xe(r,r.VERTEX_SHADER,l),u=xe(r,r.FRAGMENT_SHADER,d);if(!h||!u)throw new Error;var c=function(e,t,r){var i=e.createProgram();if(!i)throw new Error;if(e.attachShader(i,t),e.attachShader(i,r),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS))return i;console.log(e.getProgramInfoLog(i)),e.deleteProgram(i)}(r,h,u);if(!c)throw new Error;if(this.program=c,i){var f=r.createVertexArray();if(!f)throw new Error;this.vao=f,r.bindVertexArray(this.vao)}this.attributeLocations={},this.attributeBuffers={},this.attributeNames=[],[...e.attributes].forEach((e=>{var t=r.getAttribLocation(this.program,e);if(t<0)throw new Error(`${this.constructor.name}: Vertex shader must have an attribute "${e}"!`);var i=r.createBuffer();if(!i)throw new Error(`${this.constructor.name}: Could not create buffer for attribute "${e}"`);this.attributeLocations[e]=t,this.attributeBuffers[e]=i,this.attributeNames.push(e)})),this.uniformLocations={},this.uniformTypes={},e.uniforms.forEach((e=>{var t=r.getUniformLocation(this.program,e.name);this.uniformTypes[e.name]=e.uniform,t?this.uniformLocations[e.name]=t:console.warn(`Shader "${this.constructor.name}" could not get uniform location for "${e.name}"`)}))}bindBufferAttribute(e,t,r){var i=this.glw;i.enableVertexAttribArray(e),i.vertexAttribPointer(t,e,r.size,r.type,r.normalized,r.stride,r.offset)}disableAttribute(e){this.glw.disableVertexAttribArray(e)}disableAttributes(){for(var e in this.attributeLocations)this.disableAttribute(this.attributeLocations[e]);this.boundBufferCollection=null}canBatchShaderProps(e,t){return!1}bindRenderOp(e,t){this.bindBufferCollection(e.buffers),e.textures.length>0&&this.bindTextures(e.textures);var r=e.glw,i=e.parentHasRenderTexture;if(!e.renderToTexture||!i){if(i){var n=e.framebufferDimensions||{},o=n.width,a=n.height;this.setUniform("u_pixelRatio",1),this.setUniform("u_resolution",new Float32Array([null!=o?o:0,null!=a?a:0]))}else this.setUniform("u_pixelRatio",e.options.pixelRatio),this.setUniform("u_resolution",new Float32Array([r.canvas.width,r.canvas.height]));if(t){if(z(t,"$dimensions")){var s=t.$dimensions;s||(s=e.dimensions),this.setUniform("u_dimensions",[s.width,s.height])}if(z(t,"$alpha")){var l=t.$alpha;l||(l=e.alpha),this.setUniform("u_alpha",l)}this.bindProps(t)}}}setUniform(e,...t){this.glw.setUniform(this.uniformTypes[e],this.uniformLocations[e],...t)}bindBufferCollection(e){if(this.boundBufferCollection!==e){for(var t in this.attributeLocations){var r=e.getBuffer(t),i=e.getAttributeInfo(t);this.bindBufferAttribute(this.attributeLocations[t],r,i)}this.boundBufferCollection=e}}bindProps(e){}bindTextures(e){}attach(){this.glw.useProgram(this.program),this.glw.useProgram(this.program),this.glw.isWebGl2()&&this.vao&&this.glw.bindVertexArray(this.vao)}detach(){this.disableAttributes()}}R(ye,"shaderSources",void 0);class be extends ge{constructor(e,t,r,i,n,o,a,s,l,d,h,u,c){super(),R(this,"glw",void 0),R(this,"options",void 0),R(this,"buffers",void 0),R(this,"shader",void 0),R(this,"shaderProps",void 0),R(this,"alpha",void 0),R(this,"clippingRect",void 0),R(this,"dimensions",void 0),R(this,"bufferIdx",void 0),R(this,"zIndex",void 0),R(this,"renderToTexture",void 0),R(this,"parentHasRenderTexture",void 0),R(this,"framebufferDimensions",void 0),R(this,"length",0),R(this,"numQuads",0),R(this,"textures",[]),R(this,"maxTextures",void 0),this.glw=e,this.options=t,this.buffers=r,this.shader=i,this.shaderProps=n,this.alpha=o,this.clippingRect=a,this.dimensions=s,this.bufferIdx=l,this.zIndex=d,this.renderToTexture=h,this.parentHasRenderTexture=u,this.framebufferDimensions=c,this.maxTextures=i.supportsIndexedTextures?e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS):1}addTexture(e){var t=this.textures,r=this.maxTextures,i=t.findIndex((t=>t===e));if(-1!==i)return i;var n=t.length;return n>=r?4294967295:(this.textures.push(e),n)}draw(){var e=this.glw,t=this.shader,r=this.shaderProps,i=this.options;i.shManager.useShader(t),t.bindRenderOp(this,r);var n=this.bufferIdx/24*6*2;if(this.clippingRect.valid){var o=this.clippingRect,a=o.x,s=o.y,l=o.width,d=o.height,h=i.pixelRatio,u=i.canvas.height,c=Math.round(a*h),f=Math.round(l*h),p=Math.round(d*h),v=Math.round(u-p-s*h);e.setScissorTest(!0),e.scissor(c,v,f,p)}else e.setScissorTest(!1);e.drawElements(e.TRIANGLES,6*this.numQuads,e.UNSIGNED_SHORT,n)}}function we(e){var t={MAX_RENDERBUFFER_SIZE:0,MAX_TEXTURE_SIZE:0,MAX_VIEWPORT_DIMS:0,MAX_VERTEX_TEXTURE_IMAGE_UNITS:0,MAX_TEXTURE_IMAGE_UNITS:0,MAX_COMBINED_TEXTURE_IMAGE_UNITS:0,MAX_VERTEX_ATTRIBS:0,MAX_VARYING_VECTORS:0,MAX_VERTEX_UNIFORM_VECTORS:0,MAX_FRAGMENT_UNIFORM_VECTORS:0};return Object.keys(t).forEach((r=>{t[r]=e.getParameter(e[r])})),t}function Ae(e){var t={ANGLE_instanced_arrays:null,WEBGL_compressed_texture_s3tc:null,WEBGL_compressed_texture_astc:null,WEBGL_compressed_texture_etc:null,WEBGL_compressed_texture_etc1:null,WEBGL_compressed_texture_pvrtc:null,WEBKIT_WEBGL_compressed_texture_pvrtc:null,WEBGL_compressed_texture_s3tc_srgb:null,OES_vertex_array_object:null};return Object.keys(t).forEach((r=>{t[r]=e.getExtension(r)})),t}var Te=new Uint8Array([0,0,0,0]);class Se extends pe{constructor(e,t,r){super(t,r),R(this,"glw",void 0),R(this,"_nativeCtxTexture",null),R(this,"_state","freed"),R(this,"_w",0),R(this,"_h",0),this.glw=e}get ctxTexture(){return"freed"===this._state&&this.load(),this._nativeCtxTexture,this._nativeCtxTexture}get w(){return this._w}get h(){return this._h}load(){"loading"!==this._state&&"loaded"!==this._state&&(this._state="loading",this.textureSource.setState("loading"),this._nativeCtxTexture=this.createNativeCtxTexture(),this.onLoadRequest().then((({width:e,height:t})=>{"freed"!==this._state&&(this._state="loaded",this._w=e,this._h=t,this.textureSource.setState("loaded",{width:e,height:t}))})).catch((e=>{"freed"!==this._state&&(this._state="failed",this.textureSource.setState("failed",e),console.error(e))})))}onLoadRequest(){var e=this;return T(w().mark((function t(){var r,i,n,o,a,s,l,d,h,u,c,f,p,v,g,m;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=e.glw).texImage2D(0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,null),e.setTextureMemUse(Te.byteLength),t.next=5,null===(r=e.textureSource)||void 0===r?void 0:r.getTextureData();case 5:if(n=t.sent,e._nativeCtxTexture){t.next=9;break}return e._state,t.abrupt("return",{width:0,height:0});case 9:return o=0,a=0,e._nativeCtxTexture,i.activeTexture(0),n.data instanceof ImageBitmap||n.data instanceof ImageData||null!==(x=n.data)&&"object"==typeof x&&x.constructor&&"HTMLImageElement"===x.constructor.name?(s=n.data,o=s.width,a=s.height,i.bindTexture(e._nativeCtxTexture),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!n.premultiplyAlpha),i.texImage2D(0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,s),e.setTextureMemUse(o*a*4),(i.isWebGl2()||re(o)&&re(a))&&i.generateMipmap()):null===n.data?(o=0,a=0,i.bindTexture(e._nativeCtxTexture),i.texImage2D(0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,Te),e.setTextureMemUse(Te.byteLength)):"mipmaps"in n.data&&n.data.mipmaps?(d=n.data,h=d.mipmaps,u=d.width,c=void 0===u?0:u,f=d.height,p=void 0===f?0:f,v=d.type,g=d.glInternalFormat,m="ktx"===v?new DataView(null!==(l=h[0])&&void 0!==l?l:new ArrayBuffer(0)):h[0],i.bindTexture(e._nativeCtxTexture),i.compressedTexImage2D(0,g,c,p,0,m),i.texParameteri(i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_MIN_FILTER,i.LINEAR),e.setTextureMemUse(m.byteLength)):console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",n),t.abrupt("return",{width:o,height:a});case 15:case"end":return t.stop()}var x}),t)})))()}free(){"freed"!==this._state&&(this._state="freed",this.textureSource.setState("freed"),this._w=0,this._h=0,this._nativeCtxTexture&&(this.glw.deleteTexture(this._nativeCtxTexture),this.setTextureMemUse(0),this._nativeCtxTexture=null))}createNativeCtxTexture(){var e=this.glw,t=e.createTexture();if(!t)throw new Error("Could not create WebGL Texture");return e.activeTexture(0),e.bindTexture(t),e.texParameteri(e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t}}class _e extends G{constructor(e){super(),R(this,"txManager",void 0),R(this,"dimensions",null),R(this,"error",null),R(this,"state","freed"),R(this,"renderableOwners",new Set),R(this,"renderable",!1),R(this,"lastRenderableChangeTime",0),this.txManager=e}setRenderableOwner(e,t){var r=this.renderableOwners.size;if(t){this.renderableOwners.add(e);var i,n=this.renderableOwners.size;if(n>r&&1===n)this.renderable=!0,this.lastRenderableChangeTime=this.txManager.frameTime,null===(i=this.onChangeIsRenderable)||void 0===i||i.call(this,!0)}else{this.renderableOwners.delete(e);var o,a=this.renderableOwners.size;if(a<r&&0===a)this.renderable=!1,this.lastRenderableChangeTime=this.txManager.frameTime,null===(o=this.onChangeIsRenderable)||void 0===o||o.call(this,!1)}}get ctxTexture(){var e=this.txManager.renderer.createCtxTexture(this);return Object.defineProperty(this,"ctxTexture",{value:e}),e}setState(e,...t){if(this.state!==e){if(this.state=e,"loaded"===e){var r=t;this.dimensions=r[0]}else if("failed"===e){var i=t;this.error=i[0]}this.emit(e,...t)}}static makeCacheKey(e){return!1}static resolveDefaults(e){return{}}}class Ce extends _e{constructor(e,t){super(e),R(this,"props",void 0),this.props=Ce.resolveDefaults(t||{})}get color(){return this.props.color}set color(e){this.props.color=e}getTextureData(){var e=this;return T(w().mark((function t(){var r,i;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Uint32Array([e.color]),i=new Uint8ClampedArray(r.buffer),t.abrupt("return",{data:new ImageData(i,1,1),premultiplyAlpha:!0});case 3:case"end":return t.stop()}}),t)})))()}static makeCacheKey(e){return`ColorTexture,${Ce.resolveDefaults(e).color}`}static resolveDefaults(e){return{color:e.color||4294967295}}}R(Ce,"z$__type__Props",void 0);class Re extends _e{constructor(e,t){super(e),R(this,"props",void 0),R(this,"parentTexture",void 0),R(this,"onParentTxLoaded",(()=>{this.setState("loaded",{width:this.props.width,height:this.props.height})})),R(this,"onParentTxFailed",((e,t)=>{this.setState("failed",t)})),this.props=Re.resolveDefaults(t||{}),this.parentTexture=this.props.texture,queueMicrotask((()=>{var e=this.parentTexture;"loaded"===e.state?this.onParentTxLoaded(e,e.dimensions):"failed"===e.state&&this.onParentTxFailed(e,e.error),e.on("loaded",this.onParentTxLoaded),e.on("failed",this.onParentTxFailed)}))}onChangeIsRenderable(e){this.parentTexture.setRenderableOwner(this,e)}getTextureData(){var e=this;return T(w().mark((function t(){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{data:e.props});case 1:case"end":return t.stop()}}),t)})))()}static makeCacheKey(e){return!1}static resolveDefaults(e){return{texture:e.texture,x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0}}}R(Re,"z$__type__Props",void 0);class Ee extends Se{constructor(e,t,r){super(e,t,r)}onLoadRequest(){var e=this;return T(w().mark((function t(){var r,i,n;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.textureSource.getTextureData();case 2:return n=t.sent,t.abrupt("return",{width:(null===(r=n.data)||void 0===r?void 0:r.width)||0,height:(null===(i=n.data)||void 0===i?void 0:i.height)||0});case 4:case"end":return t.stop()}}),t)})))()}}class Ie extends ye{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}}R(Ie,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio;\n        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);\n\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);\n        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    "});class Be extends ye{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]}),R(this,"supportsIndexedTextures",!0)}bindTextures(e){var t=this.renderer,r=this.glw;if(e.length>t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error(`DefaultShaderBatched: Cannot bind more than ${t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);e.forEach(((e,t)=>{r.activeTexture(t),r.bindTexture(e.ctxTexture)}));var i=Array.from(Array(e.length).keys());this.setUniform("u_textures[0]",i)}}R(Be,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:e=>`\n      #define txUnits ${e}\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[${e}], int idx, vec2 uv) {\n        ${Array.from(Array(e).keys()).map((e=>`\n          ${0!==e?"else ":""}if (idx == ${e}) {\n            return texture2D(textures[${e}], uv);\n          }\n        `)).join("")}\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    `});class ke{static getEffectKey(e){return""}static getMethodParameters(e,t){var r=[];for(var i in e){var n=e[i],o="";n.size&&(o=`[${n.size(t)}]`),r.push(`${n.type} ${i}${o}`)}return r.join(",")}constructor(e){R(this,"priority",1),R(this,"name",""),R(this,"ref",void 0),R(this,"target",void 0),R(this,"passParameters",""),R(this,"declaredUniforms",""),R(this,"uniformInfo",{});var t=e.ref,r=e.target,i=e.props,n=void 0===i?{}:i;this.ref=t,this.target=r;var o={},a=[],s="",l=this.constructor.uniforms||{};for(var d in l){var h=l[d],u=h.type,c=`${t}_${d}`,f="";h.size&&(f=`[${h.size(n)}]`),a.push(c),s+=`uniform ${u} ${c}${f};`,o[d]={name:c,uniform:l[d].method}}this.passParameters=a.join(","),this.declaredUniforms=s,this.uniformInfo=o}static resolveDefaults(e){return{}}static makeEffectKey(e){return!1}}R(ke,"uniforms",{}),R(ke,"methods",void 0),R(ke,"onShaderMask",void 0),R(ke,"onColorize",void 0),R(ke,"onEffectMask",void 0);var Me=new Map,Fe=(e,t)=>{var r,i=JSON.stringify(e);if(Me.has(i))return Me.get(i);for(var n=[],o=(e=null!==(r=e)&&void 0!==r?r:[]).length,a=0;a<o;a++){for(var s=e[a],l=s.name,d=s.type,h=s.props,u={name:l,type:d,props:{}},c=t[d],f=c.resolveDefaults(h),p=c.uniforms,v=Object.keys(p),g=v.length,m=0;m<g;m++){var x=v[m],y=p[x],b={value:f[x],programValue:void 0,updateOnBind:y.updateOnBind||!1,hasValidator:void 0!==y.validator,hasProgramValueUpdater:void 0!==y.updateProgramValue},w=b.hasValidator&&y.validator(f[x],f)||f[x];f[x]!==w&&(b.validatedValue=w),b.hasProgramValueUpdater&&y.updateProgramValue(b),void 0===b.programValue&&(b.programValue=b.value),u.props[x]=b}n.push(u)}return Me.set(i,n),n};class Le extends ye{constructor(e,t,r){var i=Le.createShader(t,r);super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...i.uniforms],shaderSources:{vertex:i.vertex,fragment:i.fragment}}),R(this,"effects",[]),this.effects=i.effects}bindTextures(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}bindProps(e){for(var t=e.effects,r=t.length,i=0;i<r;i++)for(var n=t[i],o=this.effects[i].uniformInfo,a=Object.keys(n.props),s=a.length,l=0;l<s;l++){var d=a[l];if(!0===n.props[d].updateOnBind){var h,u=null===(h=this.renderer.shManager.getRegisteredEffects()[n.type])||void 0===h?void 0:h.uniforms[d];null==u||u.updateProgramValue(n.props[d],e)}this.setUniform(o[d].name,n.props[d].programValue)}}canBatchShaderProps(e,t){if(e.$dimensions.width!==t.$dimensions.width||e.$dimensions.height!==t.$dimensions.height||e.effects.length!==t.effects.length)return!1;for(var r=e.effects.length,i=0;i<r;i++){var n=e.effects[i],o=t.effects[i];if(n.type!==o.type)return!1;for(var a in n.props)if(o.props&&!o.props[a]||n.props[a].value!==o.props[a].value)return!1}return!0}static createShader(e,t){var r={},i={},n="",o=[],a=[],s=e.effects.map((e=>{var i=t[e.type],s=i.getEffectKey(e.props||{});r[s]=r[s]?++r[s]:1;var l=r[s];1===l&&a.push({key:s,type:e.type,props:e.props});var d=new i({ref:`${s}${1===l?"":l}`,target:s,props:e.props});return n+=d.declaredUniforms,o.push(...Object.values(d.uniformInfo)),d})),l="";null==a||a.forEach((e=>{var r,n=t[e.type],o=n.resolveDefaults(null!==(r=e.props)&&void 0!==r?r:{}),a=[];for(var s in n.methods){var d=s,h=n.methods[s];i[s]&&i[s]!==h&&(d=Le.resolveMethodDuplicate(s,h,i)),i[d]=h.replace("function",d),a.push({m:s,cm:d})}var u=n.onShaderMask instanceof Function?n.onShaderMask(o):n.onShaderMask,c=n.onColorize instanceof Function?n.onColorize(o):n.onColorize,f=n.onEffectMask instanceof Function?n.onEffectMask(o):n.onEffectMask;a.forEach((e=>{var t=e.m,r=e.cm,i=new RegExp(`\\$${t}`,"g");u&&(u=u.replace(i,r)),c&&(c=c.replace(i,r)),f&&(f=f.replace(i,r))}));var p=n.getMethodParameters(n.uniforms,o),v=p.length>0?`, ${p}`:"";u&&(l+=`\n        float fx_${e.key}_onShaderMask(float shaderMask ${v}) {\n          ${u}\n        }\n        `),c&&(l+=`\n          vec4 fx_${e.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${v}) {\n            ${c}\n          }\n        `),f&&(l+=`\n          vec4 fx_${e.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${v}) {\n            ${f}\n          }\n        `)}));var d="";for(var h in i)d+=i[h];for(var u="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",c="\n\n    ",f=0;f<s.length;f++){var p=s[f],v=p.passParameters.length>0?`, ${p.passParameters}`:"",g=t[p.name];g.onShaderMask&&(c+=`\n        shaderMask = fx_${p.target}_onShaderMask(shaderMask ${v});\n        `),g.onColorize&&(c+=`\n        maskColor = fx_${p.target}_onColorize(shaderMask, maskColor, shaderColor${v});\n        `),g.onEffectMask&&(u=`fx_${p.target}_onEffectMask(shaderMask, maskColor, shaderColor${v})`);var m=s[f+1];(void 0===m||t[m.name].onEffectMask)&&(c+=`\n          shaderColor = ${u};\n        `)}return{effects:s,uniforms:o,fragment:Le.fragment(n,d,l,c),vertex:Le.vertex()}}static resolveMethodDuplicate(e,t,r,i=0){var n=e+(i>0?i:"");return r[n]&&r[n]!==t?this.resolveMethodDuplicate(e,t,r,++i):n}static resolveDefaults(e,t){var r;return{effects:Fe(null!==(r=e.effects)&&void 0!==r?r:[],t),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(e,t){var r,i="";return null===(r=e.effects)||void 0===r||r.forEach((e=>{var r=t[e.type].getEffectKey(e.props||{});i+=`,${r}`})),`DynamicShader${i}`}}R(Le,"z$__type__Props",void 0),R(Le,"vertex",(()=>"\n    # ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  ")),R(Le,"fragment",((e,t,r,i)=>`\n    # ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ${e}\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n\n    ${t}\n\n    ${r}\n\n    void main() {\n      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ${i}\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  `));class Pe extends ye{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(e){return{radius:e.radius||10,$dimensions:{width:0,height:0}}}bindTextures(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}bindProps(e){var t=Math.min(e.$dimensions.width,e.$dimensions.height)/(2*e.radius);this.setUniform("u_radius",e.radius*Math.min(t,1))}canBatchShaderProps(e,t){return e.radius===t.radius&&e.$dimensions.width===t.$dimensions.width&&e.$dimensions.height===t.$dimensions.height}}R(Pe,"z$__type__Props",void 0),R(Pe,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    "});var Ne=new Float32Array([1,0,0,0,1,0,0,0,1]);class Ue extends ye{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}bindProps(e){var t=Ue.resolveDefaults(e);for(var r in t)if("transform"===r)this.setUniform("u_transform",!1,t[r]);else if("scrollY"===r)this.setUniform("u_scrollY",t[r]);else if("color"===r){var i=X(t.color);this.setUniform("u_color",i)}else"size"===r?this.setUniform("u_size",t[r]):"distanceRange"===r?this.setUniform("u_distanceRange",t[r]):"debug"===r&&this.setUniform("u_debug",t[r]?1:0)}static resolveDefaults(e={}){var t,r,i,n,o,a;return{transform:null!==(t=e.transform)&&void 0!==t?t:Ne,scrollY:null!==(r=e.scrollY)&&void 0!==r?r:0,color:null!==(i=e.color)&&void 0!==i?i:4294967295,size:null!==(n=e.size)&&void 0!==n?n:16,distanceRange:null!==(o=e.distanceRange)&&void 0!==o?o:1,debug:null!==(a=e.debug)&&void 0!==a&&a}}}R(Ue,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n\n        // Calculate screen space with pixel ratio\n        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);\n\n        gl_Position = vec4(screenSpace, 0.0, 1.0);\n        v_texcoord = a_textureCoordinate;\n\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    "});var De=e=>{void 0===e.programValue&&(e.programValue=new Float32Array(4));var t=e.value,r=e.programValue;r[0]=(t>>>24)/255,r[1]=(t>>>16&255)/255,r[2]=(t>>>8&255)/255,r[3]=(255&t)/255},Oe=e=>{var t=e.validatedValue||e.value;if(e.programValue instanceof Float32Array)for(var r=t.length,i=e.programValue,n=0;n<r;n++)i[n]=t[n];else e.programValue=new Float32Array(t)},ze=e=>{var t=Array.isArray(e);return t?t&&4===e.length?e:t&&2===e.length?[e[0],e[1],e[0],e[1]]:t&&3===e.length?[e[0],e[1],e[2],e[0]]:[e[0],e[0],e[0],e[0]]:[e,e,e,e]},We=(e,t)=>{void 0===e.programValue&&(e.programValue=new Float32Array(4));var r=e.programValue,i=e.validatedValue||e.value;if(void 0===t&&void 0===e.$dimensions)return r[0]=i[0],r[1]=i[1],r[2]=i[2],void(r[3]=i[3]);var n=e.$dimensions;if(void 0!==t){var o=t.$dimensions;if(void 0!==n&&(n.width===o.width||n.height===o.height))return;void 0===n&&(n={width:null==o?void 0:o.width,height:null==o?void 0:o.height},e.$dimensions=n)}var a=n,s=a.width,l=a.height,d=C(i,4),h=d[0],u=d[1],c=d[2],f=d[3],p=Math.min(Math.min(Math.min(s/Math.max(s,h+u),s/Math.max(s,c+f)),Math.min(l/Math.max(l,h+c),l/Math.max(l,u+f))),1);r[0]=h*p,r[1]=u*p,r[2]=c*p,r[3]=f*p};class Ge extends ke{constructor(...e){super(...e),R(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(e){var t;return{radius:null!==(t=e.radius)&&void 0!==t?t:10}}}R(Ge,"z$__type__Props",void 0),R(Ge,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:ze,updateProgramValue:We}}),R(Ge,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),R(Ge,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);\n  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);\n  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  "),R(Ge,"onEffectMask","\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  ");class He extends ke{constructor(...e){super(...e),R(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(e){var t,r;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(r=e.color)&&void 0!==r?r:4294967295}}}R(He,"z$__type__Props",void 0),R(He,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:De,method:"uniform4fv",type:"vec4"}}),R(He,"onEffectMask","\n  float intR = shaderMask + 1.0;\n  float mask = clamp(intR + width, 0.0, 1.0) - clamp(intR, 0.0, 1.0);\n  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);\n  "),R(He,"onColorize","\n    return color;\n  ");class Xe extends ke{constructor(...e){super(...e),R(this,"name","linearGradient")}static getEffectKey(e){return`linearGradient${e.colors.length}`}static resolveDefaults(e){var t,r,i=null!==(t=e.colors)&&void 0!==t?t:[4278190080,4294967295],n=e.stops||[];if(0===n.length||n.length!==i.length){for(var o=i.length,a=0,s=n;a<o;a++)n[a]?(s[a]=n[a],void 0===n[a-1]&&void 0!==s[a-2]&&(s[a-1]=s[a-2]+(n[a]-s[a-2])/2)):s[a]=a*(1/(i.length-1));n=s}return{colors:i,stops:n,angle:null!==(r=e.angle)&&void 0!==r?r:0}}}I=Xe,R(Xe,"z$__type__Props",void 0),R(Xe,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:e=>e.reduce(((e,t)=>e.concat(X(t))),[]),updateProgramValue:Oe,size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),R(Xe,"methods",{fromLinear:"\n      vec4 function(vec4 linearRGB) {\n        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n        vec4 lower = linearRGB * vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",toLinear:"\n      vec4 function(vec4 sRGB) {\n        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n        vec4 lower = sRGB/vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",calcPoint:"\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    "}),R(Xe,"ColorLoop",(e=>{for(var t="",r=2;r<e;r++)t+=`colorOut = mix(colorOut, colors[${r}], clamp((dist - stops[${r-1}]) / (stops[${r}] - stops[${r-1}]), 0.0, 1.0));`;return t})),R(Xe,"onColorize",(e=>{var t=e.colors.length||1;return`\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));\n      ${I.ColorLoop(t)}\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    `}));class Ve extends ke{constructor(...e){super(...e),R(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(e){var t;return{amount:null!==(t=e.amount)&&void 0!==t?t:1}}}R(Ve,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),R(Ve,"onColorize","\n    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;\n    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);\n  ");class Ye extends ke{constructor(...e){super(...e),R(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(e){var t,r;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(r=e.color)&&void 0!==r?r:4294967295}}}R(Ye,"z$__type__Props",void 0),R(Ye,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:De,method:"uniform4fv",type:"vec4"}}),R(Ye,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),R(Ye,"onEffectMask","\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),R(Ye,"onColorize","\n    return color;\n  ");class je extends ke{constructor(...e){super(...e),R(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(e){var t,r;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(r=e.color)&&void 0!==r?r:4294967295}}}R(je,"z$__type__Props",void 0),R(je,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:De,method:"uniform4fv",type:"vec4"}}),R(je,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),R(je,"onEffectMask","\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),R(je,"onColorize","\n    return color;\n  ");class Qe extends ke{constructor(...e){super(...e),R(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(e){var t,r;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(r=e.color)&&void 0!==r?r:4294967295}}}R(Qe,"z$__type__Props",void 0),R(Qe,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:De,method:"uniform4fv",type:"vec4"}}),R(Qe,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),R(Qe,"onEffectMask","\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),R(Qe,"onColorize","\n    return color;\n  ");class Ke extends ke{constructor(...e){super(...e),R(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(e){var t,r;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(r=e.color)&&void 0!==r?r:4294967295}}}R(Ke,"z$__type__Props",void 0),R(Ke,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:De,method:"uniform4fv",type:"vec4"}}),R(Ke,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),R(Ke,"onEffectMask","\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),R(Ke,"onColorize","\n    return color;\n  ");class $e extends ke{constructor(...e){super(...e),R(this,"name","glitch")}static getEffectKey(e){return"glitch"}static resolveDefaults(e){var t,r,i,n,o;return{amplitude:null!==(t=e.amplitude)&&void 0!==t?t:.2,narrowness:null!==(r=e.narrowness)&&void 0!==r?r:4,blockiness:null!==(i=e.blockiness)&&void 0!==i?i:2,minimizer:null!==(n=e.minimizer)&&void 0!==n?n:8,time:null!==(o=e.time)&&void 0!==o?o:Date.now()}}}R($e,"z$__type__Props",void 0),R($e,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",updateOnBind:!0,updateProgramValue:e=>{var t=e.value=(Date.now()-e.value)%1e3;e.programValue=t},type:"float"}}),R($e,"methods",{rand:"\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    ",noise:"\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    ",fbm:"\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    "}),R($e,"onColorize","\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  ");class qe extends ke{constructor(...e){super(...e),R(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(e){var t;return{fade:null!==(t=e.fade)&&void 0!==t?t:10}}}R(qe,"z$__type__Props",void 0),R(qe,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:ze,updateProgramValue:e=>{var t=e.validatedValue||e.value;if(e.programValue instanceof Float32Array){var r=e.programValue;r[0]=t[0],r[1]=t[1],r[2]=t[1],r[3]=t[1]}else e.programValue=new Float32Array(t)}}}),R(qe,"onColorize","\n  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  ");class Ze extends ke{constructor(...e){super(...e),R(this,"name","radialGradient")}static getEffectKey(e){return`radialGradient${e.colors.length}`}static resolveDefaults(e){var t,r,i,n,o,a=null!==(t=e.colors)&&void 0!==t?t:[4278190080,4294967295],s=e.stops||[];if(0===s.length||s.length!==a.length){for(var l=a.length,d=0,h=s;d<l;d++)s[d]?(h[d]=s[d],void 0===s[d-1]&&void 0!==h[d-2]&&(h[d-1]=h[d-2]+(s[d]-h[d-2])/2)):h[d]=d*(1/(a.length-1));s=h}return{colors:a,stops:s,width:null!==(r=e.width)&&void 0!==r?r:0,height:null!==(i=null!==(n=e.height)&&void 0!==n?n:e.width)&&void 0!==i?i:0,pivot:null!==(o=e.pivot)&&void 0!==o?o:[.5,.5]}}}B=Ze,R(Ze,"z$__type__Props",void 0),R(Ze,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],updateProgramValue:e=>{var t=e.validatedValue||e.value;if(e.programValue instanceof Float32Array){var r=e.programValue;r[0]=t[0],r[1]=t[1]}else e.programValue=new Float32Array(t)},method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:e=>e.reduce(((e,t)=>e.concat(X(t))),[]),updateProgramValue:Oe,size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),R(Ze,"ColorLoop",(e=>{for(var t="",r=2;r<e;r++)t+=`colorOut = mix(colorOut, colors[${r}], clamp((dist - stops[${r-1}]) / (stops[${r}] - stops[${r-1}]), 0.0, 1.0));`;return t})),R(Ze,"onColorize",(e=>{var t=e.colors.length||1;return`\n      vec2 point = v_textureCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = mix(colors[0], colors[1], stopCalc);\n      ${B.ColorLoop(t)}\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    `}));class Je extends ke{constructor(...e){super(...e),R(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(e){var t,r,i,n,o,a,s;return{width:null!==(t=e.width)&&void 0!==t?t:10,progress:null!==(r=e.progress)&&void 0!==r?r:.5,offset:null!==(i=e.offset)&&void 0!==i?i:0,range:null!==(n=e.range)&&void 0!==n?n:2*Math.PI,rounded:null!==(o=e.rounded)&&void 0!==o&&o,radius:null!==(a=e.radius)&&void 0!==a?a:1,color:null!==(s=e.color)&&void 0!==s?s:4294967295}}}R(Je,"z$__type__Props",void 0),R(Je,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:e=>e?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:De,method:"uniform4fv",type:"vec4"}}),R(Je,"methods",{rotateUV:"\n    vec2 function(vec2 uv, float d) {\n      float s = sin(d);\n      float c = cos(d);\n      mat2 rotMatrix = mat2(c, -s, s, c);\n      return uv * rotMatrix;\n    }\n    ",drawDot:"\n    float function(vec2 uv, vec2 p, float r) {\n      uv += p;\n      float circle = length(uv) - r;\n      return clamp(-circle, 0.0, 1.0);\n    }\n    "}),R(Je,"onEffectMask","\n    float outerRadius = radius * u_dimensions.y * 0.5;\n\n    float endAngle = range * progress - 0.0005;\n\n    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;\n\n    uv = $rotateUV(uv, -(offset));\n    float linewidth = width * u_pixelRatio;\n    float circle = length(uv) - (outerRadius - linewidth) ;\n    circle = abs(circle) - linewidth;\n    circle = clamp(-circle, 0.0, 1.0);\n\n    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);\n    float p = endAngle / (PI * 2.);\n\n    circle *= step(fract(angle), fract(p));\n\n    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));\n    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));\n\n    return mix(shaderColor, maskColor, circle);\n  "),R(Je,"onColorize","\n    return color;\n  ");class et extends ke{constructor(...e){super(...e),R(this,"name","holePunch")}static getEffectKey(){return"holePunch"}static resolveDefaults(e){var t;return{x:e.x||0,y:e.y||0,width:e.width||50,height:e.height||50,radius:null!==(t=e.radius)&&void 0!==t?t:0}}}R(et,"z$__type__Props",void 0),R(et,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:ze,updateProgramValue:We}}),R(et,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),R(et,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  vec2 size = vec2(width, height) * 0.5;\n  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);\n  vec2 pos = basePos - size;\n  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);\n  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);\n  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);\n  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);\n  return $boxDist(pos, size, r);\n  "),R(et,"onEffectMask","\n  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));\n  ");var tt="RoundedRectangle";class rt extends me{constructor(e){super(),R(this,"shType",void 0),this.shType=e,e!==tt&&console.warn("Unsupported shader:",e)}bindRenderOp(){}bindProps(){}attach(){}detach(){}}class it{constructor(e,t,r,i){var n=this;R(this,"type",void 0),R(this,"shader",void 0),R(this,"resolvedProps",void 0),R(this,"props",void 0),this.type=e,this.shader=t,this.resolvedProps=r;for(var o=Object.keys(r),a=o.length,s={},l=function(){var e=o[d];Object.defineProperty(s,e,{get:()=>n.resolvedProps[e],set:t=>{n.resolvedProps[e]=t,i.requestRender()}})},d=0;d<a;d++)l();this.props=s}getResolvedProps(){return this.resolvedProps}}class nt{constructor(e,t,r){var i=this;R(this,"shader",void 0),R(this,"resolvedProps",void 0),R(this,"props",void 0),R(this,"type",void 0),this.shader=e,this.type="DynamicShader",this.resolvedProps=t;for(var n=r.getRegisteredEffects(),o={},a=t.effects,s=a.length,l=function(e){var t=a[e],s=t.name,l=t.props,d=t.type;if(void 0===s)return 1;for(var h={},u=Object.keys(l),c=u.length,f=function(){var t=u[p];Object.defineProperty(h,t,{get:()=>i.resolvedProps.effects[e].props[t].value,set:o=>{var a,s,h=i.resolvedProps.effects[e].props[t];(h.value=o,h.hasValidator)&&(o=h.validatedValue=null===(a=n[d].uniforms[t])||void 0===a?void 0:a.validator(o,l));h.hasProgramValueUpdater?null===(s=n[d].uniforms[t])||void 0===s||s.updateProgramValue(h):h.programValue=o;r.renderer.stage.requestRender()}})},p=0;p<c;p++)f();Object.defineProperty(o,s,{get:()=>h})},d=0;d<s;d++)l(d);this.props=o}getResolvedProps(){return this.resolvedProps}}class ot{constructor(){R(this,"shCache",new Map),R(this,"shConstructors",{}),R(this,"attachedShader",null),R(this,"effectConstructors",{}),R(this,"renderer",void 0),this.registerShaderType("DefaultShader",Ie),this.registerShaderType("DefaultShaderBatched",Be),this.registerShaderType("RoundedRectangle",Pe),this.registerShaderType("DynamicShader",Le),this.registerShaderType("SdfShader",Ue),this.registerEffectType("border",He),this.registerEffectType("borderBottom",Qe),this.registerEffectType("borderLeft",Ke),this.registerEffectType("borderRight",Ye),this.registerEffectType("borderTop",je),this.registerEffectType("fadeOut",qe),this.registerEffectType("linearGradient",Xe),this.registerEffectType("radialGradient",Ze),this.registerEffectType("grayscale",Ve),this.registerEffectType("glitch",$e),this.registerEffectType("radius",Ge),this.registerEffectType("radialProgress",Je),this.registerEffectType("holePunch",et)}registerShaderType(e,t){this.shConstructors[e]=t}registerEffectType(e,t){this.effectConstructors[e]=t}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(e,t){if(!this.renderer)throw new Error("Renderer is not been defined");var r=this.shConstructors[e];if(!r)throw new Error(`Shader type "${e}" is not registered`);if("canvas"===this.renderer.mode&&r.prototype instanceof ye)return this._createShaderCtr(e,new rt(e),t);if("DynamicShader"===e)return this.loadDynamicShader(t);var i=r.resolveDefaults(t),n=r.makeCacheKey(i)||r.name;if(n&&this.shCache.has(n))return this._createShaderCtr(e,this.shCache.get(n),i);var o=new r(this.renderer,t);return n&&this.shCache.set(n,o),this._createShaderCtr(e,o,i)}loadDynamicShader(e){if(!this.renderer)throw new Error("Renderer is not been defined");var t=Le.resolveDefaults(e,this.effectConstructors),r=Le.makeCacheKey(t,this.effectConstructors);if(r&&this.shCache.has(r))return this._createDynShaderCtr(this.shCache.get(r),t);var i=new Le(this.renderer,e,this.effectConstructors);return r&&this.shCache.set(r,i),this._createDynShaderCtr(i,t)}_createShaderCtr(e,t,r){return new it(e,t,r,this.renderer.stage)}_createDynShaderCtr(e,t){return new nt(e,t,this)}useShader(e){this.attachedShader!==e&&(this.attachedShader&&this.attachedShader.detach(),e.attach(),this.attachedShader=e)}}class at{constructor(e){R(this,"config",void 0),this.config=e}getBuffer(e){var t;return null===(t=this.config.find((t=>t.attributes[e])))||void 0===t?void 0:t.buffer}getAttributeInfo(e){var t;return null===(t=this.config.find((t=>t.attributes[e])))||void 0===t?void 0:t.attributes[e]}}class st{constructor(e){R(this,"gl",void 0),R(this,"activeTextureUnit",0),R(this,"texture2dUnits",void 0),R(this,"texture2dParams",new WeakMap),R(this,"scissorEnabled",void 0),R(this,"scissorX",void 0),R(this,"scissorY",void 0),R(this,"scissorWidth",void 0),R(this,"scissorHeight",void 0),R(this,"blendEnabled",void 0),R(this,"blendSrcRgb",void 0),R(this,"blendDstRgb",void 0),R(this,"blendSrcAlpha",void 0),R(this,"blendDstAlpha",void 0),R(this,"boundArrayBuffer",void 0),R(this,"boundElementArrayBuffer",void 0),R(this,"curProgram",void 0),R(this,"programUniforms",new WeakMap),R(this,"canvas",void 0),R(this,"MAX_RENDERBUFFER_SIZE",void 0),R(this,"MAX_TEXTURE_SIZE",void 0),R(this,"MAX_VIEWPORT_DIMS",void 0),R(this,"MAX_VERTEX_TEXTURE_IMAGE_UNITS",void 0),R(this,"MAX_TEXTURE_IMAGE_UNITS",void 0),R(this,"MAX_COMBINED_TEXTURE_IMAGE_UNITS",void 0),R(this,"MAX_VERTEX_ATTRIBS",void 0),R(this,"MAX_VARYING_VECTORS",void 0),R(this,"MAX_VERTEX_UNIFORM_VECTORS",void 0),R(this,"MAX_FRAGMENT_UNIFORM_VECTORS",void 0),R(this,"TEXTURE_MAG_FILTER",void 0),R(this,"TEXTURE_MIN_FILTER",void 0),R(this,"TEXTURE_WRAP_S",void 0),R(this,"TEXTURE_WRAP_T",void 0),R(this,"LINEAR",void 0),R(this,"CLAMP_TO_EDGE",void 0),R(this,"RGBA",void 0),R(this,"UNSIGNED_BYTE",void 0),R(this,"UNPACK_PREMULTIPLY_ALPHA_WEBGL",void 0),R(this,"UNPACK_FLIP_Y_WEBGL",void 0),R(this,"FLOAT",void 0),R(this,"TRIANGLES",void 0),R(this,"UNSIGNED_SHORT",void 0),R(this,"ONE",void 0),R(this,"ONE_MINUS_SRC_ALPHA",void 0),R(this,"VERTEX_SHADER",void 0),R(this,"FRAGMENT_SHADER",void 0),R(this,"STATIC_DRAW",void 0),R(this,"COMPILE_STATUS",void 0),R(this,"LINK_STATUS",void 0),R(this,"DYNAMIC_DRAW",void 0),R(this,"COLOR_ATTACHMENT0",void 0),this.gl=e,this.activeTextureUnit=e.getParameter(e.ACTIVE_TEXTURE)-e.TEXTURE0;var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.texture2dUnits=new Array(t).fill(void 0).map(((t,r)=>(this.activeTexture(r),e.getParameter(e.TEXTURE_BINDING_2D)))),this.activeTexture(this.activeTextureUnit),this.scissorEnabled=e.isEnabled(e.SCISSOR_TEST);var r=e.getParameter(e.SCISSOR_BOX);this.scissorX=r[0],this.scissorY=r[1],this.scissorWidth=r[2],this.scissorHeight=r[3],this.blendEnabled=e.isEnabled(e.BLEND),this.blendSrcRgb=e.getParameter(e.BLEND_SRC_RGB),this.blendDstRgb=e.getParameter(e.BLEND_DST_RGB),this.blendSrcAlpha=e.getParameter(e.BLEND_SRC_ALPHA),this.blendDstAlpha=e.getParameter(e.BLEND_DST_ALPHA),this.boundArrayBuffer=e.getParameter(e.ARRAY_BUFFER_BINDING),this.boundElementArrayBuffer=e.getParameter(e.ELEMENT_ARRAY_BUFFER_BINDING),this.curProgram=e.getParameter(e.CURRENT_PROGRAM),this.canvas=e.canvas,this.MAX_RENDERBUFFER_SIZE=e.MAX_RENDERBUFFER_SIZE,this.MAX_TEXTURE_SIZE=e.MAX_TEXTURE_SIZE,this.MAX_VIEWPORT_DIMS=e.MAX_VIEWPORT_DIMS,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=e.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.MAX_TEXTURE_IMAGE_UNITS=e.MAX_TEXTURE_IMAGE_UNITS,this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS,this.MAX_VERTEX_ATTRIBS=e.MAX_VERTEX_ATTRIBS,this.MAX_VARYING_VECTORS=e.MAX_VARYING_VECTORS,this.MAX_VERTEX_UNIFORM_VECTORS=e.MAX_VERTEX_UNIFORM_VECTORS,this.MAX_FRAGMENT_UNIFORM_VECTORS=e.MAX_FRAGMENT_UNIFORM_VECTORS,this.TEXTURE_MAG_FILTER=e.TEXTURE_MAG_FILTER,this.TEXTURE_MIN_FILTER=e.TEXTURE_MIN_FILTER,this.TEXTURE_WRAP_S=e.TEXTURE_WRAP_S,this.TEXTURE_WRAP_T=e.TEXTURE_WRAP_T,this.LINEAR=e.LINEAR,this.CLAMP_TO_EDGE=e.CLAMP_TO_EDGE,this.RGBA=e.RGBA,this.UNSIGNED_BYTE=e.UNSIGNED_BYTE,this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.UNPACK_FLIP_Y_WEBGL=e.UNPACK_FLIP_Y_WEBGL,this.FLOAT=e.FLOAT,this.TRIANGLES=e.TRIANGLES,this.UNSIGNED_SHORT=e.UNSIGNED_SHORT,this.ONE=e.ONE,this.ONE_MINUS_SRC_ALPHA=e.ONE_MINUS_SRC_ALPHA,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=e.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.TRIANGLES=e.TRIANGLES,this.UNSIGNED_SHORT=e.UNSIGNED_SHORT,this.VERTEX_SHADER=e.VERTEX_SHADER,this.FRAGMENT_SHADER=e.FRAGMENT_SHADER,this.STATIC_DRAW=e.STATIC_DRAW,this.COMPILE_STATUS=e.COMPILE_STATUS,this.LINK_STATUS=e.LINK_STATUS,this.DYNAMIC_DRAW=e.DYNAMIC_DRAW,this.COLOR_ATTACHMENT0=e.COLOR_ATTACHMENT0}isWebGl2(){return e=this.gl,self.WebGL2RenderingContext&&e instanceof self.WebGL2RenderingContext;var e}activeTexture(e){var t=this.gl;this.activeTextureUnit!==e&&(t.activeTexture(e+t.TEXTURE0),this.activeTextureUnit=e)}bindTexture(e){var t=this.gl,r=this.activeTextureUnit,i=this.texture2dUnits;i[r]!==e&&(i[r]=e,t.bindTexture(this.gl.TEXTURE_2D,e))}_getActiveTexture(){var e=this.activeTextureUnit;return this.texture2dUnits[e]}texParameteri(e,t){var r=this.gl,i=this.texture2dParams,n=this._getActiveTexture();if(!n)throw new Error("No active texture");var o=i.get(n);o||(o={},i.set(n,o)),o[e]!==t&&(o[e]=t,r.texParameteri(r.TEXTURE_2D,e,t))}texImage2D(e,t,r,i,n,o,a,s){var l=this.gl;o?l.texImage2D(l.TEXTURE_2D,e,t,r,i,n,o,a,s):l.texImage2D(l.TEXTURE_2D,e,t,r,i,n)}compressedTexImage2D(e,t,r,i,n,o){var a=this.gl;a.compressedTexImage2D(a.TEXTURE_2D,e,t,r,i,n,o)}pixelStorei(e,t){this.gl.pixelStorei(e,t)}generateMipmap(){var e=this.gl;e.generateMipmap(e.TEXTURE_2D)}createTexture(){return this.gl.createTexture()}deleteTexture(e){var t=this.gl;e&&this.texture2dParams.delete(e),t.deleteTexture(e)}viewport(e,t,r,i){this.gl.viewport(e,t,r,i)}clearColor(e,t,r,i){this.gl.clearColor(e,t,r,i)}setScissorTest(e){var t=this.gl;e!==this.scissorEnabled&&(e?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST),this.scissorEnabled=e)}scissor(e,t,r,i){var n=this.gl,o=this.scissorX,a=this.scissorY,s=this.scissorWidth,l=this.scissorHeight;e===o&&t===a&&r===s&&i===l||(n.scissor(e,t,r,i),this.scissorX=e,this.scissorY=t,this.scissorWidth=r,this.scissorHeight=i)}setBlend(e){var t=this.gl;e!==this.blendEnabled&&(e?t.enable(t.BLEND):t.disable(t.BLEND),this.blendEnabled=e)}blendFunc(e,t){var r=this.gl,i=this.blendSrcRgb,n=this.blendDstRgb,o=this.blendSrcAlpha,a=this.blendDstAlpha;e===i&&t===n&&e===o&&t===a||(r.blendFunc(e,t),this.blendSrcRgb=e,this.blendDstRgb=t,this.blendSrcAlpha=e,this.blendDstAlpha=t)}createBuffer(){return this.gl.createBuffer()}createFramebuffer(){return this.gl.createFramebuffer()}bindFramebuffer(e){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e)}framebufferTexture2D(e,t,r){var i=this.gl;i.framebufferTexture2D(i.FRAMEBUFFER,e,i.TEXTURE_2D,t,r)}clear(){var e=this.gl;e.clear(e.COLOR_BUFFER_BIT)}arrayBufferData(e,t,r){var i=this.gl;this.boundArrayBuffer!==e&&(i.bindBuffer(i.ARRAY_BUFFER,e),this.boundArrayBuffer=e),i.bufferData(i.ARRAY_BUFFER,t,r)}elementArrayBufferData(e,t,r){var i=this.gl;this.boundElementArrayBuffer!==e&&(i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e),this.boundElementArrayBuffer=e),i.bufferData(i.ELEMENT_ARRAY_BUFFER,t,r)}vertexAttribPointer(e,t,r,i,n,o,a){var s=this.gl;this.boundArrayBuffer!==e&&(s.bindBuffer(s.ARRAY_BUFFER,e),this.boundArrayBuffer=e),s.vertexAttribPointer(t,r,i,n,o,a)}useProgram(e){var t=this.gl;this.curProgram!==e&&(t.useProgram(e),this.curProgram=e)}setUniform(e,t,...r){var i=this.gl,n=this.programUniforms,o=n.get(this.curProgram);o||(o=new Map,n.set(this.curProgram,o));var a=o.get(t);a&&function(e,t){if(e.length!==t.length)return!1;return e.every(((e,r)=>!(Array.isArray(e)||e instanceof Float32Array)&&e===t[r]))}(a,r)||(o.set(t,r),i[e](t,...r))}getParameter(e){return this.gl.getParameter(e)}drawElements(e,t,r,i){this.gl.drawElements(e,t,r,i)}getExtension(e){return this.gl.getExtension(e)}createVertexArray(){var e=this.gl;return WebGL2RenderingContext,e.createVertexArray()}bindVertexArray(e){var t=this.gl;WebGL2RenderingContext,t.bindVertexArray(e)}getAttribLocation(e,t){return this.gl.getAttribLocation(e,t)}getUniformLocation(e,t){return this.gl.getUniformLocation(e,t)}enableVertexAttribArray(e){this.gl.enableVertexAttribArray(e)}disableVertexAttribArray(e){this.gl.disableVertexAttribArray(e)}createShader(e){return this.gl.createShader(e)}compileShader(e){this.gl.compileShader(e)}attachShader(e,t){this.gl.attachShader(e,t)}linkProgram(e){this.gl.linkProgram(e)}deleteProgram(e){this.gl.deleteProgram(e)}getShaderParameter(e,t){return this.gl.getShaderParameter(e,t)}getShaderInfoLog(e){return this.gl.getShaderInfoLog(e)}createProgram(){return this.gl.createProgram()}getProgramParameter(e,t){return this.gl.getProgramParameter(e,t)}getProgramInfoLog(e){return this.gl.getProgramInfoLog(e)}shaderSource(e,t){this.gl.shaderSource(e,t)}deleteShader(e){this.gl.deleteShader(e)}}class lt extends _e{constructor(e,t){super(e),R(this,"props",void 0),this.props=lt.resolveDefaults(t||{})}get width(){return this.props.width}set width(e){this.props.width=e}get height(){return this.props.height}set height(e){this.props.height=e}getTextureData(){return T(w().mark((function e(){return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{data:null,premultiplyAlpha:null});case 1:case"end":return e.stop()}}),e)})))()}static resolveDefaults(e){return{width:e.width||256,height:e.height||256}}}R(lt,"z$__type__Props",void 0);class dt extends Se{constructor(e,t,r){super(e,t,r),R(this,"framebuffer",void 0);var i=e.createFramebuffer();this.framebuffer=i}onLoadRequest(){var e=this;return T(w().mark((function t(){var r,i,n,o,a;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.glw,i=e._nativeCtxTexture=e.createNativeCtxTexture(),n=e.textureSource,o=n.width,a=n.height,r.texImage2D(0,r.RGBA,o,a,0,r.RGBA,r.UNSIGNED_BYTE,null),e.setTextureMemUse(o*a*4),r.bindFramebuffer(e.framebuffer),r.framebufferTexture2D(r.COLOR_ATTACHMENT0,i,0),r.bindFramebuffer(null),t.abrupt("return",{width:o,height:a});case 9:case"end":return t.stop()}}),t)})))()}}var ht=function(){var e=T(w().mark((function e(t){var r,i;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return r=e.sent,e.next=5,r.arrayBuffer();case 5:if(i=e.sent,-1===t.indexOf(".ktx")){e.next=8;break}return e.abrupt("return",ut(i));case 8:return e.abrupt("return",ct(i));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ut=function(){var e=T(w().mark((function e(t){var r,i,n,o,a,s,l;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=new DataView(t),i=16909060===r.getUint32(12),n=[],o={glInternalFormat:r.getUint32(28,i),pixelWidth:r.getUint32(36,i),pixelHeight:r.getUint32(40,i),numberOfMipmapLevels:r.getUint32(56,i),bytesOfKeyValueData:r.getUint32(60,i)},a=64,a+=o.bytesOfKeyValueData,s=0;s<o.numberOfMipmapLevels;s++)l=r.getUint32(a),a+=4,n.push(r.buffer.slice(a,l)),a+=l;return e.abrupt("return",{data:{glInternalFormat:o.glInternalFormat,mipmaps:n,width:o.pixelWidth||0,height:o.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ct=function(){var e=T(w().mark((function e(t){var r,i,n,o,a,s,l,d,h,u,c,f;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=t,i=new Int32Array(r,0,13),n=i[12]+52,o=new Uint8Array(r,n),a=[],s={pixelWidth:i[7],pixelHeight:i[6],numberOfMipmapLevels:i[11]||0},l=0,d=s.pixelWidth||0,h=s.pixelHeight||0,u=0;u<s.numberOfMipmapLevels;u++)c=(d+3>>2)*(h+3>>2)*8,f=new Uint8Array(r,o.byteOffset+l,c),a.push(f),l+=c,d>>=1,h>>=1;return e.abrupt("return",{data:{glInternalFormat:36196,mipmaps:a,width:s.pixelWidth||0,height:s.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();class ft extends _e{constructor(e,t){super(e),R(this,"props",void 0),this.props=ft.resolveDefaults(t)}hasAlphaChannel(e){return-1!==e.indexOf("image/png")}getTextureData(){var e=this;return T(w().mark((function t(){var r,i,n,o,a,s,l,d;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,i=r.src,n=r.premultiplyAlpha,i){t.next=3;break}return t.abrupt("return",{data:null});case 3:if("string"==typeof i){t.next=7;break}if(!(i instanceof ImageData)){t.next=6;break}return t.abrupt("return",{data:i,premultiplyAlpha:n});case 6:return t.abrupt("return",{data:i(),premultiplyAlpha:n});case 7:if(!/\.(ktx|pvr)$/.test(i)){t.next=9;break}return t.abrupt("return",ht(i));case 9:if(o=q(i),!e.txManager.imageWorkerManager){t.next=16;break}return t.next=13,e.txManager.imageWorkerManager.getImage(o,n);case 13:return t.abrupt("return",t.sent);case 16:if(!e.txManager.hasCreateImageBitmap){t.next=31;break}return t.next=19,fetch(o);case 19:return a=t.sent,t.next=22,a.blob();case 22:return s=t.sent,l=null!=n?n:e.hasAlphaChannel(s.type),t.next=26,createImageBitmap(s,{premultiplyAlpha:l?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"});case 26:return t.t0=t.sent,t.t1=l,t.abrupt("return",{data:t.t0,premultiplyAlpha:t.t1});case 31:return d=new Image,"data:"!==i.substr(0,5)&&(d.crossOrigin="Anonymous"),d.src=o,t.next=36,new Promise(((e,t)=>{d.onload=()=>e(),d.onerror=()=>t(new Error("Failed to load image"))})).catch((e=>{console.error(e)}));case 36:return t.abrupt("return",{data:d,premultiplyAlpha:null==n||n});case 37:case"end":return t.stop()}}),t)})))()}static makeCacheKey(e){var t,r=ft.resolveDefaults(e),i=r.key||r.src;return"string"==typeof i&&`ImageTexture,${i},${null!==(t=r.premultiplyAlpha)&&void 0!==t?t:"true"}`}static resolveDefaults(e){var t,r,i;return{src:null!==(t=e.src)&&void 0!==t?t:"",premultiplyAlpha:null===(r=e.premultiplyAlpha)||void 0===r||r,key:null!==(i=e.key)&&void 0!==i?i:null}}}R(ft,"z$__type__Props",void 0);class pt extends ve{constructor(e){super(e),R(this,"glw",void 0),R(this,"system",void 0),R(this,"quadBuffer",void 0),R(this,"fQuadBuffer",void 0),R(this,"uiQuadBuffer",void 0),R(this,"renderOps",[]),R(this,"curBufferIdx",0),R(this,"curRenderOp",null),R(this,"rttNodes",[]),R(this,"activeRttNode",null),R(this,"defShaderCtrl",void 0),R(this,"defaultShader",void 0),R(this,"quadBufferCollection",void 0),R(this,"defaultTexture",void 0),R(this,"quadBufferUsage",0),R(this,"renderToTextureActive",!1),this.quadBuffer=new ArrayBuffer(this.stage.options.quadBufferSize),this.fQuadBuffer=new Float32Array(this.quadBuffer),this.uiQuadBuffer=new Uint32Array(this.quadBuffer),this.mode="webgl";var t=e.canvas,r=e.clearColor,i=e.bufferMemory;this.defaultTexture=new Ce(this.txManager),this.defaultTexture.setRenderableOwner(this,!0),this.defaultTexture.once("loaded",(()=>{this.stage.requestRender()}));var n=function(e,t){var r={alpha:!0,antialias:!1,depth:!1,stencil:!0,desynchronized:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!1},i=e.getContext("webgl",r)||e.getContext("experimental-webgl",r);if(!i)throw new Error("Unable to create WebGL context");return t?new Proxy(i,{get(e,r){var i=e[r];return"function"==typeof i?(t.increment(String(r)),i.bind(e)):i}}):i}(t,e.contextSpy),o=this.glw=new st(n),a=X(r);o.viewport(0,0,t.width,t.height),o.clearColor(a[0],a[1],a[2],a[3]),o.setBlend(!0),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),function(e,t){for(var r=~~(t/80),i=new Uint16Array(6*r),n=0,o=0;n<r;n+=6,o+=4)i[n]=o,i[n+1]=o+1,i[n+2]=o+2,i[n+3]=o+2,i[n+4]=o+1,i[n+5]=o+3;var a=e.createBuffer();e.elementArrayBufferData(a,i,e.STATIC_DRAW)}(o,i),this.system={parameters:we(this.glw),extensions:Ae(this.glw)},this.shManager.renderer=this,this.defShaderCtrl=this.shManager.loadShader("DefaultShader"),this.defaultShader=this.defShaderCtrl.shader;var s=o.createBuffer(),l=6*Float32Array.BYTES_PER_ELEMENT;this.quadBufferCollection=new at([{buffer:s,attributes:{a_position:{name:"a_position",size:2,type:o.FLOAT,normalized:!1,stride:l,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:o.FLOAT,normalized:!1,stride:l,offset:2*Float32Array.BYTES_PER_ELEMENT},a_color:{name:"a_color",size:4,type:o.UNSIGNED_BYTE,normalized:!0,stride:l,offset:4*Float32Array.BYTES_PER_ELEMENT},a_textureIndex:{name:"a_textureIndex",size:1,type:o.FLOAT,normalized:!1,stride:l,offset:5*Float32Array.BYTES_PER_ELEMENT}}}])}reset(){var e=this.glw;this.curBufferIdx=0,this.curRenderOp=null,this.renderOps.length=0,e.setScissorTest(!1),e.clear()}getShaderManager(){return this.shManager}createCtxTexture(e){return e instanceof Re?new Ee(this.glw,this.txMemManager,e):e instanceof lt?new dt(this.glw,this.txMemManager,e):new Se(this.glw,this.txMemManager,e)}addQuad(e){var t,r,i,n,o=this.fQuadBuffer,a=this.uiQuadBuffer,s=e.width,l=e.height,d=e.colorTl,h=e.colorTr,u=e.colorBl,c=e.colorBr,f=e.textureOptions,p=e.shader,v=e.shaderProps,g=e.alpha,m=e.clippingRect,x=e.tx,y=e.ty,b=e.ta,w=e.tb,A=e.tc,T=e.td,S=e.renderCoords,_=e.rtt,C=e.parentHasRenderTexture,R=e.framebufferDimensions,E=e.texture;if(v&&z(v,"$dimensions")){var I=v.$dimensions;I.width=s,I.height=l}E=null!==(t=E)&&void 0!==t?t:this.defaultTexture;var B=this.curBufferIdx,k=this.curRenderOp,M={width:s,height:l},F=p||this.defaultShader;this.reuseRenderOp(e)||(this.newRenderOp(F,v,g,M,m,B,_,C,R),k=this.curRenderOp);var L=null!==(r=null==f?void 0:f.flipX)&&void 0!==r&&r,P=null!==(i=null==f?void 0:f.flipY)&&void 0!==i&&i;E instanceof lt&&(P=!P);var N=0,U=0,D=1,O=1;if(E instanceof Re){var W=E.props,G=W.x,H=W.y,X=W.width,V=W.height,Y=E.parentTexture.dimensions||{width:0,height:0},j=Y.width,Q=void 0===j?0:j,K=Y.height,$=void 0===K?0:K;D=(N=G/Q)+X/Q,O=(U=H/$)+V/$,E=E.parentTexture}var q=null!==(n=null==f?void 0:f.resizeMode)&&void 0!==n&&n;if(E instanceof ft&&q&&E.dimensions){var Z=E.dimensions,J=Z.width,ee=Z.height;if("cover"===q.type){var te=s/J,re=l/ee,ie=Math.max(te,re),ne=1/ie;if(ie&&te&&te<ie){var oe,ae=ne*s;D=(N=(1-ae/J)*(null!==(oe=q.clipX)&&void 0!==oe?oe:.5))+ae/J}if(ie&&re&&re<ie){var se,le=ne*l;O=(U=(1-le/ee)*(null!==(se=q.clipY)&&void 0!==se?se:.5))+le/ee}}}if(L){var de=[D,N];N=de[0],D=de[1]}if(P){var he=[O,U];U=he[0],O=he[1]}var ue=E.ctxTexture,ce=this.addTexture(ue,B);if(k=this.curRenderOp,S){var fe=S.x1,pe=S.y1,ve=S.x2,ge=S.y2,me=S.x3,xe=S.y3,ye=S.x4,be=S.y4;o[B++]=fe,o[B++]=pe,o[B++]=N,o[B++]=U,a[B++]=d,o[B++]=ce,o[B++]=ve,o[B++]=ge,o[B++]=D,o[B++]=U,a[B++]=h,o[B++]=ce,o[B++]=ye,o[B++]=be,o[B++]=N,o[B++]=O,a[B++]=u,o[B++]=ce,o[B++]=me,o[B++]=xe,o[B++]=D,o[B++]=O,a[B++]=c,o[B++]=ce}else if(0!==w||0!==A)o[B++]=x,o[B++]=y,o[B++]=N,o[B++]=U,a[B++]=d,o[B++]=ce,o[B++]=x+s*b,o[B++]=y+s*A,o[B++]=D,o[B++]=U,a[B++]=h,o[B++]=ce,o[B++]=x+l*w,o[B++]=y+l*T,o[B++]=N,o[B++]=O,a[B++]=u,o[B++]=ce,o[B++]=x+s*b+l*w,o[B++]=y+s*A+l*T,o[B++]=D,o[B++]=O,a[B++]=c,o[B++]=ce;else{var we=x+s*b,Ae=y+l*T;o[B++]=x,o[B++]=y,o[B++]=N,o[B++]=U,a[B++]=d,o[B++]=ce,o[B++]=we,o[B++]=y,o[B++]=D,o[B++]=U,a[B++]=h,o[B++]=ce,o[B++]=x,o[B++]=Ae,o[B++]=N,o[B++]=O,a[B++]=u,o[B++]=ce,o[B++]=we,o[B++]=Ae,o[B++]=D,o[B++]=O,a[B++]=c,o[B++]=ce}k.length+=24,k.numQuads++,this.curBufferIdx=B}newRenderOp(e,t,r,i,n,o,a,s,l){var d=new be(this.glw,this.options,this.quadBufferCollection,e,t,r,n,i,o,0,a,s,l);this.curRenderOp=d,this.renderOps.push(d)}addTexture(e,t,r){var i=this.curRenderOp,n=i.addTexture(e);if(4294967295===n){if(r)throw new Error("Unable to add texture to render op");var o=i.shader,a=i.shaderProps,s=i.dimensions,l=i.clippingRect,d=i.alpha;return this.newRenderOp(o,a,d,s,l,t),this.addTexture(e,t,!0)}return n}reuseRenderOp(e){var t,r,i,n=e.shader,o=e.shaderProps,a=e.parentHasRenderTexture,s=e.rtt,l=e.clippingRect,d=n||this.defaultShader;return(null===(t=this.curRenderOp)||void 0===t?void 0:t.shader)===d&&(((r=this.curRenderOp.clippingRect)===(i=l)||null!==r&&null!==i&&r.x===i.x&&r.y===i.y&&r.width===i.width&&r.height===i.height)&&(!a&&!s&&!!(this.curRenderOp.shader===this.defaultShader||o&&this.curRenderOp.shader.canBatchShaderProps(this.curRenderOp.shaderProps,o))))}addRenderOp(e){this.renderOps.push(e),this.curRenderOp=null}render(e="screen"){var t,r=this.glw,i=this.quadBuffer,n=new Float32Array(i,0,this.curBufferIdx),o=null!==(t=this.quadBufferCollection.getBuffer("a_position"))&&void 0!==t?t:null;r.arrayBufferData(o,n,r.STATIC_DRAW),this.renderOps.forEach(((e,t)=>{e.draw()})),this.quadBufferUsage=this.curBufferIdx*n.BYTES_PER_ELEMENT}renderToTexture(e){for(var t=0;t<this.rttNodes.length;t++)if(this.rttNodes[t]===e)return;this.rttNodes.unshift(e)}renderRTTNodes(){var e=this.glw;this.stage;for(var t=0;t<this.rttNodes.length;t++){var r=this.rttNodes[t];if(r&&r.hasRTTupdates){this.activeRttNode=r,r.texture;var i=r.texture.ctxTexture;this.renderToTextureActive=!0,e.bindFramebuffer(i.framebuffer),e.viewport(0,0,i.w,i.h),e.clear();for(var n=0;n<r.children.length;n++){var o=r.children[n];o&&(o.update(this.stage.deltaTime,{x:0,y:0,width:0,height:0,valid:!1}),this.stage.addQuads(o),o.hasRTTupdates=!1)}this.render(),this.renderOps.length=0,r.hasRTTupdates=!1}}e.bindFramebuffer(null),e.viewport(0,0,this.glw.canvas.width,this.glw.canvas.height),this.renderToTextureActive=!1}removeRTTNode(e){var t=this.rttNodes.indexOf(e);-1!==t&&this.rttNodes.splice(t,1)}getBufferInfo(){return{totalAvailable:this.stage.options.quadBufferSize,totalUsed:this.quadBufferUsage}}getDefShaderCtr(){return this.defShaderCtrl}}class vt{constructor(){R(this,"activeAnimations",new Set)}registerAnimation(e){this.activeAnimations.add(e)}unregisterAnimation(e){this.activeAnimations.delete(e)}update(e){this.activeAnimations.forEach((t=>{t.update(e)}))}}function gt(){self.onmessage=e=>{var t=e.data.src,r=e.data.id,i=e.data.premultiplyAlpha;(function(e,t){return new Promise((function(r,i){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(){if(200!==n.status)return i(new Error("Failed to load image: "+n.statusText));var e=n.response,o=void 0!==t?t:-1!==e.type.indexOf("image/png");createImageBitmap(e,{premultiplyAlpha:o?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}).then((function(e){r({data:e,premultiplyAlpha:t})})).catch((function(e){i(e)}))},n.onerror=function(){i(new Error("Network error occurred while trying to fetch the image."))},n.send()}))})(t,i).then((function(e){self.postMessage({id:r,src:t,data:e})})).catch((function(e){self.postMessage({id:r,src:t,error:e.message})}))}}class mt{constructor(e){R(this,"imageWorkersEnabled",!0),R(this,"messageManager",{}),R(this,"workers",[]),R(this,"workerIndex",0),R(this,"nextId",0),this.workers=this.createWorkers(e),this.workers.forEach((e=>{e.onmessage=this.handleMessage.bind(this)}))}handleMessage(e){var t=e.data,r=t.id,i=t.data,n=t.error,o=this.messageManager[r];if(o){var a=C(o,2),s=a[0],l=a[1];delete this.messageManager[r],n?l(new Error(n)):s(i)}}createWorkers(e=1){for(var t=`(${gt.toString()})()`,r=new Blob([t.replace('"use strict";',"")],{type:"application/javascript"}),i=(self.URL?URL:webkitURL).createObjectURL(r),n=[],o=0;o<e;o++)n.push(new Worker(i));return n}getNextWorker(){var e=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,e}getImage(e,t){return new Promise(((r,i)=>{try{if(this.workers){var n=this.nextId++;this.messageManager[n]=[r,i];var o=this.getNextWorker();o&&o.postMessage({id:n,src:e,premultiplyAlpha:t})}}catch(a){i(a)}}))}}class xt extends _e{constructor(e,t){super(e),R(this,"props",void 0),this.props=xt.resolveDefaults(t)}getTextureData(){var e=this;return T(w().mark((function t(){var r,i,n,o,a,s,l;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=e.props,i=r.width,n=r.height,o=i*n*4,a=new Uint8ClampedArray(o),s=0;s<o;s+=4)l=Math.floor(256*Math.random()),a[s]=l,a[s+1]=l,a[s+2]=l,a[s+3]=255;return t.abrupt("return",{data:new ImageData(a,i,n)});case 5:case"end":return t.stop()}}),t)})))()}static makeCacheKey(e){if(void 0===e.cacheId)return!1;var t=xt.resolveDefaults(e);return`NoiseTexture,${t.width},${t.height},${t.cacheId}`}static resolveDefaults(e){var t,r,i;return{width:null!==(t=e.width)&&void 0!==t?t:128,height:null!==(r=e.height)&&void 0!==r?r:128,cacheId:null!==(i=e.cacheId)&&void 0!==i?i:0}}}R(xt,"z$__type__Props",void 0);class yt{constructor(e){R(this,"keyCache",new Map),R(this,"inverseKeyCache",new WeakMap),R(this,"txConstructors",{}),R(this,"imageWorkerManager",null),R(this,"hasCreateImageBitmap",!!self.createImageBitmap),R(this,"hasWorker",!!self.Worker),R(this,"renderer",void 0),R(this,"frameTime",0),this.hasCreateImageBitmap&&this.hasWorker&&e>0&&(this.imageWorkerManager=new mt(e)),this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.registerTextureType("ImageTexture",ft),this.registerTextureType("ColorTexture",Ce),this.registerTextureType("NoiseTexture",xt),this.registerTextureType("SubTexture",Re),this.registerTextureType("RenderTexture",lt)}registerTextureType(e,t){this.txConstructors[e]=t}loadTexture(e,t){var r,i=this.txConstructors[e];if(!i)throw new Error(`Texture type "${e}" is not registered`);if(!r){var n=i.makeCacheKey(t);n&&this.keyCache.has(n)?r=this.keyCache.get(n):(r=new i(this,t),n&&this.initTextureToCache(r,n))}return r}initTextureToCache(e,t){var r=this.keyCache,i=this.inverseKeyCache;r.set(t,e),i.set(e,t)}removeTextureFromCache(e){var t=this.inverseKeyCache,r=this.keyCache,i=t.get(e);i&&r.delete(i)}}var bt={normal:400,bold:700,bolder:900,lighter:100},wt=e=>"number"==typeof e?e:bt[e]||400;var At=function(e,t){var r,i,n=0;function o(){var o,a,s=r,l=arguments.length;e:for(;s;){if(s.args.length===arguments.length){for(a=0;a<l;a++)if(s.args[a]!==arguments[a]){s=s.next;continue e}return s!==r&&(s===i&&(i=s.prev),s.prev.next=s.next,s.next&&(s.next.prev=s.prev),s.next=r,s.prev=null,r.prev=s,r=s),s.val}s=s.next}for(o=new Array(l),a=0;a<l;a++)o[a]=arguments[a];return s={args:o,val:e.apply(null,o)},r?(r.prev=s,s.next=r):i=s,n===t.maxSize?(i=i.prev).next=null:n++,r=s,s.val}return t=t||{},o.clear=function(){r=null,i=null,n=0},o}((function(e,t,r,i,n){var o,a=wt(r),s=E(e);try{for(s.s();!(o=s.n()).done;){var l=o.value[t];if(l){if(1===l.size)return console.warn(`TrFontManager: Only one font face found for family: '${t}' - will be used for all weights and styles`),l.values().next().value;var d,h=new Map,u=E(l);try{for(u.s();!(d=u.n()).done;){var c=d.value,f=wt(c.descriptors.weight);if(f===a&&c.descriptors.style===i&&c.descriptors.stretch===n)return c;h.set(f,c)}}catch(v){u.e(v)}finally{u.f()}var p=`TrFontManager: No exact match: '${t} Weight: ${a} Style: ${i} Stretch: ${n}'`;if(console.error(p),400===a&&h.has(500))return h.get(500);if(500===a&&h.has(400))return h.get(400);if(a<400){for(;a>0;){if(h.has(a))return h.get(a);a-=100}a=600}for(;a<1e3;){if(h.has(a))return h.get(a);a+=100}for(a=500;a>0;){if(h.has(a))return h.get(a);a-=100}}}}catch(v){s.e(v)}finally{s.f()}}));class Tt{constructor(e){R(this,"textRenderers",void 0),this.textRenderers=e}addFontFace(e){for(var t in this.textRenderers){var r=this.textRenderers[t];r&&r.isFontFaceSupported(e)&&r.addFontFace(e)}}static resolveFontFace(e,t){var r=t.fontFamily,i=t.fontWeight,n=t.fontStyle,o=t.fontStretch;return At(e,r,i,n,o)}}var St={x:(e,t)=>{e.props.x=t},y:(e,t)=>{e.props.y=t},width:(e,t)=>{e.props.width=t},height:(e,t)=>{e.props.height=t},color:(e,t)=>{e.props.color=t},zIndex:(e,t)=>{e.props.zIndex=t},fontFamily:(e,t)=>{e.props.fontFamily=t},fontWeight:(e,t)=>{e.props.fontWeight=t},fontStyle:(e,t)=>{e.props.fontStyle=t},fontStretch:(e,t)=>{e.props.fontStretch=t},fontSize:(e,t)=>{e.props.fontSize=t},text:(e,t)=>{e.props.text=t},textAlign:(e,t)=>{e.props.textAlign=t},contain:(e,t)=>{e.props.contain=t},offsetY:(e,t)=>{e.props.offsetY=t},scrollable:(e,t)=>{e.props.scrollable=t},scrollY:(e,t)=>{e.props.scrollY=t},letterSpacing:(e,t)=>{e.props.letterSpacing=t},lineHeight:(e,t)=>{e.props.lineHeight=t},maxLines:(e,t)=>{e.props.maxLines=t},textBaseline:(e,t)=>{e.props.textBaseline=t},verticalAlign:(e,t)=>{e.props.verticalAlign=t},overflowSuffix:(e,t)=>{e.props.overflowSuffix=t},debug:(e,t)=>{e.props.debug=t}};class _t{constructor(e){R(this,"stage",void 0),R(this,"set",void 0),this.stage=e;var t=_(_({},St),this.getPropertySetters());this.set=Object.freeze(Object.fromEntries(Object.entries(t).map((([e,t])=>[e,(r,i)=>{r.props[e]!==i&&(t(r,i),this.stage.requestRender())}]))))}setStatus(e,t,r){e.status!==t&&(e.status=t,e.emitter.emit(t,r))}setIsRenderable(e,t){e.isRenderable=t}destroyState(e){this.setStatus(e,"destroyed"),e.emitter.removeAllListeners()}scheduleUpdateState(e){e.updateScheduled||(e.updateScheduled=!0,queueMicrotask((()=>{"destroyed"!==e.status&&(e.updateScheduled=!1,this.updateState(e))})))}}class Ct extends G{constructor(e){super(),R(this,"fontFamily",void 0),R(this,"descriptors",void 0),R(this,"loaded",!1),R(this,"metrics",null);var t=e.fontFamily,r=e.descriptors,i=e.metrics;i&&(this.metrics={ascender:i.ascender/i.unitsPerEm,descender:i.descender/i.unitsPerEm,lineGap:i.lineGap/i.unitsPerEm}),this.fontFamily=t,this.descriptors=_({style:"normal",weight:"normal",stretch:"normal"},r)}static convertToCssFontFaceDescriptors(e){return{style:e.style,weight:"number"==typeof e.weight?`${e.weight}`:e.weight,stretch:e.stretch,unicodeRange:e.unicodeRange,featureSettings:e.featureSettings,display:e.display}}}var Rt=10;class Et{}class It extends Et{constructor(e,t){super(),R(this,"data",void 0),R(this,"glyphMap",void 0),R(this,"kernings",void 0),this.data=e,this.glyphMap=t;var r=this.kernings={};e.kernings.forEach((e=>{var t=e.second;(r[t]=r[t]||{})[e.first]=e.amount})),this.kernings=r}shapeText(e,t){var r=this;return w().mark((function i(){var n,o,a,s,l,d;return w().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:o=void 0;case 1:if(!(n=t.peek())||n.done){i.next=17;break}if(a=n.value,s=r.glyphMap.get(a),t.next(),void 0===s){i.next=12;break}return d=void 0!==o?((null===(l=r.kernings[s.id])||void 0===l?void 0:l[o])||0)+e.letterSpacing:0,o=s.id,i.next=10,{mapped:!0,glyphId:s.id,codepoint:a,cluster:t.lastIndex,xAdvance:s.xadvance+d,yAdvance:0,xOffset:s.xoffset+d,yOffset:s.yoffset,xBearing:0,yBearing:0,width:s.width,height:s.height};case 10:i.next=15;break;case 12:return a===Rt&&(o=void 0),i.next=15,{mapped:!1,codepoint:a,cluster:t.lastIndex};case 15:i.next=1;break;case 17:case"end":return i.stop()}}),i)}))()}}class Bt extends Ct{constructor(e,t){var r;super(t),r=this,R(this,"type",void 0),R(this,"texture",void 0),R(this,"maxCharHeight",0),R(this,"data",void 0),R(this,"shaper",void 0),R(this,"glyphMap",new Map);var i=t.atlasUrl,n=t.atlasDataUrl,o=t.stage;this.type=e;o.renderer;this.texture=o.txManager.loadTexture("ImageTexture",{src:i,premultiplyAlpha:!1}),this.texture.on("loaded",(()=>{this.checkLoaded(),o.requestRender()})),this.texture.ctxTexture.load(),fetch(n).then(function(){var e=T(w().mark((function e(t){var i,n,o,a,s,l,d;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(r.data=e.sent,r.data,i=0,r.data.chars.forEach((e=>{r.glyphMap.set(e.id,e);var t=e.yoffset+e.height;t>i&&(i=t)})),r.maxCharHeight=i,r.shaper=new It(r.data,r.glyphMap),r.metrics){e.next=15;break}if(null===(n=r.data)||void 0===n||!n.lightningMetrics){e.next=14;break}o=r.data.lightningMetrics,a=o.ascender,s=o.descender,l=o.lineGap,d=o.unitsPerEm,r.metrics={ascender:a/d,descender:s/d,lineGap:l/d},e.next=15;break;case 14:throw new Error(`Font metrics not found in ${r.type} font ${r.fontFamily}. Make sure you are using the latest version of the Lightning 3 \`msdf-generator\` tool to generate your SDF fonts.`);case 15:r.checkLoaded();case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(console.error)}getAtlasEntry(e){var t=this.glyphMap.get(e);if(void 0===t)throw new Error(`Glyph ${e} not found in font ${this.fontFamily}`);return{x:t.x,y:t.y,width:t.width,height:t.height}}checkLoaded(){this.loaded||"loaded"===this.texture.state&&this.data&&(this.loaded=!0,this.emit("loaded"))}}class kt{constructor(e,t=0){R(this,"iterator",void 0),R(this,"peekBuffer",[]),R(this,"_lastIndex",void 0),this.iterator=e,this.iterator=e,this._lastIndex=t-1,this.peekBuffer=[]}next(){var e=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return e.done?this._lastIndex=-1:this._lastIndex++,e}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];var e=this.iterator.next();return this.peekBuffer.push(e),e}get lastIndex(){return this._lastIndex}}function Mt(e,t=0){var r,i;return w().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=t;case 1:if(!(r<e.length)){n.next=10;break}if(void 0!==(i=e.codePointAt(r))){n.next=5;break}throw new Error("Invalid Unicode code point");case 5:return n.next=7,i;case 7:r+=i<=65535?1:2,n.next=1;break;case 10:case"end":return n.stop()}}),M)}function Ft(e,t,r,i,n,o,a,s,l,d,h,u,c,f,p,v,g,m,x){p.loaded,p.data,p.shaper;for(var y,b=s/p.data.info.size,w=l/b,A=o/b,T=d/b,S=c[e],_=(null==S?void 0:S.codepointIndex)||0,C=(null==S?void 0:S.maxX)||0,R=(null==S?void 0:S.maxY)||0,I=t,B=r,k=0,M={codepointIndex:-1,bufferOffset:-1,xStart:-1},F=p.shaper,L={letterSpacing:T},P=F.shapeText(L,new kt(Mt(i,_),_)),N=-1,U=[],D=a/b,O=function(e,t,r){var i,n=0,o=E(r.shapeText(t,new kt(Mt(e,0),0)));try{for(o.s();!(i=o.n()).done;){var a=i.value;a.mapped&&(n+=a.xAdvance)}}catch(s){o.e(s)}finally{o.f()}return n}(m,L,F),z=!0;z;){for(var W=(0===x||e+1<x)&&("both"!==u||g||B+w+p.maxCharHeight<=D),G=W?A:A-O,H=0,X=B+p.maxCharHeight>=f.y1,V=B<=f.y2,Y=X&&V;(y=P.next())&&!y.done;){var j=y.value;if(e===c.length)c.push({codepointIndex:j.cluster,maxY:R,maxX:C});else if(e>c.length)throw new Error("Unexpected lineCache length");if(32===j.codepoint||10===j.codepoint?-1!==M.codepointIndex&&(M.codepointIndex=-1,H=I):-1===M.codepointIndex&&(M.codepointIndex=j.cluster,M.bufferOffset=k,M.xStart=H),j.mapped){var Q=I+j.xOffset+j.width;if("none"!==u&&Q>=G&&-1!==M.codepointIndex&&M.xStart>0){if(W){P=F.shapeText(L,new kt(Mt(i,M.codepointIndex),M.codepointIndex)),k=M.bufferOffset;break}P=F.shapeText(L,new kt(Mt(m,0),0)),I=M.xStart,k=M.bufferOffset,u="none"}else{var K=I+j.xOffset,$=B+j.yOffset;if(Y){-1===N&&(N=k);var q=p.getAtlasEntry(j.glyphId),Z=q.x/p.data.common.scaleW,J=q.y/p.data.common.scaleH,ee=q.width/p.data.common.scaleW,te=q.height/p.data.common.scaleH;h[k++]=K,h[k++]=$,h[k++]=Z,h[k++]=J,h[k++]=K+j.width,h[k++]=$,h[k++]=Z+ee,h[k++]=J,h[k++]=K,h[k++]=$+j.height,h[k++]=Z,h[k++]=J+te,h[k++]=K+j.width,h[k++]=$+j.height,h[k++]=Z+ee,h[k++]=J+te}R=Math.max(R,$+j.height),C=Math.max(C,K+j.width),I+=j.xAdvance}}else if(10===j.codepoint){if(W)break;P=F.shapeText(L,new kt(Mt(m,0),0)),u="none"}}-1!==N&&(U.push({bufferStart:N,bufferEnd:k}),N=-1),I=0,B+=w,e++,M.codepointIndex=-1,H=0,!v&&"both"===u&&B>f.y2||y&&y.done?z=!1:W||(z=!1)}if("center"===n)for(var re="none"===u?C:A,ie=0;ie<U.length;ie++)for(var ne=U[ie],oe=(re-(h[ne.bufferEnd-4]-h[ne.bufferStart]))/2,ae=ne.bufferStart;ae<ne.bufferEnd;ae+=4)h[ae]+=oe;else if("right"===n)for(var se="none"===u?C:A,le=0;le<U.length;le++)for(var de=U[le],he=se-(de.bufferEnd===de.bufferStart?0:h[de.bufferEnd-4]-h[de.bufferStart]),ue=de.bufferStart;ue<de.bufferEnd;ue+=4)h[ue]+=he;return{bufferNumFloats:k,bufferNumQuads:k/16,layoutNumCharacters:y.done?i.length-_:y.value.cluster-_+1,fullyProcessed:!!y.done,maxX:C,maxY:R,numLines:c.length}}function Lt(e,t,r,i,n,o,a,s){var l,d,h,u=e.screen,c=e.sdf;if((h=a).x1<h.x2&&h.y1<h.y2){var f=a.x1-t,p=f+(a.x2-a.x1),v=a.y1-r+i,g=(l=v-o,d=n||1,Math.floor(l/d)*d),m=function(e,t){return Math.ceil(e/t)*t}(v+(a.y2-a.y1)+o,n||1);u.x1=f,u.y1=g,u.x2=p,u.y2=m,c.x1=f/s,c.y1=g/s,c.x2=p/s,c.y2=m/s,e.numLines=Math.ceil((m-g)/n),e.firstLineIdx=n?Math.floor(g/n):0}else u.x1=0,u.y1=0,u.x2=0,u.y2=0,c.x1=0,c.y1=0,c.x2=0,c.y2=0,e.numLines=0,e.firstLineIdx=0;e.valid=!0}function Pt(e,t){return t*(e.ascender-e.descender+e.lineGap)}var Nt={x:0,y:0,width:0,height:0};class Ut extends _t{constructor(e){super(e),R(this,"ssdfFontFamilies",{}),R(this,"msdfFontFamilies",{}),R(this,"fontFamilyArray",[this.ssdfFontFamilies,this.msdfFontFamilies]),R(this,"sdfShader",void 0),R(this,"rendererBounds",void 0),this.sdfShader=this.stage.shManager.loadShader("SdfShader").shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,t)=>{e.props.fontFamily=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontWeight:(e,t)=>{e.props.fontWeight=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStyle:(e,t)=>{e.props.fontStyle=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStretch:(e,t)=>{e.props.fontStretch=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontSize:(e,t)=>{e.props.fontSize=t,this.invalidateLayoutCache(e)},text:(e,t)=>{e.props.text=t,this.invalidateLayoutCache(e)},textAlign:(e,t)=>{e.props.textAlign=t,this.invalidateLayoutCache(e)},color:(e,t)=>{e.props.color=t},x:(e,t)=>{e.props.x=t,e.elementBounds.valid&&(this.setElementBoundsX(e),!e.renderWindow.valid&&j(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},y:(e,t)=>{e.props.y=t,e.elementBounds.valid&&(this.setElementBoundsY(e),!e.renderWindow.valid&&j(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},contain:(e,t)=>{e.props.contain=t,this.invalidateLayoutCache(e)},width:(e,t)=>{e.props.width=t,"none"!==e.props.contain&&this.invalidateLayoutCache(e)},height:(e,t)=>{e.props.height=t,"both"===e.props.contain&&this.invalidateLayoutCache(e)},offsetY:(e,t)=>{e.props.offsetY=t,this.invalidateLayoutCache(e)},scrollable:(e,t)=>{e.props.scrollable=t,this.invalidateLayoutCache(e)},scrollY:(e,t)=>{e.props.scrollY=t,this.scheduleUpdateState(e)},letterSpacing:(e,t)=>{e.props.letterSpacing=t,this.invalidateLayoutCache(e)},lineHeight:(e,t)=>{e.props.lineHeight=t,e.resLineHeight=void 0,this.invalidateLayoutCache(e)},maxLines:(e,t)=>{e.props.maxLines=t,this.invalidateLayoutCache(e)},textBaseline:(e,t)=>{e.props.textBaseline=t,this.invalidateLayoutCache(e)},verticalAlign:(e,t)=>{e.props.verticalAlign=t,this.invalidateLayoutCache(e)},overflowSuffix:(e,t)=>{e.props.overflowSuffix=t,this.invalidateLayoutCache(e)},debug:(e,t)=>{e.props.debug=t}}}canRenderFont(e){var t=e.fontFamily;return t in this.ssdfFontFamilies||t in this.msdfFontFamilies||"$$SDF_FAILURE_TEST$$"===t}isFontFaceSupported(e){return e instanceof Bt}addFontFace(e){var t=e.fontFamily,r="ssdf"===e.type?this.ssdfFontFamilies:"msdf"===e.type?this.msdfFontFamilies:void 0;if(r){var i=r[t];i||(i=new Set,r[t]=i),i.add(e)}else console.warn(`Invalid font face type: ${e.type}`)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new G,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,resLineHeight:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(e){var t=e.trFontFace,r=e.textH,i=e.lineCache,n=e.debugData,o=e.forceFullLayoutCalc;if(n.updateCount++,"initialState"===e.status&&this.setStatus(e,"loading"),!t){if(t=this.resolveFontFace(e.props),e.trFontFace=t,!t){var a=`SdfTextRenderer: Could not resolve font face for family: '${e.props.fontFamily}'`;return console.error(a),void this.setStatus(e,"failed",new Error(a))}t.texture.setRenderableOwner(e,!0)}if(t.loaded){t.data,t.metrics;var s=e.props,l=s.text,d=s.fontSize,h=s.x,u=s.y,c=s.contain,f=s.width,p=s.height,v=s.verticalAlign,g=s.scrollable,m=s.overflowSuffix,x=s.maxLines,y="both"===c&&g?e.props.scrollY:0,b=e.renderWindow,w=t.data.info.size,A=d/w,T=e.resLineHeight;if(void 0===T){var S=e.props.lineHeight;T=void 0===S?Pt(t.metrics,d):S,e.resLineHeight=T}var _=T/A;e.distanceRange=A*t.data.distanceField.distanceRange;var C=24*l.length,R=e.vertexBuffer;(!R||R.length<C)&&(R=new Float32Array(2*C));var E=e.elementBounds;if(E.valid||(this.setElementBoundsX(e),this.setElementBoundsY(e),E.valid=!0),!o&&b.valid){var I=b.screen;if(h+I.x1<=E.x1&&h+I.x2>=E.x2&&u-y+I.y1<=E.y1&&u-y+I.y2>=E.y2)return void this.setStatus(e,"loaded");b.valid=!1,this.setStatus(e,"loading")}var B=e.props,k=B.offsetY,M=B.textAlign;if(!b.valid){if(!j(E,this.rendererBounds))return;Lt(b,h,u,y,T,"both"===c?E.y2-E.y1:0,E,A)}var F=function(e,t,r,i,n,o,a,s,l){var d=Math.min(Math.max(a.firstLineIdx,0),s.length),h=r.metrics;r.data;var u=(h.ascender-h.descender)*e,c=0;"middle"===i?c=(t-u)/2:"bottom"===i&&(c=t-u);var f=n/o,p=r.data.common.base,v=f+(h.ascender*e-p)+d*t+c;if(!(l&&v>=l/o))return{sdfX:0,sdfY:v,lineIndex:d}}(w,_,t,v,k,A,b,i,r);if(F){var L=e.props.letterSpacing,P=Ft(F.lineIndex,F.sdfX,F.sdfY,l,M,f,p,d,T,L,R,c,i,b.sdf,t,o,g,m,x);e.bufferUploaded=!1,e.bufferNumFloats=P.bufferNumFloats,e.bufferNumQuads=P.bufferNumQuads,e.vertexBuffer=R,e.renderWindow=b,n.lastLayoutNumCharacters=P.layoutNumCharacters,n.bufferSize=R.byteLength,P.fullyProcessed&&(e.textW=P.maxX*A,e.textH=P.numLines*_*A),this.setStatus(e,"loaded")}else this.setStatus(e,"loaded")}else t.once("loaded",(()=>{this.scheduleUpdateState(e)}))}renderQuads(e,t,r,i,n,o){var a,s;if(e.vertexBuffer){var l,d,h=this.stage.renderer,u=e.props,c=u.fontSize,f=u.color,p=u.contain,v=u.scrollable,g=u.zIndex,m=u.debug,x="both"===p&&v?e.props.scrollY:0,y=e.textW,b=void 0===y?0:y,w=e.textH,A=void 0===w?0:w,T=e.distanceRange,S=e.vertexBuffer,_=e.bufferUploaded,C=e.trFontFace,R=e.elementBounds,E=e.webGlBuffers;if(!E){var I=h.glw,B=4*Float32Array.BYTES_PER_ELEMENT,k=I.createBuffer();e.webGlBuffers=new at([{buffer:k,attributes:{a_position:{name:"a_position",size:2,type:I.FLOAT,normalized:!1,stride:B,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:I.FLOAT,normalized:!1,stride:B,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,e.webGlBuffers,E=e.webGlBuffers}if(!_){var M,F,L=h.glw,P=null!==(M=null===(F=E)||void 0===F?void 0:F.getBuffer("a_textureCoordinate"))&&void 0!==M?M:null;L.arrayBufferData(P,S,L.STATIC_DRAW),e.bufferUploaded=!0}if(v&&"both"===p){R.valid;var N=(l=R,(d=Nt)?(d.x=l.x1,d.y=l.y1,d.width=l.x2-l.x1,d.height=l.y2-l.y1,d):{x:l.x1,y:l.y1,width:l.x2-l.x1,height:l.y2-l.y1});r.valid?(e.clippingRect.valid=!0,r=Q(r,N,e.clippingRect)):(e.clippingRect.valid=!0,r=K(N,e.clippingRect))}var D=new be(h.glw,h.options,E,this.sdfShader,{transform:t.getFloatArr(),color:U(f,i),size:c/((null===(a=C.data)||void 0===a?void 0:a.info.size)||0),scrollY:x,distanceRange:T,debug:m.sdfShaderDebug},i,r,{height:A,width:b},0,g,!1,n,o),O=null===(s=e.trFontFace)||void 0===s?void 0:s.texture,z=O.ctxTexture;D.addTexture(z),D.length=e.bufferNumFloats,D.numQuads=e.bufferNumQuads,h.addRenderOp(D)}}setIsRenderable(e,t){var r;super.setIsRenderable(e,t),null===(r=e.trFontFace)||void 0===r||r.texture.setRenderableOwner(e,t)}destroyState(e){var t;super.destroyState(e),null===(t=e.trFontFace)||void 0===t||t.texture.setRenderableOwner(e,!1)}resolveFontFace(e){return Tt.resolveFontFace(this.fontFamilyArray,e)}releaseFontFace(e){e.resLineHeight=void 0,e.trFontFace&&(e.trFontFace.texture.setRenderableOwner(e,!1),e.trFontFace=void 0)}invalidateLayoutCache(e){e.renderWindow.valid=!1,e.elementBounds.valid=!1,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading"),this.scheduleUpdateState(e)}setElementBoundsX(e){var t=e.props,r=t.x,i=t.contain,n=t.width,o=e.elementBounds;o.x1=r,o.x2="none"!==i?r+n:1/0}setElementBoundsY(e){var t=e.props,r=t.y,i=t.contain,n=t.height,o=e.elementBounds;o.y1=r,o.y2="both"===i?r+n:1/0}}class Dt extends Ct{constructor(e){super(e),R(this,"fontFace",void 0),R(this,"fontUrl",void 0);var t=e.fontFamily,r=e.fontUrl,i=r.replace(/\(|\)/g,""),n=this.descriptors,o={style:n.style,weight:"number"==typeof n.weight?`${n.weight}`:n.weight,stretch:n.stretch,unicodeRange:n.unicodeRange,featureSettings:n.featureSettings,display:n.display},a=new FontFace(t,`url(${i})`,o);a.load().then((()=>{this.loaded=!0,this.emit("loaded")})).catch(console.error),this.fontFace=a,this.fontUrl=r}}function Ot(e,t,r,i,n){return r*(i-1)+("bottom"!==e?.5*t:0)+Math.max(r,t)+(n||0)}class zt{constructor(e,t){R(this,"_canvas",void 0),R(this,"_context",void 0),R(this,"_settings",void 0),this._canvas=e,this._context=t,this._settings=this.mergeDefaults({})}set settings(e){this._settings=this.mergeDefaults(e)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){for(var e=[this._settings.fontFamily],t=[],r=0,i=e.length;r<i;r++)"serif"===e[r]||"sans-serif"===e[r]?t.push(e[r]):t.push(`"${e[r]}"`);return`${this._settings.fontStyle} ${this._settings.fontSize*this.getPrecision()}px ${t.join(",")}`}_load(){if(document.fonts){var e=this._getFontSetting();try{if(!document.fonts.check(e,this._settings.text))return document.fonts.load(e,this._settings.text).catch((t=>{console.warn("[Lightning] Font load error",t,e)})).then((()=>{document.fonts.check(e,this._settings.text)||console.warn("[Lightning] Font not found",e)}))}catch(t){console.warn("[Lightning] Can't check font loading for "+e)}}}calculateRenderInfo(){var e={},t=this.getPrecision(),r=this._settings.paddingLeft*t,i=this._settings.paddingRight*t,n=this._settings.fontSize*t,o=null===this._settings.offsetY?null:this._settings.offsetY*t,a=this._settings.w*t,s=this._settings.h*t,l=this._settings.wordWrapWidth*t,d=this._settings.cutSx*t,h=this._settings.cutEx*t,u=this._settings.cutSy*t,c=this._settings.cutEy*t,f=(this._settings.letterSpacing||0)*t,p=this._settings.textIndent*t,v=this._settings.trFontFace;this.setFontProperties();var g,m=function(e,t,r){if(t.metrics)return t.metrics;var i,n=e.measureText("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz");return console.warn(`Font metrics not provided for Canvas Web font ${t.fontFamily}. Using fallback values. It is HIGHLY recommended you use the latest version of the Lightning 3 \`msdf-generator\` tool to extract the default metrics for the font and provide them in the Canvas Web font definition.`),i=n.actualBoundingBoxDescent&&n.actualBoundingBoxAscent?{ascender:n.actualBoundingBoxAscent/r,descender:-n.actualBoundingBoxDescent/r,lineGap:.2}:{ascender:.8,descender:-.2,lineGap:.2},t.metrics=i,i}(this._context,v,n),x=Pt(m,n)*t,y=null!==this._settings.lineHeight?this._settings.lineHeight*t:x,b=this._settings.maxHeight,w=null!==b&&y>0?Math.floor(b/y):0,A=this._settings.maxLines,T=w>0&&A>0?Math.min(w,A):Math.max(w,A),S=a||2048/this.getPrecision(),_=S-r;if(_<10&&(S+=10-_,_=10),l||(l=_),this._settings.textOverflow&&!this._settings.wordWrap){var C;switch(this._settings.textOverflow){case"clip":C="";break;case"ellipsis":C=this._settings.overflowSuffix;break;default:C=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,l-p,C)}if(this._settings.wordWrap)g=this.wrapText(this._settings.text,l,f,p);else for(var R=(g={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]}).l.length,E=0;E<R-1;E++)g.n.push(E);var I=g.l;if(T&&I.length>T){var B,k=I.slice(0,T),M=null;if(this._settings.overflowSuffix){var F=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,L=this.wrapText(k[k.length-1],l-F,f,p);k[k.length-1]=`${L.l[0]}${this._settings.overflowSuffix}`,M=[L.l.length>1?L.l[1]:""]}else M=[""];var P=I.length,N=0,U=g.n.length;for(B=T;B<P;B++)M[N]+=`${M[N]?" ":""}${I[B]}`,B+1<U&&g.n[B+1]&&N++;e.remainingText=M.join("\n"),e.moreTextLines=!0,I=k}else e.moreTextLines=!1,e.remainingText="";for(var D,O=0,z=[],W=0;W<I.length;W++){var G=this.measureText(I[W],f)+(0===W?p:0);z.push(G),O=Math.max(O,G)}return e.lineWidths=z,a||(S=O+r+i,_=O),D=s||Ot(this._settings.textBaseline,n,y,I.length,o),null===o&&(o=n),e.w=S,e.h=D,e.lines=I,e.precision=t,S||(S=1),D||(D=1),(d||h)&&(S=Math.min(S,h-d)),(u||c)&&(D=Math.min(D,c-u)),e.width=S,e.innerWidth=_,e.height=D,e.fontSize=n,e.cutSx=d,e.cutSy=u,e.cutEx=h,e.cutEy=c,e.lineHeight=y,e.defLineHeight=x,e.lineWidths=z,e.offsetY=o,e.paddingLeft=r,e.paddingRight=i,e.letterSpacing=f,e.textIndent=p,e.metrics=m,e}draw(e,t){var r,i,n=this.getPrecision(),o=(null==t?void 0:t.lines)||e.lines,a=(null==t?void 0:t.lineWidths)||e.lineWidths,s=t?Ot(this._settings.textBaseline,e.fontSize,e.lineHeight,t.lines.length,null===this._settings.offsetY?null:this._settings.offsetY*n):e.height;this._canvas.width=Math.min(Math.ceil(e.width+this._settings.textRenderIssueMargin),2048),this._canvas.height=Math.min(Math.ceil(s),2048),this.setFontProperties(),e.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(e.cutSx||e.cutSy)&&this._context.translate(-e.cutSx,-e.cutSy);for(var l=[],d=e.metrics,h=d?d.ascender*e.fontSize:e.fontSize,u=(d.ascender-d.descender)*e.fontSize,c=0,f=o.length;c<f;c++)r=0===c?e.textIndent:0,i=c*e.lineHeight+h,"middle"==this._settings.verticalAlign?i+=(e.lineHeight-u)/2:"bottom"==this._settings.verticalAlign&&(i+=e.lineHeight-u),"right"===this._settings.textAlign?r+=e.innerWidth-a[c]:"center"===this._settings.textAlign&&(r+=(e.innerWidth-a[c])/2),r+=e.paddingLeft,l.push({text:o[c],x:r,y:i,w:a[c]});if(this._settings.highlight){var p=this._settings.highlightColor,v=this._settings.highlightHeight*n||1.5*e.fontSize,g=this._settings.highlightOffset*n,m=null!==this._settings.highlightPaddingLeft?this._settings.highlightPaddingLeft*n:e.paddingLeft,x=null!==this._settings.highlightPaddingRight?this._settings.highlightPaddingRight*n:e.paddingRight;this._context.fillStyle=V(p);for(var y=0;y<l.length;y++){var b=l[y];this._context.fillRect(b.x-m,b.y-e.offsetY+g,b.w+x+m,v)}}var w=null;this._settings.shadow&&(w=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=V(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*n,this._context.shadowOffsetY=this._settings.shadowOffsetY*n,this._context.shadowBlur=this._settings.shadowBlur*n),this._context.fillStyle=V(this._settings.textColor);for(var A=0,T=l.length;A<T;A++){var S=l[A];if(0===e.letterSpacing)this._context.fillText(S.text,S.x,S.y);else for(var _=S.text.split(""),C=S.x,R=0,E=_.length;R<E;R++)this._context.fillText(_[R],C,S.y),C+=this.measureText(_[R],e.letterSpacing)}w&&(this._context.shadowColor=w[0],this._context.shadowOffsetX=w[1],this._context.shadowOffsetY=w[2],this._context.shadowBlur=w[3]),(e.cutSx||e.cutSy)&&this._context.translate(e.cutSx,e.cutSy)}wrapWord(e,t,r){var i=this._context.measureText(r).width,n=e.length,o=this._context.measureText(e).width;if(o<=t)return e;var a=Math.floor(t*n/o),s=this._context.measureText(e.substring(0,a)).width+i;if(s>t)for(;a>0&&(s=this._context.measureText(e.substring(0,a)).width+i)>t;)a-=1;else for(;a<n;){if(!((s=this._context.measureText(e.substring(0,a)).width+i)<t)){a-=1;break}a+=1}return e.substring(0,a)+(t>=i?r:"")}wrapText(e,t,r,i=0){for(var n=e.split(/\r?\n/g),o=[],a=[],s=0;s<n.length;s++){for(var l=[],d="",h=t-i,u=n[s].split(" "),c=0;c<u.length;c++){var f=this.measureText(u[c],r),p=f+this.measureText(" ",r);0===c||p>h?(c>0&&(l.push(d),d=""),d+=u[c],h=t-f-(0===c?i:0)):(h-=p,d+=` ${u[c]}`)}l.push(d),d="",o=o.concat(l),s<n.length-1&&a.push(o.length)}return{l:o,n:a}}measureText(e,t=0){return t?e.split("").reduce(((e,r)=>e+this._context.measureText(r).width+t),0):this._context.measureText(e).width}mergeDefaults(e){return _({text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFamily:null,trFontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,maxHeight:null,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0},e)}}var Wt="undefined"==typeof self?globalThis:self,Gt=(null===(k=Wt.document)||void 0===k?void 0:k.fonts)||Wt.fonts;class Ht extends _t{constructor(e){super(e),R(this,"canvas",void 0),R(this,"context",void 0),R(this,"fontFamilies",{}),R(this,"fontFamilyArray",[this.fontFamilies]),R(this,"loadFont",(e=>{var t,r,i=(t=e.props,r=t.fontFamily,[t.fontStyle,t.fontWeight,t.fontStretch,`${t.fontSize}px`,r].join(" ")),n=Tt.resolveFontFace(this.fontFamilyArray,e.props);e.fontInfo={fontFace:n,cssString:i,loaded:!1},e.fontInfo.loaded||Gt.load(i).then(this.onFontLoaded.bind(this,e,i)).catch(this.onFontLoadError.bind(this,e,i))})),"undefined"!=typeof OffscreenCanvas?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");var t=this.canvas.getContext("2d",{willReadFrequently:!0});t||(this.canvas=document.createElement("canvas"),t=this.canvas.getContext("2d",{willReadFrequently:!0})),this.context=t,this.addFontFace(new Dt({fontFamily:"sans-serif",descriptors:{},fontUrl:""}))}getPropertySetters(){return{fontFamily:(e,t)=>{e.props.fontFamily=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,t)=>{e.props.fontWeight=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,t)=>{e.props.fontStyle=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,t)=>{e.props.fontStretch=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontSize:(e,t)=>{e.props.fontSize=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},text:(e,t)=>{e.props.text=t,this.invalidateLayoutCache(e)},textAlign:(e,t)=>{e.props.textAlign=t,this.invalidateLayoutCache(e)},color:(e,t)=>{e.props.color=t,this.invalidateLayoutCache(e)},x:(e,t)=>{e.props.x=t},y:(e,t)=>{e.props.y=t},contain:(e,t)=>{e.props.contain=t,this.invalidateLayoutCache(e)},width:(e,t)=>{e.props.width=t,"none"!==e.props.contain&&this.invalidateLayoutCache(e)},height:(e,t)=>{e.props.height=t,"both"===e.props.contain&&this.invalidateLayoutCache(e)},offsetY:(e,t)=>{e.props.offsetY=t,this.invalidateLayoutCache(e)},scrollY:(e,t)=>{e.props.scrollY=t},letterSpacing:(e,t)=>{e.props.letterSpacing=t,this.invalidateLayoutCache(e)},lineHeight:(e,t)=>{e.props.lineHeight=t,this.invalidateLayoutCache(e)},maxLines:(e,t)=>{e.props.maxLines=t,this.invalidateLayoutCache(e)},textBaseline:(e,t)=>{e.props.textBaseline=t,this.invalidateLayoutCache(e)},verticalAlign:(e,t)=>{e.props.verticalAlign=t,this.invalidateLayoutCache(e)},overflowSuffix:(e,t)=>{e.props.overflowSuffix=t,this.invalidateLayoutCache(e)}}}canRenderFont(e){return!0}isFontFaceSupported(e){return e instanceof Dt}addFontFace(e){"sans-serif"!==e.fontFamily&&Gt.add(e.fontFace);var t=this.fontFamilies,r=e.fontFace.family,i=t[r];i||(i=new Set,t[r]=i),i.add(e)}createState(e,t){return{node:t,props:e,status:"initialState",updateScheduled:!1,emitter:new G,textureNode:void 0,lightning2TextRenderer:new zt(this.canvas,this.context),renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(e){if("initialState"===e.status&&this.setStatus(e,"loading"),"loaded"!==e.status)return e.fontInfo?void(e.fontInfo.loaded&&(e.renderInfo||(e.renderInfo=this.calculateRenderInfo(e),e.textH=e.renderInfo.lineHeight*e.renderInfo.lines.length,e.textW=e.renderInfo.width,this.renderSingleCanvasPage(e)))):this.loadFont(e)}renderSingleCanvasPage(e){e.renderInfo;var t,r=e.node,i=this.stage.txManager.loadTexture("ImageTexture",{src:function(e,t){return e.draw(t,{lines:t.lines,lineWidths:t.lineWidths}),0===this.canvas.width||0===this.canvas.height?null:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)}.bind(this,e.lightning2TextRenderer,e.renderInfo)});if(e.textureNode)e.textureNode.texture=i;else{var n=this.stage.createNode({parent:r,texture:i,autosize:!0,alpha:(t=e.props.color,(255&t)/255)});e.textureNode=n}this.setStatus(e,"loaded")}calculateRenderInfo(e){var t,r;return e.lightning2TextRenderer.settings={text:e.props.text,textAlign:e.props.textAlign,fontFamily:e.props.fontFamily,trFontFace:null===(t=e.fontInfo)||void 0===t?void 0:t.fontFace,fontSize:e.props.fontSize,fontStyle:[e.props.fontStretch,e.props.fontStyle,e.props.fontWeight].join(" "),textColor:X(e.props.color),offsetY:e.props.offsetY,wordWrap:"none"!==e.props.contain,wordWrapWidth:"none"===e.props.contain?void 0:e.props.width,letterSpacing:e.props.letterSpacing,lineHeight:null!==(r=e.props.lineHeight)&&void 0!==r?r:null,maxLines:e.props.maxLines,maxHeight:"both"===e.props.contain?e.props.height-e.props.offsetY:null,textBaseline:e.props.textBaseline,verticalAlign:e.props.verticalAlign,overflowSuffix:e.props.overflowSuffix,w:"none"!==e.props.contain?e.props.width:void 0},e.renderInfo=e.lightning2TextRenderer.calculateRenderInfo(),e.renderInfo}renderQuads(){}destroyState(e){"destroyed"!==e.status&&(super.destroyState(e),e.textureNode&&(e.textureNode.destroy(),delete e.textureNode),delete e.renderInfo)}invalidateLayoutCache(e){e.renderInfo=void 0,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}onFontLoaded(e,t){var r;t===(null===(r=e.fontInfo)||void 0===r?void 0:r.cssString)&&e.fontInfo&&(e.fontInfo.loaded=!0,this.scheduleUpdateState(e))}onFontLoadError(e,t,r){var i;t===(null===(i=e.fontInfo)||void 0===i?void 0:i.cssString)&&e.fontInfo&&(e.fontInfo.loaded=!0,console.error(`CanvasTextRenderer: Error loading font '${e.fontInfo.cssString}'`,r),this.scheduleUpdateState(e))}}class Xt{constructor(){R(this,"data",{})}reset(){this.data={}}increment(e){this.data[e]||(this.data[e]=0),this.data[e]++}getData(){return _({},this.data)}}class Vt{constructor(e,t){R(this,"stage",void 0),R(this,"memUsed",0),R(this,"loadedTextures",new Map),R(this,"criticalThreshold",void 0),R(this,"targetThreshold",void 0),R(this,"cleanupInterval",void 0),R(this,"debugLogging",void 0),R(this,"lastCleanupTime",0),R(this,"criticalCleanupRequested",!1),R(this,"frameTime",0),this.stage=e;var r=t.criticalThreshold;this.criticalThreshold=Math.round(r);var i=Math.max(0,Math.min(1,t.targetThresholdLevel));if(this.targetThreshold=Math.round(r*i),this.cleanupInterval=t.cleanupInterval,this.debugLogging=t.debugLogging,t.debugLogging){var n=0;setInterval((()=>{n!==this.memUsed&&(n=this.memUsed,console.log(`[TextureMemoryManager] Memory used: ${le(this.memUsed)} mb / ${le(this.criticalThreshold)} mb (${(this.memUsed/this.criticalThreshold*100).toFixed(1)}%)`))}),1e3)}0===r&&(this.setTextureMemUse=()=>{})}setTextureMemUse(e,t){this.loadedTextures.has(e)&&(this.memUsed-=this.loadedTextures.get(e)),0!==t?(this.memUsed+=t,this.loadedTextures.set(e,t),this.memUsed>this.criticalThreshold&&(this.criticalCleanupRequested=!0)):this.loadedTextures.delete(e)}checkCleanup(){return this.criticalCleanupRequested||this.memUsed>this.targetThreshold&&this.frameTime-this.lastCleanupTime>=this.cleanupInterval}cleanup(){var e=this.criticalCleanupRequested;this.lastCleanupTime=this.frameTime,this.criticalCleanupRequested=!1,e&&this.stage.queueFrameEvent("criticalCleanup",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),this.debugLogging&&console.log(`[TextureMemoryManager] Cleaning up textures. Critical: ${e}`);var t,r=[...this.loadedTextures.keys()].sort(((e,t)=>{var r=e.renderable,i=t.renderable;return r===i?e.lastRenderableChangeTime-t.lastRenderableChangeTime:r?1:i?-1:0})),i=this.targetThreshold,n=this.stage.txManager,o=E(r);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a.renderable)break;if(a.ctxTexture.free(),n.removeTextureFromCache(a),this.memUsed<=i)break}}catch(s){o.e(s)}finally{o.f()}this.memUsed>=this.criticalThreshold&&(this.stage.queueFrameEvent("criticalCleanupFailed",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),console.warn(`[TextureMemoryManager] Memory usage above critical threshold after cleanup: ${this.memUsed}`))}getMemoryInfo(){var e=0,t=[...this.loadedTextures.keys()].reduce(((t,r)=>(e+=r.renderable?1:0,t+(r.renderable?this.loadedTextures.get(r):0))),0);return{criticalThreshold:this.criticalThreshold,targetThreshold:this.targetThreshold,renderableMemUsed:t,memUsed:this.memUsed,renderableTexturesLoaded:e,loadedTextures:this.loadedTextures.size}}}var Yt={isWhite:!0,a:1,r:255,g:255,b:255};function jt(e){return 4294967295===e?Yt:{isWhite:!1,a:(e>>>24&255)/255,r:255&e,g:255&e>>>8,b:255&e>>>16}}function Qt({a:e,r:t,g:r,b:i}){return`rgba(${t},${r},${i},${e})`}class Kt extends pe{constructor(...e){super(...e),R(this,"image",void 0),R(this,"tintCache",void 0)}load(){"freed"===this.textureSource.state&&(this.textureSource.setState("loading"),this.onLoadRequest().then((e=>{this.textureSource.setState("loaded",e),this.updateMemSize()})).catch((e=>{this.textureSource.setState("failed",e)})))}free(){this.image=void 0,this.tintCache=void 0,this.textureSource.setState("freed"),this.setTextureMemUse(0)}updateMemSize(){var e=this.tintCache?8:4;if(this.textureSource.dimensions){var t=this.textureSource.dimensions,r=t.width,i=t.height;this.setTextureMemUse(r*i*e)}}hasImage(){return void 0!==this.image}getImage(e){var t,r=this.image;if(e.isWhite)return this.tintCache&&(this.tintCache=void 0,this.updateMemSize()),r;var i=Qt(e);if((null===(t=this.tintCache)||void 0===t?void 0:t.key)===i)return this.tintCache.image;var n=this.tintTexture(r,i);return this.tintCache={key:i,image:n},this.updateMemSize(),n}tintTexture(e,t){var r=e.width,i=e.height,n=document.createElement("canvas");n.width=r,n.height=i;var o=n.getContext("2d");return o&&(o.fillStyle=t,o.globalCompositeOperation="copy",o.fillRect(0,0,r,i),o.globalCompositeOperation="multiply",o.drawImage(e,0,0,r,i,0,0,r,i),o.globalCompositeOperation="destination-in",o.drawImage(e,0,0,r,i,0,0,r,i)),n}onLoadRequest(){var e=this;return T(w().mark((function t(){var r,i,n,o;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.textureSource.getTextureData();case 2:if(r=t.sent,!((i=r.data)instanceof ImageData)){t.next=14;break}return(n=document.createElement("canvas")).width=i.width,n.height=i.height,(o=n.getContext("2d"))&&o.putImageData(i,0,0),e.image=n,t.abrupt("return",{width:i.width,height:i.height});case 14:if(!(i instanceof ImageBitmap)){t.next=17;break}return e.image=i,t.abrupt("return",{width:i.width,height:i.height});case 17:return t.abrupt("return",{width:0,height:0});case 18:case"end":return t.stop()}}),t)})))()}}class $t extends ve{constructor(e){super(e),R(this,"context",void 0),R(this,"canvas",void 0),R(this,"pixelRatio",void 0),R(this,"clearColor",void 0),R(this,"renderToTextureActive",!1),R(this,"activeRttNode",null),R(this,"defShaderCtr",void 0),this.mode="canvas",this.shManager.renderer=this;var t,r=e.canvas,i=e.pixelRatio,n=e.clearColor;this.canvas=r,this.context=r.getContext("2d"),this.pixelRatio=i,this.clearColor=n?[(t=n)>>>24,t>>>16&255,t>>>8&255,255&t]:void 0,this.defShaderCtr={type:"DefaultShader",props:{},shader:new rt("DefaultShader"),getResolvedProps:()=>()=>({})}}reset(){this.canvas.width=this.canvas.width;var e=this.context;if(this.clearColor){var t=C(this.clearColor,4),r=t[0],i=t[1],n=t[2],o=t[3];e.fillStyle=`rgba(${r}, ${i}, ${n}, ${o/255})`,e.fillRect(0,0,this.canvas.width,this.canvas.height)}e.scale(this.pixelRatio,this.pixelRatio)}render(){}addQuad(e){var t,r=this.context,i=e.tx,n=e.ty,o=e.width,a=e.height,s=e.alpha,l=e.colorTl,d=e.colorTr,h=e.colorBr,u=e.ta,c=e.tb,f=e.tc,p=e.td,v=e.clippingRect,g=e.texture,m=void 0;if(g){if(g instanceof Re&&(t=g.props,g=g.parentTexture),m=g.ctxTexture,"freed"===g.state)return void m.load();if("loaded"!==g.state||!m.hasImage())return}var x=jt(l),y=1!==u,b=0!==v.width&&0!==v.height,w=l!==d||l!==h,A=e.shader?function(e){var t,r;return e.shader instanceof rt&&e.shader.shType===tt&&null!==(t=null===(r=e.shaderProps)||void 0===r?void 0:r.radius)&&void 0!==t?t:0}(e):0;if((y||b||A)&&r.save(),b){var T=new Path2D,S=v.x,_=v.y,C=v.width,R=v.height;T.rect(S,_,C,R),r.clip(T)}if(y){var E=this.pixelRatio;r.setTransform(u,f,c,p,i*E,n*E),r.scale(E,E),r.translate(-i,-n)}if(A){var I=new Path2D;I.roundRect(i,n,o,a,A),r.clip(I)}if(m){var B=m.getImage(x);r.globalAlpha=s,t?r.drawImage(B,t.x,t.y,t.width,t.height,i,n,o,a):r.drawImage(B,i,n,o,a),r.globalAlpha=1}else if(w){var k,M=i,F=n;l===d?(M=i,F=n+a,k=jt(h)):(M=i+o,F=n,k=jt(d));var L=r.createLinearGradient(i,n,M,F);L.addColorStop(0,Qt(x)),L.addColorStop(1,Qt(k)),r.fillStyle=L,r.fillRect(i,n,o,a)}else r.fillStyle=Qt(x),r.fillRect(i,n,o,a);(y||b||A)&&r.restore()}createCtxTexture(e){return new Kt(this.txMemManager,e)}getShaderManager(){return this.shManager}getDefShaderCtr(){return this.defShaderCtr}renderRTTNodes(){}removeRTTNode(e){}renderToTexture(e){}getBufferInfo(){return null}}class qt extends fe{constructor(e,t){super(e,t),R(this,"textRenderer",void 0),R(this,"trState",void 0),R(this,"_textRendererOverride",null),R(this,"onTextLoaded",(()=>{var e=this.contain,t=this.trState.props.width,r=this.trState.props.height,i=this.trState.textW||0,n=this.trState.textH||0;"both"===e?(this.props.width=t,this.props.height=r):"width"===e?(this.props.width=t,this.props.height=n):"none"===e&&(this.props.width=i,this.props.height=n),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})})),R(this,"onTextFailed",((e,t)=>{this.emit("failed",{type:"text",error:t})})),this._textRendererOverride=t.textRendererOverride;var r=this.resolveTextRendererAndState({x:this.absX,y:this.absY,width:t.width,height:t.height,textAlign:t.textAlign,color:t.color,zIndex:t.zIndex,contain:t.contain,scrollable:t.scrollable,scrollY:t.scrollY,offsetY:t.offsetY,letterSpacing:t.letterSpacing,debug:t.debug,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStretch:t.fontStretch,fontStyle:t.fontStyle,fontWeight:t.fontWeight,text:t.text,lineHeight:t.lineHeight,maxLines:t.maxLines,textBaseline:t.textBaseline,verticalAlign:t.verticalAlign,overflowSuffix:t.overflowSuffix}),i=r.resolvedTextRenderer,n=r.textRendererState;this.textRenderer=i,this.trState=n}get width(){return this.props.width}set width(e){this.props.width=e,this.textRenderer.set.width(this.trState,e),"none"===this.contain&&this.setUpdateType(ue.Local)}get height(){return this.props.height}set height(e){this.props.height=e,this.textRenderer.set.height(this.trState,e),"both"!==this.contain&&this.setUpdateType(ue.Local)}get color(){return this.trState.props.color}set color(e){this.textRenderer.set.color(this.trState,e)}get text(){return this.trState.props.text}set text(e){this.textRenderer.set.text(this.trState,e)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(e){this._textRendererOverride=e,this.textRenderer.destroyState(this.trState);var t=this.resolveTextRendererAndState(this.trState.props),r=t.resolvedTextRenderer,i=t.textRendererState;this.textRenderer=r,this.trState=i}get fontSize(){return this.trState.props.fontSize}set fontSize(e){this.textRenderer.set.fontSize(this.trState,e)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(e){this.textRenderer.set.fontFamily(this.trState,e)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(e){this.textRenderer.set.fontStretch(this.trState,e)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(e){this.textRenderer.set.fontStyle(this.trState,e)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(e){this.textRenderer.set.fontWeight(this.trState,e)}get textAlign(){return this.trState.props.textAlign}set textAlign(e){this.textRenderer.set.textAlign(this.trState,e)}get contain(){return this.trState.props.contain}set contain(e){this.textRenderer.set.contain(this.trState,e)}get scrollable(){return this.trState.props.scrollable}set scrollable(e){this.textRenderer.set.scrollable(this.trState,e)}get scrollY(){return this.trState.props.scrollY}set scrollY(e){this.textRenderer.set.scrollY(this.trState,e)}get offsetY(){return this.trState.props.offsetY}set offsetY(e){this.textRenderer.set.offsetY(this.trState,e)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(e){this.textRenderer.set.letterSpacing(this.trState,e)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(e){this.textRenderer.set.lineHeight&&this.textRenderer.set.lineHeight(this.trState,e)}get maxLines(){return this.trState.props.maxLines}set maxLines(e){this.textRenderer.set.maxLines&&this.textRenderer.set.maxLines(this.trState,e)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(e){this.textRenderer.set.textBaseline&&this.textRenderer.set.textBaseline(this.trState,e)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(e){this.textRenderer.set.verticalAlign&&this.textRenderer.set.verticalAlign(this.trState,e)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(e){this.textRenderer.set.overflowSuffix&&this.textRenderer.set.overflowSuffix(this.trState,e)}get debug(){return this.trState.props.debug}set debug(e){this.textRenderer.set.debug(this.trState,e)}update(e,t){super.update(e,t),this.globalTransform,this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkRenderProps(){return""!==this.trState.props.text||super.checkRenderProps()}onChangeIsRenderable(e){super.onChangeIsRenderable(e),this.textRenderer.setIsRenderable(this.trState,e)}renderQuads(e){var t;if(this.globalTransform,this.textRenderer.renderQuads){if(this.parentHasRenderTexture){if(!e.renderToTextureActive)return;if(this.parentRenderTexture!==e.activeRttNode)return}this.parentHasRenderTexture&&null!==(t=this.props.parent)&&void 0!==t&&t.rtt&&(this.globalTransform=Z.identity(),this.localTransform&&this.globalTransform.multiply(this.localTransform)),this.globalTransform,this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha,this.parentHasRenderTexture,this.framebufferDimensions)}else super.renderQuads(e)}destroy(){super.destroy(),this.textRenderer.destroyState(this.trState)}resolveTextRendererAndState(e){var t=this.stage.resolveTextRenderer(e,this._textRendererOverride),r=t.createState(e,this);return r.emitter.on("loaded",this.onTextLoaded),r.emitter.on("failed",this.onTextFailed),t.scheduleUpdateState(r),{resolvedTextRenderer:t,textRendererState:r}}}var Zt,Jt;class er{constructor(e){R(this,"options",void 0),R(this,"animationManager",void 0),R(this,"txManager",void 0),R(this,"txMemManager",void 0),R(this,"fontManager",void 0),R(this,"textRenderers",void 0),R(this,"shManager",void 0),R(this,"renderer",void 0),R(this,"root",void 0),R(this,"boundsMargin",void 0),R(this,"defShaderCtr",void 0),R(this,"eventBus",void 0),R(this,"deltaTime",0),R(this,"lastFrameTime",0),R(this,"currentFrameTime",0),R(this,"fpsNumFrames",0),R(this,"fpsElapsedTime",0),R(this,"renderRequested",!1),R(this,"frameEventQueue",[]),R(this,"contextSpy",null),this.options=e;var t=e.canvas,r=e.clearColor,i=e.appWidth,n=e.appHeight,o=e.boundsMargin,a=e.enableContextSpy,s=e.numImageWorkers,l=e.textureMemory,d=e.renderMode;this.eventBus=e.eventBus,this.txManager=new yt(s),this.txMemManager=new Vt(this,l),this.shManager=new ot,this.animationManager=new vt,this.contextSpy=a?new Xt:null;var h=[0,0,0,0];o&&(h=Array.isArray(o)?o:[o,o,o,o]),this.boundsMargin=h;var u={stage:this,canvas:t,pixelRatio:e.devicePhysicalPixelRatio*e.deviceLogicalPixelRatio,clearColor:null!=r?r:4278190080,bufferMemory:2e6,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy};this.renderer="canvas"===d?new $t(u):new pt(u),this.defShaderCtr=this.renderer.getDefShaderCtr(),D="webgl"===d,this.txManager.renderer=this.renderer,this.textRenderers="webgl"===d?{canvas:new Ht(this),sdf:new Ut(this)}:{canvas:new Ht(this)},this.fontManager=new Tt(this.textRenderers);var c,f,p,v=new fe(this,{x:0,y:0,width:i,height:n,alpha:1,autosize:!1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:{},shader:this.defShaderCtr,rtt:!1,src:null,scale:1});this.root=v,c=this,f=!1,p=()=>{if(c.updateFrameTime(),c.updateAnimations(),!c.hasSceneUpdates())return c.calculateFps(),setTimeout(p,16.666666666666668),f||(c.txMemManager.checkCleanup()&&c.txMemManager.cleanup(),c.eventBus.emit("idle"),f=!0),void c.flushFrameEvents();f=!1,c.drawFrame(),c.flushFrameEvents(),requestAnimationFrame(p)},requestAnimationFrame(p)}updateFrameTime(){var e=performance?performance.now():Date.now();this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=e,this.deltaTime=this.lastFrameTime?e-this.lastFrameTime:100/6,this.txManager.frameTime=e,this.txMemManager.frameTime=e,this.eventBus.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime})}updateAnimations(){var e=this.animationManager;this.root&&e.update(this.deltaTime)}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested}drawFrame(){var e=this.renderer,t=this.renderRequested;0!==this.root.updateType&&this.root.update(this.deltaTime,this.root.clippingRect),e.reset(),this.txMemManager.criticalCleanupRequested&&this.txMemManager.cleanup(),e.rttNodes.length>0&&e.renderRTTNodes(),this.addQuads(this.root),null==e||e.render(),this.calculateFps(),t&&(this.renderRequested=!1)}queueFrameEvent(e,t){this.frameEventQueue.push([e,t])}flushFrameEvents(){var e,t=E(this.frameEventQueue);try{for(t.s();!(e=t.n()).done;){var r=C(e.value,2),i=r[0],n=r[1];this.eventBus.emit(i,n)}}catch(o){t.e(o)}finally{t.f()}this.frameEventQueue=[]}calculateFps(){var e=this.options.fpsUpdateInterval;if(e&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=e)){var t,r,i,n=Math.round(1e3*this.fpsNumFrames/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.queueFrameEvent("fpsUpdate",{fps:n,contextSpyData:null!==(t=null===(r=this.contextSpy)||void 0===r?void 0:r.getData())&&void 0!==t?t:null}),null===(i=this.contextSpy)||void 0===i||i.reset()}}addQuads(e){this.renderer&&e.globalTransform,e.isRenderable&&e.renderQuads(this.renderer);for(var t=0;t<e.children.length;t++){var r=e.children[t];r&&(0!==(null==r?void 0:r.worldAlpha)&&this.addQuads(r))}}requestRender(){this.renderRequested=!0}resolveTextRenderer(e,t=null){var r=t,i=!1;if(r){var n=this.textRenderers[r];n?n.canRenderFont(e)||(console.warn(`Cannot use override text renderer '${r}' for font`,e),r=null,i=!0):(console.warn(`Text renderer override '${r}' not found.`),r=null,i=!0)}if(!r){for(var o=0,a=Object.entries(this.textRenderers);o<a.length;o++){var s=C(a[o],2),l=s[0],d=s[1];if("canvas"!==l&&d.canRenderFont(e)){r=l;break}}r||(r="canvas")}i&&console.warn(`Falling back to text renderer ${String(r)}`);var h=this.textRenderers[r];return h}createShaderCtr(e,t){return this.shManager.loadShader(e,t)}createNode(e){var t=this.resolveNodeDefaults(e);return new fe(this,t)}createTextNode(e){var t,r,i,n,o,a,s,l,d,h,u,c,f,p,v,g,m,x,y=null!==(t=e.fontSize)&&void 0!==t?t:16,b=_(_({},this.resolveNodeDefaults(e)),{},{text:null!==(r=e.text)&&void 0!==r?r:"",textRendererOverride:null!==(i=e.textRendererOverride)&&void 0!==i?i:null,fontSize:y,fontFamily:null!==(n=e.fontFamily)&&void 0!==n?n:"sans-serif",fontStyle:null!==(o=e.fontStyle)&&void 0!==o?o:"normal",fontWeight:null!==(a=e.fontWeight)&&void 0!==a?a:"normal",fontStretch:null!==(s=e.fontStretch)&&void 0!==s?s:"normal",textAlign:null!==(l=e.textAlign)&&void 0!==l?l:"left",contain:null!==(d=e.contain)&&void 0!==d?d:"none",scrollable:null!==(h=e.scrollable)&&void 0!==h&&h,scrollY:null!==(u=e.scrollY)&&void 0!==u?u:0,offsetY:null!==(c=e.offsetY)&&void 0!==c?c:0,letterSpacing:null!==(f=e.letterSpacing)&&void 0!==f?f:0,lineHeight:e.lineHeight,maxLines:null!==(p=e.maxLines)&&void 0!==p?p:0,textBaseline:null!==(v=e.textBaseline)&&void 0!==v?v:"alphabetic",verticalAlign:null!==(g=e.verticalAlign)&&void 0!==g?g:"middle",overflowSuffix:null!==(m=e.overflowSuffix)&&void 0!==m?m:"...",debug:null!==(x=e.debug)&&void 0!==x?x:{},shaderProps:null});return new qt(this,b)}resolveNodeDefaults(e){var t,r,i,n,o,a,s,l,d,h,u,c,f,p,v,g,m,x,y,b,w,A,T,S,_,C,R,E,I,B,k,M,F,L,P,N,U,D,O,z,W,G,H,X,V,Y,j,Q,K,$=null!==(t=e.color)&&void 0!==t?t:4294967295,q=null!==(r=null!==(i=null!==(n=e.colorTl)&&void 0!==n?n:e.colorTop)&&void 0!==i?i:e.colorLeft)&&void 0!==r?r:$,Z=null!==(o=null!==(a=null!==(s=e.colorTr)&&void 0!==s?s:e.colorTop)&&void 0!==a?a:e.colorRight)&&void 0!==o?o:$,J=null!==(l=null!==(d=null!==(h=e.colorBl)&&void 0!==h?h:e.colorBottom)&&void 0!==d?d:e.colorLeft)&&void 0!==l?l:$,ee=null!==(u=null!==(c=null!==(f=e.colorBr)&&void 0!==f?f:e.colorBottom)&&void 0!==c?c:e.colorRight)&&void 0!==u?u:$,te=function(e){for(var t={boolean:!0,string:!0,number:!0,undefined:!0},r=Object.keys(e),i=0;i<r.length;i++){var n=r[i];if(n){var o=e[n],a=typeof o;"string"===a&&o.length>2048&&(console.warn(`Custom Data value for ${n} is too long, it will be truncated to 2048 characters`),e[n]=o.substring(0,2048)),t[a]||(console.warn(`Custom Data value for ${n} is not a boolean, string, or number, it will be ignored`),delete e[n])}}return e}(null!==(p=e.data)&&void 0!==p?p:{});return{x:null!==(v=e.x)&&void 0!==v?v:0,y:null!==(g=e.y)&&void 0!==g?g:0,width:null!==(m=e.width)&&void 0!==m?m:0,height:null!==(x=e.height)&&void 0!==x?x:0,alpha:null!==(y=e.alpha)&&void 0!==y?y:1,autosize:null!==(b=e.autosize)&&void 0!==b&&b,clipping:null!==(w=e.clipping)&&void 0!==w&&w,color:$,colorTop:null!==(A=e.colorTop)&&void 0!==A?A:$,colorBottom:null!==(T=e.colorBottom)&&void 0!==T?T:$,colorLeft:null!==(S=e.colorLeft)&&void 0!==S?S:$,colorRight:null!==(_=e.colorRight)&&void 0!==_?_:$,colorBl:J,colorBr:ee,colorTl:q,colorTr:Z,zIndex:null!==(C=e.zIndex)&&void 0!==C?C:0,zIndexLocked:null!==(R=e.zIndexLocked)&&void 0!==R?R:0,parent:null!==(E=e.parent)&&void 0!==E?E:null,texture:null!==(I=e.texture)&&void 0!==I?I:null,textureOptions:null!==(B=e.textureOptions)&&void 0!==B?B:{},shader:null!==(k=e.shader)&&void 0!==k?k:this.defShaderCtr,src:null!==(M=e.src)&&void 0!==M?M:null,scale:null!==(F=e.scale)&&void 0!==F?F:null,scaleX:null!==(L=null!==(P=e.scaleX)&&void 0!==P?P:e.scale)&&void 0!==L?L:1,scaleY:null!==(N=null!==(U=e.scaleY)&&void 0!==U?U:e.scale)&&void 0!==N?N:1,mount:null!==(D=e.mount)&&void 0!==D?D:0,mountX:null!==(O=null!==(z=e.mountX)&&void 0!==z?z:e.mount)&&void 0!==O?O:0,mountY:null!==(W=null!==(G=e.mountY)&&void 0!==G?G:e.mount)&&void 0!==W?W:0,pivot:null!==(H=e.pivot)&&void 0!==H?H:.5,pivotX:null!==(X=null!==(V=e.pivotX)&&void 0!==V?V:e.pivot)&&void 0!==X?X:.5,pivotY:null!==(Y=null!==(j=e.pivotY)&&void 0!==j?j:e.pivot)&&void 0!==Y?Y:.5,rotation:null!==(Q=e.rotation)&&void 0!==Q?Q:0,rtt:null!==(K=e.rtt)&&void 0!==K&&K,data:te}}}class tr extends G{constructor(e,t){var r,i,n,o,a,s,l,d,h;super(),R(this,"root",void 0),R(this,"canvas",void 0),R(this,"settings",void 0),R(this,"stage",void 0),R(this,"inspector",null);var u={criticalThreshold:(null===(r=e.textureMemory)||void 0===r?void 0:r.criticalThreshold)||124e6,targetThresholdLevel:(null===(i=e.textureMemory)||void 0===i?void 0:i.targetThresholdLevel)||.5,cleanupInterval:(null===(n=e.textureMemory)||void 0===n?void 0:n.cleanupInterval)||3e4,debugLogging:(null===(o=e.textureMemory)||void 0===o?void 0:o.debugLogging)||!1},c={appWidth:e.appWidth||1920,appHeight:e.appHeight||1080,textureMemory:u,boundsMargin:e.boundsMargin||0,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:null!==(a=e.clearColor)&&void 0!==a?a:0,fpsUpdateInterval:e.fpsUpdateInterval||0,numImageWorkers:void 0!==e.numImageWorkers?e.numImageWorkers:2,enableContextSpy:null!==(s=e.enableContextSpy)&&void 0!==s&&s,enableInspector:null!==(l=e.enableInspector)&&void 0!==l&&l,renderMode:null!==(d=e.renderMode)&&void 0!==d?d:"webgl",quadBufferSize:null!==(h=e.quadBufferSize)&&void 0!==h?h:4194304};this.settings=c;var f,p=c.deviceLogicalPixelRatio,v=c.devicePhysicalPixelRatio,g=c.appWidth*p,m=c.appHeight*p,x=document.createElement("canvas");if(this.canvas=x,x.width=g*v,x.height=m*v,x.style.width=`${g}px`,x.style.height=`${m}px`,this.stage=new er({appWidth:this.settings.appWidth,appHeight:this.settings.appHeight,boundsMargin:this.settings.boundsMargin,clearColor:this.settings.clearColor,canvas:this.canvas,deviceLogicalPixelRatio:this.settings.deviceLogicalPixelRatio,devicePhysicalPixelRatio:this.settings.devicePhysicalPixelRatio,enableContextSpy:this.settings.enableContextSpy,fpsUpdateInterval:this.settings.fpsUpdateInterval,numImageWorkers:this.settings.numImageWorkers,renderMode:this.settings.renderMode,textureMemory:u,eventBus:this,quadBufferSize:this.settings.quadBufferSize}),this.root=this.stage.root,!(f="string"==typeof t?document.getElementById(t):t))throw new Error("Could not find target element");f.appendChild(x)}createNode(e){this.stage;var t=this.stage.createNode(e);return this.inspector?this.inspector.createNode(t):t}createTextNode(e){var t=this.stage.createTextNode(e);return this.inspector?this.inspector.createTextNode(t):t}destroyNode(e){return this.inspector&&this.inspector.destroyNode(e.id),e.destroy()}createTexture(e,t){return this.stage.txManager.loadTexture(e,t)}createShader(e,t){return this.stage.shManager.loadShader(e,t)}createDynamicShader(e){return this.stage.shManager.loadDynamicShader({effects:e})}createEffect(e,t,r){return{name:r,type:e,props:t}}getNodeById(e){var t,r=null===(t=this.stage)||void 0===t?void 0:t.root;if(!r)return null;var i=t=>{if(t.id===e)return t;var r,n=E(t.children);try{for(n.s();!(r=n.n()).done;){var o=r.value,a=i(o);if(a)return a}}catch(s){n.e(s)}finally{n.f()}return null};return i(r)}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}getBufferInfo(){return this.stage.renderer.getBufferInfo()}rerender(){throw new Error("Not implemented")}}var rr={debug:!1,animationsEnabled:!0,animationSettings:{duration:250,easing:"ease-in-out"},fontSettings:{fontFamily:"Ubuntu",fontSize:100},setActiveElement:()=>{}};function ir(e,t,...r){false}var nr=e=>e instanceof Function;function or(e){return Array.isArray(e)}function ar(e){return e instanceof mr}function sr(e,t={}){if(or(e))e.forEach((e=>{sr(e,t)}));else if(e)for(var r in e)void 0===t[r]&&(t[r]=e[r]);return t}class lr extends Array{constructor(e){super(),R(this,"_parent",void 0),this._parent=e}get selected(){for(var e=this._parent.selected||0;e<this.length;e++){var t=this[e];if(ar(t))return this._parent.selected=e,t}}get firstChild(){return this[0]}insert(e,t){if(t){var r=this.indexOf(t);this.splice(r,0,e)}else this.push(e);e.parent=this._parent}remove(e){var t=this.indexOf(e);t>=0&&this.splice(t,1)}}class dr extends Array{constructor(e,t={}){return or(t)?(super(...t),R(this,"onChange",void 0)):"string"==typeof t?(super(t),R(this,"onChange",void 0)):(super(...Object.entries(t).filter((([e,t])=>t)).map((([e])=>e))),R(this,"onChange",void 0)),this.onChange=e,this}has(e){return this.indexOf(e)>=0}is(e){return this.indexOf(e)>=0}add(e){this.has(e)||(this.push(e),this.onChange())}toggle(e,t){!0===t?this.has(e)||this.add(e):!1===t?this.has(e)&&this.remove(e):this.has(e)?this.remove(e):this.add(e)}remove(e){var t=this.indexOf(e);t>=0&&(this.splice(t,1),this.onChange())}}var hr="element",ur="textNode",cr="text";var fr=new Set,pr=!0;function vr(e){for(var t=[],r=0,i=0,n=Object.entries(e);i<n.length;i++){var o=C(n[i],2),a=o[0],s=o[1];t.push({name:`effect${r}`,type:a,props:s}),r++}return Jt("DynamicShader",{effects:t})}function gr(e=""){return{set(t){"number"==typeof t&&(t={width:t,color:255}),this.effects=this.effects?_(_({},this.effects||{}),{[`border${e}`]:t}):{[`border${e}`]:t}},get(){var t;return null===(t=this.effects)||void 0===t?void 0:t[`border${e}`]}}}class mr extends Object{constructor(e){super(),this._type="text"===e?ur:hr,this.rendered=!1,this.lng={},this.children=new lr(this)}get effects(){return this._effects}set effects(e){this._effects=e,this.rendered&&(this.shader=vr(e))}get parent(){return this._parent}set parent(e){var t;(this._parent=e,this.rendered)&&(this.lng.parent=null!==(t=null==e?void 0:e.lng)&&void 0!==t?t:null)}set shader(e){var t=e;or(e)&&(t=Jt(...e)),this.lng.shader=t}_sendToLightningAnimatable(e,t){if(this.transition&&this.rendered&&rr.animationsEnabled&&(!0===this.transition||this.transition[e])){var r=!0===this.transition||!0===this.transition[e]?void 0:this.transition[e],i=this.animate({[e]:t},r);return nr(this.onAnimationStarted)&&i.once("animating",(r=>{var i;null===(i=this.onAnimationStarted)||void 0===i||i.call(this,r,e,t)})),nr(this.onAnimationFinished)&&i.once("stopped",(r=>{var i;null===(i=this.onAnimationFinished)||void 0===i||i.call(this,r,e,t)})),i.start()}this.lng[e]=t}animate(e,t){return this.rendered,this.lng.animate(e,t||this.animationSettings)}chain(e,t){return this._animationRunning&&(this._animationQueue=[],this._animationRunning=!1),t?this._animationQueueSettings=t:this._animationQueueSettings||(this._animationQueueSettings=t||this.animationSettings),t=t||this._animationQueueSettings,this._animationQueue=this._animationQueue||[],this._animationQueue.push({props:e,animationSettings:t}),this}start(){var e=this;return T(w().mark((function t(){var r;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e._animationQueue.shift();case 1:if(!r){t.next=8;break}return e._animationRunning=!0,t.next=5,e.animate(r.props,r.animationSettings).start().waitUntilStopped();case 5:r=e._animationQueue.shift(),t.next=1;break;case 8:e._animationRunning=!1,e._animationQueueSettings=void 0;case 10:case"end":return t.stop()}}),t)})))()}setFocus(){if(!this.skipFocus)if(this.rendered){if(void 0!==this.forwardFocus)if(nr(this.forwardFocus)){if(!1!==this.forwardFocus.call(this,this))return}else{var e="number"==typeof this.forwardFocus?this.forwardFocus:null;if(null!==e&&e<this.children.length){var t=this.children[e];return void(ar(t)&&t.setFocus())}}queueMicrotask((()=>rr.setActiveElement(this)))}else this.autofocus=!0}isTextNode(){return this._type===ur}_layoutOnLoad(){this.lng.on("loaded",((e,t)=>{var r=t.dimensions;this.parent.updateLayout(this,r)}))}getText(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].text;return e}destroy(){var e;this._queueDelete&&("destroy"in(e=this.lng)&&"function"==typeof e.destroy)&&this.lng.destroy()}set onEvents(e){this._events=e}get onEvents(){return this._events}set style(e){for(var t in or(e)?this._style=sr(e):this._style=e,this._style)void 0===this[t]&&(this[t]=this._style[t])}get style(){return this._style}get hasChildren(){return this.children.length>0}getChildById(e){return this.children.find((t=>t.id===e))}searchChildrenById(e){for(var t=0;t<this.children.length;t++){var r=this.children[t];if(ar(r)){if(r.id===e)return r;var i=r.searchChildrenById(e);if(i)return i}}}set states(e){this._states=new dr(this._stateChanged.bind(this),e),this.rendered&&this._stateChanged()}get states(){return this._states=this._states||new dr(this._stateChanged.bind(this)),this._states}get animationSettings(){return this._animationSettings||rr.animationSettings}set animationSettings(e){this._animationSettings=e}set hidden(e){this.alpha=e?0:1}get hidden(){return 0===this.alpha}requiresLayout(){return"flex"===this.display||this.onBeforeLayout}updateLayout(e,t){if(this.hasChildren){ir();var r,i=!1;if(nr(this.onBeforeLayout)&&(i=this.onBeforeLayout.call(this,this,e,t)||!1),"flex"===this.display){if(function(e){for(var t=[],r=!1,i=0,n=0;n<e.children.length;n++){var o=e.children[n];if(o._type!==cr&&!1!==o.flexItem){if(o._type===ur&&o.text&&!o.width&&!o.height)return!1;void 0!==o.flexOrder&&(r=!0),void 0!==o.flexGrow&&(i+=o.flexGrow),t.push(o)}}r&&t.sort(((e,t)=>(e.flexOrder||0)-(t.flexOrder||0)));var a=t.length,s="row"===(e.flexDirection||"row"),l=s?"width":"height",d=s?"height":"width",h=s?"marginLeft":"marginTop",u=s?"marginRight":"marginBottom",c=s?"x":"y",f=s?"y":"x",p=e[l]||0,v=e[d]||0,g=e.gap||0,m=e.justifyContent||"flexStart",x=e.alignItems;if(i)for(var y=t.reduce(((e,t)=>e+(t.flexGrow?0:t[l]||0)+(t[h]||0)+(t[u]||0)),0),b=(p-y-g*(a-1))/i,w=0;w<t.length;w++){var A=t[w];void 0!==A.flexGrow&&A.flexGrow>0&&(A[l]=A.flexGrow*b)}var T=0;["center","spaceBetween","spaceEvenly"].includes(m)&&(T=t.reduce(((e,t)=>e+(t[l]||0)+(t[h]||0)+(t[u]||0)),0));var S=v&&x?e=>{"flexStart"===x?e[f]=0:"center"===x?e[f]=(v-(e[d]||0))/2:"flexEnd"===x&&(e[f]=v-(e[d]||0))}:e=>e;if("flexStart"===m){for(var _=0,C=0;C<t.length;C++){var R=t[C];R[c]=_+(R[h]||0),_+=(R[l]||0)+g+(R[h]||0)+(R[u]||0),S(R)}if("fixed"!==e.flexBoundary){var E=_-g;if(E!==e[l])return e[l]=E,!0}}else if("flexEnd"===m){for(var I=p,B=a-1;B>=0;B--){var k=t[B];k[c]=I-(k[l]||0)-(k[u]||0),I-=(k[l]||0)+g+(k[h]||0)+(k[u]||0),S(k)}if("fixed"!==e.flexBoundary){var M=I-g;if(M!==e[l])return e[l]=M,!0}}else if("center"===m)for(var F=(p-(T+g*(a-1)))/2,L=0;L<t.length;L++){var P=t[L];P[c]=F+(P[h]||0),F+=(P[l]||0)+g+(P[h]||0)+(P[u]||0),S(P)}else if("spaceBetween"===m)for(var N=(p-T)/(a-1),U=0,D=0;D<t.length;D++){var O=t[D];O[c]=U+(O[h]||0),U+=(O[l]||0)+N+(O[h]||0)+(O[u]||0),S(O)}else if("spaceEvenly"===m)for(var z=(p-T)/(a+1),W=z,G=0;G<t.length;G++){var H=t[G];H[c]=W+(H[h]||0),W+=(H[l]||0)+z+(H[h]||0)+(H[u]||0),S(H)}return!1}(this)||i)null===(r=this.parent)||void 0===r||r.updateLayout()}else if(i){var n;null===(n=this.parent)||void 0===n||n.updateLayout()}nr(this.onLayout)&&this.onLayout.call(this,this,e,t)}}_stateChanged(){if(ir(0,0,this.states),this.forwardStates){var e=this.states.slice();this.children.forEach((t=>{t.states=e}))}var t=this.states;if(this._undoStyles||this.style&&function(e,t){var r,i=E(t);try{for(i.s();!(r=i.n()).done;)if(r.value in e)return!0}catch(n){i.e(n)}finally{i.f()}return!1}(this.style,t)){this._undoStyles=this._undoStyles||[];var r={};this._undoStyles.forEach((e=>{r[e]=this.style[e]}));var i=t.reduce(((e,t)=>{var r=this.style[t];return r&&(e=_(_({},e),r)),e}),{});this._undoStyles=Object.keys(i),void 0!==i.transition&&(this.transition=i.transition),Object.assign(this,r,i)}}render(){var e,t=this,r=this.parent;if(r)if(r.rendered)if(this.rendered)console.warn("Node already rendered: ",this);else{r.requiresLayout()&&!fr.has(r)&&(fr.add(r),pr&&(pr=!1,queueMicrotask((()=>{pr=!0;var e=[...fr];fr.clear();for(var t=e.length-1;t>=0;t--)e[t].updateLayout()})))),this._states&&this._stateChanged();var i=t.lng;if(i.x=i.x||0,i.y=i.y||0,r.rendered&&(i.parent=r.lng),t._effects&&(i.shader=vr(t._effects)),t.isTextNode()){var n=i;if(rr.fontSettings)for(var o in rr.fontSettings)void 0===n[o]&&(n[o]=rr.fontSettings[o]);n.text=n.text||t.getText(),n.textAlign&&!n.contain&&console.warn("Text align requires contain: ",t.getText()),n.contain&&(n.width||(n.width=(r.width||0)-n.x-(n.marginRight||0)),"both"!==n.contain||n.height||n.maxLines?1===n.maxLines&&(n.height=n.height||n.lineHeight||n.fontSize):n.height=(r.height||0)-n.y-(n.marginBottom||0)),ir(0,0),t.lng=Zt.createTextNode(i),!r.requiresLayout()||i.width&&i.height||t._layoutOnLoad()}else i.texture||(isNaN(i.width)&&(i.width=(r.width||0)-i.x),isNaN(i.height)&&(i.height=(r.height||0)-i.y),i.rtt&&!i.color&&(i.color=4294967295),i.color||i.src||(i.color=0)),ir(0,0),t.lng=Zt.createNode(i);if(t.rendered=!0,t.autosize&&r.requiresLayout()&&t._layoutOnLoad(),t.onFail&&t.lng.on("failed",t.onFail),t.onLoad&&t.lng.on("loaded",t.onLoad),nr(this.onCreate)&&this.onCreate.call(this,t),t.onEvents&&t.onEvents.forEach((([e,r])=>{t.lng.on(e,((e,i)=>r(t,i)))})),null!==(e=t.lng)&&void 0!==e&&e.div&&(t.lng.div.element=t),t._type===hr)for(var a=0;a<t.children.length;a++){var s=t.children[a];ar(s)?s.render():s.text&&s._type===cr&&console.warn("TextNode outside of <Text>: ",s)}t.autofocus&&t.setFocus()}else console.warn("Parent not rendered yet: ",this);else console.warn("Parent not set - no node created for: ",this)}}for(var xr=function(){var e=br[yr];Object.defineProperty(mr.prototype,e,{get(){return this.lng[e]},set(t){this._sendToLightningAnimatable(e,t)}})},yr=0,br=["alpha","color","colorTop","colorRight","colorLeft","colorBottom","colorTl","colorTr","colorBl","colorBr","height","fontSize","lineHeight","mount","mountX","mountY","pivot","pivotX","pivotY","rotation","scale","width","worldX","worldY","x","y","zIndex","zIndexLocked"];yr<br.length;yr++)xr();for(var wr=function(){var e=Tr[Ar];Object.defineProperty(mr.prototype,e,{get(){return this.lng[e]},set(t){this.lng[e]=t}})},Ar=0,Tr=["absX","absY","autosize","clipping","contain","fontFamily","fontStretch","fontStyle","fontWeight","letterSpacing","maxLines","offsetY","overflowSuffix","rtt","scrollable","scrollY","src","text","textAlign","textBaseline","textOverflow","texture","verticalAlign","wordWrap"];Ar<Tr.length;Ar++)wr();Object.defineProperties(mr.prototype,{borderRadius:{set(e){this.effects=this.effects?_(_({},this.effects),{radius:{radius:e}}):{radius:{radius:e}}},get(){var e;return null===(e=this.effects)||void 0===e||null===(e=e.radius)||void 0===e?void 0:e.radius}},border:gr(),borderLeft:gr("Left"),borderRight:gr("Right"),borderTop:gr("Top"),borderBottom:gr("Bottom"),linearGradient:{set(e={}){this.effects=this.effects?_(_({},this.effects),{linearGradient:e}):{linearGradient:e}},get(){var e;return null===(e=this.effects)||void 0===e?void 0:e.linearGradient}},radialGradient:{set(e={}){this.effects=this.effects?_(_({},this.effects),{radialGradient:e}):{radialGradient:e}},get(){var e;return null===(e=this.effects)||void 0===e?void 0:e.radialGradient}},radialProgress:{set(e={}){this.effects=this.effects?_(_({},this.effects),{radialProgressGradient:e}):{radialProgressGradient:e}},get(){var e;return null===(e=this.effects)||void 0===e?void 0:e.radialProgress}}});var Sr={context:void 0,registry:void 0};function _r(e){Sr.context=e}var Cr,Rr=(e,t)=>e===t,Er=Symbol("solid-proxy"),Ir=Symbol("solid-track"),Br={equals:Rr},kr=ci,Mr=1,Fr=2,Lr={owned:null,cleanups:null,context:null,owner:null},Pr={},Nr=null,Ur=null,Dr=null,Or=null,zr=null,Wr=0;function Gr(e,t){var r=Dr,i=Nr,n=0===e.length,o=void 0===t?i:t,a=n?Lr:{owned:null,cleanups:null,context:o?o.context:null,owner:o},s=n?e:()=>e((()=>qr((()=>gi(a)))));Nr=a,Dr=null;try{return ui(s,!0)}finally{Dr=r,Nr=i}}function Hr(e,t){var r={value:e,observers:null,observerSlots:null,comparator:(t=t?Object.assign({},Br,t):Br).equals||void 0};return[ai.bind(r),e=>("function"==typeof e&&(e=e(r.value)),si(r,e))]}function Xr(e,t,r){li(di(e,t,!0,Mr))}function Vr(e,t,r){li(di(e,t,!1,Mr))}function Yr(e,t,r){kr=fi;var i=di(e,t,!1,Mr);i.user=!0,zr?zr.push(i):li(i)}function jr(e,t,r){r=r?Object.assign({},Br,r):Br;var i=di(e,t,!0,0);return i.observers=null,i.observerSlots=null,i.comparator=r.equals||void 0,li(i),ai.bind(i)}function Qr(e,t,r){var i,n,o;2===arguments.length&&"object"==typeof t||1===arguments.length?(i=!0,n=e,o=t||{}):(i=e,n=t,o={});var a,s=null,l=Pr,d=null,h=!1,u="initialValue"in o,c="function"==typeof i&&jr(i),f=new Set,p=C((o.storage||Hr)(o.initialValue),2),v=p[0],g=p[1],m=C(Hr(void 0),2),x=m[0],y=m[1],b=C(Hr(void 0,{equals:!1}),2),w=b[0],A=b[1],T=C(Hr(u?"ready":"unresolved"),2),S=T[0],_=T[1];Sr.context&&(d=`${Sr.context.id}${Sr.context.count++}`,"initial"===o.ssrLoadFrom?l=o.initialValue:Sr.load&&(a=Sr.load(d))&&(l=a));function R(e,t,r,i){return s===e&&(s=null,void 0!==i&&(u=!0),e!==l&&t!==l||!o.onHydrated||queueMicrotask((()=>o.onHydrated(i,{value:t}))),l=Pr,function(e,t){ui((()=>{void 0===t&&g((()=>e)),_(void 0!==t?"errored":u?"ready":"unresolved"),y(t);var r,i=E(f.keys());try{for(i.s();!(r=i.n()).done;){r.value.decrement()}}catch(t){i.e(t)}finally{i.f()}f.clear()}),!1)}(t,r)),t}function I(){var e=Cr,t=v(),r=x();if(void 0!==r&&!s)throw r;return Dr&&!Dr.user&&e&&Xr((()=>{w(),s&&(e.resolved||f.has(e)||(e.increment(),f.add(e)))})),t}function B(e=!0){if(!1===e||!h){h=!1;var t=c?c():i;if(null!=t&&!1!==t){var r=l!==Pr?l:qr((()=>n(t,{value:v(),refetching:e})));return function(e){return e&&"object"==typeof e&&"then"in e}(r)?(s=r,"value"in r?("success"===r.status?R(s,r.value,void 0,t):R(s,void 0,mi(r.value),t),r):(h=!0,queueMicrotask((()=>h=!1)),ui((()=>{_(u?"refreshing":"pending"),A()}),!1),r.then((e=>R(r,e,void 0,t)),(e=>R(r,void 0,mi(e),t))))):(R(s,r,void 0,t),r)}R(s,qr(v))}}return Object.defineProperties(I,{state:{get:()=>S()},error:{get:()=>x()},loading:{get(){var e=S();return"pending"===e||"refreshing"===e}},latest:{get(){if(!u)return I();var e=x();if(e&&!s)throw e;return v()}}}),c?Xr((()=>B(!1))):B(!1),[I,{refetch:B,mutate:g}]}function Kr(e,t=Rr,r){var i=new Map,n=di((r=>{var n,o=e(),a=E(i.entries());try{for(a.s();!(n=a.n()).done;){var s=C(n.value,2),l=s[0],d=s[1];if(t(l,o)!==t(l,r)){var h,u=E(d.values());try{for(u.s();!(h=u.n()).done;){var c=h.value;c.state=Mr,c.pure?Or.push(c):zr.push(c)}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){a.e(f)}finally{a.f()}return o}),void 0,!0,Mr);return li(n),e=>{var r,o=Dr;o&&((r=i.get(e))?r.add(o):i.set(e,r=new Set([o])),Jr((()=>{r.delete(o),!r.size&&i.delete(e)})));return t(e,n.value)}}function $r(e){return ui(e,!1)}function qr(e){if(null===Dr)return e();var t=Dr;Dr=null;try{return e()}finally{Dr=t}}function Zr(e,t,r){var i,n=Array.isArray(e),o=r&&r.defer;return r=>{var a;if(n){a=Array(e.length);for(var s=0;s<e.length;s++)a[s]=e[s]()}else a=e();if(o)return o=!1,r;var l=qr((()=>t(a,i,r)));return i=a,l}}function Jr(e){return null===Nr||(null===Nr.cleanups?Nr.cleanups=[e]:Nr.cleanups.push(e)),e}function ei(){return Dr}function ti(){return Nr}function ri(e,t){var r=Nr,i=Dr;Nr=e,Dr=null;try{return ui(t,!0)}catch(n){xi(n)}finally{Nr=r,Dr=i}}function ii(e,t){var r=Symbol("context");return{id:r,Provider:bi(r),defaultValue:e}}function ni(e){return Nr&&Nr.context&&void 0!==Nr.context[e.id]?Nr.context[e.id]:e.defaultValue}function oi(e){var t=jr(e),r=jr((()=>yi(t())));return r.toArray=()=>{var e=r();return Array.isArray(e)?e:null!=e?[e]:[]},r}function ai(){if(this.sources&&this.state)if(this.state===Mr)li(this);else{var e=Or;Or=null,ui((()=>pi(this)),!1),Or=e}if(Dr){var t=this.observers?this.observers.length:0;Dr.sources?(Dr.sources.push(this),Dr.sourceSlots.push(t)):(Dr.sources=[this],Dr.sourceSlots=[t]),this.observers?(this.observers.push(Dr),this.observerSlots.push(Dr.sources.length-1)):(this.observers=[Dr],this.observerSlots=[Dr.sources.length-1])}return this.value}function si(e,t,r){var i=e.value;return e.comparator&&e.comparator(i,t)||(e.value=t,e.observers&&e.observers.length&&ui((()=>{for(var t=0;t<e.observers.length;t+=1){var r=e.observers[t],i=Ur&&Ur.running;i&&Ur.disposed.has(r),(i?r.tState:r.state)||(r.pure?Or.push(r):zr.push(r),r.observers&&vi(r)),i||(r.state=Mr)}if(Or.length>1e6)throw Or=[],new Error}),!1)),t}function li(e){if(e.fn){gi(e);var t=Wr;!function(e,t,r){var i,n=Nr,o=Dr;Dr=Nr=e;try{i=e.fn(t)}catch(a){return e.pure&&(e.state=Mr,e.owned&&e.owned.forEach(gi),e.owned=null),e.updatedAt=r+1,xi(a)}finally{Dr=o,Nr=n}(!e.updatedAt||e.updatedAt<=r)&&(null!=e.updatedAt&&"observers"in e?si(e,i):e.value=i,e.updatedAt=r)}(e,e.value,t)}}function di(e,t,r,i=Mr,n){var o={fn:e,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:Nr,context:Nr?Nr.context:null,pure:r};return null===Nr||Nr!==Lr&&(Nr.owned?Nr.owned.push(o):Nr.owned=[o]),o}function hi(e){if(0!==e.state){if(e.state===Fr)return pi(e);if(e.suspense&&qr(e.suspense.inFallback))return e.suspense.effects.push(e);for(var t=[e];(e=e.owner)&&(!e.updatedAt||e.updatedAt<Wr);)e.state&&t.push(e);for(var r=t.length-1;r>=0;r--)if((e=t[r]).state===Mr)li(e);else if(e.state===Fr){var i=Or;Or=null,ui((()=>pi(e,t[0])),!1),Or=i}}}function ui(e,t){if(Or)return e();var r=!1;t||(Or=[]),zr?r=!0:zr=[],Wr++;try{var i=e();return function(e){Or&&(ci(Or),Or=null);if(e)return;var t=zr;zr=null,t.length&&ui((()=>kr(t)),!1)}(r),i}catch(n){r||(zr=null),Or=null,xi(n)}}function ci(e){for(var t=0;t<e.length;t++)hi(e[t])}function fi(e){var t,r=0;for(t=0;t<e.length;t++){var i=e[t];i.user?e[r++]=i:hi(i)}if(Sr.context){if(Sr.count)return Sr.effects||(Sr.effects=[]),void Sr.effects.push(...e.slice(0,r));Sr.effects&&(e=[...Sr.effects,...e],r+=Sr.effects.length,delete Sr.effects),_r()}for(t=0;t<r;t++)hi(e[t])}function pi(e,t){e.state=0;for(var r=0;r<e.sources.length;r+=1){var i=e.sources[r];if(i.sources){var n=i.state;n===Mr?i!==t&&(!i.updatedAt||i.updatedAt<Wr)&&hi(i):n===Fr&&pi(i,t)}}}function vi(e){for(var t=0;t<e.observers.length;t+=1){var r=e.observers[t];r.state||(r.state=Fr,r.pure?Or.push(r):zr.push(r),r.observers&&vi(r))}}function gi(e){var t;if(e.sources)for(;e.sources.length;){var r=e.sources.pop(),i=e.sourceSlots.pop(),n=r.observers;if(n&&n.length){var o=n.pop(),a=r.observerSlots.pop();i<n.length&&(o.sourceSlots[a]=i,n[i]=o,r.observerSlots[i]=a)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)gi(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function mi(e){return e instanceof Error?e:new Error("string"==typeof e?e:"Unknown error",{cause:e})}function xi(e,t=Nr){throw mi(e)}function yi(e){if("function"==typeof e&&!e.length)return yi(e());if(Array.isArray(e)){for(var t=[],r=0;r<e.length;r++){var i=yi(e[r]);Array.isArray(i)?t.push.apply(t,i):t.push(i)}return t}return e}function bi(e,t){return function(t){var r;return Vr((()=>r=qr((()=>(Nr.context=_(_({},Nr.context),{},{[e]:t.value}),oi((()=>t.children)))))),void 0),r}}var wi=Symbol("fallback");function Ai(e){for(var t=0;t<e.length;t++)e[t]()}function Ti(e,t){return qr((()=>e(t||{})))}function Si(){return!0}var _i={get:(e,t,r)=>t===Er?r:e.get(t),has:(e,t)=>t===Er||e.has(t),set:Si,deleteProperty:Si,getOwnPropertyDescriptor:(e,t)=>({configurable:!0,enumerable:!0,get:()=>e.get(t),set:Si,deleteProperty:Si}),ownKeys:e=>e.keys()};function Ci(e){return(e="function"==typeof e?e():e)?e:{}}function Ri(){for(var e=0,t=this.length;e<t;++e){var r=this[e]();if(void 0!==r)return r}}function Ei(...e){for(var t=!1,r=0;r<e.length;r++){var i=e[r];t=t||!!i&&Er in i,e[r]="function"==typeof i?(t=!0,jr(i)):i}if(t)return new Proxy({get(t){for(var r=e.length-1;r>=0;r--){var i=Ci(e[r])[t];if(void 0!==i)return i}},has(t){for(var r=e.length-1;r>=0;r--)if(t in Ci(e[r]))return!0;return!1},keys(){for(var t=[],r=0;r<e.length;r++)t.push(...Object.keys(Ci(e[r])));return[...new Set(t)]}},_i);for(var n={},o=Object.create(null),a=e.length-1;a>=0;a--){var s=e[a];if(s)for(var l=Object.getOwnPropertyNames(s),d=function(){var e=l[h];if("__proto__"===e||"constructor"===e)return 1;var t=Object.getOwnPropertyDescriptor(s,e);if(o[e]){var r=n[e];r&&(t.get?r.push(t.get.bind(s)):void 0!==t.value&&r.push((()=>t.value)))}else o[e]=t.get?{enumerable:!0,configurable:!0,get:Ri.bind(n[e]=[t.get.bind(s)])}:void 0!==t.value?t:void 0},h=l.length-1;h>=0;h--)d()}for(var u={},c=Object.keys(o),f=c.length-1;f>=0;f--){var p=c[f],v=o[p];v&&v.get?Object.defineProperty(u,p,v):u[p]=v?v.value:void 0}return u}function Ii(e){var t,r,i=i=>{var n,o=Sr.context;if(o){var a=C(Hr(),2),s=a[0],l=a[1];Sr.count||(Sr.count=0),Sr.count++,(r||(r=e())).then((e=>{_r(o),Sr.count--,l((()=>e.default)),_r()})),t=s}else if(!t){var d=C(Qr((()=>(r||(r=e())).then((e=>e.default)))),1)[0];t=d}return jr((()=>(n=t())&&qr((()=>{if(!o)return n(i);var e=Sr.context;_r(o);var t=n(i);return _r(e),t}))))};return i.preload=()=>r||((r=e()).then((e=>t=()=>e.default)),r),i}var Bi=e=>`Stale read from <${e}>.`;function ki(e){var t="fallback"in e&&{fallback:()=>e.fallback};return jr(function(e,t,r={}){var i=[],n=[],o=[],a=0,s=t.length>1?[]:null;return Jr((()=>Ai(o))),()=>{var l,d,h=e()||[];return h[Ir],qr((()=>{var e,t,c,f,p,v,g,m,x,y=h.length;if(0===y)0!==a&&(Ai(o),o=[],i=[],n=[],a=0,s&&(s=[])),r.fallback&&(i=[wi],n[0]=Gr((e=>(o[0]=e,r.fallback()))),a=1);else if(0===a){for(n=new Array(y),d=0;d<y;d++)i[d]=h[d],n[d]=Gr(u);a=y}else{for(c=new Array(y),f=new Array(y),s&&(p=new Array(y)),v=0,g=Math.min(a,y);v<g&&i[v]===h[v];v++);for(g=a-1,m=y-1;g>=v&&m>=v&&i[g]===h[m];g--,m--)c[m]=n[g],f[m]=o[g],s&&(p[m]=s[g]);for(e=new Map,t=new Array(m+1),d=m;d>=v;d--)x=h[d],l=e.get(x),t[d]=void 0===l?-1:l,e.set(x,d);for(l=v;l<=g;l++)x=i[l],void 0!==(d=e.get(x))&&-1!==d?(c[d]=n[l],f[d]=o[l],s&&(p[d]=s[l]),d=t[d],e.set(x,d)):o[l]();for(d=v;d<y;d++)d in c?(n[d]=c[d],o[d]=f[d],s&&(s[d]=p[d],s[d](d))):n[d]=Gr(u);n=n.slice(0,a=y),i=h.slice(0)}return n}));function u(e){if(o[d]=e,s){var r=C(Hr(d),2),i=r[0],n=r[1];return s[d]=n,t(h[d],i)}return t(h[d])}}}((()=>e.each),e.children,t||void 0))}function Mi(e){var t=e.keyed,r=jr((()=>e.when),void 0,{equals:(e,r)=>t?e===r:!e==!r});return jr((()=>{var i=r();if(i){var n=e.children;return"function"==typeof n&&n.length>0?qr((()=>n(t?i:()=>{if(!qr(r))throw Bi("Show");return e.when}))):n}return e.fallback}),void 0,void 0)}var Fi=C(Hr(void 0),2),Li=Fi[0],Pi=Fi[1];function Ni(e=""){return t=e,Number.isInteger(t)?e:"string"==typeof e?e.startsWith("#")?Number(e.replace("#","0x")+(7===e.length?"ff":"")):e.startsWith("0x")?Number(e):Number("0x"+(6===e.length?e+"ff":e)):0;var t}function Ui({createElement:e,createTextNode:t,isTextNode:r,replaceText:i,insertNode:n,removeNode:o,setProperty:a,getParentNode:s,getFirstChild:l,getNextSibling:d}){function h(e,t,r,i){if(void 0===r||i||(i=[]),"function"!=typeof t)return u(e,t,i,r);Vr((i=>u(e,t(),i,r)),i)}function u(e,o,a,s,d){for(;"function"==typeof a;)a=a();if(o===a)return a;var h=typeof o,m=void 0!==s;if("string"===h||"number"===h)if("number"===h&&(o=o.toString()),m){var x=a[0];x&&r(x)?i(x,o):x=t(o),a=p(e,a,s,x)}else""!==a&&"string"==typeof a?i(l(e),a=o):(p(e,a,s,t(o)),a=o);else if(null==o||"boolean"===h)a=p(e,a,s);else{if("function"===h)return Vr((()=>{for(var t=o();"function"==typeof t;)t=t();a=u(e,t,a,s)})),()=>a;if(Array.isArray(o)){var y=[];if(c(y,o,d))return Vr((()=>a=u(e,y,a,s,!0))),()=>a;if(0===y.length){var b=p(e,a,s);if(m)return a=b}else Array.isArray(a)?0===a.length?v(e,y,s):f(e,a,y):null==a||""===a?v(e,y):f(e,m&&a||[l(e)],y);a=y}else{if(Array.isArray(a)){if(m)return a=p(e,a,s,o);p(e,a,null,o)}else null!=a&&""!==a&&l(e)?g(e,o,l(e)):n(e,o);a=o}}return a}function c(e,r,i){for(var n=!1,o=0,a=r.length;o<a;o++){var s=r[o],l=void 0;if(null==s||!0===s||!1===s);else if(Array.isArray(s))n=c(e,s)||n;else if("string"==(l=typeof s)||"number"===l)e.push(t(s));else if("function"===l)if(i){for(;"function"==typeof s;)s=s();n=c(e,Array.isArray(s)?s:[s])||n}else e.push(s),n=!0;else e.push(s)}return n}function f(e,t,r){for(var i=r.length,a=t.length,s=i,l=0,h=0,u=d(t[a-1]),c=null;l<a||h<s;)if(t[l]!==r[h]){for(;t[a-1]===r[s-1];)a--,s--;if(a===l)for(var f=s<i?h?d(r[h-1]):r[s-h]:u;h<s;)n(e,r[h++],f);else if(s===h)for(;l<a;)c&&c.has(t[l])||o(e,t[l]),l++;else if(t[l]===r[s-1]&&r[h]===t[a-1]){var p=d(t[--a]);n(e,r[h++],d(t[l++])),n(e,r[--s],p),t[a]=r[s]}else{if(!c){c=new Map;for(var v=h;v<s;)c.set(r[v],v++)}var m=c.get(t[l]);if(null!=m)if(h<m&&m<s){for(var x=l,y=1,b=void 0;++x<a&&x<s&&null!=(b=c.get(t[x]))&&b===m+y;)y++;if(y>m-h)for(var w=t[l];h<m;)n(e,r[h++],w);else g(e,r[h++],t[l++])}else l++;else o(e,t[l++])}}else l++,h++}function p(e,r,i,a){if(void 0===i){for(var d;d=l(e);)o(e,d);return a&&n(e,a),""}var h=a||t("");if(r.length)for(var u=!1,c=r.length-1;c>=0;c--){var f=r[c];if(h!==f){var p=s(f)===e;u||c?p&&o(e,f):p?g(e,h,f):n(e,h,i)}else u=!0}else n(e,h,i);return[h]}function v(e,t,r){for(var i=0,o=t.length;i<o;i++)n(e,t[i],r)}function g(e,t,r){n(e,t,r),o(e,r)}function m(e,t,r={},i){return t||(t={}),i||Vr((()=>r.children=u(e,t.children,r.children))),Vr((()=>t.ref&&t.ref(e))),Vr((()=>{for(var i in t)if("children"!==i&&"ref"!==i){var n=t[i];n!==r[i]&&(a(e,i,n,r[i]),r[i]=n)}})),r}return{render(e,t){var r;return Gr((i=>{r=i,h(t,e())})),r},insert:h,spread(e,t,r){"function"==typeof t?Vr((i=>m(e,t(),i,r))):m(e,t,void 0,r)},createElement:e,createTextNode:t,insertNode:n,setProp:(e,t,r,i)=>(a(e,t,r,i),r),mergeProps:Ei,effect:Vr,memo:jr,createComponent:Ti,use:(e,t,r)=>qr((()=>e(t,r)))}}A("L",Pi),rr.setActiveElement=Pi;var Di,Oi={createElement:e=>new mr(e),createTextNode:e=>({_type:cr,text:e,parent:void 0}),replaceText(e,t){ir(0,0),e.text=t;var r=e.parent;r.text=r.getText()},setProperty(e,t,r=!0){e[t]=r},insertNode(e,t,r){ir(0,0),e.children.insert(t,r),t._queueDelete=!1,t instanceof mr?e.rendered&&t.render():e.isTextNode()&&(e.text=e.getText())},isTextNode:e=>e.isTextNode(),removeNode(e,t){ir(0,0),e.children.remove(t),t._queueDelete=!0,t instanceof mr&&queueMicrotask((()=>t.destroy()))},getParentNode:e=>e.parent,getFirstChild:e=>e.children[0],getNextSibling(e){var t=e.parent.children||[],r=t.indexOf(e)+1;if(r<t.length)return t[r]}},zi=function(e){var t=Ui(e);return t.mergeProps=Ei,t}(Oi),Wi=Oi.createElement("App"),Gi=function(e){return zi.render(e,Wi)};zi.effect;var Hi=zi.memo,Xi=zi.createComponent,Vi=zi.createElement,Yi=(zi.createTextNode,zi.insertNode,zi.insert),ji=zi.spread,Qi=zi.setProp,Ki=zi.mergeProps,$i=zi.use;A({l:Hi,h:Xi,r:Vi,y:Yi,x:ji,m:Ki,v:$i});var qi=A("V",(e=>{var t=Vi("node");return ji(t,e,!1),t})),Zi=A("T",(e=>{var t=Vi("text");return ji(t,e,!1),t})),Ji="_$DX_DELEGATE";function en(e){var t=`$$${e.type}`,r=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==r&&Object.defineProperty(e,"target",{configurable:!0,value:r}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>r||document}),Sr.registry&&!Sr.done&&(Sr.done=_$HY.done=!0);r;){var i=r[t];if(i&&!r.disabled){var n=r[`${t}Data`];if(void 0!==n?i.call(r,n,e):i.call(r,e),e.cancelBubble)return}r=r._$host||r.parentNode||r.host}}var tn;function rn(){var e=new Set;var t=!1;return{subscribe:function(t){return e.add(t),()=>e.delete(t)},confirm:function(r,i){if(t)return!(t=!1);var n,o={to:r,options:i,defaultPrevented:!1,preventDefault:()=>o.defaultPrevented=!0},a=E(e);try{var s=function(){var e=n.value;e.listener(_(_({},o),{},{from:e.location,retry:n=>{n&&(t=!0),e.navigate(r,_(_({},i),{},{resolve:!1}))}}))};for(a.s();!(n=a.n()).done;)s()}catch(l){a.e(l)}finally{a.f()}return!o.defaultPrevented}}}function nn(){window.history.state&&null!=window.history.state._depth||window.history.replaceState(_(_({},window.history.state),{},{_depth:window.history.length-1}),""),tn=window.history.state._depth}nn();var on=/^(?:[a-z0-9]+:)?\/\//i,an=/^\/+|(\/)\/+$/g,sn="http://sr";function ln(e,t=!1){var r=e.replace(an,"$1");return r?t||/^[?#]/.test(r)?r:"/"+r:""}function dn(e,t,r){if(!on.test(t)){var i=ln(e),n=r&&ln(r),o="";return((o=!n||t.startsWith("/")?i:0!==n.toLowerCase().indexOf(i.toLowerCase())?i+n:n)||"/")+ln(t,!o)}}function hn(e){var t={};return e.searchParams.forEach(((e,r)=>{t[r]=e})),t}function un(e,t,r){var i=C(e.split("/*",2),2),n=i[0],o=i[1],a=n.split("/").filter(Boolean),s=a.length;return e=>{var i=e.split("/").filter(Boolean),n=i.length-s;if(n<0||n>0&&void 0===o&&!t)return null;for(var l={path:s?"":"/",params:{}},d=e=>void 0===r?void 0:r[e],h=0;h<s;h++){var u=a[h],c=i[h],f=":"===u[0],p=f?u.slice(1):u;if(f&&cn(c,d(p)))l.params[p]=c;else if(f||!cn(c,u))return null;l.path+=`/${c}`}if(o){var v=n?i.slice(-n).join("/"):"";if(!cn(v,d(o)))return null;l.params[o]=v}return l}}function cn(e,t){var r=t=>0===t.localeCompare(e,void 0,{sensitivity:"base"});return void 0===t||("string"==typeof t?r(t):"function"==typeof t?t(e):Array.isArray(t)?t.some(r):t instanceof RegExp&&t.test(e))}function fn(e){var t=new Map,r=ti();return new Proxy({},{get:(i,n)=>(t.has(n)||ri(r,(()=>t.set(n,jr((()=>e()[n]))))),t.get(n)()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),ownKeys:()=>Reflect.ownKeys(e())})}function pn(e){var t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];for(var r=e.slice(0,t.index),i=e.slice(t.index+t[0].length),n=[r,r+=t[1]];t=/^(\/\:[^\/]+)\?/.exec(i);)n.push(r+=t[1]),i=i.slice(t[0].length);return pn(i).reduce(((e,t)=>[...e,...n.map((e=>e+t))]),[])}var vn,gn=ii(),mn=ii(),xn=()=>function(e,t){if(null==e)throw new Error(t);return e}(ni(gn),"<A> and 'use' router primitives can be only used inside a Route."),yn=A("u",(()=>xn().navigatorFactory())),bn=()=>xn().location,wn=A("E",(()=>xn().params));function An(e,t=""){var r=e.component,i=e.load,n=e.children,o=e.info,a=!n||Array.isArray(n)&&!n.length,s={key:e,component:r,load:i,info:o};return Sn(e.path).reduce(((r,i)=>{var n,o,l=E(pn(i));try{for(l.s();!(n=l.n()).done;){var d=n.value,h=(o=d,ln(t).replace(/\/*(\*.*)?$/g,"")+ln(o)),u=a?h:h.split("/*",1)[0];u=u.split("/").map((e=>e.startsWith(":")||e.startsWith("*")?e:encodeURIComponent(e))).join("/"),r.push(_(_({},s),{},{originalPath:i,pattern:u,matcher:un(u,!a,e.matchFilters)}))}}catch(c){l.e(c)}finally{l.f()}return r}),[])}function Tn(e,t=0){return{routes:e,score:1e4*(r=e[e.length-1],i=C(r.pattern.split("/*",2),2),n=i[0],o=i[1],a=n.split("/").filter(Boolean),a.reduce(((e,t)=>e+(t.startsWith(":")?2:3)),a.length-(void 0===o?0:1)))-t,matcher(t){for(var r=[],i=e.length-1;i>=0;i--){var n=e[i],o=n.matcher(t);if(!o)return null;r.unshift(_(_({},o),{},{route:n}))}return r}};var r,i,n,o,a}function Sn(e){return Array.isArray(e)?e:[e]}function _n(e,t="",r=[],i=[]){for(var n=Sn(e),o=0,a=n.length;o<a;o++){var s=n[o];if(s&&"object"==typeof s){s.hasOwnProperty("path")||(s.path="");var l,d=E(An(s,t));try{for(d.s();!(l=d.n()).done;){var h=l.value;r.push(h);var u=Array.isArray(s.children)&&0===s.children.length;if(s.children&&!u)_n(s.children,h.pattern,r,i);else{var c=Tn([...r],i.length);i.push(c)}r.pop()}}catch(f){d.e(f)}finally{d.f()}}}return r.length?i:i.sort(((e,t)=>t.score-e.score))}function Cn(e,t){for(var r=0,i=e.length;r<i;r++){var n=e[r].matcher(t);if(n)return n}return[]}function Rn(e,t,r,i={}){var n=C(e.signal,2),o=n[0],a=n[1],s=e.utils,l=void 0===s?{}:s,d=l.parsePath||(e=>e),h=l.renderPath||(e=>e),u=l.beforeLeave||rn(),c=dn("",i.base||"");if(void 0===c)throw new Error(`${c} is not a valid base path`);c&&!o().value&&a({value:c,replace:!0,scroll:!1});var f,p=C(Hr(!1),2),v=p[0],g=p[1],m=(e,t)=>{var r,i,n;t.value===y()&&t.state===A()||(void 0===f&&g(!0),vn=e,f=t,(r=()=>{f===t&&(b(f.value),T(f.state),E[1]([]))},i=Dr,n=Nr,Promise.resolve().then((()=>{Dr=i,Nr=n,ui(r,!1),Dr=Nr=null}))).finally((()=>{f===t&&$r((()=>{var t,r;vn=void 0,"navigate"===e&&(t=f,(r=R[0])&&(a(_(_({},t),{},{replace:r.replace,scroll:r.scroll})),R.length=0)),g(!1),f=void 0}))})))},x=C(Hr(o().value),2),y=x[0],b=x[1],w=C(Hr(o().state),2),A=w[0],T=w[1],S=function(e,t){var r=new URL(sn),i=jr((t=>{var i=e();try{return new URL(i,r)}catch(n){return console.error(`Invalid path ${i}`),t}}),r,{equals:(e,t)=>e.href===t.href}),n=jr((()=>i().pathname)),o=jr((()=>i().search),!0),a=jr((()=>i().hash));return{get pathname(){return n()},get search(){return o()},get hash(){return a()},get state(){return t()},get key(){return""},query:fn(Zr(o,(()=>hn(i()))))}}(y,A),R=[],E=Hr([]),I=jr((()=>"function"==typeof i.transformUrl?Cn(t(),i.transformUrl(S.pathname)):Cn(t(),S.pathname))),B=fn((()=>{for(var e=I(),t={},r=0;r<e.length;r++)Object.assign(t,e[r].params);return t})),k={pattern:c,path:()=>c,outlet:()=>null,resolvePath:e=>dn(c,e)};return Vr(Zr(o,(e=>m("native",e)),{defer:!0})),{base:k,location:S,params:B,isRouting:v,renderPath:h,parsePath:d,navigatorFactory:function(e){return e=e||ni(mn)||k,(t,r)=>function(e,t,r){qr((()=>{if("number"!=typeof t){var i=_({replace:!1,resolve:!0,scroll:!0},r),n=i.replace,o=i.resolve,a=i.scroll,s=i.state,d=o?e.resolvePath(t):dn("",t);if(void 0===d)throw new Error(`Path '${t}' is not a routable path`);if(R.length>=100)throw new Error("Too many redirects");var h=y();d===h&&s===A()||u.confirm(d,r)&&(R.push({value:h,replace:n,scroll:a,state:A()}),m("navigate",{value:d,state:s}))}else t&&(l.go?l.go(t):console.warn("Router integration does not support relative routing"))}))}(e,t,r)},matches:I,beforeLeave:u,preloadRoute:function(e,i={}){var n=Cn(t(),e.pathname),o=vn;vn="preload";var a=function(){var t=n[s],o=t.route,a=t.params;o.component&&o.component.preload&&o.component.preload();var l=o.load;i.preloadData&&l&&ri(r(),(()=>l({params:a,location:{pathname:e.pathname,search:e.search,hash:e.hash,query:hn(e),state:null,key:""},intent:"preload"})))};for(var s in n)a();vn=o},singleFlight:void 0===i.singleFlight||i.singleFlight,submissions:E}}var En=e=>t=>{var r,i=t.base,n=oi((()=>t.children)),o=jr((()=>_n(n(),t.base||""))),a=Rn(e,o,(()=>r),{base:i,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(a),Xi(gn.Provider,{value:a,get children(){return Xi(In,{routerState:a,get root(){return t.root},get load(){return t.rootLoad},get children(){return[Hi((()=>(r=ti())&&null)),Xi(Bn,{routerState:a,get branches(){return o()}})]}})}})};function In(e){var t=e.routerState.location,r=e.routerState.params,i=jr((()=>e.load&&qr((()=>{e.load({params:r,location:t,intent:vn||"initial"})}))));return Xi(Mi,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:n=>Xi(n,{params:r,location:t,get data(){return i()},get children(){return e.children}})})}function Bn(e){var t,r=[],i=jr(Zr(e.routerState.matches,((n,o,a)=>{for(var s=o&&n.length===o.length,l=[],d=function(t){var d=o&&o[t],h=n[t];a&&d&&h.route.key===d.route.key?l[t]=a[t]:(s=!1,r[t]&&r[t](),Gr((n=>{r[t]=n,l[t]=function(e,t,r,i){var n=e.base,o=e.location,a=e.params,s=i().route,l=s.pattern,d=s.component,h=s.load,u=jr((()=>i().path));d&&d.preload&&d.preload();var c=h?h({params:a,location:o,intent:vn||"initial"}):void 0;return{parent:t,pattern:l,path:u,outlet:()=>d?Ti(d,{params:a,location:o,data:c,get children(){return r()}}):r(),resolvePath:e=>dn(n.path(),e,u())}}(e.routerState,l[t-1]||e.routerState.base,kn((()=>i()[t+1])),(()=>e.routerState.matches()[t]))})))},h=0,u=n.length;h<u;h++)d(h);return r.splice(n.length).forEach((e=>e())),a&&s?a:(t=l[0],l)})));return kn((()=>i()&&t))()}var kn=e=>()=>Xi(Mi,{get when(){return e()},keyed:!0,children:e=>Xi(mn.Provider,{value:e,get children(){return e.outlet()}})}),Mn=e=>{var t=oi((()=>e.children));return Ei(e,{get children(){return t()}})};function Fn(e,t){var r=function(e){if("#"===e)return null;try{return document.querySelector(e)}catch(t){return null}}(`#${e}`);r?r.scrollIntoView():t&&window.scrollTo(0,0)}var Ln=new Map;function Pn(e=!0,t=!1,r="/_server",i){return i=>{var n=i.base.path(),o=i.navigatorFactory(i.base),a={};function s(e){if(!(e.defaultPrevented||0!==e.button||e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)){var r=e.composedPath().find((e=>e instanceof Node&&"A"===e.nodeName.toUpperCase()));if(r&&(!t||r.hasAttribute("link"))){var i="http://www.w3.org/2000/svg"===r.namespaceURI,o=i?r.href.baseVal:r.href;if(!(i?r.target.baseVal:r.target)&&(o||r.hasAttribute("state"))){var a=(r.getAttribute("rel")||"").split(/\s+/);if(!(r.hasAttribute("download")||a&&a.includes("external"))){var s=i?new URL(o,document.baseURI):new URL(o);if(!(s.origin!==window.location.origin||n&&s.pathname&&!s.pathname.toLowerCase().startsWith(n.toLowerCase())))return[r,s]}}}}}function l(e){var t=s(e);if(t){var r=C(t,2),n=r[0],a=r[1],l=i.parsePath(a.pathname+a.search+a.hash),d=n.getAttribute("state");e.preventDefault(),o(l,{resolve:!1,replace:n.hasAttribute("replace"),scroll:!n.hasAttribute("noscroll"),state:d&&JSON.parse(d)})}}function d(e){var t=s(e);if(t){var r=C(t,2),n=r[0],o=r[1];a[o.pathname]||i.preloadRoute(o,{preloadData:"false"!==n.getAttribute("preload")})}}function h(e){var t=s(e);if(t){var r=C(t,2),n=r[0],o=r[1];a[o.pathname]||(a[o.pathname]=setTimeout((()=>{i.preloadRoute(o,{preloadData:"false"!==n.getAttribute("preload")}),delete a[o.pathname]}),200))}}function u(e){var t=s(e);if(t){var r=C(t,2)[1];a[r.pathname]&&(clearTimeout(a[r.pathname]),delete a[r.pathname])}}function c(e){if(!e.defaultPrevented){var t=e.submitter&&e.submitter.hasAttribute("formaction")?e.submitter.getAttribute("formaction"):e.target.getAttribute("action");if(t){if(!t.startsWith("https://action/")){var n=new URL(t,sn);if(!(t=i.parsePath(n.pathname+n.search)).startsWith(r))return}if("POST"!==e.target.method.toUpperCase())throw new Error("Only POST forms are supported for Actions");var o=Ln.get(t);if(o){e.preventDefault();var a=new FormData(e.target);e.submitter&&e.submitter.name&&a.append(e.submitter.name,e.submitter.value),o.call({r:i,f:e.target},a)}}}}!function(e,t=window.document){for(var r=t[Ji]||(t[Ji]=new Set),i=0,n=e.length;i<n;i++){var o=e[i];r.has(o)||(r.add(o),t.addEventListener(o,en))}}(["click","submit"]),document.addEventListener("click",l),e&&(document.addEventListener("mouseover",h),document.addEventListener("mouseout",u),document.addEventListener("focusin",d),document.addEventListener("touchstart",d)),document.addEventListener("submit",c),Jr((()=>{document.removeEventListener("click",l),e&&(document.removeEventListener("mouseover",h),document.removeEventListener("mouseout",u),document.removeEventListener("focusin",d),document.removeEventListener("touchstart",d)),document.removeEventListener("submit",c)}))}}function Nn(e){var t=e.replace(/^.*?#/,"");if(!t.startsWith("/")){var r=C(window.location.hash.split("#",2),2)[1];return`${void 0===r?"/":r}#${t}`}return t}function Un(e){var t,r,i,n,o=()=>window.location.hash.slice(1),a=rn();return(t={get:o,set({value:e,replace:t,scroll:r,state:i}){t?window.history.replaceState(function(e){return _(_({},e),{},{_depth:window.history.state&&window.history.state._depth})}(i),"","#"+e):window.history.pushState(i,"","#"+e);var n=e.indexOf("#");Fn(n>=0?e.slice(n+1):"",r),nn()},init:e=>{return t=window,r="hashchange",i=function(e,t){var r=!1;return()=>{var i=tn;nn();var n=null==i?null:tn-i;r?r=!1:n&&t(n)?(r=!0,window.history.go(-n)):e()}}(e,(e=>!a.confirm(e&&e<0?e:o()))),t.addEventListener(r,i),()=>t.removeEventListener(r,i);var t,r,i},create:Pn(e.preload,e.explicitLinks,e.actionBase),utils:{go:e=>window.history.go(e),renderPath:e=>`#${e}`,parsePath:Nn,beforeLeave:a}},r=!1,n=function([e,t],r,i){return[e,i?e=>t(i(e)):t]}(Hr((i=e=>"string"==typeof e?{value:e}:e)(t.get()),{equals:(e,t)=>e.value===t.value&&e.state===t.state}),0,(e=>(!r&&t.set(e),e))),t.init&&Jr(t.init(((e=t.get())=>{r=!0,n[1](i(e)),r=!1}))),En({signal:n,create:t.create,utils:t.utils}))(e)}function Dn(e,...t){return"function"==typeof e?e(...t):e}var On=Jr,zn=()=>{var e=[],t=()=>e=[];return{push:(...t)=>e.push(...t),execute(r,i,n,o){e.forEach((e=>e(r,i,n,o))),t()},clear:t}};function Wn(e,t,r,i){return e.addEventListener(t,r,i),On(e.removeEventListener.bind(e,t,r,i))}function Gn(e,t){var r=zn(),i=r.push;return[(r,n,o)=>{var a=Wn(e,r,n,null!=o?o:t);return i(a),a},Jr(r.execute)]}function Hn(e,t=ti()){var r,i,n=0;return()=>(n++,Jr((()=>{n--,queueMicrotask((()=>{!n&&i&&(i(),i=r=void 0)}))})),i||Gr((t=>r=e(i=t)),t),r)}function Xn(e){var t=ti(),r=Hn(e,t);return()=>Sr.context?Gr(e,t):r()}var Vn,Yn=Hn((()=>{var e=C(Hr(null),2),t=e[0],r=e[1];return Wn(window,"keydown",(e=>{r(e),setTimeout((()=>r(null)))})),t})),jn={ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"Enter",l:"Last"," ":"Space",Backspace:"Back",Escape:"Escape"},Qn=C(Hr([]),2),Kn=Qn[0],$n=Qn[1];function qn(e){return new Promise((t=>{setTimeout(t,e)}))}function Zn(e,t,r="en-US"){var i=window.speechSynthesis;return new Promise(((n,o)=>{var a=new SpeechSynthesisUtterance(e);a.lang=r,a.onend=()=>{n()},a.onerror=e=>{o(e)},t.push(a),i.speak(a)}))}function Jn(e,t,r=!0){var i=window.speechSynthesis,n=function(e=[]){var t,r=[];for(t=0;t<e.length;t++){var i=e[t];if("string"!=typeof i||i.includes("PAUSE-"))break;r.push(e[t])}return[r.join(",\b ")].concat(e.slice(t))}(Array.isArray(e)?e:[e]),o=[],a=[],s=!0;return{series:T(w().mark((function e(){var r,i,l,d,h,u;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0;case 1:if(!s||!n.length){e.next=62;break}return e.next=4,Promise.resolve(n.shift());case 4:if(r=e.sent,s){e.next=9;break}return e.abrupt("break",62);case 9:if("string"!=typeof r||!r.includes("PAUSE-")){e.next=16;break}return i=1e3*Number(r.split("PAUSE-")[1]),isNaN(i)&&(i=0),e.next=14,qn(i);case 14:e.next=60;break;case 16:if("string"!=typeof r||!r.length){e.next=48;break}d=l=3;case 19:if(!(s&&d>0)){e.next=46;break}return e.prev=20,e.next=23,Zn(r,a,t);case 23:d=0,e.next=44;break;case 26:if(e.prev=26,e.t0=e.catch(20),!(e.t0 instanceof SpeechSynthesisErrorEvent)){e.next=43;break}if("network"!==e.t0.error){e.next=36;break}return d--,console.warn(`Speech synthesis network error. Retries left: ${d}`),e.next=34,qn(500*(l-d));case 34:e.next=41;break;case 36:if("canceled"!==e.t0.error&&"interrupted"!==e.t0.error){e.next=40;break}d=0,e.next=41;break;case 40:throw new Error(`SpeechSynthesisErrorEvent: ${e.t0.error}`);case 41:e.next=44;break;case 43:throw e.t0;case 44:e.next=19;break;case 46:e.next=60;break;case 48:if("function"!=typeof r){e.next=55;break}return h=Jn(r(),t,!1),o.push(h),e.next=53,h.series;case 53:e.next=60;break;case 55:if(!Array.isArray(r)){e.next=60;break}return u=Jn(r,t,!1),o.push(u),e.next=60,u.series;case 60:e.next=1;break;case 62:return e.prev=62,s=!1,e.finish(62);case 65:case"end":return e.stop()}}),e,null,[[0,,62,65],[20,26]])})))(),get active(){return s},append:e=>{n.push(e)},cancel:()=>{s&&(r&&i.cancel(),o.forEach((e=>{e.cancel()})),s=!1)}}}function eo(e,t="en-US"){return Vn&&Vn.cancel(),Vn=Jn(e,t)}var to,ro=(e,t)=>{var r,i=()=>clearTimeout(r);ti()&&Jr(i);return Object.assign(((...n)=>{void 0!==r&&i(),r=setTimeout((()=>e(...n)),t)}),{clear:i})},io=(e,t)=>{var r,i,n=!1,o=()=>{clearTimeout(r),n=!1};return ti()&&Jr(o),Object.assign(((...o)=>{i=o,n||(n=!0,r=setTimeout((()=>{e(...i),n=!1}),t))}),{clear:o})};var no,oo=[],ao=!1;function so(e,t){var r,i=ro(e,t),n=e=>{r=e,i(e)};return n.flush=()=>{i.clear(),e(r)},n.clear=i.clear,n}function lo(e){return e.id||e.name}function ho(e=[]){if(uo.onFocusChange&&uo.enabled){var t=e.every((e=>!e.loading)),r=e.filter((e=>!oo.includes(e)));if(to(),t||!uo.onFocusChange){oo=e.slice(0);var i=[],n=r.reduce(((e,t)=>(t.announce?(e.push([lo(t),"Announce",t.announce]),i.push(t.announce)):t.title?(e.push([lo(t),"Title",t.title]),i.push(t.title)):e.push([lo(t),"No Announce",""]),e)),[]);return r.reverse().reduce(((e,t)=>(t.announceContext?(e.push([lo(t),"Context",t.announceContext]),i.push(t.announceContext)):e.push([lo(t),"No Context",""]),e)),n),uo.debug&&console.table(n),i.length?uo.speak(i.reduce(((e,t)=>e.concat(t)),[])):void 0}uo.onFocusChange([])}}var uo={debug:!1,enabled:!0,cancel:function(){no&&no.cancel()},clearPrevFocus:function(e=0){oo=oo.slice(0,e),to()},speak:function(e,{append:t=!1,notification:r=!1}={}){var i;uo.onFocusChange&&uo.enabled&&(uo.onFocusChange.flush(),t&&no&&no.active?no.append(e):(uo.cancel(),function(e){if(!ao)no=eo(e)}(e)),r&&(ao=!0,null===(i=no)||void 0===i||i.series.finally((()=>{ao=!1,uo.refresh()})).catch(console.error)));return no},refresh:function(e=0){uo.clearPrevFocus(e),uo.onFocusChange&&uo.onFocusChange(qr((()=>Kn())))},setupTimers:function({focusDebounce:e=400,focusChangeTimeout:t=3e5}={}){uo.onFocusChange=so(ho,e),to=so((()=>{oo=[]}),t)}};function co(e){var t=_({},e),r=_({},e),i={},n=function(e){Object.defineProperty(r,e,{get:()=>(e=>{var r=i[e];if(!r){if(!ei())return t[e];i[e]=r=Hr(t[e],{internal:!0}),delete t[e]}return r[0]()})(e),enumerable:!0})};for(var o in e)n(o);var a=(e,r)=>{var n=i[e];if(n)return n[1](r);e in t&&(t[e]=Dn(r,[t[e]]))};return[r,(e,t)=>{if(null===(n=e)||"object"!=typeof n&&"function"!=typeof n)a(e,t);else{var i=qr((()=>Object.entries(Dn(e,r))));$r((()=>{var e,t=E(i);try{var r=function(){var t=C(e.value,2),r=t[0],i=t[1];a(r,(()=>i))};for(t.s();!(e=t.n()).done;)r()}catch(n){t.e(n)}finally{t.f()}}))}var n;return r}]}var fo={passive:!0},po={x:0,y:0,isInside:!1,sourceType:null};var vo=Xn(function(e,t={}){var r=C(co(_(_({},po),t.initialValue)),2),i=r[0],n=r[1],o=e=>{!function(e=window,t,r={}){var i=r.touch,n=void 0===i||i,o=r.followTouch,a=void 0===o||o,s=C(Gn(e,fo),2),l=s[0],d=s[1],h=e=>t({x:e.pageX,y:e.pageY,sourceType:"mouse"});if(l("mousemove",h),l("dragover",h),n){var u=e=>{e.touches.length&&t({x:e.touches[0].clientX,y:e.touches[0].clientY,sourceType:"touch"})};l("touchstart",u),a&&l("touchmove",u)}}(e,n,t),function(e=window,t,r={}){var i=r.touch,n=void 0===i||i,o=C(Gn(e,fo),2),a=o[0],s=o[1],l=!1,d=!n;function h(e){"mouse"===this?l=e:d=e,t(l||d)}a("mouseover",h.bind("mouse",!0)),a("mouseout",h.bind("mouse",!1)),a("mousemove",h.bind("mouse",!0),{passive:!0,once:!0}),n&&(a("touchstart",h.bind("touch",!0)),a("touchend",h.bind("touch",!1)))}(e,n.bind(void 0,"isInside"),t)};return"function"!=typeof e?o(e):Yr((()=>o(e()))),i}.bind(void 0,void 0,void 0));function go(e,t){return new KeyboardEvent("keydown",{key:e,keyCode:t,which:t,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0})}var mo=io((e=>{var t=e.deltaY;t<0?document.dispatchEvent(go("ArrowUp",38)):t>0&&document.dispatchEvent(go("ArrowDown",40))}),250),xo=e=>{var t,r=Li(),i=(null===(t=rr.rendererOptions)||void 0===t?void 0:t.deviceLogicalPixelRatio)||1;r&&yo(e.clientX,e.clientY,r.lng.absX*i,r.lng.absY*i,r.width*i,r.height*i)&&document.dispatchEvent(go("Enter",13))};function yo(e,t,r,i,n=0,o=0){return e>=r&&e<=r+n&&t>=i&&t<=i+o}function bo(e=Wi,t=100){var r,i,n,o,a,s,l,d=vo(),h=(r=e=>io(e,t),i=0,n=!1,o=C(Hr(void 0,{equals:!1}),2),a=o[0],s=o[1],l=r((()=>{n=!0,s()})),()=>(n||(l(),a()),n?(n=!!i,!0):(ei()&&(i++,Jr((()=>i--))),!1)));Wn(window,"wheel",mo),Wn(window,"click",xo),Yr((()=>{if(h()){var t=function(e,t,r){for(var i,n=[],o=(null===(i=rr.rendererOptions)||void 0===i?void 0:i.deviceLogicalPixelRatio)||1,a=[e];a.length>0;){var s,l=[],d=E(a);try{for(d.s();!(s=d.n()).done;){var h=s.value;0!==h.alpha&&yo(t,r,h.lng.absX*o,h.lng.absY*o,h.width*o,h.height*o)&&l.push(h)}}catch(f){d.e(f)}finally{d.f()}var u=l.length;if(0===u)break;u>1&&l.sort(((e,t)=>(t.zIndex||0)-(e.zIndex||0)));var c=l[0];n.push(c),a=c.isTextNode()?[]:c.children}return n}(e,d.x,d.y).filter((e=>(e.focus||e.onFocus||e.onEnter)&&!e.skipFocus));if(t.length){for(var r=t[t.length-1];null!==(i=r.parent)&&void 0!==i&&i.forwardStates;){var i;r=r.parent}var n=r.parent;void 0!==(null==n?void 0:n.selected)&&(n.selected=n.children.indexOf(r)),Pi(r)}}}))}var wo=C(Hr(""),2),Ao=wo[0],To=wo[1];A("s",To);var So=A("t",{name:"Base Lightning TV",alpha:{primary:1,secondary:.7,tertiary:.1,inactive:.5,full:1,none:0,alpha1:.1,alpha2:.3,alpha3:.5,alpha4:.7,alpha5:.9,alpha6:.95},animation:{duration:{none:0,xfast:100,fast:250,normal:500,slow:750,xslow:900},delay:{none:0,xfast:10,fast:25,normal:50,slow:75,xslow:90},expressive:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},expressiveEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},expressiveExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standard:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standardEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standardExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utility:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utilityEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utilityExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25}},asset:{arrowLeft:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAi0lEQVRIDWNgGAWjIfD//38JID5Fk5AAGqwKxPeA+D/VLQCaaQLEr0CGgwBVLQCa5wbEn0EGwwDVLAAaGA3Ev2AGw2iqWAA0rBiI/8EMRaYptgBoWDeygehsci1gIlcjWfqArqZdEMFcBLSEdpGMZAntkimSJbTLaEiW0K6oQLKEdoUdzJJRemiHAAD4n+yzPWCs7QAAAABJRU5ErkJggg==",arrowRight:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAg0lEQVRIDWNgGAWjIYArBP7//38KiCVwyVMsDjQcBO4BsSrFhmEzAGw8hHgFpEywqaFIDMkCEPMzELtRZCC6ZjQLQNxfQByNro5sPhYLQEL/gLiYbEORNeKwACbcDVPLBGMMOhrmVDSapkFE00imaTKlaUajaVFB28Ju0CXrUQfhDAEAEgHss6NhpLQAAAAASUVORK5CYII=",backspaceOutline:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAAAXNSR0IArs4c6QAACmpJREFUeF7tnVmoZUcVhv/feY4gBEVEH/KgCCZxCK2itNo4xQQH+kUN0TjEiDGKKBqnaExwBjUaR6KY+NQgiQkOMSYhYEScIopGJOqDE2hHjfP0y4p1Oqdv33v2qr32Prv2Paug6Ye7Vu2qv75TtWvtGohMqUBAAQZ80zUVQAKUEIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypfPsAJJ0NYC92XRHKPB3AAfLv18BuBLAFSR/NKZWswJI0vkA3jCmILsw75sAvIfkR8eo22wAknQSgMvGEGFD8vwxgFeQvGrI+s4CIEnHAPgugHsMWfkNzevDAM4i+Z8h6t88QJLuXOB5yBAVzjxuVeBaAM8ieXNUjzkAdAmA50Yrmv5HKPATACeQ/GNEm6YBkvRyANblZhpHAXsfekpkOGsWIEmPAHA9gDuOo13mWhS4gOSZfdVoEiBJ9wFwA4D7961Y+lUpsK/v7KxVgL4K4ElOCS4l+Uyn7a41k3Q0gMcC2ANgH4CHV1T2OyStx69OzQEk6TwAZztr8lMAx5P8s9N+Y8wk2cTjfQDu66z080h+zml7yKwpgCSdCOByZyX+BuBRJH/otN84M0kWN/s0gOc4Kv8Nko922B1m0gxAkh4I4AcVwcL9JA/UVnjT7CXdHYD9yEzfVUkAjib5uxqNmgCoBAu/CeBhzsJ/kORZTtuNN5Nk70bXAZ0Hy59G8qIawVoB6LMAnu8suE3tH0/y3077NAMg6esAuoaoC0la7M2dJgdI0ssAXOgs8W8BHEvS/s9UoYCkdwN4bYfL5STto7U7TQpQZbDQehzreawHylSpgKSTAVza4XYDyeNqsp4MoB7BwteQfH9N5dL2NgWK3l0vyAdJWhDXnSYBSNLtANh3GO/KwgMk97trlYbbKiDJPpzea5U8JKuYqDIeql0kvQPAG5352ZLMR5L8q9M+zXZQYFcAJOnJAL7sbGWLMFuk2SLOmYIKzB6gEiz8HoB7O7U4meQXnLZp1qGApD8BuOcsh7AewcL3kuyadg4OjSSbhRxH0j4BjJok2Ufga0j+YdQHlcznDlBNsPAa+xpP8r/rEHbxjAKPbRuyHvKFY0Ik6QUALOprPfIT1gHRbAGSdDoA77aSX5Zg4e8nhGfx6FEgWoJn8Zy1QCTplq5vjc3NwnoEC/eQ/HYD8IwC0TbwrA2i2QHUI1h4JskLGoJnUIhWwLMWiGYFkCSLMX2t5WDhlneeLm5Dw5kDntEhkmRhEVvesWNqZgiTdC6AN3W1Svn72oOFkuxF+WcVIQUrai+IKuA5BBHJ453auc1mA1AJFn7Jsf7EKj9ZsLBHw1ZDtI5neAmaBUBzCxaO2cBj5u2FZtlO0l8A3K3ZIaxHsPB8kt5vYn00c/mM0dBj5OmqzAqjOQDUfLBwJ32HbPAh84pCM5seSNJLAHzcWeFJgoVdZRui4YfIo6ucff8uyVY03LW5IawyWPgvW5u77mChV/QIABFfb/kidk0CVKbDth3Huw35dJLeniqiV2/fniDYx1f7vlWTeoUFah6wZQhrqwcqwUKbrtsaH0+6mOQpHsOpbXpCVFPstcJjBZNkmzHv0swQJultAN7iVO375TyafzjtJzcbEaK1w9McQJXBQlvvYmtsfjE5FZUFGAGiSeBpCqDKYKFtmX0qya9Utl0z5gNCNBk8BSA7CtiODNwxjf4trEew8BySNtTNOg0A0aTwtARQTbDQeh3rfawXmn0KQDQ5PC0B9EkAL3LSkAD9X6hWALIJzJ3mNoSdS9I7U3NyuX6zQO+zKOzkEEmaHqDSFdpZM97tOfkSfRvvk0LUDEAFIgseetf85DS+AYgk/bPr1NvRZ2HLg4ektwI4xzmgZCBxYohaBMjWPeenDOcvaIvZ2oez5gAqQ5mtLbb3oa4z+Bb6nTHW1UP92vFIr54vzJ8BcGplGdYKkSRbCXGHSWdh2z1ckp1taGccroxyFt9cznG4iGuDqFmASk9kZxxakNGTckHZBBA1DVCB6BMAXuwhyA4VmGL/+05l6zlsbdt7DJmXU0uXmSQ7JvD2zQ1hiwJJsotRvlVxXO87SU5+heUYDT5Gni5KVhg1D1DphWqCjOYy6RlAYzb0mHn3gWkWABWIaoKMubHwSBpGebGWZNdc2vmUO6a1BhJXFUSSff/yLuOYamvzzwEcVfFr7tWwPXqi6uN2PXWYG0C1Qca1n8RaDlewl3kPRL3gWXo/XBwo1dXWdk/a3jEOnJoVQGUoqw0yvpLkh7oUHvLvTohC8FRANBo8pT3sxLeVJ/M2M4QtiVYTZJzkNPoOiAaBxwHRqPDMFqBS8Jog4yT3YewA0aDwrIBodHhmDVApvG0mtO3PnjTJjTxbIBoFnm0gWgs8pQ06lxY3N4QtCWZBRgPDezdnHvPr+alV2EiaL0DlF2Dbn20bdB40XtHwQ5nOHqAC0SyCjEM1Wkv57AqACkRvBvB2p7hrDzI6yzU7s90EUPNBxtnR4SjwrgGo9EK1Qca8cM4ByU4mkuz++F93ZHELyZX3iW31n+S+sKWZWfNBxkCbNeUq6ekArugo1I0kH1xT8EkBKj1R80HGGkFbtZVkZ3bb2d2r0tUkn1hTh8kBKhB9DMBLnQWfJMjoLFuTZpJsO/ONAB7UUcBLSHqvX781q1YAqg0yfoDkq5psrQYLJeldAF7nKFr1x+wmACq9kAUZLazvvTV4P8kDDlE22kTSQ4uuK9dCF5HuR/I3NYI1A1CBaB+AK50VsAMj7TJeixNl2kYBSccCsB/ZMQ6Brif5GIfdYSZNAVQg8rzsLSphl/Hapby2LDZTUaBcq/56ALb1fOVxLkuinULy4loRmwOoQGQX7T7DWZnPk3y203bXmkl6AIA91isDOBGADV3e1HsJbasA1QYZvUKl3fYKPI2knXFQnZoEqPRCNUHG6oqnwyEFLiJ5Wl89mgWoQFQTZOyrwSb7WUztcSRtu0+v1DRABaKPADijV+3SaZUCNgE5geTNEZnmAFBtkDGix6b4Xld2BNvJcaHUPEClF6oNMoZE2eXOtm3q1ZFha1mfWQBUINoL4Kqurbm7vPEj1bOAqx3udW0kk62+swGoQHQ2gPOGFGAD8roJgF0t+qkx6jorgApElwE4aQwxZp6n3YNxsPyzA7yst/4iSdvEMFqaHUCjKZEZ91IgAeolWzotFEiAkoWQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnT+H0jPT81J3xWWAAAAAElFTkSuQmCC",check:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAOCAYAAAAi2ky3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACtSURBVHgBvdPdDcIgEAfwoy8Nb45QN3AGF2s36Ahu4gpuIDoBfSgfpdoTlCbEWEMh6T8hFzjyg5AAkBHOcQe5UWqspRx435sDpMYj6IYQwwVSEiJ2MKVUBWuzLSLl2HL+uxmNCGFO8yaL7RHxve6qRZoAuS4hxac8735elWVx7jrtMKL1o0Gcat9jhExHSukN/kUIFZ7MpDRtzE1isDRkAUtDvrA8ZI597FUf8gWH9P0b4gko9wAAAABJRU5ErkJggg=="},color:{palette:{},white:"0xffffffff",black:"0x000000ff",grey:"0x929096ff",red:"0xe74c3cff",orange:"0xdc7633ff",yellow:"0xf7dc6fff",green:"0x2ecc71ff",blue:"0x93a9fdff",purple:"0x663399ff",overlay:"0x181819b3",material:"0x181819ff",materialNeutral:"0x181819ff",materialNeutralElevated:"0x373639ff",materialInverse:"0xf8f7faff",materialInverseElevated:"0xffffffff",materialBrand:"0x000033ff",materialBrandElevated:"0x242a65ff",textNeutral:"0xf8f7faff",textNeutralSecondary:"0xf8f7fab3",textNeutralTertiary:"0xf8f7fa1a",textNeutralDisabled:"0xf8f7fa80",textInverse:"0x181819ff",textInverseSecondary:"0x181819b3",textInverseTertiary:"0x1818191a",textInverseDisabled:"0x18181980",textBrand:"0x93a9fdff",textBrandSecondary:"0x93a9fdb3",textBrandTertiary:"0x93a9fd1a",textBrandDisabled:"0x93a9fd80",textPositive:"0x2ecc71ff",textNegative:"0xe74c3cff",textInfo:"0x93a9fdff",textCaution:"0xdc7633ff",fillTransparent:"0xffffff0",fillNeutral:"0xf8f7faff",fillNeutralSecondary:"0xf8f7fab3",fillNeutralTertiary:"0xf8f7fa1a",fillNeutralDisabled:"0xf8f7fa80",fillInverse:"0x181819ff",fillInverseSecondary:"0x181819b3",fillInverseTertiary:"0x1818191a",fillInverseDisabled:"0x18181980",fillBrand:"0x93a9fdff",fillBrandSecondary:"0x93a9fdb3",fillBrandTertiary:"0x93a9fd1a",fillBrandDisabled:"0x93a9fd80",fillPositive:"0x2ecc71ff",fillNegative:"0xe74c3cff",fillInfo:"0x93a9fdff",fillCaution:"0xdc7633ff",strokeNeutral:"0xf8f7faff",strokeNeutralSecondary:"0xf8f7fab3",strokeNeutralTertiary:"0xf8f7fa1a",strokeNeutralDisabled:"0xf8f7fa80",strokeInverse:"0x181819ff",strokeInverseSecondary:"0x181819b3",strokeInverseTertiary:"0x1818191a",strokeInverseDisabled:"0x18181980",strokeBrand:"0x93a9fdff",strokeBrandSecondary:"0x93a9fdb3",strokeBrandTertiary:"0x93a9fd1a",strokeBrandDisabled:"0x93a9fd80",strokePositive:"0x2ecc71ff",strokeNegative:"0xe74c3cff",strokeInfo:"0x93a9fdff",strokeCaution:"0xdc7633ff",interactiveNeutral:"0xffffff1a",interactiveNeutralFocus:"0xffffffff",interactiveNeutralFocusSoft:"0xffffff1a",interactiveInverse:"0x48474b1a",interactiveInverseFocus:"0x48474bff",interactiveInverseFocusSoft:"0x48474b1a",interactiveBrand:"0xbecffe1a",interactiveBrandFocus:"0xbecffeff",interactiveBrandFocusSoft:"0xbecffe1a",shadowNeutral:"0x000000b3",shadowNeutralFocus:"0x000000b3",shadowNeutralFocusSoft:"0x000000b3",shadowNeutralText:"0x000000ff",shadowInverse:"0x000000b3",shadowInverseFocus:"0x000000b3",shadowInverseFocusSoft:"0x000000b3",shadowInverseText:"0x000000ff",shadowBrand:"0x000000b3",shadowBrandFocus:"0x000000b3",shadowBrandFocusSoft:"0x000000b3",shadowBrandText:"0x000000ff"},font:[],layout:{columnCount:10,focusScale:1.2,gutterX:20,gutterY:20,marginX:150,marginY:150,safe:50,screenW:1920,screenH:1080},radius:{none:0,xs:2,sm:4,md:8,lg:16,xl:24},spacer:{none:0,xxs:2,xs:4,sm:8,md:10,lg:20,xl:30,xxl:40,xxxl:50},stroke:{none:0,sm:2,md:4,lg:6,xl:8},typography:{display1:{fontFamily:"Arial",fontSize:75,lineHeight:85,fontWeight:500,verticalAlign:"middle",textBaseline:"bottom"},display2:{fontFamily:"Arial",fontSize:50,lineHeight:60,fontWeight:500,verticalAlign:"middle",textBaseline:"bottom"},display3:{fontFamily:"Arial",fontSize:56,fontWeight:400,lineHeight:68,verticalAlign:"middle",textBaseline:"bottom"},display4:{fontFamily:"Arial",fontSize:48,fontWeight:400,lineHeight:64,verticalAlign:"middle",textBaseline:"bottom"},headline1:{fontFamily:"Arial",fontSize:35,fontWeight:500,lineHeight:48,verticalAlign:"middle",textBaseline:"bottom"},headline2:{fontFamily:"Arial",fontSize:30,fontWeight:500,lineHeight:40,verticalAlign:"middle",textBaseline:"bottom"},headline3:{fontFamily:"Arial",fontSize:25,fontWeight:500,lineHeight:36,verticalAlign:"middle",textBaseline:"bottom"},body1:{fontFamily:"Arial",fontSize:25,fontWeight:300,lineHeight:40,verticalAlign:"middle",textBaseline:"bottom"},body2:{fontFamily:"Arial",fontSize:22,fontWeight:300,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},body3:{fontFamily:"Arial",fontSize:20,fontWeight:300,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},button1:{fontFamily:"Arial",fontSize:25,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},button2:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},callout1:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},caption1:{fontFamily:"Arial",fontSize:15,fontWeight:500,lineHeight:24,verticalAlign:"middle",textBaseline:"bottom"},tag1:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:24,verticalAlign:"middle",textBaseline:"bottom"},footnote1:{fontFamily:"Arial",fontSize:22,fontWeight:300,lineHeight:30,verticalAlign:"middle",textBaseline:"bottom"},subtitle1:{fontFamily:"Arial",fontSize:32,fontWeight:400,lineHeight:36,verticalAlign:"middle",textBaseline:"bottom"},subtitle2:{fontFamily:"Arial",fontSize:28,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},navigation:{fontFamily:"Arial",fontSize:28,fontWeight:400,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"}},componentConfig:{Keyboard:{base:{keyProps:{delete:{title:null,icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAAAXNSR0IArs4c6QAACmpJREFUeF7tnVmoZUcVhv/feY4gBEVEH/KgCCZxCK2itNo4xQQH+kUN0TjEiDGKKBqnaExwBjUaR6KY+NQgiQkOMSYhYEScIopGJOqDE2hHjfP0y4p1Oqdv33v2qr32Prv2Paug6Ye7Vu2qv75TtWvtGohMqUBAAQZ80zUVQAKUEIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypfPsAJJ0NYC92XRHKPB3AAfLv18BuBLAFSR/NKZWswJI0vkA3jCmILsw75sAvIfkR8eo22wAknQSgMvGEGFD8vwxgFeQvGrI+s4CIEnHAPgugHsMWfkNzevDAM4i+Z8h6t88QJLuXOB5yBAVzjxuVeBaAM8ieXNUjzkAdAmA50Yrmv5HKPATACeQ/GNEm6YBkvRyANblZhpHAXsfekpkOGsWIEmPAHA9gDuOo13mWhS4gOSZfdVoEiBJ9wFwA4D7961Y+lUpsK/v7KxVgL4K4ElOCS4l+Uyn7a41k3Q0gMcC2ANgH4CHV1T2OyStx69OzQEk6TwAZztr8lMAx5P8s9N+Y8wk2cTjfQDu66z080h+zml7yKwpgCSdCOByZyX+BuBRJH/otN84M0kWN/s0gOc4Kv8Nko922B1m0gxAkh4I4AcVwcL9JA/UVnjT7CXdHYD9yEzfVUkAjib5uxqNmgCoBAu/CeBhzsJ/kORZTtuNN5Nk70bXAZ0Hy59G8qIawVoB6LMAnu8suE3tH0/y3077NAMg6esAuoaoC0la7M2dJgdI0ssAXOgs8W8BHEvS/s9UoYCkdwN4bYfL5STto7U7TQpQZbDQehzreawHylSpgKSTAVza4XYDyeNqsp4MoB7BwteQfH9N5dL2NgWK3l0vyAdJWhDXnSYBSNLtANh3GO/KwgMk97trlYbbKiDJPpzea5U8JKuYqDIeql0kvQPAG5352ZLMR5L8q9M+zXZQYFcAJOnJAL7sbGWLMFuk2SLOmYIKzB6gEiz8HoB7O7U4meQXnLZp1qGApD8BuOcsh7AewcL3kuyadg4OjSSbhRxH0j4BjJok2Ufga0j+YdQHlcznDlBNsPAa+xpP8r/rEHbxjAKPbRuyHvKFY0Ik6QUALOprPfIT1gHRbAGSdDoA77aSX5Zg4e8nhGfx6FEgWoJn8Zy1QCTplq5vjc3NwnoEC/eQ/HYD8IwC0TbwrA2i2QHUI1h4JskLGoJnUIhWwLMWiGYFkCSLMX2t5WDhlneeLm5Dw5kDntEhkmRhEVvesWNqZgiTdC6AN3W1Svn72oOFkuxF+WcVIQUrai+IKuA5BBHJ453auc1mA1AJFn7Jsf7EKj9ZsLBHw1ZDtI5neAmaBUBzCxaO2cBj5u2FZtlO0l8A3K3ZIaxHsPB8kt5vYn00c/mM0dBj5OmqzAqjOQDUfLBwJ32HbPAh84pCM5seSNJLAHzcWeFJgoVdZRui4YfIo6ucff8uyVY03LW5IawyWPgvW5u77mChV/QIABFfb/kidk0CVKbDth3Huw35dJLeniqiV2/fniDYx1f7vlWTeoUFah6wZQhrqwcqwUKbrtsaH0+6mOQpHsOpbXpCVFPstcJjBZNkmzHv0swQJultAN7iVO375TyafzjtJzcbEaK1w9McQJXBQlvvYmtsfjE5FZUFGAGiSeBpCqDKYKFtmX0qya9Utl0z5gNCNBk8BSA7CtiODNwxjf4trEew8BySNtTNOg0A0aTwtARQTbDQeh3rfawXmn0KQDQ5PC0B9EkAL3LSkAD9X6hWALIJzJ3mNoSdS9I7U3NyuX6zQO+zKOzkEEmaHqDSFdpZM97tOfkSfRvvk0LUDEAFIgseetf85DS+AYgk/bPr1NvRZ2HLg4ektwI4xzmgZCBxYohaBMjWPeenDOcvaIvZ2oez5gAqQ5mtLbb3oa4z+Bb6nTHW1UP92vFIr54vzJ8BcGplGdYKkSRbCXGHSWdh2z1ckp1taGccroxyFt9cznG4iGuDqFmASk9kZxxakNGTckHZBBA1DVCB6BMAXuwhyA4VmGL/+05l6zlsbdt7DJmXU0uXmSQ7JvD2zQ1hiwJJsotRvlVxXO87SU5+heUYDT5Gni5KVhg1D1DphWqCjOYy6RlAYzb0mHn3gWkWABWIaoKMubHwSBpGebGWZNdc2vmUO6a1BhJXFUSSff/yLuOYamvzzwEcVfFr7tWwPXqi6uN2PXWYG0C1Qca1n8RaDlewl3kPRL3gWXo/XBwo1dXWdk/a3jEOnJoVQGUoqw0yvpLkh7oUHvLvTohC8FRANBo8pT3sxLeVJ/M2M4QtiVYTZJzkNPoOiAaBxwHRqPDMFqBS8Jog4yT3YewA0aDwrIBodHhmDVApvG0mtO3PnjTJjTxbIBoFnm0gWgs8pQ06lxY3N4QtCWZBRgPDezdnHvPr+alV2EiaL0DlF2Dbn20bdB40XtHwQ5nOHqAC0SyCjEM1Wkv57AqACkRvBvB2p7hrDzI6yzU7s90EUPNBxtnR4SjwrgGo9EK1Qca8cM4ByU4mkuz++F93ZHELyZX3iW31n+S+sKWZWfNBxkCbNeUq6ekArugo1I0kH1xT8EkBKj1R80HGGkFbtZVkZ3bb2d2r0tUkn1hTh8kBKhB9DMBLnQWfJMjoLFuTZpJsO/ONAB7UUcBLSHqvX781q1YAqg0yfoDkq5psrQYLJeldAF7nKFr1x+wmACq9kAUZLazvvTV4P8kDDlE22kTSQ4uuK9dCF5HuR/I3NYI1A1CBaB+AK50VsAMj7TJeixNl2kYBSccCsB/ZMQ6Brif5GIfdYSZNAVQg8rzsLSphl/Hapby2LDZTUaBcq/56ALb1fOVxLkuinULy4loRmwOoQGQX7T7DWZnPk3y203bXmkl6AIA91isDOBGADV3e1HsJbasA1QYZvUKl3fYKPI2knXFQnZoEqPRCNUHG6oqnwyEFLiJ5Wl89mgWoQFQTZOyrwSb7WUztcSRtu0+v1DRABaKPADijV+3SaZUCNgE5geTNEZnmAFBtkDGix6b4Xld2BNvJcaHUPEClF6oNMoZE2eXOtm3q1ZFha1mfWQBUINoL4Kqurbm7vPEj1bOAqx3udW0kk62+swGoQHQ2gPOGFGAD8roJgF0t+qkx6jorgApElwE4aQwxZp6n3YNxsPyzA7yst/4iSdvEMFqaHUCjKZEZ91IgAeolWzotFEiAkoWQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnT+H0jPT81J3xWWAAAAAElFTkSuQmCC"}}}}}});function _o(){var e,t,r,i=0,n={duration:750,easing:"ease-in-out"},o={alpha:1,color:4294967295};return Yr(Zr(Ao,(o=>{!function(o){o.startsWith("#")?(e.color=Ni(o),e.src="",e.alpha=1,i=1,t.alpha=0,r.alpha=0):(e.color=4294967295,r.alpha=1,0===i?(e.src=o,i=1):1===i?(t.src=o,i=2,t.alpha=0,t.animate({alpha:1},n).start(),e.animate({alpha:0},n).start()):2===i&&(e.src=o,i=1,e.alpha=0,e.animate({alpha:1},n).start(),t.animate({alpha:0},n).start()))}(o)}),{defer:!0})),Xi(qi,{width:1920,height:1080,zIndex:-5,get children(){return[Xi(qi,{ref(t){"function"==typeof e?e(t):e=t},style:o}),Xi(qi,{ref(e){"function"==typeof t?t(e):t=e},style:o,alpha:0}),Xi(qi,{ref(e){"function"==typeof r?r(e):r=e},src:"./assets/hero-mask-inverted.png",get color(){return Ni(So.color.materialBrand)},width:1920,height:1080})]}})}function Co(e){if(!e||!e[Symbol.iterator])throw new Error("objectFromEntries requires a single iterable argument");var t,r={},i=E(e);try{for(i.s();!(t=i.n()).done;){var n=C(t.value,2),o=n[0],a=n[1];r[o]=a}}catch(s){i.e(s)}finally{i.f()}return r}var Ro=["focus","disabled"],Eo=["brand","inverse","neutral"];function Io({themeKeys:e,base:t,modes:r={},tones:i={},themeStyles:n,modeKeys:o=Ro,toneKeys:a=Eo},s=!1){var l=t=>Co(Object.entries(e).filter((([e,r])=>t[r])).map((([e,r])=>[e,t[r]])));return((e,t,r)=>{var i=(e=>{var t=Co(Object.entries(e).map((([e,t])=>{var r=l(t);return Object.entries(t).filter((([e,t])=>o.includes(e))).forEach((([e,t])=>{r[e]=l(t)})),[e,r]})));return t})(n);s&&console.log(i);var d=((e,t)=>_(_({},e),t.base))(e,i);s&&console.log(d);var h=((e,t)=>Co(o.map((r=>[r,_(_({},null==e?void 0:e[r]),null==t?void 0:t[r])]))))(t,i);s&&console.log(h);var u=((e,t,r)=>{var i=a.map((i=>{var n,a,s={};return new Set([].concat.apply([],[null!==(n=null==e?void 0:e[i])&&void 0!==n?n:{},null!==(a=null==t?void 0:t[i])&&void 0!==a?a:{}].map(Object.keys))).forEach((r=>{var n,a,l;o.includes(r)||(s[r]=null!==(n=null==t||null===(a=t[i])||void 0===a?void 0:a[r])&&void 0!==n?n:null==e||null===(l=e[i])||void 0===l?void 0:l[r])})),o.forEach((n=>{var o,a;s[n]=_(_(_({},r[n]),null==e||null===(o=e[i])||void 0===o?void 0:o[n]),null==t||null===(a=t[i])||void 0===a?void 0:a[n])})),[i,s]}));return Co(i)})(r,i,h);return s&&console.log(u),{base:_(_({},d),h),tones:u}})(t,r,i)}function Bo(e=0){return(t,r,i=0,n)=>{var o,a,s;if(t.children.length){var l="row"===t.flexDirection,d=l?"width":"height",h=l?"x":"y",u=t.gap||0,c=t.scroll||"auto",f=function(e){var t,r;if("row"===e.flexDirection){var i,n,o;t={position:null!==(i=e.children[e.children.length-1].x)&&void 0!==i?i:0,size:null!==(n=e.children[e.children.length-1].width)&&void 0!==n?n:0},r=null!==(o=e.width)&&void 0!==o?o:0}else{var a,s,l;t={position:null!==(a=e.children[e.children.length-1].y)&&void 0!==a?a:0,size:null!==(s=e.children[e.children.length-1].height)&&void 0!==s?s:0},r=null!==(l=e.height)&&void 0!==l?l:0}return[t,r]}(t),p=C(f,2),v=p[0],g=p[1],m=null!==(o=t[h])&&void 0!==o?o:0,x=null!==(a=null==r?void 0:r[h])&&void 0!==a?a:0,y=null!==(s=null==r?void 0:r[d])&&void 0!==s?s:0,b=void 0===n?"none":i>n?"incremental":"decremental",w=m,A=(e,t)=>Math.abs(m)+g<e+t;if("auto"===c)null!=t.scrollIndex&&t.scrollIndex>=0?t.selected>=t.scrollIndex?w="incremental"===b?m-y-u:m+y+u:"decremental"===b&&t.selected===t.scrollIndex-1&&(w=m+y+u):(A(v.position,v.size)||x<Math.abs(m))&&(w=-x+e);else if("always"===c||"edge"===c&&"decremental"===b&&Math.abs(m)>x)w=-x+e;else if("edge"===c&&"incremental"===b&&A(x,y))w=m-y-u;else if("edge"===c&&"none"===b){for(var T=0;T<t.children.length&&A(x,y);){var S,_=null!==(S=t.children[T++][d])&&void 0!==S?S:0;m-=_+u}w=m}t[h]!==w&&(t[h]=w)}}}function ko(...e){var t=e.filter((e=>"function"==typeof e));if(0!==t.length)return 1===t.length?t[0]:function(...e){var r,i,n=E(t);try{for(n.s();!(i=n.n()).done;){if(!0===(r=i.value.apply(this,e)))return r}}catch(o){n.e(o)}finally{n.f()}return r}}function Mo(){if(!this||void 0===this.selected||0===this.children.length)return!1;for(var e=this.children[this.selected];null!==(t=e)&&void 0!==t&&t.skipFocus;){var t;this.selected++,e=this.children[this.selected]}return e instanceof mr&&(e.setFocus(),!0)}function Fo(e){return function(){var t,r=this.children.length,i=this.wrap,n=this.selected||0;if(0===r)return!1;if("right"===e||"down"===e)do{var o;if(this.selected=(this.selected||0)%r+1,this.selected>=r){if(!i){this.selected=void 0;break}this.selected=0}}while(null!==(o=this.children[this.selected])&&void 0!==o&&o.skipFocus);else if("left"===e||"up"===e)do{var a;if(this.selected=(this.selected||0)%r-1,this.selected<0){if(!i){this.selected=void 0;break}this.selected=r-1}}while(null!==(a=this.children[this.selected])&&void 0!==a&&a.skipFocus);if(void 0===this.selected&&(this.selected=n,null!==(t=this.children[this.selected])&&void 0!==t&&t.states.has("focus")))return!1;var s=this.children[this.selected];if(this.onSelectedChanged&&this.onSelectedChanged.call(this,this,s,this.selected,n),this.plinko&&void 0!==n){var l=this.children[n].selected||0;s.selected=l<s.children.length?l:s.children.length-1}return s.setFocus(),!0}}function Lo(e,t){var r,i,n,o,a=t();if(Array.isArray(a))if(2===a.length)r=o=a[0],i=n=a[1];else if(3===a.length)r=a[0],i=n=a[1],o=a[2];else{var s=C(a,4);r=s[0],n=s[1],o=s[2],i=s[3]}else r=n=o=i=a;e.onBeforeLayout=(t,a)=>{if(a){e.width=e.children.reduce(((e,t)=>e+(t.width||0)),0)+i+n;var s=e.children[0];s&&(s.x=i,s.marginLeft=i);var l=0;return e.children.forEach((e=>{e.y=r,e.marginTop=r,l=Math.max(l,e.height||0)})),e.height=l+r+o,!0}}}var Po=(null==So?void 0:So.componentConfig).Artwork,No=void 0===Po?{themeStyles:{}}:Po,Uo=(No.defaultTone,b(No,e));Io({themeKeys:{fallbackSrc:"fallbackSrc",fillColor:"fillColor",scale:"imageScale",pivotX:"imageScalePivotX",pivotY:"imageScalePivotY",borderRadius:"radius"},base:{fallbackSrc:void 0,fillColor:So.color.overlay,gradientColor:So.color.material,pivotX:.5,pivotY:.5,scale:void 0,borderRadius:So.radius.md},themeStyles:Uo});var Do=So.componentConfig.Badge,Oo=void 0===Do?{themeStyles:{}}:Do,zo=(Oo.defaultTone,b(Oo,t)),Wo={themeKeys:{color:"backgroundColor",borderRadius:"radius",gap:"contentSpacing"},base:{color:So.color.fillInverseSecondary,borderRadius:So.radius.sm,border:{color:So.color.strokeInverse,width:So.stroke.sm},gap:So.spacer.xs,display:"flex",justifyContent:"spaceEvenly",padding:[So.spacer.md-So.stroke.sm,So.spacer.xs+So.stroke.sm,So.spacer.md+So.stroke.sm,So.spacer.md+So.stroke.sm]},tones:{inverse:{color:So.color.fillNeutralSecondary,borderRadius:So.radius.sm,border:{color:So.color.strokeInverseSecondary,width:So.stroke.sm}},brand:{color:So.color.fillBrand,borderRadius:So.radius.sm,border:{color:So.color.strokeInverseSecondary,width:So.stroke.sm}}},themeStyles:zo},Go={themeKeys:{color:"textColor"},base:_(_({},So.typography.tag1),{},{color:So.color.textNeutral}),tones:{inverse:{color:So.color.textInverse},brand:{color:So.color.textNeutral}},themeStyles:zo},Ho={themeKeys:{color:"iconColor"},base:{color:So.color.textNeutral},tones:{inverse:{color:So.color.textInverse},brand:{color:So.color.textNeutral}},themeStyles:zo};Io(Wo),Io(Ho),Io(Go);var Xo=(null==So?void 0:So.componentConfig).Button,Vo=void 0===Xo?{buttonThemeStyles:{}}:Xo,Yo=Vo.defaultTone,jo=b(Vo,r),Qo=(null==So?void 0:So.componentConfig).Surface,Ko=void 0===Qo?{surfaceThemeStyles:{}}:Qo,$o=Ko.surfaceDefaultTone,qo=b(Ko,i),Zo=_(_({},jo),qo),Jo={themeKeys:{borderRadius:"radius",color:"backgroundColor",justifyContent:"justify",itemSpacing:"contentSpacing"},base:{height:So.typography.button1.lineHeight+2*So.spacer.xl,display:"flex",padding:[So.spacer.xxxl,So.spacer.xl],color:So.color.interactiveNeutral,justifyContent:"center",alignItems:"center",flexBoundary:"fixed",borderRadius:So.radius.sm,contentColor:So.color.fillNeutral},modes:{focus:{color:So.color.interactiveNeutralFocus,contentColor:So.color.fillInverse},disabled:{color:So.color.fillNeutralDisabled}},tones:{inverse:{color:So.color.interactiveInverse},brand:{color:So.color.interactiveBrand,focus:{color:So.color.fillNeutral}}},themeStyles:Zo},ea={themeKeys:{color:"contentColor"},base:{color:So.color.textNeutral},modes:{focus:{color:So.color.textInverse},disabled:{color:So.color.textNeutralDisabled}},tones:{inverse:{color:So.color.fillNeutral},brand:{color:So.color.fillBrand,focus:{color:So.color.fillBrand}}},themeStyles:Zo},ta={themeKeys:{color:"textColor"},base:_(_({color:So.color.textNeutral},So.typography.button1),{},{textAlign:"center",contain:"none"}),modes:{focus:{color:So.color.textInverse},disabled:{color:So.color.textNeutralDisabled}},tones:{inverse:{color:So.color.fillNeutral},brand:{color:So.color.fillBrand,focus:{color:So.color.fillBrand}}},themeStyles:Zo},ra=Io(Jo),ia=Io(ea),na=Io(ta),oa=(A("z",{tone:Yo||$o||"neutral",Container:ra,Content:ia,Text:na}),(null==So?void 0:So.componentConfig).Checkbox),aa=void 0===oa?{themeStyles:{}}:oa,sa=(aa.defaultTone,b(aa,n)),la={themeKeys:{color:"backgroundColor",borderRadius:"radius",border:"border",justifyContent:"justifyContent"},base:{width:So.spacer.xxl,height:So.spacer.xxl,display:"flex",justifyContent:"center",color:So.color.fillNeutral,alignItems:"center",borderRadius:So.spacer.xxl/4,border:{color:So.color.strokeInverse,width:So.stroke.sm}},modes:{disabled:{alpha:So.alpha.inactive}},tones:{brand:{borderRadius:So.spacer.xxl/4,border:{color:So.color.strokeNeutralSecondary,width:So.stroke.sm},color:So.color.fillNeutralSecondary,checked:{borderRadius:So.spacer.xxl/4,border:{color:So.color.strokeNeutralSecondary,width:So.stroke.sm},color:So.color.fillBrand}},neutral:{borderRadius:So.spacer.xxl/4,border:{color:So.color.strokeNeutralSecondary,width:So.stroke.sm},color:So.color.fillInverseSecondary,checked:{borderRadius:So.spacer.xxl/4,border:{color:So.color.strokeNeutralSecondary,width:So.stroke.sm},color:So.color.fillNeutral}},inverse:{borderRadius:So.spacer.xxl/4,border:{color:So.color.strokeInverseSecondary,width:So.stroke.sm},color:So.color.fillNeutralSecondary,checked:{borderRadius:So.spacer.xxl/4,border:{color:So.color.strokeInverseSecondary,width:So.stroke.sm},color:So.color.fillInverse}}},modeKeys:["focus","disabled","checked"],themeStyles:sa},da={themeKeys:{width:"checkWidth",height:"checkHeight"},base:{width:So.spacer.lg,height:So.spacer.lg,src:So.asset.check},tones:{neutral:{color:So.color.fillInverse},inverse:{color:So.color.fillNeutral},brand:{color:So.color.fillInverse}},themeStyles:sa};Io(la),Io(da);var ha=(null==So?void 0:So.componentConfig).Icon,ua=void 0===ha?{themeStyles:{}}:ha,ca=(ua.defaultTone,b(ua,o));Io({themeKeys:{color:"color"},base:{width:100,height:100,color:So.color.fillNeutral},tones:{inverse:{color:So.color.fillInverse},brand:{color:So.color.fillBrand}},themeStyles:ca});var fa=(null==So?void 0:So.componentConfig).Column,pa=void 0===fa?{themeStyles:{}}:fa,va=pa.defaultTone,ga=b(pa,a),ma={tone:va||"neutral",Container:Io({themeKeys:{gap:"itemSpacing",scrollIndex:"scrollIndex",transition:"itemTransition"},base:{display:"flex",flexBoundary:"fixed",flexDirection:"column",gap:So.layout.gutterY,transition:_(_({},So.animation.standardEntrance),{},{duration:So.animation.duration.fast})},themeStyles:ga})},xa=e=>Xi(qi,e),ya=A("C",(e=>{var t=Fo("up"),r=Fo("down");return Xi(xa,Ki(e,{get onUp(){return ko(e.onUp,t)},get onDown(){return ko(e.onDown,r)},get selected(){return e.selected||0},forwardFocus:Mo,get onCreate(){return ko((t=>{var r,i;return Bo(e.y).call(t,t,t.children[null!==(r=e.selected)&&void 0!==r?r:0],null!==(i=e.selected)&&void 0!==i?i:0,void 0)}),e.onLayout)},get onSelectedChanged(){return ko(e.onSelectedChanged,"none"!==e.scroll?Bo(e.y):void 0)},get style(){var t;return[e.style,ma.Container.tones[null!==(t=e.tone)&&void 0!==t?t:ma.tone],ma.Container.base]}}))})),ba=(null==So?void 0:So.componentConfig).Input,wa=void 0===ba?{themeStyles:{}}:ba,Aa=(wa.defaultTone,b(wa,s)),Ta={themeKeys:{borderRadius:"radius",color:"backgroundColor",justifyContent:"justify"},base:{width:function(e=1){var t=So.layout.screenW,r=So.layout.columnCount,i=So.layout.marginX,n=So.layout.gutterX;return(e<1||e>r)&&(console.error(`getWidthByUpCount expects an upCount between 1 & ${r}, received ${e}. Defaulting to upCount 1.`),e=1),(t-2*i-(e-1)*n)/e}(4),height:100,display:"flex",flexDirection:"column",padding:[So.spacer.xxxl,So.spacer.xl],color:So.color.interactiveNeutral,contentColor:So.color.fillInverse,borderRadius:So.radius.sm,marginX:So.spacer.xxxl,actualTitle:""},themeStyles:Aa},Sa={themeKeys:{color:"textColor"},base:_({textAlign:"left",color:So.color.textNeutral},So.typography.button1),themeStyles:Aa};Io(Ta),Io(Sa);var _a=(null==So?void 0:So.componentConfig).Key,Ca=void 0===_a?{themeStyles:{}}:_a,Ra=(Ca.defaultTone,b(Ca,l)),Ea={themeKeys:{keySpacing:"keySpacing",borderRadius:"borderRadius",color:"backgroundColor",justifyContent:"justify",baseWidth:"baseWidth",sizes:"sizes",contentColor:"contentColor"},base:{keySpacing:So.spacer.md,height:9*So.spacer.md,paddingX:So.spacer.md,contentColor:So.color.fillNeutral,sizes:{sm:1,md:2,lg:3,xl:4,xxl:5},padding:[So.spacer.md],baseWidth:7*So.spacer.md,color:So.color.interactiveNeutral,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:So.radius.sm},modes:{focus:{color:So.color.interactiveNeutralFocus,contentColor:So.color.fillInverse},disabled:{color:So.color.fillNeutralDisabled,contentColor:So.color.fillNeutralDisabled}},tones:{inverse:{color:So.color.interactiveInverse,focus:{color:So.color.interactiveInverseFocus,contentColor:So.color.fillNeutral}},brand:{focus:{contentColor:So.color.fillNeutral}}},themeStyles:Ra},Ia={themeKeys:{color:"textColor"},base:_(_({color:So.color.textNeutral},So.typography.headline2),{},{textAlign:"center",contain:"none"}),modes:{focus:{color:So.color.textInverse},disabled:{color:So.color.textNeutralDisabled}},tones:{inverse:{focus:{color:So.color.textNeutral}}},themeStyles:Ra};Io(Ea),Io(Ia);var Ba=(null==So?void 0:So.componentConfig).Keyboard,ka=void 0===Ba?{}:Ba,Ma=(ka.defaultTone,b(ka,d)),Fa=(null==So?void 0:So.componentConfig).Key,La=void 0===Fa?{}:Fa,Pa=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(La),La)),Na={themeKeys:{gap:"keySpacing",width:"screenW",marginX:"marginX",keyHeight:"keyHeight"},base:{gap:So.spacer.md,width:So.layout.screenW,display:"flex",marginX:So.layout.marginX,keyHeight:100,flexBoundary:"contain"},themeStyles:Ma},Ua={themeKeys:{gap:"keySpacing",borderRadius:"borderRadius",color:"backgroundColor",justifyContent:"justify",baseWidth:"baseWidth",sizes:"sizes",contentColor:"contentColor"},base:{gap:So.spacer.md,height:9*So.spacer.md,sizes:{sm:1,md:2,lg:3,xl:4,xxl:5},contentColor:So.color.fillNeutral,padding:[So.spacer.xxxl,So.spacer.xl],baseWidth:7*So.spacer.md,color:So.color.interactiveNeutral,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:So.radius.sm},modes:{focus:{color:So.color.interactiveNeutralFocus,contentColor:So.color.fillInverse},disabled:{color:So.color.fillNeutralDisabled,contentColor:So.color.fillNeutralDisabled}},tones:{inverse:{color:So.color.interactiveInverse,focus:{color:So.color.interactiveInverseFocus,contentColor:So.color.fillNeutral}},brand:{focus:{contentColor:So.color.fillNeutral}}},themeStyles:Pa},Da={themeKeys:{color:"textColor"},base:_({color:So.color.textNeutral},So.typography.headline2),modes:{focus:{color:So.color.textInverse},disabled:{color:So.color.textNeutralDisabled}},tones:{inverse:{focus:{color:So.color.textNeutral}}},themeStyles:Ma};Io(Na),Io(Ua),Io(Da);var Oa=(null==So?void 0:So.componentConfig).Row,za=void 0===Oa?{themeStyles:{}}:Oa,Wa=za.defaultTone,Ga=b(za,h),Ha={tone:Wa,Container:Io({themeKeys:{gap:"itemSpacing",scrollIndex:"scrollIndex",transition:"itemTransition"},base:{display:"flex",flexBoundary:"fixed",flexDirection:"row",gap:So.layout.gutterX,transition:_(_({},So.animation.standardEntrance),{},{duration:So.animation.duration.fast})},themeStyles:Ga})},Xa=A("R",(e=>{var t=Fo("left"),r=Fo("right");return Xi(qi,Ki(e,{get selected(){return e.selected||0},get onLeft(){return ko(e.onLeft,t)},get onRight(){return ko(e.onRight,r)},forwardFocus:Mo,get onLayout(){return ko((t=>Bo(e.x).call(t,t,t.children[t.selected],t.selected,void 0)),e.onLayout)},get onSelectedChanged(){return ko(e.onSelectedChanged,"none"!==e.scroll?Bo(e.x):void 0)},get style(){var t;return[e.style,Ha.Container.tones[null!==(t=e.tone)&&void 0!==t?t:Ha.tone],Ha.Container.base]}}))})),Va=(null==So?void 0:So.componentConfig).Label,Ya=void 0===Va?{themeStyles:{}}:Va,ja=(Ya.defaultTone,b(Ya,u)),Qa={themeKeys:{color:"backgroundColor",borderRadius:"radius"},base:{display:"flex",justifyContent:"center",color:So.color.textNeutral,padding:[So.spacer.md,So.spacer.lg],borderRadius:[So.radius.md,So.radius.md,So.radius.md,So.radius.none],height:So.typography.caption1.lineHeight+So.spacer.md,neutral:{backgroundColor:So.color.fillNeutral}},tones:{inverse:{color:So.color.fillInverse},brand:{color:So.color.fillBrand,focus:{color:So.color.orange}}},themeStyles:ja},Ka={themeKeys:{color:"textColor"},base:_(_({},So.typography.caption1),{},{color:So.color.textInverse}),tones:{inverse:{color:So.color.textNeutral},brand:{color:So.color.textNeutral}},themeStyles:ja};Io(Qa),Io(Ka);var $a=(null==So?void 0:So.componentConfig).Details,qa=void 0===$a?{themeStyles:{}}:$a,Za=(qa.defaultTone,b(qa,c)),Ja={themeKeys:{alignItems:"alignItems",gap:"contentSpacing",badgeContentSpacing:"badgeContentSpacing",ratingContentSpacing:"ratingContentSpacing"},base:{display:"flex",flexDirection:"row",alignItems:"center",gap:So.spacer.sm,flexBoundary:"contain",badgeContentSpacing:So.spacer.sm,ratingContentSpacing:So.spacer.sm},themeStyles:Za},es={themeKeys:{color:"textColor"},base:_(_({},So.typography.body2),{},{marginRight:So.spacer.lg,color:So.color.textNeutral}),tones:{neutral:{disabled:{color:So.color.textNeutralDisabled}},inverse:{color:So.color.textInverse,disabled:{color:So.color.textNeutralDisabled}},brand:{color:So.color.textNeutral,disabled:{color:So.color.textNeutralDisabled}}},themeStyles:Za};Io(Ja),Io(es);var ts=(null==So?void 0:So.componentConfig).Rating,rs=void 0===ts?{themeStyles:{}}:ts,is=(rs.defaultTone,b(rs,f)),ns={themeKeys:{justifyContent:"justifyContent",gap:"contentSpacing"},base:{display:"flex",flexDirection:"row",justifyContent:"flexStart",gap:So.spacer.sm,alignItems:"center"},themeStyles:is},os={themeKeys:{color:"textColor"},base:_({color:So.color.textNeutral},So.typography.body2),tones:{neutral:{disabled:{color:So.color.textNeutralDisabled}},inverse:{color:So.color.textInverse,disabled:{color:So.color.textNeutralDisabled}},brand:{color:So.color.textNeutral,disabled:{color:So.color.textNeutralDisabled}}},themeStyles:is},as={themeKeys:{color:"color"},base:{height:So.typography.body2.lineHeight,width:So.typography.body2.lineHeight,color:So.color.fillNeutral,marginRight:So.spacer.sm},themeStyles:is};Io(ns),Io(as),Io(os);var ss=(null==So?void 0:So.componentConfig).Metadata,ls=void 0===ss?{themeStyles:{}}:ss,ds=(ls.defaultTone,b(ls,p)),hs={themeKeys:{justifyContent:"justifyContent",alpha:"alpha"},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart",flexBoundary:"contain",alpha:So.alpha.primary},modes:{disabled:{alpha:So.alpha.inactive}},themeStyles:ds},us={themeKeys:{color:"textColor"},base:_(_({maxLines:1,contain:"width"},So.typography.headline3),{},{color:So.color.textNeutral}),tones:{neutral:{disabled:{color:So.color.textNeutralDisabled}},inverse:{color:So.color.textInverse,disabled:{color:So.color.textNeutralDisabled}},brand:{color:So.color.textNeutral,disabled:{color:So.color.textNeutralDisabled}}},themeStyles:ds},cs={themeKeys:{color:"textColor"},base:_(_({contain:"width",maxLines:2},So.typography.body3),{},{color:So.color.textNeutralSecondary}),tones:{neutral:{disabled:{color:So.color.textNeutralDisabled}},inverse:{color:So.color.textInverseSecondary,disabled:{color:So.color.textNeutralDisabled}},brand:{color:So.color.textNeutralSecondary,disabled:{color:So.color.textNeutralDisabled}}},themeStyles:ds};Io(hs),Io(cs),Io(us);var fs=(null==So?void 0:So.componentConfig).ProgressBar,ps=void 0===fs?{themeStyles:{}}:fs,vs=(ps.defaultTone,b(ps,v)),gs={themeKeys:{color:"barColor",borderRadius:"radius"},base:{height:So.spacer.md,color:So.color.fillNeutralTertiary,borderRadius:So.radius.xs},tones:{inverse:{color:So.color.fillInverseTertiary}},themeStyles:vs},ms={themeKeys:{color:"progressColor",borderRadius:"radius"},base:{borderRadius:So.radius.xs,color:So.color.fillNeutral},tones:{inverse:{color:So.color.fillInverse},brand:{color:So.color.fillBrand}},themeStyles:vs};Io(gs),Io(ms);var xs=(null==So?void 0:So.componentConfig).Radio,ys=void 0===xs?{themeStyles:{}}:xs,bs=(ys.defaultTone,b(ys,g)),ws={themeKeys:{borderRadius:"radius",color:"backgroundColor",colorChecked:"backgroundColorChecked"},base:{color:So.color.fillNeutralSecondary,height:So.spacer.xxl+2*So.stroke.sm,width:So.spacer.xxl+2*So.stroke.sm,borderRadius:So.spacer.xxl/2+So.stroke.sm,border:{color:So.color.strokeNeutralSecondary,width:So.stroke.sm}},tones:{inverse:{border:{color:So.color.strokeInverseSecondary,width:So.stroke.sm}},brand:{border:{color:So.color.fillBrand,width:So.stroke.sm}}},modeKeys:["focus","disabled","checked"],themeStyles:bs},As={themeKeys:{width:"knobWidth",height:"knobHeight",borderRadius:"knobRadius",color:"knobColor",colorChecked:"knobColorChecked"},base:{color:So.color.fillInverse,colorChecked:So.color.fillInverse,width:So.spacer.xxl,height:So.spacer.xxl,borderRadius:So.spacer.xxl/2},tones:{inverse:{color:So.color.fillNeutral}},themeStyles:bs};Io(ws),Io(As);var Ts=(null==So?void 0:So.componentConfig).Tile,Ss=void 0===Ts?{tileThemeStyles:{}}:Ts,_s=(Ss.defaultTone,b(Ss,m)),Cs=(null==So?void 0:So.componentConfig).Surface,Rs=void 0===Cs?{surfaceThemeStyles:{}}:Cs,Es=(Rs.defaultSurfaceTone,b(Rs,x)),Is={themeKeys:{alpha:"alpha",paddingYProgress:"paddingYProgress",paddingYBetweenContent:"paddingYBetweenContent",contentSpacingY:"contentSpacingY",borderRadius:"radius"},base:{width:400,height:240,padding:[40,10],paddingYProgress:So.spacer.xl,paddingYBetweenContent:So.spacer.md,contentSpacingY:So.spacer.md,borderRadius:So.radius.md,alpha:So.alpha.primary},modes:{disabled:{alpha:So.alpha.inactive}},themeStyles:_(_({},Es),_s)},Bs={themeKeys:{},base:{display:"flex",flexDirection:"column",flexBoundary:"contain",mountY:1},themeStyles:_s},ks={themeKeys:{},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart"},themeStyles:_s},Ms={themeKeys:{},base:{width:5*So.spacer.lg,height:So.spacer.xxl+So.spacer.md},themeStyles:_s};Io(Is),Io(Bs),Io(ks),Io(Ms);var Fs=(null==So?void 0:So.componentConfig).Toggle,Ls=void 0===Fs?{themeStyles:{}}:Fs,Ps=(Ls.defaultTone,b(Ls,y)),Ns=So.spacer.xl,Us=So.spacer.xs,Ds=So.stroke.sm,Os={themeKeys:{borderRadius:"strokeRadius",color:"backgroundColor",colorChecked:"backgroundColorChecked"},base:{color:So.color.fillInverseTertiary,colorChecked:So.color.fillNeutral,height:Ns+2*(Us+Ds),width:2*(Ds+2*Us+Ns),borderRadius:Ns/2+Us+Ds,border:{color:So.color.fillNeutral,width:Ds}},modes:{focus:{},disabled:{borderRadius:Ns/2+Us+Ds,border:{color:So.color.fillNeutralDisabled,width:Ds},color:So.color.fillInverseDisabled,colorChecked:So.color.fillNeutralDisabled}},tones:{inverse:{borderRadius:Ns/2+Us+Ds,border:{color:So.color.fillInverse,width:Ds},color:So.color.fillNeutralTertiary,colorChecked:So.color.fillInverse,disabled:{borderRadius:Ns/2+Us+Ds,border:{color:So.color.fillInverseDisabled,width:Ds},color:So.color.fillNeutralDisabled,colorChecked:So.color.fillInverseDisabled}},brand:{borderRadius:Ns/2+Us+Ds,border:{color:So.color.fillBrand,width:Ds},color:So.color.fillBrandTertiary,colorChecked:So.color.fillBrand,disabled:{borderRadius:Ns/2+Us+Ds,border:{color:So.color.fillNeutralDisabled,width:Ds},color:So.color.fillInverseDisabled,colorChecked:So.color.fillNeutralDisabled}}},themeStyles:Ps},zs={themeKeys:{width:"knobWidth",height:"knobHeight",padding:"knobPadding",borderRadius:"knobRadius",color:"knobColor",colorChecked:"knobColorChecked"},base:{color:So.color.fillNeutral,colorChecked:So.color.fillInverse,width:Ns,height:Ns,borderRadius:Ns/2,padding:Us},modes:{focus:{},disabled:{color:So.color.fillNeutralDisabled,colorChecked:So.color.fillInverseDisabled}},tones:{inverse:{color:So.color.fillInverse,colorChecked:So.color.fillNeutral,disabled:{color:So.color.fillInverseDisabled,colorChecked:So.color.fillNeutralDisabled}},brand:{color:So.color.fillBrand,colorChecked:So.color.fillInverse,disabled:{color:So.color.fillNeutralDisabled,colorChecked:So.color.fillInverseDisabled}}},themeStyles:Ps};Io(Os),Io(zs);var Ws={color:255,height:180,width:330,x:1900,y:6,mountX:1,alpha:.8,zIndex:100},Gs={x:10,fontSize:20,textColor:4143380223},Hs={fontSize:22,textColor:4143380223},Xs=C(Hr(0),2),Vs=Xs[0],Ys=Xs[1],js=C(Hr(0),2),Qs=js[0],Ks=js[1],$s=C(Hr(99),2),qs=$s[0],Zs=$s[1],Js=C(Hr(0),2),el=Js[0],tl=Js[1],rl=C(Hr(""),2),il=rl[0],nl=rl[1],ol=C(Hr(""),2),al=ol[0],sl=ol[1],ll=C(Hr(""),2),dl=ll[0],hl=ll[1],ul=C(Hr(""),2),cl=ul[0],fl=ul[1],pl=C(Hr(0),2),vl=pl[0],gl=pl[1],ml=C(Hr(0),2),xl=ml[0],yl=ml[1],bl=0,wl=0,Al=14;function Tl(e){return(e/1024/1024).toFixed(2)+" Mb"}var Sl=0;function _l(e){e.renderer.on("fpsUpdate",((e,t)=>{var r,i,n="number"==typeof t?t:t.fps;n>5&&((e=>{e&&(Ys(e),Zs((t=>Math.min(e,t))),tl((t=>Math.max(e,t))),wl+=e,bl++,Ks(Math.round(wl/bl)))})(n),Sl%10==0&&(r=e.stage,i=r.txMemManager.getMemoryInfo(),nl(Tl(i.criticalThreshold)),sl(Tl(i.targetThreshold)),hl(Tl(i.renderableMemUsed)),fl(Tl(i.memUsed)),gl(i.renderableTexturesLoaded),yl(i.loadedTextures),Sl=0),Sl++)}))}var Cl=e=>Xi(qi,Ki(e,{style:Ws,get children(){return[Xi(qi,{y:6,get children(){return[Xi(Zi,{style:Gs,children:"FPS:"}),Xi(Zi,{style:Hs,x:90,get children(){return Vs().toString()}})]}}),Xi(qi,{y:6,x:160,get children(){return[Xi(Zi,{style:Gs,children:"AVG:"}),Xi(Zi,{style:Hs,x:100,get children(){return Qs().toString()}})]}}),Xi(qi,{x:0,y:26,get children(){return[Xi(Zi,{style:Gs,children:"MIN:"}),Xi(Zi,{style:Hs,x:90,get children(){return qs().toString()}})]}}),Xi(qi,{x:160,y:26,get children(){return[Xi(Zi,{style:Gs,children:"MAX:"}),Xi(Zi,{style:Hs,x:100,get children(){return el().toString()}})]}}),Xi(qi,{display:"flex",flexDirection:"column",y:58,gap:4,get children(){return[Xi(qi,{height:Al,get children(){return[Xi(Zi,{fontSize:Al,style:Gs,children:"criticalThreshold:"}),Xi(Zi,{fontSize:Al,style:Gs,x:230,get children(){return il()}})]}}),Xi(qi,{height:Al,get children(){return[Xi(Zi,{fontSize:Al,style:Gs,children:"targetThreshold:"}),Xi(Zi,{fontSize:Al,style:Gs,x:230,get children(){return al()}})]}}),Xi(qi,{height:Al,get children(){return[Xi(Zi,{fontSize:Al,style:Gs,children:"renderableMemUsed:"}),Xi(Zi,{fontSize:Al,style:Gs,x:230,get children(){return dl()}})]}}),Xi(qi,{height:Al,get children(){return[Xi(Zi,{fontSize:Al,style:Gs,children:"memUsed:"}),Xi(Zi,{fontSize:Al,style:Gs,x:230,get children(){return cl()}})]}}),Xi(qi,{height:Al,get children(){return[Xi(Zi,{fontSize:Al,style:Gs,children:"renderableTexturesLoaded:"}),Xi(Zi,{fontSize:Al,style:Gs,x:230,get children(){return vl()}})]}}),Xi(qi,{height:Al,get children(){return[Xi(Zi,{fontSize:Al,style:Gs,children:"loadedTextures:"}),Xi(Zi,{fontSize:Al,style:Gs,x:230,get children(){return xl()}})]}})]}})]}})),Rl={Column:{flexDirection:"column",display:"flex",width:140,height:600,y:360,gap:20,zIndex:101,transition:{x:{duration:250,easing:"ease-in-out"}},x:8,focus:{width:500,x:So.layout.marginX}},Gradient:{zIndex:99,color:255,src:"./assets/sidenav.png",alpha:0,width:1200,height:1080,focus:{alpha:1},transition:{alpha:!0}},NavButton:{zIndex:102,height:70,width:100,borderRadius:8,focus:{color:1111638783},active:{width:328,height:70}}},El="/solid-demo-app/",Il=[{name:"experiment",width:81,height:100,x:0,y:0},{name:"trending",width:100,height:56,x:81,y:0},{name:"tv",width:100,height:68,x:181,y:0},{name:"movie",width:94,height:100,x:282,y:0}];function Bl(e){var t,r,i,n=(t=El+"assets/icons_white.png",r=Il,i=Zt.createTexture("ImageTexture",{src:t}),r.reduce(((e,t)=>{var r=t.x,n=t.y,o=t.width,a=t.height;return e[t.name]=Zt.createTexture("SubTexture",{texture:i,x:r,y:n,width:o,height:a}),e}),{}));return Xi(qi,Ki(e,{get texture(){return n[e.name]},get width(){return n[e.name].props.width},get height(){return n[e.name].props.height},get x(){return(100-(n[e.name].props.width||0))/2},get y(){return(100-(n[e.name].props.height||0))/2}}))}function kl(e){return Xi(qi,Ki(e,{forwardStates:!0,get style(){return Rl.NavButton},get children(){return[Xi(qi,{y:-16,get children(){return Xi(Bl,{scale:.5,get name(){return e.icon}})}}),Xi(Zi,{style:{fontSize:38,x:116,y:18,height:50,alpha:0,active:{alpha:1}},get children(){return e.children}})]}}))}function Ml(e){var t,r=yn();function i(t){var i,n,o,a;if((i=()=>t,o=bn(),a=jr((()=>pn(i()).map((e=>un(e,void 0,n))))),jr((()=>{var e,t=E(a());try{for(t.s();!(e=t.n()).done;){var r=(0,e.value)(o.pathname);if(r)return r}}catch(i){t.e(i)}finally{t.f()}})))())return e.focusPage();r(t)}return[Xi(qi,{flexItem:!1,width:300,height:150,x:30,y:15,zIndex:105,get alpha(){return e.showWidgets?1:0},get children(){return[Xi(Zi,{x:80,fontSize:28,color:4143380036,children:"Built With:"}),Xi(qi,{y:22,src:"./assets/solidWord.png",width:280,height:52}),Xi(qi,{x:0,y:110,src:"./assets/tmdb.png",width:80,height:41}),Xi(Zi,{x:90,y:110,contain:"width",width:160,fontSize:12,color:4143380036,children:"This product uses the TMDB API but is not endorsed or certified by TMDB."})]}}),Xi(ya,Ki(e,{onFocus:function(){t.states.add("focus"),this.children.forEach((e=>e.states.add("active"))),this.children.selected.setFocus()},onBlur:function(){t.states.remove("focus"),this.selected=0,this.children.forEach((e=>e.states.remove("active")))},get style(){return Rl.Column},scroll:"none",get children(){return[Xi(kl,{onEnter:()=>i("/browse/all"),icon:"trending",children:"Trending"}),Xi(kl,{icon:"movie",onEnter:()=>i("/browse/movie"),children:"Movies"}),Xi(kl,{icon:"tv",onEnter:()=>i("/browse/tv"),children:"TV"}),Xi(kl,{icon:"experiment",onEnter:()=>i("/examples"),children:"Examples"})]}})),Xi(qi,{skipFocus:!0,ref(e){"function"==typeof t?t(e):t=e},get style(){return Rl.Gradient}})]}var Fl=e=>{(e=>{var t=Yn();if(e)for(var r=function(){var e=C(n[i],2),t=e[0],r=e[1];or(r)?r.forEach((e=>{jn[e]=t})):jn[r]=t},i=0,n=Object.entries(e);i<n.length;i++)r();Yr(Zr(Li,((e,t,r=[])=>{for(var i=e,n=[];i;)i.states.has("focus")&&i!==e||(i.states.add("focus"),nr(i.onFocus)&&i.onFocus.call(i,e,t),nr(i.onFocusChanged)&&i.onFocusChanged.call(i,!0,e,t)),n.push(i),i=i.parent;return r.forEach((r=>{n.includes(r)||(r.states.remove("focus"),nr(r.onBlur)&&r.onBlur.call(r,e,t),nr(r.onFocusChanged)&&r.onFocusChanged.call(r,!1,e,t))})),$n(n),n}),{defer:!0})),Yr((()=>{var e=t();if(e){var r=jn[e.key]||jn[e.keyCode];qr((()=>{var t,i=void 0,n=E(Kn());try{for(n.s();!(t=n.n()).done;){var o=t.value;if(i=i||o,r){var a=o[`on${r}`];if(nr(a)&&!0===a.call(o,e,o,i))break}else console.log(`Unhandled key event: ${e.key||e.keyCode}`);if(nr(o.onKeyPress)&&!0===o.onKeyPress.call(o,e,r,o,i))break}}catch(s){n.e(s)}finally{n.f()}return!1}))}}))})({Announcer:["a"],Menu:["m"],Escape:["Escape",27],Backspace:["Backspace",8],Left:["ArrowLeft",37],Right:["ArrowRight",39],Up:["ArrowUp",38],Down:["ArrowDown",40],Enter:["Enter",13]}),bo();var t=(uo.setupTimers(),Yr(Zr(Kn,uo.onFocusChange,{defer:!0})),uo);t.enabled=!1;var r,i,n=yn();function o(){return!r.states.has("focus")&&(i=Li(),r.setFocus())}_l({renderer:Zt});var a=C(Hr(!0),2),s=a[0],l=a[1],d=bn(),h=["/browse","/entity"];return Yr((()=>{var e=d.pathname,t=h.some((t=>e.startsWith(t)));"/"===e&&(t=!0),l(t)})),Xi(qi,{ref(e){var t=window.APP;"function"==typeof t?t(e):window.APP=e},onAnnouncer:()=>t.enabled=!t.enabled,onLast:()=>history.back(),onMenu:()=>n("/"),style:{width:1920,height:1080},onBackspace:o,onLeft:o,onRight:()=>r.states.has("focus")&&i.setFocus(),get children(){return[Xi(_o,{}),Xi(Cl,{mountX:1,x:1910,y:10,get alpha(){return s()?1:0}}),Hi((()=>e.children)),Xi(Ml,{ref(e){"function"==typeof r?r(e):r=e},focusPage:()=>i.setFocus(),get showWidgets(){return s()}})]}})},Ll=A("i",{Page:{width:1920,height:1080},headlineText:{width:1200,height:240,x:360,y:455,contain:"both",fontSize:66,textAlign:"center"},headlineSubText:{width:960,height:170,x:530,y:655,contain:"both",fontSize:48,textAlign:"center"},itemsContainer:{width:So.layout.screenW,height:800,y:560,x:0,zIndex:2},Thumbnail:{borderRadius:16,width:185,height:278,scale:1,zIndex:2,transition:{scale:{duration:250,easing:"ease-in-out"}},border:{width:0,color:0},focus:{scale:1.1,border:{color:4294967142,width:8}}},FocusRing:{borderRadius:16,width:194,height:286,y:-5,x:-5,zIndex:-1},FPS:{color:255,height:42,width:140,x:20,y:20,zIndex:100},FPSLabel:{x:10,y:0,fontSize:36,textColor:4294967295},FPSValue:{x:90,y:0,fontSize:36,textColor:4294967295},showHeadline:{x:70,y:20},headlineBlur:{width:1920,height:150,x:0,y:0,zIndex:14,alpha:.9,color:255},RowTitle:{height:60,width:300,marginBottom:-40,fontSize:36,color:4042322175,zIndex:2},Row:{display:"flex",justifyContent:"spaceBetween",height:300},Column:{display:"flex",flexDirection:"column",justifyContent:"flexStart",flexBoundary:"contain",gap:64,width:So.layout.screenW-2*So.layout.marginX,x:So.layout.marginX+So.layout.gutterX,y:48,transition:{y:{duration:250,easing:"ease-in-out"}},zIndex:2},Rect:{width:250,height:100,y:10,x:300,color:65535},peopleBio:_(_({},So.typography.body1),{},{fontFamily:"Roboto",fontWeight:"normal",contain:"both",width:780,height:340})}),Pl={width:120,height:40,mount:.5,color:179,borderRadius:8,borderBottom:{width:2,color:4278254335},border:{width:2,color:4210752051},focus:{color:4210752255,borderRadius:20,borderBottom:{width:0,color:0}}};A("q",{container:Pl,topBar:{color:10918399,height:8,y:2,x:-4,width:Pl.width+8},text:{fontSize:12,y:12,contain:"width",textAlign:"center",color:4143380991,height:Pl.height,width:Pl.width}}),A("M",{fontSize:32,contain:"width",textAlign:"center",mountY:-.35,color:4294967295,height:136,width:386,focus:{fontSize:40},disabled:{color:2425393407}});function Nl(e){return Xi(qi,Ki(e,{color:16711935,onLoad:function(e){e.color=4294967295},onFail:e=>e.src="failback.png",get style(){return Ll.Thumbnail}}))}function Ul(e){var t=function(e,...t){if(Er in e){var r=new Set(t.length>1?t.flat():t[0]),i=t.map((t=>new Proxy({get:r=>t.includes(r)?e[r]:void 0,has:r=>t.includes(r)&&r in e,keys:()=>t.filter((t=>t in e))},_i)));return i.push(new Proxy({get:t=>r.has(t)?void 0:e[t],has:t=>!r.has(t)&&t in e,keys:()=>Object.keys(e).filter((e=>!r.has(e)))},_i)),i}var n,o={},a=t.map((()=>({}))),s=E(Object.getOwnPropertyNames(e));try{for(s.s();!(n=s.n()).done;){var l,d=n.value,h=Object.getOwnPropertyDescriptor(e,d),u=!h.get&&!h.set&&h.enumerable&&h.writable&&h.configurable,c=!1,f=0,p=E(t);try{for(p.s();!(l=p.n()).done;)l.value.includes(d)&&(c=!0,u?a[f][d]=h.value:Object.defineProperty(a[f],d,h)),++f}catch(v){p.e(v)}finally{p.f()}c||(u?o[d]=h.value:Object.defineProperty(o,d,h))}}catch(v){s.e(v)}finally{s.f()}return[...a,o]}(e,["items"]),r=C(t,2),i=r[0],n=r[1];return Xi(Xa,Ki(n,{get style(){return Ll.Row},get children(){return Xi(ki,{get each(){return i.items},children:e=>Xi(Nl,e)})}}))}var Dl,Ol,zl="https://api.themoviedb.org/3",Wl="w185",Gl={headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIyZDE4YjEwMTA0YjdiZTlkNjFiMWYwYjVlMGEwNzM2OCIsInN1YiI6IjYwZTVjMTdlNGNhNjc2MDA3NTA4Njc3MSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.D_nqH9kd-bhhWzeVsTDPYhHnsUaNAuyAa6YATmKHqsA"}};function Hl(e,t=Wl){return Ol+t+e}function Xl(e,t={}){return fetch(zl+e,_(_({},Gl),t)).then((e=>e.json()))}function Vl(){return Xl("/configuration").then((e=>{var t;return Dl=e,Ol=null===(t=e.images)||void 0===t?void 0:t.secure_base_url,e}))}var Yl=A("A",{get:function(e,t={}){return Dl?Xl(e,t):Vl().then((()=>Xl(e,t)))},loadConfig:Vl});function jl(e=[]){return e.map((e=>{return{src:Hl(e.poster_path||e.profile_path),tileSrc:Hl(e.backdrop_path||e.profile_path,"w300"),backdrop:Hl(e.backdrop_path,"w1280"),href:`/entity/${e.media_type||"people"}/${e.id}`,shortTitle:(t=e.title||e.name,r=30,t.length>r?t.substring(0,r-3)+"...":t),title:e.title||e.name,data:e,entityInfo:{type:e.media_type||"people",id:e.id},heroContent:{title:e.title||e.name,description:e.overview}};var t,r}))}var Ql=new Map,Kl=new Map;var $l=900,ql={display:"flex",flexDirection:"column",flexBoundary:"fixed",width:$l,height:220,gap:16},Zl=_(_({},So.typography.display2),{},{fontFamily:"Roboto",fontWeight:700,maxLines:1,width:$l,contain:"width"}),Jl=e=>Xi(Zi,Ki(e,{style:Zl})),ed=_(_({},So.typography.body1),{},{fontFamily:"Roboto",fontWeight:400,lineHeight:32,width:$l,maxLines:3,contain:"width"}),td={fontSize:16,lineHeight:20},rd=e=>Xi(Zi,Ki(e,{style:ed,get children(){return e.children}})),id=e=>{return t=Vi("node"),$i(Lo,t,(()=>[8,13,11,13])),ji(t,Ki(e,{style:{color:"0x00000099",borderRadius:8,border:{width:2,color:"0xffffffff"}}}),!0),Yi(t,Xi(Zi,{style:td,get children(){return e.children}})),t;var t},nd=_(_({},So.typography.body2),{},{fontFamily:"Roboto",fontWeight:400}),od=e=>Xi(qi,{style:{display:"flex",flexDirection:"row",gap:18,width:$l,height:48},get children(){return[Xi(qi,{y:-4,src:"./assets/stars.png",width:188,height:31}),Xi(qi,{y:-4,flexItem:!1,clipping:!0,get width(){return 188*e.voteAverage/10},height:31,get children(){return Xi(qi,{src:"./assets/stars-full.png",width:188,height:31})}}),Xi(Zi,{style:nd,get children(){return[Hi((()=>e.voteCount))," reviews"]}}),Xi(Zi,{style:nd,get children(){return e.metaText}}),Xi(ki,{get each(){return e.badges},children:e=>Xi(id,{y:-5,children:e})})]}}),ad=A("G",(e=>Xi(qi,Ki({id:"contentBlock",style:ql},e,{get children(){return[Xi(Jl,{get children(){return e.content.title}}),Xi(rd,{get children(){return e.content.description}}),Xi(Mi,{get when(){return e.content.voteCount},get children(){return Xi(od,{get metaText(){return e.content.metaText},get badges(){return e.content.badges},get voteCount(){return e.content.voteCount},get voteAverage(){return e.content.voteAverage}})}})]}})))),sd=()=>{var e=wn(),t=C(Hr(0),2),r=t[0],i=t[1],n=C(Hr({}),2),o=n[0],a=n[1],s=yn(),l=Kr((()=>0)),d=jr((()=>{return c=e.filter||"all",t=e=>{var t=`/trending/${c}/week?page=${e}`;if(Ql.has(t))return Ql.get(t);var r=Yl.get(t).then((e=>{var t=e.results.filter((e=>!e.adult)),r=function(e,t=7){for(var r=[],i=0,n=e.length;i<n;i+=t)r.push(e.slice(i,i+t));return r}((Kl.has(c)?Kl.get(c):[]).concat(jl(t)));return r[r.length-1].length<7?Kl.set(c,r.pop()):Kl.delete(c),r}));return Ql.set(t,r),r},r=C(Hr([]),2),i=r[0],n=r[1],o=C(Hr(1),2),a=o[0],s=o[1],l=C(Hr(!1),2),d=l[0],h=l[1],u=C(Qr(a,t),1)[0],Xr((()=>{var e=u();e&&$r((()=>{0===e.length&&h(!0),n((t=>[...t,...e]))}))})),{pages:i,page:a,setPage:s,setPages:n,end:d,setEnd:h};var t,r,i,n,o,a,s,l,d,h,u,c})),h=ro((e=>To(e)),400),u=ro((e=>a(e||{})),200);function c(){var e;null===(e=this.children.selected)||void 0===e||e.setFocus(),i(-1*(this.y||0)+24);var t=d().pages().length;this.parent.selected=this.parent.children.indexOf(this),(0===t||this.parent.selected&&this.parent.selected>=t-2)&&d().setPage((e=>e+1))}function f(){var e=this.children.find((e=>e.states.has("focus")));return e&&e.href,s(e.href),!0}return Yr(Zr(Li,(e=>{e.backdrop&&h(e.backdrop),e.heroContent&&u(e.heroContent)}),{defer:!0})),Xi(Mi,{get when(){return d().pages().length},get children(){return[Xi(ad,{y:360,x:162,get content(){return o()}}),Xi(qi,{clipping:!0,get style(){return Ll.itemsContainer},get children(){return Xi(ya,{id:"BrowseColumn",plinko:!0,announce:"All Trending - Week",get y(){return r()},scroll:"none",get style(){return Ll.Column},get children(){return Xi(ki,{get each(){return d().pages()},children:(e,t)=>Xi(Ul,{get autofocus(){return l(t())},items:e,width:1620,onFocus:c,onEnter:f})})}})}})]}})},ld=()=>{return e=Vi("node"),Qi(e,"style",{width:1920,height:1080,color:868483072}),e;var e},dd="/solid-demo-app/";var hd=Ii((()=>L((()=>S.import("./Grid-legacy-BccbrVPc.js"))))),ud=Ii((()=>L((()=>S.import("./Portal-legacy-CDPPjlNc.js"))))),cd=Ii((()=>L((()=>S.import("./Text-legacy-BojtXaoX.js"))))),fd=Ii((()=>L((()=>S.import("./Create-legacy-DQJGdBeQ.js"))))),pd=Ii((()=>L((()=>S.import("./Viewport-legacy-ssh0ZkdF.js"))))),vd=Ii((()=>L((()=>S.import("./Buttons-legacy-D9LbYAKd.js"))))),gd=Ii((()=>L((()=>S.import("./Flex-legacy-CWYytDab.js"))))),md=Ii((()=>L((()=>S.import("./FlexSize-legacy-Bn3npbCv.js"))))),xd=Ii((()=>L((()=>S.import("./FlexColumnSize-legacy-DXl2fMKI.js"))))),yd=Ii((()=>L((()=>S.import("./FlexColumn-legacy-3LgYeWTo.js"))))),bd=Ii((()=>L((()=>S.import("./ButtonsMaterial-legacy-B-LtCbcX.js"))))),wd=Ii((()=>L((()=>S.import("./SuperFlex-legacy-BdQF1mri.js"))))),Ad=Ii((()=>L((()=>S.import("./Entity-legacy-VDJ0hlXe.js"))))),Td=Ii((()=>L((()=>S.import("./People-legacy-c3L1d7oS.js")))));rr.debug=!1,rr.animationsEnabled=!0,rr.fontSettings.fontFamily="Roboto",rr.fontSettings.color=4143380223,rr.fontSettings.fontSize=32,rr.rendererOptions={fpsUpdateInterval:200,enableInspector:!0,numImageWorkers:0,deviceLogicalPixelRatio:window.innerHeight/1080};var Sd,_d=function(e=rr.rendererOptions,t){return Di=function(e={},t="app"){return Zt=new tr(e,t),Jt=Zt.createShader.bind(Zt),Zt}(e,"app"),Wi.lng=Di.root,Wi.rendered=!0,{renderer:Di,rootNode:Wi,render:Gi}}(),Cd=_d.renderer,Rd=_d.render;(Sd=Cd.stage).fontManager.addFontFace(new Bt("msdf",{fontFamily:"Roboto",descriptors:{weight:700},atlasDataUrl:dd+"fonts/Roboto-Bold.msdf.json",atlasUrl:dd+"fonts/Roboto-Bold.msdf.png",stage:Sd})),Sd.fontManager.addFontFace(new Bt("msdf",{fontFamily:"Roboto",descriptors:{weight:500},atlasDataUrl:dd+"fonts/Roboto-Medium.msdf.json",atlasUrl:dd+"fonts/Roboto-Medium.msdf.png",stage:Sd})),Sd.fontManager.addFontFace(new Bt("msdf",{fontFamily:"Roboto",descriptors:{weight:400},atlasDataUrl:dd+"fonts/Roboto-Regular.msdf.json",atlasUrl:dd+"fonts/Roboto-Regular.msdf.png",stage:Sd})),Sd.fontManager.addFontFace(new Bt("msdf",{fontFamily:"Roboto",descriptors:{weight:100},atlasDataUrl:dd+"fonts/Roboto-Thin.msdf.json",atlasUrl:dd+"fonts/Roboto-Thin.msdf.png",stage:Sd})),Sd.fontManager.addFontFace(new Bt("msdf",{fontFamily:"Arial",descriptors:{weight:500},atlasDataUrl:dd+"fonts/Roboto-Regular.msdf.json",atlasUrl:dd+"fonts/Roboto-Regular.msdf.png",stage:Sd})),Rd((()=>Xi(Un,{root:e=>Xi(Fl,e),get children(){return[Xi(Mn,{path:"",component:sd}),Xi(Mn,{path:"examples",component:ud}),Xi(Mn,{path:"browse/:filter",component:sd}),Xi(Mn,{path:"grid",component:hd}),Xi(Mn,{path:"text",component:cd}),Xi(Mn,{path:"buttons",component:vd}),Xi(Mn,{path:"flex",component:gd}),Xi(Mn,{path:"create",component:fd}),Xi(Mn,{path:"viewport",component:pd}),Xi(Mn,{path:"flexsize",component:md}),Xi(Mn,{path:"flexcolumnsize",component:xd}),Xi(Mn,{path:"flexcolumn",component:yd}),Xi(Mn,{path:"superflex",component:wd}),Xi(Mn,{path:"buttonsmaterial",component:bd}),Xi(Mn,{path:"entity/people/:id",component:Td}),Xi(Mn,{path:"entity/:type/:id",component:Ad}),Xi(Mn,{path:"*all",component:ld})]}})))}}}))}();
//# sourceMappingURL=index-legacy-BHjh5pFk.js.map
