!function(){var e=["defaultTone"],t=["defaultTone"],r=["defaultTone"],i=["surfaceDefaultTone"],n=["defaultTone"],o=["defaultTone"],a=["defaultTone"],s=["defaultTone"],l=["defaultTone"],d=["defaultTone"],u=["defaultTone"],h=["defaultTone"],c=["defaultTone"],f=["defaultTone"],p=["defaultTone"],v=["defaultTone"],g=["defaultTone"],m=["defaultTone"],x=["defaultSurfaceTone"],y=["defaultTone"];function b(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.includes(i))continue;r[i]=e[i]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function A(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */A=function(){return t};var e,t={},r=Object.prototype,i=r.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,r){return e[t]=r}}function u(e,t,r,i){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),s=new k(i||[]);return n(a,"_invoke",{value:C(e,r,s)}),a}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var c="suspendedStart",f="suspendedYield",p="executing",v="completed",g={};function m(){}function x(){}function y(){}var b={};d(b,a,(function(){return this}));var w=Object.getPrototypeOf,T=w&&w(w(M([])));T&&T!==r&&i.call(T,a)&&(b=T);var S=y.prototype=m.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function r(n,o,a,s){var l=h(e[n],e,o);if("throw"!==l.type){var d=l.arg,u=d.value;return u&&"object"==typeof u&&i.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(u).then((function(e){d.value=e,a(d)}),(function(e){return r("throw",e,a,s)}))}s(l.arg)}var o;n(this,"_invoke",{value:function(e,i){function n(){return new t((function(t,n){r(e,i,t,n)}))}return o=o?o.then(n,n):n()}})}function C(t,r,i){var n=c;return function(o,a){if(n===p)throw Error("Generator is already running");if(n===v){if("throw"===o)throw a;return{value:e,done:!0}}for(i.method=o,i.arg=a;;){var s=i.delegate;if(s){var l=R(s,i);if(l){if(l===g)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===c)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=p;var d=h(t,r,i);if("normal"===d.type){if(n=i.done?v:f,d.arg===g)continue;return{value:d.arg,done:i.done}}"throw"===d.type&&(n=v,i.method="throw",i.arg=d.arg)}}}function R(t,r){var i=r.method,n=t.iterator[i];if(n===e)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=e,R(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),g;var o=h(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,g;var a=o.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,g):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,g)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function B(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function M(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function r(){for(;++n<t.length;)if(i.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return x.prototype=y,n(S,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:x,configurable:!0}),x.displayName=d(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,d(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(_.prototype),d(_.prototype,s,(function(){return this})),t.AsyncIterator=_,t.async=function(e,r,i,n,o){void 0===o&&(o=Promise);var a=new _(u(e,r,i,n),o);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(S),d(S,l,"Generator"),d(S,a,(function(){return this})),d(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var i in t)r.push(i);return r.reverse(),function e(){for(;r.length;){var i=r.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},t.values=M,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(B),!t)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(i,n){return s.type="throw",s.arg=t,r.next=i,n&&(r.method="next",r.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),d=i.call(a,"finallyLoc");if(l&&d){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!d)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),B(r),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var n=i.arg;B(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,r,i){return this.delegate={iterator:M(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=e),g}},t}function w(e,t,r,i,n,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(i,n)}function T(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var o=e.apply(t,r);function a(e){w(o,i,n,a,s,"next",e)}function s(e){w(o,i,n,a,s,"throw",e)}a(void 0)}))}}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,o,a,s=[],l=!0,d=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(i=o.call(r)).done)&&(s.push(i.value),s.length!==t);l=!0);}catch(e){d=!0,n=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(d)throw n}}return s}}(e,t)||I(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=I(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function I(e,t){if(e){if("string"==typeof e)return B(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?B(e,t):void 0}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}System.register([],(function(w,S){"use strict";return{execute:function(){var I,B,k=A().mark(Zi),M=document.createElement("style");M.textContent="html,body,*{padding:0;margin:0}video{position:absolute;top:0;left:0;z-index:2;outline:none}.center-element{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}\n",document.head.appendChild(M),w({A:Jl,B:function(){var e=document.getElementById("video");return e.hidden=!0,e.pause(),e},D:function(){var e=document.getElementById("video");return e.hidden=!1,setTimeout((()=>e.play()),50),e.focus(),e},F:Bi,I:ki,S:Mi,a:Yr,b:Xr,c:Gr,d:Kr,e:jr,f:Vr,g:qr,j:P,k:Ni,n:ni,o:$r,p:Zr,q:Hr,w:dd,x:od});var L=function(e,t,r){var i=Promise.resolve();return i.then((()=>e())).catch((e=>{var t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}))},F={BASE_URL:"/solid-demo-app/",DEV:!1,LEGACY:!0,MODE:"production",PROD:!0,SSR:!1};function P(e,t){if(!G()&&!e)throw new Error(t||"Assertion failed")}function N(e,t,r){var i=Math.trunc(e>>>24),n=Math.trunc(e>>>16&255),o=Math.trunc(e>>>8&255),a=Math.trunc(255&e),s=Math.trunc(t>>>24),l=Math.trunc(t>>>16&255),d=Math.trunc(t>>>8&255),u=Math.trunc(255&t);return(Math.round(s*r+i*(1-r))<<24|Math.round(l*r+n*(1-r))<<16|Math.round(d*r+o*(1-r))<<8|Math.round(u*r+a*(1-r)))>>>0}function U(e,t){return(e>>>24<<24|(e>>>16&255)<<16|(e>>>8&255)<<8|Math.trunc((255&e)*t))>>>0}var D=!0;function O(e,t,r=!1){var i=(255&e)/255*t,n=D?i:1,o=Math.trunc((e>>>24)*n),a=Math.trunc((e>>>16&255)*n),s=Math.trunc((e>>>8&255)*n),l=Math.trunc(255*i);return r?(l<<24|s<<16|a<<8|o)>>>0:(o<<24|a<<16|s<<8|l)>>>0}function z(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function G(){return F&&!0}var X=1;class W{constructor(){C(this,"eventListeners",{})}on(e,t){var r=this.eventListeners[e];r||(r=[]),r.push(t),this.eventListeners[e]=r}off(e,t){var r=this.eventListeners[e];if(r)if(t){var i=r.indexOf(t);i>=0&&r.splice(i,1)}else delete this.eventListeners[e]}once(e,t){var r=(i,n)=>{this.off(e,r),t(i,n)};this.on(e,r)}emit(e,t){var r=this.eventListeners[e];r&&[...r].forEach((e=>{e(this,t)}))}removeAllListeners(){this.eventListeners={}}}var V=/^(data|ftps?|https?):/,H=e=>[(e>>>24)/255,(e>>>16&255)/255,(e>>>8&255)/255,(255&e)/255];function Y(e,t,r,i,n){return n?(n.x1=e,n.y1=t,n.x2=r,n.y2=i,n):{x1:e,y1:t,x2:r,y2:i}}function j(e,t){return e.x1<t.x2&&e.x2>t.x1&&e.y1<t.y2&&e.y2>t.y1}function K(e,t,r){var i=Math.max(e.x,t.x),n=Math.max(e.y,t.y),o=Math.min(e.x+e.width,t.x+t.width)-i,a=Math.min(e.y+e.height,t.y+t.height)-n;return o>0&&a>0?r?(r.x=i,r.y=n,r.width=o,r.height=a,r):{x:i,y:n,width:o,height:a}:r?(r.x=0,r.y=0,r.width=0,r.height=0,r):{x:0,y:0,width:0,height:0}}function Q(e,t){return t?(t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height,t):{x:e.x,y:e.y,width:e.width,height:e.height}}function $(e,t){return e.x1<=t.x2&&e.y1<=t.y2&&e.x2>=t.x1&&e.y2>=t.y1}function q(e){if("file:"===self.location.protocol&&!V.test(e)){var t=self.location.pathname.split("/");t.pop();var r=t.join("/"),i=self.location.protocol+"//"+r;return"."===e.charAt(0)&&(e=e.slice(1)),"/"===e.charAt(0)&&(e=e.slice(1)),i+"/"+e}return new URL(e,self.location.href).href}class Z{constructor(){C(this,"ta",void 0),C(this,"tb",void 0),C(this,"tx",void 0),C(this,"tc",void 0),C(this,"td",void 0),C(this,"ty",void 0),C(this,"_floatArr",null),C(this,"mutation",void 0),this.ta=0,this.tb=0,this.tx=0,this.tc=0,this.td=0,this.ty=0,this.mutation=!0}static get temp(){return J}static multiply(e,t,r){var i=e.ta*t.ta+e.tb*t.tc,n=e.ta*t.tb+e.tb*t.td,o=e.ta*t.tx+e.tb*t.ty+e.tx,a=e.tc*t.ta+e.td*t.tc,s=e.tc*t.tb+e.td*t.td,l=e.tc*t.tx+e.td*t.ty+e.ty;return r||(r=new Z),r.ta=i,r.tb=n,r.tx=o,r.tc=a,r.td=s,r.ty=l,r.mutation=!0,r}static identity(e){return e||(e=new Z),e.ta=1,e.tb=0,e.tx=0,e.tc=0,e.td=1,e.ty=0,e.mutation=!0,e}static translate(e,t,r){return r||(r=new Z),r.ta=1,r.tb=0,r.tx=e,r.tc=0,r.td=1,r.ty=t,r.mutation=!0,r}static scale(e,t,r){return r||(r=new Z),r.ta=e,r.tb=0,r.tx=0,r.tc=0,r.td=t,r.ty=0,r.mutation=!0,r}static rotate(e,t){var r=Math.cos(e),i=Math.sin(e);return t||(t=new Z),t.ta=r,t.tb=-i,t.tx=0,t.tc=i,t.td=r,t.ty=0,t.mutation=!0,t}static copy(e,t){return t||(t=new Z),t.ta=e.ta,t.tc=e.tc,t.tb=e.tb,t.td=e.td,t.tx=e.tx,t.ty=e.ty,t.mutation=!0,t}translate(e,t){return this.tx=this.ta*e+this.tb*t+this.tx,this.ty=this.tc*e+this.td*t+this.ty,this.mutation=!0,this}scale(e,t){return this.ta=this.ta*e,this.tb=this.tb*t,this.tc=this.tc*e,this.td=this.td*t,this.mutation=!0,this}rotate(e){if(0===e||!(e%Math.PI*2))return this;var t=Math.cos(e),r=Math.sin(e),i=this.ta*t+this.tb*r,n=this.tb*t-this.ta*r,o=this.tc*t+this.td*r,a=this.td*t-this.tc*r;return this.ta=i,this.tb=n,this.tc=o,this.td=a,this.mutation=!0,this}multiply(e){return Z.multiply(this,e,this)}getFloatArr(){return this._floatArr||(this._floatArr=new Float32Array(9)),this.mutation&&(this._floatArr[0]=this.ta,this._floatArr[1]=this.tc,this._floatArr[2]=0,this._floatArr[3]=this.tb,this._floatArr[4]=this.td,this._floatArr[5]=0,this._floatArr[6]=this.tx,this._floatArr[7]=this.ty,this._floatArr[8]=1,this.mutation=!1),this._floatArr}}var J=new Z;class ee{constructor(e){C(this,"data",void 0),this.data=new Float32Array(8),e&&(this.data[0]=e[0],this.data[2]=e[2],this.data[4]=e[4],this.data[6]=e[6],this.data[1]=e[1],this.data[3]=e[3],this.data[5]=e[5],this.data[7]=e[7])}static translate(e,t,r,i,n,o,a,s,l){return l||(l=new ee),l.data[0]=e,l.data[2]=r,l.data[4]=n,l.data[6]=a,l.data[1]=t,l.data[3]=i,l.data[5]=o,l.data[7]=s,l}get x1(){return this.data[0]}get x2(){return this.data[2]}get x3(){return this.data[4]}get x4(){return this.data[6]}get y1(){return this.data[1]}get y2(){return this.data[3]}get y3(){return this.data[5]}get y4(){return this.data[7]}}var te,re=e=>e&&!(e&e-1),ie=(e,t,r,i)=>{var n=3*e,o=3*(r-e)-n,a=1-n-o,s=3*t,l=3*(i-t)-s,d=1-s-l;return function(e){if(e>=1)return 1;if(e<=0)return 0;for(var t,r,i=.5,u=0;u<20;u++){if((r=e-i*(i*(i*a+o)+n))>-1e-8&&r<1e-8)return i*(i*(i*d+l)+s);if((t=i*(i*(3*a)+2*o)+n)>1e-10&&t<1e-10)break;i+=r/t}for(var h=0,c=1,f=0;f<20;f++){if((r=e-(i=.5*(h+c))*(i*(i*a+o)+n))>-1e-8&&r<1e-8)return i*(i*(i*d+l)+s);r<0?c=i:h=i}}},ne={},oe={ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],"ease-in-sine":[.12,0,.39,0],"ease-out-sine":[.12,0,.39,0],"ease-in-out-sine":[.37,0,.63,1],"ease-in-cubic":[.32,0,.67,0],"ease-out-cubic":[.33,1,.68,1],"ease-in-out-cubic":[.65,0,.35,1],"ease-in-circ":[.55,0,1,.45],"ease-out-circ":[0,.55,.45,1],"ease-in-out-circ":[.85,0,.15,1],"ease-in-back":[.36,0,.66,-.56],"ease-out-back":[.34,1.56,.64,1],"ease-in-out-back":[.68,-.6,.32,1.6]},ae=e=>e,se=e=>{if("linear"===e)return ae;if(void 0!==ne[e])return ne[e]||ae;if("step-start"===e)return()=>1;if("step-end"===e)return e=>1===e?1:0;var t=oe[e];if(void 0!==t){var r=_(t,4),i=r[0],n=r[1],o=r[2],a=r[3],s=ie(i,n,o,a);return ne[e]=s,s}return e.startsWith("cubic-bezier")?(e=>{var t=e.match(/-?\d*\.?\d+/g);if(t){var r=_(t,4),i=r[0],n=r[1],o=r[2],a=r[3],s=parseFloat(i||"0.42"),l=parseFloat(n||"0"),d=parseFloat(o||"1"),u=parseFloat(a||"1"),h=ie(s,l,d,u);return ne[e]=h,h}return console.warn("Unknown cubic-bezier timing: "+e),ae})(e):(console.warn("Unknown timing function: "+e),ae)};function le(e){return(e/1024/1024).toFixed(2)}class de extends W{constructor(e,t,r){var i,n,o,a,s,l;for(var d in super(),C(this,"node",void 0),C(this,"props",void 0),C(this,"settings",void 0),C(this,"progress",0),C(this,"delayFor",0),C(this,"timingFunction",void 0),C(this,"propValuesMap",{}),C(this,"dynPropValuesMap",void 0),this.node=e,this.props=t,t)if("shaderProps"!==d)void 0===this.propValuesMap.props&&(this.propValuesMap.props={}),this.propValuesMap.props[d]={start:e[d]||0,target:t[d]};else if("DynamicShader"!==e.shader.type)for(var u in this.propValuesMap.shaderProps={},t.shaderProps)this.propValuesMap.shaderProps[u]={start:e.shader.props[u],target:t.shaderProps[u]};else{var h=Object.keys(t.shaderProps),c=h.length;this.dynPropValuesMap={};for(var f=0;f<c;f++){var p=h[f],v=t.shaderProps[p];this.dynPropValuesMap[p]={};for(var g=Object.entries(v),m=g.length,x=0;x<m;x++){var y=_(g[x],2),b=y[0],A=y[1];this.dynPropValuesMap[p][b]={start:e.shader.props[p][b],target:A}}}}var w=r.easing||"linear",T=null!==(i=r.delay)&&void 0!==i?i:0;this.settings={duration:null!==(n=r.duration)&&void 0!==n?n:0,delay:T,easing:w,loop:null!==(o=r.loop)&&void 0!==o&&o,repeat:null!==(a=r.repeat)&&void 0!==a?a:0,repeatDelay:null!==(s=r.repeatDelay)&&void 0!==s?s:0,stopMethod:null!==(l=r.stopMethod)&&void 0!==l&&l},this.timingFunction=se(w),this.delayFor=T}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restoreValues(e,t){for(var r=Object.entries(t),i=r.length,n=0;n<i;n++){var o=_(r[n],2),a=o[0],s=o[1];e[a]=s.start}}restore(){if(this.reset(),void 0!==this.propValuesMap.props&&this.restoreValues(this.node,this.propValuesMap.props),void 0!==this.propValuesMap.shaderProps&&this.restoreValues(this.node.shader.props,this.propValuesMap.shaderProps),void 0!==this.dynPropValuesMap){var e=Object.keys(this.dynPropValuesMap),t=e.length;if(t>0)for(var r=0;r<t;r++){var i=e[r];this.restoreValues(this.node.shader.props[i],this.dynPropValuesMap[i])}}}reverseValues(e){for(var t=Object.entries(e),r=t.length,i=0;i<r;i++){var n=_(t[i],2),o=n[0],a=n[1];e[o]={start:a.target,target:a.start}}}reverse(){if(this.progress=0,void 0!==this.propValuesMap.props&&this.reverseValues(this.propValuesMap.props),void 0!==this.propValuesMap.shaderProps&&this.reverseValues(this.propValuesMap.shaderProps),void 0!==this.dynPropValuesMap){var e=Object.keys(this.dynPropValuesMap),t=e.length;if(t>0)for(var r=0;r<t;r++){var i=e[r];this.reverseValues(this.dynPropValuesMap[i])}}this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(e,t,r){return(this.timingFunction(e)||e)*(r-t)+t}updateValue(e,t,r,i){if(1===this.progress)return t;if(0===this.progress)return r;var n=t;return-1!==e.indexOf("color")?r===n?r:N(r,n,i&&this.timingFunction(this.progress)||this.progress):i?this.applyEasing(this.progress,r,n):r+(n-r)*this.progress}updateValues(e,t,r){for(var i=Object.entries(t),n=i.length,o=0;o<n;o++){var a=_(i[o],2),s=a[0],l=a[1];e[s]=this.updateValue(s,l.target,l.start,r)}}update(e){var t=this.settings,r=t.duration,i=t.loop,n=t.easing,o=t.stopMethod,a=this.delayFor;if(0!==r||0!==a){if(this.delayFor>0){if(this.delayFor-=e,this.delayFor>=0)return;e=-this.delayFor,this.delayFor=0}if(0!==r)if(0===this.progress&&this.emit("animating",{}),this.progress+=e/r,this.progress>1&&(this.progress=i?0:1,o))this.emit("finished",{});else{if(void 0!==this.propValuesMap.props&&this.updateValues(this.node,this.propValuesMap.props,n),void 0!==this.propValuesMap.shaderProps&&this.updateValues(this.node.shader.props,this.propValuesMap.shaderProps,n),void 0!==this.dynPropValuesMap){var s=Object.keys(this.dynPropValuesMap),l=s.length;if(l>0)for(var d=0;d<l;d++){var u=s[d];this.updateValues(this.node.shader.props[u],this.dynPropValuesMap[u],n)}}1===this.progress&&this.emit("finished",{})}else this.emit("finished",{})}else this.emit("finished",{})}}class ue extends W{constructor(e,t){super(),C(this,"manager",void 0),C(this,"animation",void 0),C(this,"stoppedPromise",void 0),C(this,"stoppedResolve",null),C(this,"state",void 0),this.manager=e,this.animation=t,this.state="stopped",this.stoppedPromise=Promise.resolve(),this.onAnimating=this.onAnimating.bind(this),this.onFinished=this.onFinished.bind(this)}start(){return"running"!==this.state&&(this.makeStoppedPromise(),this.registerAnimation(),this.state="running"),this}stop(){return this.unregisterAnimation(),null!==this.stoppedResolve&&(this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this)),this.animation.reset(),this.state="stopped",this}pause(){return this.unregisterAnimation(),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStopped(){return this.stoppedPromise}registerAnimation(){this.animation.once("finished",this.onFinished),this.animation.on("animating",this.onAnimating),this.manager.registerAnimation(this.animation)}unregisterAnimation(){this.manager.unregisterAnimation(this.animation),this.animation.off("finished",this.onFinished),this.animation.off("animating",this.onAnimating)}makeStoppedPromise(){null===this.stoppedResolve&&(this.stoppedPromise=new Promise((e=>{this.stoppedResolve=e})))}onFinished(){P(this.stoppedResolve);var e=this.animation.settings,t=e.loop;if("reverse"===e.stopMethod)return this.animation.once("finished",this.onFinished),void this.animation.reverse();t||(this.unregisterAnimation(),this.stoppedResolve(),this.stoppedResolve=null,this.emit("stopped",this),this.state="stopped")}onAnimating(){this.emit("animating",this)}}!function(e){e[e.Init=0]="Init",e[e.OutOfBounds=2]="OutOfBounds",e[e.InBounds=4]="InBounds",e[e.InViewport=8]="InViewport"}(te||(te={}));var he,ce=new Map;ce.set(te.Init,"init"),ce.set(te.OutOfBounds,"outOfBounds"),ce.set(te.InBounds,"inBounds"),ce.set(te.InViewport,"inViewport"),function(e){e[e.Children=1]="Children",e[e.ScaleRotate=2]="ScaleRotate",e[e.Local=4]="Local",e[e.Global=8]="Global",e[e.Clipping=16]="Clipping",e[e.CalculatedZIndex=32]="CalculatedZIndex",e[e.ZIndexSortedChildren=64]="ZIndexSortedChildren",e[e.PremultipliedColors=128]="PremultipliedColors",e[e.WorldAlpha=256]="WorldAlpha",e[e.RenderState=512]="RenderState",e[e.IsRenderable=1024]="IsRenderable",e[e.RenderTexture=2048]="RenderTexture",e[e.ParentRenderTexture=4096]="ParentRenderTexture",e[e.None=0]="None",e[e.All=8191]="All"}(he||(he={}));class fe extends W{constructor(e,t){super(),C(this,"stage",void 0),C(this,"children",[]),C(this,"_id",X++),C(this,"props",void 0),C(this,"updateType",he.All),C(this,"globalTransform",void 0),C(this,"scaleRotateTransform",void 0),C(this,"localTransform",void 0),C(this,"renderCoords",void 0),C(this,"renderBound",void 0),C(this,"strictBound",void 0),C(this,"preloadBound",void 0),C(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1}),C(this,"isRenderable",!1),C(this,"renderState",te.Init),C(this,"worldAlpha",1),C(this,"premultipliedColorTl",0),C(this,"premultipliedColorTr",0),C(this,"premultipliedColorBl",0),C(this,"premultipliedColorBr",0),C(this,"calcZIndex",0),C(this,"hasRTTupdates",!1),C(this,"parentHasRenderTexture",!1),C(this,"onTextureLoaded",((e,t)=>{var r;this.autosizeNode(t),this.stage.requestRender(),this.parentHasRenderTexture&&this.setRTTUpdates(1),this.emit("loaded",{type:"texture",dimensions:t}),"contain"===(null===(r=this.props.textureOptions)||void 0===r||null===(r=r.resizeMode)||void 0===r?void 0:r.type)&&this.setUpdateType(he.Local)})),C(this,"onTextureFailed",((e,t)=>{this.emit("failed",{type:"texture",error:t})})),C(this,"onTextureFreed",(()=>{this.emit("freed",{type:"texture"})})),this.stage=e,this.props=E(E({},t),{},{parent:null,texture:null,src:null,rtt:!1}),this.parent=t.parent,this.texture=t.texture,this.src=t.src,this.rtt=t.rtt,this.updateScaleRotateTransform()}loadTexture(){var e=this.props.texture;P(e),queueMicrotask((()=>{e.preventCleanup=this.props.preventCleanup,this.textureOptions.preload&&e.ctxTexture.load(),"loaded"===e.state?(P(e.dimensions),this.onTextureLoaded(e,e.dimensions)):"failed"===e.state?(P(e.error),this.onTextureFailed(e,e.error)):"freed"===e.state&&this.onTextureFreed(e),e.on("loaded",this.onTextureLoaded),e.on("failed",this.onTextureFailed),e.on("freed",this.onTextureFreed)}))}unloadTexture(){this.texture&&(this.texture.off("loaded",this.onTextureLoaded),this.texture.off("failed",this.onTextureFailed),this.texture.off("freed",this.onTextureFreed),this.texture.setRenderableOwner(this,!1))}autosizeNode(e){this.autosize&&(this.width=e.width,this.height=e.height)}setUpdateType(e){this.updateType|=e;var t=this.props.parent;!t||t.updateType&he.Children||t.setUpdateType(he.Children),this.parentHasRenderTexture&&this.setRTTUpdates(e)}sortChildren(){this.children.sort(((e,t)=>e.calcZIndex-t.calcZIndex))}updateScaleRotateTransform(){var e=this.props,t=e.rotation,r=e.scaleX,i=e.scaleY;this.scaleRotateTransform=0!==t||1!==r||1!==i?Z.rotate(t,this.scaleRotateTransform).scale(r,i):void 0}updateLocalTransform(){var e,t=this.props,r=t.x,i=t.y,n=t.width,o=t.height,a=this.props.mountX*n,s=this.props.mountY*o;if(this.scaleRotateTransform){var l=this.props.pivotX*n,d=this.props.pivotY*o;this.localTransform=Z.translate(r-a+l,i-s+d,this.localTransform).multiply(this.scaleRotateTransform).translate(-l,-d)}else this.localTransform=Z.translate(r-a,i-s,this.localTransform);var u=this.props.texture;if(u&&u.dimensions&&"contain"===(null===(e=this.props.textureOptions)||void 0===e||null===(e=e.resizeMode)||void 0===e?void 0:e.type)){var h=1,c=1,f=0,p=0,v=u.dimensions,g=v.width,m=v.height;if(g/m>n/o){var x=m*(n/g);p=(o-x)/2,c=x/o}else{var y=g*(o/m);f=(n-y)/2,h=y/n}this.localTransform.translate(f,p).scale(h,c)}this.setUpdateType(he.Global)}update(e,t){this.updateType&he.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(he.Local)),this.updateType&he.Local&&(this.updateLocalTransform(),this.setUpdateType(he.Global));var r,i=this.props.parent,n=he.None;if(this.updateType&he.ParentRenderTexture)for(var o=this.parent;o;)o.rtt&&(this.parentHasRenderTexture=!0),o=o.parent;(this.updateType^he.All&&this.updateType&he.RenderTexture&&this.children.forEach((e=>{e.setUpdateType(he.All)})),this.updateType&he.Global)&&(P(this.localTransform),this.globalTransform=Z.copy((null==i?void 0:i.globalTransform)||this.localTransform,this.globalTransform),this.parentHasRenderTexture&&null!==(r=this.props.parent)&&void 0!==r&&r.rtt&&(this.globalTransform=Z.identity()),i&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(he.Clipping|he.RenderState|he.Children),n|=he.Global);this.updateType&he.Clipping&&(this.calculateClippingRect(t),this.setUpdateType(he.Children),n|=he.Clipping),this.updateType&he.WorldAlpha&&(this.worldAlpha=i?i.worldAlpha*this.props.alpha:this.props.alpha,this.setUpdateType(he.Children|he.PremultipliedColors|he.IsRenderable),n|=he.WorldAlpha),this.updateType&he.PremultipliedColors&&(this.premultipliedColorTl=O(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=O(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=O(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=O(this.props.colorBr,this.worldAlpha,!0))),this.updateType&he.RenderState&&(this.updateRenderState(t),this.setUpdateType(he.IsRenderable)),this.updateType&he.IsRenderable&&this.updateIsRenderable(),i&&this.updateType&he.CalculatedZIndex&&(this.calculateZIndex(),i.setUpdateType(he.ZIndexSortedChildren)),this.updateType&he.Children&&this.children.length&&!this.rtt&&this.children.forEach((t=>{t.setUpdateType(n),0!==t.updateType&&t.update(e,this.clippingRect)})),this.updateType&he.ZIndexSortedChildren&&this.sortChildren(),this.updateType=0}checkRenderProps(){return!!this.props.texture||!(!this.props.width||!this.props.height)&&(this.props.shader!==this.stage.defShaderCtr||(!!this.props.clipping||(0!==this.props.color||(0!==this.props.colorTop||(0!==this.props.colorBottom||(0!==this.props.colorLeft||(0!==this.props.colorRight||(0!==this.props.colorTl||(0!==this.props.colorTr||(0!==this.props.colorBl||0!==this.props.colorBr))))))))))}checkRenderBounds(e){P(this.renderBound);var t=e.width||this.stage.root.width,r=e.height||this.stage.root.height;if(this.strictBound=Y(e.x,e.y,e.x+t,e.y+r,this.strictBound),$(this.renderBound,this.strictBound))return te.InViewport;var i=this.stage.boundsMargin;return this.preloadBound=Y(this.strictBound.x1-i[3],this.strictBound.y1-i[0],this.strictBound.x2+i[1],this.strictBound.y2+i[2],this.preloadBound),$(this.renderBound,this.preloadBound)?te.InBounds:te.OutOfBounds}updateRenderState(e){var t=this.checkRenderBounds(e);if(t!==this.renderState){var r=this.renderState;this.renderState=t;var i=ce.get(t);P(i),this.emit(i,{previous:r,current:t})}}updateIsRenderable(){var e;e=!(0===this.worldAlpha||!this.checkRenderProps())&&this.renderState>te.OutOfBounds,this.isRenderable!==e&&(this.isRenderable=e,this.onChangeIsRenderable(e))}onChangeIsRenderable(e){var t;null===(t=this.texture)||void 0===t||t.setRenderableOwner(this,e)}calculateRenderCoords(){var e=this.width,t=this.height,r=this.globalTransform;P(r);var i=r.tx,n=r.ty,o=r.ta,a=r.tb,s=r.tc,l=r.td;if(0===a&&0===s){var d=i,u=i+e*o,h=n,c=n+t*l;this.renderCoords=ee.translate(d,h,u,h,u,c,d,c,this.renderCoords)}else this.renderCoords=ee.translate(i,n,i+e*o,n+e*s,i+e*o+t*a,n+e*s+t*l,i+t*a,n+t*l,this.renderCoords)}updateBoundingRect(){var e=this.renderCoords,t=this.globalTransform;P(t),P(e);var r=t.tb,i=t.tc,n=e.x1,o=e.y1,a=e.x3,s=e.y3;if(0===r||0===i)this.renderBound=Y(n,o,a,s,this.renderBound);else{var l=e.x2,d=e.x4,u=e.y2,h=e.y4;this.renderBound=Y(Math.min(n,l,a,d),Math.min(o,u,s,h),Math.max(n,l,a,d),Math.max(o,u,s,h),this.renderBound)}}calculateClippingRect(e){P(this.globalTransform);var t=this.clippingRect,r=this.props,i=this.globalTransform,n=r.clipping,o=0!==i.tb||0!==i.tc;n&&!o?(t.x=i.tx,t.y=i.ty,t.width=this.width*i.ta,t.height=this.height*i.td,t.valid=!0):t.valid=!1,e.valid&&t.valid?K(e,t,t):e.valid&&(Q(e,t),t.valid=!0)}calculateZIndex(){var e,t,r=this.props,i=r.zIndex||0,n=(null===(e=r.parent)||void 0===e?void 0:e.zIndex)||0,o=i;null!==(t=r.parent)&&void 0!==t&&t.zIndexLocked&&(o=i<n?i:n),this.calcZIndex=o}destroy(){this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,delete this.renderCoords,delete this.renderBound,delete this.strictBound,delete this.preloadBound,delete this.globalTransform,delete this.scaleRotateTransform,delete this.localTransform,this.props.texture=null,this.props.shader=this.stage.defShaderCtr;for(var e=[...this.children],t=0;t<e.length;t++)e[t].destroy();this.parent=null,this.rtt&&this.stage.renderer.removeRTTNode(this),this.removeAllListeners()}renderQuads(e){var t=this.props,r=t.texture,i=t.width,n=t.height,o=t.textureOptions,a=t.rtt,s=t.shader;if(this.parentHasRenderTexture){if(!e.renderToTextureActive)return;if(this.parentRenderTexture!==e.activeRttNode)return}var l=this.premultipliedColorTl,d=this.premultipliedColorTr,u=this.premultipliedColorBl,h=this.premultipliedColorBr,c=this.zIndex,f=this.worldAlpha,p=this.globalTransform,v=this.clippingRect,g=this.renderCoords;P(p),P(g),e.addQuad({width:i,height:n,colorTl:l,colorTr:d,colorBl:u,colorBr:h,texture:r,textureOptions:o,zIndex:c,shader:s.shader,shaderProps:s.getResolvedProps(),alpha:f,clippingRect:v,tx:p.tx,ty:p.ty,ta:p.ta,tb:p.tb,tc:p.tc,td:p.td,renderCoords:g,rtt:a,parentHasRenderTexture:this.parentHasRenderTexture,framebufferDimensions:this.framebufferDimensions})}get id(){return this._id}get data(){return this.props.data}set data(e){this.props.data=e}get x(){return this.props.x}set x(e){this.props.x!==e&&(this.props.x=e,this.setUpdateType(he.Local))}get absX(){var e,t;return this.props.x+-this.props.width*this.props.mountX+((null===(e=this.props.parent)||void 0===e?void 0:e.absX)||(null===(t=this.props.parent)||void 0===t||null===(t=t.globalTransform)||void 0===t?void 0:t.tx)||0)}get absY(){var e,t;return this.props.y+-this.props.height*this.props.mountY+(null!==(e=null===(t=this.props.parent)||void 0===t?void 0:t.absY)&&void 0!==e?e:0)}get y(){return this.props.y}set y(e){this.props.y!==e&&(this.props.y=e,this.setUpdateType(he.Local))}get width(){return this.props.width}set width(e){this.props.width!==e&&(this.props.width=e,this.setUpdateType(he.Local),this.props.rtt&&(this.texture=this.stage.txManager.loadTexture("RenderTexture",{width:this.width,height:this.height}),this.textureOptions.preload=!0,this.setUpdateType(he.RenderTexture)))}get height(){return this.props.height}set height(e){this.props.height!==e&&(this.props.height=e,this.setUpdateType(he.Local),this.props.rtt&&(this.texture=this.stage.txManager.loadTexture("RenderTexture",{width:this.width,height:this.height}),this.textureOptions.preload=!0,this.setUpdateType(he.RenderTexture)))}get scale(){return this.scaleX}set scale(e){this.scaleX=e,this.scaleY=e}get scaleX(){return this.props.scaleX}set scaleX(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.setUpdateType(he.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.setUpdateType(he.ScaleRotate))}get mount(){return this.props.mount}set mount(e){this.props.mountX===e&&this.props.mountY===e||(this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.setUpdateType(he.Local))}get mountX(){return this.props.mountX}set mountX(e){this.props.mountX!==e&&(this.props.mountX=e,this.setUpdateType(he.Local))}get mountY(){return this.props.mountY}set mountY(e){this.props.mountY!==e&&(this.props.mountY=e,this.setUpdateType(he.Local))}get pivot(){return this.props.pivot}set pivot(e){this.props.pivotX===e&&this.props.pivotY===e||(this.props.pivotX=e,this.props.pivotY=e,this.props.pivot=e,this.setUpdateType(he.Local))}get pivotX(){return this.props.pivotX}set pivotX(e){this.props.pivotX!==e&&(this.props.pivotX=e,this.setUpdateType(he.Local))}get pivotY(){return this.props.pivotY}set pivotY(e){this.props.pivotY!==e&&(this.props.pivotY=e,this.setUpdateType(he.Local))}get rotation(){return this.props.rotation}set rotation(e){this.props.rotation!==e&&(this.props.rotation=e,this.setUpdateType(he.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(e){this.props.alpha=e,this.setUpdateType(he.PremultipliedColors|he.WorldAlpha)}get autosize(){return this.props.autosize}set autosize(e){this.props.autosize=e}get clipping(){return this.props.clipping}set clipping(e){this.props.clipping=e,this.setUpdateType(he.Clipping)}get color(){return this.props.color}set color(e){this.colorTop=e,this.colorBottom=e,this.colorLeft=e,this.colorRight=e,this.props.color=e,this.setUpdateType(he.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(e){this.props.colorTl===e&&this.props.colorTr===e||(this.colorTl=e,this.colorTr=e),this.props.colorTop=e,this.setUpdateType(he.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(e){this.props.colorBl===e&&this.props.colorBr===e||(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e,this.setUpdateType(he.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(e){this.props.colorTl===e&&this.props.colorBl===e||(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e,this.setUpdateType(he.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(e){this.props.colorTr===e&&this.props.colorBr===e||(this.colorTr=e,this.colorBr=e),this.props.colorRight=e,this.setUpdateType(he.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(e){this.props.colorTl=e,this.setUpdateType(he.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(e){this.props.colorTr=e,this.setUpdateType(he.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(e){this.props.colorBl=e,this.setUpdateType(he.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(e){this.props.colorBr=e,this.setUpdateType(he.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(e){this.props.zIndexLocked=e,this.setUpdateType(he.CalculatedZIndex|he.Children),this.children.forEach((e=>{e.setUpdateType(he.CalculatedZIndex)}))}get zIndex(){return this.props.zIndex}set zIndex(e){this.props.zIndex=e,this.setUpdateType(he.CalculatedZIndex|he.Children),this.children.forEach((e=>{e.setUpdateType(he.CalculatedZIndex)}))}get parent(){return this.props.parent}set parent(e){var t=this.props.parent;if(t!==e){if(this.props.parent=e,t){var r=t.children.indexOf(this);P(-1!==r,"CoreNode.parent: Node not found in old parent's children!"),t.children.splice(r,1),t.setUpdateType(he.Children|he.ZIndexSortedChildren)}e&&(e.children.push(this),this.setUpdateType(he.All),e.setUpdateType(he.Children|he.ZIndexSortedChildren),(e.rtt||e.parentHasRenderTexture)&&this.setRTTUpdates(he.All)),this.updateScaleRotateTransform()}}get preventCleanup(){return this.props.preventCleanup}set preventCleanup(e){this.props.preventCleanup=e}get rtt(){return this.props.rtt}set rtt(e){var t,r;if(!0===this.props.rtt&&(this.props.rtt=e,!1===e&&null!==this.texture))return this.unloadTexture(),this.setUpdateType(he.All),this.children.forEach((e=>{e.parentHasRenderTexture=!1})),void(null===(r=this.stage.renderer)||void 0===r||r.removeRTTNode(this));!1!==e&&(this.texture=this.stage.txManager.loadTexture("RenderTexture",{width:this.width,height:this.height}),this.textureOptions.preload=!0,this.props.rtt=!0,this.hasRTTupdates=!0,this.setUpdateType(he.All),this.children.forEach((e=>{e.setUpdateType(he.All)})),null===(t=this.stage.renderer)||void 0===t||t.renderToTexture(this))}get shader(){return this.props.shader}set shader(e){this.props.shader!==e&&(this.props.shader=e,this.setUpdateType(he.IsRenderable))}get src(){return this.props.src}set src(e){this.props.src!==e&&(this.props.src=e,this.texture=e?this.stage.txManager.loadTexture("ImageTexture",{src:e,width:this.props.width,height:this.props.height,type:this.props.imageType,sx:this.props.srcX,sy:this.props.srcY,sw:this.props.srcWidth,sh:this.props.srcHeight}):null)}set imageType(e){this.props.imageType!==e&&(this.props.imageType=e)}get imageType(){return this.props.imageType||null}get srcHeight(){return this.props.srcHeight}set srcHeight(e){this.props.srcHeight=e}get srcWidth(){return this.props.srcWidth}set srcWidth(e){this.props.srcWidth=e}get srcX(){return this.props.srcX}set srcX(e){this.props.srcX=e}get srcY(){return this.props.srcY}set srcY(e){this.props.srcY=e}get framebufferDimensions(){return this.parentHasRenderTexture&&!this.rtt&&this.parent?this.parent.framebufferDimensions:{width:this.width,height:this.height}}get parentRenderTexture(){for(var e=this.parent;e;){if(e.rtt)return e;e=e.parent}return null}get texture(){return this.props.texture}set texture(e){if(this.props.texture!==e){var t=this.props.texture;t&&(t.setRenderableOwner(this,!1),this.unloadTexture()),this.props.texture=e,e&&(e.setRenderableOwner(this,this.isRenderable),this.loadTexture()),this.setUpdateType(he.IsRenderable)}}set textureOptions(e){this.props.textureOptions=e}get textureOptions(){return this.props.textureOptions}setRTTUpdates(e){var t;this.hasRTTupdates=!0,null===(t=this.parent)||void 0===t||t.setRTTUpdates(e)}animate(e,t){var r=new de(this,e,t);return new ue(this.stage.animationManager,r)}flush(){}}class pe{constructor(){C(this,"activeAnimations",new Set)}registerAnimation(e){this.activeAnimations.add(e)}unregisterAnimation(e){this.activeAnimations.delete(e)}update(e){this.activeAnimations.forEach((t=>{t.update(e)}))}}class ve extends W{constructor(e){super(),C(this,"txManager",void 0),C(this,"dimensions",null),C(this,"error",null),C(this,"state","freed"),C(this,"renderableOwners",new Set),C(this,"renderable",!1),C(this,"lastRenderableChangeTime",0),C(this,"preventCleanup",!1),this.txManager=e}setRenderableOwner(e,t){var r=this.renderableOwners.size;if(t){this.renderableOwners.add(e);var i,n=this.renderableOwners.size;if(n>r&&1===n)this.renderable=!0,this.lastRenderableChangeTime=this.txManager.frameTime,null===(i=this.onChangeIsRenderable)||void 0===i||i.call(this,!0)}else{this.renderableOwners.delete(e);var o,a=this.renderableOwners.size;if(a<r&&0===a)this.renderable=!1,this.lastRenderableChangeTime=this.txManager.frameTime,null===(o=this.onChangeIsRenderable)||void 0===o||o.call(this,!1)}}get ctxTexture(){var e=this.txManager.renderer.createCtxTexture(this);return Object.defineProperty(this,"ctxTexture",{value:e}),e}setState(e,...t){if(this.state!==e){if(this.state=e,"loaded"===e){var r=t;this.dimensions=r[0]}else if("failed"===e){var i=t;this.error=i[0]}this.emit(e,...t)}}static makeCacheKey(e){return!1}static resolveDefaults(e){return{}}}function ge(){self.onmessage=e=>{var t=e.data.src,r=e.data.id,i=e.data.premultiplyAlpha,n=e.data.sx,o=e.data.sy,a=e.data.sw,s=e.data.sh;(function(e,t,r,i,n,o){return new Promise((function(a,s){var l=new XMLHttpRequest;l.open("GET",e,!0),l.responseType="blob",l.onload=function(){if(200!==l.status)return s(new Error("Failed to load image: "+l.statusText));var e=l.response,d=void 0!==t?t:-1!==e.type.indexOf("image/png");null===n||null===o?createImageBitmap(e,{premultiplyAlpha:d?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}).then((function(e){a({data:e,premultiplyAlpha:t})})).catch((function(e){s(e)})):createImageBitmap(e,r||0,i||0,n,o,{premultiplyAlpha:d?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}).then((function(e){a({data:e,premultiplyAlpha:t})})).catch((function(e){s(e)}))},l.onerror=function(){s(new Error("Network error occurred while trying to fetch the image."))},l.send()}))})(t,i,n,o,a,s).then((function(e){self.postMessage({id:r,src:t,data:e})})).catch((function(e){self.postMessage({id:r,src:t,error:e.message})}))}}class me{constructor(e){C(this,"imageWorkersEnabled",!0),C(this,"messageManager",{}),C(this,"workers",[]),C(this,"workerIndex",0),C(this,"nextId",0),this.workers=this.createWorkers(e),this.workers.forEach((e=>{e.onmessage=this.handleMessage.bind(this)}))}handleMessage(e){var t=e.data,r=t.id,i=t.data,n=t.error,o=this.messageManager[r];if(o){var a=_(o,2),s=a[0],l=a[1];delete this.messageManager[r],n?l(new Error(n)):s(i)}}createWorkers(e=1){for(var t=`(${ge.toString()})()`,r=new Blob([t.replace('"use strict";',"")],{type:"application/javascript"}),i=(self.URL?URL:webkitURL).createObjectURL(r),n=[],o=0;o<e;o++)n.push(new Worker(i));return n}getNextWorker(){var e=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,e}getImage(e,t,r,i,n,o){return new Promise(((a,s)=>{try{if(this.workers){var l=this.nextId++;this.messageManager[l]=[a,s];var d=this.getNextWorker();d&&d.postMessage({id:l,src:e,premultiplyAlpha:t,sx:r,sy:i,sw:n,sh:o})}}catch(u){s(u)}}))}}class xe extends ve{constructor(e,t){super(e),C(this,"props",void 0),this.props=xe.resolveDefaults(t||{})}get color(){return this.props.color}set color(e){this.props.color=e}getTextureData(){var e=this;return T(A().mark((function t(){var r,i;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Uint32Array([e.color]),i=new Uint8ClampedArray(r.buffer),t.abrupt("return",{data:new ImageData(i,1,1),premultiplyAlpha:!0});case 3:case"end":return t.stop()}}),t)})))()}static makeCacheKey(e){return`ColorTexture,${xe.resolveDefaults(e).color}`}static resolveDefaults(e){return{color:e.color||4294967295}}}function ye(e){return/\.(ktx|pvr)$/.test(e)}C(xe,"z$__type__Props",void 0);var be=function(){var e=T(A().mark((function e(t){var r,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return r=e.sent,e.next=5,r.arrayBuffer();case 5:if(i=e.sent,-1===t.indexOf(".ktx")){e.next=8;break}return e.abrupt("return",Ae(i));case 8:return e.abrupt("return",we(i));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ae=function(){var e=T(A().mark((function e(t){var r,i,n,o,a,s,l;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=new DataView(t),i=16909060===r.getUint32(12),n=[],o={glInternalFormat:r.getUint32(28,i),pixelWidth:r.getUint32(36,i),pixelHeight:r.getUint32(40,i),numberOfMipmapLevels:r.getUint32(56,i),bytesOfKeyValueData:r.getUint32(60,i)},a=64,a+=o.bytesOfKeyValueData,s=0;s<o.numberOfMipmapLevels;s++)l=r.getUint32(a),a+=4,n.push(r.buffer.slice(a,l)),a+=l;return e.abrupt("return",{data:{glInternalFormat:o.glInternalFormat,mipmaps:n,width:o.pixelWidth||0,height:o.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){var e=T(A().mark((function e(t){var r,i,n,o,a,s,l,d,u,h,c,f;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=t,i=new Int32Array(r,0,13),n=i[12]+52,o=new Uint8Array(r,n),a=[],s={pixelWidth:i[7],pixelHeight:i[6],numberOfMipmapLevels:i[11]||0},l=0,d=s.pixelWidth||0,u=s.pixelHeight||0,h=0;h<s.numberOfMipmapLevels;h++)c=(d+3>>2)*(u+3>>2)*8,f=new Uint8Array(r,o.byteOffset+l,c),a.push(f),l+=c,d>>=1,u>>=1;return e.abrupt("return",{data:{glInternalFormat:36196,mipmaps:a,width:s.pixelWidth||0,height:s.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Te=(e,t,r,i,n,o,a)=>new Promise(((s,l)=>{var d=document.createElement("canvas"),u=d.getContext("2d");P(u),u.imageSmoothingEnabled=!0;var h=new Image;h.onload=()=>{var e=null!=i?i:0,l=null!=n?n:0,c=t||h.width,f=r||h.height;d.width=c,d.height=f,u.drawImage(h,0,0,c,f),s({data:u.getImageData(e,l,null!=o?o:c,null!=a?a:f),premultiplyAlpha:!1})},h.onerror=e=>{l(e)},h.src=e}));class Se extends ve{constructor(e,t){super(e),C(this,"props",void 0),this.props=Se.resolveDefaults(t)}hasAlphaChannel(e){return-1!==e.indexOf("image/png")}loadImage(e){var t=this;return T(A().mark((function r(){var i,n,o,a,s,l,d,u,h,c,f,p;return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=t.props,n=i.premultiplyAlpha,o=i.sx,a=i.sy,s=i.sw,l=i.sh,d=i.width,u=i.height,null===t.txManager.imageWorkerManager){r.next=7;break}return r.next=4,t.txManager.imageWorkerManager.getImage(e,n,o,a,s,l);case 4:return r.abrupt("return",r.sent);case 7:if(!0!==t.txManager.hasCreateImageBitmap){r.next=28;break}return r.next=10,fetch(e);case 10:return h=r.sent,r.next=13,h.blob();case 13:if(c=r.sent,f=null!=n?n:t.hasAlphaChannel(c.type),null===s||null===l){r.next=21;break}return r.next=18,createImageBitmap(c,null!=o?o:0,null!=a?a:0,s,l,{premultiplyAlpha:f?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"});case 18:return r.t0=r.sent,r.t1=f,r.abrupt("return",{data:r.t0,premultiplyAlpha:r.t1});case 21:return r.next=23,createImageBitmap(c,{premultiplyAlpha:f?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"});case 23:return r.t2=r.sent,r.t3=f,r.abrupt("return",{data:r.t2,premultiplyAlpha:r.t3});case 28:return p=new Image(d||void 0,u||void 0),"data:"!==e.substr(0,5)&&(p.crossOrigin="Anonymous"),p.src=e,r.next=33,new Promise(((e,t)=>{p.onload=()=>e(),p.onerror=()=>t(new Error("Failed to load image"))})).catch((e=>{console.error(e)}));case 33:return r.abrupt("return",{data:p,premultiplyAlpha:null==n||n});case 34:case"end":return r.stop()}}),r)})))()}getTextureData(){var e=this;return T(A().mark((function t(){var r,i,n,o,a;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,i=r.src,n=r.premultiplyAlpha,o=r.type,null!==i){t.next=3;break}return t.abrupt("return",{data:null});case 3:if("string"==typeof i){t.next=7;break}if(!(i instanceof ImageData)){t.next=6;break}return t.abrupt("return",{data:i,premultiplyAlpha:n});case 6:return t.abrupt("return",{data:i(),premultiplyAlpha:n});case 7:if(a=q(i),"regular"!==o){t.next=10;break}return t.abrupt("return",e.loadImage(a));case 10:if("svg"!==o){t.next=12;break}return t.abrupt("return",Te(a,e.props.width,e.props.height,e.props.sx,e.props.sy,e.props.sw,e.props.sh));case 12:if(!0!==/\.(svg)$/.test(i)){t.next=14;break}return t.abrupt("return",Te(a,e.props.width,e.props.height,e.props.sx,e.props.sy,e.props.sw,e.props.sh));case 14:if("compressed"!==o){t.next=16;break}return t.abrupt("return",be(a));case 16:if(!0!==ye(i)){t.next=18;break}return t.abrupt("return",be(a));case 18:return t.abrupt("return",e.loadImage(a));case 19:case"end":return t.stop()}}),t)})))()}static makeCacheKey(e){var t,r=Se.resolveDefaults(e),i=r.key||r.src;if("string"!=typeof i)return!1;var n,o,a="";null!==r.sh&&null!==r.sw&&(a+=",",a+=null!==(n=r.sx)&&void 0!==n?n:"",a+=null!==(o=r.sy)&&void 0!==o?o:"",a+=r.sw||"",a+=r.sh||"");return`ImageTexture,${i},${null!==(t=r.premultiplyAlpha)&&void 0!==t?t:"true"}${a}`}static resolveDefaults(e){var t,r,i,n,o,a,s,l,d,u;return{src:null!==(t=e.src)&&void 0!==t?t:"",premultiplyAlpha:null===(r=e.premultiplyAlpha)||void 0===r||r,key:null!==(i=e.key)&&void 0!==i?i:null,type:null!==(n=e.type)&&void 0!==n?n:null,width:null!==(o=e.width)&&void 0!==o?o:null,height:null!==(a=e.height)&&void 0!==a?a:null,sx:null!==(s=e.sx)&&void 0!==s?s:null,sy:null!==(l=e.sy)&&void 0!==l?l:null,sw:null!==(d=e.sw)&&void 0!==d?d:null,sh:null!==(u=e.sh)&&void 0!==u?u:null}}}C(Se,"z$__type__Props",void 0);class Ee extends ve{constructor(e,t){super(e),C(this,"props",void 0),this.props=Ee.resolveDefaults(t)}getTextureData(){var e=this;return T(A().mark((function t(){var r,i,n,o,a,s,l;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=e.props,i=r.width,n=r.height,o=i*n*4,a=new Uint8ClampedArray(o),s=0;s<o;s+=4)l=Math.floor(256*Math.random()),a[s]=l,a[s+1]=l,a[s+2]=l,a[s+3]=255;return t.abrupt("return",{data:new ImageData(a,i,n)});case 5:case"end":return t.stop()}}),t)})))()}static makeCacheKey(e){if(void 0===e.cacheId)return!1;var t=Ee.resolveDefaults(e);return`NoiseTexture,${t.width},${t.height},${t.cacheId}`}static resolveDefaults(e){var t,r,i;return{width:null!==(t=e.width)&&void 0!==t?t:128,height:null!==(r=e.height)&&void 0!==r?r:128,cacheId:null!==(i=e.cacheId)&&void 0!==i?i:0}}}C(Ee,"z$__type__Props",void 0);class _e extends ve{constructor(e,t){super(e),C(this,"props",void 0),C(this,"parentTexture",void 0),C(this,"onParentTxLoaded",(()=>{this.setState("loaded",{width:this.props.width,height:this.props.height})})),C(this,"onParentTxFailed",((e,t)=>{this.setState("failed",t)})),this.props=_e.resolveDefaults(t||{}),this.parentTexture=this.props.texture,queueMicrotask((()=>{var e=this.parentTexture;"loaded"===e.state?this.onParentTxLoaded(e,e.dimensions):"failed"===e.state&&this.onParentTxFailed(e,e.error),e.on("loaded",this.onParentTxLoaded),e.on("failed",this.onParentTxFailed)}))}onChangeIsRenderable(e){this.parentTexture.setRenderableOwner(this,e)}getTextureData(){var e=this;return T(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{data:e.props});case 1:case"end":return t.stop()}}),t)})))()}static makeCacheKey(e){return!1}static resolveDefaults(e){return{texture:e.texture,x:e.x||0,y:e.y||0,width:e.width||0,height:e.height||0}}}C(_e,"z$__type__Props",void 0);class Ce extends ve{constructor(e,t){super(e),C(this,"props",void 0),this.props=Ce.resolveDefaults(t||{})}get width(){return this.props.width}set width(e){this.props.width=e}get height(){return this.props.height}set height(e){this.props.height=e}getTextureData(){return T(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{data:null,premultiplyAlpha:null});case 1:case"end":return e.stop()}}),e)})))()}static resolveDefaults(e){return{width:e.width||256,height:e.height||256}}}C(Ce,"z$__type__Props",void 0);class Re{constructor(e){C(this,"keyCache",new Map),C(this,"inverseKeyCache",new WeakMap),C(this,"txConstructors",{}),C(this,"imageWorkerManager",null),C(this,"hasCreateImageBitmap",!!self.createImageBitmap),C(this,"hasWorker",!!self.Worker),C(this,"renderer",void 0),C(this,"frameTime",0),this.hasCreateImageBitmap&&this.hasWorker&&e>0&&(this.imageWorkerManager=new me(e)),this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.registerTextureType("ImageTexture",Se),this.registerTextureType("ColorTexture",xe),this.registerTextureType("NoiseTexture",Ee),this.registerTextureType("SubTexture",_e),this.registerTextureType("RenderTexture",Ce)}registerTextureType(e,t){this.txConstructors[e]=t}loadTexture(e,t){var r,i=this.txConstructors[e];if(!i)throw new Error(`Texture type "${e}" is not registered`);if(!r){var n=i.makeCacheKey(t);n&&this.keyCache.has(n)?r=this.keyCache.get(n):(r=new i(this,t),n&&this.initTextureToCache(r,n))}return r}initTextureToCache(e,t){var r=this.keyCache,i=this.inverseKeyCache;r.set(t,e),i.set(e,t)}removeTextureFromCache(e){var t=this.inverseKeyCache,r=this.keyCache,i=t.get(e);i&&r.delete(i)}}var Ie=new Map,Be={normal:400,bold:700,bolder:900,lighter:100},ke=e=>"number"==typeof e?e:Be[e]||400;class Me{constructor(e){C(this,"textRenderers",void 0),this.textRenderers=e}addFontFace(e){for(var t in this.textRenderers){var r=this.textRenderers[t];r&&r.isFontFaceSupported(e)&&r.addFontFace(e)}}static resolveFontFace(e,t){var r=t.fontFamily,i=t.fontWeight,n=t.fontStyle,o=t.fontStretch,a=`${r}${n}${i}${o}`;if(!0===Ie.has(a))return Ie.get(a);var s=function(e,t,r,i,n){var o,a=ke(r),s=R(e);try{for(s.s();!(o=s.n()).done;){var l=o.value[t];if(l){if(1===l.size)return console.warn(`TrFontManager: Only one font face found for family: '${t}' - will be used for all weights and styles`),l.values().next().value;var d,u=new Map,h=R(l);try{for(h.s();!(d=h.n()).done;){var c=d.value,f=ke(c.descriptors.weight);if(f===a&&c.descriptors.style===i&&c.descriptors.stretch===n)return c;u.set(f,c)}}catch(v){h.e(v)}finally{h.f()}var p=`TrFontManager: No exact match: '${t} Weight: ${a} Style: ${i} Stretch: ${n}'`;if(console.error(p),400===a&&u.has(500))return u.get(500);if(500===a&&u.has(400))return u.get(400);if(a<400){for(;a>0;){if(u.has(a))return u.get(a);a-=100}a=600}for(;a<1e3;){if(u.has(a))return u.get(a);a+=100}for(a=500;a>0;){if(u.has(a))return u.get(a);a-=100}}}}catch(v){s.e(v)}finally{s.f()}}(e,r,i,n,o);return void 0!==s&&Ie.set(a,s),s}}class Le{static makeCacheKey(e){return!1}static resolveDefaults(e){return{}}}function Fe(e,t,r){var i=e.createShader(t);if(!i)throw new Error;if(e.shaderSource(i,r),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))return i;console.log(e.getShaderInfoLog(i)),e.deleteShader(i)}class Pe extends Le{constructor(e){super(),C(this,"boundBufferCollection",null),C(this,"buffersBound",!1),C(this,"program",void 0),C(this,"vao",void 0),C(this,"renderer",void 0),C(this,"glw",void 0),C(this,"attributeBuffers",void 0),C(this,"attributeLocations",void 0),C(this,"attributeNames",void 0),C(this,"uniformLocations",void 0),C(this,"uniformTypes",void 0),C(this,"supportsIndexedTextures",void 0);var t=this.renderer=e.renderer,r=this.glw=this.renderer.glw;this.supportsIndexedTextures=e.supportsIndexedTextures||!1;var i=r.isWebGl2(),n=i&&e.webgl2Extensions||!i&&e.webgl1Extensions||[],o=i?"2.0":"1.0";n.forEach((e=>{if(!r.getExtension(e))throw new Error(`Shader "${this.constructor.name}" requires extension "${e}" for WebGL ${o} but wasn't found`)}));var a=e.shaderSources||this.constructor.shaderSources;if(!a)throw new Error(`Shader "${this.constructor.name}" is missing shaderSources.`);i&&null!=a&&a.webGl2&&(a.fragment=a.webGl2.fragment,a.vertex=a.webGl2.vertex,delete a.webGl2);var s=t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS,l=a.vertex instanceof Function?a.vertex(s):a.vertex,d=a.fragment instanceof Function?a.fragment(s):a.fragment,u=Fe(r,r.VERTEX_SHADER,l),h=Fe(r,r.FRAGMENT_SHADER,d);if(!u||!h)throw new Error;var c=function(e,t,r){var i=e.createProgram();if(!i)throw new Error;if(e.attachShader(i,t),e.attachShader(i,r),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS))return i;console.log(e.getProgramInfoLog(i)),e.deleteProgram(i)}(r,u,h);if(!c)throw new Error;if(this.program=c,i){var f=r.createVertexArray();if(!f)throw new Error;this.vao=f,r.bindVertexArray(this.vao)}this.attributeLocations={},this.attributeBuffers={},this.attributeNames=[],[...e.attributes].forEach((e=>{var t=r.getAttribLocation(this.program,e);if(t<0)throw new Error(`${this.constructor.name}: Vertex shader must have an attribute "${e}"!`);var i=r.createBuffer();if(!i)throw new Error(`${this.constructor.name}: Could not create buffer for attribute "${e}"`);this.attributeLocations[e]=t,this.attributeBuffers[e]=i,this.attributeNames.push(e)})),this.uniformLocations={},this.uniformTypes={},e.uniforms.forEach((e=>{var t=r.getUniformLocation(this.program,e.name);this.uniformTypes[e.name]=e.uniform,t?this.uniformLocations[e.name]=t:console.warn(`Shader "${this.constructor.name}" could not get uniform location for "${e.name}"`)}))}bindBufferAttribute(e,t,r){var i=this.glw;i.enableVertexAttribArray(e),i.vertexAttribPointer(t,e,r.size,r.type,r.normalized,r.stride,r.offset)}disableAttribute(e){this.glw.disableVertexAttribArray(e)}disableAttributes(){for(var e in this.attributeLocations)this.disableAttribute(this.attributeLocations[e]);this.boundBufferCollection=null}canBatchShaderProps(e,t){return!1}bindRenderOp(e,t){this.bindBufferCollection(e.buffers),e.textures.length>0&&this.bindTextures(e.textures);var r=e.glw,i=e.parentHasRenderTexture;if(!e.renderToTexture||!i){if(i){var n=e.framebufferDimensions||{},o=n.width,a=n.height;this.setUniform("u_pixelRatio",1),this.setUniform("u_resolution",new Float32Array([null!=o?o:0,null!=a?a:0]))}else this.setUniform("u_pixelRatio",e.options.pixelRatio),this.setUniform("u_resolution",new Float32Array([r.canvas.width,r.canvas.height]));if(t){if(z(t,"$dimensions")){var s=t.$dimensions;s||(s=e.dimensions),this.setUniform("u_dimensions",[s.width,s.height])}if(z(t,"$alpha")){var l=t.$alpha;l||(l=e.alpha),this.setUniform("u_alpha",l)}this.bindProps(t)}}}setUniform(e,...t){this.glw.setUniform(this.uniformTypes[e],this.uniformLocations[e],...t)}bindBufferCollection(e){if(this.boundBufferCollection!==e){for(var t in this.attributeLocations){var r=e.getBuffer(t),i=e.getAttributeInfo(t);P(r,`Buffer for "${t}" not found`),P(i),this.bindBufferAttribute(this.attributeLocations[t],r,i)}this.boundBufferCollection=e}}bindProps(e){}bindTextures(e){}attach(){this.glw.useProgram(this.program),this.glw.useProgram(this.program),this.glw.isWebGl2()&&this.vao&&this.glw.bindVertexArray(this.vao)}detach(){this.disableAttributes()}}C(Pe,"shaderSources",void 0);class Ne extends Pe{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}}C(Ne,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio;\n        vec2 screenSpace = vec2(2.0 / u_resolution.x, -2.0 / u_resolution.y);\n\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        gl_Position = vec4(normalized.x * screenSpace.x - 1.0, normalized.y * -abs(screenSpace.y) + 1.0, 0.0, 1.0);\n        gl_Position.y = -sign(screenSpace.y) * gl_Position.y;\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    "});class Ue extends Pe{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]}),C(this,"supportsIndexedTextures",!0)}bindTextures(e){var t=this.renderer,r=this.glw;if(e.length>t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error(`DefaultShaderBatched: Cannot bind more than ${t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS} textures`);e.forEach(((e,t)=>{r.activeTexture(t),r.bindTexture(e.ctxTexture)}));var i=Array.from(Array(e.length).keys());this.setUniform("u_textures[0]",i)}}C(Ue,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:e=>`\n      #define txUnits ${e}\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[${e}], int idx, vec2 uv) {\n        ${Array.from(Array(e).keys()).map((e=>`\n          ${0!==e?"else ":""}if (idx == ${e}) {\n            return texture2D(textures[${e}], uv);\n          }\n        `)).join("")}\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    `});class De{static getEffectKey(e){return""}static getMethodParameters(e,t){var r=[];for(var i in e){var n=e[i],o="";n.size&&(o=`[${n.size(t)}]`),r.push(`${n.type} ${i}${o}`)}return r.join(",")}constructor(e){C(this,"priority",1),C(this,"name",""),C(this,"ref",void 0),C(this,"target",void 0),C(this,"passParameters",""),C(this,"declaredUniforms",""),C(this,"uniformInfo",{});var t=e.ref,r=e.target,i=e.props,n=void 0===i?{}:i;this.ref=t,this.target=r;var o={},a=[],s="",l=this.constructor.uniforms||{};for(var d in l){var u=l[d],h=u.type,c=`${t}_${d}`,f="";u.size&&(f=`[${u.size(n)}]`),a.push(c),s+=`uniform ${h} ${c}${f};`,o[d]={name:c,uniform:l[d].method}}this.passParameters=a.join(","),this.declaredUniforms=s,this.uniformInfo=o}static resolveDefaults(e){return{}}static makeEffectKey(e){return!1}}C(De,"uniforms",{}),C(De,"methods",void 0),C(De,"onShaderMask",void 0),C(De,"onColorize",void 0),C(De,"onEffectMask",void 0);var Oe=new Map,ze=(e,t)=>{var r,i=JSON.stringify(e);if(Oe.has(i))return Oe.get(i);for(var n=[],o=(e=null!==(r=e)&&void 0!==r?r:[]).length,a=0;a<o;a++){for(var s=e[a],l=s.name,d=s.type,u=s.props,h={name:l,type:d,props:{}},c=t[d],f=c.resolveDefaults(u),p=c.uniforms,v=Object.keys(p),g=v.length,m=0;m<g;m++){var x=v[m],y=p[x],b={value:f[x],programValue:void 0,updateOnBind:y.updateOnBind||!1,hasValidator:void 0!==y.validator,hasProgramValueUpdater:void 0!==y.updateProgramValue},A=b.hasValidator&&y.validator(f[x],f)||f[x];f[x]!==A&&(b.validatedValue=A),b.hasProgramValueUpdater&&y.updateProgramValue(b),void 0===b.programValue&&(b.programValue=b.value),h.props[x]=b}n.push(h)}return Oe.set(i,n),n};class Ge extends Pe{constructor(e,t,r){var i=Ge.createShader(t,r);super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...i.uniforms],shaderSources:{vertex:i.vertex,fragment:i.fragment}}),C(this,"effects",[]),this.effects=i.effects}bindTextures(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}bindProps(e){for(var t=e.effects,r=t.length,i=0;i<r;i++)for(var n=t[i],o=this.effects[i].uniformInfo,a=Object.keys(n.props),s=a.length,l=0;l<s;l++){var d=a[l];if(!0===n.props[d].updateOnBind){var u,h=null===(u=this.renderer.shManager.getRegisteredEffects()[n.type])||void 0===u?void 0:u.uniforms[d];null==h||h.updateProgramValue(n.props[d],e)}this.setUniform(o[d].name,n.props[d].programValue)}}canBatchShaderProps(e,t){if(e.$dimensions.width!==t.$dimensions.width||e.$dimensions.height!==t.$dimensions.height||e.effects.length!==t.effects.length)return!1;for(var r=e.effects.length,i=0;i<r;i++){var n=e.effects[i],o=t.effects[i];if(n.type!==o.type)return!1;for(var a in n.props)if(o.props&&!o.props[a]||n.props[a].value!==o.props[a].value)return!1}return!0}static createShader(e,t){var r={},i={},n="",o=[],a=[],s=e.effects.map((e=>{var i=t[e.type],s=i.getEffectKey(e.props||{});r[s]=r[s]?++r[s]:1;var l=r[s];1===l&&a.push({key:s,type:e.type,props:e.props});var d=new i({ref:`${s}${1===l?"":l}`,target:s,props:e.props});return n+=d.declaredUniforms,o.push(...Object.values(d.uniformInfo)),d})),l="";null==a||a.forEach((e=>{var r,n=t[e.type],o=n.resolveDefaults(null!==(r=e.props)&&void 0!==r?r:{}),a=[];for(var s in n.methods){var d=s,u=n.methods[s];i[s]&&i[s]!==u&&(d=Ge.resolveMethodDuplicate(s,u,i)),i[d]=u.replace("function",d),a.push({m:s,cm:d})}var h=n.onShaderMask instanceof Function?n.onShaderMask(o):n.onShaderMask,c=n.onColorize instanceof Function?n.onColorize(o):n.onColorize,f=n.onEffectMask instanceof Function?n.onEffectMask(o):n.onEffectMask;a.forEach((e=>{var t=e.m,r=e.cm,i=new RegExp(`\\$${t}`,"g");h&&(h=h.replace(i,r)),c&&(c=c.replace(i,r)),f&&(f=f.replace(i,r))}));var p=n.getMethodParameters(n.uniforms,o),v=p.length>0?`, ${p}`:"";h&&(l+=`\n        float fx_${e.key}_onShaderMask(float shaderMask ${v}) {\n          ${h}\n        }\n        `),c&&(l+=`\n          vec4 fx_${e.key}_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor${v}) {\n            ${c}\n          }\n        `),f&&(l+=`\n          vec4 fx_${e.key}_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor${v}) {\n            ${f}\n          }\n        `)}));var d="";for(var u in i)d+=i[u];for(var h="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",c="\n\n    ",f=0;f<s.length;f++){var p=s[f],v=p.passParameters.length>0?`, ${p.passParameters}`:"",g=t[p.name];g.onShaderMask&&(c+=`\n        shaderMask = fx_${p.target}_onShaderMask(shaderMask ${v});\n        `),g.onColorize&&(c+=`\n        maskColor = fx_${p.target}_onColorize(shaderMask, maskColor, shaderColor${v});\n        `),g.onEffectMask&&(h=`fx_${p.target}_onEffectMask(shaderMask, maskColor, shaderColor${v})`);var m=s[f+1];(void 0===m||t[m.name].onEffectMask)&&(c+=`\n          shaderColor = ${h};\n        `)}return{effects:s,uniforms:o,fragment:Ge.fragment(n,d,l,c),vertex:Ge.vertex()}}static resolveMethodDuplicate(e,t,r,i=0){var n=e+(i>0?i:"");return r[n]&&r[n]!==t?this.resolveMethodDuplicate(e,t,r,++i):n}static resolveDefaults(e,t){var r;return P(t),{effects:ze(null!==(r=e.effects)&&void 0!==r?r:[],t),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(e,t){var r,i="";return null===(r=e.effects)||void 0===r||r.forEach((e=>{var r=t[e.type].getEffectKey(e.props||{});i+=`,${r}`})),`DynamicShader${i}`}}C(Ge,"z$__type__Props",void 0),C(Ge,"vertex",(()=>"\n    # ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  ")),C(Ge,"fragment",((e,t,r,i)=>`\n    # ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ${e}\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n\n    ${t}\n\n    ${r}\n\n    void main() {\n      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ${i}\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  `));class Xe extends Pe{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(e){return{radius:e.radius||10,$dimensions:{width:0,height:0}}}bindTextures(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}bindProps(e){var t=Math.min(e.$dimensions.width,e.$dimensions.height)/(2*e.radius);this.setUniform("u_radius",e.radius*Math.min(t,1))}canBatchShaderProps(e,t){return e.radius===t.radius&&e.$dimensions.width===t.$dimensions.width&&e.$dimensions.height===t.$dimensions.height}}C(Xe,"z$__type__Props",void 0),C(Xe,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    "});var We=new Float32Array([1,0,0,0,1,0,0,0,1]);class Ve extends Pe{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(e){var t=this.glw;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}bindProps(e){var t=Ve.resolveDefaults(e);for(var r in t)if("transform"===r)this.setUniform("u_transform",!1,t[r]);else if("scrollY"===r)this.setUniform("u_scrollY",t[r]);else if("color"===r){var i=H(t.color);this.setUniform("u_color",i)}else"size"===r?this.setUniform("u_size",t[r]):"distanceRange"===r?this.setUniform("u_distanceRange",t[r]):"debug"===r&&this.setUniform("u_debug",t[r]?1:0)}static resolveDefaults(e={}){var t,r,i,n,o,a;return{transform:null!==(t=e.transform)&&void 0!==t?t:We,scrollY:null!==(r=e.scrollY)&&void 0!==r?r:0,color:null!==(i=e.color)&&void 0!==i?i:4294967295,size:null!==(n=e.size)&&void 0!==n?n:16,distanceRange:null!==(o=e.distanceRange)&&void 0!==o?o:1,debug:null!==(a=e.debug)&&void 0!==a&&a}}}C(Ve,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n\n        // Calculate screen space with pixel ratio\n        vec2 screenSpace = (transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1);\n\n        gl_Position = vec4(screenSpace, 0.0, 1.0);\n        v_texcoord = a_textureCoordinate;\n\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRECISION_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    "});var He=e=>{void 0===e.programValue&&(e.programValue=new Float32Array(4));var t=e.value,r=e.programValue;r[0]=(t>>>24)/255,r[1]=(t>>>16&255)/255,r[2]=(t>>>8&255)/255,r[3]=(255&t)/255},Ye=e=>{var t=e.validatedValue||e.value;if(e.programValue instanceof Float32Array)for(var r=t.length,i=e.programValue,n=0;n<r;n++)i[n]=t[n];else e.programValue=new Float32Array(t)},je=e=>{var t=Array.isArray(e);return t?t&&4===e.length?e:t&&2===e.length?[e[0],e[1],e[0],e[1]]:t&&3===e.length?[e[0],e[1],e[2],e[0]]:[e[0],e[0],e[0],e[0]]:[e,e,e,e]},Ke=(e,t)=>{void 0===e.programValue&&(e.programValue=new Float32Array(4));var r=e.programValue,i=e.validatedValue||e.value;if(void 0===t&&void 0===e.$dimensions)return r[0]=i[0],r[1]=i[1],r[2]=i[2],void(r[3]=i[3]);var n=e.$dimensions;if(void 0!==t){var o=t.$dimensions;if(void 0!==n&&(n.width===o.width||n.height===o.height))return;void 0===n&&(n={width:null==o?void 0:o.width,height:null==o?void 0:o.height},e.$dimensions=n)}var a=n,s=a.width,l=a.height,d=_(i,4),u=d[0],h=d[1],c=d[2],f=d[3],p=Math.min(Math.min(Math.min(s/Math.max(s,u+h),s/Math.max(s,c+f)),Math.min(l/Math.max(l,u+c),l/Math.max(l,h+f))),1);r[0]=u*p,r[1]=h*p,r[2]=c*p,r[3]=f*p};class Qe extends De{constructor(...e){super(...e),C(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(e){var t;return{radius:null!==(t=e.radius)&&void 0!==t?t:10}}}C(Qe,"z$__type__Props",void 0),C(Qe,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:je,updateProgramValue:Ke}}),C(Qe,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),C(Qe,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);\n  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);\n  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  "),C(Qe,"onEffectMask","\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  ");class $e extends De{constructor(...e){super(...e),C(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(e){var t,r;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(r=e.color)&&void 0!==r?r:4294967295}}}C($e,"z$__type__Props",void 0),C($e,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:He,method:"uniform4fv",type:"vec4"}}),C($e,"onEffectMask","\n  float intR = shaderMask + 1.0;\n  float mask = clamp(intR + width, 0.0, 1.0) - clamp(intR, 0.0, 1.0);\n  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);\n  "),C($e,"onColorize","\n    return color;\n  ");class qe extends De{constructor(...e){super(...e),C(this,"name","linearGradient")}static getEffectKey(e){return`linearGradient${e.colors.length}`}static resolveDefaults(e){var t,r,i=null!==(t=e.colors)&&void 0!==t?t:[4278190080,4294967295],n=e.stops||[];if(0===n.length||n.length!==i.length){for(var o=i.length,a=0,s=n;a<o;a++)n[a]?(s[a]=n[a],void 0===n[a-1]&&void 0!==s[a-2]&&(s[a-1]=s[a-2]+(n[a]-s[a-2])/2)):s[a]=a*(1/(i.length-1));n=s}return{colors:i,stops:n,angle:null!==(r=e.angle)&&void 0!==r?r:0}}}I=qe,C(qe,"z$__type__Props",void 0),C(qe,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:e=>e.reduce(((e,t)=>e.concat(H(t))),[]),updateProgramValue:Ye,size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),C(qe,"methods",{fromLinear:"\n      vec4 function(vec4 linearRGB) {\n        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n        vec4 lower = linearRGB * vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",toLinear:"\n      vec4 function(vec4 sRGB) {\n        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n        vec4 lower = sRGB/vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",calcPoint:"\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    "}),C(qe,"ColorLoop",(e=>{for(var t="",r=2;r<e;r++)t+=`colorOut = mix(colorOut, colors[${r}], clamp((dist - stops[${r-1}]) / (stops[${r}] - stops[${r-1}]), 0.0, 1.0));`;return t})),C(qe,"onColorize",(e=>{var t=e.colors.length||1;return`\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));\n      ${I.ColorLoop(t)}\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    `}));class Ze extends De{constructor(...e){super(...e),C(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(e){var t;return{amount:null!==(t=e.amount)&&void 0!==t?t:1}}}C(Ze,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),C(Ze,"onColorize","\n    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;\n    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);\n  ");class Je extends De{constructor(...e){super(...e),C(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(e){var t,r;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(r=e.color)&&void 0!==r?r:4294967295}}}C(Je,"z$__type__Props",void 0),C(Je,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:He,method:"uniform4fv",type:"vec4"}}),C(Je,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),C(Je,"onEffectMask","\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),C(Je,"onColorize","\n    return color;\n  ");class et extends De{constructor(...e){super(...e),C(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(e){var t,r;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(r=e.color)&&void 0!==r?r:4294967295}}}C(et,"z$__type__Props",void 0),C(et,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:He,method:"uniform4fv",type:"vec4"}}),C(et,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),C(et,"onEffectMask","\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),C(et,"onColorize","\n    return color;\n  ");class tt extends De{constructor(...e){super(...e),C(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(e){var t,r;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(r=e.color)&&void 0!==r?r:4294967295}}}C(tt,"z$__type__Props",void 0),C(tt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:He,method:"uniform4fv",type:"vec4"}}),C(tt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),C(tt,"onEffectMask","\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),C(tt,"onColorize","\n    return color;\n  ");class rt extends De{constructor(...e){super(...e),C(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(e){var t,r;return{width:null!==(t=e.width)&&void 0!==t?t:10,color:null!==(r=e.color)&&void 0!==r?r:4294967295}}}C(rt,"z$__type__Props",void 0),C(rt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:He,method:"uniform4fv",type:"vec4"}}),C(rt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),C(rt,"onEffectMask","\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),C(rt,"onColorize","\n    return color;\n  ");class it extends De{constructor(...e){super(...e),C(this,"name","glitch")}static getEffectKey(e){return"glitch"}static resolveDefaults(e){var t,r,i,n,o;return{amplitude:null!==(t=e.amplitude)&&void 0!==t?t:.2,narrowness:null!==(r=e.narrowness)&&void 0!==r?r:4,blockiness:null!==(i=e.blockiness)&&void 0!==i?i:2,minimizer:null!==(n=e.minimizer)&&void 0!==n?n:8,time:null!==(o=e.time)&&void 0!==o?o:Date.now()}}}C(it,"z$__type__Props",void 0),C(it,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",updateOnBind:!0,updateProgramValue:e=>{var t=e.value=(Date.now()-e.value)%1e3;e.programValue=t},type:"float"}}),C(it,"methods",{rand:"\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    ",noise:"\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    ",fbm:"\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    "}),C(it,"onColorize","\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  ");class nt extends De{constructor(...e){super(...e),C(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(e){var t;return{fade:null!==(t=e.fade)&&void 0!==t?t:10}}}C(nt,"z$__type__Props",void 0),C(nt,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:je,updateProgramValue:e=>{var t=e.validatedValue||e.value;if(e.programValue instanceof Float32Array){var r=e.programValue;r[0]=t[0],r[1]=t[1],r[2]=t[1],r[3]=t[1]}else e.programValue=new Float32Array(t)}}}),C(nt,"onColorize","\n  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  ");class ot extends De{constructor(...e){super(...e),C(this,"name","radialGradient")}static getEffectKey(e){return`radialGradient${e.colors.length}`}static resolveDefaults(e){var t,r,i,n,o,a=null!==(t=e.colors)&&void 0!==t?t:[4278190080,4294967295],s=e.stops||[];if(0===s.length||s.length!==a.length){for(var l=a.length,d=0,u=s;d<l;d++)s[d]?(u[d]=s[d],void 0===s[d-1]&&void 0!==u[d-2]&&(u[d-1]=u[d-2]+(s[d]-u[d-2])/2)):u[d]=d*(1/(a.length-1));s=u}return{colors:a,stops:s,width:null!==(r=e.width)&&void 0!==r?r:0,height:null!==(i=null!==(n=e.height)&&void 0!==n?n:e.width)&&void 0!==i?i:0,pivot:null!==(o=e.pivot)&&void 0!==o?o:[.5,.5]}}}B=ot,C(ot,"z$__type__Props",void 0),C(ot,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],updateProgramValue:e=>{var t=e.validatedValue||e.value;if(e.programValue instanceof Float32Array){var r=e.programValue;r[0]=t[0],r[1]=t[1]}else e.programValue=new Float32Array(t)},method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:e=>e.reduce(((e,t)=>e.concat(H(t))),[]),updateProgramValue:Ye,size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),C(ot,"ColorLoop",(e=>{for(var t="",r=2;r<e;r++)t+=`colorOut = mix(colorOut, colors[${r}], clamp((dist - stops[${r-1}]) / (stops[${r}] - stops[${r-1}]), 0.0, 1.0));`;return t})),C(ot,"onColorize",(e=>{var t=e.colors.length||1;return`\n      vec2 point = v_textureCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = mix(colors[0], colors[1], stopCalc);\n      ${B.ColorLoop(t)}\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    `}));class at extends De{constructor(...e){super(...e),C(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(e){var t,r,i,n,o,a,s;return{width:null!==(t=e.width)&&void 0!==t?t:10,progress:null!==(r=e.progress)&&void 0!==r?r:.5,offset:null!==(i=e.offset)&&void 0!==i?i:0,range:null!==(n=e.range)&&void 0!==n?n:2*Math.PI,rounded:null!==(o=e.rounded)&&void 0!==o&&o,radius:null!==(a=e.radius)&&void 0!==a?a:1,color:null!==(s=e.color)&&void 0!==s?s:4294967295}}}C(at,"z$__type__Props",void 0),C(at,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:e=>e?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,updateProgramValue:He,method:"uniform4fv",type:"vec4"}}),C(at,"methods",{rotateUV:"\n    vec2 function(vec2 uv, float d) {\n      float s = sin(d);\n      float c = cos(d);\n      mat2 rotMatrix = mat2(c, -s, s, c);\n      return uv * rotMatrix;\n    }\n    ",drawDot:"\n    float function(vec2 uv, vec2 p, float r) {\n      uv += p;\n      float circle = length(uv) - r;\n      return clamp(-circle, 0.0, 1.0);\n    }\n    "}),C(at,"onEffectMask","\n    float outerRadius = radius * u_dimensions.y * 0.5;\n\n    float endAngle = range * progress - 0.0005;\n\n    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;\n\n    uv = $rotateUV(uv, -(offset));\n    float linewidth = width * u_pixelRatio;\n    float circle = length(uv) - (outerRadius - linewidth) ;\n    circle = abs(circle) - linewidth;\n    circle = clamp(-circle, 0.0, 1.0);\n\n    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);\n    float p = endAngle / (PI * 2.);\n\n    circle *= step(fract(angle), fract(p));\n\n    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));\n    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));\n\n    return mix(shaderColor, maskColor, circle);\n  "),C(at,"onColorize","\n    return color;\n  ");class st extends De{constructor(...e){super(...e),C(this,"name","holePunch")}static getEffectKey(){return"holePunch"}static resolveDefaults(e){var t;return{x:e.x||0,y:e.y||0,width:e.width||50,height:e.height||50,radius:null!==(t=e.radius)&&void 0!==t?t:0}}}C(st,"z$__type__Props",void 0),C(st,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",updateOnBind:!0,validator:je,updateProgramValue:Ke}}),C(st,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),C(st,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  vec2 size = vec2(width, height) * 0.5;\n  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);\n  vec2 pos = basePos - size;\n  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);\n  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);\n  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);\n  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);\n  return $boxDist(pos, size, r);\n  "),C(st,"onEffectMask","\n  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));\n  ");class lt extends Le{constructor(e){super(),C(this,"shType",void 0),this.shType=e,"RoundedRectangle"!==e&&console.warn("Unsupported shader:",e)}bindRenderOp(){}bindProps(){}attach(){}detach(){}}class dt{constructor(e,t,r,i){var n=this;C(this,"type",void 0),C(this,"shader",void 0),C(this,"resolvedProps",void 0),C(this,"props",void 0),this.type=e,this.shader=t,this.resolvedProps=r;for(var o=Object.keys(r),a=o.length,s={},l=function(){var e=o[d];Object.defineProperty(s,e,{get:()=>n.resolvedProps[e],set:t=>{n.resolvedProps[e]=t,i.requestRender()}})},d=0;d<a;d++)l();this.props=s}getResolvedProps(){return this.resolvedProps}}class ut{constructor(e,t,r){var i=this;C(this,"shader",void 0),C(this,"resolvedProps",void 0),C(this,"props",void 0),C(this,"type",void 0),this.shader=e,this.type="DynamicShader",this.resolvedProps=t;for(var n=r.getRegisteredEffects(),o={},a=t.effects,s=a.length,l=function(e){var t=a[e],s=t.name,l=t.props,d=t.type;if(void 0===s)return 1;for(var u={},h=Object.keys(l),c=h.length,f=function(){var t=h[p];Object.defineProperty(u,t,{get:()=>i.resolvedProps.effects[e].props[t].value,set:o=>{var a,s,u=i.resolvedProps.effects[e].props[t];(u.value=o,u.hasValidator)&&(o=u.validatedValue=null===(a=n[d].uniforms[t])||void 0===a?void 0:a.validator(o,l));u.hasProgramValueUpdater?null===(s=n[d].uniforms[t])||void 0===s||s.updateProgramValue(u):u.programValue=o;r.renderer.stage.requestRender()}})},p=0;p<c;p++)f();Object.defineProperty(o,s,{get:()=>u})},d=0;d<s;d++)l(d);this.props=o}getResolvedProps(){return this.resolvedProps}}class ht{constructor(){C(this,"shCache",new Map),C(this,"shConstructors",{}),C(this,"attachedShader",null),C(this,"effectConstructors",{}),C(this,"renderer",void 0),this.registerShaderType("DefaultShader",Ne),this.registerShaderType("DefaultShaderBatched",Ue),this.registerShaderType("RoundedRectangle",Xe),this.registerShaderType("DynamicShader",Ge),this.registerShaderType("SdfShader",Ve),this.registerEffectType("border",$e),this.registerEffectType("borderBottom",tt),this.registerEffectType("borderLeft",rt),this.registerEffectType("borderRight",Je),this.registerEffectType("borderTop",et),this.registerEffectType("fadeOut",nt),this.registerEffectType("linearGradient",qe),this.registerEffectType("radialGradient",ot),this.registerEffectType("grayscale",Ze),this.registerEffectType("glitch",it),this.registerEffectType("radius",Qe),this.registerEffectType("radialProgress",at),this.registerEffectType("holePunch",st)}registerShaderType(e,t){this.shConstructors[e]=t}registerEffectType(e,t){this.effectConstructors[e]=t}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(e,t){if(!this.renderer)throw new Error("Renderer is not been defined");var r=this.shConstructors[e];if(!r)throw new Error(`Shader type "${e}" is not registered`);if("canvas"===this.renderer.mode&&r.prototype instanceof Pe)return this._createShaderCtr(e,new lt(e),t);if("DynamicShader"===e)return this.loadDynamicShader(t);var i=r.resolveDefaults(t),n=r.makeCacheKey(i)||r.name;if(n&&this.shCache.has(n))return this._createShaderCtr(e,this.shCache.get(n),i);var o=new r(this.renderer,t);return n&&this.shCache.set(n,o),this._createShaderCtr(e,o,i)}loadDynamicShader(e){if(!this.renderer)throw new Error("Renderer is not been defined");var t=Ge.resolveDefaults(e,this.effectConstructors),r=Ge.makeCacheKey(t,this.effectConstructors);if(r&&this.shCache.has(r))return this._createDynShaderCtr(this.shCache.get(r),t);var i=new Ge(this.renderer,e,this.effectConstructors);return r&&this.shCache.set(r,i),this._createDynShaderCtr(i,t)}_createShaderCtr(e,t,r){return new dt(e,t,r,this.renderer.stage)}_createDynShaderCtr(e,t){return new ut(e,t,this)}useShader(e){this.attachedShader!==e&&(this.attachedShader&&this.attachedShader.detach(),e.attach(),this.attachedShader=e)}}var ct={x:(e,t)=>{e.props.x=t},y:(e,t)=>{e.props.y=t},width:(e,t)=>{e.props.width=t},height:(e,t)=>{e.props.height=t},color:(e,t)=>{e.props.color=t},zIndex:(e,t)=>{e.props.zIndex=t},fontFamily:(e,t)=>{e.props.fontFamily=t},fontWeight:(e,t)=>{e.props.fontWeight=t},fontStyle:(e,t)=>{e.props.fontStyle=t},fontStretch:(e,t)=>{e.props.fontStretch=t},fontSize:(e,t)=>{e.props.fontSize=t},text:(e,t)=>{e.props.text=t},textAlign:(e,t)=>{e.props.textAlign=t},contain:(e,t)=>{e.props.contain=t},offsetY:(e,t)=>{e.props.offsetY=t},scrollable:(e,t)=>{e.props.scrollable=t},scrollY:(e,t)=>{e.props.scrollY=t},letterSpacing:(e,t)=>{e.props.letterSpacing=t},lineHeight:(e,t)=>{e.props.lineHeight=t},maxLines:(e,t)=>{e.props.maxLines=t},textBaseline:(e,t)=>{e.props.textBaseline=t},verticalAlign:(e,t)=>{e.props.verticalAlign=t},overflowSuffix:(e,t)=>{e.props.overflowSuffix=t},debug:(e,t)=>{e.props.debug=t}};class ft{constructor(e){C(this,"stage",void 0),C(this,"set",void 0),this.stage=e;var t=E(E({},ct),this.getPropertySetters());this.set=Object.freeze(Object.fromEntries(Object.entries(t).map((([e,t])=>[e,(r,i)=>{r.props[e]!==i&&(t(r,i),this.stage.requestRender())}]))))}setStatus(e,t,r){e.status!==t&&(e.status=t,e.emitter.emit(t,r))}setIsRenderable(e,t){e.isRenderable=t}destroyState(e){this.setStatus(e,"destroyed"),e.emitter.removeAllListeners()}scheduleUpdateState(e){e.updateScheduled||(e.updateScheduled=!0,queueMicrotask((()=>{"destroyed"!==e.status&&(e.updateScheduled=!1,this.updateState(e))})))}}class pt{constructor(){C(this,"data",{})}reset(){this.data={}}increment(e){this.data[e]||(this.data[e]=0),this.data[e]++}getData(){return E({},this.data)}}class vt{constructor(e,t){C(this,"stage",void 0),C(this,"memUsed",0),C(this,"loadedTextures",new Map),C(this,"criticalThreshold",void 0),C(this,"targetThreshold",void 0),C(this,"cleanupInterval",void 0),C(this,"debugLogging",void 0),C(this,"lastCleanupTime",0),C(this,"criticalCleanupRequested",!1),C(this,"frameTime",0),this.stage=e;var r=t.criticalThreshold;this.criticalThreshold=Math.round(r);var i=Math.max(0,Math.min(1,t.targetThresholdLevel));if(this.targetThreshold=Math.round(r*i),this.cleanupInterval=t.cleanupInterval,this.debugLogging=t.debugLogging,t.debugLogging){var n=0;setInterval((()=>{n!==this.memUsed&&(n=this.memUsed,console.log(`[TextureMemoryManager] Memory used: ${le(this.memUsed)} mb / ${le(this.criticalThreshold)} mb (${(this.memUsed/this.criticalThreshold*100).toFixed(1)}%)`))}),1e3)}0===r&&(this.setTextureMemUse=()=>{})}setTextureMemUse(e,t){this.loadedTextures.has(e)&&(this.memUsed-=this.loadedTextures.get(e)),0!==t?(this.memUsed+=t,this.loadedTextures.set(e,t),this.memUsed>this.criticalThreshold&&(this.criticalCleanupRequested=!0)):this.loadedTextures.delete(e)}checkCleanup(){return this.criticalCleanupRequested||this.memUsed>this.targetThreshold&&this.frameTime-this.lastCleanupTime>=this.cleanupInterval}cleanup(){var e=this.criticalCleanupRequested;this.lastCleanupTime=this.frameTime,this.criticalCleanupRequested=!1,e&&this.stage.queueFrameEvent("criticalCleanup",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),this.debugLogging&&console.log(`[TextureMemoryManager] Cleaning up textures. Critical: ${e}`);var t,r=[...this.loadedTextures.keys()].sort(((e,t)=>{var r=e.renderable,i=t.renderable;return r===i?e.lastRenderableChangeTime-t.lastRenderableChangeTime:r?1:i?-1:0})),i=this.targetThreshold,n=this.stage.txManager,o=R(r);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a.renderable)break;if(!1===a.preventCleanup&&(a.ctxTexture.free(),n.removeTextureFromCache(a)),this.memUsed<=i)break}}catch(s){o.e(s)}finally{o.f()}this.memUsed>=this.criticalThreshold&&(this.stage.queueFrameEvent("criticalCleanupFailed",{memUsed:this.memUsed,criticalThreshold:this.criticalThreshold}),console.warn(`[TextureMemoryManager] Memory usage above critical threshold after cleanup: ${this.memUsed}`))}getMemoryInfo(){var e=0,t=[...this.loadedTextures.keys()].reduce(((t,r)=>(e+=r.renderable?1:0,t+(r.renderable?this.loadedTextures.get(r):0))),0);return{criticalThreshold:this.criticalThreshold,targetThreshold:this.targetThreshold,renderableMemUsed:t,memUsed:this.memUsed,renderableTexturesLoaded:e,loadedTextures:this.loadedTextures.size}}}class gt{constructor(e,t){C(this,"textureSource",void 0),C(this,"memManager",void 0),this.memManager=e,this.textureSource=t}setTextureMemUse(e){this.memManager.setTextureMemUse(this.textureSource,e)}get renderable(){return this.textureSource.renderable}}class mt{constructor(e){C(this,"options",void 0),C(this,"mode",void 0),C(this,"stage",void 0),C(this,"txManager",void 0),C(this,"txMemManager",void 0),C(this,"shManager",void 0),C(this,"rttNodes",[]),this.options=e,this.stage=e.stage,this.txManager=e.txManager,this.txMemManager=e.txMemManager,this.shManager=e.shManager}}class xt extends fe{constructor(e,t,r){super(e,t),C(this,"textRenderer",void 0),C(this,"trState",void 0),C(this,"_textRendererOverride",null),C(this,"onTextLoaded",(()=>{var e=this.contain,t=this.trState.props.width,r=this.trState.props.height,i=this.trState.textW||0,n=this.trState.textH||0;"both"===e?(this.props.width=t,this.props.height=r):"width"===e?(this.props.width=t,this.props.height=n):"none"===e&&(this.props.width=i,this.props.height=n),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})})),C(this,"onTextFailed",((e,t)=>{this.emit("failed",{type:"text",error:t})})),this._textRendererOverride=t.textRendererOverride,this.textRenderer=r;var i=this.createState({x:this.absX,y:this.absY,width:t.width,height:t.height,textAlign:t.textAlign,color:t.color,zIndex:t.zIndex,contain:t.contain,scrollable:t.scrollable,scrollY:t.scrollY,offsetY:t.offsetY,letterSpacing:t.letterSpacing,debug:t.debug,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStretch:t.fontStretch,fontStyle:t.fontStyle,fontWeight:t.fontWeight,text:t.text,lineHeight:t.lineHeight,maxLines:t.maxLines,textBaseline:t.textBaseline,verticalAlign:t.verticalAlign,overflowSuffix:t.overflowSuffix});this.trState=i}get width(){return this.props.width}set width(e){this.props.width=e,this.textRenderer.set.width(this.trState,e),"none"===this.contain&&this.setUpdateType(he.Local)}get height(){return this.props.height}set height(e){this.props.height=e,this.textRenderer.set.height(this.trState,e),"both"!==this.contain&&this.setUpdateType(he.Local)}get color(){return this.trState.props.color}set color(e){this.textRenderer.set.color(this.trState,e)}get text(){return this.trState.props.text}set text(e){this.textRenderer.set.text(this.trState,e)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(e){this._textRendererOverride=e,this.textRenderer.destroyState(this.trState);var t=this.stage.resolveTextRenderer(this.trState.props,this._textRendererOverride);t?(this.textRenderer=t,this.trState=this.createState(this.trState.props)):console.warn("Text Renderer not found for font",this.trState.props.fontFamily)}get fontSize(){return this.trState.props.fontSize}set fontSize(e){this.textRenderer.set.fontSize(this.trState,e)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(e){this.textRenderer.set.fontFamily(this.trState,e)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(e){this.textRenderer.set.fontStretch(this.trState,e)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(e){this.textRenderer.set.fontStyle(this.trState,e)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(e){this.textRenderer.set.fontWeight(this.trState,e)}get textAlign(){return this.trState.props.textAlign}set textAlign(e){this.textRenderer.set.textAlign(this.trState,e)}get contain(){return this.trState.props.contain}set contain(e){this.textRenderer.set.contain(this.trState,e)}get scrollable(){return this.trState.props.scrollable}set scrollable(e){this.textRenderer.set.scrollable(this.trState,e)}get scrollY(){return this.trState.props.scrollY}set scrollY(e){this.textRenderer.set.scrollY(this.trState,e)}get offsetY(){return this.trState.props.offsetY}set offsetY(e){this.textRenderer.set.offsetY(this.trState,e)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(e){this.textRenderer.set.letterSpacing(this.trState,e)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(e){this.textRenderer.set.lineHeight(this.trState,e)}get maxLines(){return this.trState.props.maxLines}set maxLines(e){this.textRenderer.set.maxLines(this.trState,e)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(e){this.textRenderer.set.textBaseline(this.trState,e)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(e){this.textRenderer.set.verticalAlign(this.trState,e)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(e){this.textRenderer.set.overflowSuffix(this.trState,e)}get debug(){return this.trState.props.debug}set debug(e){this.textRenderer.set.debug(this.trState,e)}update(e,t){super.update(e,t),P(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkRenderProps(){return!(!this.trState||""===this.trState.props.text)||super.checkRenderProps()}onChangeIsRenderable(e){super.onChangeIsRenderable(e),this.textRenderer.setIsRenderable(this.trState,e)}renderQuads(e){var t;if(P(this.globalTransform),this.textRenderer.renderQuads){if(this.parentHasRenderTexture){if(!e.renderToTextureActive)return;if(this.parentRenderTexture!==e.activeRttNode)return}this.parentHasRenderTexture&&null!==(t=this.props.parent)&&void 0!==t&&t.rtt&&(this.globalTransform=Z.identity(),this.localTransform&&this.globalTransform.multiply(this.localTransform)),P(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha,this.parentHasRenderTexture,this.framebufferDimensions)}else super.renderQuads(e)}destroy(){super.destroy(),this.textRenderer.destroyState(this.trState)}createState(e){var t=this.textRenderer.createState(e,this);return t.emitter.on("loaded",this.onTextLoaded),t.emitter.on("failed",this.onTextFailed),this.textRenderer.scheduleUpdateState(t),t}}class yt{constructor(e){C(this,"options",void 0),C(this,"animationManager",void 0),C(this,"txManager",void 0),C(this,"txMemManager",void 0),C(this,"fontManager",void 0),C(this,"textRenderers",void 0),C(this,"shManager",void 0),C(this,"renderer",void 0),C(this,"root",void 0),C(this,"boundsMargin",void 0),C(this,"defShaderCtr",void 0),C(this,"eventBus",void 0),C(this,"deltaTime",0),C(this,"lastFrameTime",0),C(this,"currentFrameTime",0),C(this,"fpsNumFrames",0),C(this,"fpsElapsedTime",0),C(this,"renderRequested",!1),C(this,"frameEventQueue",[]),C(this,"fontResolveMap",{}),C(this,"contextSpy",null),this.options=e;var t=e.canvas,r=e.clearColor,i=e.appWidth,n=e.appHeight,o=e.boundsMargin,a=e.enableContextSpy,s=e.numImageWorkers,l=e.textureMemory,d=e.renderEngine,u=e.fontEngines;this.eventBus=e.eventBus,this.txManager=new Re(s),this.txMemManager=new vt(this,l),this.shManager=new ht,this.animationManager=new pe,this.contextSpy=a?new pt:null;var h=[0,0,0,0];o&&(h=Array.isArray(o)?o:[o,o,o,o]),this.boundsMargin=h;var c={stage:this,canvas:t,pixelRatio:e.devicePhysicalPixelRatio*e.deviceLogicalPixelRatio,clearColor:null!=r?r:4278190080,bufferMemory:2e6,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy};this.renderer=new d(c);var f=this.renderer.mode||"webgl";this.defShaderCtr=this.renderer.getDefShaderCtr(),D="webgl"===f,this.txManager.renderer=this.renderer,this.textRenderers={},u.forEach((e=>{var t=new e(this),r=t.type;"sdf"!==r||"canvas"!==f?t instanceof ft&&("canvas"===r?this.textRenderers.canvas=t:"sdf"===r&&(this.textRenderers.sdf=t)):console.warn("SdfTextRenderer is not compatible with Canvas renderer. Skipping...")})),0===Object.keys(this.textRenderers).length&&console.warn("No text renderers available. Your text will not render."),this.fontManager=new Me(this.textRenderers);var p,v,g,m=new fe(this,{x:0,y:0,width:i,height:n,alpha:1,autosize:!1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:{},shader:this.defShaderCtr,rtt:!1,src:null,scale:1,preventCleanup:!1});this.root=m,p=this,v=!1,g=()=>{if(p.updateFrameTime(),p.updateAnimations(),!p.hasSceneUpdates())return p.calculateFps(),setTimeout(g,16.666666666666668),v||(p.txMemManager.checkCleanup()&&p.txMemManager.cleanup(),p.eventBus.emit("idle"),v=!0),void p.flushFrameEvents();v=!1,p.drawFrame(),p.flushFrameEvents(),requestAnimationFrame(g)},requestAnimationFrame(g)}updateFrameTime(){var e=performance?performance.now():Date.now();this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=e,this.deltaTime=this.lastFrameTime?e-this.lastFrameTime:100/6,this.txManager.frameTime=e,this.txMemManager.frameTime=e,this.eventBus.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime})}updateAnimations(){var e=this.animationManager;this.root&&e.update(this.deltaTime)}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested}drawFrame(){var e=this.renderer,t=this.renderRequested;P(e),0!==this.root.updateType&&this.root.update(this.deltaTime,this.root.clippingRect),e.reset(),this.txMemManager.criticalCleanupRequested&&this.txMemManager.cleanup(),e.rttNodes.length>0&&e.renderRTTNodes(),this.addQuads(this.root),null==e||e.render(),this.calculateFps(),t&&(this.renderRequested=!1)}queueFrameEvent(e,t){this.frameEventQueue.push([e,t])}flushFrameEvents(){var e,t=R(this.frameEventQueue);try{for(t.s();!(e=t.n()).done;){var r=_(e.value,2),i=r[0],n=r[1];this.eventBus.emit(i,n)}}catch(o){t.e(o)}finally{t.f()}this.frameEventQueue=[]}calculateFps(){var e=this.options.fpsUpdateInterval;if(e&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=e)){var t,r,i,n=Math.round(1e3*this.fpsNumFrames/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.queueFrameEvent("fpsUpdate",{fps:n,contextSpyData:null!==(t=null===(r=this.contextSpy)||void 0===r?void 0:r.getData())&&void 0!==t?t:null}),null===(i=this.contextSpy)||void 0===i||i.reset()}}addQuads(e){P(this.renderer&&e.globalTransform),e.isRenderable&&e.renderQuads(this.renderer);for(var t=0;t<e.children.length;t++){var r=e.children[t];r&&(0!==(null==r?void 0:r.worldAlpha)&&this.addQuads(r))}}requestRender(){this.renderRequested=!0}resolveTextRenderer(e,t=null){var r=`${e.fontFamily}${e.fontStyle}${e.fontWeight}${e.fontStretch}${t||""}`;if(void 0!==this.fontResolveMap[r])return this.fontResolveMap[r];var i=t,n=!1;if(i){var o=this.textRenderers[i];o?o.canRenderFont(e)||(console.warn(`Cannot use override text renderer '${i}' for font`,e),i=null,n=!0):(console.warn(`Text renderer override '${i}' not found.`),i=null,n=!0)}if(!i){for(var a=0,s=Object.entries(this.textRenderers);a<s.length;a++){var l=_(s[a],2),d=l[0];if(l[1].canRenderFont(e)){i=d;break}}i||void 0===this.textRenderers.canvas||(i="canvas")}if(n&&console.warn(`Falling back to text renderer ${String(i)}`),!i)return null;var u=this.textRenderers[i];return P(u,"resolvedTextRenderer undefined"),this.fontResolveMap[r]=u,u}createShaderCtr(e,t){return this.shManager.loadShader(e,t)}createNode(e){var t=this.resolveNodeDefaults(e);return new fe(this,t)}createTextNode(e){var t,r,i,n,o,a,s,l,d,u,h,c,f,p,v,g,m,x,y=null!==(t=e.fontSize)&&void 0!==t?t:16,b=E(E({},this.resolveNodeDefaults(e)),{},{text:null!==(r=e.text)&&void 0!==r?r:"",textRendererOverride:null!==(i=e.textRendererOverride)&&void 0!==i?i:null,fontSize:y,fontFamily:null!==(n=e.fontFamily)&&void 0!==n?n:"sans-serif",fontStyle:null!==(o=e.fontStyle)&&void 0!==o?o:"normal",fontWeight:null!==(a=e.fontWeight)&&void 0!==a?a:"normal",fontStretch:null!==(s=e.fontStretch)&&void 0!==s?s:"normal",textAlign:null!==(l=e.textAlign)&&void 0!==l?l:"left",contain:null!==(d=e.contain)&&void 0!==d?d:"none",scrollable:null!==(u=e.scrollable)&&void 0!==u&&u,scrollY:null!==(h=e.scrollY)&&void 0!==h?h:0,offsetY:null!==(c=e.offsetY)&&void 0!==c?c:0,letterSpacing:null!==(f=e.letterSpacing)&&void 0!==f?f:0,lineHeight:e.lineHeight,maxLines:null!==(p=e.maxLines)&&void 0!==p?p:0,textBaseline:null!==(v=e.textBaseline)&&void 0!==v?v:"alphabetic",verticalAlign:null!==(g=e.verticalAlign)&&void 0!==g?g:"middle",overflowSuffix:null!==(m=e.overflowSuffix)&&void 0!==m?m:"...",debug:null!==(x=e.debug)&&void 0!==x?x:{},shaderProps:null}),A=this.resolveTextRenderer(b,e.textRendererOverride);if(!A)throw new Error(`No compatible text renderer found for ${b.fontFamily}`);return new xt(this,b,A)}resolveNodeDefaults(e){var t,r,i,n,o,a,s,l,d,u,h,c,f,p,v,g,m,x,y,b,A,w,T,S,E,_,C,R,I,B,k,M,L,F,P,N,U,D,O,z,G,X,W,V,H,Y,j,K,Q,$,q=null!==(t=e.color)&&void 0!==t?t:4294967295,Z=null!==(r=null!==(i=null!==(n=e.colorTl)&&void 0!==n?n:e.colorTop)&&void 0!==i?i:e.colorLeft)&&void 0!==r?r:q,J=null!==(o=null!==(a=null!==(s=e.colorTr)&&void 0!==s?s:e.colorTop)&&void 0!==a?a:e.colorRight)&&void 0!==o?o:q,ee=null!==(l=null!==(d=null!==(u=e.colorBl)&&void 0!==u?u:e.colorBottom)&&void 0!==d?d:e.colorLeft)&&void 0!==l?l:q,te=null!==(h=null!==(c=null!==(f=e.colorBr)&&void 0!==f?f:e.colorBottom)&&void 0!==c?c:e.colorRight)&&void 0!==h?h:q,re=function(e){for(var t={boolean:!0,string:!0,number:!0,undefined:!0},r=Object.keys(e),i=0;i<r.length;i++){var n=r[i];if(n){var o=e[n],a=typeof o;"string"===a&&o.length>2048&&(console.warn(`Custom Data value for ${n} is too long, it will be truncated to 2048 characters`),e[n]=o.substring(0,2048)),t[a]||(console.warn(`Custom Data value for ${n} is not a boolean, string, or number, it will be ignored`),delete e[n])}}return e}(null!==(p=e.data)&&void 0!==p?p:{});return{x:null!==(v=e.x)&&void 0!==v?v:0,y:null!==(g=e.y)&&void 0!==g?g:0,width:null!==(m=e.width)&&void 0!==m?m:0,height:null!==(x=e.height)&&void 0!==x?x:0,alpha:null!==(y=e.alpha)&&void 0!==y?y:1,autosize:null!==(b=e.autosize)&&void 0!==b&&b,clipping:null!==(A=e.clipping)&&void 0!==A&&A,color:q,colorTop:null!==(w=e.colorTop)&&void 0!==w?w:q,colorBottom:null!==(T=e.colorBottom)&&void 0!==T?T:q,colorLeft:null!==(S=e.colorLeft)&&void 0!==S?S:q,colorRight:null!==(E=e.colorRight)&&void 0!==E?E:q,colorBl:ee,colorBr:te,colorTl:Z,colorTr:J,zIndex:null!==(_=e.zIndex)&&void 0!==_?_:0,zIndexLocked:null!==(C=e.zIndexLocked)&&void 0!==C?C:0,parent:null!==(R=e.parent)&&void 0!==R?R:null,texture:null!==(I=e.texture)&&void 0!==I?I:null,textureOptions:null!==(B=e.textureOptions)&&void 0!==B?B:{},shader:null!==(k=e.shader)&&void 0!==k?k:this.defShaderCtr,src:null!==(M=e.src)&&void 0!==M?M:null,srcHeight:e.srcHeight,srcWidth:e.srcWidth,srcX:e.srcX,srcY:e.srcY,scale:null!==(L=e.scale)&&void 0!==L?L:null,scaleX:null!==(F=null!==(P=e.scaleX)&&void 0!==P?P:e.scale)&&void 0!==F?F:1,scaleY:null!==(N=null!==(U=e.scaleY)&&void 0!==U?U:e.scale)&&void 0!==N?N:1,mount:null!==(D=e.mount)&&void 0!==D?D:0,mountX:null!==(O=null!==(z=e.mountX)&&void 0!==z?z:e.mount)&&void 0!==O?O:0,mountY:null!==(G=null!==(X=e.mountY)&&void 0!==X?X:e.mount)&&void 0!==G?G:0,pivot:null!==(W=e.pivot)&&void 0!==W?W:.5,pivotX:null!==(V=null!==(H=e.pivotX)&&void 0!==H?H:e.pivot)&&void 0!==V?V:.5,pivotY:null!==(Y=null!==(j=e.pivotY)&&void 0!==j?j:e.pivot)&&void 0!==Y?Y:.5,rotation:null!==(K=e.rotation)&&void 0!==K?K:0,rtt:null!==(Q=e.rtt)&&void 0!==Q&&Q,data:re,preventCleanup:null!==($=e.preventCleanup)&&void 0!==$&&$,imageType:e.imageType}}}class bt extends W{constructor(e,t){var r,i,n,o,a,s,l;super(),C(this,"root",void 0),C(this,"canvas",void 0),C(this,"settings",void 0),C(this,"stage",void 0),C(this,"inspector",null);var d={criticalThreshold:(null===(r=e.textureMemory)||void 0===r?void 0:r.criticalThreshold)||124e6,targetThresholdLevel:(null===(i=e.textureMemory)||void 0===i?void 0:i.targetThresholdLevel)||.5,cleanupInterval:(null===(n=e.textureMemory)||void 0===n?void 0:n.cleanupInterval)||3e4,debugLogging:(null===(o=e.textureMemory)||void 0===o?void 0:o.debugLogging)||!1},u={appWidth:e.appWidth||1920,appHeight:e.appHeight||1080,textureMemory:d,boundsMargin:e.boundsMargin||0,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:null!==(a=e.clearColor)&&void 0!==a?a:0,fpsUpdateInterval:e.fpsUpdateInterval||0,numImageWorkers:void 0!==e.numImageWorkers?e.numImageWorkers:2,enableContextSpy:null!==(s=e.enableContextSpy)&&void 0!==s&&s,inspector:e.inspector,renderEngine:e.renderEngine,quadBufferSize:null!==(l=e.quadBufferSize)&&void 0!==l?l:4194304,fontEngines:e.fontEngines};this.settings=u;var h,c=u.deviceLogicalPixelRatio,f=u.devicePhysicalPixelRatio,p=u.inspector,v=u.appWidth*c,g=u.appHeight*c,m=document.createElement("canvas");if(this.canvas=m,m.width=v*f,m.height=g*f,m.style.width=`${v}px`,m.style.height=`${g}px`,this.stage=new yt({appWidth:this.settings.appWidth,appHeight:this.settings.appHeight,boundsMargin:this.settings.boundsMargin,clearColor:this.settings.clearColor,canvas:this.canvas,deviceLogicalPixelRatio:this.settings.deviceLogicalPixelRatio,devicePhysicalPixelRatio:this.settings.devicePhysicalPixelRatio,enableContextSpy:this.settings.enableContextSpy,fpsUpdateInterval:this.settings.fpsUpdateInterval,numImageWorkers:this.settings.numImageWorkers,renderEngine:this.settings.renderEngine,textureMemory:d,eventBus:this,quadBufferSize:this.settings.quadBufferSize,fontEngines:this.settings.fontEngines}),this.root=this.stage.root,!(h="string"==typeof t?document.getElementById(t):t))throw new Error("Could not find target element");h.appendChild(m),p&&!G()&&(this.inspector=new p(m,u))}createNode(e){P(this.stage,"Stage is not initialized");var t=this.stage.createNode(e);return this.inspector?this.inspector.createNode(t):t}createTextNode(e){var t=this.stage.createTextNode(e);return this.inspector?this.inspector.createTextNode(t):t}destroyNode(e){return this.inspector&&this.inspector.destroyNode(e.id),e.destroy()}createTexture(e,t){return this.stage.txManager.loadTexture(e,t)}createShader(e,t){return this.stage.shManager.loadShader(e,t)}createDynamicShader(e){return this.stage.shManager.loadDynamicShader({effects:e})}createEffect(e,t,r){return{name:r,type:e,props:t}}getNodeById(e){var t,r=null===(t=this.stage)||void 0===t?void 0:t.root;if(!r)return null;var i=t=>{if(t.id===e)return t;var r,n=R(t.children);try{for(n.s();!(r=n.n()).done;){var o=r.value,a=i(o);if(a)return a}}catch(s){n.e(s)}finally{n.f()}return null};return i(r)}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}getBufferInfo(){return this.stage.renderer.getBufferInfo()}rerender(){throw new Error("Not implemented")}}class At extends W{constructor(e){super(),C(this,"fontFamily",void 0),C(this,"descriptors",void 0),C(this,"loaded",!1),C(this,"metrics",null);var t=e.fontFamily,r=e.descriptors,i=e.metrics;i&&(this.metrics={ascender:i.ascender/i.unitsPerEm,descender:i.descender/i.unitsPerEm,lineGap:i.lineGap/i.unitsPerEm}),this.fontFamily=t,this.descriptors=E({style:"normal",weight:"normal",stretch:"normal"},r)}static convertToCssFontFaceDescriptors(e){return{style:e.style,weight:"number"==typeof e.weight?`${e.weight}`:e.weight,stretch:e.stretch,unicodeRange:e.unicodeRange,featureSettings:e.featureSettings,display:e.display}}}class wt extends At{constructor(e){super(e),C(this,"fontFace",void 0),C(this,"fontUrl",void 0);var t=e.fontFamily,r=e.fontUrl,i=r.replace(/\(|\)/g,""),n=this.descriptors,o={style:n.style,weight:"number"==typeof n.weight?`${n.weight}`:n.weight,stretch:n.stretch,unicodeRange:n.unicodeRange,featureSettings:n.featureSettings,display:n.display},a=new FontFace(t,`url(${i})`,o);i.length>0?a.load().then((()=>{this.loaded=!0,this.emit("loaded")})).catch(console.error):(this.loaded=!0,this.emit("loaded")),this.fontFace=a,this.fontUrl=r}}class Tt{}class St extends Tt{constructor(e,t,r,i,n,o,a,s,l,d,u,h,c){super(),C(this,"glw",void 0),C(this,"options",void 0),C(this,"buffers",void 0),C(this,"shader",void 0),C(this,"shaderProps",void 0),C(this,"alpha",void 0),C(this,"clippingRect",void 0),C(this,"dimensions",void 0),C(this,"bufferIdx",void 0),C(this,"zIndex",void 0),C(this,"renderToTexture",void 0),C(this,"parentHasRenderTexture",void 0),C(this,"framebufferDimensions",void 0),C(this,"length",0),C(this,"numQuads",0),C(this,"textures",[]),C(this,"maxTextures",void 0),this.glw=e,this.options=t,this.buffers=r,this.shader=i,this.shaderProps=n,this.alpha=o,this.clippingRect=a,this.dimensions=s,this.bufferIdx=l,this.zIndex=d,this.renderToTexture=u,this.parentHasRenderTexture=h,this.framebufferDimensions=c,this.maxTextures=i.supportsIndexedTextures?e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS):1}addTexture(e){var t=this.textures,r=this.maxTextures,i=t.findIndex((t=>t===e));if(-1!==i)return i;var n=t.length;return n>=r?4294967295:(this.textures.push(e),n)}draw(){var e=this.glw,t=this.shader,r=this.shaderProps,i=this.options;i.shManager.useShader(t),t.bindRenderOp(this,r);var n=this.bufferIdx/24*6*2;if(this.clippingRect.valid){var o=this.clippingRect,a=o.x,s=o.y,l=o.width,d=o.height,u=i.pixelRatio,h=i.canvas.height,c=Math.round(a*u),f=Math.round(l*u),p=Math.round(d*u),v=Math.round(h-p-s*u);e.setScissorTest(!0),e.scissor(c,v,f,p)}else e.setScissorTest(!1);e.drawElements(e.TRIANGLES,6*this.numQuads,e.UNSIGNED_SHORT,n)}}function Et(e){var t={MAX_RENDERBUFFER_SIZE:0,MAX_TEXTURE_SIZE:0,MAX_VIEWPORT_DIMS:0,MAX_VERTEX_TEXTURE_IMAGE_UNITS:0,MAX_TEXTURE_IMAGE_UNITS:0,MAX_COMBINED_TEXTURE_IMAGE_UNITS:0,MAX_VERTEX_ATTRIBS:0,MAX_VARYING_VECTORS:0,MAX_VERTEX_UNIFORM_VECTORS:0,MAX_FRAGMENT_UNIFORM_VECTORS:0};return Object.keys(t).forEach((r=>{t[r]=e.getParameter(e[r])})),t}function _t(e){var t={ANGLE_instanced_arrays:null,WEBGL_compressed_texture_s3tc:null,WEBGL_compressed_texture_astc:null,WEBGL_compressed_texture_etc:null,WEBGL_compressed_texture_etc1:null,WEBGL_compressed_texture_pvrtc:null,WEBKIT_WEBGL_compressed_texture_pvrtc:null,WEBGL_compressed_texture_s3tc_srgb:null,OES_vertex_array_object:null};return Object.keys(t).forEach((r=>{t[r]=e.getExtension(r)})),t}var Ct=new Uint8Array([0,0,0,0]);class Rt extends gt{constructor(e,t,r){super(t,r),C(this,"glw",void 0),C(this,"_nativeCtxTexture",null),C(this,"_state","freed"),C(this,"_w",0),C(this,"_h",0),this.glw=e}get ctxTexture(){return"freed"===this._state&&this.load(),P(this._nativeCtxTexture),this._nativeCtxTexture}get w(){return this._w}get h(){return this._h}load(){"loading"!==this._state&&"loaded"!==this._state&&(this._state="loading",this.textureSource.setState("loading"),this._nativeCtxTexture=this.createNativeCtxTexture(),this.onLoadRequest().then((({width:e,height:t})=>{"freed"!==this._state&&(this._state="loaded",this._w=e,this._h=t,this.textureSource.setState("loaded",{width:e,height:t}))})).catch((e=>{"freed"!==this._state&&(this._state="failed",this.textureSource.setState("failed",e),console.error(e))})))}onLoadRequest(){var e=this;return T(A().mark((function t(){var r,i,n,o,a,s,l,d,u,h,c,f,p,v,g,m;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=e.glw).texImage2D(0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,null),e.setTextureMemUse(Ct.byteLength),t.next=5,null===(r=e.textureSource)||void 0===r?void 0:r.getTextureData();case 5:if(n=t.sent,e._nativeCtxTexture){t.next=9;break}return P("freed"===e._state),t.abrupt("return",{width:0,height:0});case 9:return o=0,a=0,P(e._nativeCtxTexture),i.activeTexture(0),n.data instanceof ImageBitmap||n.data instanceof ImageData||null!==(x=n.data)&&"object"==typeof x&&x.constructor&&"HTMLImageElement"===x.constructor.name?(s=n.data,o=s.width,a=s.height,i.bindTexture(e._nativeCtxTexture),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!!n.premultiplyAlpha),i.texImage2D(0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,s),e.setTextureMemUse(o*a*4),(i.isWebGl2()||re(o)&&re(a))&&i.generateMipmap()):null===n.data?(o=0,a=0,i.bindTexture(e._nativeCtxTexture),i.texImage2D(0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,Ct),e.setTextureMemUse(Ct.byteLength)):"mipmaps"in n.data&&n.data.mipmaps?(d=n.data,u=d.mipmaps,h=d.width,c=void 0===h?0:h,f=d.height,p=void 0===f?0:f,v=d.type,g=d.glInternalFormat,m="ktx"===v?new DataView(null!==(l=u[0])&&void 0!==l?l:new ArrayBuffer(0)):u[0],i.bindTexture(e._nativeCtxTexture),i.compressedTexImage2D(0,g,c,p,0,m),i.texParameteri(i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_MIN_FILTER,i.LINEAR),e.setTextureMemUse(m.byteLength)):console.error("WebGlCoreCtxTexture.onLoadRequest: Unexpected textureData returned",n),t.abrupt("return",{width:o,height:a});case 15:case"end":return t.stop()}var x}),t)})))()}free(){"freed"!==this._state&&(this._state="freed",this.textureSource.setState("freed"),this._w=0,this._h=0,this._nativeCtxTexture&&(this.glw.deleteTexture(this._nativeCtxTexture),this.setTextureMemUse(0),this._nativeCtxTexture=null))}createNativeCtxTexture(){var e=this.glw,t=e.createTexture();if(!t)throw new Error("Could not create WebGL Texture");return e.activeTexture(0),e.bindTexture(t),e.texParameteri(e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t}}class It extends Rt{constructor(e,t,r){super(e,t,r)}onLoadRequest(){var e=this;return T(A().mark((function t(){var r,i,n;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.textureSource.getTextureData();case 2:return n=t.sent,t.abrupt("return",{width:(null===(r=n.data)||void 0===r?void 0:r.width)||0,height:(null===(i=n.data)||void 0===i?void 0:i.height)||0});case 4:case"end":return t.stop()}}),t)})))()}}class Bt{constructor(e){C(this,"config",void 0),this.config=e}getBuffer(e){var t;return null===(t=this.config.find((t=>t.attributes[e])))||void 0===t?void 0:t.buffer}getAttributeInfo(e){var t;return null===(t=this.config.find((t=>t.attributes[e])))||void 0===t?void 0:t.attributes[e]}}class kt{constructor(e){C(this,"gl",void 0),C(this,"activeTextureUnit",0),C(this,"texture2dUnits",void 0),C(this,"texture2dParams",new WeakMap),C(this,"scissorEnabled",void 0),C(this,"scissorX",void 0),C(this,"scissorY",void 0),C(this,"scissorWidth",void 0),C(this,"scissorHeight",void 0),C(this,"blendEnabled",void 0),C(this,"blendSrcRgb",void 0),C(this,"blendDstRgb",void 0),C(this,"blendSrcAlpha",void 0),C(this,"blendDstAlpha",void 0),C(this,"boundArrayBuffer",void 0),C(this,"boundElementArrayBuffer",void 0),C(this,"curProgram",void 0),C(this,"programUniforms",new WeakMap),C(this,"canvas",void 0),C(this,"MAX_RENDERBUFFER_SIZE",void 0),C(this,"MAX_TEXTURE_SIZE",void 0),C(this,"MAX_VIEWPORT_DIMS",void 0),C(this,"MAX_VERTEX_TEXTURE_IMAGE_UNITS",void 0),C(this,"MAX_TEXTURE_IMAGE_UNITS",void 0),C(this,"MAX_COMBINED_TEXTURE_IMAGE_UNITS",void 0),C(this,"MAX_VERTEX_ATTRIBS",void 0),C(this,"MAX_VARYING_VECTORS",void 0),C(this,"MAX_VERTEX_UNIFORM_VECTORS",void 0),C(this,"MAX_FRAGMENT_UNIFORM_VECTORS",void 0),C(this,"TEXTURE_MAG_FILTER",void 0),C(this,"TEXTURE_MIN_FILTER",void 0),C(this,"TEXTURE_WRAP_S",void 0),C(this,"TEXTURE_WRAP_T",void 0),C(this,"LINEAR",void 0),C(this,"CLAMP_TO_EDGE",void 0),C(this,"RGBA",void 0),C(this,"UNSIGNED_BYTE",void 0),C(this,"UNPACK_PREMULTIPLY_ALPHA_WEBGL",void 0),C(this,"UNPACK_FLIP_Y_WEBGL",void 0),C(this,"FLOAT",void 0),C(this,"TRIANGLES",void 0),C(this,"UNSIGNED_SHORT",void 0),C(this,"ONE",void 0),C(this,"ONE_MINUS_SRC_ALPHA",void 0),C(this,"VERTEX_SHADER",void 0),C(this,"FRAGMENT_SHADER",void 0),C(this,"STATIC_DRAW",void 0),C(this,"COMPILE_STATUS",void 0),C(this,"LINK_STATUS",void 0),C(this,"DYNAMIC_DRAW",void 0),C(this,"COLOR_ATTACHMENT0",void 0),this.gl=e,this.activeTextureUnit=e.getParameter(e.ACTIVE_TEXTURE)-e.TEXTURE0;var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.texture2dUnits=new Array(t).fill(void 0).map(((t,r)=>(this.activeTexture(r),e.getParameter(e.TEXTURE_BINDING_2D)))),this.activeTexture(this.activeTextureUnit),this.scissorEnabled=e.isEnabled(e.SCISSOR_TEST);var r=e.getParameter(e.SCISSOR_BOX);this.scissorX=r[0],this.scissorY=r[1],this.scissorWidth=r[2],this.scissorHeight=r[3],this.blendEnabled=e.isEnabled(e.BLEND),this.blendSrcRgb=e.getParameter(e.BLEND_SRC_RGB),this.blendDstRgb=e.getParameter(e.BLEND_DST_RGB),this.blendSrcAlpha=e.getParameter(e.BLEND_SRC_ALPHA),this.blendDstAlpha=e.getParameter(e.BLEND_DST_ALPHA),this.boundArrayBuffer=e.getParameter(e.ARRAY_BUFFER_BINDING),this.boundElementArrayBuffer=e.getParameter(e.ELEMENT_ARRAY_BUFFER_BINDING),this.curProgram=e.getParameter(e.CURRENT_PROGRAM),this.canvas=e.canvas,this.MAX_RENDERBUFFER_SIZE=e.MAX_RENDERBUFFER_SIZE,this.MAX_TEXTURE_SIZE=e.MAX_TEXTURE_SIZE,this.MAX_VIEWPORT_DIMS=e.MAX_VIEWPORT_DIMS,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=e.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.MAX_TEXTURE_IMAGE_UNITS=e.MAX_TEXTURE_IMAGE_UNITS,this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS,this.MAX_VERTEX_ATTRIBS=e.MAX_VERTEX_ATTRIBS,this.MAX_VARYING_VECTORS=e.MAX_VARYING_VECTORS,this.MAX_VERTEX_UNIFORM_VECTORS=e.MAX_VERTEX_UNIFORM_VECTORS,this.MAX_FRAGMENT_UNIFORM_VECTORS=e.MAX_FRAGMENT_UNIFORM_VECTORS,this.TEXTURE_MAG_FILTER=e.TEXTURE_MAG_FILTER,this.TEXTURE_MIN_FILTER=e.TEXTURE_MIN_FILTER,this.TEXTURE_WRAP_S=e.TEXTURE_WRAP_S,this.TEXTURE_WRAP_T=e.TEXTURE_WRAP_T,this.LINEAR=e.LINEAR,this.CLAMP_TO_EDGE=e.CLAMP_TO_EDGE,this.RGBA=e.RGBA,this.UNSIGNED_BYTE=e.UNSIGNED_BYTE,this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.UNPACK_FLIP_Y_WEBGL=e.UNPACK_FLIP_Y_WEBGL,this.FLOAT=e.FLOAT,this.TRIANGLES=e.TRIANGLES,this.UNSIGNED_SHORT=e.UNSIGNED_SHORT,this.ONE=e.ONE,this.ONE_MINUS_SRC_ALPHA=e.ONE_MINUS_SRC_ALPHA,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=e.MAX_VERTEX_TEXTURE_IMAGE_UNITS,this.TRIANGLES=e.TRIANGLES,this.UNSIGNED_SHORT=e.UNSIGNED_SHORT,this.VERTEX_SHADER=e.VERTEX_SHADER,this.FRAGMENT_SHADER=e.FRAGMENT_SHADER,this.STATIC_DRAW=e.STATIC_DRAW,this.COMPILE_STATUS=e.COMPILE_STATUS,this.LINK_STATUS=e.LINK_STATUS,this.DYNAMIC_DRAW=e.DYNAMIC_DRAW,this.COLOR_ATTACHMENT0=e.COLOR_ATTACHMENT0}isWebGl2(){return e=this.gl,self.WebGL2RenderingContext&&e instanceof self.WebGL2RenderingContext;var e}activeTexture(e){var t=this.gl;this.activeTextureUnit!==e&&(t.activeTexture(e+t.TEXTURE0),this.activeTextureUnit=e)}bindTexture(e){var t=this.gl,r=this.activeTextureUnit,i=this.texture2dUnits;i[r]!==e&&(i[r]=e,t.bindTexture(this.gl.TEXTURE_2D,e))}_getActiveTexture(){var e=this.activeTextureUnit;return this.texture2dUnits[e]}texParameteri(e,t){var r=this.gl,i=this.texture2dParams,n=this._getActiveTexture();if(!n)throw new Error("No active texture");var o=i.get(n);o||(o={},i.set(n,o)),o[e]!==t&&(o[e]=t,r.texParameteri(r.TEXTURE_2D,e,t))}texImage2D(e,t,r,i,n,o,a,s){var l=this.gl;o?l.texImage2D(l.TEXTURE_2D,e,t,r,i,n,o,a,s):l.texImage2D(l.TEXTURE_2D,e,t,r,i,n)}compressedTexImage2D(e,t,r,i,n,o){var a=this.gl;a.compressedTexImage2D(a.TEXTURE_2D,e,t,r,i,n,o)}pixelStorei(e,t){this.gl.pixelStorei(e,t)}generateMipmap(){var e=this.gl;e.generateMipmap(e.TEXTURE_2D)}createTexture(){return this.gl.createTexture()}deleteTexture(e){var t=this.gl;e&&this.texture2dParams.delete(e),t.deleteTexture(e)}viewport(e,t,r,i){this.gl.viewport(e,t,r,i)}clearColor(e,t,r,i){this.gl.clearColor(e,t,r,i)}setScissorTest(e){var t=this.gl;e!==this.scissorEnabled&&(e?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST),this.scissorEnabled=e)}scissor(e,t,r,i){var n=this.gl,o=this.scissorX,a=this.scissorY,s=this.scissorWidth,l=this.scissorHeight;e===o&&t===a&&r===s&&i===l||(n.scissor(e,t,r,i),this.scissorX=e,this.scissorY=t,this.scissorWidth=r,this.scissorHeight=i)}setBlend(e){var t=this.gl;e!==this.blendEnabled&&(e?t.enable(t.BLEND):t.disable(t.BLEND),this.blendEnabled=e)}blendFunc(e,t){var r=this.gl,i=this.blendSrcRgb,n=this.blendDstRgb,o=this.blendSrcAlpha,a=this.blendDstAlpha;e===i&&t===n&&e===o&&t===a||(r.blendFunc(e,t),this.blendSrcRgb=e,this.blendDstRgb=t,this.blendSrcAlpha=e,this.blendDstAlpha=t)}createBuffer(){return this.gl.createBuffer()}createFramebuffer(){return this.gl.createFramebuffer()}bindFramebuffer(e){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e)}framebufferTexture2D(e,t,r){var i=this.gl;i.framebufferTexture2D(i.FRAMEBUFFER,e,i.TEXTURE_2D,t,r)}clear(){var e=this.gl;e.clear(e.COLOR_BUFFER_BIT)}arrayBufferData(e,t,r){var i=this.gl;this.boundArrayBuffer!==e&&(i.bindBuffer(i.ARRAY_BUFFER,e),this.boundArrayBuffer=e),i.bufferData(i.ARRAY_BUFFER,t,r)}elementArrayBufferData(e,t,r){var i=this.gl;this.boundElementArrayBuffer!==e&&(i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e),this.boundElementArrayBuffer=e),i.bufferData(i.ELEMENT_ARRAY_BUFFER,t,r)}vertexAttribPointer(e,t,r,i,n,o,a){var s=this.gl;this.boundArrayBuffer!==e&&(s.bindBuffer(s.ARRAY_BUFFER,e),this.boundArrayBuffer=e),s.vertexAttribPointer(t,r,i,n,o,a)}useProgram(e){var t=this.gl;this.curProgram!==e&&(t.useProgram(e),this.curProgram=e)}setUniform(e,t,...r){var i=this.gl,n=this.programUniforms,o=n.get(this.curProgram);o||(o=new Map,n.set(this.curProgram,o));var a=o.get(t);a&&function(e,t){if(e.length!==t.length)return!1;return e.every(((e,r)=>!(Array.isArray(e)||e instanceof Float32Array)&&e===t[r]))}(a,r)||(o.set(t,r),i[e](t,...r))}getParameter(e){return this.gl.getParameter(e)}drawElements(e,t,r,i){this.gl.drawElements(e,t,r,i)}getExtension(e){return this.gl.getExtension(e)}createVertexArray(){var e=this.gl;return P(e instanceof WebGL2RenderingContext),e.createVertexArray()}bindVertexArray(e){var t=this.gl;P(t instanceof WebGL2RenderingContext),t.bindVertexArray(e)}getAttribLocation(e,t){return this.gl.getAttribLocation(e,t)}getUniformLocation(e,t){return this.gl.getUniformLocation(e,t)}enableVertexAttribArray(e){this.gl.enableVertexAttribArray(e)}disableVertexAttribArray(e){this.gl.disableVertexAttribArray(e)}createShader(e){return this.gl.createShader(e)}compileShader(e){this.gl.compileShader(e)}attachShader(e,t){this.gl.attachShader(e,t)}linkProgram(e){this.gl.linkProgram(e)}deleteProgram(e){this.gl.deleteProgram(e)}getShaderParameter(e,t){return this.gl.getShaderParameter(e,t)}getShaderInfoLog(e){return this.gl.getShaderInfoLog(e)}createProgram(){return this.gl.createProgram()}getProgramParameter(e,t){return this.gl.getProgramParameter(e,t)}getProgramInfoLog(e){return this.gl.getProgramInfoLog(e)}shaderSource(e,t){this.gl.shaderSource(e,t)}deleteShader(e){this.gl.deleteShader(e)}}class Mt extends Rt{constructor(e,t,r){super(e,t,r),C(this,"framebuffer",void 0);var i=e.createFramebuffer();P(i,"Unable to create framebuffer"),this.framebuffer=i}onLoadRequest(){var e=this;return T(A().mark((function t(){var r,i,n,o,a;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.glw,i=e._nativeCtxTexture=e.createNativeCtxTexture(),n=e.textureSource,o=n.width,a=n.height,r.texImage2D(0,r.RGBA,o,a,0,r.RGBA,r.UNSIGNED_BYTE,null),e.setTextureMemUse(o*a*4),r.bindFramebuffer(e.framebuffer),r.framebufferTexture2D(r.COLOR_ATTACHMENT0,i,0),r.bindFramebuffer(null),t.abrupt("return",{width:o,height:a});case 9:case"end":return t.stop()}}),t)})))()}}class Lt extends mt{constructor(e){super(e),C(this,"glw",void 0),C(this,"system",void 0),C(this,"quadBuffer",void 0),C(this,"fQuadBuffer",void 0),C(this,"uiQuadBuffer",void 0),C(this,"renderOps",[]),C(this,"curBufferIdx",0),C(this,"curRenderOp",null),C(this,"rttNodes",[]),C(this,"activeRttNode",null),C(this,"defShaderCtrl",void 0),C(this,"defaultShader",void 0),C(this,"quadBufferCollection",void 0),C(this,"defaultTexture",void 0),C(this,"quadBufferUsage",0),C(this,"renderToTextureActive",!1),this.quadBuffer=new ArrayBuffer(this.stage.options.quadBufferSize),this.fQuadBuffer=new Float32Array(this.quadBuffer),this.uiQuadBuffer=new Uint32Array(this.quadBuffer),this.mode="webgl";var t=e.canvas,r=e.clearColor,i=e.bufferMemory;this.defaultTexture=new xe(this.txManager),this.defaultTexture.setRenderableOwner(this,!0),this.defaultTexture.once("loaded",(()=>{this.stage.requestRender()}));var n=function(e,t){var r={alpha:!0,antialias:!1,depth:!1,stencil:!0,desynchronized:!1,powerPreference:"high-performance",premultipliedAlpha:!0,preserveDrawingBuffer:!1},i=e.getContext("webgl",r)||e.getContext("experimental-webgl",r);if(!i)throw new Error("Unable to create WebGL context");return t?new Proxy(i,{get(e,r){var i=e[r];return"function"==typeof i?(t.increment(String(r)),i.bind(e)):i}}):i}(t,e.contextSpy),o=this.glw=new kt(n),a=H(r);o.viewport(0,0,t.width,t.height),o.clearColor(a[0],a[1],a[2],a[3]),o.setBlend(!0),o.blendFunc(o.ONE,o.ONE_MINUS_SRC_ALPHA),function(e,t){for(var r=~~(t/80),i=new Uint16Array(6*r),n=0,o=0;n<r;n+=6,o+=4)i[n]=o,i[n+1]=o+1,i[n+2]=o+2,i[n+3]=o+2,i[n+4]=o+1,i[n+5]=o+3;var a=e.createBuffer();e.elementArrayBufferData(a,i,e.STATIC_DRAW)}(o,i),this.system={parameters:Et(this.glw),extensions:_t(this.glw)},this.shManager.renderer=this,this.defShaderCtrl=this.shManager.loadShader("DefaultShader"),this.defaultShader=this.defShaderCtrl.shader;var s=o.createBuffer();P(s);var l=6*Float32Array.BYTES_PER_ELEMENT;this.quadBufferCollection=new Bt([{buffer:s,attributes:{a_position:{name:"a_position",size:2,type:o.FLOAT,normalized:!1,stride:l,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:o.FLOAT,normalized:!1,stride:l,offset:2*Float32Array.BYTES_PER_ELEMENT},a_color:{name:"a_color",size:4,type:o.UNSIGNED_BYTE,normalized:!0,stride:l,offset:4*Float32Array.BYTES_PER_ELEMENT},a_textureIndex:{name:"a_textureIndex",size:1,type:o.FLOAT,normalized:!1,stride:l,offset:5*Float32Array.BYTES_PER_ELEMENT}}}])}reset(){var e=this.glw;this.curBufferIdx=0,this.curRenderOp=null,this.renderOps.length=0,e.setScissorTest(!1),e.clear()}getShaderManager(){return this.shManager}createCtxTexture(e){return e instanceof _e?new It(this.glw,this.txMemManager,e):e instanceof Ce?new Mt(this.glw,this.txMemManager,e):new Rt(this.glw,this.txMemManager,e)}addQuad(e){var t,r,i,n,o=this.fQuadBuffer,a=this.uiQuadBuffer,s=e.width,l=e.height,d=e.colorTl,u=e.colorTr,h=e.colorBl,c=e.colorBr,f=e.textureOptions,p=e.shader,v=e.shaderProps,g=e.alpha,m=e.clippingRect,x=e.tx,y=e.ty,b=e.ta,A=e.tb,w=e.tc,T=e.td,S=e.renderCoords,E=e.rtt,_=e.parentHasRenderTexture,C=e.framebufferDimensions,R=e.texture;if(v&&z(v,"$dimensions")){var I=v.$dimensions;I.width=s,I.height=l}P((R=null!==(t=R)&&void 0!==t?t:this.defaultTexture)instanceof ve,"Invalid texture type");var B=this.curBufferIdx,k=this.curRenderOp,M={width:s,height:l},L=p||this.defaultShader;P(L instanceof Pe),this.reuseRenderOp(e)||(this.newRenderOp(L,v,g,M,m,B,E,_,C),P(k=this.curRenderOp));var F=null!==(r=null==f?void 0:f.flipX)&&void 0!==r&&r,N=null!==(i=null==f?void 0:f.flipY)&&void 0!==i&&i;R instanceof Ce&&(N=!N);var U=0,D=0,O=1,G=1;if(R instanceof _e){var X=R.props,W=X.x,V=X.y,H=X.width,Y=X.height,j=R.parentTexture.dimensions||{width:0,height:0},K=j.width,Q=void 0===K?0:K,$=j.height,q=void 0===$?0:$;O=(U=W/Q)+H/Q,G=(D=V/q)+Y/q,R=R.parentTexture}var Z=null!==(n=null==f?void 0:f.resizeMode)&&void 0!==n&&n;if(R instanceof Se&&Z&&R.dimensions){var J=R.dimensions,ee=J.width,te=J.height;if("cover"===Z.type){var re=s/ee,ie=l/te,ne=Math.max(re,ie),oe=1/ne;if(ne&&re&&re<ne){var ae,se=oe*s;O=(U=(1-se/ee)*(null!==(ae=Z.clipX)&&void 0!==ae?ae:.5))+se/ee}if(ne&&ie&&ie<ne){var le,de=oe*l;G=(D=(1-de/te)*(null!==(le=Z.clipY)&&void 0!==le?le:.5))+de/te}}}if(F){var ue=[O,U];U=ue[0],O=ue[1]}if(N){var he=[G,D];D=he[0],G=he[1]}var ce=R.ctxTexture;P(ce instanceof Rt);var fe=this.addTexture(ce,B);if(P(k=this.curRenderOp),S){var pe=S.x1,ge=S.y1,me=S.x2,xe=S.y2,ye=S.x3,be=S.y3,Ae=S.x4,we=S.y4;o[B++]=pe,o[B++]=ge,o[B++]=U,o[B++]=D,a[B++]=d,o[B++]=fe,o[B++]=me,o[B++]=xe,o[B++]=O,o[B++]=D,a[B++]=u,o[B++]=fe,o[B++]=Ae,o[B++]=we,o[B++]=U,o[B++]=G,a[B++]=h,o[B++]=fe,o[B++]=ye,o[B++]=be,o[B++]=O,o[B++]=G,a[B++]=c,o[B++]=fe}else if(0!==A||0!==w)o[B++]=x,o[B++]=y,o[B++]=U,o[B++]=D,a[B++]=d,o[B++]=fe,o[B++]=x+s*b,o[B++]=y+s*w,o[B++]=O,o[B++]=D,a[B++]=u,o[B++]=fe,o[B++]=x+l*A,o[B++]=y+l*T,o[B++]=U,o[B++]=G,a[B++]=h,o[B++]=fe,o[B++]=x+s*b+l*A,o[B++]=y+s*w+l*T,o[B++]=O,o[B++]=G,a[B++]=c,o[B++]=fe;else{var Te=x+s*b,Ee=y+l*T;o[B++]=x,o[B++]=y,o[B++]=U,o[B++]=D,a[B++]=d,o[B++]=fe,o[B++]=Te,o[B++]=y,o[B++]=O,o[B++]=D,a[B++]=u,o[B++]=fe,o[B++]=x,o[B++]=Ee,o[B++]=U,o[B++]=G,a[B++]=h,o[B++]=fe,o[B++]=Te,o[B++]=Ee,o[B++]=O,o[B++]=G,a[B++]=c,o[B++]=fe}k.length+=24,k.numQuads++,this.curBufferIdx=B}newRenderOp(e,t,r,i,n,o,a,s,l){var d=new St(this.glw,this.options,this.quadBufferCollection,e,t,r,n,i,o,0,a,s,l);this.curRenderOp=d,this.renderOps.push(d)}addTexture(e,t,r){var i=this.curRenderOp;P(i);var n=i.addTexture(e);if(4294967295===n){if(r)throw new Error("Unable to add texture to render op");var o=i.shader,a=i.shaderProps,s=i.dimensions,l=i.clippingRect,d=i.alpha;return this.newRenderOp(o,a,d,s,l,t),this.addTexture(e,t,!0)}return n}reuseRenderOp(e){var t,r,i,n=e.shader,o=e.shaderProps,a=e.parentHasRenderTexture,s=e.rtt,l=e.clippingRect,d=n||this.defaultShader;return(null===(t=this.curRenderOp)||void 0===t?void 0:t.shader)===d&&(((r=this.curRenderOp.clippingRect)===(i=l)||null!==r&&null!==i&&r.x===i.x&&r.y===i.y&&r.width===i.width&&r.height===i.height)&&(!a&&!s&&!!(this.curRenderOp.shader===this.defaultShader||o&&this.curRenderOp.shader.canBatchShaderProps(this.curRenderOp.shaderProps,o))))}addRenderOp(e){this.renderOps.push(e),this.curRenderOp=null}render(e="screen"){var t,r=this.glw,i=this.quadBuffer,n=new Float32Array(i,0,this.curBufferIdx),o=null!==(t=this.quadBufferCollection.getBuffer("a_position"))&&void 0!==t?t:null;r.arrayBufferData(o,n,r.STATIC_DRAW),this.renderOps.forEach(((e,t)=>{e.draw()})),this.quadBufferUsage=this.curBufferIdx*n.BYTES_PER_ELEMENT}renderToTexture(e){for(var t=0;t<this.rttNodes.length;t++)if(this.rttNodes[t]===e)return;this.rttNodes.unshift(e)}renderRTTNodes(){var e=this.glw;this.stage;for(var t=0;t<this.rttNodes.length;t++){var r=this.rttNodes[t];if(r&&r.hasRTTupdates){this.activeRttNode=r,P(r.texture,"RTT node missing texture");var i=r.texture.ctxTexture;P(i instanceof Mt),this.renderToTextureActive=!0,e.bindFramebuffer(i.framebuffer),e.viewport(0,0,i.w,i.h),e.clear();for(var n=0;n<r.children.length;n++){var o=r.children[n];o&&(o.update(this.stage.deltaTime,{x:0,y:0,width:0,height:0,valid:!1}),this.stage.addQuads(o),o.hasRTTupdates=!1)}this.render(),this.renderOps.length=0,r.hasRTTupdates=!1}}e.bindFramebuffer(null),e.viewport(0,0,this.glw.canvas.width,this.glw.canvas.height),this.renderToTextureActive=!1}removeRTTNode(e){var t=this.rttNodes.indexOf(e);-1!==t&&this.rttNodes.splice(t,1)}getBufferInfo(){return{totalAvailable:this.stage.options.quadBufferSize,totalUsed:this.quadBufferUsage}}getDefShaderCtr(){return this.defShaderCtrl}}var Ft,Pt,Nt=10;class Ut{}class Dt extends Ut{constructor(e,t){super(),C(this,"data",void 0),C(this,"glyphMap",void 0),C(this,"kernings",void 0),this.data=e,this.glyphMap=t;var r=this.kernings={};e.kernings.forEach((e=>{var t=e.second;(r[t]=r[t]||{})[e.first]=e.amount})),this.kernings=r}shapeText(e,t){var r=this;return A().mark((function i(){var n,o,a,s,l,d;return A().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:o=void 0;case 1:if(!(n=t.peek())||n.done){i.next=17;break}if(a=n.value,s=r.glyphMap.get(a),t.next(),void 0===s){i.next=12;break}return d=void 0!==o?((null===(l=r.kernings[s.id])||void 0===l?void 0:l[o])||0)+e.letterSpacing:0,o=s.id,i.next=10,{mapped:!0,glyphId:s.id,codepoint:a,cluster:t.lastIndex,xAdvance:s.xadvance+d,yAdvance:0,xOffset:s.xoffset+d,yOffset:s.yoffset,xBearing:0,yBearing:0,width:s.width,height:s.height};case 10:i.next=15;break;case 12:return a===Nt&&(o=void 0),i.next=15,{mapped:!1,codepoint:a,cluster:t.lastIndex};case 15:i.next=1;break;case 17:case"end":return i.stop()}}),i)}))()}}class Ot extends At{constructor(e,t){var r;super(t),r=this,C(this,"type",void 0),C(this,"texture",void 0),C(this,"maxCharHeight",0),C(this,"data",void 0),C(this,"shaper",void 0),C(this,"glyphMap",new Map);var i=t.atlasUrl,n=t.atlasDataUrl,o=t.stage;this.type=e,P(o.renderer instanceof Lt,"SDF Font Faces can only be used with the WebGL Renderer"),this.texture=o.txManager.loadTexture("ImageTexture",{src:i,premultiplyAlpha:!1}),this.texture.on("loaded",(()=>{this.checkLoaded(),o.requestRender()})),this.texture.ctxTexture.load(),fetch(n).then(function(){var e=T(A().mark((function e(t){var i,n,o,a,s,l,d;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(r.data=e.sent,P(r.data),i=0,r.data.chars.forEach((e=>{r.glyphMap.set(e.id,e);var t=e.yoffset+e.height;t>i&&(i=t)})),r.maxCharHeight=i,r.shaper=new Dt(r.data,r.glyphMap),r.metrics){e.next=15;break}if(null===(n=r.data)||void 0===n||!n.lightningMetrics){e.next=14;break}o=r.data.lightningMetrics,a=o.ascender,s=o.descender,l=o.lineGap,d=o.unitsPerEm,r.metrics={ascender:a/d,descender:s/d,lineGap:l/d},e.next=15;break;case 14:throw new Error(`Font metrics not found in ${r.type} font ${r.fontFamily}. Make sure you are using the latest version of the Lightning 3 \`msdf-generator\` tool to generate your SDF fonts.`);case 15:r.checkLoaded();case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch(console.error)}getAtlasEntry(e){var t=this.glyphMap.get(e);if(void 0===t)throw new Error(`Glyph ${e} not found in font ${this.fontFamily}`);return{x:t.x,y:t.y,width:t.width,height:t.height}}checkLoaded(){this.loaded||"loaded"===this.texture.state&&this.data&&(this.loaded=!0,this.emit("loaded"))}}var zt={debug:!1,focusDebug:!1,animationsEnabled:!0,animationSettings:{duration:250,easing:"ease-in-out"},fontSettings:{fontFamily:"Ubuntu",fontSize:100},setActiveElement:()=>{}};function Gt(e,t,...r){false}var Xt=e=>e instanceof Function;function Wt(e){return Array.isArray(e)}function Vt(e){return"string"==typeof e}function Ht(e){return e instanceof fr}function Yt(e,t={}){if(Wt(e))e.forEach((e=>{Yt(e,t)}));else if(e)for(var r in e)void 0===t[r]&&(t[r]=e[r]);return t}class jt extends Array{constructor(e,t={}){return Wt(t)?(super(...t),C(this,"onChange",void 0)):Vt(t)?(super(t),C(this,"onChange",void 0)):(super(...Object.entries(t).filter((([e,t])=>t)).map((([e])=>e))),C(this,"onChange",void 0)),this.onChange=e,this}has(e){return this.indexOf(e)>=0}is(e){return this.indexOf(e)>=0}add(e){this.has(e)||(this.push(e),this.onChange())}toggle(e,t){!0===t?this.add(e):!1===t||this.has(e)?this.remove(e):this.add(e)}merge(e){if(Wt(e))this.length=0,this.push(...e);else if(Vt(e))this.length=0,this.push(e);else for(var t in e)this.toggle(t,e[t]);return this}remove(e){var t=this.indexOf(e);t>=0&&(this.splice(t,1),this.onChange())}}var Kt="element",Qt="textNode",$t="text";var qt,Zt={ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"Enter",l:"Last"," ":"Space",Backspace:"Back",Escape:"Escape"},Jt={},er=(e,t)=>{for(var r=function(){var e=_(n[i],2),r=e[0],o=e[1];Array.isArray(o)?o.forEach((e=>{t[e]=r})):null===o?delete t[r]:t[o]=r},i=0,n=Object.entries(e);i<n.length;i++)r()},tr=!0,rr=[],ir=(e,t)=>{for(var r=e,i=[];r;){var n,o;if(!r.states.has("focus")||r===e)r.states.add("focus"),null===(n=r.onFocus)||void 0===n||n.call(r,e,t),null===(o=r.onFocusChanged)||void 0===o||o.call(r,!0,e,t);i.push(r),r=r.parent}return rr.forEach((r=>{var n,o;i.includes(r)||(r.states.remove("focus"),null===(n=r.onBlur)||void 0===n||n.call(r,e,t),null===(o=r.onFocusChanged)||void 0===o||o.call(r,!1,e,t))})),zt.focusDebug&&((e,t)=>{if(tr){var r=document.createElement("style");r.type="text/css",r.innerHTML='\n      [data-focus="3"] {\n        border: 2px solid rgba(255, 33, 33, 0.2);\n        border-radius: 5px;\n        transition: border-color 0.3s ease;\n      }\n\n      [data-focus="2"] {\n        border: 2px solid rgba(255, 33, 33, 0.4);\n        border-radius: 5px;\n        transition: border-color 0.3s ease;\n      }\n\n      [data-focus="1"] {\n        border: 4px solid rgba(255, 33, 33, 0.9);\n        border-radius: 5px;\n        transition: border-color 0.5s ease;\n      }\n    ',document.head.appendChild(r),tr=!1}e.forEach((e=>{e.data=E(E({},e.data),{},{focus:void 0})})),t.forEach(((e,t)=>{e.data=E(E({},e.data),{},{focus:t+1})}))})(rr,i),rr=i,i},nr=(e,t,r)=>{for(var i=void 0,n=0,o=rr;n<o.length;n++){var a=o[n];if(i=i||a,t){var s=a[`on${t}`];if(!0===(null==s?void 0:s.call(a,e,a,i)))break}else console.log(`Unhandled key event: ${e.key||e.keyCode}`);var l=r?a.onKeyHold:a.onKeyPress;if(!0===(null==l?void 0:l.call(a,e,t,a,i)))break}return!1},or={},ar=(e,t,r)=>{if(t){var i=t.key||t.keyCode,n=Jt[i],o=Zt[i];n?(or[i]&&clearTimeout(or[i]),or[i]=window.setTimeout((()=>((e,t)=>{delete or[e.key||e.keyCode],nr(e,t,!0)})(t,n)),e)):nr(t,o,!1)}if(r){var a=r.key||r.keyCode,s=Zt[a];or[a]&&(clearTimeout(or[a]),delete or[a],nr(r,s,!1))}},sr=new Set,lr=0,dr=!1;function ur(){dr||(dr=!0,setTimeout((()=>{var e=[...sr];sr.clear();for(var t=e.length-1;t>=0;t--){e[t].updateLayout()}dr=!1,lr=0}),0))}function hr(e){for(var t=[],r=0,i=0,n=Object.entries(e);i<n.length;i++){var o=_(n[i],2),a=o[0],s=o[1];t.push({name:`effect${r}`,type:a,props:s}),r++}return Pt("DynamicShader",{effects:t})}function cr(e=""){return{set(t){"number"==typeof t&&(t={width:t,color:255}),this.effects=this.effects?E(E({},this.effects||{}),{[`border${e}`]:t}):{[`border${e}`]:t}},get(){var t;return null===(t=this.effects)||void 0===t?void 0:t[`border${e}`]}}}class fr extends Object{constructor(e){super(),this._type="text"===e?Qt:Kt,this.rendered=!1,this.lng={},this.children=[]}get effects(){return this._effects}set effects(e){this._effects=e,this.rendered&&(this.shader=hr(e))}set id(e){var t;this._id=e,null!==(t=zt.rendererOptions)&&void 0!==t&&t.inspector&&(this.data=E(E({},this.data),{},{testId:e}))}get id(){return this._id}get parent(){return this._parent}set parent(e){var t;(this._parent=e,this.rendered)&&(this.lng.parent=null!==(t=null==e?void 0:e.lng)&&void 0!==t?t:null)}insertChild(e,t){if(e.parent=this,t){this.removeChild(e);var r=this.children.indexOf(t);if(r>=0)return void this.children.splice(r,0,e)}this.children.push(e)}removeChild(e){var t=this.children.indexOf(e);t>=0&&this.children.splice(t,1)}get selectedNode(){for(var e=this.selected||0;e<this.children.length;e++){var t=this.children[e];if(Ht(t))return this.selected=e,t}}set shader(e){var t=e;Wt(e)&&(t=Pt(...e)),this.lng.shader=t}_sendToLightningAnimatable(e,t){if(this.transition&&this.rendered&&zt.animationsEnabled&&(!0===this.transition||this.transition[e])){var r=!0===this.transition||!0===this.transition[e]?void 0:this.transition[e],i=this.animate({[e]:t},r);return Xt(this.onAnimationStarted)&&i.once("animating",(r=>{var i;null===(i=this.onAnimationStarted)||void 0===i||i.call(this,r,e,t)})),Xt(this.onAnimationFinished)&&i.once("stopped",(r=>{var i;null===(i=this.onAnimationFinished)||void 0===i||i.call(this,r,e,t)})),i.start()}this.lng[e]=t}animate(e,t){return P(this.rendered,"Node must be rendered before animating"),this.lng.animate(e,t||this.animationSettings)}chain(e,t){return this._animationRunning&&(this._animationQueue=[],this._animationRunning=!1),t?this._animationQueueSettings=t:this._animationQueueSettings||(this._animationQueueSettings=t||this.animationSettings),t=t||this._animationQueueSettings,this._animationQueue=this._animationQueue||[],this._animationQueue.push({props:e,animationSettings:t}),this}start(){var e=this;return T(A().mark((function t(){var r;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e._animationQueue.shift();case 1:if(!r){t.next=8;break}return e._animationRunning=!0,t.next=5,e.animate(r.props,r.animationSettings).start().waitUntilStopped();case 5:r=e._animationQueue.shift(),t.next=1;break;case 8:e._animationRunning=!1,e._animationQueueSettings=void 0;case 10:case"end":return t.stop()}}),t)})))()}setFocus(){if(!this.skipFocus)if(this.rendered){if(void 0!==this.forwardFocus)if(Xt(this.forwardFocus)){if(!1!==this.forwardFocus.call(this,this))return}else{var e="number"==typeof this.forwardFocus?this.forwardFocus:null,t=this.children;if(null!==e&&e<t.length){var r=t[e];return void(Ht(r)&&r.setFocus())}}queueMicrotask((()=>{return ir(e=this,qt),qt=e,void zt.setActiveElement(e);var e}))}else this._autofocus=!0}isTextNode(){return this._type===Qt}_layoutOnLoad(){lr++,this.lng.on("loaded",(()=>{sr.add(this.parent),ur()}))}getText(){for(var e="",t=0;t<this.children.length;t++)e+=this.children[t].text;return e}destroy(){var e,t;this._queueDelete&&("destroy"in(t=this.lng)&&"function"==typeof t.destroy)&&(this.lng.destroy(),null!==(e=this.parent)&&void 0!==e&&e.requiresLayout()&&this.parent.updateLayout())}set onEvents(e){this._events=e}get onEvents(){return this._events}set style(e){for(var t in Wt(e)?this._style=Yt(e):this._style=e,this._style)void 0===this[t]&&(this[t]=this._style[t])}get style(){return this._style}get hasChildren(){return this.children.length>0}getChildById(e){return this.children.find((t=>t.id===e))}searchChildrenById(e){for(var t=0;t<this.children.length;t++){var r=this.children[t];if(Ht(r)){if(r.id===e)return r;var i=r.searchChildrenById(e);if(i)return i}}}set states(e){this._states=this._states?this._states.merge(e):new jt(this._stateChanged.bind(this),e),this.rendered&&this._stateChanged()}get states(){return this._states=this._states||new jt(this._stateChanged.bind(this)),this._states}get animationSettings(){return this._animationSettings||zt.animationSettings}set animationSettings(e){this._animationSettings=e}set hidden(e){this.alpha=e?0:1}get hidden(){return 0===this.alpha}set autofocus(e){this._autofocus=!!e,this._autofocus&&this.setFocus()}get autofocus(){return this._autofocus}requiresLayout(){return"flex"===this.display||this.onBeforeLayout||this.onLayout}set updateLayoutOn(e){this.updateLayout()}get updateLayoutOn(){return null}updateLayout(){if(this.hasChildren){Gt();var e,t=!1;if(Xt(this.onBeforeLayout)&&(console.warn("onBeforeLayout is deprecated"),t=this.onBeforeLayout.call(this,this)||!1),"flex"===this.display){if(function(e){for(var t=[],r=!1,i=0,n=0;n<e.children.length;n++){var o=e.children[n];o._type!==$t&&!1!==o.flexItem&&(void 0!==o.flexOrder&&(r=!0),void 0!==o.flexGrow&&(i+=o.flexGrow),t.push(o))}r&&t.sort(((e,t)=>(e.flexOrder||0)-(t.flexOrder||0)));var a=t.length,s="row"===(e.flexDirection||"row"),l=s?"width":"height",d=s?"height":"width",u=s?"marginLeft":"marginTop",h=s?"marginRight":"marginBottom",c=s?"x":"y",f=s?"y":"x",p=e[l]||0,v=e[d]||0,g=e.gap||0,m=e.justifyContent||"flexStart",x=e.alignItems;if(i)for(var y=t.reduce(((e,t)=>e+(t.flexGrow?0:t[l]||0)+(t[u]||0)+(t[h]||0)),0),b=(p-y-g*(a-1))/i,A=0;A<t.length;A++){var w=t[A];void 0!==w.flexGrow&&w.flexGrow>0&&(w[l]=w.flexGrow*b)}var T=0;["center","spaceBetween","spaceEvenly"].includes(m)&&(T=t.reduce(((e,t)=>e+(t[l]||0)+(t[u]||0)+(t[h]||0)),0));var S=v&&x?e=>{"flexStart"===x?e[f]=0:"center"===x?e[f]=(v-(e[d]||0))/2:"flexEnd"===x&&(e[f]=v-(e[d]||0))}:e=>e;if("flexStart"===m){for(var E=0,_=0;_<t.length;_++){var C=t[_];C[c]=E+(C[u]||0),E+=(C[l]||0)+g+(C[u]||0)+(C[h]||0),S(C)}if("fixed"!==e.flexBoundary){var R=E-g;if(R!==e[l])return e[l]=R,!0}}else if("flexEnd"===m){for(var I=p,B=a-1;B>=0;B--){var k=t[B];k[c]=I-(k[l]||0)-(k[h]||0),I-=(k[l]||0)+g+(k[u]||0)+(k[h]||0),S(k)}if("fixed"!==e.flexBoundary){var M=I-g;if(M!==e[l])return e[l]=M,!0}}else if("center"===m)for(var L=(p-(T+g*(a-1)))/2,F=0;F<t.length;F++){var P=t[F];P[c]=L+(P[u]||0),L+=(P[l]||0)+g+(P[u]||0)+(P[h]||0),S(P)}else if("spaceBetween"===m)for(var N=(p-T)/(a-1),U=0,D=0;D<t.length;D++){var O=t[D];O[c]=U+(O[u]||0),U+=(O[l]||0)+N+(O[u]||0)+(O[h]||0),S(O)}else if("spaceEvenly"===m)for(var z=(p-T)/(a+1),G=z,X=0;X<t.length;X++){var W=t[X];W[c]=G+(W[u]||0),G+=(W[l]||0)+z+(W[u]||0)+(W[h]||0),S(W)}return!1}(this)||t)null===(e=this.parent)||void 0===e||e.updateLayout()}else if(t){var r;null===(r=this.parent)||void 0===r||r.updateLayout()}Xt(this.onLayout)&&this.onLayout.call(this,this)}}_stateChanged(){if(Gt(0,0,this.states),this.forwardStates){var e=this.states.slice();this.children.forEach((t=>{t.states=e}))}var t=this.states;if(this._undoStyles||this.style&&function(e,t){var r,i=R(t);try{for(i.s();!(r=i.n()).done;)if(r.value in e)return!0}catch(n){i.e(n)}finally{i.f()}return!1}(this.style,t)){this._undoStyles=this._undoStyles||[];var r={};this._undoStyles.forEach((e=>{r[e]=this.style[e]}));var i=t.reduce(((e,t)=>{var r=this.style[t];return r&&(e=E(E({},e),r)),e}),{});this._undoStyles=Object.keys(i),void 0!==i.transition&&(this.transition=i.transition),Object.assign(this,r,i)}}render(e){var t,r=this,i=this.parent;if(i)if(i.rendered){if(i.requiresLayout()&&sr.add(i),!this.rendered){this._states&&this._stateChanged();var n=r.lng;if((this.right||0===this.right)&&(n.x=(i.width||0)-this.right,n.mountX=1),(this.bottom||0===this.bottom)&&(n.y=(i.height||0)-this.bottom,n.mountY=1),n.x=n.x||0,n.y=n.y||0,n.parent=i.lng,r._effects&&(n.shader=hr(r._effects)),r.isTextNode()){var o=n;if(zt.fontSettings)for(var a in zt.fontSettings)void 0===o[a]&&(o[a]=zt.fontSettings[a]);o.text=o.text||r.getText(),o.textAlign&&!o.contain&&console.warn("Text align requires contain: ",r.getText()),o.contain&&(o.width||(o.width=(i.width||0)-o.x-(o.marginRight||0)),"both"!==o.contain||o.height||o.maxLines?1===o.maxLines&&(o.height=o.height||o.lineHeight||o.fontSize):o.height=(i.height||0)-o.y-(o.marginBottom||0)),Gt(0,0),r.lng=Ft.createTextNode(n),i.requiresLayout()&&(n.width&&n.height||r._layoutOnLoad())}else n.texture||(isNaN(n.width)&&(n.width=(i.width||0)-n.x),isNaN(n.height)&&(n.height=(i.height||0)-n.y),n.rtt&&!n.color&&(n.color=4294967295),n.color||n.src||(n.color=0)),Gt(0,0),r.lng=Ft.createNode(n);if(r.rendered=!0,r.autosize&&i.requiresLayout()&&r._layoutOnLoad(),r.onFail&&r.lng.on("failed",r.onFail),r.onLoad&&r.lng.on("loaded",r.onLoad),Xt(this.onCreate)&&this.onCreate.call(this,r),r.onEvents&&r.onEvents.forEach((([e,t])=>{r.lng.on(e,((e,i)=>t(r,i)))})),null!==(t=r.lng)&&void 0!==t&&t.div&&(r.lng.div.element=r),r._type===Kt)for(var s=r.children.length,l=0;l<s;l++){var d=r.children[l];P(d,"Child is undefined"),Ht(d)?d.render():d.text&&d._type===$t&&console.warn("TextNode outside of <Text>: ",d)}e&&!lr&&ur(),r._autofocus&&r.setFocus()}}else console.warn("Parent not rendered yet: ",this);else console.warn("Parent not set - no node created for: ",this)}}for(var pr=function(){var e=gr[vr];Object.defineProperty(fr.prototype,e,{get(){return this.lng[e]},set(t){this._sendToLightningAnimatable(e,t)}})},vr=0,gr=["alpha","color","colorTop","colorRight","colorLeft","colorBottom","colorTl","colorTr","colorBl","colorBr","height","fontSize","lineHeight","mount","mountX","mountY","pivot","pivotX","pivotY","rotation","scale","scaleX","scaleY","width","worldX","worldY","x","y","zIndex","zIndexLocked"];vr<gr.length;vr++)pr();for(var mr=function(){var e=yr[xr];Object.defineProperty(fr.prototype,e,{get(){return this.lng[e]},set(t){this.lng[e]=t}})},xr=0,yr=["absX","absY","autosize","clipping","contain","data","fontFamily","fontStretch","fontStyle","fontWeight","letterSpacing","maxLines","offsetY","overflowSuffix","rtt","scrollable","scrollY","src","text","textAlign","textBaseline","textOverflow","texture","textureOptions","verticalAlign","wordWrap"];xr<yr.length;xr++)mr();function br(e){return{set(t){this.effects=this.effects?E(E({},this.effects),{},{[e]:t}):{[e]:t}},get(){var t;return null===(t=this.effects)||void 0===t?void 0:t[e]}}}Object.defineProperties(fr.prototype,{border:cr(),borderLeft:cr("Left"),borderRight:cr("Right"),borderTop:cr("Top"),borderBottom:cr("Bottom"),linearGradient:br("linearGradient"),radialGradient:br("radialGradient"),radialProgress:br("radialProgressGradient"),borderRadius:{set(e){this.effects=this.effects?E(E({},this.effects),{},{radius:{radius:e}}):{radius:{radius:e}}},get(){var e;return null===(e=this.effects)||void 0===e||null===(e=e.radius)||void 0===e?void 0:e.radius}}});var Ar={context:void 0,registry:void 0,done:!1,getContextId(){return wr(this.context.count)},getNextContextId(){return wr(this.context.count++)}};function wr(e){var t=String(e),r=t.length-1;return Ar.context.id+(r?String.fromCharCode(96+r):"")+t}function Tr(e){Ar.context=e}var Sr,Er=(e,t)=>e===t,_r=Symbol("solid-proxy"),Cr=Symbol("solid-track"),Rr={equals:Er},Ir=hi,Br=1,kr=2,Mr={owned:null,cleanups:null,context:null,owner:null},Lr={},Fr=null,Pr=null,Nr=null,Ur=null,Dr=null,Or=0;function zr(e,t){var r=Nr,i=Fr,n=0===e.length,o=void 0===t?i:t,a=n?Mr:{owned:null,cleanups:null,context:o?o.context:null,owner:o},s=n?e:()=>e((()=>Qr((()=>vi(a)))));Fr=a,Nr=null;try{return ui(s,!0)}finally{Nr=r,Fr=i}}function Gr(e,t){var r={value:e,observers:null,observerSlots:null,comparator:(t=t?Object.assign({},Rr,t):Rr).equals||void 0};return[oi.bind(r),e=>("function"==typeof e&&(e=e(r.value)),ai(r,e))]}function Xr(e,t,r){si(li(e,t,!0,Br))}function Wr(e,t,r){si(li(e,t,!1,Br))}function Vr(e,t,r){Ir=ci;var i=li(e,t,!1,Br);i.user=!0,Dr?Dr.push(i):si(i)}function Hr(e,t,r){r=r?Object.assign({},Rr,r):Rr;var i=li(e,t,!0,0);return i.observers=null,i.observerSlots=null,i.comparator=r.equals||void 0,si(i),oi.bind(i)}function Yr(e,t,r){var i,n,o;2===arguments.length&&"object"==typeof t||1===arguments.length?(i=!0,n=e,o=t||{}):(i=e,n=t,o={});var a=null,s=Lr,l=null,d=!1,u="initialValue"in o,h="function"==typeof i&&Hr(i),c=new Set,f=_((o.storage||Gr)(o.initialValue),2),p=f[0],v=f[1],g=_(Gr(void 0),2),m=g[0],x=g[1],y=_(Gr(void 0,{equals:!1}),2),b=y[0],A=y[1],w=_(Gr(u?"ready":"unresolved"),2),T=w[0],S=w[1];function E(e,t,r,i){return a===e&&(a=null,void 0!==i&&(u=!0),e!==s&&t!==s||!o.onHydrated||queueMicrotask((()=>o.onHydrated(i,{value:t}))),s=Lr,function(e,t){ui((()=>{void 0===t&&v((()=>e)),S(void 0!==t?"errored":u?"ready":"unresolved"),x(t);var r,i=R(c.keys());try{for(i.s();!(r=i.n()).done;){r.value.decrement()}}catch(t){i.e(t)}finally{i.f()}c.clear()}),!1)}(t,r)),t}function C(){var e=Sr,t=p(),r=m();if(void 0!==r&&!a)throw r;return Nr&&!Nr.user&&e&&Xr((()=>{b(),a&&(e.resolved||c.has(e)||(e.increment(),c.add(e)))})),t}function I(e=!0){if(!1===e||!d){d=!1;var t=h?h():i;if(null!=t&&!1!==t){var r,o=s!==Lr?s:Qr((()=>n(t,{value:p(),refetching:e})));return(r=o)&&"object"==typeof r&&"then"in r?(a=o,"value"in o?("success"===o.status?E(a,o.value,void 0,t):E(a,void 0,gi(o.value),t),o):(d=!0,queueMicrotask((()=>d=!1)),ui((()=>{S(u?"refreshing":"pending"),A()}),!1),o.then((e=>E(o,e,void 0,t)),(e=>E(o,void 0,gi(e),t))))):(E(a,o,void 0,t),o)}E(a,Qr(p))}}return Ar.context&&(l=Ar.getNextContextId(),"initial"===o.ssrLoadFrom?s=o.initialValue:Ar.load&&Ar.has(l)&&(s=Ar.load(l))),Object.defineProperties(C,{state:{get:()=>T()},error:{get:()=>m()},loading:{get(){var e=T();return"pending"===e||"refreshing"===e}},latest:{get(){if(!u)return C();var e=m();if(e&&!a)throw e;return p()}}}),h?Xr((()=>I(!1))):I(!1),[C,{refetch:I,mutate:v}]}function jr(e,t=Er,r){var i=new Map,n=li((r=>{var n,o=e(),a=R(i.entries());try{for(a.s();!(n=a.n()).done;){var s=_(n.value,2),l=s[0],d=s[1];if(t(l,o)!==t(l,r)){var u,h=R(d.values());try{for(h.s();!(u=h.n()).done;){var c=u.value;c.state=Br,c.pure?Ur.push(c):Dr.push(c)}}catch(f){h.e(f)}finally{h.f()}}}}catch(f){a.e(f)}finally{a.f()}return o}),void 0,!0,Br);return si(n),e=>{var r,o=Nr;o&&((r=i.get(e))?r.add(o):i.set(e,r=new Set([o])),Zr((()=>{r.delete(o),!r.size&&i.delete(e)})));return t(e,n.value)}}function Kr(e){return ui(e,!1)}function Qr(e){if(null===Nr)return e();var t=Nr;Nr=null;try{return e()}finally{Nr=t}}function $r(e,t,r){var i,n=Array.isArray(e),o=r&&r.defer;return r=>{var a;if(n){a=Array(e.length);for(var s=0;s<e.length;s++)a[s]=e[s]()}else a=e();if(o)return o=!1,r;var l=Qr((()=>t(a,i,r)));return i=a,l}}function qr(e){Vr((()=>Qr(e)))}function Zr(e){return null===Fr||(null===Fr.cleanups?Fr.cleanups=[e]:Fr.cleanups.push(e)),e}function Jr(){return Nr}function ei(){return Fr}function ti(e,t){var r=Fr,i=Nr;Fr=e,Nr=null;try{return ui(t,!0)}catch(n){mi(n)}finally{Fr=r,Nr=i}}function ri(e,t){var r=Symbol("context");return{id:r,Provider:yi(r),defaultValue:e}}function ii(e){var t;return Fr&&Fr.context&&void 0!==(t=Fr.context[e.id])?t:e.defaultValue}function ni(e){var t=Hr(e),r=Hr((()=>xi(t())));return r.toArray=()=>{var e=r();return Array.isArray(e)?e:null!=e?[e]:[]},r}function oi(){if(this.sources&&this.state)if(this.state===Br)si(this);else{var e=Ur;Ur=null,ui((()=>fi(this)),!1),Ur=e}if(Nr){var t=this.observers?this.observers.length:0;Nr.sources?(Nr.sources.push(this),Nr.sourceSlots.push(t)):(Nr.sources=[this],Nr.sourceSlots=[t]),this.observers?(this.observers.push(Nr),this.observerSlots.push(Nr.sources.length-1)):(this.observers=[Nr],this.observerSlots=[Nr.sources.length-1])}return this.value}function ai(e,t,r){var i=e.value;return e.comparator&&e.comparator(i,t)||(e.value=t,e.observers&&e.observers.length&&ui((()=>{for(var t=0;t<e.observers.length;t+=1){var r=e.observers[t],i=Pr&&Pr.running;i&&Pr.disposed.has(r),(i?r.tState:r.state)||(r.pure?Ur.push(r):Dr.push(r),r.observers&&pi(r)),i||(r.state=Br)}if(Ur.length>1e6)throw Ur=[],new Error}),!1)),t}function si(e){if(e.fn){vi(e);var t=Or;!function(e,t,r){var i,n=Fr,o=Nr;Nr=Fr=e;try{i=e.fn(t)}catch(a){return e.pure&&(e.state=Br,e.owned&&e.owned.forEach(vi),e.owned=null),e.updatedAt=r+1,mi(a)}finally{Nr=o,Fr=n}(!e.updatedAt||e.updatedAt<=r)&&(null!=e.updatedAt&&"observers"in e?ai(e,i):e.value=i,e.updatedAt=r)}(e,e.value,t)}}function li(e,t,r,i=Br,n){var o={fn:e,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:Fr,context:Fr?Fr.context:null,pure:r};return null===Fr||Fr!==Mr&&(Fr.owned?Fr.owned.push(o):Fr.owned=[o]),o}function di(e){if(0!==e.state){if(e.state===kr)return fi(e);if(e.suspense&&Qr(e.suspense.inFallback))return e.suspense.effects.push(e);for(var t=[e];(e=e.owner)&&(!e.updatedAt||e.updatedAt<Or);)e.state&&t.push(e);for(var r=t.length-1;r>=0;r--)if((e=t[r]).state===Br)si(e);else if(e.state===kr){var i=Ur;Ur=null,ui((()=>fi(e,t[0])),!1),Ur=i}}}function ui(e,t){if(Ur)return e();var r=!1;t||(Ur=[]),Dr?r=!0:Dr=[],Or++;try{var i=e();return function(e){Ur&&(hi(Ur),Ur=null);if(e)return;var t=Dr;Dr=null,t.length&&ui((()=>Ir(t)),!1)}(r),i}catch(n){r||(Dr=null),Ur=null,mi(n)}}function hi(e){for(var t=0;t<e.length;t++)di(e[t])}function ci(e){var t,r=0;for(t=0;t<e.length;t++){var i=e[t];i.user?e[r++]=i:di(i)}if(Ar.context){if(Ar.count)return Ar.effects||(Ar.effects=[]),void Ar.effects.push(...e.slice(0,r));Ar.effects&&(e=[...Ar.effects,...e],r+=Ar.effects.length,delete Ar.effects),Tr()}for(t=0;t<r;t++)di(e[t])}function fi(e,t){e.state=0;for(var r=0;r<e.sources.length;r+=1){var i=e.sources[r];if(i.sources){var n=i.state;n===Br?i!==t&&(!i.updatedAt||i.updatedAt<Or)&&di(i):n===kr&&fi(i,t)}}}function pi(e){for(var t=0;t<e.observers.length;t+=1){var r=e.observers[t];r.state||(r.state=kr,r.pure?Ur.push(r):Dr.push(r),r.observers&&pi(r))}}function vi(e){var t;if(e.sources)for(;e.sources.length;){var r=e.sources.pop(),i=e.sourceSlots.pop(),n=r.observers;if(n&&n.length){var o=n.pop(),a=r.observerSlots.pop();i<n.length&&(o.sourceSlots[a]=i,n[i]=o,r.observerSlots[i]=a)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)vi(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function gi(e){return e instanceof Error?e:new Error("string"==typeof e?e:"Unknown error",{cause:e})}function mi(e,t=Fr){throw gi(e)}function xi(e){if("function"==typeof e&&!e.length)return xi(e());if(Array.isArray(e)){for(var t=[],r=0;r<e.length;r++){var i=xi(e[r]);Array.isArray(i)?t.push.apply(t,i):t.push(i)}return t}return e}function yi(e,t){return function(t){var r;return Wr((()=>r=Qr((()=>(Fr.context=E(E({},Fr.context),{},{[e]:t.value}),ni((()=>t.children)))))),void 0),r}}var bi=Symbol("fallback");function Ai(e){for(var t=0;t<e.length;t++)e[t]()}function wi(e,t){return Qr((()=>e(t||{})))}function Ti(){return!0}var Si={get:(e,t,r)=>t===_r?r:e.get(t),has:(e,t)=>t===_r||e.has(t),set:Ti,deleteProperty:Ti,getOwnPropertyDescriptor:(e,t)=>({configurable:!0,enumerable:!0,get:()=>e.get(t),set:Ti,deleteProperty:Ti}),ownKeys:e=>e.keys()};function Ei(e){return(e="function"==typeof e?e():e)?e:{}}function _i(){for(var e=0,t=this.length;e<t;++e){var r=this[e]();if(void 0!==r)return r}}function Ci(...e){for(var t=!1,r=0;r<e.length;r++){var i=e[r];t=t||!!i&&_r in i,e[r]="function"==typeof i?(t=!0,Hr(i)):i}if(t)return new Proxy({get(t){for(var r=e.length-1;r>=0;r--){var i=Ei(e[r])[t];if(void 0!==i)return i}},has(t){for(var r=e.length-1;r>=0;r--)if(t in Ei(e[r]))return!0;return!1},keys(){for(var t=[],r=0;r<e.length;r++)t.push(...Object.keys(Ei(e[r])));return[...new Set(t)]}},Si);for(var n={},o=Object.create(null),a=e.length-1;a>=0;a--){var s=e[a];if(s)for(var l=Object.getOwnPropertyNames(s),d=function(){var e=l[u];if("__proto__"===e||"constructor"===e)return 1;var t=Object.getOwnPropertyDescriptor(s,e);if(o[e]){var r=n[e];r&&(t.get?r.push(t.get.bind(s)):void 0!==t.value&&r.push((()=>t.value)))}else o[e]=t.get?{enumerable:!0,configurable:!0,get:_i.bind(n[e]=[t.get.bind(s)])}:void 0!==t.value?t:void 0},u=l.length-1;u>=0;u--)d()}for(var h={},c=Object.keys(o),f=c.length-1;f>=0;f--){var p=c[f],v=o[p];v&&v.get?Object.defineProperty(h,p,v):h[p]=v?v.value:void 0}return h}function Ri(e){var t,r,i=i=>{var n,o=Ar.context;if(o){var a=_(Gr(),2),s=a[0],l=a[1];Ar.count||(Ar.count=0),Ar.count++,(r||(r=e())).then((e=>{!Ar.done&&Tr(o),Ar.count--,l((()=>e.default)),Tr()})),t=s}else if(!t){var d=_(Yr((()=>(r||(r=e())).then((e=>e.default)))),1)[0];t=d}return Hr((()=>(n=t())?Qr((()=>{if(!o||Ar.done)return n(i);var e=Ar.context;Tr(o);var t=n(i);return Tr(e),t})):""))};return i.preload=()=>r||((r=e()).then((e=>t=()=>e.default)),r),i}var Ii=e=>`Stale read from <${e}>.`;function Bi(e){var t="fallback"in e&&{fallback:()=>e.fallback};return Hr(function(e,t,r={}){var i=[],n=[],o=[],a=0,s=t.length>1?[]:null;return Zr((()=>Ai(o))),()=>{var l,d,u=e()||[],h=u.length;return u[Cr],Qr((()=>{var e,t,f,p,v,g,m,x,y;if(0===h)0!==a&&(Ai(o),o=[],i=[],n=[],a=0,s&&(s=[])),r.fallback&&(i=[bi],n[0]=zr((e=>(o[0]=e,r.fallback()))),a=1);else if(0===a){for(n=new Array(h),d=0;d<h;d++)i[d]=u[d],n[d]=zr(c);a=h}else{for(f=new Array(h),p=new Array(h),s&&(v=new Array(h)),g=0,m=Math.min(a,h);g<m&&i[g]===u[g];g++);for(m=a-1,x=h-1;m>=g&&x>=g&&i[m]===u[x];m--,x--)f[x]=n[m],p[x]=o[m],s&&(v[x]=s[m]);for(e=new Map,t=new Array(x+1),d=x;d>=g;d--)y=u[d],l=e.get(y),t[d]=void 0===l?-1:l,e.set(y,d);for(l=g;l<=m;l++)y=i[l],void 0!==(d=e.get(y))&&-1!==d?(f[d]=n[l],p[d]=o[l],s&&(v[d]=s[l]),d=t[d],e.set(y,d)):o[l]();for(d=g;d<h;d++)d in f?(n[d]=f[d],o[d]=p[d],s&&(s[d]=v[d],s[d](d))):n[d]=zr(c);n=n.slice(0,a=h),i=u.slice(0)}return n}));function c(e){if(o[d]=e,s){var r=_(Gr(d),2),i=r[0],n=r[1];return s[d]=n,t(u[d],i)}return t(u[d])}}}((()=>e.each),e.children,t||void 0))}function ki(e){var t="fallback"in e&&{fallback:()=>e.fallback};return Hr(function(e,t,r={}){var i,n=[],o=[],a=[],s=[],l=0;return Zr((()=>Ai(a))),()=>{var d=e()||[],u=d.length;return d[Cr],Qr((()=>{if(0===u)return 0!==l&&(Ai(a),a=[],n=[],o=[],l=0,s=[]),r.fallback&&(n=[bi],o[0]=zr((e=>(a[0]=e,r.fallback()))),l=1),o;for(n[0]===bi&&(a[0](),a=[],n=[],o=[],l=0),i=0;i<u;i++)i<n.length&&n[i]!==d[i]?s[i]((()=>d[i])):i>=n.length&&(o[i]=zr(h));for(;i<n.length;i++)a[i]();return l=s.length=a.length=u,n=d.slice(0),o=o.slice(0,l)}));function h(e){a[i]=e;var r=_(Gr(d[i]),2),n=r[0],o=r[1];return s[i]=o,t(n,i)}}}((()=>e.each),e.children,t||void 0))}function Mi(e){var t=e.keyed,r=Hr((()=>e.when),void 0,{equals:(e,r)=>t?e===r:!e==!r});return Hr((()=>{var i=r();if(i){var n=e.children;return"function"==typeof n&&n.length>0?Qr((()=>n(t?i:()=>{if(!Qr(r))throw Ii("Show");return e.when}))):n}return e.fallback}),void 0,void 0)}var Li=_(Gr(void 0),2),Fi=Li[0],Pi=Li[1];function Ni(e=""){return t=e,Number.isInteger(t)?e:"string"==typeof e?e.startsWith("#")?Number(e.replace("#","0x")+(7===e.length?"ff":"")):e.startsWith("0x")?Number(e):Number("0x"+(6===e.length?e+"ff":e)):0;var t}function Ui({createElement:e,createTextNode:t,isTextNode:r,replaceText:i,insertNode:n,removeNode:o,setProperty:a,getParentNode:s,getFirstChild:l,getNextSibling:d}){function u(e,t,r,i){if(void 0===r||i||(i=[]),"function"!=typeof t)return h(e,t,i,r);Wr((i=>h(e,t(),i,r)),i)}function h(e,o,a,s,d){for(;"function"==typeof a;)a=a();if(o===a)return a;var u=typeof o,m=void 0!==s;if("string"===u||"number"===u)if("number"===u&&(o=o.toString()),m){var x=a[0];x&&r(x)?i(x,o):x=t(o),a=p(e,a,s,x)}else""!==a&&"string"==typeof a?i(l(e),a=o):(p(e,a,s,t(o)),a=o);else if(null==o||"boolean"===u)a=p(e,a,s);else{if("function"===u)return Wr((()=>{for(var t=o();"function"==typeof t;)t=t();a=h(e,t,a,s)})),()=>a;if(Array.isArray(o)){var y=[];if(c(y,o,d))return Wr((()=>a=h(e,y,a,s,!0))),()=>a;if(0===y.length){var b=p(e,a,s);if(m)return a=b}else Array.isArray(a)?0===a.length?v(e,y,s):f(e,a,y):null==a||""===a?v(e,y):f(e,m&&a||[l(e)],y);a=y}else{if(Array.isArray(a)){if(m)return a=p(e,a,s,o);p(e,a,null,o)}else null!=a&&""!==a&&l(e)?g(e,o,l(e)):n(e,o);a=o}}return a}function c(e,r,i){for(var n=!1,o=0,a=r.length;o<a;o++){var s=r[o],l=void 0;if(null==s||!0===s||!1===s);else if(Array.isArray(s))n=c(e,s)||n;else if("string"==(l=typeof s)||"number"===l)e.push(t(s));else if("function"===l)if(i){for(;"function"==typeof s;)s=s();n=c(e,Array.isArray(s)?s:[s])||n}else e.push(s),n=!0;else e.push(s)}return n}function f(e,t,r){for(var i=r.length,a=t.length,s=i,l=0,u=0,h=d(t[a-1]),c=null;l<a||u<s;)if(t[l]!==r[u]){for(;t[a-1]===r[s-1];)a--,s--;if(a===l)for(var f=s<i?u?d(r[u-1]):r[s-u]:h;u<s;)n(e,r[u++],f);else if(s===u)for(;l<a;)c&&c.has(t[l])||o(e,t[l]),l++;else if(t[l]===r[s-1]&&r[u]===t[a-1]){var p=d(t[--a]);n(e,r[u++],d(t[l++])),n(e,r[--s],p),t[a]=r[s]}else{if(!c){c=new Map;for(var v=u;v<s;)c.set(r[v],v++)}var m=c.get(t[l]);if(null!=m)if(u<m&&m<s){for(var x=l,y=1,b=void 0;++x<a&&x<s&&null!=(b=c.get(t[x]))&&b===m+y;)y++;if(y>m-u)for(var A=t[l];u<m;)n(e,r[u++],A);else g(e,r[u++],t[l++])}else l++;else o(e,t[l++])}}else l++,u++}function p(e,r,i,a){if(void 0===i){for(var d;d=l(e);)o(e,d);return a&&n(e,a),""}var u=a||t("");if(r.length)for(var h=!1,c=r.length-1;c>=0;c--){var f=r[c];if(u!==f){var p=s(f)===e;h||c?p&&o(e,f):p?g(e,u,f):n(e,u,i)}else h=!0}else n(e,u,i);return[u]}function v(e,t,r){for(var i=0,o=t.length;i<o;i++)n(e,t[i],r)}function g(e,t,r){n(e,t,r),o(e,r)}function m(e,t,r={},i){return t||(t={}),i||Wr((()=>r.children=h(e,t.children,r.children))),Wr((()=>t.ref&&t.ref(e))),Wr((()=>{for(var i in t)if("children"!==i&&"ref"!==i){var n=t[i];n!==r[i]&&(a(e,i,n,r[i]),r[i]=n)}})),r}return{render(e,t){var r;return zr((i=>{r=i,u(t,e())})),r},insert:u,spread(e,t,r){"function"==typeof t?Wr((i=>m(e,t(),i,r))):m(e,t,void 0,r)},createElement:e,createTextNode:t,insertNode:n,setProp:(e,t,r,i)=>(a(e,t,r,i),r),mergeProps:Ci,effect:Wr,memo:Hr,createComponent:wi,use:(e,t,r)=>Qr((()=>e(t,r)))}}w("E",Pi);var Di,Oi={createElement:e=>new fr(e),createTextNode:e=>({_type:$t,text:e,parent:void 0}),replaceText(e,t){Gt(0,0),e.text=t;var r=e.parent;P(r),r.text=r.getText()},setProperty(e,t,r=!0){e[t]=r},insertNode(e,t,r){Gt(0,0),e.insertChild(t,r),t._queueDelete=!1,t instanceof fr?e.rendered&&t.render(!0):e.isTextNode()&&(e.text=e.getText())},isTextNode:e=>e.isTextNode(),removeNode(e,t){Gt(0,0),e.removeChild(t),t._queueDelete=!0,t instanceof fr&&queueMicrotask((()=>t.destroy()))},getParentNode:e=>e.parent,getFirstChild:e=>e.children[0],getNextSibling(e){var t=e.parent.children||[],r=t.indexOf(e)+1;if(r<t.length)return t[r]}},zi=function(e){var t=Ui(e);return t.mergeProps=Ci,t}(Oi),Gi=Oi.createElement("App"),Xi=function(e){return zi.render(e,Gi)};zi.effect;var Wi=zi.memo,Vi=zi.createComponent,Hi=zi.createElement,Yi=(zi.createTextNode,zi.insertNode,zi.insert,zi.spread),ji=zi.setProp,Ki=zi.mergeProps;zi.use;w({l:Wi,h:Vi,m:Ki});var Qi=w("V",(e=>{var t=Hi("node");return Yi(t,e,!1),t})),$i=w("T",(e=>{var t=Hi("text");return Yi(t,e,!1),t}));class qi{constructor(e,t=0){C(this,"iterator",void 0),C(this,"peekBuffer",[]),C(this,"_lastIndex",void 0),this.iterator=e,this.iterator=e,this._lastIndex=t-1,this.peekBuffer=[]}next(){var e=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return e.done?this._lastIndex=-1:this._lastIndex++,e}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];var e=this.iterator.next();return this.peekBuffer.push(e),e}get lastIndex(){return this._lastIndex}}function Zi(e,t=0){var r,i;return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=t;case 1:if(!(r<e.length)){n.next=10;break}if(void 0!==(i=e.codePointAt(r))){n.next=5;break}throw new Error("Invalid Unicode code point");case 5:return n.next=7,i;case 7:r+=i<=65535?1:2,n.next=1;break;case 10:case"end":return n.stop()}}),k)}function Ji(e,t,r,i,n,o,a,s,l,d,u,h,c,f,p,v,g,m,x){P(p,"Font face must be loaded"),P(p.loaded,"Font face must be loaded"),P(p.data,"Font face must be loaded"),P(p.shaper,"Font face must be loaded");for(var y,b=s/p.data.info.size,A=l/b,w=o/b,T=d/b,S=c[e],E=(null==S?void 0:S.codepointIndex)||0,_=(null==S?void 0:S.maxX)||0,C=(null==S?void 0:S.maxY)||0,I=t,B=r,k=0,M={codepointIndex:-1,bufferOffset:-1,xStart:-1},L=p.shaper,F={letterSpacing:T},N=L.shapeText(F,new qi(Zi(i,E),E)),U=-1,D=[],O=a/b,z=function(e,t,r){var i,n=0,o=R(r.shapeText(t,new qi(Zi(e,0),0)));try{for(o.s();!(i=o.n()).done;){var a=i.value;a.mapped&&(n+=a.xAdvance)}}catch(s){o.e(s)}finally{o.f()}return n}(m,F,L),G=!0;G;){for(var X=(0===x||e+1<x)&&("both"!==h||g||B+A+p.maxCharHeight<=O),W=X?w:w-z,V=0,H=B+p.maxCharHeight>=f.y1,Y=B<=f.y2,j=H&&Y;(y=N.next())&&!y.done;){var K=y.value;if(e===c.length)c.push({codepointIndex:K.cluster,maxY:C,maxX:_});else if(e>c.length)throw new Error("Unexpected lineCache length");if(32===K.codepoint||10===K.codepoint?-1!==M.codepointIndex&&(M.codepointIndex=-1,V=I):-1===M.codepointIndex&&(M.codepointIndex=K.cluster,M.bufferOffset=k,M.xStart=V),K.mapped){var Q=I+K.xOffset+K.width;if("none"!==h&&Q>=W&&-1!==M.codepointIndex&&M.xStart>0){if(X){N=L.shapeText(F,new qi(Zi(i,M.codepointIndex),M.codepointIndex)),k=M.bufferOffset;break}N=L.shapeText(F,new qi(Zi(m,0),0)),I=M.xStart,k=M.bufferOffset,h="none"}else{var $=I+K.xOffset,q=B+K.yOffset;if(j){-1===U&&(U=k);var Z=p.getAtlasEntry(K.glyphId),J=Z.x/p.data.common.scaleW,ee=Z.y/p.data.common.scaleH,te=Z.width/p.data.common.scaleW,re=Z.height/p.data.common.scaleH;u[k++]=$,u[k++]=q,u[k++]=J,u[k++]=ee,u[k++]=$+K.width,u[k++]=q,u[k++]=J+te,u[k++]=ee,u[k++]=$,u[k++]=q+K.height,u[k++]=J,u[k++]=ee+re,u[k++]=$+K.width,u[k++]=q+K.height,u[k++]=J+te,u[k++]=ee+re}C=Math.max(C,q+K.height),_=Math.max(_,$+K.width),I+=K.xAdvance}}else if(10===K.codepoint){if(X)break;N=L.shapeText(F,new qi(Zi(m,0),0)),h="none"}}-1!==U&&(D.push({bufferStart:U,bufferEnd:k}),U=-1),I=0,B+=A,e++,M.codepointIndex=-1,V=0,!v&&"both"===h&&B>f.y2||y&&y.done?G=!1:X||(G=!1)}if("center"===n)for(var ie="none"===h?_:w,ne=0;ne<D.length;ne++)for(var oe=D[ne],ae=(ie-(u[oe.bufferEnd-4]-u[oe.bufferStart]))/2,se=oe.bufferStart;se<oe.bufferEnd;se+=4)u[se]+=ae;else if("right"===n)for(var le="none"===h?_:w,de=0;de<D.length;de++)for(var ue=D[de],he=le-(ue.bufferEnd===ue.bufferStart?0:u[ue.bufferEnd-4]-u[ue.bufferStart]),ce=ue.bufferStart;ce<ue.bufferEnd;ce+=4)u[ce]+=he;return P(y),{bufferNumFloats:k,bufferNumQuads:k/16,layoutNumCharacters:y.done?i.length-E:y.value.cluster-E+1,fullyProcessed:!!y.done,maxX:_,maxY:C,numLines:c.length}}function en(e,t,r,i,n,o,a,s){var l,d,u,h=e.screen,c=e.sdf;if((u=a).x1<u.x2&&u.y1<u.y2){var f=a.x1-t,p=f+(a.x2-a.x1),v=a.y1-r+i,g=(l=v-o,d=n||1,Math.floor(l/d)*d),m=function(e,t){return Math.ceil(e/t)*t}(v+(a.y2-a.y1)+o,n||1);h.x1=f,h.y1=g,h.x2=p,h.y2=m,c.x1=f/s,c.y1=g/s,c.x2=p/s,c.y2=m/s,e.numLines=Math.ceil((m-g)/n),e.firstLineIdx=n?Math.floor(g/n):0}else h.x1=0,h.y1=0,h.x2=0,h.y2=0,c.x1=0,c.y1=0,c.x2=0,c.y2=0,e.numLines=0,e.firstLineIdx=0;e.valid=!0}var tn={x:0,y:0,width:0,height:0};var rn={alpha:e=>1===e?null:{prop:"opacity",value:`${e}`},x:e=>({prop:"left",value:`${e}px`}),y:e=>({prop:"top",value:`${e}px`}),width:e=>0===e?null:{prop:"width",value:`${e}px`},height:e=>0===e?null:{prop:"height",value:`${e}px`},zIndex:()=>"zIndex",fontFamily:()=>"font-family",fontSize:()=>"font-size",fontStyle:()=>"font-style",fontWeight:()=>"font-weight",fontStretch:()=>"font-stretch",lineHeight:()=>"line-height",letterSpacing:()=>"letter-spacing",textAlign:()=>"text-align",overflowSuffix:()=>"overflow-suffix",maxLines:()=>"max-lines",contain:()=>"contain",verticalAlign:()=>"vertical-align",clipping:e=>!1===e?null:{prop:"overflow",value:e?"hidden":"visible"},rotation:e=>0===e?null:{prop:"transform",value:`rotate(${e}rad)`},scale:e=>1===e?null:{prop:"transform",value:`scale(${e})`},scaleX:e=>1===e?null:{prop:"transform",value:`scaleX(${e})`},scaleY:e=>1===e?null:{prop:"transform",value:`scaleY(${e})`},color:e=>0===e?null:{prop:"color",value:nn(e)}},nn=e=>`rgba(${e>>24&255},${e>>16&255},${e>>8&255},${(255&e)/255})`,on={id:"test-id"};var an="_$DX_DELEGATE";function sn(e){if(!(Ar.registry&&Ar.events&&Ar.events.find((([t,r])=>r===e)))){var t=`$$${e.type}`,r=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==r&&Object.defineProperty(e,"target",{configurable:!0,value:r}),Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>r||document}),Ar.registry&&!Ar.done&&(Ar.done=_$HY.done=!0);r;){var i=r[t];if(i&&!r.disabled){var n=r[`${t}Data`];if(void 0!==n?i.call(r,n,e):i.call(r,e),e.cancelBubble)return}r=r._$host||r.parentNode||r.host}}}var ln;function dn(){var e=new Set;var t=!1;return{subscribe:function(t){return e.add(t),()=>e.delete(t)},confirm:function(r,i){if(t)return!(t=!1);var n,o={to:r,options:i,defaultPrevented:!1,preventDefault:()=>o.defaultPrevented=!0},a=R(e);try{var s=function(){var e=n.value;e.listener(E(E({},o),{},{from:e.location,retry:n=>{n&&(t=!0),e.navigate(r,E(E({},i),{},{resolve:!1}))}}))};for(a.s();!(n=a.n()).done;)s()}catch(l){a.e(l)}finally{a.f()}return!o.defaultPrevented}}}function un(){window.history.state&&null!=window.history.state._depth||window.history.replaceState(E(E({},window.history.state),{},{_depth:window.history.length-1}),""),ln=window.history.state._depth}un();var hn=/^(?:[a-z0-9]+:)?\/\//i,cn=/^\/+|(\/)\/+$/g,fn="http://sr";function pn(e,t=!1){var r=e.replace(cn,"$1");return r?t||/^[?#]/.test(r)?r:"/"+r:""}function vn(e,t,r){if(!hn.test(t)){var i=pn(e),n=r&&pn(r),o="";return((o=!n||t.startsWith("/")?i:0!==n.toLowerCase().indexOf(i.toLowerCase())?i+n:n)||"/")+pn(t,!o)}}function gn(e){var t={};return e.searchParams.forEach(((e,r)=>{t[r]=e})),t}function mn(e,t,r){var i=_(e.split("/*",2),2),n=i[0],o=i[1],a=n.split("/").filter(Boolean),s=a.length;return e=>{var i=e.split("/").filter(Boolean),n=i.length-s;if(n<0||n>0&&void 0===o&&!t)return null;for(var l={path:s?"":"/",params:{}},d=e=>void 0===r?void 0:r[e],u=0;u<s;u++){var h=a[u],c=i[u],f=":"===h[0],p=f?h.slice(1):h;if(f&&xn(c,d(p)))l.params[p]=c;else if(f||!xn(c,h))return null;l.path+=`/${c}`}if(o){var v=n?i.slice(-n).join("/"):"";if(!xn(v,d(o)))return null;l.params[o]=v}return l}}function xn(e,t){var r=t=>0===t.localeCompare(e,void 0,{sensitivity:"base"});return void 0===t||("string"==typeof t?r(t):"function"==typeof t?t(e):Array.isArray(t)?t.some(r):t instanceof RegExp&&t.test(e))}function yn(e){var t=new Map,r=ei();return new Proxy({},{get:(i,n)=>(t.has(n)||ti(r,(()=>t.set(n,Hr((()=>e()[n]))))),t.get(n)()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),ownKeys:()=>Reflect.ownKeys(e())})}function bn(e){var t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];for(var r=e.slice(0,t.index),i=e.slice(t.index+t[0].length),n=[r,r+=t[1]];t=/^(\/\:[^\/]+)\?/.exec(i);)n.push(r+=t[1]),i=i.slice(t[0].length);return bn(i).reduce(((e,t)=>[...e,...n.map((e=>e+t))]),[])}var An,wn=ri(),Tn=ri(),Sn=()=>function(e,t){if(null==e)throw new Error(t);return e}(ii(wn),"<A> and 'use' router primitives can be only used inside a Route."),En=w("u",(()=>Sn().navigatorFactory())),_n=()=>Sn().location,Cn=w("y",(()=>Sn().params));function Rn(e,t=""){var r=e.component,i=e.preload,n=e.load,o=e.children,a=e.info,s=!o||Array.isArray(o)&&!o.length,l={key:e,component:r,preload:i||n,info:a};return Bn(e.path).reduce(((r,i)=>{var n,o,a=R(bn(i));try{for(a.s();!(n=a.n()).done;){var d=n.value,u=(o=d,pn(t).replace(/\/*(\*.*)?$/g,"")+pn(o)),h=s?u:u.split("/*",1)[0];h=h.split("/").map((e=>e.startsWith(":")||e.startsWith("*")?e:encodeURIComponent(e))).join("/"),r.push(E(E({},l),{},{originalPath:i,pattern:h,matcher:mn(h,!s,e.matchFilters)}))}}catch(c){a.e(c)}finally{a.f()}return r}),[])}function In(e,t=0){return{routes:e,score:1e4*(r=e[e.length-1],i=_(r.pattern.split("/*",2),2),n=i[0],o=i[1],a=n.split("/").filter(Boolean),a.reduce(((e,t)=>e+(t.startsWith(":")?2:3)),a.length-(void 0===o?0:1)))-t,matcher(t){for(var r=[],i=e.length-1;i>=0;i--){var n=e[i],o=n.matcher(t);if(!o)return null;r.unshift(E(E({},o),{},{route:n}))}return r}};var r,i,n,o,a}function Bn(e){return Array.isArray(e)?e:[e]}function kn(e,t="",r=[],i=[]){for(var n=Bn(e),o=0,a=n.length;o<a;o++){var s=n[o];if(s&&"object"==typeof s){s.hasOwnProperty("path")||(s.path="");var l,d=R(Rn(s,t));try{for(d.s();!(l=d.n()).done;){var u=l.value;r.push(u);var h=Array.isArray(s.children)&&0===s.children.length;if(s.children&&!h)kn(s.children,u.pattern,r,i);else{var c=In([...r],i.length);i.push(c)}r.pop()}}catch(f){d.e(f)}finally{d.f()}}}return r.length?i:i.sort(((e,t)=>t.score-e.score))}function Mn(e,t){for(var r=0,i=e.length;r<i;r++){var n=e[r].matcher(t);if(n)return n}return[]}function Ln(e,t,r,i={}){var n=_(e.signal,2),o=n[0],a=n[1],s=e.utils,l=void 0===s?{}:s,d=l.parsePath||(e=>e),u=l.renderPath||(e=>e),h=l.beforeLeave||dn(),c=vn("",i.base||"");if(void 0===c)throw new Error(`${c} is not a valid base path`);c&&!o().value&&a({value:c,replace:!0,scroll:!1});var f,p=_(Gr(!1),2),v=p[0],g=p[1],m=(e,t)=>{var r,i,n;t.value===y()&&t.state===w()||(void 0===f&&g(!0),An=e,f=t,(r=()=>{f===t&&(b(f.value),T(f.state),R[1]([]))},i=Nr,n=Fr,Promise.resolve().then((()=>{Nr=i,Fr=n,ui(r,!1),Nr=Fr=null}))).finally((()=>{f===t&&Kr((()=>{var t,r;An=void 0,"navigate"===e&&(t=f,(r=C[0])&&(a(E(E({},t),{},{replace:r.replace,scroll:r.scroll})),C.length=0)),g(!1),f=void 0}))})))},x=_(Gr(o().value),2),y=x[0],b=x[1],A=_(Gr(o().state),2),w=A[0],T=A[1],S=function(e,t){var r=new URL(fn),i=Hr((t=>{var i=e();try{return new URL(i,r)}catch(n){return console.error(`Invalid path ${i}`),t}}),r,{equals:(e,t)=>e.href===t.href}),n=Hr((()=>i().pathname)),o=Hr((()=>i().search),!0),a=Hr((()=>i().hash));return{get pathname(){return n()},get search(){return o()},get hash(){return a()},get state(){return t()},get key(){return""},query:yn($r(o,(()=>gn(i()))))}}(y,w),C=[],R=Gr([]),I=Hr((()=>"function"==typeof i.transformUrl?Mn(t(),i.transformUrl(S.pathname)):Mn(t(),S.pathname))),B=yn((()=>{for(var e=I(),t={},r=0;r<e.length;r++)Object.assign(t,e[r].params);return t})),k={pattern:c,path:()=>c,outlet:()=>null,resolvePath:e=>vn(c,e)};return Wr($r(o,(e=>m("native",e)),{defer:!0})),{base:k,location:S,params:B,isRouting:v,renderPath:u,parsePath:d,navigatorFactory:function(e){return e=e||ii(Tn)||k,(t,r)=>function(e,t,r){Qr((()=>{if("number"!=typeof t){var i=E({replace:!1,resolve:!0,scroll:!0},r),n=i.replace,o=i.resolve,a=i.scroll,s=i.state,d=o?e.resolvePath(t):vn("",t);if(void 0===d)throw new Error(`Path '${t}' is not a routable path`);if(C.length>=100)throw new Error("Too many redirects");var u=y();d===u&&s===w()||h.confirm(d,r)&&(C.push({value:u,replace:n,scroll:a,state:w()}),m("navigate",{value:d,state:s}))}else t&&(l.go?l.go(t):console.warn("Router integration does not support relative routing"))}))}(e,t,r)},matches:I,beforeLeave:h,preloadRoute:function(e,i={}){var n=Mn(t(),e.pathname),o=An;An="preload";var a=function(){var t=n[s],o=t.route,a=t.params;o.component&&o.component.preload&&o.component.preload();var l=o.preload;i.preloadData&&l&&ti(r(),(()=>l({params:a,location:{pathname:e.pathname,search:e.search,hash:e.hash,query:gn(e),state:null,key:""},intent:"preload"})))};for(var s in n)a();An=o},singleFlight:void 0===i.singleFlight||i.singleFlight,submissions:R}}var Fn=e=>t=>{var r,i=t.base,n=ni((()=>t.children)),o=Hr((()=>kn(n(),t.base||""))),a=Ln(e,o,(()=>r),{base:i,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(a),Vi(wn.Provider,{value:a,get children(){return Vi(Pn,{routerState:a,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[Wi((()=>(r=ei())&&null)),Vi(Nn,{routerState:a,get branches(){return o()}})]}})}})};function Pn(e){var t=e.routerState.location,r=e.routerState.params,i=Hr((()=>e.preload&&Qr((()=>{e.preload({params:r,location:t,intent:An||"initial"})}))));return Vi(Mi,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:n=>Vi(n,{params:r,location:t,get data(){return i()},get children(){return e.children}})})}function Nn(e){var t,r=[],i=Hr($r(e.routerState.matches,((n,o,a)=>{for(var s=o&&n.length===o.length,l=[],d=function(t){var d=o&&o[t],u=n[t];a&&d&&u.route.key===d.route.key?l[t]=a[t]:(s=!1,r[t]&&r[t](),zr((n=>{r[t]=n,l[t]=function(e,t,r,i){var n=e.base,o=e.location,a=e.params,s=i().route,l=s.pattern,d=s.component,u=s.preload,h=Hr((()=>i().path));d&&d.preload&&d.preload();var c=u?u({params:a,location:o,intent:An||"initial"}):void 0;return{parent:t,pattern:l,path:h,outlet:()=>d?wi(d,{params:a,location:o,data:c,get children(){return r()}}):r(),resolvePath:e=>vn(n.path(),e,h())}}(e.routerState,l[t-1]||e.routerState.base,Un((()=>i()[t+1])),(()=>e.routerState.matches()[t]))})))},u=0,h=n.length;u<h;u++)d(u);return r.splice(n.length).forEach((e=>e())),a&&s?a:(t=l[0],l)})));return Un((()=>i()&&t))()}var Un=e=>()=>Vi(Mi,{get when(){return e()},keyed:!0,children:e=>Vi(Tn.Provider,{value:e,get children(){return e.outlet()}})}),Dn=e=>{var t=ni((()=>e.children));return Ci(e,{get children(){return t()}})};function On(e,t){var r=function(e){if("#"===e)return null;try{return document.querySelector(e)}catch(t){return null}}(`#${e}`);r?r.scrollIntoView():t&&window.scrollTo(0,0)}var zn=new Map;function Gn(e=!0,t=!1,r="/_server",i){return i=>{var n=i.base.path(),o=i.navigatorFactory(i.base),a={};function s(e){if(!(e.defaultPrevented||0!==e.button||e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)){var r=e.composedPath().find((e=>e instanceof Node&&"A"===e.nodeName.toUpperCase()));if(r&&(!t||r.hasAttribute("link"))){var i="http://www.w3.org/2000/svg"===r.namespaceURI,o=i?r.href.baseVal:r.href;if(!(i?r.target.baseVal:r.target)&&(o||r.hasAttribute("state"))){var a=(r.getAttribute("rel")||"").split(/\s+/);if(!(r.hasAttribute("download")||a&&a.includes("external"))){var s=i?new URL(o,document.baseURI):new URL(o);if(!(s.origin!==window.location.origin||n&&s.pathname&&!s.pathname.toLowerCase().startsWith(n.toLowerCase())))return[r,s]}}}}}function l(e){var t=s(e);if(t){var r=_(t,2),n=r[0],a=r[1],l=i.parsePath(a.pathname+a.search+a.hash),d=n.getAttribute("state");e.preventDefault(),o(l,{resolve:!1,replace:n.hasAttribute("replace"),scroll:!n.hasAttribute("noscroll"),state:d&&JSON.parse(d)})}}function d(e){var t=s(e);if(t){var r=_(t,2),n=r[0],o=r[1];a[o.pathname]||i.preloadRoute(o,{preloadData:"false"!==n.getAttribute("preload")})}}function u(e){var t=s(e);if(t){var r=_(t,2),n=r[0],o=r[1];a[o.pathname]||(a[o.pathname]=setTimeout((()=>{i.preloadRoute(o,{preloadData:"false"!==n.getAttribute("preload")}),delete a[o.pathname]}),200))}}function h(e){var t=s(e);if(t){var r=_(t,2)[1];a[r.pathname]&&(clearTimeout(a[r.pathname]),delete a[r.pathname])}}function c(e){if(!e.defaultPrevented){var t=e.submitter&&e.submitter.hasAttribute("formaction")?e.submitter.getAttribute("formaction"):e.target.getAttribute("action");if(t){if(!t.startsWith("https://action/")){var n=new URL(t,fn);if(!(t=i.parsePath(n.pathname+n.search)).startsWith(r))return}if("POST"!==e.target.method.toUpperCase())throw new Error("Only POST forms are supported for Actions");var o=zn.get(t);if(o){e.preventDefault();var a=new FormData(e.target,e.submitter);o.call({r:i,f:e.target},"multipart/form-data"===e.target.enctype?a:new URLSearchParams(a))}}}}!function(e,t=window.document){for(var r=t[an]||(t[an]=new Set),i=0,n=e.length;i<n;i++){var o=e[i];r.has(o)||(r.add(o),t.addEventListener(o,sn))}}(["click","submit"]),document.addEventListener("click",l),e&&(document.addEventListener("mouseover",u),document.addEventListener("mouseout",h),document.addEventListener("focusin",d),document.addEventListener("touchstart",d)),document.addEventListener("submit",c),Zr((()=>{document.removeEventListener("click",l),e&&(document.removeEventListener("mouseover",u),document.removeEventListener("mouseout",h),document.removeEventListener("focusin",d),document.removeEventListener("touchstart",d)),document.removeEventListener("submit",c)}))}}function Xn(e){var t=e.replace(/^.*?#/,"");if(!t.startsWith("/")){var r=_(window.location.hash.split("#",2),2)[1];return`${void 0===r?"/":r}#${t}`}return t}function Wn(e){var t,r,i,n,o=()=>window.location.hash.slice(1),a=dn();return(t={get:o,set({value:e,replace:t,scroll:r,state:i}){t?window.history.replaceState(function(e){return E(E({},e),{},{_depth:window.history.state&&window.history.state._depth})}(i),"","#"+e):window.history.pushState(i,"","#"+e);var n=e.indexOf("#");On(n>=0?e.slice(n+1):"",r),un()},init:e=>{return t=window,r="hashchange",i=function(e,t){var r=!1;return()=>{var i=ln;un();var n=null==i?null:ln-i;r?r=!1:n&&t(n)?(r=!0,window.history.go(-n)):e()}}(e,(e=>!a.confirm(e&&e<0?e:o()))),t.addEventListener(r,i),()=>t.removeEventListener(r,i);var t,r,i},create:Gn(e.preload,e.explicitLinks,e.actionBase),utils:{go:e=>window.history.go(e),renderPath:e=>`#${e}`,parsePath:Xn,beforeLeave:a}},r=!1,n=function([e,t],r,i){return[e,i?e=>t(i(e)):t]}(Gr((i=e=>"string"==typeof e?{value:e}:e)(t.get()),{equals:(e,t)=>e.value===t.value&&e.state===t.state}),0,(e=>(!r&&t.set(e),e))),t.init&&Zr(t.init(((e=t.get())=>{r=!0,n[1](i(e)),r=!1}))),Fn({signal:n,create:t.create,utils:t.utils}))(e)}var Vn,Hn=_(Gr([]),2),Yn=Hn[0],jn=Hn[1],Kn=(e,t)=>{var r=ei(),i=ti.bind(void 0,r);zt.setActiveElement=e=>i((()=>Pi(e)));var n=(({userKeyMap:e,keyHoldOptions:t,ownerContext:r=e=>{e()}}={})=>{e&&er(e,Zt),null!=t&&t.userKeyHoldMap&&er(t.userKeyHoldMap,Jt);var i=(null==t?void 0:t.holdThreshold)||200,n=ar.bind(null,i),o=e=>r((()=>{n(e,void 0)})),a=e=>r((()=>{n(void 0,e)}));return document.addEventListener("keyup",a),document.addEventListener("keydown",o),{cleanup:()=>{document.removeEventListener("keydown",o),document.removeEventListener("keyup",a);for(var e=0,t=Object.entries(or);e<t.length;e++){var r=_(t[e],2),i=(r[0],r[1]);i&&clearTimeout(i)}},focusPath:()=>rr}})({userKeyMap:e,keyHoldOptions:t,ownerContext:i}),o=n.cleanup,a=n.focusPath;Vr($r(Fi,(()=>{jn([...a()])}),{defer:!0})),Zr(o)};function Qn(e){return new Promise((t=>{setTimeout(t,e)}))}function $n(e,t,r="en-US"){var i=window.speechSynthesis;return new Promise(((n,o)=>{var a=new SpeechSynthesisUtterance(e);a.lang=r,a.onend=()=>{n()},a.onerror=e=>{o(e)},t.push(a),i.speak(a)}))}function qn(e,t,r=!0){var i=window.speechSynthesis,n=function(e=[]){var t,r=[];for(t=0;t<e.length;t++){var i=e[t];if("string"!=typeof i||i.includes("PAUSE-"))break;r.push(e[t])}return[r.join(",\b ")].concat(e.slice(t))}(Array.isArray(e)?e:[e]),o=[],a=[],s=!0;return{series:T(A().mark((function e(){var r,i,l,d,u,h;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0;case 1:if(!s||!n.length){e.next=62;break}return e.next=4,Promise.resolve(n.shift());case 4:if(r=e.sent,s){e.next=9;break}return e.abrupt("break",62);case 9:if("string"!=typeof r||!r.includes("PAUSE-")){e.next=16;break}return i=1e3*Number(r.split("PAUSE-")[1]),isNaN(i)&&(i=0),e.next=14,Qn(i);case 14:e.next=60;break;case 16:if("string"!=typeof r||!r.length){e.next=48;break}d=l=3;case 19:if(!(s&&d>0)){e.next=46;break}return e.prev=20,e.next=23,$n(r,a,t);case 23:d=0,e.next=44;break;case 26:if(e.prev=26,e.t0=e.catch(20),!(e.t0 instanceof SpeechSynthesisErrorEvent)){e.next=43;break}if("network"!==e.t0.error){e.next=36;break}return d--,console.warn(`Speech synthesis network error. Retries left: ${d}`),e.next=34,Qn(500*(l-d));case 34:e.next=41;break;case 36:if("canceled"!==e.t0.error&&"interrupted"!==e.t0.error){e.next=40;break}d=0,e.next=41;break;case 40:throw new Error(`SpeechSynthesisErrorEvent: ${e.t0.error}`);case 41:e.next=44;break;case 43:throw e.t0;case 44:e.next=19;break;case 46:e.next=60;break;case 48:if("function"!=typeof r){e.next=55;break}return u=qn(r(),t,!1),o.push(u),e.next=53,u.series;case 53:e.next=60;break;case 55:if(!Array.isArray(r)){e.next=60;break}return h=qn(r,t,!1),o.push(h),e.next=60,h.series;case 60:e.next=1;break;case 62:return e.prev=62,s=!1,e.finish(62);case 65:case"end":return e.stop()}}),e,null,[[0,,62,65],[20,26]])})))(),get active(){return s},append:e=>{n.push(e)},cancel:()=>{s&&(r&&i.cancel(),o.forEach((e=>{e.cancel()})),s=!1)}}}function Zn(e,t="en-US"){return Vn&&Vn.cancel(),Vn=qn(e,t)}var Jn,eo=(e,t)=>{var r,i=()=>clearTimeout(r);ei()&&Zr(i);return Object.assign(((...n)=>{void 0!==r&&i(),r=setTimeout((()=>e(...n)),t)}),{clear:i})},to=(e,t)=>{var r,i,n=!1,o=()=>{clearTimeout(r),n=!1};return ei()&&Zr(o),Object.assign(((...o)=>{i=o,n||(n=!0,r=setTimeout((()=>{e(...i),n=!1}),t))}),{clear:o})};var ro,io=[],no=!1;function oo(e,t){var r,i=eo(e,t),n=e=>{r=e,i(e)};return n.flush=()=>{i.clear(),e(r)},n.clear=i.clear,n}function ao(e){return e.id||e.name}function so(e=[]){if(lo.onFocusChange&&lo.enabled){var t=e.every((e=>!e.loading)),r=e.filter((e=>!io.includes(e)));if(Jn(),t||!lo.onFocusChange){io=e.slice(0);var i=[],n=r.reduce(((e,t)=>(t.announce?(e.push([ao(t),"Announce",t.announce]),i.push(t.announce)):t.title?(e.push([ao(t),"Title",t.title]),i.push(t.title)):e.push([ao(t),"No Announce",""]),e)),[]);return r.reverse().reduce(((e,t)=>(t.announceContext?(e.push([ao(t),"Context",t.announceContext]),i.push(t.announceContext)):e.push([ao(t),"No Context",""]),e)),n),lo.debug&&console.table(n),i.length?lo.speak(i.reduce(((e,t)=>e.concat(t)),[])):void 0}lo.onFocusChange([])}}var lo={debug:!1,enabled:!0,cancel:function(){ro&&ro.cancel()},clearPrevFocus:function(e=0){io=io.slice(0,e),Jn()},speak:function(e,{append:t=!1,notification:r=!1}={}){var i;lo.onFocusChange&&lo.enabled&&(lo.onFocusChange.flush(),t&&ro&&ro.active?ro.append(e):(lo.cancel(),function(e){if(!no)ro=Zn(e)}(e)),r&&(no=!0,null===(i=ro)||void 0===i||i.series.finally((()=>{no=!1,lo.refresh()})).catch(console.error)));return ro},refresh:function(e=0){lo.clearPrevFocus(e),lo.onFocusChange&&lo.onFocusChange(Qr((()=>Yn())))},setupTimers:function({focusDebounce:e=400,focusChangeTimeout:t=3e5}={}){lo.onFocusChange=oo(so,e),Jn=oo((()=>{io=[]}),t)}};function uo(e,...t){return"function"==typeof e?e(...t):e}var ho=Zr,co=()=>{var e=[],t=()=>e=[];return{push:(...t)=>e.push(...t),execute(r,i,n,o){e.forEach((e=>e(r,i,n,o))),t()},clear:t}};function fo(e,t,r,i){return e.addEventListener(t,r,i),ho(e.removeEventListener.bind(e,t,r,i))}function po(e,t){var r=co(),i=r.push;return[(r,n,o)=>{var a=fo(e,r,n,null!=o?o:t);return i(a),a},Zr(r.execute)]}function vo(e){var t=ei(),r=function(e,t=ei()){var r,i,n=0;return()=>(n++,Zr((()=>{n--,queueMicrotask((()=>{!n&&i&&(i(),i=r=void 0)}))})),i||zr((t=>r=e(i=t)),t),r)}(e,t);return()=>Ar.context?zr(e,t):r()}function go(e){var t=E({},e),r=E({},e),i={},n=function(e){Object.defineProperty(r,e,{get:()=>(e=>{var r=i[e];if(!r){if(!Jr())return t[e];i[e]=r=Gr(t[e],{internal:!0}),delete t[e]}return r[0]()})(e),enumerable:!0})};for(var o in e)n(o);var a=(e,r)=>{var n=i[e];if(n)return n[1](r);e in t&&(t[e]=uo(r,[t[e]]))};return[r,(e,t)=>{if(null===(n=e)||"object"!=typeof n&&"function"!=typeof n)a(e,t);else{var i=Qr((()=>Object.entries(uo(e,r))));Kr((()=>{var e,t=R(i);try{var r=function(){var t=_(e.value,2),r=t[0],i=t[1];a(r,(()=>i))};for(t.s();!(e=t.n()).done;)r()}catch(n){t.e(n)}finally{t.f()}}))}var n;return r}]}var mo={passive:!0},xo={x:0,y:0,isInside:!1,sourceType:null};var yo=vo(function(e,t={}){var r=_(go(E(E({},xo),t.initialValue)),2),i=r[0],n=r[1],o=e=>{!function(e=window,t,r={}){var i=r.touch,n=void 0===i||i,o=r.followTouch,a=void 0===o||o,s=_(po(e,mo),2),l=s[0],d=s[1],u=e=>t({x:e.pageX,y:e.pageY,sourceType:"mouse"});if(l("mousemove",u),l("dragover",u),n){var h=e=>{e.touches.length&&t({x:e.touches[0].clientX,y:e.touches[0].clientY,sourceType:"touch"})};l("touchstart",h),a&&l("touchmove",h)}}(e,n,t),function(e=window,t,r={}){var i=r.touch,n=void 0===i||i,o=_(po(e,mo),2),a=o[0],s=o[1],l=!1,d=!n;function u(e){"mouse"===this?l=e:d=e,t(l||d)}a("mouseover",u.bind("mouse",!0)),a("mouseout",u.bind("mouse",!1)),a("mousemove",u.bind("mouse",!0),{passive:!0,once:!0}),n&&(a("touchstart",u.bind("touch",!0)),a("touchend",u.bind("touch",!1)))}(e,n.bind(void 0,"isInside"),t)};return"function"!=typeof e?o(e):Vr((()=>o(e()))),i}.bind(void 0,void 0,void 0));function bo(e,t,r="keydown"){return new KeyboardEvent(r,{key:e,keyCode:t,which:t,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,bubbles:!0})}var Ao=to((e=>{var t=e.deltaY;t<0?document.body.dispatchEvent(bo("ArrowUp",38)):t>0&&document.body.dispatchEvent(bo("ArrowDown",40))}),250),wo=e=>{var t,r=Fi(),i=(null===(t=zt.rendererOptions)||void 0===t?void 0:t.deviceLogicalPixelRatio)||1;r&&To(e.clientX,e.clientY,r.lng.absX*i,r.lng.absY*i,r.width*i,r.height*i)&&(document.dispatchEvent(bo("Enter",13)),setTimeout((()=>document.body.dispatchEvent(bo("Enter",13,"keyup"))),1))};function To(e,t,r,i,n=0,o=0){return e>=r&&e<=r+n&&t>=i&&t<=i+o}function So(e=Gi,t=100){var r,i,n,o,a,s,l,d=yo(),u=(r=e=>to(e,t),i=0,n=!1,o=_(Gr(void 0,{equals:!1}),2),a=o[0],s=o[1],l=r((()=>{n=!0,s()})),()=>(n||(l(),a()),n?(n=!!i,!0):(Jr()&&(i++,Zr((()=>i--))),!1)));fo(window,"wheel",Ao),fo(window,"click",wo),Vr((()=>{if(u()){var t=function(e,t,r){for(var i,n=[],o=(null===(i=zt.rendererOptions)||void 0===i?void 0:i.deviceLogicalPixelRatio)||1,a=[e];a.length>0;){var s,l=[],d=R(a);try{for(d.s();!(s=d.n()).done;){var u=s.value;0!==u.alpha&&To(t,r,u.lng.absX*o,u.lng.absY*o,u.width*o,u.height*o)&&l.push(u)}}catch(f){d.e(f)}finally{d.f()}var h=l.length;if(0===h)break;h>1&&l.sort(((e,t)=>(t.zIndex||0)-(e.zIndex||0)));var c=l[0];n.push(c),a=c.isTextNode()?[]:c.children}return n}(e,d.x,d.y).filter((e=>(e.focus||e.onFocus||e.onEnter)&&!e.skipFocus));if(t.length){for(var r=t[t.length-1];null!==(i=r.parent)&&void 0!==i&&i.forwardStates;){var i;r=r.parent}var n=r.parent;void 0!==(null==n?void 0:n.selected)&&(n.selected=n.children.indexOf(r)),r.setFocus()}}}))}var Eo=_(Gr(""),2),_o=Eo[0],Co=Eo[1];w("s",Co);var Ro=w("t",{name:"Base Lightning TV",alpha:{primary:1,secondary:.7,tertiary:.1,inactive:.5,full:1,none:0,alpha1:.1,alpha2:.3,alpha3:.5,alpha4:.7,alpha5:.9,alpha6:.95},animation:{duration:{none:0,xfast:100,fast:250,normal:500,slow:750,xslow:900},delay:{none:0,xfast:10,fast:25,normal:50,slow:75,xslow:90},expressive:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},expressiveEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},expressiveExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standard:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standardEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standardExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utility:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utilityEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utilityExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25}},asset:{arrowLeft:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAi0lEQVRIDWNgGAWjIfD//38JID5Fk5AAGqwKxPeA+D/VLQCaaQLEr0CGgwBVLQCa5wbEn0EGwwDVLAAaGA3Ev2AGw2iqWAA0rBiI/8EMRaYptgBoWDeygehsci1gIlcjWfqArqZdEMFcBLSEdpGMZAntkimSJbTLaEiW0K6oQLKEdoUdzJJRemiHAAD4n+yzPWCs7QAAAABJRU5ErkJggg==",arrowRight:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAg0lEQVRIDWNgGAWjIYArBP7//38KiCVwyVMsDjQcBO4BsSrFhmEzAGw8hHgFpEywqaFIDMkCEPMzELtRZCC6ZjQLQNxfQByNro5sPhYLQEL/gLiYbEORNeKwACbcDVPLBGMMOhrmVDSapkFE00imaTKlaUajaVFB28Ju0CXrUQfhDAEAEgHss6NhpLQAAAAASUVORK5CYII=",backspaceOutline:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAAAXNSR0IArs4c6QAACmpJREFUeF7tnVmoZUcVhv/feY4gBEVEH/KgCCZxCK2itNo4xQQH+kUN0TjEiDGKKBqnaExwBjUaR6KY+NQgiQkOMSYhYEScIopGJOqDE2hHjfP0y4p1Oqdv33v2qr32Prv2Paug6Ye7Vu2qv75TtWvtGohMqUBAAQZ80zUVQAKUEIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypfPsAJJ0NYC92XRHKPB3AAfLv18BuBLAFSR/NKZWswJI0vkA3jCmILsw75sAvIfkR8eo22wAknQSgMvGEGFD8vwxgFeQvGrI+s4CIEnHAPgugHsMWfkNzevDAM4i+Z8h6t88QJLuXOB5yBAVzjxuVeBaAM8ieXNUjzkAdAmA50Yrmv5HKPATACeQ/GNEm6YBkvRyANblZhpHAXsfekpkOGsWIEmPAHA9gDuOo13mWhS4gOSZfdVoEiBJ9wFwA4D7961Y+lUpsK/v7KxVgL4K4ElOCS4l+Uyn7a41k3Q0gMcC2ANgH4CHV1T2OyStx69OzQEk6TwAZztr8lMAx5P8s9N+Y8wk2cTjfQDu66z080h+zml7yKwpgCSdCOByZyX+BuBRJH/otN84M0kWN/s0gOc4Kv8Nko922B1m0gxAkh4I4AcVwcL9JA/UVnjT7CXdHYD9yEzfVUkAjib5uxqNmgCoBAu/CeBhzsJ/kORZTtuNN5Nk70bXAZ0Hy59G8qIawVoB6LMAnu8suE3tH0/y3077NAMg6esAuoaoC0la7M2dJgdI0ssAXOgs8W8BHEvS/s9UoYCkdwN4bYfL5STto7U7TQpQZbDQehzreawHylSpgKSTAVza4XYDyeNqsp4MoB7BwteQfH9N5dL2NgWK3l0vyAdJWhDXnSYBSNLtANh3GO/KwgMk97trlYbbKiDJPpzea5U8JKuYqDIeql0kvQPAG5352ZLMR5L8q9M+zXZQYFcAJOnJAL7sbGWLMFuk2SLOmYIKzB6gEiz8HoB7O7U4meQXnLZp1qGApD8BuOcsh7AewcL3kuyadg4OjSSbhRxH0j4BjJok2Ufga0j+YdQHlcznDlBNsPAa+xpP8r/rEHbxjAKPbRuyHvKFY0Ik6QUALOprPfIT1gHRbAGSdDoA77aSX5Zg4e8nhGfx6FEgWoJn8Zy1QCTplq5vjc3NwnoEC/eQ/HYD8IwC0TbwrA2i2QHUI1h4JskLGoJnUIhWwLMWiGYFkCSLMX2t5WDhlneeLm5Dw5kDntEhkmRhEVvesWNqZgiTdC6AN3W1Svn72oOFkuxF+WcVIQUrai+IKuA5BBHJ453auc1mA1AJFn7Jsf7EKj9ZsLBHw1ZDtI5neAmaBUBzCxaO2cBj5u2FZtlO0l8A3K3ZIaxHsPB8kt5vYn00c/mM0dBj5OmqzAqjOQDUfLBwJ32HbPAh84pCM5seSNJLAHzcWeFJgoVdZRui4YfIo6ucff8uyVY03LW5IawyWPgvW5u77mChV/QIABFfb/kidk0CVKbDth3Huw35dJLeniqiV2/fniDYx1f7vlWTeoUFah6wZQhrqwcqwUKbrtsaH0+6mOQpHsOpbXpCVFPstcJjBZNkmzHv0swQJultAN7iVO375TyafzjtJzcbEaK1w9McQJXBQlvvYmtsfjE5FZUFGAGiSeBpCqDKYKFtmX0qya9Utl0z5gNCNBk8BSA7CtiODNwxjf4trEew8BySNtTNOg0A0aTwtARQTbDQeh3rfawXmn0KQDQ5PC0B9EkAL3LSkAD9X6hWALIJzJ3mNoSdS9I7U3NyuX6zQO+zKOzkEEmaHqDSFdpZM97tOfkSfRvvk0LUDEAFIgseetf85DS+AYgk/bPr1NvRZ2HLg4ektwI4xzmgZCBxYohaBMjWPeenDOcvaIvZ2oez5gAqQ5mtLbb3oa4z+Bb6nTHW1UP92vFIr54vzJ8BcGplGdYKkSRbCXGHSWdh2z1ckp1taGccroxyFt9cznG4iGuDqFmASk9kZxxakNGTckHZBBA1DVCB6BMAXuwhyA4VmGL/+05l6zlsbdt7DJmXU0uXmSQ7JvD2zQ1hiwJJsotRvlVxXO87SU5+heUYDT5Gni5KVhg1D1DphWqCjOYy6RlAYzb0mHn3gWkWABWIaoKMubHwSBpGebGWZNdc2vmUO6a1BhJXFUSSff/yLuOYamvzzwEcVfFr7tWwPXqi6uN2PXWYG0C1Qca1n8RaDlewl3kPRL3gWXo/XBwo1dXWdk/a3jEOnJoVQGUoqw0yvpLkh7oUHvLvTohC8FRANBo8pT3sxLeVJ/M2M4QtiVYTZJzkNPoOiAaBxwHRqPDMFqBS8Jog4yT3YewA0aDwrIBodHhmDVApvG0mtO3PnjTJjTxbIBoFnm0gWgs8pQ06lxY3N4QtCWZBRgPDezdnHvPr+alV2EiaL0DlF2Dbn20bdB40XtHwQ5nOHqAC0SyCjEM1Wkv57AqACkRvBvB2p7hrDzI6yzU7s90EUPNBxtnR4SjwrgGo9EK1Qca8cM4ByU4mkuz++F93ZHELyZX3iW31n+S+sKWZWfNBxkCbNeUq6ekArugo1I0kH1xT8EkBKj1R80HGGkFbtZVkZ3bb2d2r0tUkn1hTh8kBKhB9DMBLnQWfJMjoLFuTZpJsO/ONAB7UUcBLSHqvX781q1YAqg0yfoDkq5psrQYLJeldAF7nKFr1x+wmACq9kAUZLazvvTV4P8kDDlE22kTSQ4uuK9dCF5HuR/I3NYI1A1CBaB+AK50VsAMj7TJeixNl2kYBSccCsB/ZMQ6Brif5GIfdYSZNAVQg8rzsLSphl/Hapby2LDZTUaBcq/56ALb1fOVxLkuinULy4loRmwOoQGQX7T7DWZnPk3y203bXmkl6AIA91isDOBGADV3e1HsJbasA1QYZvUKl3fYKPI2knXFQnZoEqPRCNUHG6oqnwyEFLiJ5Wl89mgWoQFQTZOyrwSb7WUztcSRtu0+v1DRABaKPADijV+3SaZUCNgE5geTNEZnmAFBtkDGix6b4Xld2BNvJcaHUPEClF6oNMoZE2eXOtm3q1ZFha1mfWQBUINoL4Kqurbm7vPEj1bOAqx3udW0kk62+swGoQHQ2gPOGFGAD8roJgF0t+qkx6jorgApElwE4aQwxZp6n3YNxsPyzA7yst/4iSdvEMFqaHUCjKZEZ91IgAeolWzotFEiAkoWQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnT+H0jPT81J3xWWAAAAAElFTkSuQmCC",check:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAOCAYAAAAi2ky3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACtSURBVHgBvdPdDcIgEAfwoy8Nb45QN3AGF2s36Ahu4gpuIDoBfSgfpdoTlCbEWEMh6T8hFzjyg5AAkBHOcQe5UWqspRx435sDpMYj6IYQwwVSEiJ2MKVUBWuzLSLl2HL+uxmNCGFO8yaL7RHxve6qRZoAuS4hxac8735elWVx7jrtMKL1o0Gcat9jhExHSukN/kUIFZ7MpDRtzE1isDRkAUtDvrA8ZI597FUf8gWH9P0b4gko9wAAAABJRU5ErkJggg=="},color:{palette:{},white:"0xffffffff",black:"0x000000ff",grey:"0x929096ff",red:"0xe74c3cff",orange:"0xdc7633ff",yellow:"0xf7dc6fff",green:"0x2ecc71ff",blue:"0x93a9fdff",purple:"0x663399ff",overlay:"0x181819b3",material:"0x181819ff",materialNeutral:"0x181819ff",materialNeutralElevated:"0x373639ff",materialInverse:"0xf8f7faff",materialInverseElevated:"0xffffffff",materialBrand:"0x000033ff",materialBrandElevated:"0x242a65ff",textNeutral:"0xf8f7faff",textNeutralSecondary:"0xf8f7fab3",textNeutralTertiary:"0xf8f7fa1a",textNeutralDisabled:"0xf8f7fa80",textInverse:"0x181819ff",textInverseSecondary:"0x181819b3",textInverseTertiary:"0x1818191a",textInverseDisabled:"0x18181980",textBrand:"0x93a9fdff",textBrandSecondary:"0x93a9fdb3",textBrandTertiary:"0x93a9fd1a",textBrandDisabled:"0x93a9fd80",textPositive:"0x2ecc71ff",textNegative:"0xe74c3cff",textInfo:"0x93a9fdff",textCaution:"0xdc7633ff",fillTransparent:"0xffffff0",fillNeutral:"0xf8f7faff",fillNeutralSecondary:"0xf8f7fab3",fillNeutralTertiary:"0xf8f7fa1a",fillNeutralDisabled:"0xf8f7fa80",fillInverse:"0x181819ff",fillInverseSecondary:"0x181819b3",fillInverseTertiary:"0x1818191a",fillInverseDisabled:"0x18181980",fillBrand:"0x93a9fdff",fillBrandSecondary:"0x93a9fdb3",fillBrandTertiary:"0x93a9fd1a",fillBrandDisabled:"0x93a9fd80",fillPositive:"0x2ecc71ff",fillNegative:"0xe74c3cff",fillInfo:"0x93a9fdff",fillCaution:"0xdc7633ff",strokeNeutral:"0xf8f7faff",strokeNeutralSecondary:"0xf8f7fab3",strokeNeutralTertiary:"0xf8f7fa1a",strokeNeutralDisabled:"0xf8f7fa80",strokeInverse:"0x181819ff",strokeInverseSecondary:"0x181819b3",strokeInverseTertiary:"0x1818191a",strokeInverseDisabled:"0x18181980",strokeBrand:"0x93a9fdff",strokeBrandSecondary:"0x93a9fdb3",strokeBrandTertiary:"0x93a9fd1a",strokeBrandDisabled:"0x93a9fd80",strokePositive:"0x2ecc71ff",strokeNegative:"0xe74c3cff",strokeInfo:"0x93a9fdff",strokeCaution:"0xdc7633ff",interactiveNeutral:"0xffffff1a",interactiveNeutralFocus:"0xffffffff",interactiveNeutralFocusSoft:"0xffffff1a",interactiveInverse:"0x48474b1a",interactiveInverseFocus:"0x48474bff",interactiveInverseFocusSoft:"0x48474b1a",interactiveBrand:"0xbecffe1a",interactiveBrandFocus:"0xbecffeff",interactiveBrandFocusSoft:"0xbecffe1a",shadowNeutral:"0x000000b3",shadowNeutralFocus:"0x000000b3",shadowNeutralFocusSoft:"0x000000b3",shadowNeutralText:"0x000000ff",shadowInverse:"0x000000b3",shadowInverseFocus:"0x000000b3",shadowInverseFocusSoft:"0x000000b3",shadowInverseText:"0x000000ff",shadowBrand:"0x000000b3",shadowBrandFocus:"0x000000b3",shadowBrandFocusSoft:"0x000000b3",shadowBrandText:"0x000000ff"},font:[],layout:{columnCount:10,focusScale:1.2,gutterX:20,gutterY:20,marginX:150,marginY:150,safe:50,screenW:1920,screenH:1080},radius:{none:0,xs:2,sm:4,md:8,lg:16,xl:24},spacer:{none:0,xxs:2,xs:4,sm:8,md:10,lg:20,xl:30,xxl:40,xxxl:50},stroke:{none:0,sm:2,md:4,lg:6,xl:8},typography:{display1:{fontFamily:"Arial",fontSize:75,lineHeight:85,fontWeight:500,verticalAlign:"middle",textBaseline:"bottom"},display2:{fontFamily:"Arial",fontSize:50,lineHeight:60,fontWeight:500,verticalAlign:"middle",textBaseline:"bottom"},display3:{fontFamily:"Arial",fontSize:56,fontWeight:400,lineHeight:68,verticalAlign:"middle",textBaseline:"bottom"},display4:{fontFamily:"Arial",fontSize:48,fontWeight:400,lineHeight:64,verticalAlign:"middle",textBaseline:"bottom"},headline1:{fontFamily:"Arial",fontSize:35,fontWeight:500,lineHeight:48,verticalAlign:"middle",textBaseline:"bottom"},headline2:{fontFamily:"Arial",fontSize:30,fontWeight:500,lineHeight:40,verticalAlign:"middle",textBaseline:"bottom"},headline3:{fontFamily:"Arial",fontSize:25,fontWeight:500,lineHeight:36,verticalAlign:"middle",textBaseline:"bottom"},body1:{fontFamily:"Arial",fontSize:25,fontWeight:300,lineHeight:40,verticalAlign:"middle",textBaseline:"bottom"},body2:{fontFamily:"Arial",fontSize:22,fontWeight:300,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},body3:{fontFamily:"Arial",fontSize:20,fontWeight:300,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},button1:{fontFamily:"Arial",fontSize:25,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},button2:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},callout1:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},caption1:{fontFamily:"Arial",fontSize:15,fontWeight:500,lineHeight:24,verticalAlign:"middle",textBaseline:"bottom"},tag1:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:24,verticalAlign:"middle",textBaseline:"bottom"},footnote1:{fontFamily:"Arial",fontSize:22,fontWeight:300,lineHeight:30,verticalAlign:"middle",textBaseline:"bottom"},subtitle1:{fontFamily:"Arial",fontSize:32,fontWeight:400,lineHeight:36,verticalAlign:"middle",textBaseline:"bottom"},subtitle2:{fontFamily:"Arial",fontSize:28,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},navigation:{fontFamily:"Arial",fontSize:28,fontWeight:400,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"}},componentConfig:{Keyboard:{base:{keyProps:{delete:{title:null,icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAAAXNSR0IArs4c6QAACmpJREFUeF7tnVmoZUcVhv/feY4gBEVEH/KgCCZxCK2itNo4xQQH+kUN0TjEiDGKKBqnaExwBjUaR6KY+NQgiQkOMSYhYEScIopGJOqDE2hHjfP0y4p1Oqdv33v2qr32Prv2Paug6Ye7Vu2qv75TtWvtGohMqUBAAQZ80zUVQAKUEIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypfPsAJJ0NYC92XRHKPB3AAfLv18BuBLAFSR/NKZWswJI0vkA3jCmILsw75sAvIfkR8eo22wAknQSgMvGEGFD8vwxgFeQvGrI+s4CIEnHAPgugHsMWfkNzevDAM4i+Z8h6t88QJLuXOB5yBAVzjxuVeBaAM8ieXNUjzkAdAmA50Yrmv5HKPATACeQ/GNEm6YBkvRyANblZhpHAXsfekpkOGsWIEmPAHA9gDuOo13mWhS4gOSZfdVoEiBJ9wFwA4D7961Y+lUpsK/v7KxVgL4K4ElOCS4l+Uyn7a41k3Q0gMcC2ANgH4CHV1T2OyStx69OzQEk6TwAZztr8lMAx5P8s9N+Y8wk2cTjfQDu66z080h+zml7yKwpgCSdCOByZyX+BuBRJH/otN84M0kWN/s0gOc4Kv8Nko922B1m0gxAkh4I4AcVwcL9JA/UVnjT7CXdHYD9yEzfVUkAjib5uxqNmgCoBAu/CeBhzsJ/kORZTtuNN5Nk70bXAZ0Hy59G8qIawVoB6LMAnu8suE3tH0/y3077NAMg6esAuoaoC0la7M2dJgdI0ssAXOgs8W8BHEvS/s9UoYCkdwN4bYfL5STto7U7TQpQZbDQehzreawHylSpgKSTAVza4XYDyeNqsp4MoB7BwteQfH9N5dL2NgWK3l0vyAdJWhDXnSYBSNLtANh3GO/KwgMk97trlYbbKiDJPpzea5U8JKuYqDIeql0kvQPAG5352ZLMR5L8q9M+zXZQYFcAJOnJAL7sbGWLMFuk2SLOmYIKzB6gEiz8HoB7O7U4meQXnLZp1qGApD8BuOcsh7AewcL3kuyadg4OjSSbhRxH0j4BjJok2Ufga0j+YdQHlcznDlBNsPAa+xpP8r/rEHbxjAKPbRuyHvKFY0Ik6QUALOprPfIT1gHRbAGSdDoA77aSX5Zg4e8nhGfx6FEgWoJn8Zy1QCTplq5vjc3NwnoEC/eQ/HYD8IwC0TbwrA2i2QHUI1h4JskLGoJnUIhWwLMWiGYFkCSLMX2t5WDhlneeLm5Dw5kDntEhkmRhEVvesWNqZgiTdC6AN3W1Svn72oOFkuxF+WcVIQUrai+IKuA5BBHJ453auc1mA1AJFn7Jsf7EKj9ZsLBHw1ZDtI5neAmaBUBzCxaO2cBj5u2FZtlO0l8A3K3ZIaxHsPB8kt5vYn00c/mM0dBj5OmqzAqjOQDUfLBwJ32HbPAh84pCM5seSNJLAHzcWeFJgoVdZRui4YfIo6ucff8uyVY03LW5IawyWPgvW5u77mChV/QIABFfb/kidk0CVKbDth3Huw35dJLeniqiV2/fniDYx1f7vlWTeoUFah6wZQhrqwcqwUKbrtsaH0+6mOQpHsOpbXpCVFPstcJjBZNkmzHv0swQJultAN7iVO375TyafzjtJzcbEaK1w9McQJXBQlvvYmtsfjE5FZUFGAGiSeBpCqDKYKFtmX0qya9Utl0z5gNCNBk8BSA7CtiODNwxjf4trEew8BySNtTNOg0A0aTwtARQTbDQeh3rfawXmn0KQDQ5PC0B9EkAL3LSkAD9X6hWALIJzJ3mNoSdS9I7U3NyuX6zQO+zKOzkEEmaHqDSFdpZM97tOfkSfRvvk0LUDEAFIgseetf85DS+AYgk/bPr1NvRZ2HLg4ektwI4xzmgZCBxYohaBMjWPeenDOcvaIvZ2oez5gAqQ5mtLbb3oa4z+Bb6nTHW1UP92vFIr54vzJ8BcGplGdYKkSRbCXGHSWdh2z1ckp1taGccroxyFt9cznG4iGuDqFmASk9kZxxakNGTckHZBBA1DVCB6BMAXuwhyA4VmGL/+05l6zlsbdt7DJmXU0uXmSQ7JvD2zQ1hiwJJsotRvlVxXO87SU5+heUYDT5Gni5KVhg1D1DphWqCjOYy6RlAYzb0mHn3gWkWABWIaoKMubHwSBpGebGWZNdc2vmUO6a1BhJXFUSSff/yLuOYamvzzwEcVfFr7tWwPXqi6uN2PXWYG0C1Qca1n8RaDlewl3kPRL3gWXo/XBwo1dXWdk/a3jEOnJoVQGUoqw0yvpLkh7oUHvLvTohC8FRANBo8pT3sxLeVJ/M2M4QtiVYTZJzkNPoOiAaBxwHRqPDMFqBS8Jog4yT3YewA0aDwrIBodHhmDVApvG0mtO3PnjTJjTxbIBoFnm0gWgs8pQ06lxY3N4QtCWZBRgPDezdnHvPr+alV2EiaL0DlF2Dbn20bdB40XtHwQ5nOHqAC0SyCjEM1Wkv57AqACkRvBvB2p7hrDzI6yzU7s90EUPNBxtnR4SjwrgGo9EK1Qca8cM4ByU4mkuz++F93ZHELyZX3iW31n+S+sKWZWfNBxkCbNeUq6ekArugo1I0kH1xT8EkBKj1R80HGGkFbtZVkZ3bb2d2r0tUkn1hTh8kBKhB9DMBLnQWfJMjoLFuTZpJsO/ONAB7UUcBLSHqvX781q1YAqg0yfoDkq5psrQYLJeldAF7nKFr1x+wmACq9kAUZLazvvTV4P8kDDlE22kTSQ4uuK9dCF5HuR/I3NYI1A1CBaB+AK50VsAMj7TJeixNl2kYBSccCsB/ZMQ6Brif5GIfdYSZNAVQg8rzsLSphl/Hapby2LDZTUaBcq/56ALb1fOVxLkuinULy4loRmwOoQGQX7T7DWZnPk3y203bXmkl6AIA91isDOBGADV3e1HsJbasA1QYZvUKl3fYKPI2knXFQnZoEqPRCNUHG6oqnwyEFLiJ5Wl89mgWoQFQTZOyrwSb7WUztcSRtu0+v1DRABaKPADijV+3SaZUCNgE5geTNEZnmAFBtkDGix6b4Xld2BNvJcaHUPEClF6oNMoZE2eXOtm3q1ZFha1mfWQBUINoL4Kqurbm7vPEj1bOAqx3udW0kk62+swGoQHQ2gPOGFGAD8roJgF0t+qkx6jorgApElwE4aQwxZp6n3YNxsPyzA7yst/4iSdvEMFqaHUCjKZEZ91IgAeolWzotFEiAkoWQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnT+H0jPT81J3xWWAAAAAElFTkSuQmCC"}}}}}});function Io(){var e,t,r,i="true"===new URLSearchParams(window.location.search).get("disableBG"),n=0,o={duration:750,easing:"ease-in-out"},a={alpha:1,color:4294967295};return qr((()=>{if(i)return r.src="",r.colorLeft=255,void(r.colorRight=0)})),Vr($r(_o,(a=>{!function(a){i?(r.src="",r.colorLeft=255,r.colorRight=0):"string"!=typeof a?(e.color=a,e.src="",e.alpha=1,n=1,t.alpha=0,r.alpha=0):(e.color=4294967295,r.alpha=1,0===n?(e.src=a,n=1):1===n?(t.src=a,n=2,t.alpha=0,t.animate({alpha:1},o).start(),e.animate({alpha:0},o).start()):2===n&&(e.src=a,n=1,e.alpha=0,e.animate({alpha:1},o).start(),t.animate({alpha:0},o).start()))}(a)}),{defer:!0})),Vi(Qi,{width:1920,height:1080,zIndex:-5,get children(){return[Vi(Qi,{ref(t){"function"==typeof e?e(t):e=t},style:a}),Vi(Qi,{ref(e){"function"==typeof t?t(e):t=e},style:a,alpha:0}),Vi(Qi,{ref(e){"function"==typeof r?r(e):r=e},src:"./assets/hero-mask-inverted.png",get color(){return Ni(Ro.color.materialBrand)},width:1920,height:1080})]}})}function Bo(e){if(!e||!e[Symbol.iterator])throw new Error("objectFromEntries requires a single iterable argument");var t,r={},i=R(e);try{for(i.s();!(t=i.n()).done;){var n=_(t.value,2),o=n[0],a=n[1];r[o]=a}}catch(s){i.e(s)}finally{i.f()}return r}var ko=["focus","disabled"],Mo=["brand","inverse","neutral"];function Lo({themeKeys:e,base:t,modes:r={},tones:i={},themeStyles:n,modeKeys:o=ko,toneKeys:a=Mo},s=!1){var l=t=>Bo(Object.entries(e).filter((([e,r])=>t[r])).map((([e,r])=>[e,t[r]])));return((e,t,r)=>{var i=(e=>{var t=Bo(Object.entries(e).map((([e,t])=>{var r=l(t);return Object.entries(t).filter((([e,t])=>o.includes(e))).forEach((([e,t])=>{r[e]=l(t)})),[e,r]})));return t})(n);s&&console.log(i);var d=((e,t)=>E(E({},e),t.base))(e,i);s&&console.log(d);var u=((e,t)=>Bo(o.map((r=>[r,E(E({},null==e?void 0:e[r]),null==t?void 0:t[r])]))))(t,i);s&&console.log(u);var h=((e,t,r)=>{var i=a.map((i=>{var n,a,s={};return new Set([].concat.apply([],[null!==(n=null==e?void 0:e[i])&&void 0!==n?n:{},null!==(a=null==t?void 0:t[i])&&void 0!==a?a:{}].map(Object.keys))).forEach((r=>{var n,a,l;o.includes(r)||(s[r]=null!==(n=null==t||null===(a=t[i])||void 0===a?void 0:a[r])&&void 0!==n?n:null==e||null===(l=e[i])||void 0===l?void 0:l[r])})),o.forEach((n=>{var o,a;s[n]=E(E(E({},r[n]),null==e||null===(o=e[i])||void 0===o?void 0:o[n]),null==t||null===(a=t[i])||void 0===a?void 0:a[n])})),[i,s]}));return Bo(i)})(r,i,u);return s&&console.log(h),{base:E(E({},d),u),tones:h}})(t,r,i)}function Fo(e){var t=e?"width":"height",r=e?"x":"y";return(i,n,o=0,a)=>{var s,l,d,u,h;if(i.children.length){var c=i.gap||0,f=i.scroll||"auto",p=null!==(s=null!==(l=i._targetPosition)&&void 0!==l?l:i[r])&&void 0!==s?s:0;i.offset=null!==(d=i.offset)&&void 0!==d?d:p;var v=i.offset,g=null!==(u=(n=n||i.children[o])[r])&&void 0!==u?u:0,m=null!==(h=n[t])&&void 0!==h?h:0,x=void 0===a?"none":o>a?"incremental":"decremental",y=p,b=function(e,t){for(var r,i,n,o,a,s,l,d=t.children.length-1;d>=0;d--)if(!t.children[d].skipFocus){o=t.children[d];break}return e?[{position:null!==(a=o.x)&&void 0!==a?a:0,size:null!==(s=o.width)&&void 0!==s?s:0},null!==(l=t.width)&&void 0!==l?l:0]:[{position:null!==(r=o.y)&&void 0!==r?r:0,size:null!==(i=o.height)&&void 0!==i?i:0},null!==(n=t.height)&&void 0!==n?n:0]}(e,i),A=_(b,2),w=A[0],T=A[1],S=(e,t)=>Math.abs(p)+T<e+t;if("auto"===f)null!=i.scrollIndex&&i.scrollIndex>=0?i.selected>=i.scrollIndex?y="incremental"===x?p-m-c:p+m+c:"decremental"===x&&i.selected===i.scrollIndex-1&&(y=p+m+c):(S(w.position,w.size)||g<Math.abs(p))&&(y=-g+v);else if("always"===f||"edge"===f&&"decremental"===x&&Math.abs(p)>g)y=-g+v;else if("edge"===f&&"incremental"===x&&S(g,m))y=p-m-c;else if("edge"===f&&"none"===x){for(var E=0,C=S(g,m);E<i.children.length&&C;){var R,I=i.children[E++];if(!I.skipFocus){var B=null!==(R=I[t])&&void 0!==R?R:0;p-=B+c}}y=p}i[r]!==y&&(i[r]=y,i._targetPosition=y)}}}function Po(...e){var t=e.filter((e=>"function"==typeof e));if(0!==t.length)return 1===t.length?t[0]:function(...e){var r,i,n=R(t);try{for(n.s();!(i=n.n()).done;){if(!0===(r=i.value.apply(this,e)))return r}}catch(o){n.e(o)}finally{n.f()}return r}}function No(){if(!this||0===this.children.length)return!1;for(var e=this.selected?this.children[this.selected]:this.selectedNode;null!==(t=e)&&void 0!==t&&t.skipFocus;){var t;this.selected++,e=this.children[this.selected]}return e instanceof fr&&(e.setFocus(),!0)}function Uo(e){return function(){var t,r=this.children.length,i=this.wrap,n=this.selected||0;if(0===r)return!1;if("right"===e||"down"===e)do{var o;if(this.selected=(this.selected||0)%r+1,this.selected>=r){if(!i){this.selected=void 0;break}this.selected=0}}while(null!==(o=this.children[this.selected])&&void 0!==o&&o.skipFocus);else if("left"===e||"up"===e)do{var a;if(this.selected=(this.selected||0)%r-1,this.selected<0){if(!i){this.selected=void 0;break}this.selected=r-1}}while(null!==(a=this.children[this.selected])&&void 0!==a&&a.skipFocus);if(void 0===this.selected&&(this.selected=n,null!==(t=this.children[this.selected])&&void 0!==t&&t.states.has("focus")))return!1;var s=this.children[this.selected];if(P(s instanceof fr),this.onSelectedChanged&&this.onSelectedChanged.call(this,this,s,this.selected,n),this.plinko){var l=this.children[n];P(l instanceof fr);var d=l.selected||0;s.selected=d<s.children.length?d:s.children.length-1}return s.setFocus(),!0}}var Do=(null==Ro?void 0:Ro.componentConfig).Artwork,Oo=void 0===Do?{themeStyles:{}}:Do,zo=(Oo.defaultTone,b(Oo,e));Lo({themeKeys:{fallbackSrc:"fallbackSrc",fillColor:"fillColor",scale:"imageScale",pivotX:"imageScalePivotX",pivotY:"imageScalePivotY",borderRadius:"radius"},base:{fallbackSrc:void 0,fillColor:Ro.color.overlay,gradientColor:Ro.color.material,pivotX:.5,pivotY:.5,scale:void 0,borderRadius:Ro.radius.md},themeStyles:zo});var Go=Ro.componentConfig.Badge,Xo=void 0===Go?{themeStyles:{}}:Go,Wo=Xo.defaultTone,Vo=b(Xo,t),Ho={themeKeys:{color:"backgroundColor",borderRadius:"radius",gap:"contentSpacing"},base:{color:Ro.color.fillInverseSecondary,borderRadius:Ro.radius.sm,border:{color:Ro.color.strokeInverse,width:Ro.stroke.sm},gap:Ro.spacer.xs,display:"flex",justifyContent:"flexStart",alignItems:"center"},tones:{inverse:{color:Ro.color.fillNeutralSecondary,borderRadius:Ro.radius.sm,border:{color:Ro.color.strokeInverseSecondary,width:Ro.stroke.sm}},brand:{color:Ro.color.fillBrand,borderRadius:Ro.radius.sm,border:{color:Ro.color.strokeInverseSecondary,width:Ro.stroke.sm}}},themeStyles:Vo},Yo={themeKeys:{color:"textColor"},base:E(E({},Ro.typography.tag1),{},{color:Ro.color.textNeutral,lineHeight:Ro.typography.tag1.lineHeight+12,marginRight:Ro.spacer.md+Ro.stroke.sm,marginLeft:Ro.spacer.md+Ro.stroke.sm}),tones:{inverse:{color:Ro.color.textInverse},brand:{color:Ro.color.textNeutral}},themeStyles:Vo},jo={themeKeys:{color:"iconColor"},base:{color:Ro.color.textNeutral},tones:{inverse:{color:Ro.color.textInverse},brand:{color:Ro.color.textNeutral}},themeStyles:Vo},Ko=Lo(Ho),Qo=Lo(jo),$o=Lo(Yo),qo=(w("r",{tone:Wo||"neutral",Container:Ko,Icon:Qo,Text:$o}),(null==Ro?void 0:Ro.componentConfig).Button),Zo=void 0===qo?{buttonThemeStyles:{}}:qo,Jo=Zo.defaultTone,ea=b(Zo,r),ta=(null==Ro?void 0:Ro.componentConfig).Surface,ra=void 0===ta?{surfaceThemeStyles:{}}:ta,ia=ra.surfaceDefaultTone,na=b(ra,i),oa=E(E({},ea),na),aa={themeKeys:{borderRadius:"radius",color:"backgroundColor",justifyContent:"justify",itemSpacing:"contentSpacing"},base:{height:Ro.typography.button1.lineHeight+2*Ro.spacer.xl,display:"flex",padding:[Ro.spacer.xxxl,Ro.spacer.xl],color:Ro.color.interactiveNeutral,justifyContent:"center",alignItems:"center",flexBoundary:"fixed",borderRadius:Ro.radius.sm,contentColor:Ro.color.fillNeutral},modes:{focus:{color:Ro.color.interactiveNeutralFocus,contentColor:Ro.color.fillInverse},disabled:{color:Ro.color.fillNeutralDisabled}},tones:{inverse:{color:Ro.color.interactiveInverse},brand:{color:Ro.color.interactiveBrand,focus:{color:Ro.color.fillNeutral}}},themeStyles:oa},sa={themeKeys:{color:"contentColor"},base:{color:Ro.color.textNeutral},modes:{focus:{color:Ro.color.textInverse},disabled:{color:Ro.color.textNeutralDisabled}},tones:{inverse:{color:Ro.color.fillNeutral},brand:{color:Ro.color.fillBrand,focus:{color:Ro.color.fillBrand}}},themeStyles:oa},la={themeKeys:{color:"textColor"},base:E(E({color:Ro.color.textNeutral},Ro.typography.button1),{},{textAlign:"center",contain:"none"}),modes:{focus:{color:Ro.color.textInverse},disabled:{color:Ro.color.textNeutralDisabled}},tones:{inverse:{color:Ro.color.fillNeutral},brand:{color:Ro.color.fillBrand,focus:{color:Ro.color.fillBrand}}},themeStyles:oa},da=Lo(aa),ua=Lo(sa),ha=Lo(la),ca=(w("K",{tone:Jo||ia||"neutral",Container:da,Content:ua,Text:ha}),(null==Ro?void 0:Ro.componentConfig).Checkbox),fa=void 0===ca?{themeStyles:{}}:ca,pa=(fa.defaultTone,b(fa,n)),va={themeKeys:{color:"backgroundColor",borderRadius:"radius",border:"border",justifyContent:"justifyContent"},base:{width:Ro.spacer.xxl,height:Ro.spacer.xxl,display:"flex",justifyContent:"center",color:Ro.color.fillNeutral,alignItems:"center",borderRadius:Ro.spacer.xxl/4,border:{color:Ro.color.strokeInverse,width:Ro.stroke.sm}},modes:{disabled:{alpha:Ro.alpha.inactive}},tones:{brand:{borderRadius:Ro.spacer.xxl/4,border:{color:Ro.color.strokeNeutralSecondary,width:Ro.stroke.sm},color:Ro.color.fillNeutralSecondary,checked:{borderRadius:Ro.spacer.xxl/4,border:{color:Ro.color.strokeNeutralSecondary,width:Ro.stroke.sm},color:Ro.color.fillBrand}},neutral:{borderRadius:Ro.spacer.xxl/4,border:{color:Ro.color.strokeNeutralSecondary,width:Ro.stroke.sm},color:Ro.color.fillInverseSecondary,checked:{borderRadius:Ro.spacer.xxl/4,border:{color:Ro.color.strokeNeutralSecondary,width:Ro.stroke.sm},color:Ro.color.fillNeutral}},inverse:{borderRadius:Ro.spacer.xxl/4,border:{color:Ro.color.strokeInverseSecondary,width:Ro.stroke.sm},color:Ro.color.fillNeutralSecondary,checked:{borderRadius:Ro.spacer.xxl/4,border:{color:Ro.color.strokeInverseSecondary,width:Ro.stroke.sm},color:Ro.color.fillInverse}}},modeKeys:["focus","disabled","checked"],themeStyles:pa},ga={themeKeys:{width:"checkWidth",height:"checkHeight"},base:{width:Ro.spacer.lg,height:Ro.spacer.lg,src:Ro.asset.check},tones:{neutral:{color:Ro.color.fillInverse},inverse:{color:Ro.color.fillNeutral},brand:{color:Ro.color.fillInverse}},themeStyles:pa};Lo(va),Lo(ga);var ma=(null==Ro?void 0:Ro.componentConfig).Icon,xa=void 0===ma?{themeStyles:{}}:ma,ya=(xa.defaultTone,b(xa,o));Lo({themeKeys:{color:"color"},base:{width:100,height:100,color:Ro.color.fillNeutral},tones:{inverse:{color:Ro.color.fillInverse},brand:{color:Ro.color.fillBrand}},themeStyles:ya});var ba=(null==Ro?void 0:Ro.componentConfig).Column,Aa=void 0===ba?{themeStyles:{}}:ba,wa=Aa.defaultTone,Ta=b(Aa,a),Sa={tone:wa||"neutral",Container:Lo({themeKeys:{gap:"itemSpacing",scrollIndex:"scrollIndex",transition:"itemTransition"},base:{display:"flex",flexBoundary:"fixed",flexDirection:"column",gap:Ro.layout.gutterY,transition:{y:E(E({},Ro.animation.standardEntrance),{},{duration:Ro.animation.duration.fast})}},themeStyles:Ta})},Ea=w("C",(e=>{var t=Uo("up"),r=Uo("down"),i=Fo(!1);return Vi(Qi,Ki(e,{get onUp(){return Po(e.onUp,t)},get onDown(){return Po(e.onDown,r)},get selected(){return e.selected||0},forwardFocus:No,get onLayout(){return Wi((()=>!!e.selected))()?Po(e.onLayout,i):e.onLayout},get onSelectedChanged(){return Po(e.onSelectedChanged,"none"!==e.scroll?i:void 0)},get style(){var t;return[e.style,Sa.Container.tones[null!==(t=e.tone)&&void 0!==t?t:Sa.tone],Sa.Container.base]}}))})),_a=(null==Ro?void 0:Ro.componentConfig).Input,Ca=void 0===_a?{themeStyles:{}}:_a,Ra=Ca.defaultTone,Ia=b(Ca,s),Ba={themeKeys:{borderRadius:"radius",color:"backgroundColor",justifyContent:"justify"},base:{width:function(e=1){var t=Ro.layout.screenW,r=Ro.layout.columnCount,i=Ro.layout.marginX,n=Ro.layout.gutterX;return(e<1||e>r)&&(console.error(`getWidthByUpCount expects an upCount between 1 & ${r}, received ${e}. Defaulting to upCount 1.`),e=1),(t-2*i-(e-1)*n)/e}(4),height:100,display:"flex",flexDirection:"column",padding:[Ro.spacer.xxxl,Ro.spacer.xl],color:Ro.color.interactiveNeutral,contentColor:Ro.color.fillInverse,borderRadius:Ro.radius.sm,marginX:Ro.spacer.xxxl,actualTitle:""},themeStyles:Ia},ka={themeKeys:{color:"textColor"},base:E({textAlign:"left",color:Ro.color.textNeutral},Ro.typography.button1),themeStyles:Ia},Ma=Lo(Ba),La=Lo(ka),Fa=(w("G",{tone:Ra||"neutral",Container:Ma,Text:La}),(null==Ro?void 0:Ro.componentConfig).Key),Pa=void 0===Fa?{themeStyles:{}}:Fa,Na=Pa.defaultTone,Ua=b(Pa,l),Da={themeKeys:{keySpacing:"keySpacing",borderRadius:"borderRadius",color:"backgroundColor",justifyContent:"justify",baseWidth:"baseWidth",sizes:"sizes",contentColor:"contentColor"},base:{keySpacing:Ro.spacer.md,height:9*Ro.spacer.md,paddingX:Ro.spacer.md,contentColor:Ro.color.fillNeutral,sizes:{sm:1,md:2,lg:3,xl:4,xxl:5},padding:[Ro.spacer.md],baseWidth:7*Ro.spacer.md,color:Ro.color.interactiveNeutral,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:Ro.radius.sm},modes:{focus:{color:Ro.color.interactiveNeutralFocus,contentColor:Ro.color.fillInverse},disabled:{color:Ro.color.fillNeutralDisabled,contentColor:Ro.color.fillNeutralDisabled}},tones:{inverse:{color:Ro.color.interactiveInverse,focus:{color:Ro.color.interactiveInverseFocus,contentColor:Ro.color.fillNeutral}},brand:{focus:{contentColor:Ro.color.fillNeutral}}},themeStyles:Ua},Oa={themeKeys:{color:"textColor"},base:E(E({color:Ro.color.textNeutral},Ro.typography.headline2),{},{textAlign:"center",contain:"none"}),modes:{focus:{color:Ro.color.textInverse},disabled:{color:Ro.color.textNeutralDisabled}},tones:{inverse:{focus:{color:Ro.color.textNeutral}}},themeStyles:Ua},za=Lo(Da),Ga=Lo(Oa),Xa=(w("H",{tone:Na||"neutral",Container:za,Text:Ga}),(null==Ro?void 0:Ro.componentConfig).Keyboard),Wa=void 0===Xa?{}:Xa,Va=Wa.defaultTone,Ha=b(Wa,d),Ya=(null==Ro?void 0:Ro.componentConfig).Key,ja=void 0===Ya?{}:Ya,Ka=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(ja),ja)),Qa={themeKeys:{gap:"keySpacing",width:"screenW",marginX:"marginX",keyHeight:"keyHeight"},base:{gap:Ro.spacer.md,width:Ro.layout.screenW,display:"flex",marginX:Ro.layout.marginX,keyHeight:100,flexBoundary:"contain"},themeStyles:Ha},$a={themeKeys:{gap:"keySpacing",borderRadius:"borderRadius",color:"backgroundColor",justifyContent:"justify",baseWidth:"baseWidth",sizes:"sizes",contentColor:"contentColor"},base:{gap:Ro.spacer.md,height:9*Ro.spacer.md,sizes:{sm:1,md:2,lg:3,xl:4,xxl:5},contentColor:Ro.color.fillNeutral,padding:[Ro.spacer.xxxl,Ro.spacer.xl],baseWidth:7*Ro.spacer.md,color:Ro.color.interactiveNeutral,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:Ro.radius.sm},modes:{focus:{color:Ro.color.interactiveNeutralFocus,contentColor:Ro.color.fillInverse},disabled:{color:Ro.color.fillNeutralDisabled,contentColor:Ro.color.fillNeutralDisabled}},tones:{inverse:{color:Ro.color.interactiveInverse,focus:{color:Ro.color.interactiveInverseFocus,contentColor:Ro.color.fillNeutral}},brand:{focus:{contentColor:Ro.color.fillNeutral}}},themeStyles:Ka},qa={themeKeys:{color:"textColor"},base:E({color:Ro.color.textNeutral},Ro.typography.headline2),modes:{focus:{color:Ro.color.textInverse},disabled:{color:Ro.color.textNeutralDisabled}},tones:{inverse:{focus:{color:Ro.color.textNeutral}}},themeStyles:Ha},Za=Lo(Qa),Ja=Lo($a),es=Lo(qa),ts=(w("J",{tone:Va,Container:Za,Key:Ja,Text:es}),(null==Ro?void 0:Ro.componentConfig).Row),rs=void 0===ts?{themeStyles:{}}:ts,is=rs.defaultTone,ns=b(rs,u),os={tone:is,Container:Lo({themeKeys:{gap:"itemSpacing",scrollIndex:"scrollIndex",transition:"itemTransition"},base:{display:"flex",flexBoundary:"fixed",flexDirection:"row",gap:Ro.layout.gutterX,transition:{x:E(E({},Ro.animation.standardEntrance),{},{duration:Ro.animation.duration.fast})}},themeStyles:ns})},as=w("R",(e=>{var t=Uo("left"),r=Uo("right"),i=Fo(!0);return Vi(Qi,Ki(e,{get selected(){return e.selected||0},get onLeft(){return Po(e.onLeft,t)},get onRight(){return Po(e.onRight,r)},forwardFocus:No,get onLayout(){return Wi((()=>!!e.selected))()?Po(e.onLayout,i):e.onLayout},get onSelectedChanged(){return Po(e.onSelectedChanged,"none"!==e.scroll?i:void 0)},get style(){var t;return[e.style,os.Container.tones[null!==(t=e.tone)&&void 0!==t?t:os.tone],os.Container.base]}}))})),ss=(null==Ro?void 0:Ro.componentConfig).Label,ls=void 0===ss?{themeStyles:{}}:ss,ds=(ls.defaultTone,b(ls,h)),us={themeKeys:{color:"backgroundColor",borderRadius:"radius"},base:{display:"flex",justifyContent:"flexStart",color:Ro.color.textNeutral,padding:[Ro.spacer.md,Ro.spacer.lg],height:Ro.typography.caption1.lineHeight+2*Ro.spacer.md,borderRadius:[Ro.radius.md,Ro.radius.md,Ro.radius.md,Ro.radius.none],neutral:{backgroundColor:Ro.color.fillNeutral}},tones:{inverse:{color:Ro.color.fillInverse},brand:{color:Ro.color.fillBrand,focus:{color:Ro.color.orange}}},themeStyles:ds},hs={themeKeys:{color:"textColor"},base:E(E({},Ro.typography.caption1),{},{color:Ro.color.textInverse,lineHeight:Ro.typography.caption1.lineHeight+2*Ro.spacer.md,marginRight:Ro.spacer.lg,marginLeft:Ro.spacer.lg}),tones:{inverse:{color:Ro.color.textNeutral},brand:{color:Ro.color.textNeutral}},themeStyles:ds};Lo(us),Lo(hs);var cs=(null==Ro?void 0:Ro.componentConfig).Details,fs=void 0===cs?{themeStyles:{}}:cs,ps=(fs.defaultTone,b(fs,c)),vs={themeKeys:{alignItems:"alignItems",gap:"contentSpacing",badgeContentSpacing:"badgeContentSpacing",ratingContentSpacing:"ratingContentSpacing"},base:{display:"flex",flexDirection:"row",alignItems:"center",gap:Ro.spacer.sm,flexBoundary:"contain",badgeContentSpacing:Ro.spacer.sm,ratingContentSpacing:Ro.spacer.sm},themeStyles:ps},gs={themeKeys:{color:"textColor"},base:E(E({},Ro.typography.body2),{},{marginRight:Ro.spacer.lg,color:Ro.color.textNeutral}),tones:{neutral:{disabled:{color:Ro.color.textNeutralDisabled}},inverse:{color:Ro.color.textInverse,disabled:{color:Ro.color.textNeutralDisabled}},brand:{color:Ro.color.textNeutral,disabled:{color:Ro.color.textNeutralDisabled}}},themeStyles:ps};Lo(vs),Lo(gs);var ms=(null==Ro?void 0:Ro.componentConfig).Rating,xs=void 0===ms?{themeStyles:{}}:ms,ys=(xs.defaultTone,b(xs,f)),bs={themeKeys:{justifyContent:"justifyContent",gap:"contentSpacing"},base:{display:"flex",flexDirection:"row",justifyContent:"flexStart",gap:Ro.spacer.sm,alignItems:"center"},themeStyles:ys},As={themeKeys:{color:"textColor"},base:E({color:Ro.color.textNeutral},Ro.typography.body2),tones:{neutral:{disabled:{color:Ro.color.textNeutralDisabled}},inverse:{color:Ro.color.textInverse,disabled:{color:Ro.color.textNeutralDisabled}},brand:{color:Ro.color.textNeutral,disabled:{color:Ro.color.textNeutralDisabled}}},themeStyles:ys},ws={themeKeys:{color:"color"},base:{height:Ro.typography.body2.lineHeight,width:Ro.typography.body2.lineHeight,color:Ro.color.fillNeutral,marginRight:Ro.spacer.sm},themeStyles:ys};Lo(bs),Lo(ws),Lo(As);var Ts=(null==Ro?void 0:Ro.componentConfig).Metadata,Ss=void 0===Ts?{themeStyles:{}}:Ts,Es=(Ss.defaultTone,b(Ss,p)),_s={themeKeys:{justifyContent:"justifyContent",alpha:"alpha"},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart",flexBoundary:"contain",alpha:Ro.alpha.primary},modes:{disabled:{alpha:Ro.alpha.inactive}},themeStyles:Es},Cs={themeKeys:{color:"textColor"},base:E(E({maxLines:1,contain:"width"},Ro.typography.headline3),{},{color:Ro.color.textNeutral}),tones:{neutral:{disabled:{color:Ro.color.textNeutralDisabled}},inverse:{color:Ro.color.textInverse,disabled:{color:Ro.color.textNeutralDisabled}},brand:{color:Ro.color.textNeutral,disabled:{color:Ro.color.textNeutralDisabled}}},themeStyles:Es},Rs={themeKeys:{color:"textColor"},base:E(E({contain:"width",maxLines:2},Ro.typography.body3),{},{color:Ro.color.textNeutralSecondary}),tones:{neutral:{disabled:{color:Ro.color.textNeutralDisabled}},inverse:{color:Ro.color.textInverseSecondary,disabled:{color:Ro.color.textNeutralDisabled}},brand:{color:Ro.color.textNeutralSecondary,disabled:{color:Ro.color.textNeutralDisabled}}},themeStyles:Es};Lo(_s),Lo(Rs),Lo(Cs);var Is=(null==Ro?void 0:Ro.componentConfig).ProgressBar,Bs=void 0===Is?{themeStyles:{}}:Is,ks=(Bs.defaultTone,b(Bs,v)),Ms={themeKeys:{color:"barColor",borderRadius:"radius"},base:{height:Ro.spacer.md,color:Ro.color.fillNeutralTertiary,borderRadius:Ro.radius.xs},tones:{inverse:{color:Ro.color.fillInverseTertiary}},themeStyles:ks},Ls={themeKeys:{color:"progressColor",borderRadius:"radius"},base:{borderRadius:Ro.radius.xs,color:Ro.color.fillNeutral},tones:{inverse:{color:Ro.color.fillInverse},brand:{color:Ro.color.fillBrand}},themeStyles:ks};Lo(Ms),Lo(Ls);var Fs=(null==Ro?void 0:Ro.componentConfig).Radio,Ps=void 0===Fs?{themeStyles:{}}:Fs,Ns=(Ps.defaultTone,b(Ps,g)),Us={themeKeys:{borderRadius:"radius",color:"backgroundColor",colorChecked:"backgroundColorChecked"},base:{color:Ro.color.fillNeutralSecondary,height:Ro.spacer.xxl+2*Ro.stroke.sm,width:Ro.spacer.xxl+2*Ro.stroke.sm,borderRadius:Ro.spacer.xxl/2+Ro.stroke.sm,border:{color:Ro.color.strokeNeutralSecondary,width:Ro.stroke.sm}},tones:{inverse:{border:{color:Ro.color.strokeInverseSecondary,width:Ro.stroke.sm}},brand:{border:{color:Ro.color.fillBrand,width:Ro.stroke.sm}}},modeKeys:["focus","disabled","checked"],themeStyles:Ns},Ds={themeKeys:{width:"knobWidth",height:"knobHeight",borderRadius:"knobRadius",color:"knobColor",colorChecked:"knobColorChecked"},base:{color:Ro.color.fillInverse,colorChecked:Ro.color.fillInverse,width:Ro.spacer.xxl,height:Ro.spacer.xxl,borderRadius:Ro.spacer.xxl/2},tones:{inverse:{color:Ro.color.fillNeutral}},themeStyles:Ns};Lo(Us),Lo(Ds);var Os=(null==Ro?void 0:Ro.componentConfig).Tile,zs=void 0===Os?{tileThemeStyles:{}}:Os,Gs=(zs.defaultTone,b(zs,m)),Xs=(null==Ro?void 0:Ro.componentConfig).Surface,Ws=void 0===Xs?{surfaceThemeStyles:{}}:Xs,Vs=(Ws.defaultSurfaceTone,b(Ws,x)),Hs={themeKeys:{alpha:"alpha",paddingYProgress:"paddingYProgress",paddingYBetweenContent:"paddingYBetweenContent",contentSpacingY:"contentSpacingY",borderRadius:"radius"},base:{width:400,height:240,padding:[40,10],paddingYProgress:Ro.spacer.xl,paddingYBetweenContent:Ro.spacer.md,contentSpacingY:Ro.spacer.md,borderRadius:Ro.radius.md,alpha:Ro.alpha.primary},modes:{disabled:{alpha:Ro.alpha.inactive}},themeStyles:E(E({},Vs),Gs)},Ys={themeKeys:{},base:{display:"flex",flexDirection:"column",flexBoundary:"contain",mountY:1},themeStyles:Gs},js={themeKeys:{},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart"},themeStyles:Gs},Ks={themeKeys:{},base:{width:5*Ro.spacer.lg,height:Ro.spacer.xxl+Ro.spacer.md},themeStyles:Gs};Lo(Hs),Lo(Ys),Lo(js),Lo(Ks);var Qs=(null==Ro?void 0:Ro.componentConfig).Toggle,$s=void 0===Qs?{themeStyles:{}}:Qs,qs=($s.defaultTone,b($s,y)),Zs=Ro.spacer.xl,Js=Ro.spacer.xs,el=Ro.stroke.sm,tl={themeKeys:{borderRadius:"strokeRadius",color:"backgroundColor",colorChecked:"backgroundColorChecked"},base:{color:Ro.color.fillInverseTertiary,colorChecked:Ro.color.fillNeutral,height:Zs+2*(Js+el),width:2*(el+2*Js+Zs),borderRadius:Zs/2+Js+el,border:{color:Ro.color.fillNeutral,width:el}},modes:{focus:{},disabled:{borderRadius:Zs/2+Js+el,border:{color:Ro.color.fillNeutralDisabled,width:el},color:Ro.color.fillInverseDisabled,colorChecked:Ro.color.fillNeutralDisabled}},tones:{inverse:{borderRadius:Zs/2+Js+el,border:{color:Ro.color.fillInverse,width:el},color:Ro.color.fillNeutralTertiary,colorChecked:Ro.color.fillInverse,disabled:{borderRadius:Zs/2+Js+el,border:{color:Ro.color.fillInverseDisabled,width:el},color:Ro.color.fillNeutralDisabled,colorChecked:Ro.color.fillInverseDisabled}},brand:{borderRadius:Zs/2+Js+el,border:{color:Ro.color.fillBrand,width:el},color:Ro.color.fillBrandTertiary,colorChecked:Ro.color.fillBrand,disabled:{borderRadius:Zs/2+Js+el,border:{color:Ro.color.fillNeutralDisabled,width:el},color:Ro.color.fillInverseDisabled,colorChecked:Ro.color.fillNeutralDisabled}}},themeStyles:qs},rl={themeKeys:{width:"knobWidth",height:"knobHeight",padding:"knobPadding",borderRadius:"knobRadius",color:"knobColor",colorChecked:"knobColorChecked"},base:{color:Ro.color.fillNeutral,colorChecked:Ro.color.fillInverse,width:Zs,height:Zs,borderRadius:Zs/2,padding:Js},modes:{focus:{},disabled:{color:Ro.color.fillNeutralDisabled,colorChecked:Ro.color.fillInverseDisabled}},tones:{inverse:{color:Ro.color.fillInverse,colorChecked:Ro.color.fillNeutral,disabled:{color:Ro.color.fillInverseDisabled,colorChecked:Ro.color.fillNeutralDisabled}},brand:{color:Ro.color.fillBrand,colorChecked:Ro.color.fillInverse,disabled:{color:Ro.color.fillNeutralDisabled,colorChecked:Ro.color.fillInverseDisabled}}},themeStyles:qs};Lo(tl),Lo(rl);var il={color:255,height:180,width:330,x:1900,y:6,mountX:1,alpha:.8,zIndex:100},nl={x:10,fontSize:20,textColor:4143380223},ol={fontSize:22,textColor:4143380223},al=_(Gr(0),2),sl=al[0],ll=al[1],dl=_(Gr(0),2),ul=dl[0],hl=dl[1],cl=_(Gr(99),2),fl=cl[0],pl=cl[1],vl=_(Gr(0),2),gl=vl[0],ml=vl[1],xl=_(Gr(""),2),yl=xl[0],bl=xl[1],Al=_(Gr(""),2),wl=Al[0],Tl=Al[1],Sl=_(Gr(""),2),El=Sl[0],_l=Sl[1],Cl=_(Gr(""),2),Rl=Cl[0],Il=Cl[1],Bl=_(Gr(0),2),kl=Bl[0],Ml=Bl[1],Ll=_(Gr(0),2),Fl=Ll[0],Pl=Ll[1],Nl=0,Ul=0,Dl=14;function Ol(e){return(e/1024/1024).toFixed(2)+" Mb"}var zl=0;function Gl(e){e.renderer.on("fpsUpdate",((e,t)=>{var r,i,n="number"==typeof t?t:t.fps;n>5&&((e=>{e&&(ll(e),pl((t=>Math.min(e,t))),ml((t=>Math.max(e,t))),Ul+=e,Nl++,hl(Math.round(Ul/Nl)))})(n),zl%10==0&&(r=e.stage,i=r.txMemManager.getMemoryInfo(),bl(Ol(i.criticalThreshold)),Tl(Ol(i.targetThreshold)),_l(Ol(i.renderableMemUsed)),Il(Ol(i.memUsed)),Ml(i.renderableTexturesLoaded),Pl(i.loadedTextures),zl=0),zl++)}))}var Xl=e=>Vi(Qi,Ki(e,{style:il,get children(){return[Vi(Qi,{y:6,get children(){return[Vi($i,{style:nl,children:"FPS:"}),Vi($i,{style:ol,x:90,get children(){return sl().toString()}})]}}),Vi(Qi,{y:6,x:160,get children(){return[Vi($i,{style:nl,children:"AVG:"}),Vi($i,{style:ol,x:100,get children(){return ul().toString()}})]}}),Vi(Qi,{x:0,y:26,get children(){return[Vi($i,{style:nl,children:"MIN:"}),Vi($i,{style:ol,x:90,get children(){return fl().toString()}})]}}),Vi(Qi,{x:160,y:26,get children(){return[Vi($i,{style:nl,children:"MAX:"}),Vi($i,{style:ol,x:100,get children(){return gl().toString()}})]}}),Vi(Qi,{display:"flex",flexDirection:"column",y:58,gap:4,get children(){return[Vi(Qi,{height:Dl,get children(){return[Vi($i,{fontSize:Dl,style:nl,children:"criticalThreshold:"}),Vi($i,{fontSize:Dl,style:nl,x:230,get children(){return yl()}})]}}),Vi(Qi,{height:Dl,get children(){return[Vi($i,{fontSize:Dl,style:nl,children:"targetThreshold:"}),Vi($i,{fontSize:Dl,style:nl,x:230,get children(){return wl()}})]}}),Vi(Qi,{height:Dl,get children(){return[Vi($i,{fontSize:Dl,style:nl,children:"renderableMemUsed:"}),Vi($i,{fontSize:Dl,style:nl,x:230,get children(){return El()}})]}}),Vi(Qi,{height:Dl,get children(){return[Vi($i,{fontSize:Dl,style:nl,children:"memUsed:"}),Vi($i,{fontSize:Dl,style:nl,x:230,get children(){return Rl()}})]}}),Vi(Qi,{height:Dl,get children(){return[Vi($i,{fontSize:Dl,style:nl,children:"renderableTexturesLoaded:"}),Vi($i,{fontSize:Dl,style:nl,x:230,get children(){return kl()}})]}}),Vi(Qi,{height:Dl,get children(){return[Vi($i,{fontSize:Dl,style:nl,children:"loadedTextures:"}),Vi($i,{fontSize:Dl,style:nl,x:230,get children(){return Fl()}})]}})]}})]}})),Wl={Column:{flexDirection:"column",display:"flex",width:140,height:600,y:360,gap:20,zIndex:101,transition:{x:{duration:250,easing:"ease-in-out"}},x:8,focus:{width:500,x:Ro.layout.marginX}},Gradient:{zIndex:99,color:255,src:"./assets/sidenav.png",alpha:0,width:1200,height:1080,focus:{alpha:1},transition:{alpha:!0}},NavButton:{zIndex:102,height:70,width:100,borderRadius:8,focus:{color:1111638783},active:{width:328,height:70}}},Vl="/solid-demo-app/",Hl=[{name:"experiment",width:81,height:100,x:0,y:0},{name:"trending",width:100,height:56,x:81,y:0},{name:"tv",width:100,height:68,x:181,y:0},{name:"movie",width:94,height:100,x:282,y:0}];function Yl(e){var t,r,i,n=(t=Vl+"assets/icons_white.png",r=Hl,i=Ft.createTexture("ImageTexture",{src:t}),r.reduce(((e,t)=>{var r=t.x,n=t.y,o=t.width,a=t.height;return e[t.name]=Ft.createTexture("SubTexture",{texture:i,x:r,y:n,width:o,height:a}),e}),{}));return Vi(Qi,Ki(e,{get texture(){return n[e.name]},get width(){return n[e.name].props.width},get height(){return n[e.name].props.height},get x(){return(100-(n[e.name].props.width||0))/2},get y(){return(100-(n[e.name].props.height||0))/2}}))}function jl(e){return Vi(Qi,Ki(e,{forwardStates:!0,get style(){return Wl.NavButton},get children(){return[Vi(Qi,{y:-16,get children(){return Vi(Yl,{scale:.5,get name(){return e.icon}})}}),Vi($i,{style:{fontSize:38,x:116,y:18,height:50,alpha:0,active:{alpha:1}},get children(){return e.children}})]}}))}function Kl(e){var t,r=En();function i(t){var i,n,o,a;if((i=()=>t,o=_n(),a=Hr((()=>bn(i()).map((e=>mn(e,void 0,n))))),Hr((()=>{var e,t=R(a());try{for(t.s();!(e=t.n()).done;){var r=(0,e.value)(o.pathname);if(r)return r}}catch(i){t.e(i)}finally{t.f()}})))())return e.focusPage();r(t)}return[Vi(Qi,{flexItem:!1,width:300,height:150,x:30,y:15,zIndex:105,get alpha(){return e.showWidgets?1:0},get children(){return[Vi($i,{x:80,fontSize:28,color:4143380036,children:"Built With:"}),Vi(Qi,{y:22,src:"./assets/solidWord.png",width:280,height:52}),Vi(Qi,{x:0,y:110,src:"./assets/tmdb.png",width:80,height:41}),Vi($i,{x:90,y:110,contain:"width",width:160,fontSize:12,color:4143380036,children:"This product uses the TMDB API but is not endorsed or certified by TMDB."})]}}),Vi(Ea,Ki(e,{onFocus:function(){t.states.add("focus"),this.children.forEach((e=>e.states.add("active"))),this.children[this.selected||0].setFocus()},onBlur:function(){t.states.remove("focus"),this.selected=0,this.children.forEach((e=>e.states.remove("active")))},get style(){return Wl.Column},scroll:"none",get children(){return[Vi(jl,{onEnter:()=>i("/browse/all"),icon:"trending",children:"Trending"}),Vi(jl,{icon:"movie",onEnter:()=>i("/browse/movie"),children:"Movies"}),Vi(jl,{icon:"tv",onEnter:()=>i("/browse/tv"),children:"TV"}),Vi(jl,{icon:"experiment",onEnter:()=>i("/examples"),children:"Examples"})]}})),Vi(Qi,{skipFocus:!0,ref(e){"function"==typeof t?t(e):t=e},get style(){return Wl.Gradient}})]}var Ql=e=>{Kn({Announcer:["a"],Menu:["m"],Escape:["Escape",27],Backspace:["Backspace",8],Left:["ArrowLeft",37],Right:["ArrowRight",39],Up:["ArrowUp",38],Down:["ArrowDown",40],Enter:["Enter",13]}),So();var t=(lo.setupTimers(),Vr($r(Yn,lo.onFocusChange,{defer:!0})),lo);t.enabled=!1;var r,i,n=En();function o(){return!r.states.has("focus")&&(i=Fi(),r.setFocus())}Gl({renderer:Ft});var a=_(Gr(!0),2),s=a[0],l=a[1],d=_n(),u=["/browse","/entity"];return Vr((()=>{var e=d.pathname,t=u.some((t=>e.startsWith(t)));"/"===e&&(t=!0),l(t)})),Vi(Qi,{ref(e){var t=window.APP;"function"==typeof t?t(e):window.APP=e},onAnnouncer:()=>t.enabled=!t.enabled,onLast:()=>history.back(),onMenu:()=>n("/"),style:{width:1920,height:1080},onBackspace:o,onLeft:o,onRight:()=>r.states.has("focus")&&i.setFocus(),get children(){return[Vi(Io,{}),Vi(Xl,{mountX:1,x:1910,y:10,get alpha(){return s()?1:0}}),Wi((()=>e.children)),Vi(Kl,{ref(e){"function"==typeof r?r(e):r=e},focusPage:()=>i.setFocus(),get showWidgets(){return s()}})]}})},$l="false"!==new URLSearchParams(window.location.search).get("roundPoster"),ql=w("i",{Page:{width:1920,height:1080},headlineText:{width:1200,height:240,x:360,y:455,contain:"both",fontSize:66,textAlign:"center"},headlineSubText:{width:960,height:170,x:530,y:655,contain:"both",fontSize:48,textAlign:"center"},itemsContainer:{width:Ro.layout.screenW,height:800,y:560,x:0,zIndex:2},Thumbnail:{borderRadius:$l?16:0,width:185,height:278,scale:1,zIndex:2,transition:{scale:{duration:250,easing:"ease-in-out"}},border:{width:0,color:0},focus:{scale:1.1,border:{color:4294967142,width:8}}},FocusRing:{borderRadius:16,width:194,height:286,y:-5,x:-5,zIndex:-1},FPS:{color:255,height:42,width:140,x:20,y:20,zIndex:100},FPSLabel:{x:10,y:0,fontSize:36,textColor:4294967295},FPSValue:{x:90,y:0,fontSize:36,textColor:4294967295},showHeadline:{x:70,y:20},headlineBlur:{width:1920,height:150,x:0,y:0,zIndex:14,alpha:.9,color:255},RowTitle:{height:60,width:300,marginBottom:-40,fontSize:36,color:4042322175,zIndex:2},Row:{display:"flex",justifyContent:"spaceBetween",height:300},Column:{display:"flex",flexDirection:"column",justifyContent:"flexStart",flexBoundary:"contain",gap:64,width:Ro.layout.screenW-2*Ro.layout.marginX,x:Ro.layout.marginX+Ro.layout.gutterX,y:48,transition:{y:{duration:250,easing:"ease-in-out"}},zIndex:2},Rect:{width:250,height:100,y:10,x:300,color:65535},peopleBio:E(E({},Ro.typography.body1),{},{fontFamily:"Roboto",fontWeight:"normal",contain:"both",width:780,height:340})});w("M",{fontSize:32,contain:"width",textAlign:"center",mountY:-.35,color:4294967295,height:136,width:386,focus:{fontSize:40},disabled:{color:2425393407}});function Zl(e){return Vi(Qi,Ki(e,{color:16711935,onLoad:function(e){e.color=4294967295},onFail:e=>e.src="failback.png",get style(){return ql.Thumbnail}}))}function Jl(e){var t=function(e,...t){if(_r in e){var r=new Set(t.length>1?t.flat():t[0]),i=t.map((t=>new Proxy({get:r=>t.includes(r)?e[r]:void 0,has:r=>t.includes(r)&&r in e,keys:()=>t.filter((t=>t in e))},Si)));return i.push(new Proxy({get:t=>r.has(t)?void 0:e[t],has:t=>!r.has(t)&&t in e,keys:()=>Object.keys(e).filter((e=>!r.has(e)))},Si)),i}var n,o={},a=t.map((()=>({}))),s=R(Object.getOwnPropertyNames(e));try{for(s.s();!(n=s.n()).done;){var l,d=n.value,u=Object.getOwnPropertyDescriptor(e,d),h=!u.get&&!u.set&&u.enumerable&&u.writable&&u.configurable,c=!1,f=0,p=R(t);try{for(p.s();!(l=p.n()).done;)l.value.includes(d)&&(c=!0,h?a[f][d]=u.value:Object.defineProperty(a[f],d,u)),++f}catch(v){p.e(v)}finally{p.f()}c||(h?o[d]=u.value:Object.defineProperty(o,d,u))}}catch(v){s.e(v)}finally{s.f()}return[...a,o]}(e,["items"]),r=_(t,2),i=r[0],n=r[1];return Vi(as,Ki(n,{get style(){return ql.Row},get children(){return Vi(ki,{get each(){return i.items},children:e=>Vi(Zl,e)})}}))}var ed,td,rd="https://api.themoviedb.org/3",id="w185",nd={headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIyZDE4YjEwMTA0YjdiZTlkNjFiMWYwYjVlMGEwNzM2OCIsInN1YiI6IjYwZTVjMTdlNGNhNjc2MDA3NTA4Njc3MSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.D_nqH9kd-bhhWzeVsTDPYhHnsUaNAuyAa6YATmKHqsA"}};function od(e,t=id){return td+t+e}function ad(e,t={}){return fetch(rd+e,E(E({},nd),t)).then((e=>e.json()))}function sd(){return ad("/configuration").then((e=>{var t;return ed=e,td=null===(t=e.images)||void 0===t?void 0:t.secure_base_url,e}))}var ld=w("v",{get:function(e,t={}){return ed?ad(e,t):sd().then((()=>ad(e,t)))},loadConfig:sd});function dd(e=[]){return e.map((e=>{return{src:od(e.poster_path||e.profile_path),tileSrc:od(e.backdrop_path||e.profile_path,"w300"),backdrop:od(e.backdrop_path,"w1280"),href:`/entity/${e.media_type||"people"}/${e.id}`,shortTitle:(t=e.title||e.name,r=30,t.length>r?t.substring(0,r-3)+"...":t),title:e.title||e.name,item:e,entityInfo:{type:e.media_type||"people",id:e.id},heroContent:{title:e.title||e.name,description:e.overview}};var t,r}))}var ud=new Map,hd=new Map;var cd=900,fd={display:"flex",flexDirection:"column",flexBoundary:"fixed",width:cd,height:220,gap:16},pd=E(E({},Ro.typography.display2),{},{fontFamily:"Roboto",fontWeight:700,maxLines:1,width:cd,contain:"width"}),vd=e=>Vi($i,Ki(e,{style:pd})),gd=E(E({},Ro.typography.body1),{},{fontFamily:"Roboto",fontWeight:400,lineHeight:32,width:cd,maxLines:3,contain:"width"}),md={fontSize:16,lineHeight:20,marginLeft:13,marginRight:13},xd=e=>Vi($i,Ki(e,{style:gd,get children(){return e.children}})),yd=e=>Vi(Qi,Ki(e,{style:{color:"0x00000099",borderRadius:8,border:{width:2,color:"0xffffffff"},display:"flex",height:36},get children(){return Vi($i,{lineHeight:36,style:md,get children(){return e.children}})}})),bd=E(E({},Ro.typography.body2),{},{fontFamily:"Roboto",fontWeight:400}),Ad=e=>Vi(Qi,{style:{display:"flex",flexDirection:"row",gap:18,width:cd,height:48},get children(){return[Vi(Qi,{y:-4,src:"./assets/stars.png",width:188,height:31}),Vi(Qi,{y:-4,flexItem:!1,clipping:!0,get width(){return 188*e.voteAverage/10},height:31,get children(){return Vi(Qi,{src:"./assets/stars-full.png",width:188,height:31})}}),Vi($i,{style:bd,get children(){return[Wi((()=>e.voteCount))," reviews"]}}),Vi($i,{style:bd,get children(){return e.metaText}}),Vi(Bi,{get each(){return e.badges},children:e=>Vi(yd,{y:-5,children:e})})]}}),wd=w("z",(e=>Vi(Qi,Ki({id:"contentBlock",style:fd},e,{get children(){return[Vi(vd,{get children(){return e.content.title}}),Vi(xd,{get children(){return e.content.description}}),Vi(Mi,{get when(){return e.content.voteCount},get children(){return Vi(Ad,{get metaText(){return e.content.metaText},get badges(){return e.content.badges},get voteCount(){return e.content.voteCount},get voteAverage(){return e.content.voteAverage}})}})]}})))),Td=()=>{var e=Cn(),t=_(Gr(0),2),r=t[0],i=t[1],n=_(Gr({}),2),o=n[0],a=n[1],s=En(),l=jr((()=>0)),d=Hr((()=>{return c=e.filter||"all",t=e=>{var t=`/trending/${c}/week?page=${e}`;if(ud.has(t))return ud.get(t);var r=ld.get(t).then((e=>{var t=e.results.filter((e=>!e.adult)),r=function(e,t=7){for(var r=[],i=0,n=e.length;i<n;i+=t)r.push(e.slice(i,i+t));return r}((hd.has(c)?hd.get(c):[]).concat(dd(t)));return r[r.length-1].length<7?hd.set(c,r.pop()):hd.delete(c),r}));return ud.set(t,r),r},r=_(Gr([]),2),i=r[0],n=r[1],o=_(Gr(1),2),a=o[0],s=o[1],l=_(Gr(!1),2),d=l[0],u=l[1],h=_(Yr(a,t),1)[0],Xr((()=>{var e=h();e&&Kr((()=>{0===e.length&&u(!0),n((t=>[...t,...e]))}))})),{pages:i,page:a,setPage:s,setPages:n,end:d,setEnd:u};var t,r,i,n,o,a,s,l,d,u,h,c})),u=eo((e=>Co(e)),400),h=eo((e=>a(e||{})),200);function c(){this.children[this.selected||0].setFocus(),i(-1*(this.y||0)+24);var e=d().pages().length;this.parent.selected=this.parent.children.indexOf(this),(0===e||this.parent.selected&&this.parent.selected>=e-2)&&d().setPage((e=>e+1))}function f(){var e=this.children.find((e=>e.states.has("focus")));return P(e&&e.href),s(e.href),!0}return Vr($r(Fi,(e=>{e.backdrop&&u(e.backdrop),e.heroContent&&h(e.heroContent)}),{defer:!0})),Vi(Mi,{get when(){return d().pages().length},get children(){return[Vi(wd,{y:360,x:162,get content(){return o()}}),Vi(Qi,{clipping:!0,get style(){return ql.itemsContainer},get children(){return Vi(Ea,{id:"BrowseColumn",plinko:!0,announce:"All Trending - Week",get y(){return r()},scroll:"none",get style(){return ql.Column},get children(){return Vi(Bi,{get each(){return d().pages()},children:(e,t)=>Vi(Jl,{get autofocus(){return l(t())},items:e,width:1620,onFocus:c,onEnter:f})})}})}})]}})},Sd=()=>{return e=Hi("node"),ji(e,"style",{width:1920,height:1080,color:868483072}),e;var e},Ed="/solid-demo-app/",_d=[{type:"msdf",fontFamily:"Roboto",descriptors:{weight:700},atlasDataUrl:Ed+"fonts/Roboto-Bold.msdf.json",atlasUrl:Ed+"fonts/Roboto-Bold.msdf.png"},{type:"msdf",fontFamily:"Roboto",descriptors:{weight:400},atlasDataUrl:Ed+"fonts/Roboto-Regular.msdf.json",atlasUrl:Ed+"fonts/Roboto-Regular.msdf.png"},{type:"msdf",fontFamily:"Arial",descriptors:{weight:500},atlasDataUrl:Ed+"fonts/Roboto-Regular.msdf.json",atlasUrl:Ed+"fonts/Roboto-Regular.msdf.png"}],Cd=Ri((()=>L((()=>S.import("./Grid-legacy-CNHtqBjz.js"))))),Rd=Ri((()=>L((()=>S.import("./Portal-legacy-ClLRNMh9.js"))))),Id=Ri((()=>L((()=>S.import("./Text-legacy-TkyieBTW.js"))))),Bd=Ri((()=>L((()=>S.import("./Create-legacy-6BxtMiX3.js"))))),kd=Ri((()=>L((()=>S.import("./Viewport-legacy-C4SPlHF9.js"))))),Md=Ri((()=>L((()=>S.import("./Buttons-legacy-DhoelXxn.js"))))),Ld=Ri((()=>L((()=>S.import("./Flex-legacy-CbO_35bt.js"))))),Fd=Ri((()=>L((()=>S.import("./FlexSize-legacy-nAnXpgx1.js"))))),Pd=Ri((()=>L((()=>S.import("./FlexColumnSize-legacy-DnKVHNro.js"))))),Nd=Ri((()=>L((()=>S.import("./FlexColumn-legacy-B94WFDSi.js"))))),Ud=Ri((()=>L((()=>S.import("./ButtonsMaterial-legacy-B8KCL00R.js"))))),Dd=Ri((()=>L((()=>S.import("./SuperFlex-legacy-DylJpz9b.js"))))),Od=Ri((()=>L((()=>S.import("./Entity-legacy-CiBVa0Bp.js"))))),zd=Ri((()=>L((()=>S.import("./People-legacy-Cmd5QbRT.js"))))),Gd=Ri((()=>L((()=>S.import("./Login-legacy-C3_CVpIE.js")))));zt.debug=!1,zt.animationsEnabled=!0,zt.fontSettings.fontFamily="Roboto",zt.fontSettings.color=4143380223,zt.fontSettings.fontSize=32,zt.rendererOptions={fpsUpdateInterval:200,fontEngines:[class extends ft{constructor(e){super(e),C(this,"ssdfFontFamilies",{}),C(this,"msdfFontFamilies",{}),C(this,"fontFamilyArray",[this.ssdfFontFamilies,this.msdfFontFamilies]),C(this,"sdfShader",void 0),C(this,"rendererBounds",void 0),C(this,"type","sdf"),this.sdfShader=this.stage.shManager.loadShader("SdfShader").shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,t)=>{e.props.fontFamily=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontWeight:(e,t)=>{e.props.fontWeight=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStyle:(e,t)=>{e.props.fontStyle=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStretch:(e,t)=>{e.props.fontStretch=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontSize:(e,t)=>{e.props.fontSize=t,this.invalidateLayoutCache(e)},text:(e,t)=>{e.props.text=t,this.invalidateLayoutCache(e)},textAlign:(e,t)=>{e.props.textAlign=t,this.invalidateLayoutCache(e)},color:(e,t)=>{e.props.color=t},x:(e,t)=>{e.props.x=t,e.elementBounds.valid&&(this.setElementBoundsX(e),!e.renderWindow.valid&&j(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},y:(e,t)=>{e.props.y=t,e.elementBounds.valid&&(this.setElementBoundsY(e),!e.renderWindow.valid&&j(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},contain:(e,t)=>{e.props.contain=t,this.invalidateLayoutCache(e)},width:(e,t)=>{e.props.width=t,"none"!==e.props.contain&&this.invalidateLayoutCache(e)},height:(e,t)=>{e.props.height=t,"both"===e.props.contain&&this.invalidateLayoutCache(e)},offsetY:(e,t)=>{e.props.offsetY=t,this.invalidateLayoutCache(e)},scrollable:(e,t)=>{e.props.scrollable=t,this.invalidateLayoutCache(e)},scrollY:(e,t)=>{e.props.scrollY=t,this.scheduleUpdateState(e)},letterSpacing:(e,t)=>{e.props.letterSpacing=t,this.invalidateLayoutCache(e)},lineHeight:(e,t)=>{e.props.lineHeight=t,e.resLineHeight=void 0,this.invalidateLayoutCache(e)},maxLines:(e,t)=>{e.props.maxLines=t,this.invalidateLayoutCache(e)},textBaseline:(e,t)=>{e.props.textBaseline=t,this.invalidateLayoutCache(e)},verticalAlign:(e,t)=>{e.props.verticalAlign=t,this.invalidateLayoutCache(e)},overflowSuffix:(e,t)=>{e.props.overflowSuffix=t,this.invalidateLayoutCache(e)},debug:(e,t)=>{e.props.debug=t}}}canRenderFont(e){var t=e.fontFamily;return t in this.ssdfFontFamilies||t in this.msdfFontFamilies||"$$SDF_FAILURE_TEST$$"===t}isFontFaceSupported(e){return e instanceof Ot}addFontFace(e){P(e instanceof Ot);var t=e.fontFamily,r="ssdf"===e.type?this.ssdfFontFamilies:"msdf"===e.type?this.msdfFontFamilies:void 0;if(r){var i=r[t];i||(i=new Set,r[t]=i),i.add(e)}else console.warn(`Invalid font face type: ${e.type}`)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new W,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,resLineHeight:void 0,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(e){var t=e.trFontFace,r=e.textH,i=e.lineCache,n=e.debugData,o=e.forceFullLayoutCalc;if(n.updateCount++,"initialState"===e.status&&this.setStatus(e,"loading"),!t){if(t=this.resolveFontFace(e.props),e.trFontFace=t,!t){var a=`SdfTextRenderer: Could not resolve font face for family: '${e.props.fontFamily}'`;return console.error(a),void this.setStatus(e,"failed",new Error(a))}t.texture.setRenderableOwner(e,!0)}if(t.loaded){P(t.data,"Font face data should be loaded"),P(t.metrics,"Font face metrics should be loaded");var s=e.props,l=s.text,d=s.fontSize,u=s.x,h=s.y,c=s.contain,f=s.width,p=s.height,v=s.verticalAlign,g=s.scrollable,m=s.overflowSuffix,x=s.maxLines,y="both"===c&&g?e.props.scrollY:0,b=e.renderWindow,A=t.data.info.size,w=d/A,T=e.resLineHeight;if(void 0===T){var S=e.props.lineHeight;T=void 0===S?function(e,t){return t*(e.ascender-e.descender+e.lineGap)}(t.metrics,d):S,e.resLineHeight=T}var E=T/w;e.distanceRange=w*t.data.distanceField.distanceRange;var _=24*l.length,C=e.vertexBuffer;(!C||C.length<_)&&(C=new Float32Array(2*_));var R=e.elementBounds;if(R.valid||(this.setElementBoundsX(e),this.setElementBoundsY(e),R.valid=!0),!o&&b.valid){var I=b.screen;if(u+I.x1<=R.x1&&u+I.x2>=R.x2&&h-y+I.y1<=R.y1&&h-y+I.y2>=R.y2)return void this.setStatus(e,"loaded");b.valid=!1,this.setStatus(e,"loading")}var B=e.props,k=B.offsetY,M=B.textAlign;if(!b.valid){if(!j(R,this.rendererBounds))return;en(b,u,h,y,T,"both"===c?R.y2-R.y1:0,R,w)}var L=function(e,t,r,i,n,o,a,s,l){var d=Math.min(Math.max(a.firstLineIdx,0),s.length),u=r.metrics;P(u,"Font metrics not loaded"),P(r.data,"Font data not loaded");var h=(u.ascender-u.descender)*e,c=0;"middle"===i?c=(t-h)/2:"bottom"===i&&(c=t-h);var f=n/o,p=r.data.common.base,v=f+(u.ascender*e-p)+d*t+c;if(!(l&&v>=l/o))return{sdfX:0,sdfY:v,lineIndex:d}}(A,E,t,v,k,w,b,i,r);if(L){var F=e.props.letterSpacing,N=Ji(L.lineIndex,L.sdfX,L.sdfY,l,M,f,p,d,T,F,C,c,i,b.sdf,t,o,g,m,x);e.bufferUploaded=!1,e.bufferNumFloats=N.bufferNumFloats,e.bufferNumQuads=N.bufferNumQuads,e.vertexBuffer=C,e.renderWindow=b,n.lastLayoutNumCharacters=N.layoutNumCharacters,n.bufferSize=C.byteLength,N.fullyProcessed&&(e.textW=N.maxX*w,e.textH=N.numLines*E*w),this.setStatus(e,"loaded")}else this.setStatus(e,"loaded")}else t.once("loaded",(()=>{this.scheduleUpdateState(e)}))}renderQuads(e,t,r,i,n,o){var a,s;if(e.vertexBuffer){var l=this.stage.renderer;P(l instanceof Lt);var d,u,h=e.props,c=h.fontSize,f=h.color,p=h.contain,v=h.scrollable,g=h.zIndex,m=h.debug,x="both"===p&&v?e.props.scrollY:0,y=e.textW,b=void 0===y?0:y,A=e.textH,w=void 0===A?0:A,T=e.distanceRange,S=e.vertexBuffer,E=e.bufferUploaded,_=e.trFontFace,C=e.elementBounds,R=e.webGlBuffers;if(!R){var I=l.glw,B=4*Float32Array.BYTES_PER_ELEMENT,k=I.createBuffer();P(k),e.webGlBuffers=new Bt([{buffer:k,attributes:{a_position:{name:"a_position",size:2,type:I.FLOAT,normalized:!1,stride:B,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:I.FLOAT,normalized:!1,stride:B,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,P(e.webGlBuffers),R=e.webGlBuffers}if(!E){var M,L,F=l.glw,N=null!==(M=null===(L=R)||void 0===L?void 0:L.getBuffer("a_textureCoordinate"))&&void 0!==M?M:null;F.arrayBufferData(N,S,F.STATIC_DRAW),e.bufferUploaded=!0}if(P(_),v&&"both"===p){P(C.valid);var D=(d=C,(u=tn)?(u.x=d.x1,u.y=d.y1,u.width=d.x2-d.x1,u.height=d.y2-d.y1,u):{x:d.x1,y:d.y1,width:d.x2-d.x1,height:d.y2-d.y1});r.valid?(e.clippingRect.valid=!0,r=K(r,D,e.clippingRect)):(e.clippingRect.valid=!0,r=Q(D,e.clippingRect))}var O=new St(l.glw,l.options,R,this.sdfShader,{transform:t.getFloatArr(),color:U(f,i),size:c/((null===(a=_.data)||void 0===a?void 0:a.info.size)||0),scrollY:x,distanceRange:T,debug:m.sdfShaderDebug},i,r,{height:w,width:b},0,g,!1,n,o),z=null===(s=e.trFontFace)||void 0===s?void 0:s.texture;P(z);var G=z.ctxTexture;O.addTexture(G),O.length=e.bufferNumFloats,O.numQuads=e.bufferNumQuads,l.addRenderOp(O)}}setIsRenderable(e,t){var r;super.setIsRenderable(e,t),null===(r=e.trFontFace)||void 0===r||r.texture.setRenderableOwner(e,t)}destroyState(e){var t;super.destroyState(e),null===(t=e.trFontFace)||void 0===t||t.texture.setRenderableOwner(e,!1)}resolveFontFace(e){return Me.resolveFontFace(this.fontFamilyArray,e)}releaseFontFace(e){e.resLineHeight=void 0,e.trFontFace&&(e.trFontFace.texture.setRenderableOwner(e,!1),e.trFontFace=void 0)}invalidateLayoutCache(e){e.renderWindow.valid=!1,e.elementBounds.valid=!1,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading"),this.scheduleUpdateState(e)}setElementBoundsX(e){var t=e.props,r=t.x,i=t.contain,n=t.width,o=e.elementBounds;o.x1=r,o.x2="none"!==i?r+n:1/0}setElementBoundsY(e){var t=e.props,r=t.y,i=t.contain,n=t.height,o=e.elementBounds;o.y1=r,o.y2="both"===i?r+n:1/0}}],renderEngine:Lt,inspector:class{constructor(e,t){var r,i,n,o,a,s;if(C(this,"root",null),C(this,"canvas",null),C(this,"height",1080),C(this,"width",1920),C(this,"scaleX",1),C(this,"scaleY",1),!G()){if(!t)throw new Error("settings is required");this.height=Math.ceil(null!==(r=t.appHeight)&&void 0!==r?r:1080/(null!==(i=t.deviceLogicalPixelRatio)&&void 0!==i?i:1)),this.width=Math.ceil(null!==(n=t.appWidth)&&void 0!==n?n:1920/(null!==(o=t.deviceLogicalPixelRatio)&&void 0!==o?o:1)),this.scaleX=null!==(a=t.deviceLogicalPixelRatio)&&void 0!==a?a:1,this.scaleY=null!==(s=t.deviceLogicalPixelRatio)&&void 0!==s?s:1,this.canvas=e,this.root=document.createElement("div"),this.setRootPosition(),document.body.appendChild(this.root),new MutationObserver(this.setRootPosition.bind(this)).observe(e,{attributes:!0,childList:!1,subtree:!1}),new ResizeObserver(this.setRootPosition.bind(this)).observe(e),window.addEventListener("resize",this.setRootPosition.bind(this)),console.warn("Inspector is enabled, this will impact performance")}}setRootPosition(){if(null!==this.root&&null!==this.canvas){var e=this.canvas.getBoundingClientRect(),t=document.documentElement.scrollTop+e.top,r=document.documentElement.scrollLeft+e.left;this.root.id="root",this.root.style.left=`${r}px`,this.root.style.top=`${t}px`,this.root.style.width=`${this.width}px`,this.root.style.height=`${this.height}px`,this.root.style.position="absolute",this.root.style.transformOrigin="0 0 0",this.root.style.transform=`scale(${this.scaleX}, ${this.scaleY})`,this.root.style.overflow="hidden",this.root.style.zIndex="65534"}}createDiv(e,t){var r=document.createElement("div");for(var i in r.style.position="absolute",r.id=e.toString(),t)this.updateNodeProperty(r,i,t[i]);return r}createNode(e){var t=this.createDiv(e.id,e.props);return t.node=e,e.div=t,this.createProxy(e,t)}createTextNode(e){var t=this.createDiv(e.id,e.props);return t.node=e,e.div=t,this.createProxy(e,t)}createProxy(e,t){return new Proxy(e,{set:(e,r,i)=>(this.updateNodeProperty(t,r,i),Reflect.set(e,r,i)),get:(e,r,i)=>("destroy"===r&&this.destroyNode(e.id),"animate"===r?(r,i)=>{var n=e.animate(r,i);return new Proxy(n,{get:(e,n,o)=>("start"===n&&this.animateNode(t,r,i),Reflect.get(e,n,o))})}:Reflect.get(e,r,i))})}destroyNode(e){var t=document.getElementById(e.toString());null==t||t.remove()}updateNodeProperty(e,t,r){if(null!==this.root&&null!=r)if("parent"!==t){if("text"===t)return e.innerHTML=String(r),void(e.style.visibility="hidden");if("src"===t&&r)e.setAttribute("data-src",String(r));else{if(rn[t]){var i,n=null===(i=rn[t])||void 0===i?void 0:i.call(rn,r);if(null===n)return;return"string"==typeof n?void e.style.setProperty(n,String(r)):void("object"==typeof n&&e.style.setProperty(n.prop,n.value))}if(on[t]){var o=on[t];if(!o)return;e.setAttribute(String(o),String(r))}else if("data"!==t);else for(var a in r){var s=r[a];void 0===s?e.removeAttribute(`data-${a}`):e.setAttribute(`data-${a}`,String(s))}}}else{var l=r.id;if(1===l)return void this.root.appendChild(e);var d=document.getElementById(l.toString());null==d||d.appendChild(e)}}animateNode(e,t,r){var i=r.duration,n=void 0===i?1e3:i,o=r.delay,a=void 0===o?0:o,s=t.x,l=t.y,d=t.width,u=t.height,h=t.alpha,c=void 0===h?1:h,f=t.rotation,p=void 0===f?0:f,v=t.scale,g=void 0===v?1:v,m=t.color;setTimeout((function(){setTimeout((()=>{e.style.top=`${l}px`,e.style.left=`${s}px`,e.style.width=`${d}px`,e.style.height=`${u}px`,e.style.opacity=`${c}`,e.style.rotate=`${p}rad`,e.style.scale=`${g}`,e.style.color=nn(m)}),n)}),a)}},textureMemory:{criticalThreshold:8e7},numImageWorkers:0,deviceLogicalPixelRatio:window.innerHeight/1080};var Xd=(Di=function(e,t="app"){return Ft=new bt(e,t),Pt=Ft.createShader.bind(Ft),Ft}(zt.rendererOptions,"app"),zt.setActiveElement=Pi,Gi.lng=Di.root,Gi.rendered=!0,{renderer:Di,rootNode:Gi,render:Xi}).render;!function(e){var t,r=Ft.stage,i=R(e);try{for(i.s();!(t=i.n()).done;){var n=t.value;"type"in n?r.fontManager.addFontFace(new Ot(n.type,E(E({},n),{},{stage:r}))):r.fontManager.addFontFace(new wt(n))}}catch(o){i.e(o)}finally{i.f()}}(_d),Xd((()=>Vi(Wn,{root:e=>Vi(Ql,e),get children(){return[Vi(Dn,{path:"",component:Td}),Vi(Dn,{path:"examples",component:Rd}),Vi(Dn,{path:"browse/:filter",component:Td}),Vi(Dn,{path:"grid",component:Cd}),Vi(Dn,{path:"text",component:Id}),Vi(Dn,{path:"login",component:Gd}),Vi(Dn,{path:"buttons",component:Md}),Vi(Dn,{path:"flex",component:Ld}),Vi(Dn,{path:"create",component:Bd}),Vi(Dn,{path:"viewport",component:kd}),Vi(Dn,{path:"flexsize",component:Fd}),Vi(Dn,{path:"flexcolumnsize",component:Pd}),Vi(Dn,{path:"flexcolumn",component:Nd}),Vi(Dn,{path:"superflex",component:Dd}),Vi(Dn,{path:"buttonsmaterial",component:Ud}),Vi(Dn,{path:"entity/people/:id",component:zd}),Vi(Dn,{path:"entity/:type/:id",component:Od}),Vi(Dn,{path:"*all",component:Sd})]}})))}}}))}();
//# sourceMappingURL=index-legacy-CAS0qsWJ.js.map
