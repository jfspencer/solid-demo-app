function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
var ni=Object.defineProperty;var oi=(n,r,e)=>r in n?ni(n,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[r]=e;var u=(n,r,e)=>(oi(n,typeof r!="symbol"?r+"":r,e),e);import{a as F,i as no,g as Cr,c as dt,W as yn,E as et,b as Be,d as ii,e as en,f as si,m as bt,h as Ft,j as oo,T as io,k as ai,l as Tr,S as vn,B as li,n as ci,o as so,p as di,q as hi,C as ui,r as fi,s as wn,t as bn,u as gi,v as pi,w as mi}from"./CoreExtension-BSpcUIDc.js";function Wc(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function e(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(o){if(o.ep)return;o.ep=!0;const i=e(o);fetch(o.href,i)}})();const ao=(n,r)=>n===r,or=Symbol("solid-proxy"),xi=Symbol("solid-track"),ir={equals:ao};let lo=xo;const be=1,sr=2,co={owned:null,cleanups:null,context:null,owner:null},_r={};var $=null;let Rr=null,yi=null,H=null,se=null,_e=null,xr=0;function ut(n,r){const e=H,t=$,o=n.length===0,i=r===void 0?t:r,s=o?co:{owned:null,cleanups:null,context:i?i.context:null,owner:i},l=o?n:()=>n(()=>ae(()=>vr(s)));$=s,H=null;try{return Re(l,!0)}finally{H=e,$=t}}function W(n,r){r=r?Object.assign({},ir,r):ir;const e={value:n,observers:null,observerSlots:null,comparator:r.equals||void 0},t=o=>(typeof o=="function"&&(o=o(e.value)),mo(e,o));return[po.bind(e),t]}function Nr(n,r,e){const t=Lt(n,r,!0,be);rt(t)}function Te(n,r,e){const t=Lt(n,r,!1,be);rt(t)}function Ye(n,r,e){lo=Ti;const t=Lt(n,r,!1,be);(!e||!e.render)&&(t.user=!0),_e?_e.push(t):rt(t)}function te(n,r,e){e=e?Object.assign({},ir,e):ir;const t=Lt(n,r,!0,0);return t.observers=null,t.observerSlots=null,t.comparator=e.equals||void 0,rt(t),po.bind(t)}function vi(n){return n&&typeof n=="object"&&"then"in n}function Ze(n,r,e){let t,o,i;arguments.length===2&&typeof r=="object"||arguments.length===1?(t=!0,o=n,i=r||{}):(t=n,o=r,i=e||{});let s=null,l=_r,c=!1,d="initialValue"in i,h=typeof t=="function"&&te(t);const g=new Set,[y,b]=(i.storage||W)(i.initialValue),[m,w]=W(void 0),[S,A]=W(void 0,{equals:!1}),[p,x]=W(d?"ready":"unresolved");function v(C,_,E,P){return s===C&&(s=null,P!==void 0&&(d=!0),(C===l||_===l)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(P,{value:_})),l=_r,T(_,E)),_}function T(C,_){Re(()=>{_===void 0&&b(()=>C),x(_!==void 0?"errored":d?"ready":"unresolved"),w(_);for(const E of g.keys())E.decrement();g.clear()},!1)}function I(){const C=Si,_=y(),E=m();if(E!==void 0&&!s)throw E;return H&&!H.user&&C&&Nr(()=>{S(),s&&(C.resolved||g.has(C)||(C.increment(),g.add(C)))}),_}function R(C=!0){if(C!==!1&&c)return;c=!1;const _=h?h():t;if(_==null||_===!1){v(s,ae(y));return}const E=l!==_r?l:ae(()=>o(_,{value:y(),refetching:C}));return vi(E)?(s=E,"value"in E?(E.status==="success"?v(s,E.value,void 0,_):v(s,void 0,void 0,_),E):(c=!0,queueMicrotask(()=>c=!1),Re(()=>{x(d?"refreshing":"pending"),A()},!1),E.then(P=>v(E,P,void 0,_),P=>v(E,void 0,vo(P),_)))):(v(s,E,void 0,_),E)}return Object.defineProperties(I,{state:{get:()=>p()},error:{get:()=>m()},loading:{get(){const C=p();return C==="pending"||C==="refreshing"}},latest:{get(){if(!d)return I();const C=m();if(C&&!s)throw C;return y()}}}),h?Nr(()=>R(!1)):R(!1),[I,{refetch:R,mutate:b}]}function ho(n,r=ao,e){const t=new Map,o=Lt(i=>{const s=n();for(const[l,c]of t.entries())if(r(l,s)!==r(l,i))for(const d of c.values())d.state=be,d.pure?se.push(d):_e.push(d);return s},void 0,!0,be);return rt(o),i=>{const s=H;if(s){let l;(l=t.get(i))?l.add(s):t.set(i,l=new Set([s])),$e(()=>{l.delete(s),!l.size&&t.delete(i)})}return r(i,o.value)}}function wi(n){return Re(n,!1)}function ae(n){if(H===null)return n();const r=H;H=null;try{return n()}finally{H=r}}function He(n,r,e){const t=Array.isArray(n);let o,i=e&&e.defer;return s=>{let l;if(t){l=Array(n.length);for(let d=0;d<n.length;d++)l[d]=n[d]()}else l=n();if(i)return i=!1,s;const c=ae(()=>r(l,o,s));return o=l,c}}function tt(n){Ye(()=>ae(n))}function $e(n){return $===null||($.cleanups===null?$.cleanups=[n]:$.cleanups.push(n)),n}function Nt(){return $}function uo(n,r){const e=$,t=H;$=n,H=null;try{return Re(r,!0)}catch(o){tn(o)}finally{$=e,H=t}}function bi(n){const r=H,e=$;return Promise.resolve().then(()=>{H=r,$=e;let t;return Re(n,!1),H=$=null,t?t.done:void 0})}function fo(n,r){const e=Symbol("context");return{id:e,Provider:_i(e),defaultValue:n}}function go(n){return $&&$.context&&$.context[n.id]!==void 0?$.context[n.id]:n.defaultValue}function yr(n){const r=te(n),e=te(()=>Lr(r()));return e.toArray=()=>{const t=e();return Array.isArray(t)?t:t!=null?[t]:[]},e}let Si;function po(){if(this.sources&&this.state)if(this.state===be)rt(this);else{const n=se;se=null,Re(()=>lr(this),!1),se=n}if(H){const n=this.observers?this.observers.length:0;H.sources?(H.sources.push(this),H.sourceSlots.push(n)):(H.sources=[this],H.sourceSlots=[n]),this.observers?(this.observers.push(H),this.observerSlots.push(H.sources.length-1)):(this.observers=[H],this.observerSlots=[H.sources.length-1])}return this.value}function mo(n,r,e){let t=n.value;return(!n.comparator||!n.comparator(t,r))&&(n.value=r,n.observers&&n.observers.length&&Re(()=>{for(let o=0;o<n.observers.length;o+=1){const i=n.observers[o],s=Rr&&Rr.running;s&&Rr.disposed.has(i),(s?!i.tState:!i.state)&&(i.pure?se.push(i):_e.push(i),i.observers&&yo(i)),s||(i.state=be)}if(se.length>1e6)throw se=[],new Error},!1)),r}function rt(n){if(!n.fn)return;vr(n);const r=xr;Ai(n,n.value,r)}function Ai(n,r,e){let t;const o=$,i=H;H=$=n;try{t=n.fn(r)}catch(s){return n.pure&&(n.state=be,n.owned&&n.owned.forEach(vr),n.owned=null),n.updatedAt=e+1,tn(s)}finally{H=i,$=o}(!n.updatedAt||n.updatedAt<=e)&&(n.updatedAt!=null&&"observers"in n?mo(n,t):n.value=t,n.updatedAt=e)}function Lt(n,r,e,t=be,o){const i={fn:n,state:t,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:r,owner:$,context:$?$.context:null,pure:e};return $===null||$!==co&&($.owned?$.owned.push(i):$.owned=[i]),i}function ar(n){if(n.state===0)return;if(n.state===sr)return lr(n);if(n.suspense&&ae(n.suspense.inFallback))return n.suspense.effects.push(n);const r=[n];for(;(n=n.owner)&&(!n.updatedAt||n.updatedAt<xr);)n.state&&r.push(n);for(let e=r.length-1;e>=0;e--)if(n=r[e],n.state===be)rt(n);else if(n.state===sr){const t=se;se=null,Re(()=>lr(n,r[0]),!1),se=t}}function Re(n,r){if(se)return n();let e=!1;r||(se=[]),_e?e=!0:_e=[],xr++;try{const t=n();return Ci(e),t}catch(t){e||(_e=null),se=null,tn(t)}}function Ci(n){if(se&&(xo(se),se=null),n)return;const r=_e;_e=null,r.length&&Re(()=>lo(r),!1)}function xo(n){for(let r=0;r<n.length;r++)ar(n[r])}function Ti(n){let r,e=0;for(r=0;r<n.length;r++){const t=n[r];t.user?n[e++]=t:ar(t)}for(r=0;r<e;r++)ar(n[r])}function lr(n,r){n.state=0;for(let e=0;e<n.sources.length;e+=1){const t=n.sources[e];if(t.sources){const o=t.state;o===be?t!==r&&(!t.updatedAt||t.updatedAt<xr)&&ar(t):o===sr&&lr(t,r)}}}function yo(n){for(let r=0;r<n.observers.length;r+=1){const e=n.observers[r];e.state||(e.state=sr,e.pure?se.push(e):_e.push(e),e.observers&&yo(e))}}function vr(n){let r;if(n.sources)for(;n.sources.length;){const e=n.sources.pop(),t=n.sourceSlots.pop(),o=e.observers;if(o&&o.length){const i=o.pop(),s=e.observerSlots.pop();t<o.length&&(i.sourceSlots[s]=t,o[t]=i,e.observerSlots[t]=s)}}if(n.owned){for(r=n.owned.length-1;r>=0;r--)vr(n.owned[r]);n.owned=null}if(n.cleanups){for(r=n.cleanups.length-1;r>=0;r--)n.cleanups[r]();n.cleanups=null}n.state=0}function vo(n){return n instanceof Error?n:new Error(typeof n=="string"?n:"Unknown error",{cause:n})}function tn(n,r=$){throw vo(n)}function Lr(n){if(typeof n=="function"&&!n.length)return Lr(n());if(Array.isArray(n)){const r=[];for(let e=0;e<n.length;e++){const t=Lr(n[e]);Array.isArray(t)?r.push.apply(r,t):r.push(t)}return r}return n}function _i(n,r){return function(t){let o;return Te(()=>o=ae(()=>($.context={...$.context,[n]:t.value},yr(()=>t.children))),void 0),o}}const Ri=Symbol("fallback");function Sn(n){for(let r=0;r<n.length;r++)n[r]()}function Ii(n,r,e={}){let t=[],o=[],i=[],s=0,l=r.length>1?[]:null;return $e(()=>Sn(i)),()=>{let c=n()||[],d,h;return c[xi],ae(()=>{let y=c.length,b,m,w,S,A,p,x,v,T;if(y===0)s!==0&&(Sn(i),i=[],t=[],o=[],s=0,l&&(l=[])),e.fallback&&(t=[Ri],o[0]=ut(I=>(i[0]=I,e.fallback())),s=1);else if(s===0){for(o=new Array(y),h=0;h<y;h++)t[h]=c[h],o[h]=ut(g);s=y}else{for(w=new Array(y),S=new Array(y),l&&(A=new Array(y)),p=0,x=Math.min(s,y);p<x&&t[p]===c[p];p++);for(x=s-1,v=y-1;x>=p&&v>=p&&t[x]===c[v];x--,v--)w[v]=o[x],S[v]=i[x],l&&(A[v]=l[x]);for(b=new Map,m=new Array(v+1),h=v;h>=p;h--)T=c[h],d=b.get(T),m[h]=d===void 0?-1:d,b.set(T,h);for(d=p;d<=x;d++)T=t[d],h=b.get(T),h!==void 0&&h!==-1?(w[h]=o[d],S[h]=i[d],l&&(A[h]=l[d]),h=m[h],b.set(T,h)):i[d]();for(h=p;h<y;h++)h in w?(o[h]=w[h],i[h]=S[h],l&&(l[h]=A[h],l[h](h))):o[h]=ut(g);o=o.slice(0,s=y),t=c.slice(0)}return o});function g(y){if(i[h]=y,l){const[b,m]=W(h);return l[h]=m,r(c[h],b)}return r(c[h])}}}function wo(n,r){return ae(()=>n(r||{}))}function Ut(){return!0}const Mr={get(n,r,e){return r===or?e:n.get(r)},has(n,r){return r===or?!0:n.has(r)},set:Ut,deleteProperty:Ut,getOwnPropertyDescriptor(n,r){return{configurable:!0,enumerable:!0,get(){return n.get(r)},set:Ut,deleteProperty:Ut}},ownKeys(n){return n.keys()}};function Ir(n){return(n=typeof n=="function"?n():n)?n:{}}function Bi(){for(let n=0,r=this.length;n<r;++n){const e=this[n]();if(e!==void 0)return e}}function rn(...n){let r=!1;for(let s=0;s<n.length;s++){const l=n[s];r=r||!!l&&or in l,n[s]=typeof l=="function"?(r=!0,te(l)):l}if(r)return new Proxy({get(s){for(let l=n.length-1;l>=0;l--){const c=Ir(n[l])[s];if(c!==void 0)return c}},has(s){for(let l=n.length-1;l>=0;l--)if(s in Ir(n[l]))return!0;return!1},keys(){const s=[];for(let l=0;l<n.length;l++)s.push(...Object.keys(Ir(n[l])));return[...new Set(s)]}},Mr);const e={},t=Object.create(null);for(let s=n.length-1;s>=0;s--){const l=n[s];if(!l)continue;const c=Object.getOwnPropertyNames(l);for(let d=c.length-1;d>=0;d--){const h=c[d];if(h==="__proto__"||h==="constructor")continue;const g=Object.getOwnPropertyDescriptor(l,h);if(!t[h])t[h]=g.get?{enumerable:!0,configurable:!0,get:Bi.bind(e[h]=[g.get.bind(l)])}:g.value!==void 0?g:void 0;else{const y=e[h];y&&(g.get?y.push(g.get.bind(l)):g.value!==void 0&&y.push(()=>g.value))}}}const o={},i=Object.keys(t);for(let s=i.length-1;s>=0;s--){const l=i[s],c=t[l];c&&c.get?Object.defineProperty(o,l,c):o[l]=c?c.value:void 0}return o}function ki(n,...r){if(or in n){const o=new Set(r.length>1?r.flat():r[0]),i=r.map(s=>new Proxy({get(l){return s.includes(l)?n[l]:void 0},has(l){return s.includes(l)&&l in n},keys(){return s.filter(l=>l in n)}},Mr));return i.push(new Proxy({get(s){return o.has(s)?void 0:n[s]},has(s){return o.has(s)?!1:s in n},keys(){return Object.keys(n).filter(s=>!o.has(s))}},Mr)),i}const e={},t=r.map(()=>({}));for(const o of Object.getOwnPropertyNames(n)){const i=Object.getOwnPropertyDescriptor(n,o),s=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let l=!1,c=0;for(const d of r)d.includes(o)&&(l=!0,s?t[c][o]=i.value:Object.defineProperty(t[c],o,i)),++c;l||(s?e[o]=i.value:Object.defineProperty(e,o,i))}return[...t,e]}const Ei=n=>"Stale read from <".concat(n,">.");function wr(n){const r="fallback"in n&&{fallback:()=>n.fallback};return te(Ii(()=>n.each,n.children,r||void 0))}function Ie(n){const r=n.keyed,e=te(()=>n.when,void 0,{equals:(t,o)=>r?t===o:!t==!o});return te(()=>{const t=e();if(t){const o=n.children;return typeof o=="function"&&o.length>0?ae(()=>o(r?t:()=>{if(!ae(e))throw Ei("Show");return n.when})):o}return n.fallback},void 0,void 0)}const Fi=void 0,[nn,zr]=W(void 0);class bo{constructor(r){u(this,"releaseCallback");this.releaseCallback=r}}class Ni extends bo{constructor(e,t){var o,i;super(e);u(this,"textureMap",new Map);u(this,"zeroReferenceTextureSet",new Set);u(this,"options");this.options={textureCleanupIntervalMs:(o=t.textureCleanupIntervalMs)!=null?o:1e4,textureCleanupAgeThreadholdMs:(i=t.textureCleanupAgeThreadholdMs)!=null?i:6e4},setInterval(()=>{const s=Date.now(),l=this.options.textureCleanupAgeThreadholdMs;for(const c of this.zeroReferenceTextureSet)s-c.lastUpdate>l&&(this.releaseCallback(c.id),this.textureMap.delete(c.id),this.zeroReferenceTextureSet.delete(c))},this.options.textureCleanupIntervalMs)}registerTexture(e){var o;const t=(o=e.options)==null?void 0:o.id;if(F(t,"Texture must have an id to be registered"),!this.textureMap.has(t)){const i={id:t,nodeRefCount:0,lastUpdate:Date.now()};this.textureMap.set(t,i),this.zeroReferenceTextureSet.add(i)}}incrementTextureRefCount(e){var i;const t=(i=e.options)==null?void 0:i.id;F(t,"Texture must have an id to be registered");let o=this.textureMap.get(t);o||(this.registerTexture(e),o=this.textureMap.get(t)),F(o,"Texture must have been registered"),e.txType==="SubTexture"&&this.incrementTextureRefCount(e.props.texture),o.nodeRefCount++,o.lastUpdate=Date.now(),this.zeroReferenceTextureSet.has(o)&&this.zeroReferenceTextureSet.delete(o)}decrementTextureRefCount(e){var i;const t=(i=e.options)==null?void 0:i.id;F(t,"Texture must have an id to be registered");const o=this.textureMap.get(t);F(o,"Texture must have been registered"),o.nodeRefCount--,o.lastUpdate=Date.now(),o.nodeRefCount===0&&this.zeroReferenceTextureSet.add(o),e.txType==="SubTexture"&&this.decrementTextureRefCount(e.props.texture)}}class Li extends bo{constructor(e){super(e);u(this,"registry");this.registry=new FinalizationRegistry(e)}registerTexture(e){var t,o;F((t=e.options)==null?void 0:t.id,"Texture must have an ID to be registered"),this.registry.register(e,(o=e.options)==null?void 0:o.id)}incrementTextureRefCount(){}decrementTextureRefCount(){}}const mt={alpha:n=>n===1?null:{prop:"opacity",value:"".concat(n)},x:n=>({prop:"left",value:"".concat(n,"px")}),y:n=>({prop:"top",value:"".concat(n,"px")}),width:n=>n===0?null:{prop:"width",value:"".concat(n,"px")},height:n=>n===0?null:{prop:"height",value:"".concat(n,"px")},zIndex:()=>"zIndex",fontFamily:()=>"font-family",fontSize:()=>"font-size",fontStyle:()=>"font-style",fontWeight:()=>"font-weight",fontStretch:()=>"font-stretch",lineHeight:()=>"line-height",letterSpacing:()=>"letter-spacing",textAlign:()=>"text-align",overflowSuffix:()=>"overflow-suffix",maxLines:()=>"max-lines",contain:()=>"contain",verticalAlign:()=>"vertical-align",clipping:n=>n===!1?null:{prop:"overflow",value:n?"hidden":"visible"},rotation:n=>n===0?null:{prop:"transform",value:"rotate(".concat(n,"rad)")},scale:n=>n===1?null:{prop:"transform",value:"scale(".concat(n,")")},scaleX:n=>n===1?null:{prop:"transform",value:"scaleX(".concat(n,")")},scaleY:n=>n===1?null:{prop:"transform",value:"scaleY(".concat(n,")")},color:n=>n===0?null:{prop:"color",value:So(n)}},So=n=>{const r=(n&255)/255,e=n>>8&255,t=n>>16&255,o=n>>24&255;return"rgba(".concat(o,",").concat(t,",").concat(e,",").concat(r,")")},Mi={id:"id"};class zi{constructor(r,e){u(this,"root",null);u(this,"canvas",null);u(this,"height",1080);u(this,"width",1920);u(this,"scaleX",1);u(this,"scaleY",1);var i,s,l,c,d,h;if(no())return;if(!e)throw new Error("settings is required");this.height=Math.ceil((s=e.appHeight)!=null?s:1080/((i=e.deviceLogicalPixelRatio)!=null?i:1)),this.width=Math.ceil((c=e.appWidth)!=null?c:1900/((l=e.deviceLogicalPixelRatio)!=null?l:1)),this.scaleX=(d=e.deviceLogicalPixelRatio)!=null?d:1,this.scaleY=(h=e.deviceLogicalPixelRatio)!=null?h:1,this.canvas=r,this.root=document.createElement("div"),this.setRootPosition(),document.body.appendChild(this.root),new MutationObserver(this.setRootPosition.bind(this)).observe(r,{attributes:!0,childList:!1,subtree:!1}),new ResizeObserver(this.setRootPosition.bind(this)).observe(r),window.addEventListener("resize",this.setRootPosition.bind(this)),console.warn("Inspector is enabled, this will impact performance")}setRootPosition(){if(this.root===null||this.canvas===null)return;const r=this.canvas.getBoundingClientRect(),e=document.documentElement.scrollTop+r.top,t=document.documentElement.scrollLeft+r.left;this.root.id="root",this.root.style.left="".concat(t,"px"),this.root.style.top="".concat(e,"px"),this.root.style.width="".concat(this.width,"px"),this.root.style.height="".concat(this.height,"px"),this.root.style.position="absolute",this.root.style.transformOrigin="0 0 0",this.root.style.transform="scale(".concat(this.scaleX,", ").concat(this.scaleY,")"),this.root.style.overflow="hidden",this.root.style.zIndex="65534"}createDiv(r,e){const t=document.createElement("div");t.style.position="absolute",t.id=r.id.toString();for(const o in e)this.updateNodeProperty(t,o,e[o]);return t}createNode(r,e){const t=r.createNode(e),o=this.createDiv(t,e);return o.node=t,t.div=o,this.createProxy(t,o)}createTextNode(r,e){const t=r.createTextNode(e),o=this.createDiv(t,e);return this.createProxy(t,o)}createProxy(r,e){return new Proxy(r,{set:(t,o,i)=>(this.updateNodeProperty(e,o,i),Reflect.set(t,o,i)),get:(t,o,i)=>(o==="destroy"&&this.destroyNode(t),o==="animate"?(s,l)=>{const c=t.animate(s,l);return new Proxy(c,{get:(d,h,g)=>(h==="start"&&this.animateNode(e,r,s,l),Reflect.get(d,h,g))})}:Reflect.get(t,o,i))})}destroyNode(r){const e=document.getElementById(r.id.toString());e==null||e.remove()}updateNodeProperty(r,e,t){var o;if(!(this.root===null||t===void 0||t===null)){if(e==="parent"){const i=t.id;if(i===1){this.root.appendChild(r);return}const s=document.getElementById(i.toString());s==null||s.appendChild(r);return}if(e==="text"){r.innerHTML=String(t),r.style.visibility="hidden";return}if(e==="src"&&t){r.setAttribute("data-src",String(t));return}if(mt[e]){const i=(o=mt[e])==null?void 0:o.call(mt,t);if(i===null)return;if(typeof i=="string"){r.style.setProperty(i,String(t));return}typeof i=="object"&&r.style.setProperty(i.prop,i.value);return}if(Mi[e]){r.setAttribute(String(mt[e]),String(t));return}if(e==="data"){for(const i in t)r.setAttribute("data-".concat(i),String(t[i]));return}}}animateNode(r,e,t,o){const{duration:i=1e3,delay:s=0}=o,{x:l,y:c,width:d,height:h,alpha:g=1,rotation:y=0,scale:b=1,color:m}=t;function w(){setTimeout(()=>{r.style.top="".concat(c,"px"),r.style.left="".concat(l,"px"),r.style.width="".concat(d,"px"),r.style.height="".concat(h,"px"),r.style.opacity="".concat(g),r.style.rotate="".concat(y,"rad"),r.style.scale="".concat(b),r.style.color=So(m)},i)}setTimeout(w,s)}}const Pi="modulepreload",Di=function(n){return"/solid-demo-app/"+n},An={},Oi=function(r,e,t){let o=Promise.resolve();if(e&&e.length>0){const i=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),l=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));o=Promise.all(e.map(c=>{if(c=Di(c),c in An)return;An[c]=!0;const d=c.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(!!t)for(let b=i.length-1;b>=0;b--){const m=i[b];if(m.href===c&&(!d||m.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(c,'"]').concat(h)))return;const y=document.createElement("link");if(y.rel=d?"stylesheet":Pi,d||(y.as="script",y.crossOrigin=""),y.href=c,l&&y.setAttribute("nonce",l),document.head.appendChild(y),d)return new Promise((b,m)=>{y.addEventListener("load",b),y.addEventListener("error",()=>m(new Error("Unable to preload CSS for ".concat(c))))})}))}return o.then(()=>r()).catch(i=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i})};class oe{constructor(r){u(this,"priority",1);u(this,"name","");u(this,"ref");u(this,"target");u(this,"passParameters","");u(this,"declaredUniforms","");u(this,"uniformInfo",{});const{ref:e,target:t,props:o={}}=r;this.ref=e,this.target=t;const i={},s=[];let l="";const c=this.constructor.uniforms||{};for(const d in c){const h=c[d],g=h.type,y="".concat(e,"_").concat(d);let b="";h.size&&(b="[".concat(h.size(o),"]")),s.push(y),l+="uniform ".concat(g," ").concat(y).concat(b,";"),i[d]={name:y,uniform:c[d].method}}this.passParameters=s.join(","),this.declaredUniforms=l,this.uniformInfo=i}static getEffectKey(r){return""}static getMethodParameters(r,e){const t=[];for(const o in r){const i=r[o];let s="";i.size&&(s="[".concat(i.size(e),"]")),t.push("".concat(i.type," ").concat(o).concat(s))}return t.join(",")}static resolveDefaults(r){return{}}static makeEffectKey(r){return!1}}u(oe,"uniforms",{}),u(oe,"methods"),u(oe,"onShaderMask"),u(oe,"onColorize"),u(oe,"onEffectMask");const Ui={x:(n,r)=>{n.props.x=r},y:(n,r)=>{n.props.y=r},width:(n,r)=>{n.props.width=r},height:(n,r)=>{n.props.height=r},color:(n,r)=>{n.props.color=r},zIndex:(n,r)=>{n.props.zIndex=r},fontFamily:(n,r)=>{n.props.fontFamily=r},fontWeight:(n,r)=>{n.props.fontWeight=r},fontStyle:(n,r)=>{n.props.fontStyle=r},fontStretch:(n,r)=>{n.props.fontStretch=r},fontSize:(n,r)=>{n.props.fontSize=r},text:(n,r)=>{n.props.text=r},textAlign:(n,r)=>{n.props.textAlign=r},contain:(n,r)=>{n.props.contain=r},offsetY:(n,r)=>{n.props.offsetY=r},scrollable:(n,r)=>{n.props.scrollable=r},scrollY:(n,r)=>{n.props.scrollY=r},letterSpacing:(n,r)=>{n.props.letterSpacing=r},lineHeight:(n,r)=>{n.props.lineHeight=r},maxLines:(n,r)=>{n.props.maxLines=r},textBaseline:(n,r)=>{n.props.textBaseline=r},verticalAlign:(n,r)=>{n.props.verticalAlign=r},overflowSuffix:(n,r)=>{n.props.overflowSuffix=r},debug:(n,r)=>{n.props.debug=r}};class Ao{constructor(r){u(this,"stage");u(this,"set");this.stage=r;const e={...Ui,...this.getPropertySetters()};this.set=Object.freeze(Object.fromEntries(Object.entries(e).map(([t,o])=>[t,(i,s)=>{i.props[t]!==s&&(o(i,s),this.stage.requestRender())}])))}setStatus(r,e,t){r.status!==e&&(r.status=e,r.emitter.emit(e,t))}setIsRenderable(r,e){r.isRenderable=e}destroyState(r){["loading","loaded","failed"].forEach(t=>{r.emitter.off(t)})}scheduleUpdateState(r){r.updateScheduled||(r.updateScheduled=!0,queueMicrotask(()=>{r.updateScheduled=!1,this.updateState(r)}))}}const Cn=2048;function Tn(n,r,e,t,o){const i=n!=="bottom"?.5*r:0;return e*(t-1)+i+Math.max(e,r)+(o||0)}class Wi{constructor(r,e){u(this,"_canvas");u(this,"_context");u(this,"_settings");u(this,"renderInfo");this._canvas=r,this._context=e,this._settings=this.mergeDefaults({})}set settings(r){this._settings=this.mergeDefaults(r)}get settings(){return this._settings}getPrecision(){return this._settings.precision}setFontProperties(){this._context.font=this._getFontSetting(),this._context.textBaseline=this._settings.textBaseline}_getFontSetting(){const r=[this._settings.fontFace],e=[];for(let t=0,o=r.length;t<o;t++)r[t]==="serif"||r[t]==="sans-serif"?e.push(r[t]):e.push('"'.concat(r[t],'"'));return"".concat(this._settings.fontStyle," ").concat(this._settings.fontSize*this.getPrecision(),"px ").concat(e.join(","))}_load(){if(document.fonts){const r=this._getFontSetting();try{if(!document.fonts.check(r,this._settings.text))return document.fonts.load(r,this._settings.text).catch(e=>{console.warn("[Lightning] Font load error",e,r)}).then(()=>{document.fonts.check(r,this._settings.text)||console.warn("[Lightning] Font not found",r)})}catch(e){console.warn("[Lightning] Can't check font loading for "+r)}}}calculateRenderInfo(){const r={},e=this.getPrecision(),t=this._settings.paddingLeft*e,o=this._settings.paddingRight*e,i=this._settings.fontSize*e;let s=this._settings.offsetY===null?null:this._settings.offsetY*e,l=(this._settings.lineHeight||i)*e;const c=this._settings.w*e,d=this._settings.h*e;let h=this._settings.wordWrapWidth*e;const g=this._settings.cutSx*e,y=this._settings.cutEx*e,b=this._settings.cutSy*e,m=this._settings.cutEy*e,w=(this._settings.letterSpacing||0)*e,S=this._settings.textIndent*e;this.setFontProperties();let A=c||2048/this.getPrecision(),p=A-t;if(p<10&&(A+=10-p,p=10),h||(h=p),this._settings.textOverflow&&!this._settings.wordWrap){let C;switch(this._settings.textOverflow){case"clip":C="";break;case"ellipsis":C=this._settings.overflowSuffix;break;default:C=this._settings.textOverflow}this._settings.text=this.wrapWord(this._settings.text,h-S,C)}let x;if(this._settings.wordWrap)x=this.wrapText(this._settings.text,h,w,S);else{x={l:this._settings.text.split(/(?:\r\n|\r|\n)/),n:[]};const C=x.l.length;for(let _=0;_<C-1;_++)x.n.push(_)}let v=x.l;if(this._settings.maxLines&&v.length>this._settings.maxLines){const C=v.slice(0,this._settings.maxLines);let _=null;if(this._settings.overflowSuffix){const O=this._settings.overflowSuffix?this.measureText(this._settings.overflowSuffix):0,D=this.wrapText(C[C.length-1],h-O,w,S);C[C.length-1]="".concat(D.l[0]).concat(this._settings.overflowSuffix),_=[D.l.length>1?D.l[1]:""]}else _=[""];let E;const P=v.length;let k=0;const L=x.n.length;for(E=this._settings.maxLines;E<P;E++)_[k]+="".concat(_[k]?" ":"").concat(v[E]),E+1<L&&x.n[E+1]&&k++;r.remainingText=_.join("\n"),r.moreTextLines=!0,v=C}else r.moreTextLines=!1,r.remainingText="";let T=0;const I=[];for(let C=0;C<v.length;C++){const _=this.measureText(v[C],w)+(C===0?S:0);I.push(_),T=Math.max(T,_)}r.lineWidths=I,c||(A=T+t+o,p=T),l=l||i;let R;return d?R=d:R=Tn(this._settings.textBaseline,i,l,v.length,s),s===null&&(s=i),r.w=A,r.h=R,r.lines=v,r.precision=e,A||(A=1),R||(R=1),(g||y)&&(A=Math.min(A,y-g)),(b||m)&&(R=Math.min(R,m-b)),r.width=A,r.innerWidth=p,r.height=R,r.fontSize=i,r.cutSx=g,r.cutSy=b,r.cutEx=y,r.cutEy=m,r.lineHeight=l,r.lineWidths=I,r.offsetY=s,r.paddingLeft=t,r.paddingRight=o,r.letterSpacing=w,r.textIndent=S,r}draw(r,e){const t=this.getPrecision(),o=(e==null?void 0:e.lines)||r.lines,i=(e==null?void 0:e.lineWidths)||r.lineWidths,s=e?Tn(this._settings.textBaseline,r.fontSize,r.lineHeight,e.lines.length,this._settings.offsetY===null?null:this._settings.offsetY*t):r.height;this._canvas.width=Math.min(Math.ceil(r.width+this._settings.textRenderIssueMargin),Cn),this._canvas.height=Math.min(Math.ceil(s),Cn),this.setFontProperties(),r.fontSize>=128&&(this._context.globalAlpha=.01,this._context.fillRect(0,0,.01,.01),this._context.globalAlpha=1),(r.cutSx||r.cutSy)&&this._context.translate(-r.cutSx,-r.cutSy);let l,c;const d=[];for(let g=0,y=o.length;g<y;g++)l=g===0?r.textIndent:0,c=g*r.lineHeight+r.offsetY,this._settings.verticalAlign=="middle"?c+=(r.lineHeight-r.fontSize)/2:this._settings.verticalAlign=="bottom"&&(c+=r.lineHeight-r.fontSize),this._settings.textAlign==="right"?l+=r.innerWidth-i[g]:this._settings.textAlign==="center"&&(l+=(r.innerWidth-i[g])/2),l+=r.paddingLeft,d.push({text:o[g],x:l,y:c,w:i[g]});if(this._settings.highlight){const g=this._settings.highlightColor,y=this._settings.highlightHeight*t||r.fontSize*1.5,b=this._settings.highlightOffset*t,m=this._settings.highlightPaddingLeft!==null?this._settings.highlightPaddingLeft*t:r.paddingLeft,w=this._settings.highlightPaddingRight!==null?this._settings.highlightPaddingRight*t:r.paddingRight;this._context.fillStyle=Cr(g);for(let S=0;S<d.length;S++){const A=d[S];this._context.fillRect(A.x-m,A.y-r.offsetY+b,A.w+w+m,y)}}let h=null;this._settings.shadow&&(h=[this._context.shadowColor,this._context.shadowOffsetX,this._context.shadowOffsetY,this._context.shadowBlur],this._context.shadowColor=Cr(this._settings.shadowColor),this._context.shadowOffsetX=this._settings.shadowOffsetX*t,this._context.shadowOffsetY=this._settings.shadowOffsetY*t,this._context.shadowBlur=this._settings.shadowBlur*t),this._context.fillStyle=Cr(this._settings.textColor);for(let g=0,y=d.length;g<y;g++){const b=d[g];if(r.letterSpacing===0)this._context.fillText(b.text,b.x,b.y);else{const m=b.text.split("");let w=b.x;for(let S=0,A=m.length;S<A;S++)this._context.fillText(m[S],w,b.y),w+=this.measureText(m[S],r.letterSpacing)}}h&&(this._context.shadowColor=h[0],this._context.shadowOffsetX=h[1],this._context.shadowOffsetY=h[2],this._context.shadowBlur=h[3]),(r.cutSx||r.cutSy)&&this._context.translate(r.cutSx,r.cutSy),this.renderInfo=r}wrapWord(r,e,t){const o=this._context.measureText(t).width,i=r.length,s=this._context.measureText(r).width;if(s<=e)return r;let l=Math.floor(e*i/s),c=this._context.measureText(r.substring(0,l)).width+o;if(c>e)for(;l>0&&(c=this._context.measureText(r.substring(0,l)).width+o,c>e);)l-=1;else for(;l<i;)if(c=this._context.measureText(r.substring(0,l)).width+o,c<e)l+=1;else{l-=1;break}return r.substring(0,l)+(e>=o?t:"")}wrapText(r,e,t,o=0){const i=r.split(/\r?\n/g);let s=[];const l=[];for(let c=0;c<i.length;c++){const d=[];let h="",g=e-o;const y=i[c].split(" ");for(let b=0;b<y.length;b++){const m=this.measureText(y[b],t),w=m+this.measureText(" ",t);b===0||w>g?(b>0&&(d.push(h),h=""),h+=y[b],g=e-m-(b===0?o:0)):(g-=w,h+=" ".concat(y[b]))}d.push(h),h="",s=s.concat(d),c<i.length-1&&l.push(s.length)}return{l:s,n:l}}measureText(r,e=0){return e?r.split("").reduce((t,o)=>t+this._context.measureText(o).width+e,0):this._context.measureText(r).width}mergeDefaults(r){return{text:"",w:0,h:0,fontStyle:"normal",fontSize:40,fontFace:null,wordWrap:!0,wordWrapWidth:0,wordBreak:!1,textOverflow:"",lineHeight:null,textBaseline:"alphabetic",textAlign:"left",verticalAlign:"top",offsetY:null,maxLines:0,overflowSuffix:"...",textColor:[1,1,1,1],paddingLeft:0,paddingRight:0,shadow:!1,shadowColor:[0,0,0,1],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:5,highlight:!1,highlightHeight:0,highlightColor:[0,0,0,1],highlightOffset:0,highlightPaddingLeft:0,highlightPaddingRight:0,letterSpacing:0,textIndent:0,cutSx:0,cutEx:0,cutSy:0,cutEy:0,advancedRenderer:!1,fontBaselineRatio:0,precision:1,textRenderIssueMargin:0,...r}}}const _n=typeof self>"u"?globalThis:self;var ro;const Rn=((ro=_n.document)==null?void 0:ro.fonts)||_n.fonts;function Yi(n){const{fontFamily:r,fontStyle:e,fontWeight:t,fontStretch:o,fontSize:i}=n;return[e,t,o,"".concat(i,"px"),r].join(" ")}const $i=dt(0,0,0,0);class Hi extends Ao{constructor(e){super(e);u(this,"canvas");u(this,"context");u(this,"rendererBounds");typeof OffscreenCanvas<"u"?this.canvas=new OffscreenCanvas(0,0):this.canvas=document.createElement("canvas");let t=this.canvas.getContext("2d");t||(this.canvas=document.createElement("canvas"),t=this.canvas.getContext("2d")),F(t),this.context=t,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,t)=>{e.props.fontFamily=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontWeight:(e,t)=>{e.props.fontWeight=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStyle:(e,t)=>{e.props.fontStyle=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontStretch:(e,t)=>{e.props.fontStretch=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},fontSize:(e,t)=>{e.props.fontSize=t,e.fontInfo=void 0,this.invalidateLayoutCache(e)},text:(e,t)=>{e.props.text=t,this.invalidateLayoutCache(e)},textAlign:(e,t)=>{e.props.textAlign=t,this.invalidateLayoutCache(e)},color:(e,t)=>{e.props.color=t,this.invalidateLayoutCache(e)},x:(e,t)=>{e.props.x=t,this.invalidateVisibleWindowCache(e)},y:(e,t)=>{e.props.y=t,this.invalidateVisibleWindowCache(e)},contain:(e,t)=>{e.props.contain=t,this.invalidateLayoutCache(e)},width:(e,t)=>{e.props.width=t,e.props.contain!=="none"&&this.invalidateLayoutCache(e)},height:(e,t)=>{e.props.height=t,e.props.contain==="both"&&this.invalidateLayoutCache(e)},offsetY:(e,t)=>{e.props.offsetY=t,this.invalidateLayoutCache(e)},scrollY:(e,t)=>{e.props.scrollY=t},letterSpacing:(e,t)=>{e.props.letterSpacing=t,this.invalidateLayoutCache(e)},lineHeight:(e,t)=>{e.props.lineHeight=t,this.invalidateLayoutCache(e)},maxLines:(e,t)=>{e.props.maxLines=t,this.invalidateLayoutCache(e)},textBaseline:(e,t)=>{e.props.textBaseline=t,this.invalidateLayoutCache(e)},verticalAlign:(e,t)=>{e.props.verticalAlign=t,this.invalidateLayoutCache(e)},overflowSuffix:(e,t)=>{e.props.overflowSuffix=t,this.invalidateLayoutCache(e)}}}canRenderFont(e){return!0}isFontFaceSupported(e){return e instanceof yn}addFontFace(e){F(e instanceof yn),Rn.add(e.fontFace)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new et,canvasPages:void 0,lightning2TextRenderer:new Wi(this.canvas,this.context),renderWindow:void 0,visibleWindow:{x1:0,y1:0,x2:0,y2:0,valid:!1},renderInfo:void 0,forceFullLayoutCalc:!1,textW:0,textH:0,fontInfo:void 0,fontFaceLoadedHandler:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,drawCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,bufferSize:0}}}updateState(e){var m,w;if(e.status==="initialState"&&this.setStatus(e,"loading"),!e.fontInfo){const S=Yi(e.props);if(e.fontInfo={cssString:S,loaded:!1},!e.fontInfo.loaded){Rn.load(S).then(this.onFontLoaded.bind(this,e,S)).catch(this.onFontLoadError.bind(this,e,S));return}}if(!e.fontInfo.loaded)return;if(!e.renderInfo){const S=e.props.maxLines,A=e.props.contain==="both"?Math.floor((e.props.height-e.props.offsetY)/e.props.lineHeight):0,p=A>0&&S>0?Math.min(A,S):Math.max(A,S);e.lightning2TextRenderer.settings={text:e.props.text,textAlign:e.props.textAlign,fontFace:e.props.fontFamily,fontSize:e.props.fontSize,fontStyle:[e.props.fontStretch,e.props.fontStyle,e.props.fontWeight].join(" "),textColor:Be(e.props.color),offsetY:e.props.fontSize+e.props.offsetY,wordWrap:e.props.contain!=="none",wordWrapWidth:e.props.contain==="none"?void 0:e.props.width,letterSpacing:e.props.letterSpacing,lineHeight:e.props.lineHeight,maxLines:p,textBaseline:e.props.textBaseline,verticalAlign:e.props.verticalAlign,overflowSuffix:e.props.overflowSuffix},e.renderInfo=e.lightning2TextRenderer.calculateRenderInfo(),e.textH=e.renderInfo.lineHeight*e.renderInfo.lines.length,e.textW=e.renderInfo.width,e.renderWindow=void 0}const{x:t,y:o,width:i,height:s,scrollY:l,contain:c}=e.props,{visibleWindow:d}=e;let{renderWindow:h,canvasPages:g}=e;if(!d.valid){const S=dt(t,o,c!=="none"?t+i:1/0,c==="both"?o+s:1/0,$i);ii(this.rendererBounds,S,d),d.valid=!0}const y=d.y2-d.y1,b=Math.ceil(y/e.renderInfo.lineHeight);if(y===0){g=void 0,h=void 0,this.setStatus(e,"loaded");return}else if(h&&g){const S=t+h.x1,A=o-l+h.y1,p=t+h.x2,x=o-l+h.y2;if(S<=d.x1&&p>=d.x2&&A<=d.y1&&x>=d.y2){this.setStatus(e,"loaded");return}x<d.y2?(h.y1+=b*e.renderInfo.lineHeight,h.y2+=b*e.renderInfo.lineHeight,g.push(g.shift()),g[2].lineNumStart=g[1].lineNumStart+b,g[2].lineNumEnd=g[2].lineNumStart+b,g[2].valid=!1):A>d.y1&&(h.y1-=b*e.renderInfo.lineHeight,h.y2-=b*e.renderInfo.lineHeight,g.unshift(g.pop()),g[0].lineNumStart=g[1].lineNumStart-b,g[0].lineNumEnd=g[0].lineNumStart+b,g[0].valid=!1)}else{const S=e.renderInfo.lineHeight*b,A=Math.ceil(l/S),p=A*b,x=p-b,v=p+b;g=[{texture:g==null?void 0:g[0].texture,lineNumStart:x,lineNumEnd:x+b,valid:!1},{texture:g==null?void 0:g[1].texture,lineNumStart:p,lineNumEnd:p+b,valid:!1},{texture:g==null?void 0:g[2].texture,lineNumStart:v,lineNumEnd:v+b,valid:!1}],e.canvasPages=g;const T=A*S;h={x1:0,y1:T-S,x2:i,y2:T+S*2}}e.renderWindow=h,performance.now();for(const S of g)if(!S.valid){if(S.lineNumStart<0){(m=S.texture)==null||m.setRenderableOwner(e,!1),S.texture=this.stage.txManager.loadTexture("ImageTexture",{src:""}),S.texture.setRenderableOwner(e,e.isRenderable),S.valid=!0;continue}e.lightning2TextRenderer.draw(e.renderInfo,{lines:e.renderInfo.lines.slice(S.lineNumStart,S.lineNumEnd),lineWidths:e.renderInfo.lineWidths.slice(S.lineNumStart,S.lineNumEnd)}),this.canvas.width===0||this.canvas.height===0||((w=S.texture)==null||w.setRenderableOwner(e,!1),S.texture=this.stage.txManager.loadTexture("ImageTexture",{src:this.context.getImageData(0,0,this.canvas.width,this.canvas.height)},{preload:!0}),S.texture.setRenderableOwner(e,e.isRenderable)),S.valid=!0}this.setStatus(e,"loaded")}renderQuads(e,t,o,i){var C,_,E,P,k,L,O,D,U,j,ie,ee;const{stage:s}=this,{canvasPages:l,textW:c=0,textH:d=0,renderWindow:h}=e;if(!l||!h)return;const{x:g,y,scrollY:b,contain:m,width:w,height:S}=e.props,A={x:g,y,width:m!=="none"?w:c,height:m==="both"?S:d};en({x:0,y:0,width:s.options.appWidth,height:s.options.appHeight},A),F(l,"canvasPages is not defined"),F(h,"renderWindow is not defined");const x=(h.y2-h.y1)/3,{zIndex:v,color:T}=e.props,I=i*si(T),R=bt(4294967295,I);l[0].valid&&this.stage.renderer.addQuad({alpha:I,clippingRect:o,colorBl:R,colorBr:R,colorTl:R,colorTr:R,width:((_=(C=l[0].texture)==null?void 0:C.dimensions)==null?void 0:_.width)||0,height:((P=(E=l[0].texture)==null?void 0:E.dimensions)==null?void 0:P.height)||0,texture:l[0].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:v,tx:t.tx,ty:t.ty-b+h.y1,ta:t.ta,tb:t.tb,tc:t.tc,td:t.td}),l[1].valid&&this.stage.renderer.addQuad({alpha:I,clippingRect:o,colorBl:R,colorBr:R,colorTl:R,colorTr:R,width:((L=(k=l[1].texture)==null?void 0:k.dimensions)==null?void 0:L.width)||0,height:((D=(O=l[1].texture)==null?void 0:O.dimensions)==null?void 0:D.height)||0,texture:l[1].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:v,tx:t.tx,ty:t.ty-b+h.y1+x,ta:t.ta,tb:t.tb,tc:t.tc,td:t.td}),l[2].valid&&this.stage.renderer.addQuad({alpha:I,clippingRect:o,colorBl:R,colorBr:R,colorTl:R,colorTr:R,width:((j=(U=l[2].texture)==null?void 0:U.dimensions)==null?void 0:j.width)||0,height:((ee=(ie=l[2].texture)==null?void 0:ie.dimensions)==null?void 0:ee.height)||0,texture:l[2].texture,textureOptions:{},shader:null,shaderProps:null,zIndex:v,tx:t.tx,ty:t.ty-b+h.y1+x+x,ta:t.ta,tb:t.tb,tc:t.tc,td:t.td})}setIsRenderable(e,t){var o;super.setIsRenderable(e,t),(o=e.canvasPages)==null||o.forEach(i=>{var s;(s=i.texture)==null||s.setRenderableOwner(e,t)})}destroyState(e){var t;(t=e.canvasPages)==null||t.forEach(o=>{var i;(i=o.texture)==null||i.setRenderableOwner(e,!1)})}invalidateVisibleWindowCache(e){e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}invalidateLayoutCache(e){e.renderInfo=void 0,e.visibleWindow.valid=!1,this.setStatus(e,"loading"),this.scheduleUpdateState(e)}onFontLoaded(e,t){var o;t!==((o=e.fontInfo)==null?void 0:o.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,this.scheduleUpdateState(e))}onFontLoadError(e,t,o){var i;t!==((i=e.fontInfo)==null?void 0:i.cssString)||!e.fontInfo||(e.fontInfo.loaded=!0,console.error("CanvasTextRenderer: Error loading font '".concat(e.fontInfo.cssString,"'"),o),this.scheduleUpdateState(e))}}class Co extends Ft{constructor(r){super({renderer:r,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"}]})}bindTextures(r){const{glw:e}=this;e.activeTexture(0),e.bindTexture(r[0].ctxTexture)}}u(Co,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n          vec4 color = texture2D(u_texture, v_textureCoordinate);\n          gl_FragColor = vec4(v_color) * texture2D(u_texture, v_textureCoordinate);\n      }\n    "});class To extends Ft{constructor(e){super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color","a_textureIndex"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_textures[0]",uniform:"uniform1iv"}]});u(this,"supportsIndexedTextures",!0)}bindTextures(e){const{renderer:t,glw:o}=this;if(e.length>t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS)throw new Error("DefaultShaderBatched: Cannot bind more than ".concat(t.system.parameters.MAX_VERTEX_TEXTURE_IMAGE_UNITS," textures"));e.forEach((s,l)=>{o.activeTexture(l),o.bindTexture(s.ctxTexture)});const i=Array.from(Array(e.length).keys());this.setUniform("u_textures[0]",i)}}u(To,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_textureCoordinate;\n      attribute vec2 a_position;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      void main(){\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n        v_textureIndex = a_textureIndex;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:e=>"\n      #define txUnits ".concat(e,"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform sampler2D u_image;\n      uniform sampler2D u_textures[txUnits];\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n      varying float v_textureIndex;\n\n      vec4 sampleFromTexture(sampler2D textures[").concat(e,"], int idx, vec2 uv) {\n        ").concat(Array.from(Array(e).keys()).map(t=>"\n          ".concat(t!==0?"else ":"","if (idx == ").concat(t,") {\n            return texture2D(textures[").concat(t,"], uv);\n          }\n        ")).join(""),"\n        return texture2D(textures[0], uv);\n      }\n\n      void main(){\n        gl_FragColor = vec4(v_color) * sampleFromTexture(u_textures, int(v_textureIndex), v_textureCoordinate);\n      }\n    ")});const Br=new Map,ji=(n,r)=>{const e=JSON.stringify(n);if(Br.has(e))return Br.get(e);const t=(n!=null?n:[]).map(o=>({type:o.type,props:r[o.type].resolveDefaults(o.props||{})}));return Br.set(e,t),t},Ee=class Ee extends Ft{constructor(e,t,o){const i=Ee.createShader(t,o);super({renderer:e,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2fv"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_alpha",uniform:"uniform1f"},...i.uniforms],shaderSources:{vertex:i.vertex,fragment:i.fragment}});u(this,"effects",[]);this.effects=i.effects,this.calculateProps=oo(this.calculateProps.bind(this))}bindTextures(e){const{glw:t}=this;t.activeTexture(0),t.bindTexture(e[0].ctxTexture)}calculateProps(e){const t=this.renderer.shManager.getRegisteredEffects(),o=[];return e==null||e.forEach((i,s)=>{var g;const l=this.effects[s],c=t[l.name],d=(g=i.props)!=null?g:{},h=l.uniformInfo;Object.keys(d).forEach(y=>{const b=c.uniforms[y],m=h[y];let w=b.validator?b.validator(d[y],d):d[y];Array.isArray(w)&&(w=new Float32Array(w)),o.push({name:m.name,value:w})})}),o}bindProps(e){this.calculateProps(e.effects).forEach(o=>{this.setUniform(o.name,o.value)})}static createShader(e,t){const o={},i={};let s="";const l=[],c=[],d=e.effects.map(m=>{const w=t[m.type],S=w.getEffectKey(m.props||{});o[S]=o[S]?++o[S]:1;const A=o[S];A===1&&c.push({key:S,type:m.type,props:m.props});const p=new w({ref:"".concat(S).concat(A===1?"":A),target:S,props:m.props});return s+=p.declaredUniforms,l.push(...Object.values(p.uniformInfo)),p});let h="";c==null||c.forEach(m=>{var R;const w=t[m.type],S=w.resolveDefaults((R=m.props)!=null?R:{}),A=[];for(const C in w.methods){let _=C;const E=w.methods[C];i[C]&&i[C]!==E&&(_=Ee.resolveMethodDuplicate(C,E,i)),i[_]=E.replace("function",_),A.push({m:C,cm:_})}let p=w.onShaderMask instanceof Function?w.onShaderMask(S):w.onShaderMask,x=w.onColorize instanceof Function?w.onColorize(S):w.onColorize,v=w.onEffectMask instanceof Function?w.onEffectMask(S):w.onEffectMask;A.forEach(C=>{const{m:_,cm:E}=C,P=new RegExp("\\$".concat(_),"g");p&&(p=p.replace(P,E)),x&&(x=x.replace(P,E)),v&&(v=v.replace(P,E))});const T=w.getMethodParameters(w.uniforms,S),I=T.length>0?", ".concat(T):"";p&&(h+="\n        float fx_".concat(m.key,"_onShaderMask(float shaderMask ").concat(I,") {\n          ").concat(p,"\n        }\n        ")),x&&(h+="\n          vec4 fx_".concat(m.key,"_onColorize(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(I,") {\n            ").concat(x,"\n          }\n        ")),v&&(h+="\n          vec4 fx_".concat(m.key,"_onEffectMask(float shaderMask, vec4 maskColor, vec4 shaderColor").concat(I,") {\n            ").concat(v,"\n          }\n        "))});let g="";for(const m in i)g+=i[m];let y="mix(shaderColor, maskColor, clamp(-(lng_DefaultMask), 0.0, 1.0))",b="\n\n    ";for(let m=0;m<d.length;m++){const w=d[m],S=w.passParameters.length>0?", ".concat(w.passParameters):"",A=t[w.name];A.onShaderMask&&(b+="\n        shaderMask = fx_".concat(w.target,"_onShaderMask(shaderMask ").concat(S,");\n        ")),A.onColorize&&(b+="\n        maskColor = fx_".concat(w.target,"_onColorize(shaderMask, maskColor, shaderColor").concat(S,");\n        ")),A.onEffectMask&&(y="fx_".concat(w.target,"_onEffectMask(shaderMask, maskColor, shaderColor").concat(S,")"));const p=d[m+1];(p===void 0||t[p.name].onEffectMask)&&(b+="\n          shaderColor = ".concat(y,";\n        "))}return{effects:d,uniforms:l,fragment:Ee.fragment(s,g,h,b),vertex:Ee.vertex()}}static resolveMethodDuplicate(e,t,o,i=0){const s=e+(i>0?i:"");return o[s]&&o[s]!==t?this.resolveMethodDuplicate(e,t,o,++i):s}static resolveDefaults(e,t){return{effects:ji(e.effects,t),$dimensions:{width:0,height:0},$alpha:0}}static makeCacheKey(e,t){var i;let o="";return(i=e.effects)==null||i.forEach(s=>{const c=t[s.type].getEffectKey(s.props||{});o+=",".concat(c)}),"DynamicShader".concat(o)}};u(Ee,"z$__type__Props"),u(Ee,"vertex",()=>"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    attribute vec2 a_textureCoordinate;\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    attribute float a_textureIndex;\n\n    uniform vec2 u_resolution;\n    uniform float u_pixelRatio;\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n    varying float v_textureIndex;\n\n    void main(){\n      vec2 normalized = a_position * u_pixelRatio / u_resolution;\n      vec2 zero_two = normalized * 2.0;\n      vec2 clip_space = zero_two - 1.0;\n\n      // pass to fragment\n      v_color = a_color;\n      v_textureCoordinate = a_textureCoordinate;\n      v_textureIndex = a_textureIndex;\n\n      // flip y\n      gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n    }\n  "),u(Ee,"fragment",(e,t,o,i)=>"\n    # ifdef GL_FRAGMENT_PRESICISON_HIGH\n    precision highp float;\n    # else\n    precision mediump float;\n    # endif\n\n    #define PI 3.14159265359\n\n    uniform vec2 u_resolution;\n    uniform vec2 u_dimensions;\n    uniform float u_alpha;\n    uniform float u_radius;\n    uniform sampler2D u_texture;\n    uniform float u_pixelRatio;\n\n    ".concat(e,"\n\n    varying vec4 v_color;\n    varying vec2 v_textureCoordinate;\n\n    ").concat(t,"\n\n    ").concat(o,"\n\n    void main() {\n      vec2 p = v_textureCoordinate.xy * u_dimensions - u_dimensions * 0.5;\n      vec2 d = abs(p) - (u_dimensions) * 0.5;\n      float lng_DefaultMask = min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n\n      vec4 shaderColor = vec4(0.0);\n      float shaderMask = lng_DefaultMask;\n\n      vec4 maskColor = texture2D(u_texture, v_textureCoordinate) * v_color;\n\n      shaderColor = mix(shaderColor, maskColor, clamp(-(lng_DefaultMask + 0.5), 0.0, 1.0));\n\n      ").concat(i,"\n\n      gl_FragColor = shaderColor * u_alpha;\n    }\n  "));let ht=Ee;class Pr extends Ft{constructor(r){super({renderer:r,attributes:["a_position","a_textureCoordinate","a_color"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_dimensions",uniform:"uniform2fv"},{name:"u_radius",uniform:"uniform1f"}]})}static resolveDefaults(r){return{radius:r.radius||10,$dimensions:{width:0,height:0}}}bindTextures(r){const{glw:e}=this;e.activeTexture(0),e.bindTexture(r[0].ctxTexture)}bindProps(r){this.setUniform("u_radius",r.radius)}canBatchShaderProps(r,e){return r.radius===e.radius&&r.$dimensions.width===e.$dimensions.width&&r.$dimensions.height===e.$dimensions.height}}u(Pr,"z$__type__Props"),u(Pr,"shaderSources",{vertex:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n      attribute vec4 a_color;\n      attribute float a_textureIndex;\n      attribute float a_depth;\n\n      uniform vec2 u_resolution;\n      uniform float u_pixelRatio;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      void main() {\n        vec2 normalized = a_position * u_pixelRatio / u_resolution;\n        vec2 zero_two = normalized * 2.0;\n        vec2 clip_space = zero_two - 1.0;\n\n        // pass to fragment\n        v_color = a_color;\n        v_textureCoordinate = a_textureCoordinate;\n\n        // flip y\n        gl_Position = vec4(clip_space * vec2(1.0, -1.0), 0, 1);\n      }\n    ",fragment:"\n      # ifdef GL_FRAGMENT_PRESICISON_HIGH\n      precision highp float;\n      # else\n      precision mediump float;\n      # endif\n\n      uniform vec2 u_resolution;\n      uniform vec2 u_dimensions;\n      uniform float u_radius;\n      uniform sampler2D u_texture;\n\n      varying vec4 v_color;\n      varying vec2 v_textureCoordinate;\n\n      float boxDist(vec2 p, vec2 size, float radius){\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n\n      float fillMask(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n\n      void main() {\n        vec4 color = texture2D(u_texture, v_textureCoordinate) * v_color;\n        vec2 halfDimensions = u_dimensions * 0.5;\n\n        float d = boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions + 0.5, u_radius);\n        gl_FragColor = mix(vec4(0.0), color, fillMask(d));\n      }\n    "});const Qi=new Float32Array([1,0,0,0,1,0,0,0,1]),mr=class mr extends Ft{constructor(r){super({renderer:r,attributes:["a_position","a_textureCoordinate"],uniforms:[{name:"u_resolution",uniform:"uniform2fv"},{name:"u_transform",uniform:"uniformMatrix3fv"},{name:"u_scrollY",uniform:"uniform1f"},{name:"u_pixelRatio",uniform:"uniform1f"},{name:"u_texture",uniform:"uniform2f"},{name:"u_color",uniform:"uniform4fv"},{name:"u_size",uniform:"uniform1f"},{name:"u_distanceRange",uniform:"uniform1f"},{name:"u_debug",uniform:"uniform1i"}]})}bindTextures(r){const{glw:e}=this;e.activeTexture(0),e.bindTexture(r[0].ctxTexture)}bindProps(r){const e=mr.resolveDefaults(r);for(const t in e)if(t==="transform")this.setUniform("u_transform",!1,e[t]);else if(t==="scrollY")this.setUniform("u_scrollY",e[t]);else if(t==="color"){const o=Be(e.color);this.setUniform("u_color",o)}else t==="size"?this.setUniform("u_size",e[t]):t==="distanceRange"?this.setUniform("u_distanceRange",e[t]):t==="debug"&&this.setUniform("u_debug",e[t]?1:0)}static resolveDefaults(r={}){var e,t,o,i,s,l;return{transform:(e=r.transform)!=null?e:Qi,scrollY:(t=r.scrollY)!=null?t:0,color:(o=r.color)!=null?o:4294967295,size:(i=r.size)!=null?i:16,distanceRange:(s=r.distanceRange)!=null?s:1,debug:(l=r.debug)!=null?l:!1}}};u(mr,"shaderSources",{vertex:"\n      // an attribute is an input (in) to a vertex shader.\n      // It will receive data from a buffer\n      attribute vec2 a_position;\n      attribute vec2 a_textureCoordinate;\n\n      uniform vec2 u_resolution;\n      uniform mat3 u_transform;\n      uniform float u_scrollY;\n      uniform float u_pixelRatio;\n      uniform float u_size;\n\n      varying vec2 v_texcoord;\n\n      void main() {\n        vec2 scrolledPosition = a_position * u_size - vec2(0, u_scrollY);\n        vec2 transformedPosition = (u_transform * vec3(scrolledPosition, 1)).xy;\n        gl_Position = vec4((transformedPosition * u_pixelRatio / u_resolution * 2.0 - 1.0) * vec2(1, -1), 0, 1);\n        v_texcoord = a_textureCoordinate;\n      }\n    ",fragment:"\n      precision highp float;\n\n      uniform vec4 u_color;\n      uniform sampler2D u_texture;\n      uniform float u_distanceRange;\n      uniform float u_pixelRatio;\n      uniform int u_debug;\n\n      varying vec2 v_texcoord;\n\n      float median(float r, float g, float b) {\n          return max(min(r, g), min(max(r, g), b));\n      }\n\n      void main() {\n          vec3 sample = texture2D(u_texture, v_texcoord).rgb;\n          if (u_debug == 1) {\n            gl_FragColor = vec4(sample.r, sample.g, sample.b, 1.0);\n            return;\n          }\n          float scaledDistRange = u_distanceRange * u_pixelRatio;\n          float sigDist = scaledDistRange * (median(sample.r, sample.g, sample.b) - 0.5);\n          float opacity = clamp(sigDist + 0.5, 0.0, 1.0) * u_color.a;\n\n          // Build the final color.\n          // IMPORTANT: We must premultiply the color by the alpha value before returning it.\n          gl_FragColor = vec4(u_color.r * opacity, u_color.g * opacity, u_color.b * opacity, opacity);\n      }\n    "});let Dr=mr;class nt extends oe{constructor(){super(...arguments);u(this,"name","radius")}static getEffectKey(){return"radius"}static resolveDefaults(e){var t;return{radius:(t=e.radius)!=null?t:10}}}u(nt,"z$__type__Props"),u(nt,"uniforms",{radius:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let t=e;return Array.isArray(t)?t.length===2?t=[t[0],t[1],t[0],t[1]]:t.length===3?t=[t[0],t[1],t[2],t[0]]:t.length!==4&&(t=[t[0],t[0],t[0],t[0]]):typeof t=="number"&&(t=[t,t,t,t]),t}}}),u(nt,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),u(nt,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  float r = radius[0] * step(v_textureCoordinate.x, 0.5) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[1] * step(0.5, v_textureCoordinate.x) * step(v_textureCoordinate.y, 0.5);\n  r = r + radius[2] * step(0.5, v_textureCoordinate.x) * step(0.5, v_textureCoordinate.y);\n  r = r + radius[3] * step(v_textureCoordinate.x, 0.5) * step(0.5, v_textureCoordinate.y);\n  return $boxDist(v_textureCoordinate.xy * u_dimensions - halfDimensions, halfDimensions, r);\n  "),u(nt,"onEffectMask","\n  return mix(vec4(0.0), maskColor, $fillMask(shaderMask));\n  ");class St extends oe{constructor(){super(...arguments);u(this,"name","border")}static getEffectKey(){return"border"}static resolveDefaults(e){var t,o;return{width:(t=e.width)!=null?t:10,color:(o=e.color)!=null?o:4294967295}}}u(St,"z$__type__Props"),u(St,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Be(e),method:"uniform4fv",type:"vec4"}}),u(St,"onEffectMask","\n  float mask = clamp(shaderMask + width, 0.0, 1.0) - clamp(shaderMask, 0.0, 1.0);\n  return mix(shaderColor, mix(shaderColor, maskColor, maskColor.a), mask);\n  "),u(St,"onColorize","\n    return color;\n  ");const Ue=class Ue extends oe{constructor(){super(...arguments);u(this,"name","linearGradient")}static getEffectKey(e){return"linearGradient".concat(e.colors.length)}static resolveDefaults(e){var i,s;const t=(i=e.colors)!=null?i:[4278190080,4294967295];let o=e.stops||[];if(o.length===0||o.length!==t.length){const l=t.length;let c=0;const d=o;for(;c<l;c++)o[c]?(d[c]=o[c],o[c-1]===void 0&&d[c-2]!==void 0&&(d[c-1]=d[c-2]+(o[c]-d[c-2])/2)):d[c]=c*(1/(t.length-1));o=d}return{colors:t,stops:o,angle:(s=e.angle)!=null?s:0}}};u(Ue,"z$__type__Props"),u(Ue,"uniforms",{angle:{value:0,method:"uniform1f",type:"float"},colors:{value:4294967295,validator:e=>e.map(o=>Be(o)).reduce((o,i)=>o.concat(i),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),u(Ue,"methods",{fromLinear:"\n      vec4 function(vec4 linearRGB) {\n        vec4 higher = vec4(1.055)*pow(linearRGB, vec4(1.0/2.4)) - vec4(0.055);\n        vec4 lower = linearRGB * vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",toLinear:"\n      vec4 function(vec4 sRGB) {\n        vec4 higher = pow((sRGB + vec4(0.055))/vec4(1.055), vec4(2.4));\n        vec4 lower = sRGB/vec4(12.92);\n        return mix(higher, lower, 1.0);\n      }\n    ",calcPoint:"\n      vec2 function(float d, float angle) {\n        return d * vec2(cos(angle), sin(angle)) + (u_dimensions * 0.5);\n      }\n    "}),u(Ue,"ColorLoop",e=>{let t="";for(let o=2;o<e;o++)t+="colorOut = mix(colorOut, colors[".concat(o,"], clamp((dist - stops[").concat(o-1,"]) / (stops[").concat(o,"] - stops[").concat(o-1,"]), 0.0, 1.0));");return t}),u(Ue,"onColorize",e=>{const t=e.colors.length||1;return"\n      float a = angle - (PI / 180.0 * 90.0);\n      float lineDist = abs(u_dimensions.x * cos(a)) + abs(u_dimensions.y * sin(a));\n      vec2 f = $calcPoint(lineDist * 0.5, a);\n      vec2 t = $calcPoint(lineDist * 0.5, a + PI);\n      vec2 gradVec = t - f;\n      float dist = dot(v_textureCoordinate.xy * u_dimensions - f, gradVec) / dot(gradVec, gradVec);\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = $fromLinear(mix($toLinear(colors[0]), $toLinear(colors[1]), stopCalc));\n      ".concat(Ue.ColorLoop(t),"\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")});let Or=Ue;class Ur extends oe{constructor(){super(...arguments);u(this,"name","grayscale")}static getEffectKey(){return"grayscale"}static resolveDefaults(e){var t;return{amount:(t=e.amount)!=null?t:1}}}u(Ur,"uniforms",{amount:{value:1,method:"uniform1f",type:"float"}}),u(Ur,"onColorize","\n    float grayness = 0.2 * maskColor.r + 0.6 * maskColor.g + 0.2 * maskColor.b;\n    return vec4(amount * vec3(grayness) + (1.0 - amount) * maskColor.rgb, maskColor.a);\n  ");class ot extends oe{constructor(){super(...arguments);u(this,"name","borderRight")}static getEffectKey(){return"borderRight"}static resolveDefaults(e){var t,o;return{width:(t=e.width)!=null?t:10,color:(o=e.color)!=null?o:4294967295}}}u(ot,"z$__type__Props"),u(ot,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Be(e),method:"uniform4fv",type:"vec4"}}),u(ot,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),u(ot,"onEffectMask","\n  vec2 pos = vec2(u_dimensions.x - width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),u(ot,"onColorize","\n    return color;\n  ");class it extends oe{constructor(){super(...arguments);u(this,"name","borderTop")}static getEffectKey(){return"borderTop"}static resolveDefaults(e){var t,o;return{width:(t=e.width)!=null?t:10,color:(o=e.color)!=null?o:4294967295}}}u(it,"z$__type__Props"),u(it,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Be(e),method:"uniform4fv",type:"vec4"}}),u(it,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),u(it,"onEffectMask","\n  vec2 pos = vec2(0.0, width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),u(it,"onColorize","\n    return color;\n  ");class st extends oe{constructor(){super(...arguments);u(this,"name","borderBottom")}static getEffectKey(){return"borderBottom"}static resolveDefaults(e){var t,o;return{width:(t=e.width)!=null?t:10,color:(o=e.color)!=null?o:4294967295}}}u(st,"z$__type__Props"),u(st,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Be(e),method:"uniform4fv",type:"vec4"}}),u(st,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),u(st,"onEffectMask","\n  vec2 pos = vec2(0.0, u_dimensions.y - width * 0.5);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(u_dimensions.x, width*0.5));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),u(st,"onColorize","\n    return color;\n  ");class at extends oe{constructor(){super(...arguments);u(this,"name","borderLeft")}static getEffectKey(){return"borderLeft"}static resolveDefaults(e){var t,o;return{width:(t=e.width)!=null?t:10,color:(o=e.color)!=null?o:4294967295}}}u(at,"z$__type__Props"),u(at,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Be(e),method:"uniform4fv",type:"vec4"}}),u(at,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",rectDist:"\n      float function(vec2 p, vec2 size) {\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0));\n      }\n    "}),u(at,"onEffectMask","\n  vec2 pos = vec2(width * 0.5, 0.0);\n  float mask = $rectDist(v_textureCoordinate.xy * u_dimensions - pos, vec2(width*0.5, u_dimensions.y));\n  return mix(shaderColor, maskColor, $fillMask(mask));\n  "),u(at,"onColorize","\n    return color;\n  ");class At extends oe{constructor(){super(...arguments);u(this,"name","glitch")}static getEffectKey(e){return"glitch"}static resolveDefaults(e){var t,o,i,s,l;return{amplitude:(t=e.amplitude)!=null?t:.2,narrowness:(o=e.narrowness)!=null?o:4,blockiness:(i=e.blockiness)!=null?i:2,minimizer:(s=e.minimizer)!=null?s:8,time:(l=e.time)!=null?l:Date.now()}}}u(At,"z$__type__Props"),u(At,"uniforms",{amplitude:{value:0,method:"uniform1f",type:"float"},narrowness:{value:0,method:"uniform1f",type:"float"},blockiness:{value:0,method:"uniform1f",type:"float"},minimizer:{value:0,method:"uniform1f",type:"float"},time:{value:0,method:"uniform1f",validator:e=>(Date.now()-e)%1e3,type:"float"}}),u(At,"methods",{rand:"\n      float function(vec2 p, float time) {\n        float t = floor(time * 20.) / 10.;\n        return fract(sin(dot(p, vec2(t * 12.9898, t * 78.233))) * 43758.5453);\n      }\n    ",noise:"\n      float function(vec2 uv, float blockiness, float time) {\n        vec2 lv = fract(uv);\n        vec2 id = floor(uv);\n\n        float n1 = rand(id, time);\n        float n2 = rand(id+vec2(1,0), time);\n        float n3 = rand(id+vec2(0,1), time);\n        float n4 = rand(id+vec2(1,1), time);\n        vec2 u = smoothstep(0.0, 1.0 + blockiness, lv);\n        return mix(mix(n1, n2, u.x), mix(n3, n4, u.x), u.y);\n      }\n    ",fbm:"\n      float function(vec2 uv, int count, float blockiness, float complexity, float time) {\n        float val = 0.0;\n        float amp = 0.5;\n        const int MAX_ITERATIONS = 10;\n\n        for(int i = 0; i < MAX_ITERATIONS; i++) {\n          if(i >= count) {break;}\n          val += amp * noise(uv, blockiness, time);\n          amp *= 0.5;\n          uv *= complexity;\n        }\n        return val;\n      }\n    "}),u(At,"onColorize","\n    vec2 uv = v_textureCoordinate.xy;\n    float aspect = u_dimensions.x / u_dimensions.y;\n    vec2 a = vec2(uv.x * aspect , uv.y);\n    vec2 uv2 = vec2(a.x / u_dimensions.x, exp(a.y));\n\n    float shift = amplitude * pow($fbm(uv2, 4, blockiness, narrowness, time), minimizer);\n    float colR = texture2D(u_texture, vec2(uv.x + shift, uv.y)).r * (1. - shift);\n    float colG = texture2D(u_texture, vec2(uv.x - shift, uv.y)).g * (1. - shift);\n    float colB = texture2D(u_texture, vec2(uv.x - shift, uv.y)).b * (1. - shift);\n\n    vec3 f = vec3(colR, colG, colB);\n    return vec4(f, texture2D(u_texture, vec2(uv.x - shift, uv.y)).a);\n  ");class rr extends oe{constructor(){super(...arguments);u(this,"name","fadeOut")}static getEffectKey(){return"fadeOut"}static resolveDefaults(e){var t;return{fade:(t=e.fade)!=null?t:10}}}u(rr,"z$__type__Props"),u(rr,"uniforms",{fade:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let t=e;return Array.isArray(t)?t.length===2?t=[t[0],t[1],t[0],t[1]]:t.length===3?t=[t[0],t[1],t[2],t[0]]:t.length!==4&&(t=[t[0],t[0],t[0],t[0]]):typeof t=="number"&&(t=[t,t,t,t]),t}}}),u(rr,"onColorize","\n  vec2 point = v_textureCoordinate.xy * u_dimensions.xy;\n  vec2 pos1;\n  vec2 pos2;\n  vec2 d;\n  float c;\n  vec4 result = maskColor;\n\n\n  if(fade[0] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x, point.y + fade[0]);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[1] > 0.0) {\n    pos1 = vec2(point.x - u_dimensions.x - fade[1], v_textureCoordinate.y);\n    pos2 = vec2(point.x - u_dimensions.x, v_textureCoordinate.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[2] > 0.0) {\n    pos1 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y - fade[2]);\n    pos2 = vec2(v_textureCoordinate.x, point.y - u_dimensions.y);\n    d = pos1 - pos2;\n    c = dot(pos2, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  if(fade[3] > 0.0) {\n    pos1 = vec2(point.x, point.y);\n    pos2 = vec2(point.x + fade[3], point.y);\n    d = pos2 - pos1;\n    c = dot(pos1, d) / dot(d, d);\n    result = mix(vec4(0.0), result, smoothstep(0.0, 1.0, clamp(c, 0.0, 1.0)));\n  }\n\n  return result;\n  ");const Ge=class Ge extends oe{constructor(){super(...arguments);u(this,"name","radialGradient")}static getEffectKey(e){return"radialGradient".concat(e.colors.length)}static resolveDefaults(e){var i,s,l,c,d;const t=(i=e.colors)!=null?i:[4278190080,4294967295];let o=e.stops||[];if(o.length===0||o.length!==t.length){const h=t.length;let g=0;const y=o;for(;g<h;g++)o[g]?(y[g]=o[g],o[g-1]===void 0&&y[g-2]!==void 0&&(y[g-1]=y[g-2]+(o[g]-y[g-2])/2)):y[g]=g*(1/(t.length-1));o=y}return{colors:t,stops:o,width:(s=e.width)!=null?s:0,height:(c=(l=e.height)!=null?l:e.width)!=null?c:0,pivot:(d=e.pivot)!=null?d:[.5,.5]}}};u(Ge,"z$__type__Props"),u(Ge,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},pivot:{value:[.5,.5],method:"uniform2fv",type:"vec2"},colors:{value:4294967295,validator:e=>e.map(o=>Be(o)).reduce((o,i)=>o.concat(i),[]),size:e=>e.colors.length,method:"uniform4fv",type:"vec4"},stops:{value:[],size:e=>e.colors.length,method:"uniform1fv",type:"float"}}),u(Ge,"ColorLoop",e=>{let t="";for(let o=2;o<e;o++)t+="colorOut = mix(colorOut, colors[".concat(o,"], clamp((dist - stops[").concat(o-1,"]) / (stops[").concat(o,"] - stops[").concat(o-1,"]), 0.0, 1.0));");return t}),u(Ge,"onColorize",e=>{const t=e.colors.length||1;return"\n      vec2 point = v_textureCoordinate.xy * u_dimensions;\n      vec2 projection = vec2(pivot.x * u_dimensions.x, pivot.y * u_dimensions.y);\n\n      float dist = length((point - projection) / vec2(width, height));\n\n      float stopCalc = (dist - stops[0]) / (stops[1] - stops[0]);\n      vec4 colorOut = mix(colors[0], colors[1], stopCalc);\n      ".concat(Ge.ColorLoop(t),"\n      return mix(maskColor, colorOut, clamp(colorOut.a, 0.0, 1.0));\n    ")});let Wr=Ge;class lt extends oe{constructor(){super(...arguments);u(this,"name","radialProgress")}static getEffectKey(){return"radialProgress"}static resolveDefaults(e){var t,o,i,s,l,c,d;return{width:(t=e.width)!=null?t:10,progress:(o=e.progress)!=null?o:.5,offset:(i=e.offset)!=null?i:0,range:(s=e.range)!=null?s:Math.PI*2,rounded:(l=e.rounded)!=null?l:!1,radius:(c=e.radius)!=null?c:1,color:(d=e.color)!=null?d:4294967295}}}u(lt,"z$__type__Props"),u(lt,"uniforms",{width:{value:0,method:"uniform1f",type:"float"},progress:{value:.5,method:"uniform1f",type:"float"},offset:{value:0,method:"uniform1f",type:"float"},range:{value:0,method:"uniform1f",type:"float"},rounded:{value:0,method:"uniform1f",type:"float",validator:e=>e?1:0},radius:{value:1,method:"uniform1f",type:"float"},color:{value:4294967295,validator:e=>Be(e),method:"uniform4fv",type:"vec4"}}),u(lt,"methods",{rotateUV:"\n    vec2 function(vec2 uv, float d) {\n      float s = sin(d);\n      float c = cos(d);\n      mat2 rotMatrix = mat2(c, -s, s, c);\n      return uv * rotMatrix;\n    }\n    ",drawDot:"\n    float function(vec2 uv, vec2 p, float r) {\n      uv += p;\n      float circle = length(uv) - r;\n      return clamp(-circle, 0.0, 1.0);\n    }\n    "}),u(lt,"onEffectMask","\n    float outerRadius = radius * u_dimensions.y * 0.5;\n\n    float endAngle = range * progress - 0.0005;\n\n    vec2 uv = v_textureCoordinate.xy * u_dimensions.xy - u_dimensions * 0.5;\n\n    uv = $rotateUV(uv, -(offset));\n    float linewidth = width * u_pixelRatio;\n    float circle = length(uv) - (outerRadius - linewidth) ;\n    circle = abs(circle) - linewidth;\n    circle = clamp(-circle, 0.0, 1.0);\n\n    float angle = (atan(uv.x, -uv.y) / 3.14159265359 * 0.5);\n    float p = endAngle / (PI * 2.);\n\n    circle *= step(fract(angle), fract(p));\n\n    circle = rounded < 1. ? circle : max(circle, $drawDot(uv, vec2(0, outerRadius - linewidth), linewidth));\n    circle = rounded < 1. ? circle : max(circle, $drawDot($rotateUV(uv, -(endAngle)), vec2(0, outerRadius - linewidth), linewidth));\n\n    return mix(shaderColor, maskColor, circle);\n  "),u(lt,"onColorize","\n    return color;\n  ");class ct extends oe{constructor(){super(...arguments);u(this,"name","holePunch")}static getEffectKey(){return"holePunch"}static resolveDefaults(e){var t;return{x:e.x||0,y:e.y||0,width:e.width||50,height:e.height||50,radius:(t=e.radius)!=null?t:0}}}u(ct,"z$__type__Props"),u(ct,"uniforms",{x:{value:0,method:"uniform1f",type:"float"},y:{value:0,method:"uniform1f",type:"float"},width:{value:0,method:"uniform1f",type:"float"},height:{value:0,method:"uniform1f",type:"float"},radius:{value:0,method:"uniform4fv",type:"vec4",validator:e=>{let t=e;return Array.isArray(t)?t.length===2?t=[t[0],t[1],t[0],t[1]]:t.length===3?t=[t[0],t[1],t[2],t[0]]:t.length!==4&&(t=[t[0],t[0],t[0],t[0]]):typeof t=="number"&&(t=[t,t,t,t]),t}}}),u(ct,"methods",{fillMask:"\n      float function(float dist) {\n        return clamp(-dist, 0.0, 1.0);\n      }\n    ",boxDist:"\n      float function(vec2 p, vec2 size, float radius) {\n        size -= vec2(radius);\n        vec2 d = abs(p) - size;\n        return min(max(d.x, d.y), 0.0) + length(max(d, 0.0)) - radius;\n      }\n    "}),u(ct,"onShaderMask","\n  vec2 halfDimensions = u_dimensions * 0.5;\n  vec2 size = vec2(width, height) * 0.5;\n  vec2 basePos = v_textureCoordinate.xy * u_dimensions.xy - vec2(x, y);\n  vec2 pos = basePos - size;\n  float r = radius[0] * step(pos.x, 0.5) * step(pos.y, 0.5);\n  r = r + radius[1] * step(0.5, pos.x) * step(pos.y, 0.5);\n  r = r + radius[2] * step(0.5, pos.x) * step(0.5, pos.y);\n  r = r + radius[3] * step(pos.x, 0.5) * step(0.5, pos.y);\n  return $boxDist(pos, size, r);\n  "),u(ct,"onEffectMask","\n  return mix(maskColor, vec4(0.0), $fillMask(shaderMask));\n  ");class Ki{constructor(){u(this,"shCache",new Map);u(this,"shConstructors",{});u(this,"attachedShader",null);u(this,"effectConstructors",{});u(this,"renderer");this.registerShaderType("DefaultShader",Co),this.registerShaderType("DefaultShaderBatched",To),this.registerShaderType("RoundedRectangle",Pr),this.registerShaderType("DynamicShader",ht),this.registerShaderType("SdfShader",Dr),this.registerEffectType("border",St),this.registerEffectType("borderBottom",st),this.registerEffectType("borderLeft",at),this.registerEffectType("borderRight",ot),this.registerEffectType("borderTop",it),this.registerEffectType("fadeOut",rr),this.registerEffectType("linearGradient",Or),this.registerEffectType("radialGradient",Wr),this.registerEffectType("grayscale",Ur),this.registerEffectType("glitch",At),this.registerEffectType("radius",nt),this.registerEffectType("radialProgress",lt),this.registerEffectType("holePunch",ct)}registerShaderType(r,e){this.shConstructors[r]=e}registerEffectType(r,e){this.effectConstructors[r]=e}getRegisteredEffects(){return this.effectConstructors}getRegisteredShaders(){return this.shConstructors}loadShader(r,e){if(!this.renderer)throw new Error("Renderer is not been defined");const t=this.shConstructors[r];if(!t)throw new Error('Shader type "'.concat(r,'" is not registered'));if(r==="DynamicShader")return this.loadDynamicShader(e);const o=t.resolveDefaults(e),i=t.makeCacheKey(o)||t.name;if(i&&this.shCache.has(i))return{shader:this.shCache.get(i),props:o};const s=new t(this.renderer,e);return i&&this.shCache.set(i,s),{shader:s,props:o}}loadDynamicShader(r){if(!this.renderer)throw new Error("Renderer is not been defined");const e=ht.resolveDefaults(r,this.effectConstructors),t=ht.makeCacheKey(e,this.effectConstructors);if(t&&this.shCache.has(t))return{shader:this.shCache.get(t),props:e};const o=new ht(this.renderer,r,this.effectConstructors);return t&&this.shCache.set(t,o),{shader:o,props:e}}useShader(r){this.attachedShader!==r&&(this.attachedShader&&this.attachedShader.detach(),r.attach(),this.attachedShader=r)}}class Xi{constructor(){u(this,"data",{})}reset(){this.data={}}increment(r){this.data[r]||(this.data[r]=0),this.data[r]++}getData(){return{...this.data}}}function Vi(n){return/\.(ktx|pvr)$/.test(n)}const Gi=async n=>{const e=await(await fetch(n)).arrayBuffer();return n.indexOf(".ktx")!==-1?qi(e):Zi(e)},qi=async n=>{const r=new DataView(n),e=r.getUint32(12)===16909060,t=[],o={glInternalFormat:r.getUint32(28,e),pixelWidth:r.getUint32(36,e),pixelHeight:r.getUint32(40,e),numberOfMipmapLevels:r.getUint32(56,e),bytesOfKeyValueData:r.getUint32(60,e)};let i=64;i+=o.bytesOfKeyValueData;for(let s=0;s<o.numberOfMipmapLevels;s++){const l=r.getUint32(i);i+=4,t.push(r.buffer.slice(i,l)),i+=l}return{data:{glInternalFormat:o.glInternalFormat,mipmaps:t,width:o.pixelWidth||0,height:o.pixelHeight||0,type:"ktx"},premultiplyAlpha:!1}},Zi=async n=>{const l=n,c=new Int32Array(l,0,13),d=c[12]+52,h=new Uint8Array(l,d),g=[],y={pixelWidth:c[7],pixelHeight:c[6],numberOfMipmapLevels:c[11]||0};let b=0,m=y.pixelWidth||0,w=y.pixelHeight||0;for(let S=0;S<y.numberOfMipmapLevels;S++){const A=(m+3>>2)*(w+3>>2)*8,p=new Uint8Array(l,h.byteOffset+b,A);g.push(p),b+=A,m=m>>1,w=w>>1}return{data:{glInternalFormat:36196,mipmaps:g,width:y.pixelWidth||0,height:y.pixelHeight||0,type:"pvr"},premultiplyAlpha:!1}},Bt=class Bt extends io{constructor(e,t){super(e);u(this,"props");this.props=Bt.resolveDefaults(t)}hasAlphaChannel(e){return e.indexOf("image/png")!==-1}async getTextureData(){const{src:e,premultiplyAlpha:t}=this.props;if(!e)return{data:null};if(e instanceof ImageData)return{data:e,premultiplyAlpha:t};if(Vi(e))return Gi(e);if(this.txManager.imageWorkerManager)return await this.txManager.imageWorkerManager.getImage(e,t);if(this.txManager.hasCreateImageBitmap){const i=await(await fetch(e)).blob(),s=t!=null?t:this.hasAlphaChannel(i.type);return{data:await createImageBitmap(i,{premultiplyAlpha:s?"premultiply":"none",colorSpaceConversion:"none",imageOrientation:"none"}),premultiplyAlpha:s}}else{const o=new Image;return o.src=e,await new Promise((i,s)=>{o.onload=()=>i(),o.onerror=()=>s(new Error("Failed to load image"))}).catch(i=>{console.error(i)}),{data:o,premultiplyAlpha:t!=null?t:!0}}}static makeCacheKey(e){const t=Bt.resolveDefaults(e);return t.src instanceof ImageData?!1:"ImageTexture,".concat(t.src,",").concat(t.premultiplyAlpha)}static resolveDefaults(e){var t,o;return{src:(t=e.src)!=null?t:"",premultiplyAlpha:(o=e.premultiplyAlpha)!=null?o:!0}}};u(Bt,"z$__type__Props");let Yr=Bt;const Ji=24;function es(n,r,e,t,o,i,s,l,c){const d=Math.min(Math.max(s.firstLineIdx,0),l.length),h=0;let g=0;t==="middle"?g=(r-n)/2:t==="bottom"&&(g=r-n);const b=o/i+d*r+g;if(!(c&&b>=c/i))return{sdfX:h,sdfY:b,lineIndex:d}}class Ct{constructor(r,e=0){u(this,"iterator");u(this,"peekBuffer",[]);u(this,"_lastIndex");this.iterator=r,this.iterator=r,this._lastIndex=e-1,this.peekBuffer=[]}next(){const r=this.peekBuffer.length>0?this.peekBuffer.pop():this.iterator.next();return r.done?this._lastIndex=-1:this._lastIndex++,r}peek(){if(this.peekBuffer.length>0)return this.peekBuffer[0];const r=this.iterator.next();return this.peekBuffer.push(r),r}get lastIndex(){return this._lastIndex}}function*Tt(n,r=0){let e=r;for(;e<n.length;){const t=n.codePointAt(e);if(t===void 0)throw new Error("Invalid Unicode code point");yield t,e+=t<=65535?1:2}}function ts(n,r,e){const t=e.shapeText(r,new Ct(Tt(n,0),0));let o=0;for(const i of t)i.mapped&&(o+=i.xAdvance);return o}function rs(n,r,e,t,o,i,s,l,c,d,h,g,y,b,m,w,S,A,p){F(m,"Font face must be loaded"),F(m.loaded,"Font face must be loaded"),F(m.data,"Font face must be loaded"),F(m.shaper,"Font face must be loaded");const x=l/m.data.info.size,v=c/x,T=i/x,I=d/x,R=y[n],C=(R==null?void 0:R.codepointIndex)||0,_=(R==null?void 0:R.maxX)||0,E=(R==null?void 0:R.maxY)||0;let P=_,k=E,L=r,O=e,D=0;const U={codepointIndex:-1,bufferOffset:-1,xStart:-1},j=m.shaper,ie={letterSpacing:I};let ee=j.shapeText(ie,new Ct(Tt(t,C),C)),ce,Ae=-1;const Le=[],Pt=s/x,Dt=ts(A,ie,j);let je=!0;for(;je;){const we=(p===0||n+1<p)&&(g!=="both"||S||O+v+m.maxCharHeight<=Pt),ge=we?T:T-Dt;let re=0;const Me=O+v>=b.y1,ze=O<=b.y2,pe=Me&&ze;for(;(ce=ee.next())&&!ce.done;){const K=ce.value;if(n===y.length)y.push({codepointIndex:K.cluster,maxY:k,maxX:P});else if(n>y.length)throw new Error("Unexpected lineCache length");if(K.codepoint===32||K.codepoint===10?U.codepointIndex!==-1&&(U.codepointIndex=-1,re=L):U.codepointIndex===-1&&(U.codepointIndex=K.cluster,U.bufferOffset=D,U.xStart=re),K.mapped){const Ot=L+K.xOffset+K.width;if(g!=="none"&&Ot>=ge&&U.codepointIndex!==-1&&U.xStart>0)if(we){ee=j.shapeText(ie,new Ct(Tt(t,U.codepointIndex),U.codepointIndex)),D=U.bufferOffset;break}else ee=j.shapeText(ie,new Ct(Tt(A,0),0)),L=U.xStart,D=U.bufferOffset,g="none";else{const Pe=L+K.xOffset,De=O+K.yOffset;if(pe){Ae===-1&&(Ae=D);const Qe=m.getAtlasEntry(K.glyphId),Ke=Qe.x/m.data.common.scaleW,Xe=Qe.y/m.data.common.scaleH,mn=Qe.width/m.data.common.scaleW,xn=Qe.height/m.data.common.scaleH;h[D++]=Pe,h[D++]=De,h[D++]=Ke,h[D++]=Xe,h[D++]=Pe+K.width,h[D++]=De,h[D++]=Ke+mn,h[D++]=Xe,h[D++]=Pe,h[D++]=De+K.height,h[D++]=Ke,h[D++]=Xe+xn,h[D++]=Pe+K.width,h[D++]=De+K.height,h[D++]=Ke+mn,h[D++]=Xe+xn}k=Math.max(k,De+K.height),P=Math.max(P,Pe+K.width),L+=K.xAdvance}}else if(K.codepoint===10){if(we)break;ee=j.shapeText(ie,new Ct(Tt(A,0),0)),g="none"}}Ae!==-1&&(Le.push({bufferStart:Ae,bufferEnd:D}),Ae=-1),L=0,O+=v,n++,U.codepointIndex=-1,re=0,!w&&g==="both"&&O>b.y2||ce&&ce.done?je=!1:we||(je=!1)}if(o==="center"){const we=g==="none"?P:T;for(let ge=0;ge<Le.length;ge++){const re=Le[ge],Me=h[re.bufferEnd-4]-h[re.bufferStart],ze=(we-Me)/2;for(let pe=re.bufferStart;pe<re.bufferEnd;pe+=4)h[pe]+=ze}}else if(o==="right"){const we=g==="none"?P:T;for(let ge=0;ge<Le.length;ge++){const re=Le[ge],Me=re.bufferEnd===re.bufferStart?0:h[re.bufferEnd-4]-h[re.bufferStart],ze=we-Me;for(let pe=re.bufferStart;pe<re.bufferEnd;pe+=4)h[pe]+=ze}}return F(ce),{bufferNumFloats:D,bufferNumQuads:D/16,layoutNumCharacters:ce.done?t.length-C:ce.value.cluster-C+1,fullyProcessed:!!ce.done,maxX:P,maxY:k}}function ns(n,r){return Math.ceil(n/r)*r}function os(n,r){return Math.floor(n/r)*r}function is(n,r,e,t,o,i,s,l){const{screen:c,sdf:d}=n;if(!ai(s))c.x1=0,c.y1=0,c.x2=0,c.y2=0,d.x1=0,d.y1=0,d.x2=0,d.y2=0,n.numLines=0,n.firstLineIdx=0;else{const h=s.x1-r,g=h+(s.x2-s.x1),y=s.y1-e+t,b=os(y-i,o||1),m=ns(y+(s.y2-s.y1)+i,o||1);c.x1=h,c.y1=b,c.x2=g,c.y2=m,d.x1=h/l,d.y1=b/l,d.x2=g/l,d.y2=m/l,n.numLines=Math.ceil((m-b)/o),n.firstLineIdx=o?Math.floor(b/o):0}n.valid=!0}const ss={normal:400,bold:700,bolder:900,lighter:100},In=n=>typeof n=="number"?n:ss[n]||400;function as(n,r,e,t,o){let i=In(e);for(const s of n){const l=s[r];if(!l)continue;if(l.size===1)return console.warn("TrFontManager: Only one font face found for family: '".concat(r,"' - will be used for all weights and styles")),l.values().next().value;const c=new Map;for(const h of l){const g=In(h.descriptors.weight);if(g===i&&h.descriptors.style===t&&h.descriptors.stretch===o)return h;c.set(g,h)}const d="TrFontManager: No exact match: '".concat(r," Weight: ").concat(i," Style: ").concat(t," Stretch: ").concat(o,"'");if(console.error(d),i===400&&c.has(500))return c.get(500);if(i===500&&c.has(400))return c.get(400);if(i<400){for(;i>0;){if(c.has(i))return c.get(i);i-=100}i=600}for(;i<1e3;){if(c.has(i))return c.get(i);i+=100}for(i=500;i>0;){if(c.has(i))return c.get(i);i-=100}}}const ls=oo(as);class _o{constructor(r){u(this,"textRenderers");this.textRenderers=r}addFontFace(r){for(const e in this.textRenderers){const t=this.textRenderers[e];t&&t.isFontFaceSupported(r)&&t.addFontFace(r)}}static resolveFontFace(r,e){const{fontFamily:t,fontWeight:o,fontStyle:i,fontStretch:s}=e;return ls(r,t,o,i,s)}}const cs={x:0,y:0,width:0,height:0};class ds extends Ao{constructor(e){super(e);u(this,"ssdfFontFamilies",{});u(this,"msdfFontFamilies",{});u(this,"fontFamilyArray",[this.ssdfFontFamilies,this.msdfFontFamilies]);u(this,"sdfShader");u(this,"rendererBounds");this.sdfShader=this.stage.shManager.loadShader("SdfShader").shader,this.rendererBounds={x1:0,y1:0,x2:this.stage.options.appWidth,y2:this.stage.options.appHeight}}getPropertySetters(){return{fontFamily:(e,t)=>{e.props.fontFamily=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontWeight:(e,t)=>{e.props.fontWeight=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStyle:(e,t)=>{e.props.fontStyle=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontStretch:(e,t)=>{e.props.fontStretch=t,this.releaseFontFace(e),this.invalidateLayoutCache(e)},fontSize:(e,t)=>{e.props.fontSize=t,this.invalidateLayoutCache(e)},text:(e,t)=>{e.props.text=t,this.invalidateLayoutCache(e)},textAlign:(e,t)=>{e.props.textAlign=t,this.invalidateLayoutCache(e)},color:(e,t)=>{e.props.color=t},x:(e,t)=>{e.props.x=t,e.elementBounds.valid&&(this.setElementBoundsX(e),!e.renderWindow.valid&&Tr(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},y:(e,t)=>{e.props.y=t,e.elementBounds.valid&&(this.setElementBoundsY(e),!e.renderWindow.valid&&Tr(e.elementBounds,this.rendererBounds)&&this.scheduleUpdateState(e))},contain:(e,t)=>{e.props.contain=t,this.invalidateLayoutCache(e)},width:(e,t)=>{e.props.width=t,e.props.contain!=="none"&&this.invalidateLayoutCache(e)},height:(e,t)=>{e.props.height=t,e.props.contain==="both"&&this.invalidateLayoutCache(e)},offsetY:(e,t)=>{e.props.offsetY=t,this.invalidateLayoutCache(e)},scrollable:(e,t)=>{e.props.scrollable=t,this.invalidateLayoutCache(e)},scrollY:(e,t)=>{e.props.scrollY=t,this.scheduleUpdateState(e)},letterSpacing:(e,t)=>{e.props.letterSpacing=t,this.invalidateLayoutCache(e)},lineHeight:(e,t)=>{e.props.lineHeight=t,this.invalidateLayoutCache(e)},maxLines:(e,t)=>{e.props.maxLines=t,this.invalidateLayoutCache(e)},textBaseline:(e,t)=>{e.props.textBaseline=t,this.invalidateLayoutCache(e)},verticalAlign:(e,t)=>{e.props.verticalAlign=t,this.invalidateLayoutCache(e)},overflowSuffix:(e,t)=>{e.props.overflowSuffix=t,this.invalidateLayoutCache(e)},debug:(e,t)=>{e.props.debug=t}}}canRenderFont(e){const{fontFamily:t}=e;return t in this.ssdfFontFamilies||t in this.msdfFontFamilies||t==="$$SDF_FAILURE_TEST$$"}isFontFaceSupported(e){return e instanceof vn}addFontFace(e){F(e instanceof vn);const t=e.fontFamily,o=e.type==="ssdf"?this.ssdfFontFamilies:e.type==="msdf"?this.msdfFontFamilies:void 0;if(!o){console.warn("Invalid font face type: ".concat(e.type));return}let i=o[t];i||(i=new Set,o[t]=i),i.add(e)}createState(e){return{props:e,status:"initialState",updateScheduled:!1,emitter:new et,lineCache:[],forceFullLayoutCalc:!1,renderWindow:{screen:{x1:0,y1:0,x2:0,y2:0},sdf:{x1:0,y1:0,x2:0,y2:0},firstLineIdx:0,numLines:0,valid:!1},elementBounds:{x1:0,y1:0,x2:0,y2:0,valid:!1},clippingRect:{x:0,y:0,width:0,height:0,valid:!1},bufferNumFloats:0,bufferNumQuads:0,vertexBuffer:void 0,webGlBuffers:null,bufferUploaded:!1,textH:void 0,textW:void 0,distanceRange:0,trFontFace:void 0,isRenderable:!1,debugData:{updateCount:0,layoutCount:0,lastLayoutNumCharacters:0,layoutSum:0,drawSum:0,drawCount:0,bufferSize:0}}}updateState(e){let{trFontFace:t}=e;const{textH:o,lineCache:i,debugData:s,forceFullLayoutCalc:l}=e;if(s.updateCount++,e.status==="initialState"&&this.setStatus(e,"loading"),!t){if(t=this.resolveFontFace(e.props),e.trFontFace=t,!t){const j="SdfTextRenderer: Could not resolve font face for family: '".concat(e.props.fontFamily,"'");console.error(j),this.setStatus(e,"failed",new Error(j));return}t.texture.setRenderableOwner(e,e.isRenderable)}if(!t.loaded){t.once("loaded",()=>{this.scheduleUpdateState(e)});return}F(t.data,"Font face data should be loaded");const{text:c,fontSize:d,x:h,y:g,contain:y,width:b,height:m,lineHeight:w,verticalAlign:S,scrollable:A,overflowSuffix:p,maxLines:x}=e.props,v=y==="both"&&A?e.props.scrollY:0,{renderWindow:T}=e,I=t.data.info.size,R=d/I,C=w/R;e.distanceRange=R*t.data.distanceField.distanceRange;const _=c.length*Ji;let E=e.vertexBuffer;(!E||E.length<_)&&(E=new Float32Array(_*2));const P=e.elementBounds;if(P.valid||(this.setElementBoundsX(e),this.setElementBoundsY(e),P.valid=!0),!l&&T.valid){const j=T.screen;if(h+j.x1<=P.x1&&h+j.x2>=P.x2&&g-v+j.y1<=P.y1&&g-v+j.y2>=P.y2){this.setStatus(e,"loaded");return}T.valid=!1,this.setStatus(e,"loading")}const{offsetY:k,textAlign:L}=e.props;if(!T.valid){if(!Tr(P,this.rendererBounds))return;is(T,h,g,v,w,y==="both"?P.y2-P.y1:0,P,R)}const O=es(I,C,w,S,k,R,T,i,o);if(!O){this.setStatus(e,"loaded");return}const{letterSpacing:D}=e.props,U=rs(O.lineIndex,O.sdfX,O.sdfY,c,L,b,m,d,w,D,E,y,i,T.sdf,t,l,A,p,x);e.bufferUploaded=!1,e.bufferNumFloats=U.bufferNumFloats,e.bufferNumQuads=U.bufferNumQuads,e.vertexBuffer=E,e.renderWindow=T,s.lastLayoutNumCharacters=U.layoutNumCharacters,s.bufferSize=E.byteLength,U.fullyProcessed&&(e.textW=U.maxX*R,e.textH=U.maxY*R),this.setStatus(e,"loaded")}renderQuads(e,t,o,i){var _,E,P;if(!e.vertexBuffer)return;const{renderer:s}=this.stage,{fontSize:l,color:c,contain:d,scrollable:h,zIndex:g,debug:y}=e.props,b=d==="both"&&h?e.props.scrollY:0,{textW:m=0,textH:w=0,distanceRange:S,vertexBuffer:A,bufferUploaded:p,trFontFace:x,elementBounds:v}=e;let{webGlBuffers:T}=e;if(!T){const k=s.glw,L=4*Float32Array.BYTES_PER_ELEMENT,O=k.createBuffer();F(O),e.webGlBuffers=new li([{buffer:O,attributes:{a_position:{name:"a_position",size:2,type:k.FLOAT,normalized:!1,stride:L,offset:0},a_textureCoordinate:{name:"a_textureCoordinate",size:2,type:k.FLOAT,normalized:!1,stride:L,offset:2*Float32Array.BYTES_PER_ELEMENT}}}]),e.bufferUploaded=!1,F(e.webGlBuffers),T=e.webGlBuffers}if(!p){const k=s.glw,L=(_=T==null?void 0:T.getBuffer("a_textureCoordinate"))!=null?_:null;k.arrayBufferData(L,A,k.STATIC_DRAW),e.bufferUploaded=!0}if(F(x),h&&d==="both"){F(v.valid);const k=ci(v,cs);o.valid?(e.clippingRect.valid=!0,o=en(o,k,e.clippingRect)):(e.clippingRect.valid=!0,o=so(k,e.clippingRect))}const I=new di(s.glw,s.options,T,this.sdfShader,{transform:t.data,color:hi(c,i),size:l/(((E=x.data)==null?void 0:E.info.size)||0),scrollY:b,distanceRange:S,debug:y.sdfShaderDebug},i,o,{height:w,width:m},0,g),R=(P=e.trFontFace)==null?void 0:P.texture;F(R);const C=this.stage.txManager.getCtxTexture(R);I.addTexture(C),I.length=e.bufferNumFloats,I.numQuads=e.bufferNumQuads,s.addRenderOp(I)}setIsRenderable(e,t){var o;super.setIsRenderable(e,t),(o=e.trFontFace)==null||o.texture.setRenderableOwner(e,t)}destroyState(e){var t;super.destroyState(e),(t=e.trFontFace)==null||t.texture.setRenderableOwner(e,!1)}resolveFontFace(e){return _o.resolveFontFace(this.fontFamilyArray,e)}releaseFontFace(e){e.trFontFace&&(e.trFontFace.texture.setRenderableOwner(e,!1),e.trFontFace=void 0)}invalidateLayoutCache(e){e.renderWindow.valid=!1,e.elementBounds.valid=!1,e.textH=void 0,e.textW=void 0,e.lineCache=[],this.setStatus(e,"loading"),this.scheduleUpdateState(e)}setElementBoundsX(e){const{x:t,contain:o,width:i}=e.props,{elementBounds:s}=e;s.x1=t,s.x2=o!=="none"?t+i:1/0}setElementBoundsY(e){const{y:t,contain:o,height:i}=e.props,{elementBounds:s}=e;s.y1=t,s.y2=o==="both"?t+i:1/0}}function hs(n){return n.prototype instanceof ui}async function us(n,r){let e;try{console.log("Loading core extension",n),e=await Oi(()=>import(n),__vite__mapDeps([]))}catch(o){console.error("The core extension module at '".concat(n,"' could not be loaded.")),console.error(o);return}if(!e.default){console.error("The core extension module at '".concat(n,"' does not have a default export."));return}const t=e.default;if(hs(t)){const o=new t;try{await o.run(r)}catch(i){console.error("The core extension at '".concat(n,"' threw an error.")),console.error(i)}}else console.error("The core extension at '".concat(n,"' does not extend CoreExtension."))}function Ro(n){const r={boolean:!0,string:!0,number:!0},e=Object.keys(n);for(let t=0;t<e.length;t++){const o=e[t];if(!o)continue;const i=n[o],s=typeof i;s==="string"&&i.length>2048&&(console.warn("Custom Data value for ".concat(o," is too long, it will be truncated to 2048 characters")),n[o]=i.substring(0,2048)),r[s]||(console.warn("Custom Data value for ".concat(o," is not a boolean, string, or number, it will be ignored")),delete n[o])}return n}class fs extends et{constructor(e,t,o){var A,p,x,v;super();u(this,"root",null);u(this,"driver");u(this,"canvas");u(this,"settings");u(this,"inspector",null);u(this,"nodes",new Map);u(this,"nextTextureId",1);u(this,"textureTracker");const i={appWidth:e.appWidth||1920,appHeight:e.appHeight||1080,txMemByteThreshold:e.txMemByteThreshold||124e6,boundsMargin:e.boundsMargin||0,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio||1,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio||window.devicePixelRatio,clearColor:(A=e.clearColor)!=null?A:0,coreExtensionModule:e.coreExtensionModule||null,experimental_FinalizationRegistryTextureUsageTracker:(p=e.experimental_FinalizationRegistryTextureUsageTracker)!=null?p:!1,textureCleanupOptions:e.textureCleanupOptions||{},fpsUpdateInterval:e.fpsUpdateInterval||0,numImageWorkers:e.numImageWorkers!==void 0?e.numImageWorkers:2,enableContextSpy:(x=e.enableContextSpy)!=null?x:!1,enableInspector:(v=e.enableInspector)!=null?v:!1};this.settings=i;const{appWidth:s,appHeight:l,deviceLogicalPixelRatio:c,devicePhysicalPixelRatio:d,enableInspector:h}=i,g=T=>{this.driver.releaseTexture(T)},y=i.experimental_FinalizationRegistryTextureUsageTracker&&typeof FinalizationRegistry=="function";this.textureTracker=y?new Li(g):new Ni(g,this.settings.textureCleanupOptions);const b=s*c,m=l*c;this.driver=o;const w=document.createElement("canvas");this.canvas=w,w.width=b*d,w.height=m*d,w.style.width="".concat(b,"px"),w.style.height="".concat(m,"px");let S;if(typeof t=="string"?S=document.getElementById(t):S=t,!S)throw new Error("Could not find target element");o.onCreateNode=T=>{this.nodes.set(T.id,T)},o.onBeforeDestroyNode=T=>{this.nodes.delete(T.id)},o.onFpsUpdate=T=>{this.emit("fpsUpdate",T)},o.onFrameTick=T=>{this.emit("frameTick",T)},o.onIdle=()=>{this.emit("idle")},S.appendChild(w),h&&!no()&&(this.inspector=new zi(w,i))}async init(){await this.driver.init(this,this.settings,this.canvas),this.root=this.driver.getRootNode()}createNode(e){return this.inspector?this.inspector.createNode(this.driver,this.resolveNodeDefaults(e)):this.driver.createNode(this.resolveNodeDefaults(e))}createTextNode(e){var i,s,l,c,d,h,g,y,b,m,w,S,A,p,x,v,T,I,R;const t=(i=e.fontSize)!=null?i:16,o={...this.resolveNodeDefaults(e),text:(s=e.text)!=null?s:"",textRendererOverride:(l=e.textRendererOverride)!=null?l:null,fontSize:t,fontFamily:(c=e.fontFamily)!=null?c:"sans-serif",fontStyle:(d=e.fontStyle)!=null?d:"normal",fontWeight:(h=e.fontWeight)!=null?h:"normal",fontStretch:(g=e.fontStretch)!=null?g:"normal",textAlign:(y=e.textAlign)!=null?y:"left",contain:(b=e.contain)!=null?b:"none",scrollable:(m=e.scrollable)!=null?m:!1,scrollY:(w=e.scrollY)!=null?w:0,offsetY:(S=e.offsetY)!=null?S:0,letterSpacing:(A=e.letterSpacing)!=null?A:0,lineHeight:(p=e.lineHeight)!=null?p:t,maxLines:(x=e.maxLines)!=null?x:0,textBaseline:(v=e.textBaseline)!=null?v:"alphabetic",verticalAlign:(T=e.verticalAlign)!=null?T:"top",overflowSuffix:(I=e.overflowSuffix)!=null?I:"...",debug:(R=e.debug)!=null?R:{}};return this.inspector?this.inspector.createTextNode(this.driver,o):this.driver.createTextNode(o)}resolveNodeDefaults(e){var d,h,g,y,b,m,w,S,A,p,x,v,T,I,R,C,_,E,P,k,L,O,D,U,j,ie,ee,ce,Ae,Le,Pt,Dt,je,we,ge,re,Me,ze,pe,K,Ot,Pe,De,Qe,Ke,Xe;const t=(d=e.color)!=null?d:4294967295,o=(y=(g=(h=e.colorTl)!=null?h:e.colorTop)!=null?g:e.colorLeft)!=null?y:t,i=(w=(m=(b=e.colorTr)!=null?b:e.colorTop)!=null?m:e.colorRight)!=null?w:t,s=(p=(A=(S=e.colorBl)!=null?S:e.colorBottom)!=null?A:e.colorLeft)!=null?p:t,l=(T=(v=(x=e.colorBr)!=null?x:e.colorBottom)!=null?v:e.colorRight)!=null?T:t,c=Ro((I=e.data)!=null?I:{});return{x:(R=e.x)!=null?R:0,y:(C=e.y)!=null?C:0,width:(_=e.width)!=null?_:0,height:(E=e.height)!=null?E:0,alpha:(P=e.alpha)!=null?P:1,clipping:(k=e.clipping)!=null?k:!1,color:t,colorTop:(L=e.colorTop)!=null?L:t,colorBottom:(O=e.colorBottom)!=null?O:t,colorLeft:(D=e.colorLeft)!=null?D:t,colorRight:(U=e.colorRight)!=null?U:t,colorBl:s,colorBr:l,colorTl:o,colorTr:i,zIndex:(j=e.zIndex)!=null?j:0,zIndexLocked:(ie=e.zIndexLocked)!=null?ie:0,parent:(ee=e.parent)!=null?ee:null,texture:(ce=e.texture)!=null?ce:null,shader:(Ae=e.shader)!=null?Ae:null,src:(Le=e.src)!=null?Le:"",scale:(Pt=e.scale)!=null?Pt:null,scaleX:(je=(Dt=e.scaleX)!=null?Dt:e.scale)!=null?je:1,scaleY:(ge=(we=e.scaleY)!=null?we:e.scale)!=null?ge:1,mount:(re=e.mount)!=null?re:0,mountX:(ze=(Me=e.mountX)!=null?Me:e.mount)!=null?ze:0,mountY:(K=(pe=e.mountY)!=null?pe:e.mount)!=null?K:0,pivot:(Ot=e.pivot)!=null?Ot:.5,pivotX:(De=(Pe=e.pivotX)!=null?Pe:e.pivot)!=null?De:.5,pivotY:(Ke=(Qe=e.pivotY)!=null?Qe:e.pivot)!=null?Ke:.5,rotation:(Xe=e.rotation)!=null?Xe:0,data:c}}destroyNode(e){return this.inspector&&this.inspector.destroyNode(e),this.driver.destroyNode(e)}createTexture(e,t,o){const i=this.nextTextureId++,s={descType:"texture",txType:e,props:t,options:{...o,id:i}};return this.textureTracker.registerTexture(s),s}createShader(e,t){return{descType:"shader",shType:e,props:t}}getNodeById(e){return this.nodes.get(e)||null}toggleFreeze(){throw new Error("Not implemented")}advanceFrame(){throw new Error("Not implemented")}rerender(){throw new Error("Not implemented")}}class gs extends et{constructor(e,t,o){super();u(this,"node");u(this,"props");u(this,"settings");u(this,"propStartValues",{});u(this,"restoreValues",{});u(this,"progress",0);u(this,"delayFor",0);u(this,"timingFunction");u(this,"propsList");this.node=e,this.props=t,this.settings=o,this.propStartValues={},this.propsList=Object.keys(t),this.propsList.forEach(i=>{this.propStartValues[i]=e[i]}),this.timingFunction=i=>i,o.easing&&typeof o.easing=="string"&&(this.timingFunction=fi(o.easing)),this.delayFor=o.delay||0}reset(){this.progress=0,this.delayFor=this.settings.delay||0,this.update(0)}restore(){this.reset(),Object.keys(this.props).forEach(e=>{this.node[e]=this.propStartValues[e]})}reverse(){this.progress=0,Object.keys(this.props).forEach(e=>{const t=this.props[e],o=this.propStartValues[e];this.props[e]=o,this.propStartValues[e]=t}),this.settings.loop||(this.settings.stopMethod=!1)}applyEasing(e,t,o){return(this.timingFunction(e)||e)*(o-t)+t}update(e){const{duration:t,loop:o,easing:i,stopMethod:s}=this.settings;if(!t){this.emit("finished",{});return}if(this.delayFor>0){this.delayFor-=e;return}if(this.delayFor<=0&&this.progress===0&&this.emit("start",{}),this.progress+=e/t,this.progress>1&&(this.progress=o?0:1,s)){this.emit("finished",{});return}for(let l=0;l<this.propsList.length;l++){const c=this.propsList[l],d=this.props[c],h=this.propStartValues[c],g=d;if(c.indexOf("color")!==-1){if(h===g){this.node[c]=h;continue}if(i){const y=this.timingFunction(this.progress)||this.progress,b=wn(h,g,y);this.node[c]=b;continue}this.node[c]=wn(h,g,this.progress);continue}if(i){this.node[c]=this.applyEasing(this.progress,h,g);continue}this.node[c]=h+(g-h)*this.progress}this.progress===1&&this.emit("finished",{})}}class ps{constructor(r,e){u(this,"manager");u(this,"animation");u(this,"startedPromise",null);u(this,"startedResolve",null);u(this,"stoppedPromise",null);u(this,"stoppedResolve",null);u(this,"state");this.manager=r,this.animation=e,this.state="stopped"}start(){return this.makeStartedPromise(),this.animation.once("start",this.started.bind(this)),this.makeStoppedPromise(),this.animation.once("finished",this.finished.bind(this)),this.manager.activeAnimations.has(this.animation)||this.manager.registerAnimation(this.animation),this.state="running",this}stop(){return this.manager.unregisterAnimation(this.animation),this.stoppedResolve!==null&&(this.stoppedResolve(),this.stoppedResolve=null),this.animation.reset(),this.state="stopped",this}pause(){return this.manager.unregisterAnimation(this.animation),this.state="paused",this}restore(){return this.stoppedResolve=null,this.animation.restore(),this}waitUntilStarted(){this.makeStartedPromise();const r=this.startedPromise;return F(r),r}waitUntilStopped(){this.makeStoppedPromise();const r=this.stoppedPromise;return F(r),r}makeStartedPromise(){this.startedResolve===null&&(this.startedPromise=new Promise(r=>{this.startedResolve=r}))}makeStoppedPromise(){this.stoppedResolve===null&&(this.stoppedPromise=new Promise(r=>{this.stoppedResolve=r}))}started(){F(this.startedResolve),this.startedResolve(this),this.startedResolve=null}finished(){F(this.stoppedResolve);const{loop:r,stopMethod:e}=this.animation.settings;if(e==="reverse"){this.animation.reverse(),this.start();return}this.stoppedResolve(),this.stoppedResolve=null,!r&&this.manager.unregisterAnimation(this.animation)}}const G=0,q=3,le=6,X=1,Z=4,de=7,me=2,xe=5,ye=8;class ve{constructor(r){u(this,"data");r?(this.data=new Float32Array(9),this.data[G]=r[0],this.data[q]=r[3],this.data[le]=r[6],this.data[X]=r[1],this.data[Z]=r[4],this.data[de]=r[7],this.data[me]=r[2],this.data[xe]=r[5],this.data[ye]=r[8]):this.data=new Float32Array(9)}static get temp(){return ms}static multiply(r,e,t){const o=r.data[G]*e.data[G]+r.data[q]*e.data[X]+r.data[le]*e.data[me],i=r.data[G]*e.data[q]+r.data[q]*e.data[Z]+r.data[le]*e.data[xe],s=r.data[G]*e.data[le]+r.data[q]*e.data[de]+r.data[le]*e.data[ye],l=r.data[X]*e.data[G]+r.data[Z]*e.data[X]+r.data[de]*e.data[me],c=r.data[X]*e.data[q]+r.data[Z]*e.data[Z]+r.data[de]*e.data[xe],d=r.data[X]*e.data[le]+r.data[Z]*e.data[de]+r.data[de]*e.data[ye],h=r.data[me]*e.data[G]+r.data[xe]*e.data[X]+r.data[ye]*e.data[me],g=r.data[me]*e.data[q]+r.data[xe]*e.data[Z]+r.data[ye]*e.data[xe],y=r.data[me]*e.data[le]+r.data[xe]*e.data[de]+r.data[ye]*e.data[ye];return t||(t=new ve),t.data[G]=o,t.data[q]=i,t.data[le]=s,t.data[X]=l,t.data[Z]=c,t.data[de]=d,t.data[me]=h,t.data[xe]=g,t.data[ye]=y,t}static identity(r){return r||(r=new ve),r.data[G]=1,r.data[q]=0,r.data[le]=0,r.data[X]=0,r.data[Z]=1,r.data[de]=0,r.data[me]=0,r.data[xe]=0,r.data[ye]=1,r}static translate(r,e,t){return t||(t=new ve),t.data[G]=1,t.data[q]=0,t.data[le]=r,t.data[X]=0,t.data[Z]=1,t.data[de]=e,t.data[me]=0,t.data[xe]=0,t.data[ye]=1,t}static scale(r,e,t){return t||(t=new ve),t.data[G]=r,t.data[q]=0,t.data[le]=0,t.data[X]=0,t.data[Z]=e,t.data[de]=0,t.data[me]=0,t.data[xe]=0,t.data[ye]=1,t}static rotate(r,e){const t=Math.cos(r),o=Math.sin(r);return e||(e=new ve),e.data[G]=t,e.data[q]=-o,e.data[le]=0,e.data[X]=o,e.data[Z]=t,e.data[de]=0,e.data[me]=0,e.data[xe]=0,e.data[ye]=1,e}static copy(r,e,t){return e||(e=new ve),e.data[0]=r.data[0],e.data[1]=r.data[1],e.data[2]=r.data[2],e.data[3]=r.data[3],e.data[4]=r.data[4],e.data[5]=r.data[5],e.data[6]=r.data[6],e.data[7]=r.data[7],e.data[8]=r.data[8],e}translate(r,e){return this.data[le]=this.data[G]*r+this.data[q]*e+this.data[le],this.data[de]=this.data[X]*r+this.data[Z]*e+this.data[de],this}scale(r,e){return this.data[G]=this.data[G]*r,this.data[q]=this.data[q]*e,this.data[X]=this.data[X]*r,this.data[Z]=this.data[Z]*e,this}rotate(r){if(r===0||!(r%Math.PI*2))return this;const e=Math.cos(r),t=Math.sin(r),o=this.data[G]*e+this.data[q]*t,i=this.data[q]*e-this.data[G]*t,s=this.data[X]*e+this.data[Z]*t,l=this.data[Z]*e-this.data[X]*t;return this.data[G]=o,this.data[q]=i,this.data[X]=s,this.data[Z]=l,this}multiply(r){return ve.multiply(this,r,this)}get tx(){return this.data[le]}get ty(){return this.data[de]}get ta(){return this.data[G]}get tb(){return this.data[q]}get tc(){return this.data[X]}get td(){return this.data[Z]}transformPoint(r,e){return[this.data[G]*r+this.data[q]*e+this.data[le],this.data[X]*r+this.data[Z]*e+this.data[X]]}}const ms=new ve,Wt=0,Yt=2,$t=4,Ht=6,jt=1,Qt=3,Kt=5,Xt=7;class cr{constructor(r){u(this,"data");this.data=new Float32Array(8),r&&(this.data[Wt]=r[Wt],this.data[Yt]=r[Yt],this.data[$t]=r[$t],this.data[Ht]=r[Ht],this.data[jt]=r[jt],this.data[Qt]=r[Qt],this.data[Kt]=r[Kt],this.data[Xt]=r[Xt])}static translate(r,e,t,o,i,s,l,c,d){return d||(d=new cr),d.data[Wt]=r,d.data[Yt]=t,d.data[$t]=i,d.data[Ht]=l,d.data[jt]=e,d.data[Qt]=o,d.data[Kt]=s,d.data[Xt]=c,d}get x1(){return this.data[Wt]}get x2(){return this.data[Yt]}get x3(){return this.data[$t]}get x4(){return this.data[Ht]}get y1(){return this.data[jt]}get y2(){return this.data[Qt]}get y3(){return this.data[Kt]}get y4(){return this.data[Xt]}}var fe;(function(n){n[n.Init=0]="Init",n[n.OutOfBounds=2]="OutOfBounds",n[n.InBounds=4]="InBounds",n[n.InViewport=8]="InViewport"})(fe||(fe={}));const Mt=new Map;Mt.set(fe.Init,"init");Mt.set(fe.OutOfBounds,"outOfBounds");Mt.set(fe.InBounds,"inBounds");Mt.set(fe.InViewport,"inViewport");var B;(function(n){n[n.Children=1]="Children",n[n.ScaleRotate=2]="ScaleRotate",n[n.Local=4]="Local",n[n.Global=8]="Global",n[n.Clipping=16]="Clipping",n[n.CalculatedZIndex=32]="CalculatedZIndex",n[n.ZIndexSortedChildren=64]="ZIndexSortedChildren",n[n.PremultipliedColors=128]="PremultipliedColors",n[n.WorldAlpha=256]="WorldAlpha",n[n.RenderState=512]="RenderState",n[n.IsRenderable=1024]="IsRenderable",n[n.None=0]="None",n[n.All=2047]="All"})(B||(B={}));class on extends et{constructor(e,t){super();u(this,"stage");u(this,"children",[]);u(this,"props");u(this,"updateType",B.All);u(this,"globalTransform");u(this,"scaleRotateTransform");u(this,"localTransform");u(this,"renderCoords");u(this,"renderBound");u(this,"strictBound");u(this,"preloadBound");u(this,"clippingRect",{x:0,y:0,width:0,height:0,valid:!1});u(this,"isRenderable",!1);u(this,"renderState",fe.Init);u(this,"worldAlpha",1);u(this,"premultipliedColorTl",0);u(this,"premultipliedColorTr",0);u(this,"premultipliedColorBl",0);u(this,"premultipliedColorBr",0);u(this,"calcZIndex",0);u(this,"onTextureLoaded",(e,t)=>{this.stage.requestRender(),this.emit("loaded",{type:"texture",dimensions:t})});u(this,"onTextureFailed",(e,t)=>{this.emit("failed",{type:"texture",error:t})});u(this,"onTextureFreed",e=>{this.emit("freed",{type:"texture"})});this.stage=e,this.props={...t,parent:null},this.parent=t.parent,this.updateScaleRotateTransform()}loadTexture(e,t,o=null){this.props.texture&&this.unloadTexture();const{txManager:i}=this.stage,s=i.loadTexture(e,t,o);this.props.texture=s,this.props.textureOptions=o,this.setUpdateType(B.IsRenderable),queueMicrotask(()=>{s.state==="loaded"?this.onTextureLoaded(s,s.dimensions):s.state==="failed"?this.onTextureFailed(s,s.error):s.state==="freed"&&this.onTextureFreed(s),s.on("loaded",this.onTextureLoaded),s.on("failed",this.onTextureFailed),s.on("freed",this.onTextureFreed)})}unloadTexture(){if(this.props.texture){const{texture:e}=this.props;e.off("loaded",this.onTextureLoaded),e.off("failed",this.onTextureFailed),e.off("freed",this.onTextureFreed),e.setRenderableOwner(this,!1)}this.props.texture=null,this.props.textureOptions=null,this.setUpdateType(B.IsRenderable)}loadShader(e,t){const o=this.stage.renderer.getShaderManager();F(o);const{shader:i,props:s}=o.loadShader(e,t);this.props.shader=i,this.props.shaderProps=s,this.setUpdateType(B.IsRenderable)}setUpdateType(e){this.updateType|=e;const t=this.props.parent;t&&!(t.updateType&B.Children)&&t.setUpdateType(B.Children)}sortChildren(){this.children.sort((e,t)=>e.calcZIndex-t.calcZIndex)}updateScaleRotateTransform(){this.scaleRotateTransform=ve.rotate(this.props.rotation,this.scaleRotateTransform).scale(this.props.scaleX,this.props.scaleY)}updateLocalTransform(){F(this.scaleRotateTransform);const e=this.props.pivotX*this.props.width,t=this.props.pivotY*this.props.height,o=this.props.mountX*this.props.width,i=this.props.mountY*this.props.height;this.localTransform=ve.translate(e-o+this.props.x,t-i+this.props.y,this.localTransform).multiply(this.scaleRotateTransform).translate(-e,-t),this.setUpdateType(B.Global)}update(e,t){this.updateType&B.ScaleRotate&&(this.updateScaleRotateTransform(),this.setUpdateType(B.Local)),this.updateType&B.Local&&(this.updateLocalTransform(),this.setUpdateType(B.Global));const o=this.props.parent;let i=B.None;this.updateType&B.Global&&(F(this.localTransform),this.globalTransform=ve.copy((o==null?void 0:o.globalTransform)||this.localTransform,this.globalTransform),o&&this.globalTransform.multiply(this.localTransform),this.calculateRenderCoords(),this.updateBoundingRect(),this.setUpdateType(B.Clipping|B.RenderState|B.Children),i|=B.Global),this.updateType&B.Clipping&&(this.calculateClippingRect(t),this.setUpdateType(B.Children),i|=B.Clipping),this.updateType&B.WorldAlpha&&(o?this.worldAlpha=o.worldAlpha*this.props.alpha:this.worldAlpha=this.props.alpha,this.setUpdateType(B.Children|B.PremultipliedColors),i|=B.WorldAlpha),this.updateType&B.PremultipliedColors&&(this.premultipliedColorTl=bt(this.props.colorTl,this.worldAlpha,!0),this.props.colorTl===this.props.colorTr&&this.props.colorBl===this.props.colorBr&&this.props.colorTl===this.props.colorBl?this.premultipliedColorTr=this.premultipliedColorBl=this.premultipliedColorBr=this.premultipliedColorTl:(this.premultipliedColorTr=bt(this.props.colorTr,this.worldAlpha,!0),this.premultipliedColorBl=bt(this.props.colorBl,this.worldAlpha,!0),this.premultipliedColorBr=bt(this.props.colorBr,this.worldAlpha,!0))),this.updateType&B.RenderState&&(this.updateRenderState(t),this.setUpdateType(B.IsRenderable)),this.updateType&B.IsRenderable&&this.updateIsRenderable(),o&&this.updateType&B.CalculatedZIndex&&(this.calculateZIndex(),o.setUpdateType(B.ZIndexSortedChildren)),this.updateType&B.Children&&this.children.length&&this.children.forEach(s=>{s.setUpdateType(i),s.updateType!==0&&s.update(e,this.clippingRect)}),this.updateType&B.ZIndexSortedChildren&&this.sortChildren(),this.updateType=0}checkRenderProps(){return this.props.texture?!0:!this.props.width||!this.props.height?!1:!!(this.props.shader||this.props.clipping||this.props.color!==0||this.props.colorTop!==0||this.props.colorBottom!==0||this.props.colorLeft!==0||this.props.colorRight!==0||this.props.colorTl!==0||this.props.colorTr!==0||this.props.colorBl!==0||this.props.colorBr!==0)}checkRenderBounds(e){F(this.renderBound);const t=e.width||this.stage.root.width,o=e.height||this.stage.root.height;this.strictBound=dt(e.x,e.y,e.x+t,e.y+o,this.strictBound);const i=this.stage.boundsMargin;return this.preloadBound=dt(e.x-i[3],e.y-i[0],e.x+t+i[1],e.y+o+i[2],this.preloadBound),bn(this.renderBound,this.strictBound)?fe.InViewport:bn(this.renderBound,this.preloadBound)?fe.InBounds:fe.OutOfBounds}updateRenderState(e){const t=this.checkRenderBounds(e);if(t!==this.renderState){const o=this.renderState;this.renderState=t,o===fe.InViewport&&this.emit("outOfViewport",{previous:o,current:t});const i=Mt.get(t);F(i),this.emit(i,{previous:o,current:t})}}setRenderState(e){e!==this.renderState&&(this.renderState=e,this.emit(fe[e]))}updateIsRenderable(){let e;this.checkRenderProps()?e=this.renderState>fe.OutOfBounds:e=!1,this.isRenderable!==e&&(this.isRenderable=e,this.onChangeIsRenderable(e))}onChangeIsRenderable(e){var t;(t=this.props.texture)==null||t.setRenderableOwner(this,e)}calculateRenderCoords(){const{width:e,height:t,globalTransform:o}=this;F(o);const{tx:i,ty:s,ta:l,tb:c,tc:d,td:h}=o;if(c===0&&d===0){const g=i,y=i+e*l,b=s,m=s+t*h;this.renderCoords=cr.translate(g,b,y,b,y,m,g,m,this.renderCoords)}else this.renderCoords=cr.translate(i,s,i+e*l,s+e*d,i+e*l+t*c,s+e*d+t*h,i+t*c,s+t*h,this.renderCoords)}updateBoundingRect(){const{renderCoords:e,globalTransform:t}=this;F(t),F(e);const{tb:o,tc:i}=t,{x1:s,y1:l,x3:c,y3:d}=e;if(o===0||i===0)this.renderBound=dt(s,l,c,d,this.renderBound);else{const{x2:h,x4:g,y2:y,y4:b}=e;this.renderBound=dt(Math.min(s,h,c,g),Math.min(l,y,d,b),Math.max(s,h,c,g),Math.max(l,y,d,b),this.renderBound)}}calculateClippingRect(e){F(this.globalTransform);const{clippingRect:t,props:o,globalTransform:i}=this,{clipping:s}=o,l=i.tb!==0||i.tc!==0;s&&!l?(t.x=i.tx,t.y=i.ty,t.width=this.width*i.ta,t.height=this.height*i.td,t.valid=!0):t.valid=!1,e.valid&&t.valid?en(e,t,t):e.valid&&(so(e,t),t.valid=!0)}calculateZIndex(){var s,l;const e=this.props,t=e.zIndex||0,o=((s=e.parent)==null?void 0:s.zIndex)||0;let i=t;(l=e.parent)!=null&&l.zIndexLocked&&(i=t<o?t:o),this.calcZIndex=i}destroy(){this.unloadTexture(),this.clippingRect.valid=!1,this.isRenderable=!1,delete this.renderCoords,delete this.renderBound,delete this.strictBound,delete this.preloadBound,delete this.globalTransform,delete this.scaleRotateTransform,delete this.localTransform,this.props.texture=null,this.props.shader=null,this.removeAllListeners(),this.parent=null}renderQuads(e){const{width:t,height:o,texture:i,textureOptions:s,shader:l,shaderProps:c}=this.props,{premultipliedColorTl:d,premultipliedColorTr:h,premultipliedColorBl:g,premultipliedColorBr:y}=this,{zIndex:b,worldAlpha:m,globalTransform:w,clippingRect:S}=this;F(w),e.addQuad({width:t,height:o,colorTl:d,colorTr:h,colorBl:g,colorBr:y,texture:i,textureOptions:s,zIndex:b,shader:l,shaderProps:c,alpha:m,clippingRect:S,tx:w.tx,ty:w.ty,ta:w.ta,tb:w.tb,tc:w.tc,td:w.td})}get id(){return this.props.id}get x(){return this.props.x}set x(e){this.props.x!==e&&(this.props.x=e,this.setUpdateType(B.Local))}get absX(){var e,t,o;return this.props.x+(((e=this.props.parent)==null?void 0:e.absX)||((o=(t=this.props.parent)==null?void 0:t.globalTransform)==null?void 0:o.tx)||0)}get absY(){var e,t;return this.props.y+((t=(e=this.props.parent)==null?void 0:e.absY)!=null?t:0)}get y(){return this.props.y}set y(e){this.props.y!==e&&(this.props.y=e,this.setUpdateType(B.Local))}get width(){return this.props.width}set width(e){this.props.width!==e&&(this.props.width=e,this.setUpdateType(B.Local))}get height(){return this.props.height}set height(e){this.props.height!==e&&(this.props.height=e,this.setUpdateType(B.Local))}get scale(){return this.scaleX}set scale(e){this.scaleX=e,this.scaleY=e}get scaleX(){return this.props.scaleX}set scaleX(e){this.props.scaleX!==e&&(this.props.scaleX=e,this.setUpdateType(B.ScaleRotate))}get scaleY(){return this.props.scaleY}set scaleY(e){this.props.scaleY!==e&&(this.props.scaleY=e,this.setUpdateType(B.ScaleRotate))}get mount(){return this.props.mount}set mount(e){(this.props.mountX!==e||this.props.mountY!==e)&&(this.props.mountX=e,this.props.mountY=e,this.props.mount=e,this.setUpdateType(B.Local))}get mountX(){return this.props.mountX}set mountX(e){this.props.mountX!==e&&(this.props.mountX=e,this.setUpdateType(B.Local))}get mountY(){return this.props.mountY}set mountY(e){this.props.mountY!==e&&(this.props.mountY=e,this.setUpdateType(B.Local))}get pivot(){return this.props.pivot}set pivot(e){(this.props.pivotX!==e||this.props.pivotY!==e)&&(this.props.pivotX=e,this.props.pivotY=e,this.props.pivot=e,this.setUpdateType(B.Local))}get pivotX(){return this.props.pivotX}set pivotX(e){this.props.pivotX!==e&&(this.props.pivotX=e,this.setUpdateType(B.Local))}get pivotY(){return this.props.pivotY}set pivotY(e){this.props.pivotY!==e&&(this.props.pivotY=e,this.setUpdateType(B.Local))}get rotation(){return this.props.rotation}set rotation(e){this.props.rotation!==e&&(this.props.rotation=e,this.setUpdateType(B.ScaleRotate))}get alpha(){return this.props.alpha}set alpha(e){this.props.alpha=e,this.setUpdateType(B.PremultipliedColors|B.WorldAlpha)}get clipping(){return this.props.clipping}set clipping(e){this.props.clipping=e,this.setUpdateType(B.Clipping)}get color(){return this.props.color}set color(e){(this.props.colorTl!==e||this.props.colorTr!==e||this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorTl=e,this.colorTr=e,this.colorBl=e,this.colorBr=e),this.props.color=e,this.setUpdateType(B.PremultipliedColors)}get colorTop(){return this.props.colorTop}set colorTop(e){(this.props.colorTl!==e||this.props.colorTr!==e)&&(this.colorTl=e,this.colorTr=e),this.props.colorTop=e,this.setUpdateType(B.PremultipliedColors)}get colorBottom(){return this.props.colorBottom}set colorBottom(e){(this.props.colorBl!==e||this.props.colorBr!==e)&&(this.colorBl=e,this.colorBr=e),this.props.colorBottom=e,this.setUpdateType(B.PremultipliedColors)}get colorLeft(){return this.props.colorLeft}set colorLeft(e){(this.props.colorTl!==e||this.props.colorBl!==e)&&(this.colorTl=e,this.colorBl=e),this.props.colorLeft=e,this.setUpdateType(B.PremultipliedColors)}get colorRight(){return this.props.colorRight}set colorRight(e){(this.props.colorTr!==e||this.props.colorBr!==e)&&(this.colorTr=e,this.colorBr=e),this.props.colorRight=e,this.setUpdateType(B.PremultipliedColors)}get colorTl(){return this.props.colorTl}set colorTl(e){this.props.colorTl=e,this.setUpdateType(B.PremultipliedColors)}get colorTr(){return this.props.colorTr}set colorTr(e){this.props.colorTr=e,this.setUpdateType(B.PremultipliedColors)}get colorBl(){return this.props.colorBl}set colorBl(e){this.props.colorBl=e,this.setUpdateType(B.PremultipliedColors)}get colorBr(){return this.props.colorBr}set colorBr(e){this.props.colorBr=e,this.setUpdateType(B.PremultipliedColors)}get zIndexLocked(){return this.props.zIndexLocked||0}set zIndexLocked(e){this.props.zIndexLocked=e,this.setUpdateType(B.CalculatedZIndex|B.Children),this.children.forEach(t=>{t.setUpdateType(B.CalculatedZIndex)})}get zIndex(){return this.props.zIndex}set zIndex(e){this.props.zIndex=e,this.setUpdateType(B.CalculatedZIndex|B.Children),this.children.forEach(t=>{t.setUpdateType(B.CalculatedZIndex)})}get parent(){return this.props.parent}set parent(e){const t=this.props.parent;if(t!==e){if(this.props.parent=e,t){const o=t.children.indexOf(this);F(o!==-1,"CoreNode.parent: Node not found in old parent's children!"),t.children.splice(o,1),t.setUpdateType(B.Children|B.ZIndexSortedChildren)}e&&(e.children.push(this),this.setUpdateType(B.All),e.setUpdateType(B.Children|B.ZIndexSortedChildren)),this.updateScaleRotateTransform()}}}let xs=1;function sn(){return xs++}class $r extends et{constructor(e,t,o,i){var s;super();u(this,"rendererMain");u(this,"stage");u(this,"id");u(this,"coreNode");u(this,"_children",[]);u(this,"_src","");u(this,"_parent",null);u(this,"_texture",null);u(this,"_shader",null);u(this,"_data",{});u(this,"onTextureLoaded",(e,t)=>{this.emit("loaded",t)});u(this,"onTextureFailed",(e,t)=>{this.emit("failed",t)});u(this,"onTextureFreed",(e,t)=>{this.emit("freed",t)});u(this,"onOutOfBounds",(e,t)=>{this.emit("outOfBounds",t)});u(this,"onInBounds",(e,t)=>{this.emit("inBounds",t)});u(this,"onOutOfViewport",(e,t)=>{this.emit("outOfViewport",t)});u(this,"onInViewport",(e,t)=>{this.emit("inViewport",t)});this.rendererMain=t,this.stage=o,this.id=(s=i==null?void 0:i.id)!=null?s:sn(),this.coreNode=i||new on(this.stage,{id:this.id,x:e.x,y:e.y,width:e.width,height:e.height,alpha:e.alpha,clipping:e.clipping,color:e.color,colorTop:e.colorTop,colorBottom:e.colorBottom,colorLeft:e.colorLeft,colorRight:e.colorRight,colorTl:e.colorTl,colorTr:e.colorTr,colorBl:e.colorBl,colorBr:e.colorBr,zIndex:e.zIndex,zIndexLocked:e.zIndexLocked,scaleX:e.scaleX,scaleY:e.scaleY,mountX:e.mountX,mountY:e.mountY,mount:e.mount,pivot:e.pivot,pivotX:e.pivotX,pivotY:e.pivotY,rotation:e.rotation,parent:null,shader:null,shaderProps:null,texture:null,textureOptions:null}),this.coreNode.on("loaded",this.onTextureLoaded),this.coreNode.on("failed",this.onTextureFailed),this.coreNode.on("freed",this.onTextureFreed),this.coreNode.on("outOfBounds",this.onOutOfBounds),this.coreNode.on("inBounds",this.onInBounds),this.coreNode.on("outOfViewport",this.onOutOfViewport),this.coreNode.on("inViewport",this.onInViewport),this.parent=e.parent,this.shader=e.shader,this.texture=e.texture,this.src=e.src,this._data=e.data}get x(){return this.coreNode.x}set x(e){this.coreNode.x=e}get y(){return this.coreNode.y}set y(e){this.coreNode.y=e}get width(){return this.coreNode.width}set width(e){this.coreNode.width=e}get height(){return this.coreNode.height}set height(e){this.coreNode.height=e}get alpha(){return this.coreNode.alpha}set alpha(e){this.coreNode.alpha=e}get clipping(){return this.coreNode.clipping}set clipping(e){this.coreNode.clipping=e}get color(){return this.coreNode.color}set color(e){this.coreNode.color=e}get colorTop(){return this.coreNode.colorTop}set colorTop(e){this.coreNode.colorTop=e}get colorBottom(){return this.coreNode.colorBottom}set colorBottom(e){this.coreNode.colorBottom=e}get colorLeft(){return this.coreNode.colorLeft}set colorLeft(e){this.coreNode.colorLeft=e}get colorRight(){return this.coreNode.colorRight}set colorRight(e){this.coreNode.colorRight=e}get colorTl(){return this.coreNode.colorTl}set colorTl(e){this.coreNode.colorTl=e}get colorTr(){return this.coreNode.colorTr}set colorTr(e){this.coreNode.colorTr=e}get colorBl(){return this.coreNode.colorBl}set colorBl(e){this.coreNode.colorBl=e}get colorBr(){return this.coreNode.colorBr}set colorBr(e){this.coreNode.colorBr=e}get scale(){return this.scaleX!==this.scaleY?null:this.coreNode.scaleX}set scale(e){e!==null&&(this.coreNode.scaleX=e,this.coreNode.scaleY=e)}get scaleX(){return this.coreNode.scaleX}set scaleX(e){this.coreNode.scaleX=e}get scaleY(){return this.coreNode.scaleY}set scaleY(e){this.coreNode.scaleY=e}get mount(){return this.coreNode.mount}set mount(e){this.coreNode.mount=e}get mountX(){return this.coreNode.mountX}set mountX(e){this.coreNode.mountX=e}get mountY(){return this.coreNode.mountY}set mountY(e){this.coreNode.mountY=e}get pivot(){return this.coreNode.pivot}set pivot(e){this.coreNode.pivot=e}get pivotX(){return this.coreNode.pivotX}set pivotX(e){this.coreNode.pivotX=e}get pivotY(){return this.coreNode.pivotY}set pivotY(e){this.coreNode.pivotY=e}get rotation(){return this.coreNode.rotation}set rotation(e){this.coreNode.rotation=e}get parent(){return this._parent}set parent(e){var o;const t=this._parent;if(this._parent=e,this.coreNode.parent=(o=e==null?void 0:e.coreNode)!=null?o:null,t){const i=t.children.indexOf(this);F(i!==-1,"MainOnlyNode.parent: Node not found in old parent's children!"),t.children.splice(i,1)}e&&e.children.push(this)}get children(){return this._children}get zIndex(){return this.coreNode.zIndex}set zIndex(e){this.coreNode.zIndex=e}get zIndexLocked(){return this.coreNode.zIndexLocked}set zIndexLocked(e){this.coreNode.zIndexLocked=e}get src(){return this._src}set src(e){if(this._src!==e){if(this._src=e,!e){this.texture=null;return}this.texture=this.rendererMain.createTexture("ImageTexture",{src:e})}}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this.rendererMain.textureTracker.decrementTextureRefCount(this._texture),e&&this.rendererMain.textureTracker.incrementTextureRefCount(e),this._texture=e,e?this.coreNode.loadTexture(e.txType,e.props,e.options):this.coreNode.unloadTexture())}get shader(){return this._shader}set shader(e){this._shader!==e&&(this._shader=e,e&&this.coreNode.loadShader(e.shType,e.props))}get data(){return this._data}set data(e){this._data=Ro(e)}destroy(){this.emit("beforeDestroy",{});let e=this.children[0];for(;e;)e.destroy(),e=this.children[0];this.coreNode.destroy(),this.parent=null,this.texture=null,this.emit("afterDestroy",{}),this.removeAllListeners()}flush(){}animate(e,t){const o=new gs(this.coreNode,e,t);return new ps(this.stage.animationManager,o)}}const ys=n=>{let r=!1;const e=()=>{if(n.updateAnimations(),!n.hasSceneUpdates()){n.calculateFps(),setTimeout(e,16.666666666666668),r||(n.emit("idle"),r=!0);return}r=!1,n.drawFrame(),requestAnimationFrame(e)};requestAnimationFrame(e)},vs=()=>performance?performance.now():Date.now();class ws{constructor(){u(this,"activeAnimations",new Set)}registerAnimation(r){this.activeAnimations.add(r)}unregisterAnimation(r){this.activeAnimations.delete(r)}update(r){this.activeAnimations.forEach(e=>{e.update(r)})}}class bs{constructor(r){u(this,"imageWorkersEnabled",!0);u(this,"messageManager",{});u(this,"workers",[]);u(this,"workerIndex",0);this.workers=this.createWorkers(r),this.workers.forEach(e=>{e.onmessage=this.handleMessage.bind(this)})}handleMessage(r){const{src:e,data:t,error:o}=r.data,i=this.messageManager[e];if(i){const[s,l]=i;delete this.messageManager[e],o?l(new Error(o)):s(t)}}createWorkers(r=1){const e="\n      function hasAlphaChannel(mimeType) {\n          return (mimeType.indexOf(\"image/png\") !== -1);\n      }\n\n      async function getImage(src, premultiplyAlpha) {\n        return new Promise(function(resolve, reject) {\n          var xhr = new XMLHttpRequest();\n          xhr.open('GET', src, true);\n          xhr.responseType = 'blob';\n\n          xhr.onload = function() {\n            if (xhr.status === 200) {\n              var blob = xhr.response;\n              var hasAlphaChannel = premultiplyAlpha !== undefined ? premultiplyAlpha : hasAlphaChannel(blob.type);\n\n              createImageBitmap(blob, {\n                premultiplyAlpha: hasAlphaChannel ? 'premultiply' : 'none',\n                colorSpaceConversion: 'none',\n                imageOrientation: 'none'\n              }).then(function(data) {\n                resolve({ data: data, premultiplyAlpha: premultiplyAlpha });\n              }).catch(function(error) {\n                reject(error);\n              });\n            } else {\n              reject(new Error('Failed to load image: ' + xhr.statusText));\n            }\n          };\n\n          xhr.onerror = function() {\n            reject(new Error('Network error occurred while trying to fetch the image.'));\n          };\n\n          xhr.send();\n        });\n      }\n\n      self.onmessage = async (event) => {\n        var src = event.data.src;\n        var premultiplyAlpha = event.data.premultiplyAlpha;\n\n        getImage(src, premultiplyAlpha)\n          .then(function(data) {\n              self.postMessage({ src: src, data: data }, [data.data]);\n          })\n          .catch(function(error) {\n              self.postMessage({ src: src, error: error.message });\n          });\n      };\n    ",t=new Blob([e.replace('"use strict";',"")],{type:"application/javascript"}),o=(self.URL?URL:webkitURL).createObjectURL(t),i=[];for(let s=0;s<r;s++)i.push(new Worker(o));return i}getNextWorker(){const r=this.workers[this.workerIndex];return this.workerIndex=(this.workerIndex+1)%this.workers.length,r}convertUrlToAbsolute(r){return new URL(r,self.location.href).href}getImage(r,e){return new Promise((t,o)=>{try{if(this.workers){const i=this.convertUrlToAbsolute(r);this.messageManager[i]=[t,o],this.getNextWorker().postMessage({src:i,premultiplyAlpha:e})}}catch(i){o(i)}})}}const kt=class kt extends io{constructor(e,t){super(e);u(this,"props");this.props=kt.resolveDefaults(t)}async getTextureData(){const{width:e,height:t}=this.props,o=e*t*4,i=new Uint8ClampedArray(o);for(let s=0;s<o;s+=4){const l=Math.floor(Math.random()*256);i[s]=l,i[s+1]=l,i[s+2]=l,i[s+3]=255}return{data:new ImageData(i,e,t)}}static makeCacheKey(e){const t=kt.resolveDefaults(e);return"NoiseTexture,".concat(t.width,",").concat(t.height,",").concat(t.cacheId)}static resolveDefaults(e){var t,o,i;return{width:(t=e.width)!=null?t:128,height:(o=e.height)!=null?o:128,cacheId:(i=e.cacheId)!=null?i:0}}};u(kt,"z$__type__Props");let Hr=kt;class Ss{constructor(r){u(this,"usedMemory",0);u(this,"txConstructors",{});u(this,"textureKeyCache",new Map);u(this,"textureIdCache",new Map);u(this,"ctxTextureCache",new WeakMap);u(this,"textureRefCountMap",new WeakMap);u(this,"imageWorkerManager",null);u(this,"hasCreateImageBitmap",!!self.createImageBitmap);u(this,"hasWorker",!!self.Worker);u(this,"renderer");this.hasCreateImageBitmap&&this.hasWorker&&(this.imageWorkerManager=new bs(r)),this.hasCreateImageBitmap||console.warn("[Lightning] createImageBitmap is not supported on this browser. ImageTexture will be slower."),this.registerTextureType("ImageTexture",Yr),this.registerTextureType("ColorTexture",gi),this.registerTextureType("NoiseTexture",Hr),this.registerTextureType("SubTexture",pi)}registerTextureType(r,e){this.txConstructors[r]=e}loadTexture(r,e,t=null){var s;const o=this.txConstructors[r];if(!o)throw new Error('Texture type "'.concat(r,'" is not registered'));let i;if((t==null?void 0:t.id)!==void 0&&this.textureIdCache.has(t.id)&&(i=this.textureIdCache.get(t.id)),!i){const l=t==null?void 0:t.id,c=(s=t==null?void 0:t.cacheKey)!=null?s:o.makeCacheKey(e);c&&this.textureKeyCache.has(c)?i=this.textureKeyCache.get(c):i=new o(this,e),l&&this.addTextureIdToCache(l,c,i)}return t!=null&&t.preload&&this.getCtxTexture(i).load(),i}addTextureIdToCache(r,e,t){const{textureIdCache:o,textureRefCountMap:i}=this;o.set(r,t),i.has(t)?i.get(t).count++:(i.set(t,{cacheKey:e,count:1}),e&&this.textureKeyCache.set(e,t))}removeTextureIdFromCache(r){var i;const{textureIdCache:e,textureRefCountMap:t}=this,o=e.get(r);if(o){if(e.delete(r),t.has(o)){const s=t.get(o);F(s),s.count--,s.count===0&&(t.delete(o),s.cacheKey&&this.textureKeyCache.delete(s.cacheKey))}(i=this.ctxTextureCache.get(o))==null||i.free()}}getDebugInfo(){return{keyCacheSize:this.textureKeyCache.size,idCacheSize:this.textureIdCache.size}}getCtxTexture(r){if(this.ctxTextureCache.has(r))return this.ctxTextureCache.get(r);const e=this.renderer.createCtxTexture(r);return this.ctxTextureCache.set(r,e),e}}class As{constructor(r){u(this,"memUsed",0);u(this,"textures",new Map);u(this,"threshold");this.threshold=r,r===0&&(this.setTextureMemUse=()=>{})}setTextureMemUse(r,e){if(this.textures.has(r)&&(this.memUsed-=this.textures.get(r)),e===0){this.textures.delete(r);return}else this.memUsed+=e,this.textures.set(r,e);this.memUsed>this.threshold&&this.gc()}gc(){this.textures.forEach((r,e)=>{e.renderable||e.free()})}}const Cs=2e6;class Ts extends et{constructor(e){super();u(this,"options");u(this,"animationManager");u(this,"txManager");u(this,"txMemManager");u(this,"fontManager");u(this,"textRenderers");u(this,"shManager");u(this,"renderer");u(this,"root");u(this,"boundsMargin");u(this,"deltaTime",0);u(this,"lastFrameTime",0);u(this,"currentFrameTime",0);u(this,"fpsNumFrames",0);u(this,"fpsElapsedTime",0);u(this,"renderRequested",!1);u(this,"contextSpy",null);this.options=e;const{canvas:t,clearColor:o,rootId:i,debug:s,appWidth:l,appHeight:c,boundsMargin:d,enableContextSpy:h,numImageWorkers:g,txMemByteThreshold:y}=e;this.txManager=new Ss(g),this.txMemManager=new As(y),this.shManager=new Ki,this.animationManager=new ws,this.contextSpy=h?new Xi:null;let b=[0,0,0,0];d&&(b=Array.isArray(d)?d:[d,d,d,d]),this.boundsMargin=b,s!=null&&s.monitorTextureCache&&setInterval(()=>{F(this.txManager);const w=this.txManager.getDebugInfo();console.log("Texture ID Cache Size: ",w.idCacheSize),console.log("Texture Key Cache Size: ",w.keyCacheSize)},1e3),this.renderer=new mi({stage:this,canvas:t,pixelRatio:e.devicePhysicalPixelRatio*e.deviceLogicalPixelRatio,clearColor:o!=null?o:4278190080,bufferMemory:Cs,txManager:this.txManager,txMemManager:this.txMemManager,shManager:this.shManager,contextSpy:this.contextSpy}),this.txManager.renderer=this.renderer,this.textRenderers={canvas:new Hi(this),sdf:new ds(this)},this.fontManager=new _o(this.textRenderers);const m=new on(this,{id:i,x:0,y:0,width:l,height:c,alpha:1,clipping:!1,color:0,colorTop:0,colorBottom:0,colorLeft:0,colorRight:0,colorTl:0,colorTr:0,colorBl:0,colorBr:0,zIndex:0,zIndexLocked:0,scaleX:1,scaleY:1,mountX:0,mountY:0,mount:0,pivot:.5,pivotX:.5,pivotY:.5,rotation:0,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null});this.root=m,ys(this)}updateAnimations(){const{animationManager:e}=this;this.root&&(this.lastFrameTime=this.currentFrameTime,this.currentFrameTime=vs(),this.deltaTime=this.lastFrameTime?this.currentFrameTime-this.lastFrameTime:100/6,this.emit("frameTick",{time:this.currentFrameTime,delta:this.deltaTime}),e.update(this.deltaTime))}hasSceneUpdates(){return!!this.root.updateType||this.renderRequested}drawFrame(){const{renderer:e,renderRequested:t}=this;this.root.updateType!==0&&this.root.update(this.deltaTime,this.root.clippingRect),e==null||e.reset(),this.addQuads(this.root),e==null||e.render(),this.calculateFps(),t&&(this.renderRequested=!1)}calculateFps(){var t,o,i;const{fpsUpdateInterval:e}=this.options;if(e&&(this.fpsNumFrames++,this.fpsElapsedTime+=this.deltaTime,this.fpsElapsedTime>=e)){const s=Math.round(this.fpsNumFrames*1e3/this.fpsElapsedTime);this.fpsNumFrames=0,this.fpsElapsedTime=0,this.emit("fpsUpdate",{fps:s,contextSpyData:(o=(t=this.contextSpy)==null?void 0:t.getData())!=null?o:null}),(i=this.contextSpy)==null||i.reset()}}addQuads(e){F(this.renderer&&e.globalTransform),e.isRenderable&&e.renderQuads(this.renderer);for(let t=0;t<e.children.length;t++){const o=e.children[t];o&&(o==null?void 0:o.worldAlpha)!==0&&this.addQuads(o)}}requestRender(){this.renderRequested=!0}resolveTextRenderer(e,t=null){let o=t,i=!1;if(o){const l=this.textRenderers[o];l?l.canRenderFont(e)||(console.warn("Cannot use override text renderer '".concat(o,"' for font"),e),o=null,i=!0):(console.warn("Text renderer override '".concat(o,"' not found.")),o=null,i=!0)}if(!o){for(const[l,c]of Object.entries(this.textRenderers))if(l!=="canvas"&&c.canRenderFont(e)){o=l;break}o||(o="canvas")}i&&console.warn("Falling back to text renderer ".concat(String(o)));const s=this.textRenderers[o];return F(s,"resolvedTextRenderer undefined"),s}}class _s extends on{constructor(e,t){super(e,t);u(this,"textRenderer");u(this,"trState");u(this,"_textRendererOverride",null);u(this,"onTextLoaded",()=>{const{contain:e}=this,t=this.trState.props.width,o=this.trState.props.height,i=this.trState.textW||0,s=this.trState.textH||0;e==="both"?(this.props.width=t,this.props.height=o):e==="width"?(this.props.width=t,this.props.height=s):e==="none"&&(this.props.width=i,this.props.height=s),this.updateLocalTransform(),this.stage.requestRender(),this.emit("loaded",{type:"text",dimensions:{width:this.trState.textW||0,height:this.trState.textH||0}})});u(this,"onTextFailed",(e,t)=>{this.emit("failed",{type:"text",error:t})});this._textRendererOverride=t.textRendererOverride;const{resolvedTextRenderer:o,textRendererState:i}=this.resolveTextRendererAndState({x:this.absX,y:this.absY,width:t.width,height:t.height,textAlign:t.textAlign,color:t.color,zIndex:t.zIndex,contain:t.contain,scrollable:t.scrollable,scrollY:t.scrollY,offsetY:t.offsetY,letterSpacing:t.letterSpacing,debug:t.debug,fontFamily:t.fontFamily,fontSize:t.fontSize,fontStretch:t.fontStretch,fontStyle:t.fontStyle,fontWeight:t.fontWeight,text:t.text,lineHeight:t.lineHeight,maxLines:t.maxLines,textBaseline:t.textBaseline,verticalAlign:t.verticalAlign,overflowSuffix:t.overflowSuffix});this.textRenderer=o,this.trState=i}get width(){return this.props.width}set width(e){this.props.width=e,this.textRenderer.set.width(this.trState,e),this.contain==="none"&&this.setUpdateType(B.Local)}get height(){return this.props.height}set height(e){this.props.height=e,this.textRenderer.set.height(this.trState,e),this.contain!=="both"&&this.setUpdateType(B.Local)}get color(){return this.trState.props.color}set color(e){this.textRenderer.set.color(this.trState,e)}get text(){return this.trState.props.text}set text(e){this.textRenderer.set.text(this.trState,e)}get textRendererOverride(){return this._textRendererOverride}set textRendererOverride(e){this._textRendererOverride=e,this.textRenderer.destroyState(this.trState);const{resolvedTextRenderer:t,textRendererState:o}=this.resolveTextRendererAndState(this.trState.props);this.textRenderer=t,this.trState=o}get fontSize(){return this.trState.props.fontSize}set fontSize(e){this.textRenderer.set.fontSize(this.trState,e)}get fontFamily(){return this.trState.props.fontFamily}set fontFamily(e){this.textRenderer.set.fontFamily(this.trState,e)}get fontStretch(){return this.trState.props.fontStretch}set fontStretch(e){this.textRenderer.set.fontStretch(this.trState,e)}get fontStyle(){return this.trState.props.fontStyle}set fontStyle(e){this.textRenderer.set.fontStyle(this.trState,e)}get fontWeight(){return this.trState.props.fontWeight}set fontWeight(e){this.textRenderer.set.fontWeight(this.trState,e)}get textAlign(){return this.trState.props.textAlign}set textAlign(e){this.textRenderer.set.textAlign(this.trState,e)}get contain(){return this.trState.props.contain}set contain(e){this.textRenderer.set.contain(this.trState,e)}get scrollable(){return this.trState.props.scrollable}set scrollable(e){this.textRenderer.set.scrollable(this.trState,e)}get scrollY(){return this.trState.props.scrollY}set scrollY(e){this.textRenderer.set.scrollY(this.trState,e)}get offsetY(){return this.trState.props.offsetY}set offsetY(e){this.textRenderer.set.offsetY(this.trState,e)}get letterSpacing(){return this.trState.props.letterSpacing}set letterSpacing(e){this.textRenderer.set.letterSpacing(this.trState,e)}get lineHeight(){return this.trState.props.lineHeight}set lineHeight(e){this.textRenderer.set.lineHeight&&this.textRenderer.set.lineHeight(this.trState,e)}get maxLines(){return this.trState.props.maxLines}set maxLines(e){this.textRenderer.set.maxLines&&this.textRenderer.set.maxLines(this.trState,e)}get textBaseline(){return this.trState.props.textBaseline}set textBaseline(e){this.textRenderer.set.textBaseline&&this.textRenderer.set.textBaseline(this.trState,e)}get verticalAlign(){return this.trState.props.verticalAlign}set verticalAlign(e){this.textRenderer.set.verticalAlign&&this.textRenderer.set.verticalAlign(this.trState,e)}get overflowSuffix(){return this.trState.props.overflowSuffix}set overflowSuffix(e){this.textRenderer.set.overflowSuffix&&this.textRenderer.set.overflowSuffix(this.trState,e)}get debug(){return this.trState.props.debug}set debug(e){this.textRenderer.set.debug(this.trState,e)}update(e,t){super.update(e,t),F(this.globalTransform),this.textRenderer.set.x(this.trState,this.globalTransform.tx),this.textRenderer.set.y(this.trState,this.globalTransform.ty)}checkRenderProps(){return this.trState.props.text!==""?!0:super.checkRenderProps()}onChangeIsRenderable(e){super.onChangeIsRenderable(e),this.textRenderer.setIsRenderable(this.trState,e)}renderQuads(e){F(this.globalTransform),this.textRenderer.renderQuads(this.trState,this.globalTransform,this.clippingRect,this.worldAlpha)}destroy(){super.destroy(),this.textRenderer.destroyState(this.trState)}resolveTextRendererAndState(e){const t=this.stage.resolveTextRenderer(e,this._textRendererOverride),o=t.createState(e);return o.emitter.on("loaded",this.onTextLoaded),o.emitter.on("failed",this.onTextFailed),t.scheduleUpdateState(o),{resolvedTextRenderer:t,textRendererState:o}}}class Rs extends $r{constructor(r,e,t){super(r,e,t,new _s(t,{id:sn(),x:r.x,y:r.y,width:r.width,height:r.height,alpha:r.alpha,clipping:r.clipping,color:r.color,colorTop:r.colorTop,colorBottom:r.colorBottom,colorLeft:r.colorLeft,colorRight:r.colorRight,colorTl:r.colorTl,colorTr:r.colorTr,colorBl:r.colorBl,colorBr:r.colorBr,zIndex:r.zIndex,zIndexLocked:r.zIndexLocked,scaleX:r.scaleX,scaleY:r.scaleY,mountX:r.mountX,mountY:r.mountY,mount:r.mount,pivot:r.pivot,pivotX:r.pivotX,pivotY:r.pivotY,rotation:r.rotation,text:r.text,fontSize:r.fontSize,fontFamily:r.fontFamily,fontWeight:r.fontWeight,fontStretch:r.fontStretch,fontStyle:r.fontStyle,contain:r.contain,scrollable:r.scrollable,letterSpacing:r.letterSpacing,textAlign:r.textAlign,scrollY:r.scrollY,offsetY:r.offsetY,textRendererOverride:r.textRendererOverride,lineHeight:r.lineHeight,maxLines:r.maxLines,textBaseline:r.textBaseline,verticalAlign:r.verticalAlign,overflowSuffix:r.overflowSuffix,debug:r.debug,parent:null,texture:null,textureOptions:null,shader:null,shaderProps:null}))}get text(){return this.coreNode.text}set text(r){this.coreNode.text=r}get textRendererOverride(){return this.coreNode.textRendererOverride}set textRendererOverride(r){this.coreNode.textRendererOverride=r}get fontSize(){return this.coreNode.fontSize}set fontSize(r){this.coreNode.fontSize=r}get fontFamily(){return this.coreNode.fontFamily}set fontFamily(r){this.coreNode.fontFamily=r}get fontWeight(){return this.coreNode.fontWeight}set fontWeight(r){this.coreNode.fontWeight=r}get fontStretch(){return this.coreNode.fontStretch}set fontStretch(r){this.coreNode.fontStretch=r}get fontStyle(){return this.coreNode.fontStyle}set fontStyle(r){this.coreNode.fontStyle=r}get textAlign(){return this.coreNode.textAlign}set textAlign(r){this.coreNode.textAlign=r}get contain(){return this.coreNode.contain}set contain(r){this.coreNode.contain=r}get scrollable(){return this.coreNode.scrollable}set scrollable(r){this.coreNode.scrollable=r}get scrollY(){return this.coreNode.scrollY}set scrollY(r){this.coreNode.scrollY=r}get offsetY(){return this.coreNode.offsetY}set offsetY(r){this.coreNode.offsetY=r}get letterSpacing(){return this.coreNode.letterSpacing}set letterSpacing(r){this.coreNode.letterSpacing=r}get lineHeight(){return this.coreNode.lineHeight}set lineHeight(r){r&&(this.coreNode.lineHeight=r)}get maxLines(){return this.coreNode.maxLines}set maxLines(r){r&&(this.coreNode.maxLines=r)}get textBaseline(){return this.coreNode.textBaseline}set textBaseline(r){r&&(this.coreNode.textBaseline=r)}get verticalAlign(){return this.coreNode.verticalAlign}set verticalAlign(r){r&&(this.coreNode.verticalAlign=r)}get overflowSuffix(){return this.coreNode.overflowSuffix}set overflowSuffix(r){r&&(this.coreNode.overflowSuffix=r)}get debug(){return this.coreNode.debug}set debug(r){this.coreNode.debug=r}}class Is{constructor(){u(this,"root",null);u(this,"stage",null);u(this,"rendererMain",null)}async init(r,e,t){this.stage=new Ts({rootId:sn(),appWidth:e.appWidth,appHeight:e.appHeight,txMemByteThreshold:e.txMemByteThreshold,boundsMargin:e.boundsMargin,deviceLogicalPixelRatio:e.deviceLogicalPixelRatio,devicePhysicalPixelRatio:e.devicePhysicalPixelRatio,clearColor:e.clearColor,canvas:t,fpsUpdateInterval:e.fpsUpdateInterval,enableContextSpy:e.enableContextSpy,numImageWorkers:e.numImageWorkers,debug:{monitorTextureCache:!1}}),this.rendererMain=r,F(this.stage.root);const o=new $r(r.resolveNodeDefaults({}),this.rendererMain,this.stage,this.stage.root);this.root=o,o.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,o)),this.onCreateNode(o),e.coreExtensionModule&&await us(e.coreExtensionModule,this.stage),this.stage.on("fpsUpdate",(i,s)=>{this.onFpsUpdate(s)}),this.stage.on("frameTick",(i,s)=>{this.onFrameTick(s)}),this.stage.on("idle",()=>{this.onIdle()})}createNode(r){F(this.rendererMain),F(this.stage);const e=new $r(r,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}createTextNode(r){F(this.rendererMain),F(this.stage);const e=new Rs(r,this.rendererMain,this.stage);return e.once("beforeDestroy",this.onBeforeDestroyNode.bind(this,e)),this.onCreateNode(e),e}destroyNode(r){r.destroy()}releaseTexture(r){const{stage:e}=this;F(e),e.txManager.removeTextureIdFromCache(r)}getRootNode(){return F(this.root),this.root}onCreateNode(r){throw new Error("Method not implemented.")}onBeforeDestroyNode(r){throw new Error("Method not implemented.")}onFpsUpdate(r){throw new Error("Method not implemented.")}onFrameTick(r){throw new Error("Method not implemented.")}onIdle(){throw new Error("Method not implemented.")}}let Fe,an;function Bs(n={},r="app"){const e=new Is;return Fe=new fs(n,r,e),an=Fe.createShader.bind(Fe),Fe}class ks extends Array{constructor(r){super(),this._parent=r}get selected(){return this[this._parent.selected||0]}get firstChild(){return this[0]}insert(r,e){if(e){const t=this.indexOf(e);this.splice(t,0,r)}else this.push(r);r.parent=this._parent,this._parent._isDirty=!0}remove(r){const e=this.indexOf(r);e>=0&&this.splice(e,1)}}function Es(){return{BASE_URL:"/solid-demo-app/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,LEGACY:!1}&&!1}const Fs=Es()||!1,Se={debug:!1,animationsEnabled:!0,animationSettings:{duration:250,easing:"ease-in-out"},fontSettings:{fontFamily:"Ubuntu",fontSize:100}};function Bn(n){return Ns(n)&&n.debug}function qe(n,r,...e){Fs&&(Se.debug||Bn(r)||Bn(e[0]))&&console.log(n,r,...e)}function xt(n){return typeof n=="function"}function Ns(n){return typeof n=="object"}function dr(n){return Array.isArray(n)}function Ls(n){return typeof n=="string"}function Ms(n){return typeof n=="number"}function zs(n){return Number.isInteger(n)}function Ps(n,r){for(const e of r)if(e in n)return!0;return!1}function Io(n,r={}){if(dr(n))n.forEach(e=>{Io(e,r)});else if(n)for(const e in n)r[e]===void 0&&(r[e]=n[e]);return r}class kn extends Array{constructor(r,e={}){return dr(e)?super(...e):Ls(e)?super(e):super(...Object.entries(e).filter(([t,o])=>o).map(([t])=>t)),this.onChange=r,this}has(r){return this.indexOf(r)>=0}is(r){return this.indexOf(r)>=0}add(r){this.push(r),this.onChange()}toggle(r){this.has(r)?this.remove(r):this.add(r)}remove(r){const e=this.indexOf(r);e>=0&&(this.splice(e,1),this.onChange())}}function Ds(n){const r=[];for(let p=0;p<n.children.length;p++){const x=n.children[p];if(x.name!=="TextNode"){if(x.name==="text"&&!(x.width||x.height))return!1;r.push(x)}}const e=r.length,o=(n.flexDirection||"row")==="row",i=o?"width":"height",s=o?"height":"width",l=o?"marginLeft":"marginTop",c=o?"marginRight":"marginBottom",d=o?"x":"y",h=o?"y":"x",g=n[i]||0,y=n[s]||0,b=n.gap||0,m=n.justifyContent||"flexStart",w=n.alignItems;let S=0;["center","spaceBetween","spaceEvenly"].includes(m)&&(S=r.reduce((p,x)=>p+(x[i]||0),0));const A=y&&w?p=>{w==="flexStart"?p[h]=0:w==="center"?p[h]=(y-(p[s]||0))/2:w==="flexEnd"&&(p[h]=y-(p[s]||0))}:p=>p;if(m==="flexStart"){let p=0;if(r.forEach(x=>{x[d]=p+(x[l]||0),p+=(x[i]||0)+b+(x[l]||0)+(x[c]||0),A(x)}),n._autosized){const x=p-b;if(x!==n[i])return n[i]=x,!0}}else if(m==="flexEnd"){let p=g;for(let x=e-1;x>=0;x--){const v=r[x];F(v),v[d]=p-(v[i]||0)-(v[c]||0),p-=(v[i]||0)+b+(v[l]||0)+(v[c]||0),A(v)}}else if(m==="center"){let p=(g-(S+b*(e-1)))/2;r.forEach(x=>{x[d]=p,p+=(x[i]||0)+b,A(x)})}else if(m==="spaceBetween"){const p=(g-S)/(e-1);let x=0;r.forEach(v=>{v[d]=x,x+=(v[i]||0)+p,A(v)})}else if(m==="spaceEvenly"){const p=(g-S)/(e+1);let x=p;r.forEach(v=>{v[d]=x,x+=(v[i]||0)+p,A(v)})}return!1}const{animationSettings:Os}=Se;function En(n){const r=[];for(const[e,t]of Object.entries(n))r.push({type:e,props:t});return an("DynamicShader",{effects:r})}function yt(n=""){return{set(r){Ms(r)&&(r={width:r,color:255}),this.effects={...this.effects||{},["border".concat(n)]:r},this["_border".concat(n)]=r},get(){return this["_border".concat(n)]}}}const Us=["alpha","color","colorTop","colorRight","colorLeft","colorBottom","colorTl","colorTr","colorBl","colorBr","height","fontSize","lineHeight","mount","mountX","mountY","pivot","pivotX","pivotY","rotation","scale","width","worldX","worldY","x","y","zIndex","zIndexLocked"],Ws=["clipping","contain","fontFamily","fontStretch","fontStyle","fontWeight","letterSpacing","maxLines","offsetY","overflowSuffix","rtt","scrollable","scrollY","src","text","textAlign","textBaseline","textOverflow","texture","verticalAlign","wordWrap"];class We extends Object{constructor(r){super(),this._animationQueue=[],this._animationRunning=!1,this.name=r,this.rendered=!1,this.autofocus=!1,this._renderProps={x:0,y:0},this.children=new ks(this);for(const e of Us)Object.defineProperty(this,e,{get(){return this.lng&&this.lng[e]||this["_".concat(e)]},set(t){this["_".concat(e)]=t,this._sendToLightningAnimatable(e,t)}});for(const e of Ws)Object.defineProperty(this,e,{get(){return this.lng&&this.lng[e]||this["_".concat(e)]},set(t){this["_".concat(e)]=t,this._sendToLightning(e,t)}});Object.defineProperties(this,{borderRadius:{set(e){this._borderRadius=e,this.effects={...this.effects||{},radius:{radius:e}}},get(){return this._borderRadius}},border:yt(),borderLeft:yt("Left"),borderRight:yt("Right"),borderTop:yt("Top"),borderBottom:yt("Bottom")}),Object.defineProperties(this,{linearGradient:{set(e={}){this._linearGradient=e,this.effects={...this.effects||{},linearGradient:e}},get(){return this._linearGradient}}})}get effects(){return this._effects}set effects(r){this._effects=r,this.rendered&&(this.shader=En(r))}get parent(){return this._parent}set parent(r){var e;this._parent=r,this.rendered&&this.lng&&(this.lng.parent=(e=r==null?void 0:r.lng)!=null?e:null)}get shader(){return this._shader}set shader(r){dr(r)?this._shader=an(...r):this._shader=r,this._sendToLightning("shader",this._shader)}_sendToLightningAnimatable(r,e){if(this.lng){if(Se.animationsEnabled&&this.transition&&(this.transition===!0||this.transition[r])){const t=this.transition===!0||this.transition[r]===!0?void 0:this.transition[r];return this.animate({[r]:e},t).start()}this.lng[r]=e}else this._renderProps[r]=e}_sendToLightning(r,e){this.rendered&&this.lng?this.lng[r]=e:this._renderProps[r]=e}animate(r,e){return F(this.lng,"Node must be rendered before animating"),this.lng.animate(r,e||this.animationSettings)}chain(r,e){return this._animationRunning&&(this._animationQueue=[],this._animationRunning=!1),e?this._animationQueueSettings=e:this._animationQueueSettings||(this._animationQueueSettings=e||this.animationSettings),e=e||this._animationQueueSettings,this._animationQueue.push({props:r,animationSettings:e}),this}async start(){let r=this._animationQueue.shift();for(;r;)this._animationRunning=!0,await this.animate(r.props,r.animationSettings).start().waitUntilStopped(),r=this._animationQueue.shift();this._animationRunning=!1,this._animationQueueSettings=void 0}setFocus(){if(this.rendered){if(this.forwardFocus!==void 0)if(xt(this.forwardFocus)){if(this.forwardFocus.call(this,this)!==!1)return}else{const r=typeof this.forwardFocus=="number"?this.forwardFocus:null;if(r!==null&&r<this.children.length){const e=this.children[r];e instanceof We&&e.setFocus();return}}queueMicrotask(()=>zr(this))}else this.autofocus=!0}isTextNode(){return this.name==="text"}_resizeOnTextLoad(){this.lng.on("loaded",(r,e)=>{if(e.type==="text"){const{dimensions:t}=e;this.parent.updateLayout(this,t)}})}getText(){return this.children.map(r=>r.text).join("")}destroy(){var r;this._queueDelete&&((r=this.lng)==null||r.destroy())}set style(r){dr(r)?this._style=Io(r):this._style=r;for(const e in this._style)this[e]===void 0&&(this[e]=this._style[e])}get style(){return this._style}get hasChildren(){return this.children.length>0}getChildById(r){return this.children.find(e=>e.id===r)}searchChildrenById(r){for(const e of this.children){if(e.id===r)return e;if(e instanceof We){const t=e.searchChildrenById(r);if(t)return t}}}set states(r){this._states=new kn(this._stateChanged.bind(this),r),this.rendered&&this._stateChanged()}get states(){return this._states=this._states||new kn(this._stateChanged.bind(this)),this._states}get animationSettings(){return this._animationSettings||Os}set animationSettings(r){this._animationSettings=r}updateLayout(r,e){var t;this.hasChildren&&(qe("Layout: ",this),xt(this.onBeforeLayout)&&this.onBeforeLayout.call(this,r,e),this.display==="flex"&&Ds(this)&&((t=this.parent)==null||t.updateLayout()),xt(this.onLayout)&&this.onLayout.call(this,r,e))}_stateChanged(){if(qe("State Changed: ",this,this.states),this.forwardStates){const e=this.states.slice();this.children.forEach(t=>t.states=e)}const r=this.states;if(this._undoStyles||this.style&&Ps(this.style,r)){this._undoStyles=this._undoStyles||[];const e={};this._undoStyles.forEach(o=>{e[o]=this.style[o]});const t=r.reduce((o,i)=>{const s=this.style[i];return s&&(o={...o,...s}),o},{});this._undoStyles=Object.keys(t),t.transition!==void 0&&(this.transition=t.transition),Object.assign(this,{...e,...t})}}render(){const r=this,e=this.parent;if(!e){console.warn("Parent not set - no node created for: ",this);return}if(!e.rendered){console.warn("Parent not rendered yet: ",this);return}if(this.rendered){console.warn("Node already rendered: ",this);return}e._isDirty&&(e.updateLayout(),e._isDirty=!1),r.updateLayout(),this.states.length&&this._stateChanged();let t=r._renderProps;e.lng&&(t.parent=e.lng),r._effects&&(this.shader=En(r._effects)),r.isTextNode()?(t={...Se.fontSettings,...t,text:r.getText()},t.contain&&(t.width||(t.width=(e.width||0)-(t.x||0)-(t.marginRight||0),r._width=t.width,r._autosized=!0),t.contain==="both"&&!t.height&&!t.maxLines&&(t.height=(e.height||0)-(t.y||0)-(t.marginBottom||0),r._height=t.height,r._autosized=!0)),qe("Rendering: ",this,t),r.lng=Fe.createTextNode(t),xt(r.onLoad)&&r.lng.on("loaded",r.onLoad),(!r.width||!r.height)&&(r._autosized=!0,r._resizeOnTextLoad())):(t.texture||(isNaN(t.width)&&(t.width=(e.width||0)-(t.x||0),r._width=t.width,r._autosized=!0),isNaN(t.height)&&(t.height=(e.height||0)-(t.y||0),r._height=t.height,r._autosized=!0),!t.color&&!t.src&&(r._color=t.color=0)),qe("Rendering: ",this,t),r.lng=Fe.createNode(t),r.onFail&&r.lng.on("failed",r.onFail),r.onLoad&&r.lng.on("loaded",r.onLoad)),r.rendered=!0,xt(this.onCreate)&&this.onCreate.call(this,r),r.lng.div&&(r.lng.div.solid=r),delete this._renderProps,r.name!=="text"&&r.children.forEach(o=>{o.render?o.render():o.text!==""&&console.warn("TextNode outside of <Text>: ",o)}),r.autofocus&&r.setFocus()}}const N=n=>(()=>{var r=zt("text");return br(r,n,!1),r})(),z=n=>(()=>{var r=zt("node");return br(r,n,!1),r})();function Ys({createElement:n,createTextNode:r,isTextNode:e,replaceText:t,insertNode:o,removeNode:i,setProperty:s,getParentNode:l,getFirstChild:c,getNextSibling:d}){function h(p,x,v,T){if(v!==void 0&&!T&&(T=[]),typeof x!="function")return g(p,x,T,v);Te(I=>g(p,x(),I,v),T)}function g(p,x,v,T,I){for(;typeof v=="function";)v=v();if(x===v)return v;const R=typeof x,C=T!==void 0;if(R==="string"||R==="number")if(R==="number"&&(x=x.toString()),C){let _=v[0];_&&e(_)?t(_,x):_=r(x),v=m(p,v,T,_)}else v!==""&&typeof v=="string"?t(c(p),v=x):(m(p,v,T,r(x)),v=x);else if(x==null||R==="boolean")v=m(p,v,T);else{if(R==="function")return Te(()=>{let _=x();for(;typeof _=="function";)_=_();v=g(p,_,v,T)}),()=>v;if(Array.isArray(x)){const _=[];if(y(_,x,I))return Te(()=>v=g(p,_,v,T,!0)),()=>v;if(_.length===0){const E=m(p,v,T);if(C)return v=E}else Array.isArray(v)?v.length===0?w(p,_,T):b(p,v,_):v==null||v===""?w(p,_):b(p,C&&v||[c(p)],_);v=_}else{if(Array.isArray(v)){if(C)return v=m(p,v,T,x);m(p,v,null,x)}else v==null||v===""||!c(p)?o(p,x):S(p,x,c(p));v=x}}return v}function y(p,x,v){let T=!1;for(let I=0,R=x.length;I<R;I++){let C=x[I],_;if(!(C==null||C===!0||C===!1))if(Array.isArray(C))T=y(p,C)||T;else if((_=typeof C)=="string"||_==="number")p.push(r(C));else if(_==="function")if(v){for(;typeof C=="function";)C=C();T=y(p,Array.isArray(C)?C:[C])||T}else p.push(C),T=!0;else p.push(C)}return T}function b(p,x,v){let T=v.length,I=x.length,R=T,C=0,_=0,E=d(x[I-1]),P=null;for(;C<I||_<R;){if(x[C]===v[_]){C++,_++;continue}for(;x[I-1]===v[R-1];)I--,R--;if(I===C){const k=R<T?_?d(v[_-1]):v[R-_]:E;for(;_<R;)o(p,v[_++],k)}else if(R===_)for(;C<I;)(!P||!P.has(x[C]))&&i(p,x[C]),C++;else if(x[C]===v[R-1]&&v[_]===x[I-1]){const k=d(x[--I]);o(p,v[_++],d(x[C++])),o(p,v[--R],k),x[I]=v[R]}else{if(!P){P=new Map;let L=_;for(;L<R;)P.set(v[L],L++)}const k=P.get(x[C]);if(k!=null)if(_<k&&k<R){let L=C,O=1,D;for(;++L<I&&L<R&&!((D=P.get(x[L]))==null||D!==k+O);)O++;if(O>k-_){const U=x[C];for(;_<k;)o(p,v[_++],U)}else S(p,v[_++],x[C++])}else C++;else i(p,x[C++])}}}function m(p,x,v,T){if(v===void 0){let R;for(;R=c(p);)i(p,R);return T&&o(p,T),""}const I=T||r("");if(x.length){let R=!1;for(let C=x.length-1;C>=0;C--){const _=x[C];if(I!==_){const E=l(_)===p;!R&&!C?E?S(p,I,_):o(p,I,v):E&&i(p,_)}else R=!0}}else o(p,I,v);return[I]}function w(p,x,v){for(let T=0,I=x.length;T<I;T++)o(p,x[T],v)}function S(p,x,v){o(p,x,v),i(p,v)}function A(p,x,v={},T){return x||(x={}),T||Te(()=>v.children=g(p,x.children,v.children)),Te(()=>x.ref&&x.ref(p)),Te(()=>{for(const I in x){if(I==="children"||I==="ref")continue;const R=x[I];R!==v[I]&&(s(p,I,R,v[I]),v[I]=R)}}),v}return{render(p,x){let v;return ut(T=>{v=T,h(x,p())}),v},insert:h,spread(p,x,v){typeof x=="function"?Te(T=>A(p,x(),T,v)):A(p,x,void 0,v)},createElement:n,createTextNode:r,insertNode:o,setProp(p,x,v,T){return s(p,x,v,T),v},mergeProps:rn,effect:Te,memo:te,createComponent:wo,use(p,x,v){return ae(()=>p(x,v))}}}function $s(n){const r=Ys(n);return r.mergeProps=rn,r}const Hs={createElement(n){return new We(n)},createTextNode(n){return{name:"TextNode",text:n,parent:void 0}},replaceText(n,r){qe("Replace Text: ",n,r),n.text=r;const e=n.parent;F(e),e.text=e.getText()},setProperty(n,r,e=!0){n[r]=e},insertNode(n,r,e){qe("INSERT: ",n,r,e),n.children.insert(r,e),r._queueDelete=!1,r instanceof We?n.rendered&&r.render():n.isTextNode()&&(n.text=n.getText())},isTextNode(n){return n.isTextNode()},removeNode(n,r){qe("REMOVE: ",n,r),n.children.remove(r),r._queueDelete=!0,r instanceof We&&queueMicrotask(()=>r.destroy())},getParentNode(n){return n.parent},getFirstChild(n){return n.children[0]},getNextSibling(n){const r=n.parent.children||[],e=r.indexOf(n)+1;if(e<r.length)return r[e]}},Bo=$s(Hs),js=async function(n,r){const e=Bs(Se.rendererOptions,r);await e.init();const t=new We("App");return t.lng=e.root,t.rendered=!0,Bo.render(n,t)},{effect:$c,memo:gt,createComponent:a,createElement:zt,createTextNode:Hc,insertNode:jc,insert:ko,spread:br,setProp:Qs,mergeProps:Q,use:Eo}=Bo;function M(n=""){return zs(n)?n:typeof n=="string"?n.startsWith("#")?+(n.replace("#","0x")+(n.length===7?"ff":"")):n.startsWith("0x")?Number(n):+("0x"+(n.length===6?n+"ff":n)):0}const Fn="_$DX_DELEGATE";function Ks(n,r=window.document){const e=r[Fn]||(r[Fn]=new Set);for(let t=0,o=n.length;t<o;t++){const i=n[t];e.has(i)||(e.add(i),r.addEventListener(i,Xs))}}function Xs(n){const r="$$".concat(n.type);let e=n.composedPath&&n.composedPath()[0]||n.target;for(n.target!==e&&Object.defineProperty(n,"target",{configurable:!0,value:e}),Object.defineProperty(n,"currentTarget",{configurable:!0,get(){return e||document}});e;){const t=e[r];if(t&&!e.disabled){const o=e["".concat(r,"Data")];if(o!==void 0?t.call(e,o,n):t.call(e,n),n.cancelBubble)return}e=e._$host||e.parentNode||e.host}}const Vs=!1;function Fo(){let n=new Set;function r(o){return n.add(o),()=>n.delete(o)}let e=!1;function t(o,i){if(e)return!(e=!1);const s={to:o,options:i,defaultPrevented:!1,preventDefault:()=>s.defaultPrevented=!0};for(const l of n)l.listener({...s,from:l.location,retry:c=>{c&&(e=!0),l.navigate(o,{...i,resolve:!1})}});return!s.defaultPrevented}return{subscribe:r,confirm:t}}let jr;function ln(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),jr=window.history.state._depth}ln();function Gs(n){return{...n,_depth:window.history.state&&window.history.state._depth}}function qs(n,r){let e=!1;return()=>{const t=jr;ln();const o=t==null?null:jr-t;if(e){e=!1;return}o&&r(o)?(e=!0,window.history.go(-o)):n()}}const Zs=/^(?:[a-z0-9]+:)?\/\//i,Js=/^\/+|(\/)\/+$/g,No="http://sr";function _t(n,r=!1){const e=n.replace(Js,"$1");return e?r||/^[?#]/.test(e)?e:"/"+e:""}function nr(n,r,e){if(Zs.test(r))return;const t=_t(n),o=e&&_t(e);let i="";return!o||r.startsWith("/")?i=t:o.toLowerCase().indexOf(t.toLowerCase())!==0?i=t+o:i=o,(i||"/")+_t(r,!i)}function ea(n,r){if(n==null)throw new Error(r);return n}function ta(n,r){return _t(n).replace(/\/*(\*.*)?$/g,"")+_t(r)}function Lo(n){const r={};return n.searchParams.forEach((e,t)=>{r[t]=e}),r}function ra(n,r,e){const[t,o]=n.split("/*",2),i=t.split("/").filter(Boolean),s=i.length;return l=>{const c=l.split("/").filter(Boolean),d=c.length-s;if(d<0||d>0&&o===void 0&&!r)return null;const h={path:s?"":"/",params:{}},g=y=>e===void 0?void 0:e[y];for(let y=0;y<s;y++){const b=i[y],m=c[y],w=b[0]===":",S=w?b.slice(1):b;if(w&&kr(m,g(S)))h.params[S]=m;else if(w||!kr(m,b))return null;h.path+="/".concat(m)}if(o){const y=d?c.slice(-d).join("/"):"";if(kr(y,g(o)))h.params[o]=y;else return null}return h}}function kr(n,r){const e=t=>t.localeCompare(n,void 0,{sensitivity:"base"})===0;return r===void 0?!0:typeof r=="string"?e(r):typeof r=="function"?r(n):Array.isArray(r)?r.some(e):r instanceof RegExp?r.test(n):!1}function na(n){const[r,e]=n.pattern.split("/*",2),t=r.split("/").filter(Boolean);return t.reduce((o,i)=>o+(i.startsWith(":")?2:3),t.length-(e===void 0?0:1))}function Mo(n){const r=new Map,e=Nt();return new Proxy({},{get(t,o){return r.has(o)||uo(e,()=>r.set(o,te(()=>n()[o]))),r.get(o)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(n())}})}function zo(n){let r=/(\/?\:[^\/]+)\?/.exec(n);if(!r)return[n];let e=n.slice(0,r.index),t=n.slice(r.index+r[0].length);const o=[e,e+=r[1]];for(;r=/^(\/\:[^\/]+)\?/.exec(t);)o.push(e+=r[1]),t=t.slice(r[0].length);return zo(t).reduce((i,s)=>[...i,...o.map(l=>l+s)],[])}const oa=100,Po=fo(),Do=fo(),Oo=()=>ea(go(Po),"<A> and 'use' router primitives can be only used inside a Route."),pt=()=>Oo().navigatorFactory(),cn=()=>Oo().params;function ia(n,r=""){const{component:e,load:t,children:o,info:i}=n,s=!o||Array.isArray(o)&&!o.length,l={key:n,component:e,load:t,info:i};return Uo(n.path).reduce((c,d)=>{for(const h of zo(d)){const g=ta(r,h);let y=s?g:g.split("/*",1)[0];y=y.split("/").map(b=>b.startsWith(":")||b.startsWith("*")?b:encodeURIComponent(b)).join("/"),c.push({...l,originalPath:h,pattern:y,matcher:ra(y,!s,n.matchFilters)})}return c},[])}function sa(n,r=0){return{routes:n,score:na(n[n.length-1])*1e4-r,matcher(e){const t=[];for(let o=n.length-1;o>=0;o--){const i=n[o],s=i.matcher(e);if(!s)return null;t.unshift({...s,route:i})}return t}}}function Uo(n){return Array.isArray(n)?n:[n]}function Wo(n,r="",e=[],t=[]){const o=Uo(n);for(let i=0,s=o.length;i<s;i++){const l=o[i];if(l&&typeof l=="object"){l.hasOwnProperty("path")||(l.path="");const c=ia(l,r);for(const d of c){e.push(d);const h=Array.isArray(l.children)&&l.children.length===0;if(l.children&&!h)Wo(l.children,d.pattern,e,t);else{const g=sa([...e],t.length);t.push(g)}e.pop()}}}return e.length?t:t.sort((i,s)=>s.score-i.score)}function Nn(n,r){for(let e=0,t=n.length;e<t;e++){const o=n[e].matcher(r);if(o)return o}return[]}function aa(n,r){const e=new URL(No),t=te(c=>{const d=n();try{return new URL(d,e)}catch(h){return console.error("Invalid path ".concat(d)),c}},e,{equals:(c,d)=>c.href===d.href}),o=te(()=>t().pathname),i=te(()=>t().search,!0),s=te(()=>t().hash),l=()=>"";return{get pathname(){return o()},get search(){return i()},get hash(){return s()},get state(){return r()},get key(){return l()},query:Mo(He(i,()=>Lo(t())))}}let Oe;function la(n,r,e,t={}){const{signal:[o,i],utils:s={}}=n,l=s.parsePath||(k=>k),c=s.renderPath||(k=>k),d=s.beforeLeave||Fo(),h=nr("",t.base||"");if(h===void 0)throw new Error("".concat(h," is not a valid base path"));h&&!o().value&&i({value:h,replace:!0,scroll:!1});const[g,y]=W(!1),b=async k=>{y(!0);try{await bi(k)}finally{y(!1)}},[m,w]=W(o().value),[S,A]=W(o().state),p=aa(m,S),x=[],v=W([]),T=te(()=>Nn(r(),p.pathname)),I=Mo(()=>{const k=T(),L={};for(let O=0;O<k.length;O++)Object.assign(L,k[O].params);return L}),R={pattern:h,path:()=>h,outlet:()=>null,resolvePath(k){return nr(h,k)}};return Te(()=>{const{value:k,state:L}=o();ae(()=>{k!==m()&&b(()=>{Oe="native",w(k),A(L),v[1]([])}).then(()=>{Oe=void 0})})}),{base:R,location:p,params:I,isRouting:g,renderPath:c,parsePath:l,navigatorFactory:_,matches:T,beforeLeave:d,preloadRoute:P,singleFlight:t.singleFlight===void 0?!0:t.singleFlight,submissions:v};function C(k,L,O){ae(()=>{if(typeof L=="number"){L&&(s.go?s.go(L):console.warn("Router integration does not support relative routing"));return}const{replace:D,resolve:U,scroll:j,state:ie}={replace:!1,resolve:!0,scroll:!0,...O},ee=U?k.resolvePath(L):nr("",L);if(ee===void 0)throw new Error("Path '".concat(L,"' is not a routable path"));if(x.length>=oa)throw new Error("Too many redirects");const ce=m();if((ee!==ce||ie!==S())&&!Vs){if(d.confirm(ee,O)){const Ae=x.push({value:ce,replace:D,scroll:j,state:S()});b(()=>{Oe="navigate",w(ee),A(ie),v[1]([])}).then(()=>{x.length===Ae&&(Oe=void 0,E({value:ee,state:ie}))})}}})}function _(k){return k=k||go(Do)||R,(L,O)=>C(k,L,O)}function E(k){const L=x[0];L&&((k.value!==L.value||k.state!==L.state)&&i({...k,replace:L.replace,scroll:L.scroll}),x.length=0)}function P(k,L){const O=Nn(r(),k.pathname),D=Oe;Oe="preload";for(let U in O){const{route:j,params:ie}=O[U];j.component&&j.component.preload&&j.component.preload();const{load:ee}=j;L&&ee&&uo(e(),()=>ee({params:ie,location:{pathname:k.pathname,search:k.search,hash:k.hash,query:Lo(k),state:null,key:""},intent:"preload"}))}Oe=D}}function ca(n,r,e,t){const{base:o,location:i,params:s}=n,{pattern:l,component:c,load:d}=t().route,h=te(()=>t().path);c&&c.preload&&c.preload();const g=d?d({params:s,location:i,intent:Oe||"initial"}):void 0;return{parent:r,pattern:l,path:h,outlet:()=>c?wo(c,{params:s,location:i,data:g,get children(){return e()}}):e(),resolvePath(b){return nr(o.path(),b,h())}}}const da=n=>r=>{const{base:e}=r,t=yr(()=>r.children),o=te(()=>Wo(t(),r.base||""));let i;const s=la(n,o,()=>i,{base:e,singleFlight:r.singleFlight});return n.create&&n.create(s),a(Po.Provider,{value:s,get children(){return a(ha,{routerState:s,get root(){return r.root},get load(){return r.rootLoad},get children(){return[gt(()=>(i=Nt())&&null),a(ua,{routerState:s,get branches(){return o()}})]}})}})};function ha(n){const r=n.routerState.location,e=n.routerState.params,t=te(()=>n.load&&ae(()=>n.load({params:e,location:r,intent:"preload"})));return a(Ie,{get when(){return n.root},keyed:!0,get fallback(){return n.children},children:o=>a(o,{params:e,location:r,get data(){return t()},get children(){return n.children}})})}function ua(n){const r=[];let e;const t=te(He(n.routerState.matches,(o,i,s)=>{let l=i&&o.length===i.length;const c=[];for(let d=0,h=o.length;d<h;d++){const g=i&&i[d],y=o[d];s&&g&&y.route.key===g.route.key?c[d]=s[d]:(l=!1,r[d]&&r[d](),ut(b=>{r[d]=b,c[d]=ca(n.routerState,c[d-1]||n.routerState.base,Ln(()=>t()[d+1]),()=>n.routerState.matches()[d])}))}return r.splice(o.length).forEach(d=>d()),s&&l?s:(e=c[0],c)}));return Ln(()=>t()&&e)()}const Ln=n=>()=>a(Ie,{get when(){return n()},keyed:!0,children:r=>a(Do.Provider,{value:r,get children(){return r.outlet()}})}),he=n=>{const r=yr(()=>n.children);return rn(n,{get children(){return r()}})};function fa([n,r],e,t){return[e?()=>e(n()):n,t?o=>r(t(o)):r]}function ga(n){if(n==="#")return null;try{return document.querySelector(n)}catch(r){return null}}function pa(n){let r=!1;const e=o=>typeof o=="string"?{value:o}:o,t=fa(W(e(n.get()),{equals:(o,i)=>o.value===i.value}),void 0,o=>(!r&&n.set(o),o));return n.init&&$e(n.init((o=n.get())=>{r=!0,t[1](e(o)),r=!1})),da({signal:t,create:n.create,utils:n.utils})}function ma(n,r,e){return n.addEventListener(r,e),()=>n.removeEventListener(r,e)}function xa(n,r){const e=ga("#".concat(n));e?e.scrollIntoView():r&&window.scrollTo(0,0)}const ya=new Map;function va(n=!0,r=!1,e="/_server"){return t=>{const o=t.base.path(),i=t.navigatorFactory(t.base);let s={};function l(m){return m.namespaceURI==="http://www.w3.org/2000/svg"}function c(m){if(m.defaultPrevented||m.button!==0||m.metaKey||m.altKey||m.ctrlKey||m.shiftKey)return;const w=m.composedPath().find(T=>T instanceof Node&&T.nodeName.toUpperCase()==="A");if(!w||r&&!w.hasAttribute("link"))return;const S=l(w),A=S?w.href.baseVal:w.href;if((S?w.target.baseVal:w.target)||!A&&!w.hasAttribute("state"))return;const x=(w.getAttribute("rel")||"").split(/\s+/);if(w.hasAttribute("download")||x&&x.includes("external"))return;const v=S?new URL(A,document.baseURI):new URL(A);if(!(v.origin!==window.location.origin||o&&v.pathname&&!v.pathname.toLowerCase().startsWith(o.toLowerCase())))return[w,v]}function d(m){const w=c(m);if(!w)return;const[S,A]=w,p=t.parsePath(A.pathname+A.search+A.hash),x=S.getAttribute("state");m.preventDefault(),i(p,{resolve:!1,replace:S.hasAttribute("replace"),scroll:!S.hasAttribute("noscroll"),state:x&&JSON.parse(x)})}function h(m){const w=c(m);if(!w)return;const[S,A]=w;s[A.pathname]||t.preloadRoute(A,S.getAttribute("preload")!=="false")}function g(m){const w=c(m);if(!w)return;const[S,A]=w;s[A.pathname]||(s[A.pathname]=setTimeout(()=>{t.preloadRoute(A,S.getAttribute("preload")!=="false"),delete s[A.pathname]},200))}function y(m){const w=c(m);if(!w)return;const[,S]=w;s[S.pathname]&&(clearTimeout(s[S.pathname]),delete s[S.pathname])}function b(m){let w=m.submitter&&m.submitter.hasAttribute("formaction")?m.submitter.getAttribute("formaction"):m.target.getAttribute("action");if(!w)return;if(!w.startsWith("https://action/")){const A=new URL(w,No);if(w=t.parsePath(A.pathname+A.search),!w.startsWith(e))return}if(m.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const S=ya.get(w);if(S){m.preventDefault();const A=new FormData(m.target);m.submitter&&m.submitter.name&&A.append(m.submitter.name,m.submitter.value),S.call({r:t,f:m.target},A)}}Ks(["click","submit"]),document.addEventListener("click",d),n&&(document.addEventListener("mouseover",g),document.addEventListener("mouseout",y),document.addEventListener("focusin",h),document.addEventListener("touchstart",h)),document.addEventListener("submit",b),$e(()=>{document.removeEventListener("click",d),n&&(document.removeEventListener("mouseover",g),document.removeEventListener("mouseout",y),document.removeEventListener("focusin",h),document.removeEventListener("touchstart",h)),document.removeEventListener("submit",b)})}}function wa(n){const r=n.replace(/^.*?#/,"");if(!r.startsWith("/")){const[,e="/"]=window.location.hash.split("#",2);return"".concat(e,"#").concat(r)}return r}function ba(n){const r=()=>window.location.hash.slice(1),e=Fo();return pa({get:r,set({value:t,replace:o,scroll:i,state:s}){o?window.history.replaceState(Gs(s),"","#"+t):window.location.hash=t;const l=t.indexOf("#"),c=l>=0?t.slice(l+1):"";xa(c,i),ln()},init:t=>ma(window,"hashchange",qs(t,o=>!e.confirm(o&&o<0?o:r()))),create:va(n.preload,n.explicitLinks,n.actionBase),utils:{go:t=>window.history.go(t),renderPath:t=>"#".concat(t),parsePath:wa,beforeLeave:e}})(n)}var Sa=!!Fi,Aa=Sa?n=>Nt()?$e(n):n:$e;function Ca(n,r,e,t){return n.addEventListener(r,e,t),Aa(n.removeEventListener.bind(n,r,e,t))}function Ta(n,r=Nt()){let e=0,t,o;return()=>(e++,$e(()=>{e--,queueMicrotask(()=>{!e&&o&&(o(),o=t=void 0)})}),o||ut(i=>t=n(o=i),r),t)}var _a=Ta(()=>{const[n,r]=W(null);return Ca(window,"keydown",e=>{r(e),setTimeout(()=>r(null))}),n});function Vt(n){return typeof n=="function"}function Ra(n){return Array.isArray(n)}const Gt={ArrowLeft:"Left",ArrowRight:"Right",ArrowUp:"Up",ArrowDown:"Down",Enter:"Enter",l:"Last"," ":"Space",Backspace:"Back",Escape:"Escape"},[hr,Ia]=W([]),Ba=n=>{const r=_a();if(n)for(const[e,t]of Object.entries(n))Ra(t)?t.forEach(o=>{Gt[o]=e}):Gt[t]=e;return Ye(He(nn,(e,t,o=[])=>{let i=e;const s=[];for(;i;)i.states.has("focus")||(i.states.add("focus"),Vt(i.onFocus)&&i.onFocus.call(i,e,t)),s.push(i),i=i.parent;return o.forEach(l=>{s.includes(l)||(l.states.remove("focus"),Vt(l.onBlur)&&l.onBlur.call(l,e,t))}),Ia(s),s},{defer:!0})),Ye(()=>{const e=r();if(e){const t=Gt[e.key]||Gt[e.keyCode];ae(()=>{const o=hr();let i;for(const s of o){if(i=i||s,t){const l=s["on".concat(t)];if(Vt(l)&&l.call(s,e,s,i)===!0)break}else console.log("Unhandled key event: ".concat(e.key));if(Vt(s.onKeyPress)&&s.onKeyPress.call(s,e,t,s,i)===!0)break}return!1})}}),hr};function Yo(n,r){const e=r();let t,o,i,s;Array.isArray(e)?e.length===2?(t=s=e[0],o=i=e[1]):e.length===3?(t=e[0],o=i=e[1],s=e[2]):[t,i,s,o]=e:t=i=s=o=e,n.onBeforeLayout=(l,c)=>{if(c){n.width=n.children.reduce((g,y)=>g+(y.width||0),0)+o+i;const d=n.children[0];d&&(d.x=o,d.marginLeft=o);let h=0;n.children.forEach(g=>{g.y=t,g.marginTop=t,h=Math.max(h,g.height||0)}),n.height=h+t+s}}}function ka(n=[]){const r=[];let e;for(e=0;e<n.length;e++){const t=n[e];if(typeof t=="string"&&!t.includes("PAUSE-"))r.push(n[e]);else break}return[r.join(",\b ")].concat(n.slice(e))}function Mn(n){return new Promise(r=>{setTimeout(r,n)})}function Ea(n,r,e="en-US"){const t=window.speechSynthesis;return new Promise((o,i)=>{const s=new SpeechSynthesisUtterance(n);s.lang=e,s.onend=()=>{o()},s.onerror=l=>{i(l)},r.push(s),t.speak(s)})}function Qr(n,r,e=!0){const t=window.speechSynthesis,o=ka(Array.isArray(n)?n:[n]),i=[],s=[];let l=!0;return{series:(async()=>{try{for(;l&&o.length;){const d=await Promise.resolve(o.shift());if(l){if(typeof d=="string"&&d.includes("PAUSE-")){let h=Number(d.split("PAUSE-")[1])*1e3;isNaN(h)&&(h=0),await Mn(h)}else if(typeof d=="string"&&d.length){let g=3;for(;l&&g>0;)try{await Ea(d,s,r),g=0}catch(y){if(y instanceof SpeechSynthesisErrorEvent)if(y.error==="network")g--,console.warn("Speech synthesis network error. Retries left: ".concat(g)),await Mn(500*(3-g));else if(y.error==="canceled"||y.error==="interrupted")g=0;else throw new Error("SpeechSynthesisErrorEvent: ".concat(y.error));else throw y}}else if(typeof d=="function"){const h=Qr(d(),r,!1);i.push(h),await h.series}else if(Array.isArray(d)){const h=Qr(d,r,!1);i.push(h),await h.series}}else break}}finally{l=!1}})(),get active(){return l},append:d=>{o.push(d)},cancel:()=>{l&&(e&&t.cancel(),i.forEach(d=>{d.cancel()}),l=!1)}}}let qt;function Fa(n,r="en-US"){return qt&&qt.cancel(),qt=Qr(n,r),qt}var dn=(n,r)=>{let e;const t=()=>clearTimeout(e);return Nt()&&$e(t),Object.assign((...i)=>{e!==void 0&&t(),e=setTimeout(()=>n(...i),r)},{clear:t})};let Kr,Rt=[],Ce,Xr=!1;const Na=3e5;function zn(n,r){const e=dn(n,r);let t;const o=i=>{t=i,e(i)};return o.flush=()=>{e.clear(),n(t)},o.clear=e.clear,o}function vt(n){return n.id||n.name}function La(n=[]){if(!ne.onFocusChange||!ne.enabled)return;const r=n.every(i=>!i.loading),e=n.filter(i=>!Rt.includes(i));if(Kr(),!r&&ne.onFocusChange){ne.onFocusChange([]);return}Rt=n.slice(0);const t=[],o=e.reduce((i,s)=>(s.announce?(i.push([vt(s),"Announce",s.announce]),t.push(s.announce)):s.title?(i.push([vt(s),"Title",s.title]),t.push(s.title)):i.push([vt(s),"No Announce",""]),i),[]);if(e.reverse().reduce((i,s)=>(s.announceContext?(i.push([vt(s),"Context",s.announceContext]),t.push(s.announceContext)):i.push([vt(s),"No Context",""]),i),o),ne.debug&&console.table(o),t.length)return ne.speak(t.reduce((i,s)=>i.concat(s),[]))}function Ma(n){if(!Xr)return Ce=Fa(n)}const ne={debug:!1,enabled:!0,cancel:function(){Ce&&Ce.cancel()},clearPrevFocus:function(n=0){Rt=Rt.slice(0,n),Kr()},speak:function(n,{append:r=!1,notification:e=!1}={}){return ne.onFocusChange&&ne.enabled&&(ne.onFocusChange.flush(),r&&Ce&&Ce.active?Ce.append(n):(ne.cancel(),Ma(n)),e&&(Xr=!0,Ce==null||Ce.series.finally(()=>{Xr=!1,ne.refresh()}).catch(console.error))),Ce},refresh:function(n=0){ne.clearPrevFocus(n),ne.onFocusChange&&ne.onFocusChange(ae(()=>hr()))},setupTimers:function({focusDebounce:n=400,focusChangeTimeout:r=Na}={}){ne.onFocusChange=zn(La,n),Kr=zn(()=>{Rt=[]},r)}},za=()=>(ne.setupTimers(),Ye(He(hr,ne.onFocusChange,{defer:!0})),ne);function Pa(n,r){const e=Fe.createTexture("ImageTexture",{src:n});return r.reduce((t,o)=>{const{x:i,y:s,width:l,height:c}=o;return t[o.name]=Fe.createTexture("SubTexture",{texture:e,x:i,y:s,width:l,height:c}),t},{})}const[Da,Ne]=W(""),f={name:"Base Lightning TV",alpha:{primary:1,secondary:.7,tertiary:.1,inactive:.5,full:1,none:0,alpha1:.1,alpha2:.3,alpha3:.5,alpha4:.7,alpha5:.9},animation:{duration:{none:0,xfast:.1,fast:.25,normal:.5,slow:.75,xslow:.9},delay:{none:0,xfast:.01,fast:.025,normal:.05,slow:.075,xslow:.09},expressive:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},expressiveEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},expressiveExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standard:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standardEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},standardExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utility:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utilityEntrance:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25},utilityExit:{timingFunction:"cubic-bezier(0, 0, 1, 1)",delay:0,duration:.25}},asset:{arrowLeft:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAi0lEQVRIDWNgGAWjIfD//38JID5Fk5AAGqwKxPeA+D/VLQCaaQLEr0CGgwBVLQCa5wbEn0EGwwDVLAAaGA3Ev2AGw2iqWAA0rBiI/8EMRaYptgBoWDeygehsci1gIlcjWfqArqZdEMFcBLSEdpGMZAntkimSJbTLaEiW0K6oQLKEdoUdzJJRemiHAAD4n+yzPWCs7QAAAABJRU5ErkJggg==",arrowRight:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAGKADAAQAAAABAAAAGAAAAADiNXWtAAAAg0lEQVRIDWNgGAWjIYArBP7//38KiCVwyVMsDjQcBO4BsSrFhmEzAGw8hHgFpEywqaFIDMkCEPMzELtRZCC6ZjQLQNxfQByNro5sPhYLQEL/gLiYbEORNeKwACbcDVPLBGMMOhrmVDSapkFE00imaTKlaUajaVFB28Ju0CXrUQfhDAEAEgHss6NhpLQAAAAASUVORK5CYII=",backspaceOutline:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAAAXNSR0IArs4c6QAACmpJREFUeF7tnVmoZUcVhv/feY4gBEVEH/KgCCZxCK2itNo4xQQH+kUN0TjEiDGKKBqnaExwBjUaR6KY+NQgiQkOMSYhYEScIopGJOqDE2hHjfP0y4p1Oqdv33v2qr32Prv2Paug6Ye7Vu2qv75TtWvtGohMqUBAAQZ80zUVQAKUEIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypfPsAJJ0NYC92XRHKPB3AAfLv18BuBLAFSR/NKZWswJI0vkA3jCmILsw75sAvIfkR8eo22wAknQSgMvGEGFD8vwxgFeQvGrI+s4CIEnHAPgugHsMWfkNzevDAM4i+Z8h6t88QJLuXOB5yBAVzjxuVeBaAM8ieXNUjzkAdAmA50Yrmv5HKPATACeQ/GNEm6YBkvRyANblZhpHAXsfekpkOGsWIEmPAHA9gDuOo13mWhS4gOSZfdVoEiBJ9wFwA4D7961Y+lUpsK/v7KxVgL4K4ElOCS4l+Uyn7a41k3Q0gMcC2ANgH4CHV1T2OyStx69OzQEk6TwAZztr8lMAx5P8s9N+Y8wk2cTjfQDu66z080h+zml7yKwpgCSdCOByZyX+BuBRJH/otN84M0kWN/s0gOc4Kv8Nko922B1m0gxAkh4I4AcVwcL9JA/UVnjT7CXdHYD9yEzfVUkAjib5uxqNmgCoBAu/CeBhzsJ/kORZTtuNN5Nk70bXAZ0Hy59G8qIawVoB6LMAnu8suE3tH0/y3077NAMg6esAuoaoC0la7M2dJgdI0ssAXOgs8W8BHEvS/s9UoYCkdwN4bYfL5STto7U7TQpQZbDQehzreawHylSpgKSTAVza4XYDyeNqsp4MoB7BwteQfH9N5dL2NgWK3l0vyAdJWhDXnSYBSNLtANh3GO/KwgMk97trlYbbKiDJPpzea5U8JKuYqDIeql0kvQPAG5352ZLMR5L8q9M+zXZQYFcAJOnJAL7sbGWLMFuk2SLOmYIKzB6gEiz8HoB7O7U4meQXnLZp1qGApD8BuOcsh7AewcL3kuyadg4OjSSbhRxH0j4BjJok2Ufga0j+YdQHlcznDlBNsPAa+xpP8r/rEHbxjAKPbRuyHvKFY0Ik6QUALOprPfIT1gHRbAGSdDoA77aSX5Zg4e8nhGfx6FEgWoJn8Zy1QCTplq5vjc3NwnoEC/eQ/HYD8IwC0TbwrA2i2QHUI1h4JskLGoJnUIhWwLMWiGYFkCSLMX2t5WDhlneeLm5Dw5kDntEhkmRhEVvesWNqZgiTdC6AN3W1Svn72oOFkuxF+WcVIQUrai+IKuA5BBHJ453auc1mA1AJFn7Jsf7EKj9ZsLBHw1ZDtI5neAmaBUBzCxaO2cBj5u2FZtlO0l8A3K3ZIaxHsPB8kt5vYn00c/mM0dBj5OmqzAqjOQDUfLBwJ32HbPAh84pCM5seSNJLAHzcWeFJgoVdZRui4YfIo6ucff8uyVY03LW5IawyWPgvW5u77mChV/QIABFfb/kidk0CVKbDth3Huw35dJLeniqiV2/fniDYx1f7vlWTeoUFah6wZQhrqwcqwUKbrtsaH0+6mOQpHsOpbXpCVFPstcJjBZNkmzHv0swQJultAN7iVO375TyafzjtJzcbEaK1w9McQJXBQlvvYmtsfjE5FZUFGAGiSeBpCqDKYKFtmX0qya9Utl0z5gNCNBk8BSA7CtiODNwxjf4trEew8BySNtTNOg0A0aTwtARQTbDQeh3rfawXmn0KQDQ5PC0B9EkAL3LSkAD9X6hWALIJzJ3mNoSdS9I7U3NyuX6zQO+zKOzkEEmaHqDSFdpZM97tOfkSfRvvk0LUDEAFIgseetf85DS+AYgk/bPr1NvRZ2HLg4ektwI4xzmgZCBxYohaBMjWPeenDOcvaIvZ2oez5gAqQ5mtLbb3oa4z+Bb6nTHW1UP92vFIr54vzJ8BcGplGdYKkSRbCXGHSWdh2z1ckp1taGccroxyFt9cznG4iGuDqFmASk9kZxxakNGTckHZBBA1DVCB6BMAXuwhyA4VmGL/+05l6zlsbdt7DJmXU0uXmSQ7JvD2zQ1hiwJJsotRvlVxXO87SU5+heUYDT5Gni5KVhg1D1DphWqCjOYy6RlAYzb0mHn3gWkWABWIaoKMubHwSBpGebGWZNdc2vmUO6a1BhJXFUSSff/yLuOYamvzzwEcVfFr7tWwPXqi6uN2PXWYG0C1Qca1n8RaDlewl3kPRL3gWXo/XBwo1dXWdk/a3jEOnJoVQGUoqw0yvpLkh7oUHvLvTohC8FRANBo8pT3sxLeVJ/M2M4QtiVYTZJzkNPoOiAaBxwHRqPDMFqBS8Jog4yT3YewA0aDwrIBodHhmDVApvG0mtO3PnjTJjTxbIBoFnm0gWgs8pQ06lxY3N4QtCWZBRgPDezdnHvPr+alV2EiaL0DlF2Dbn20bdB40XtHwQ5nOHqAC0SyCjEM1Wkv57AqACkRvBvB2p7hrDzI6yzU7s90EUPNBxtnR4SjwrgGo9EK1Qca8cM4ByU4mkuz++F93ZHELyZX3iW31n+S+sKWZWfNBxkCbNeUq6ekArugo1I0kH1xT8EkBKj1R80HGGkFbtZVkZ3bb2d2r0tUkn1hTh8kBKhB9DMBLnQWfJMjoLFuTZpJsO/ONAB7UUcBLSHqvX781q1YAqg0yfoDkq5psrQYLJeldAF7nKFr1x+wmACq9kAUZLazvvTV4P8kDDlE22kTSQ4uuK9dCF5HuR/I3NYI1A1CBaB+AK50VsAMj7TJeixNl2kYBSccCsB/ZMQ6Brif5GIfdYSZNAVQg8rzsLSphl/Hapby2LDZTUaBcq/56ALb1fOVxLkuinULy4loRmwOoQGQX7T7DWZnPk3y203bXmkl6AIA91isDOBGADV3e1HsJbasA1QYZvUKl3fYKPI2knXFQnZoEqPRCNUHG6oqnwyEFLiJ5Wl89mgWoQFQTZOyrwSb7WUztcSRtu0+v1DRABaKPADijV+3SaZUCNgE5geTNEZnmAFBtkDGix6b4Xld2BNvJcaHUPEClF6oNMoZE2eXOtm3q1ZFha1mfWQBUINoL4Kqurbm7vPEj1bOAqx3udW0kk62+swGoQHQ2gPOGFGAD8roJgF0t+qkx6jorgApElwE4aQwxZp6n3YNxsPyzA7yst/4iSdvEMFqaHUCjKZEZ91IgAeolWzotFEiAkoWQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnT+H0jPT81J3xWWAAAAAElFTkSuQmCC",check:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAOCAYAAAAi2ky3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACtSURBVHgBvdPdDcIgEAfwoy8Nb45QN3AGF2s36Ahu4gpuIDoBfSgfpdoTlCbEWEMh6T8hFzjyg5AAkBHOcQe5UWqspRx435sDpMYj6IYQwwVSEiJ2MKVUBWuzLSLl2HL+uxmNCGFO8yaL7RHxve6qRZoAuS4hxac8735elWVx7jrtMKL1o0Gcat9jhExHSukN/kUIFZ7MpDRtzE1isDRkAUtDvrA8ZI597FUf8gWH9P0b4gko9wAAAABJRU5ErkJggg=="},color:{palette:{"blue-20":"0xbecffeff","blue-40":"0x93a9fdff","blue-90":"0x000033ff","grey-05":"0xf8f7faff","grey-40":"0x929096ff","grey-70":"0x48474bff","grey-90":"0x181819ff"},white:"0xffffffff",black:"0x000000ff",grey:"0x929096ff",red:"0xe74c3cff",orange:"0xdc7633ff",yellow:"0xf7dc6fff",green:"0x2ecc71ff",blue:"0x93a9fdff",purple:"0x663399ff",material:"0x181819ff",materialBrand:"0x000033ff",overlay:"0x181819b3",textNeutral:"0xf8f7faff",textNeutralSecondary:"0xf8f7fab3",textNeutralTertiary:"0xf8f7fa1a",textNeutralDisabled:"0xf8f7fa80",textInverse:"0x181819ff",textInverseSecondary:"0x181819b3",textInverseTertiary:"0x1818191a",textInverseDisabled:"0x18181980",textBrand:"0x93a9fdff",textBrandSecondary:"0x93a9fdb3",textBrandTertiary:"0x93a9fd1a",textBrandDisabled:"0x93a9fd80",textPositive:"0x2ecc71ff",textNegative:"0xe74c3cff",textInfo:"0x93a9fdff",textCaution:"0xdc7633ff",fillTransparent:"0xffffff0",fillNeutral:"0xf8f7faff",fillNeutralSecondary:"0xf8f7fab3",fillNeutralTertiary:"0xf8f7fa1a",fillNeutralDisabled:"0xf8f7fa80",fillInverse:"0x181819ff",fillInverseSecondary:"0x181819b3",fillInverseTertiary:"0x1818191a",fillInverseDisabled:"0x18181980",fillBrand:"0x93a9fdff",fillBrandSecondary:"0x93a9fdb3",fillBrandTertiary:"0x93a9fd1a",fillBrandDisabled:"0x93a9fd80",fillPositive:"0x2ecc71ff",fillNegative:"0xe74c3cff",fillInfo:"0x93a9fdff",fillCaution:"0xdc7633ff",strokeNeutral:"0xf8f7faff",strokeNeutralSecondary:"0xf8f7fab3",strokeNeutralTertiary:"0xf8f7fa1a",strokeNeutralDisabled:"0xf8f7fa80",strokeInverse:"0x181819ff",strokeInverseSecondary:"0x181819b3",strokeInverseTertiary:"0x1818191a",strokeInverseDisabled:"0x18181980",strokeBrand:"0x93a9fdff",strokeBrandSecondary:"0x93a9fdb3",strokeBrandTertiary:"0x93a9fd1a",strokeBrandDisabled:"0x93a9fd80",strokePositive:"0x2ecc71ff",strokeNegative:"0xe74c3cff",strokeInfo:"0x93a9fdff",strokeCaution:"0xdc7633ff",interactiveNeutral:"0xffffff1a",interactiveNeutralFocus:"0xffffffff",interactiveNeutralFocusSoft:"0xffffff1a",interactiveInverse:"0x48474b1a",interactiveInverseFocus:"0x48474bff",interactiveInverseFocusSoft:"0x48474b1a",interactiveBrand:"0xbecffe1a",interactiveBrandFocus:"0xbecffeff",interactiveBrandFocusSoft:"0xbecffe1a",shadowNeutral:"0x000000b3",shadowNeutralFocus:"0x000000b3",shadowNeutralFocusSoft:"0x000000b3",shadowNeutralText:"0x000000ff",shadowInverse:"0x000000b3",shadowInverseFocus:"0x000000b3",shadowInverseFocusSoft:"0x000000b3",shadowInverseText:"0x000000ff",shadowBrand:"0x000000b3",shadowBrandFocus:"0x000000b3",shadowBrandFocusSoft:"0x000000b3",shadowBrandText:"0x000000ff"},font:[],layout:{columnCount:10,focusScale:1.2,gutterX:20,gutterY:20,marginX:150,marginY:150,safe:50,screenW:1920,screenH:1080},radius:{none:0,xs:2,sm:4,md:8,lg:16,xl:24},spacer:{none:0,xxs:2,xs:4,sm:8,md:10,lg:20,xl:30,xxl:40,xxxl:50},stroke:{none:0,sm:2,md:4,lg:6,xl:8},typography:{display1:{fontFamily:"Arial",fontSize:75,lineHeight:85,fontWeight:500,verticalAlign:"middle",textBaseline:"bottom"},display2:{fontFamily:"Arial",fontSize:50,lineHeight:60,fontWeight:500,verticalAlign:"middle",textBaseline:"bottom"},headline1:{fontFamily:"Arial",fontSize:35,fontWeight:500,lineHeight:48,verticalAlign:"middle",textBaseline:"bottom"},headline2:{fontFamily:"Arial",fontSize:30,fontWeight:500,lineHeight:40,verticalAlign:"middle",textBaseline:"bottom"},headline3:{fontFamily:"Arial",fontSize:25,fontWeight:500,lineHeight:36,verticalAlign:"middle",textBaseline:"bottom"},body1:{fontFamily:"Arial",fontSize:25,fontWeight:300,lineHeight:40,verticalAlign:"middle",textBaseline:"bottom"},body2:{fontFamily:"Arial",fontSize:22,fontWeight:300,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},body3:{fontFamily:"Arial",fontSize:20,fontWeight:300,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},button1:{fontFamily:"Arial",fontSize:25,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},button2:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},callout1:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:32,verticalAlign:"middle",textBaseline:"bottom"},caption1:{fontFamily:"Arial",fontSize:15,fontWeight:500,lineHeight:24,verticalAlign:"middle",textBaseline:"bottom"},tag1:{fontFamily:"Arial",fontSize:20,fontWeight:500,lineHeight:24,verticalAlign:"middle",textBaseline:"bottom"},footnote1:{fontFamily:"Arial",fontSize:22,fontWeight:300,lineHeight:30,verticalAlign:"middle",textBaseline:"bottom"}},componentConfig:{Keyboard:{base:{keyProps:{delete:{title:null,icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAACQCAYAAADnRuK4AAAAAXNSR0IArs4c6QAACmpJREFUeF7tnVmoZUcVhv/feY4gBEVEH/KgCCZxCK2itNo4xQQH+kUN0TjEiDGKKBqnaExwBjUaR6KY+NQgiQkOMSYhYEScIopGJOqDE2hHjfP0y4p1Oqdv33v2qr32Prv2Paug6Ye7Vu2qv75TtWvtGohMqUBAAQZ80zUVQAKUEIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypXMClAyEFEiAQvKlcwKUDIQUSIBC8qVzApQMhBRIgELypfPsAJJ0NYC92XRHKPB3AAfLv18BuBLAFSR/NKZWswJI0vkA3jCmILsw75sAvIfkR8eo22wAknQSgMvGEGFD8vwxgFeQvGrI+s4CIEnHAPgugHsMWfkNzevDAM4i+Z8h6t88QJLuXOB5yBAVzjxuVeBaAM8ieXNUjzkAdAmA50Yrmv5HKPATACeQ/GNEm6YBkvRyANblZhpHAXsfekpkOGsWIEmPAHA9gDuOo13mWhS4gOSZfdVoEiBJ9wFwA4D7961Y+lUpsK/v7KxVgL4K4ElOCS4l+Uyn7a41k3Q0gMcC2ANgH4CHV1T2OyStx69OzQEk6TwAZztr8lMAx5P8s9N+Y8wk2cTjfQDu66z080h+zml7yKwpgCSdCOByZyX+BuBRJH/otN84M0kWN/s0gOc4Kv8Nko922B1m0gxAkh4I4AcVwcL9JA/UVnjT7CXdHYD9yEzfVUkAjib5uxqNmgCoBAu/CeBhzsJ/kORZTtuNN5Nk70bXAZ0Hy59G8qIawVoB6LMAnu8suE3tH0/y3077NAMg6esAuoaoC0la7M2dJgdI0ssAXOgs8W8BHEvS/s9UoYCkdwN4bYfL5STto7U7TQpQZbDQehzreawHylSpgKSTAVza4XYDyeNqsp4MoB7BwteQfH9N5dL2NgWK3l0vyAdJWhDXnSYBSNLtANh3GO/KwgMk97trlYbbKiDJPpzea5U8JKuYqDIeql0kvQPAG5352ZLMR5L8q9M+zXZQYFcAJOnJAL7sbGWLMFuk2SLOmYIKzB6gEiz8HoB7O7U4meQXnLZp1qGApD8BuOcsh7AewcL3kuyadg4OjSSbhRxH0j4BjJok2Ufga0j+YdQHlcznDlBNsPAa+xpP8r/rEHbxjAKPbRuyHvKFY0Ik6QUALOprPfIT1gHRbAGSdDoA77aSX5Zg4e8nhGfx6FEgWoJn8Zy1QCTplq5vjc3NwnoEC/eQ/HYD8IwC0TbwrA2i2QHUI1h4JskLGoJnUIhWwLMWiGYFkCSLMX2t5WDhlneeLm5Dw5kDntEhkmRhEVvesWNqZgiTdC6AN3W1Svn72oOFkuxF+WcVIQUrai+IKuA5BBHJ453auc1mA1AJFn7Jsf7EKj9ZsLBHw1ZDtI5neAmaBUBzCxaO2cBj5u2FZtlO0l8A3K3ZIaxHsPB8kt5vYn00c/mM0dBj5OmqzAqjOQDUfLBwJ32HbPAh84pCM5seSNJLAHzcWeFJgoVdZRui4YfIo6ucff8uyVY03LW5IawyWPgvW5u77mChV/QIABFfb/kidk0CVKbDth3Huw35dJLeniqiV2/fniDYx1f7vlWTeoUFah6wZQhrqwcqwUKbrtsaH0+6mOQpHsOpbXpCVFPstcJjBZNkmzHv0swQJultAN7iVO375TyafzjtJzcbEaK1w9McQJXBQlvvYmtsfjE5FZUFGAGiSeBpCqDKYKFtmX0qya9Utl0z5gNCNBk8BSA7CtiODNwxjf4trEew8BySNtTNOg0A0aTwtARQTbDQeh3rfawXmn0KQDQ5PC0B9EkAL3LSkAD9X6hWALIJzJ3mNoSdS9I7U3NyuX6zQO+zKOzkEEmaHqDSFdpZM97tOfkSfRvvk0LUDEAFIgseetf85DS+AYgk/bPr1NvRZ2HLg4ektwI4xzmgZCBxYohaBMjWPeenDOcvaIvZ2oez5gAqQ5mtLbb3oa4z+Bb6nTHW1UP92vFIr54vzJ8BcGplGdYKkSRbCXGHSWdh2z1ckp1taGccroxyFt9cznG4iGuDqFmASk9kZxxakNGTckHZBBA1DVCB6BMAXuwhyA4VmGL/+05l6zlsbdt7DJmXU0uXmSQ7JvD2zQ1hiwJJsotRvlVxXO87SU5+heUYDT5Gni5KVhg1D1DphWqCjOYy6RlAYzb0mHn3gWkWABWIaoKMubHwSBpGebGWZNdc2vmUO6a1BhJXFUSSff/yLuOYamvzzwEcVfFr7tWwPXqi6uN2PXWYG0C1Qca1n8RaDlewl3kPRL3gWXo/XBwo1dXWdk/a3jEOnJoVQGUoqw0yvpLkh7oUHvLvTohC8FRANBo8pT3sxLeVJ/M2M4QtiVYTZJzkNPoOiAaBxwHRqPDMFqBS8Jog4yT3YewA0aDwrIBodHhmDVApvG0mtO3PnjTJjTxbIBoFnm0gWgs8pQ06lxY3N4QtCWZBRgPDezdnHvPr+alV2EiaL0DlF2Dbn20bdB40XtHwQ5nOHqAC0SyCjEM1Wkv57AqACkRvBvB2p7hrDzI6yzU7s90EUPNBxtnR4SjwrgGo9EK1Qca8cM4ByU4mkuz++F93ZHELyZX3iW31n+S+sKWZWfNBxkCbNeUq6ekArugo1I0kH1xT8EkBKj1R80HGGkFbtZVkZ3bb2d2r0tUkn1hTh8kBKhB9DMBLnQWfJMjoLFuTZpJsO/ONAB7UUcBLSHqvX781q1YAqg0yfoDkq5psrQYLJeldAF7nKFr1x+wmACq9kAUZLazvvTV4P8kDDlE22kTSQ4uuK9dCF5HuR/I3NYI1A1CBaB+AK50VsAMj7TJeixNl2kYBSccCsB/ZMQ6Brif5GIfdYSZNAVQg8rzsLSphl/Hapby2LDZTUaBcq/56ALb1fOVxLkuinULy4loRmwOoQGQX7T7DWZnPk3y203bXmkl6AIA91isDOBGADV3e1HsJbasA1QYZvUKl3fYKPI2knXFQnZoEqPRCNUHG6oqnwyEFLiJ5Wl89mgWoQFQTZOyrwSb7WUztcSRtu0+v1DRABaKPADijV+3SaZUCNgE5geTNEZnmAFBtkDGix6b4Xld2BNvJcaHUPEClF6oNMoZE2eXOtm3q1ZFha1mfWQBUINoL4Kqurbm7vPEj1bOAqx3udW0kk62+swGoQHQ2gPOGFGAD8roJgF0t+qkx6jorgApElwE4aQwxZp6n3YNxsPyzA7yst/4iSdvEMFqaHUCjKZEZ91IgAeolWzotFEiAkoWQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnROgJKBkAIJUEi+dE6AkoGQAglQSL50ToCSgZACCVBIvnT+H0jPT81J3xWWAAAAAElFTkSuQmCC"}}}}}};function Oa(){let n,r,e=0;const t=1,o={duration:750,easing:"ease-in-out"},i={alpha:t,color:4294967295};function s(c){if(c.startsWith("#")){n.color=c,n.src="",n.alpha=1,e=1,r.alpha=0;return}else n.color=4294967295;if(e===0){n.src=c,e=1;return}if(e===1){r.src=c,e=2,r.alpha=0,r.animate({alpha:t},o).start(),n.animate({alpha:0},o).start();return}e===2&&(n.src=c,e=1,n.alpha=0,n.animate({alpha:t},o).start(),r.animate({alpha:0},o).start())}const l=dn(s,400);return Ye(He(Da,c=>{l(c)},{defer:!0})),a(z,{width:1920,height:1080,zIndex:-5,get children(){return[a(z,{ref(c){var d=n;typeof d=="function"?d(c):n=c},style:i}),a(z,{ref(c){var d=r;typeof d=="function"?d(c):r=c},style:i,alpha:0}),a(z,{src:"./assets/hero-mask-inverted.png",get color(){return M(f.color.materialBrand)},width:1920,height:1080})]}})}var Pn,Dn,On,Un,Wn,Yn,$n,Hn,jn,Qn,Kn,Xn,Vn,Gn,qn,Zn;const Ua=["focus","disabled"],Wa=["brand","inverse","neutral"];function Y({themeKeys:n,base:r,modes:e,tones:t,themeStyles:o,modeKeys:i=Ua,toneKeys:s=Wa},l=!1){const c=(m,w,S)=>{const A=s.map(p=>{var T,I;const x={};return new Set([].concat.apply([],[(T=m==null?void 0:m[p])!=null?T:{},(I=w==null?void 0:w[p])!=null?I:{}].map(Object.keys))).forEach(R=>{var E;var C,_;i.includes(R)||(x[R]=(E=(C=w==null?void 0:w[p])==null?void 0:C[R])!=null?E:(_=m==null?void 0:m[p])==null?void 0:_[R])}),i.forEach(R=>{var C,_;x[R]={...S[R],...(C=m==null?void 0:m[p])==null?void 0:C[R],...(_=w==null?void 0:w[p])==null?void 0:_[R]}}),[p,x]});return Object.fromEntries(A)},d=(m,w)=>{const S=i.map(p=>[p,{...m==null?void 0:m[p],...w==null?void 0:w[p]}]);return Object.fromEntries(S)},h=(m,w)=>({...m,...w.base}),g=m=>Object.fromEntries(Object.entries(n).filter(([w,S])=>m[S]).map(([w,S])=>[w,m[S]])),y=m=>Object.fromEntries(Object.entries(m).map(([S,A])=>{const p=g(A);return Object.entries(A).filter(([x,v])=>i.includes(x)).forEach(([x,v])=>{p[x]=g(v)}),[S,p]}));return((m,w,S)=>{const A=y(o);l&&console.log(A);const p=h(m,A);l&&console.log(p);const x=d(w,A);l&&console.log(x);const v=c(S,A,x);return l&&console.log(v),{base:{...p,...x},tones:v}})(r,e,t)}function $o(n=0){return(r,e,t,o)=>{if(r.children.length===0)return;const i=r.gap||0,s=r.scroll||"auto",[l,c]=Ya(r),d=r.flexDirection==="row"?r.x:r.y,h=r.flexDirection==="row"?e.x:e.y,g=r.flexDirection==="row"?e.width:e.height,y=t>o?"positive":"negative";let b=d;s==="auto"?r.scrollIndex!=null&&r.scrollIndex>=0?r.selected>=r.scrollIndex&&(y==="positive"?b=d-g-i:b=d+g+i):(Math.abs(d)+c<l.position+l.size||h<Math.abs(d))&&(b=-h+n):s==="always"||s==="edge"&&y==="negative"&&Math.abs(d)>h?b=-h+n:s==="edge"&&y==="positive"&&Math.abs(d)+c<h+g&&(b=d-g-i),r.flexDirection==="row"&&r.x!==b?r.x=b:r.flexDirection==="column"&&r.y!==b&&(r.y=b)}}function Ya(n){let r,e;return n.flexDirection==="row"?(r={position:n.children[n.children.length-1].x,size:n.children[n.children.length-1].width},e=n.width):(r={position:n.children[n.children.length-1].y,size:n.children[n.children.length-1].height},e=n.height),[r,e]}const ft=(...n)=>{const r=n.filter(e=>typeof e=="function");if(r.length!==0)return function(...e){for(const t of r)if(t.apply(this,e)===!0)return!0}};function Ho(){if(!this||this.selected===void 0||this.children.length===0)return!1;let n=this.children[this.selected];for(;n!=null&&n.skipFocus;)this.selected++,n=this.children[this.selected];if(!(n instanceof We))return!1;n.setFocus()}function ur(n){return function(){var r,e;const t=this.children.length,o=this.wrap,i=this.selected||0;if(t===0)return!1;if(n==="right"||n==="down")do if(this.selected=(this.selected||0)%t+1,this.selected>=t){if(!o){this.selected=void 0;break}this.selected=0}while((r=this.children[this.selected])!=null&&r.skipFocus);else if(n==="left"||n==="up")do if(this.selected=(this.selected||0)%t-1,this.selected<0){if(!o){this.selected=void 0;break}this.selected=t-1}while((e=this.children[this.selected])!=null&&e.skipFocus);if(this.selected===void 0&&(this.selected=i,this.children[this.selected].states.has("focus")))return!1;const s=this.children[this.selected];if(this.onSelectedChanged&&this.onSelectedChanged.call(this,this,s,this.selected,i),this.plinko&&i!==void 0){const c=this.children[i].selected||0;s.selected=c<s.children.length?c:s.children.length-1}return s.setFocus(),!0}}const{Artwork:{defaultTone:Qc,...$a}={styles:{}}}=(Pn=f)==null?void 0:Pn.componentConfig,Ha={themeKeys:{fillColor:"fillColor",borderRadius:"borderRadius",scale:"imageScale",pivotX:"imageScalePivotX",pivotY:"imageScalePivotY"},base:{borderRadius:f.radius.md,fallbackSrc:void 0,fillColor:f.color.overlay,gradientColor:f.color.material,pivotX:.5,pivotY:.5,scale:void 0},themeStyles:$a};Y(Ha);const{Icon:{defaultTone:Kc,...ja}={styles:{}}}=(Dn=f)==null?void 0:Dn.componentConfig,Qa={themeKeys:{color:"color"},base:{width:100,height:100,color:f.color.fillInverse},tones:{inverse:{color:f.color.fillInverse},brand:{color:f.color.fillBrand}},themeStyles:ja};Y(Qa);const{Badge:{defaultTone:Xc,...hn}={styles:{}}}=(On=f)==null?void 0:On.componentConfig,Ka={themeKeys:{color:"backgroundColor"},base:{color:f.color.fillInverseSecondary,borderRadius:f.radius.sm,border:{color:f.color.strokeInverse,width:f.stroke.sm},display:"flex",justifyContent:"spaceEvenly",padding:[f.spacer.md-f.stroke.sm,f.spacer.xs+f.stroke.sm,f.spacer.md+f.stroke.sm,f.spacer.md+f.stroke.sm]},tones:{inverse:{color:f.color.fillNeutralSecondary,borderRadius:f.radius.sm,border:{color:f.color.strokeInverseSecondary,width:f.stroke.sm}},brand:{color:f.color.fillBrand,borderRadius:f.radius.sm,border:{color:f.color.strokeInverseSecondary,width:f.stroke.sm}}},themeStyles:hn},Xa={themeKeys:{color:"textColor"},base:{...f.typography.tag1,color:f.color.textNeutral},tones:{inverse:{color:f.color.textInverse},brand:{color:f.color.textNeutral}},themeStyles:hn},Va={themeKeys:{color:"iconColor"},base:{color:f.color.textNeutral},tones:{inverse:{color:f.color.textInverse},brand:{color:f.color.textNeutral}},themeStyles:hn};Y(Ka);Y(Va);Y(Xa);const{Button:{defaultTone:Vc,...un}={styles:{}}}=(Un=f)==null?void 0:Un.componentConfig,Ga={themeKeys:{textAlign:"textAlign",borderRadius:"radius",color:"backgroundColor",justifyContent:"justifyContent"},base:{height:f.typography.button1.lineHeight+f.spacer.xl*2,display:"flex",padding:[f.spacer.xxxl,f.spacer.xl],color:f.color.interactiveNeutral,justifyContent:"center",alignItems:"center",borderRadius:f.radius.sm,contentColor:f.color.fillNeutral},modes:{focus:{color:f.color.interactiveNeutralFocus,contentColor:f.color.fillInverse},disabled:{color:f.color.fillNeutralDisabled}},tones:{inverse:{color:f.color.interactiveInverse},brand:{color:f.color.interactiveBrand,focus:{color:f.color.fillNeutral}}},themeStyles:un},qa={themeKeys:{color:"contentColor"},base:{color:f.color.textNeutral},modes:{focus:{color:f.color.textInverse},disabled:{color:f.color.textNeutralDisabled}},tones:{inverse:{color:f.color.fillNeutral},brand:{color:f.color.fillBrand,focus:{color:f.color.fillBrand}}},themeStyles:un},Za={themeKeys:{color:"textColor"},base:{textAlign:"left",color:f.color.textNeutral,...f.typography.button1},modes:{focus:{color:f.color.textInverse},disabled:{color:f.color.textNeutralDisabled}},tones:{inverse:{color:f.color.fillNeutral},brand:{color:f.color.fillBrand,focus:{color:f.color.fillBrand}}},themeStyles:un};Y(Ga);Y(qa);Y(Za);const{Checkbox:{defaultTone:Gc,...jo}={styles:{}}}=(Wn=f)==null?void 0:Wn.componentConfig,Ve=f.stroke.sm,ke=f.spacer.xxl,Ja={themeKeys:{color:"color",borderRadius:"borderRadius",border:"border",justifyContent:"justifyContent"},base:{width:ke,height:ke,display:"flex",justifyContent:"center",color:f.color.fillNeutral,alignItems:"center",borderRadius:ke/4,border:{color:f.color.strokeInverse,width:Ve}},modes:{disabled:{alpha:f.alpha.inactive}},tones:{brand:{borderRadius:ke/4,border:{color:f.color.strokeNeutralSecondary,width:Ve},color:f.color.fillNeutralSecondary,checked:{borderRadius:ke/4,border:{color:f.color.strokeNeutralSecondary,width:Ve},color:f.color.fillBrand}},neutral:{borderRadius:ke/4,border:{color:f.color.strokeNeutralSecondary,width:Ve},color:f.color.fillInverseSecondary,checked:{borderRadius:ke/4,border:{color:f.color.strokeNeutralSecondary,width:Ve},color:f.color.fillNeutral}},inverse:{borderRadius:ke/4,border:{color:f.color.strokeInverseSecondary,width:Ve},color:f.color.fillNeutralSecondary,checked:{borderRadius:ke/4,border:{color:f.color.strokeInverseSecondary,width:Ve},color:f.color.fillInverse}}},modeKeys:["focus","disabled","checked"],themeStyles:jo},el={themeKeys:{color:"color"},base:{width:f.spacer.lg,height:f.spacer.lg,src:f.asset.check},tones:{neutral:{color:f.color.fillInverse},inverse:{color:f.color.fillNeutral},brand:{color:f.color.fillInverse}},themeStyles:jo};Y(Ja);Y(el);const{Column:{defaultTone:tl,...rl}={styles:{}}}=(Yn=f)==null?void 0:Yn.componentConfig,nl={themeKeys:{gap:"itemSpacing",scrollIndex:"scrollIndex",itemTransition:"itemTransition"},base:{display:"flex",justifyContent:"flexStart",flexDirection:"column",gap:f.layout.gutterY,itemTransition:{...f.animation.standardEntrance,duration:f.animation.duration.fast}},themeStyles:rl},ol=Y(nl),Er={tone:tl||"neutral",Container:ol},J=n=>{const r=ur("up"),e=ur("down");return a(z,Q(n,{get onUp(){return ft(n.onUp,r)},get onDown(){return ft(n.onDown,e)},get selected(){return n.selected||0},forwardFocus:Ho,get onSelectedChanged(){return ft(n.onSelectedChanged,n.scroll!=="none"?$o(n.y):void 0)},get style(){var t;return[...[n.style].flat(),Er.Container.tones[(t=n.tone)!=null?t:Er.tone],Er.Container.base]}}))},{Label:{defaultTone:qc,...Qo}={styles:{}}}=($n=f)==null?void 0:$n.componentConfig,il={themeKeys:{color:"backgroundColor",borderRadius:"radius"},base:{display:"flex",justifyContent:"center",color:f.color.textNeutral,padding:[f.spacer.md,f.spacer.lg],borderRadius:[f.radius.md,f.radius.md,f.radius.md,f.radius.none],height:f.typography.caption1.lineHeight+f.spacer.md,neutral:{backgroundColor:f.color.fillNeutral}},tones:{inverse:{color:f.color.fillInverse},brand:{color:f.color.fillBrand,focus:{color:f.color.orange}}},themeStyles:Qo},sl={themeKeys:{color:"textColor"},base:{...f.typography.caption1,color:f.color.textInverse},tones:{inverse:{color:f.color.textNeutral},brand:{color:f.color.textNeutral}},themeStyles:Qo};Y(il);Y(sl);const{Rating:{styles:fn,defaultTone:Zc}={styles:{},defaultTone:"neutral"}}=(Hn=f)==null?void 0:Hn.componentConfig,al={themeKeys:{justifyContent:"justifyContent",itemSpacing:"itemSpacing"},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart",itemSpacing:f.spacer.sm},toneModes:{},themeStyles:fn},ll={themeKeys:{color:"textColor"},base:{color:f.color.textNeutral,...f.typography.body2},toneModes:{},themeStyles:fn},cl={themeKeys:{color:"color"},base:{height:f.typography.body2.lineHeight,width:f.typography.body2.lineHeight,color:f.color.fillNeutral,marginRight:f.spacer.sm},toneModes:{},themeStyles:fn};Y(al);Y(cl);Y(ll);const{Details:{defaultTone:Jc,...Ko}={styles:{}}}=(jn=f)==null?void 0:jn.componentConfig,dl={themeKeys:{alignItems:"alignItems",contentSpacing:"contentSpacing",badgeContentSpacing:"badgeContentSpacing",ratingContentSpacing:"ratingContentSpacing"},base:{display:"flex",flexDirection:"row",alignItems:"center",contentSpacing:f.spacer.lg,badgeContentSpacing:f.spacer.sm,ratingContentSpacing:f.spacer.lg},themeStyles:Ko},hl={themeKeys:{color:"textColor"},base:{...f.typography.body2,marginRight:f.spacer.lg,color:f.color.textNeutral},tones:{neutral:{disabled:{color:f.color.textNeutralDisabled}},inverse:{color:f.color.textInverse,disabled:{color:f.color.textNeutralDisabled}},brand:{color:f.color.textNeutral,disabled:{color:f.color.textNeutralDisabled}}},themeStyles:Ko};Y(dl);Y(hl);const{Metadata:{defaultTone:ed,...gn}={styles:{}}}=(Qn=f)==null?void 0:Qn.componentConfig,ul={themeKeys:{justifyContent:"justifyContent",alpha:"alpha"},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart",alpha:f.alpha.primary},modes:{disabled:{alpha:f.alpha.inactive}},themeStyles:gn},fl={themeKeys:{color:"textColor"},base:{maxLines:1,contain:"width",...f.typography.headline3,color:f.color.textNeutral},tones:{neutral:{disabled:{color:f.color.textNeutralDisabled}},inverse:{color:f.color.textInverse,disabled:{color:f.color.textNeutralDisabled}},brand:{color:f.color.textNeutral,disabled:{color:f.color.textNeutralDisabled}}},themeStyles:gn},gl={themeKeys:{color:"textColor"},base:{contain:"width",maxLines:2,...f.typography.body2,color:f.color.textNeutralSecondary},tones:{neutral:{disabled:{color:f.color.textNeutralDisabled}},inverse:{color:f.color.textInverseSecondary,disabled:{color:f.color.textNeutralDisabled}},brand:{color:f.color.textNeutralSecondary,disabled:{color:f.color.textNeutralDisabled}}},themeStyles:gn};Y(ul);Y(gl);Y(fl);const{ProgressBar:{defaultTone:td,...Xo}={styles:{}}}=(Kn=f)==null?void 0:Kn.componentConfig,pl={themeKeys:{color:"barColor",borderRadius:"borderRadius"},base:{height:f.spacer.md,color:f.color.fillNeutralTertiary,borderRadius:f.radius.xs},tones:{inverse:{color:f.color.fillInverseTertiary}},themeStyles:Xo},ml={themeKeys:{color:"progressColor",borderRadius:"borderRadius"},base:{borderRadius:f.radius.xs,color:f.color.fillNeutral},tones:{inverse:{color:f.color.fillInverse},brand:{color:f.color.fillBrand}},themeStyles:Xo};Y(pl);Y(ml);const{Row:{defaultTone:xl,...yl}={styles:{}}}=(Xn=f)==null?void 0:Xn.componentConfig,vl={themeKeys:{gap:"itemSpacing",scrollIndex:"scrollIndex",itemTransition:"itemTransition"},base:{display:"flex",justifyContent:"flexStart",flexDirection:"row",gap:f.layout.gutterX,width:f.layout.screenW,itemTransition:{...f.animation.standardEntrance,duration:f.animation.duration.fast}},themeStyles:yl},wl=Y(vl),wt={tone:xl,Container:wl},V=n=>{const r=ur("left"),e=ur("right");return a(z,Q(n,{get selected(){return n.selected||0},get onLeft(){return ft(n.onLeft,r)},get onRight(){return ft(n.onRight,e)},forwardFocus:Ho,get onSelectedChanged(){return ft(n.onSelectedChanged,n.scroll!=="none"?$o(n.x):void 0)},get tone(){var t;return(t=n.tone)!=null?t:wt.tone},get style(){return[...[n.style].flat(),wt.Container.tones[n.tone||wt.tone],wt.Container.base]},get states(){var t;return(t=n.tone)!=null?t:wt.tone}}))},{Keyboard:{defaultTone:rd,...pn}={styles:{}}}=(Vn=f)==null?void 0:Vn.componentConfig,bl={themeKeys:{keySpacing:"keySpacing",screenW:"screenW",marginX:"marginX"},base:{keySpacing:f.spacer.md,screenW:f.layout.screenW,marginX:f.layout.marginX,height:100},themeStyles:pn},Sl={themeKeys:{keySpacing:"keySpacing",textAlign:"textAlign",borderRadius:"borderRadius",color:"backgroundColor",justifyContent:"justifyContent",baseWidth:"baseWidth",sizes:"sizes",contentColor:"contentColor"},base:{keySpacing:f.spacer.md,height:f.spacer.md*9,paddingX:f.spacer.md,sizes:{sm:1,md:2,lg:3,xl:4,xxl:5},contentColor:f.color.fillNeutral,padding:[f.spacer.xxxl,f.spacer.xl],baseWidth:f.spacer.md*7,color:f.color.interactiveNeutral,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:f.radius.sm},modes:{focus:{color:f.color.interactiveNeutralFocus,contentColor:f.color.fillInverse},disabled:{color:f.color.fillNeutralDisabled,contentColor:f.color.fillNeutralDisabled}},tones:{inverse:{color:f.color.interactiveInverse,focus:{color:f.color.interactiveInverseFocus,contentColor:f.color.fillNeutral}},brand:{focus:{contentColor:f.color.fillNeutral}}},themeStyles:pn},Al={themeKeys:{color:"textColor"},base:{textAlign:"left",color:f.color.textNeutral,...f.typography.headline2},modes:{focus:{color:f.color.textInverse},disabled:{color:f.color.textNeutralDisabled}},tones:{inverse:{focus:{color:f.color.textNeutral}}},themeStyles:pn};Y(bl);Y(Sl);Y(Al);const{Key:{defaultTone:nd,...Vo}={styles:{}}}=(Gn=f)==null?void 0:Gn.componentConfig,Cl={themeKeys:{keySpacing:"keySpacing",textAlign:"textAlign",borderRadius:"borderRadius",color:"backgroundColor",justifyContent:"justifyContent",baseWidth:"baseWidth",sizes:"sizes",contentColor:"contentColor"},base:{keySpacing:f.spacer.md,height:f.spacer.md*9,paddingX:f.spacer.md,contentColor:f.color.fillNeutral,sizes:{sm:1,md:2,lg:3,xl:4,xxl:5},padding:[f.spacer.xxxl,f.spacer.xl],baseWidth:f.spacer.md*7,color:f.color.interactiveNeutral,display:"flex",justifyContent:"center",alignItems:"center",borderRadius:f.radius.sm},modes:{focus:{color:f.color.interactiveNeutralFocus,contentColor:f.color.fillInverse},disabled:{color:f.color.fillNeutralDisabled,contentColor:f.color.fillNeutralDisabled}},tones:{inverse:{color:f.color.interactiveInverse,focus:{color:f.color.interactiveInverseFocus,contentColor:f.color.fillNeutral}},brand:{focus:{contentColor:f.color.fillNeutral}}},themeStyles:Vo},Tl={themeKeys:{color:"textColor"},base:{textAlign:"left",color:f.color.textNeutral,...f.typography.headline2},modes:{focus:{color:f.color.textInverse},disabled:{color:f.color.textNeutralDisabled}},tones:{inverse:{focus:{color:f.color.textNeutral}}},themeStyles:Vo};Y(Cl);Y(Tl);const{Tile:{defaultTone:od,...Sr}={styles:{}}}=(qn=f)==null?void 0:qn.componentConfig,{Surface:{defaultSurfaceTone:id,..._l}={styles:{}}}=(Zn=f)==null?void 0:Zn.componentConfig,Rl={themeKeys:{alpha:"alpha",paddingYProgress:"paddingYProgress"},base:{width:400,height:240,padding:[40,10],paddingYProgress:f.spacer.xl,paddingYBetweenContent:f.spacer.md,borderRadius:f.radius.md,alpha:f.alpha.primary},modes:{disabled:{alpha:f.alpha.inactive}},themeStyles:{..._l,...Sr}},Il={themeKeys:{},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart",mountY:1},themeStyles:Sr},Bl={themeKeys:{},base:{display:"flex",flexDirection:"column",justifyContent:"flexStart"},themeStyles:Sr},kl={themeKeys:{},base:{width:f.spacer.lg*5,height:f.spacer.xxl+f.spacer.md},themeStyles:Sr};Y(Rl);Y(Il);Y(Bl);Y(kl);const Vr={Column:{flexDirection:"column",display:"flex",width:320,height:600,y:360,gap:20,zIndex:101,transition:{x:{duration:250,easing:"ease-in-out"}},x:8,focus:{x:f.layout.marginX}},Gradient:{zIndex:99,color:M("#000000"),src:"./assets/sidenav.png",alpha:0,width:1200,height:1080,focus:{alpha:1},transition:{alpha:!0}},NavButton:{zIndex:102,height:70,width:100,borderRadius:8,focus:{color:M(f.color.material)},active:{width:328,height:70}}},El="/solid-demo-app/",Fl=[{name:"experiment",width:81,height:100,x:0,y:0},{name:"trending",width:100,height:56,x:81,y:0},{name:"tv",width:100,height:68,x:181,y:0},{name:"movie",width:94,height:100,x:282,y:0}];function Nl(n){const r=Pa(El+"assets/icons_white.png",Fl);return a(z,Q(n,{get texture(){return r[n.name]},get width(){return r[n.name].props.width},get height(){return r[n.name].props.height},get x(){return(100-(r[n.name].props.width||0))/2},get y(){return(100-(r[n.name].props.height||0))/2}}))}function Zt(n){return a(z,Q(n,{forwardStates:!0,get style(){return Vr.NavButton},get children(){return[a(z,{y:-16,get children(){return a(Nl,{scale:.5,get name(){return n.icon}})}}),a(N,{get style(){return{...f.typography.button1,fontSize:38,x:116,y:16,height:50,alpha:0,active:{alpha:1}}},get children(){return n.children}})]}}))}function Ll(n){let r;const e=pt();function t(){r.states.add("focus"),this.children.forEach(i=>i.states.add("active")),this.children.selected.setFocus()}function o(){r.states.remove("focus"),this.selected=0,this.children.forEach(i=>i.states.remove("active"))}return[a(J,Q(n,{onFocus:t,onBlur:o,get style(){return Vr.Column},scroll:"none",get children(){return[a(Zt,{onEnter:()=>e("/browse/all"),icon:"trending",children:"Trending"}),a(Zt,{icon:"movie",onEnter:()=>e("/browse/movie"),children:"Movies"}),a(Zt,{icon:"tv",onEnter:()=>e("/browse/tv"),children:"TV"}),a(Zt,{icon:"experiment",onEnter:()=>e("/examples"),children:"Examples"})]}})),a(z,{ref(i){var s=r;typeof s=="function"?s(i):r=i},get style(){return Vr.Gradient}})]}const Ml={color:255,height:90,width:330,x:1500,y:20,alpha:.8,zIndex:100},Jt={x:10,fontSize:36,textColor:M("#ffffff")},er={fontSize:36,textColor:M("#ffffff")},[zl,Pl]=W(0),[Dl,Ol]=W(0),[Ul,Go]=W(99),[Wl,Yl]=W(0);let Gr=0,qr=0;const $l=dn(()=>{qr=0,Gr=0,Go(99)},1e4),Hl=n=>{n&&(Pl(n),Go(r=>Math.min(n,r)),Yl(r=>Math.max(n,r)),qr+=n,Gr++,Ol(Math.round(qr/Gr)),$l())};function jl(n){n.renderer.on("fpsUpdate",(r,e)=>{const t=typeof e=="number"?e:e.fps;t>5&&Hl(t)})}const Ql=n=>a(z,Q(n,{style:Ml,get children(){return[a(z,{get children(){return[a(N,{style:Jt,children:"FPS:"}),a(N,{style:er,x:94,get children(){return zl().toString()}})]}}),a(z,{x:160,get children(){return[a(N,{style:Jt,children:"AVG:"}),a(N,{style:er,x:104,get children(){return Dl().toString()}})]}}),a(z,{x:0,y:40,get children(){return[a(N,{style:Jt,children:"MIN:"}),a(N,{style:er,x:94,get children(){return Ul().toString()}})]}}),a(z,{x:160,y:40,get children(){return[a(N,{style:Jt,children:"MAX:"}),a(N,{style:er,x:104,get children(){return Wl().toString()}})]}})]}})),Kl=n=>{Ba({Announcer:"a",Menu:"m",Escape:"Escape"});const r=za();r.enabled=!1;const e=pt();let t,o;return tt(()=>{jl({renderer:Fe})}),a(z,{onAnnouncer:()=>r.enabled=!r.enabled,onLast:()=>history.back(),onMenu:()=>e("/"),style:{width:1920,height:1080},onLeft:()=>{if(t.states.has("focus"))return!1;o=nn(),t.setFocus()},onRight:()=>t.states.has("focus")&&o.setFocus(),get children(){return[a(Oa,{}),a(Ql,{}),gt(()=>n.children),a(Ll,{ref(i){var s=t;typeof s=="function"?s(i):t=i}})]}})},ue={Page:{width:1920,height:1080},headlineText:{width:1200,height:240,x:360,y:455,contain:"both",fontSize:66,textAlign:"center"},headlineSubText:{width:960,height:170,x:530,y:655,contain:"both",fontSize:48,textAlign:"center"},itemsContainer:{width:f.layout.screenW,height:600,y:560,x:0,zIndex:2},Thumbnail:{borderRadius:16,width:185,height:278,scale:1,zIndex:2,transition:{scale:{duration:250,easing:"ease-in-out"}},border:{width:0,color:0},focus:{scale:1.1,border:{color:4294967142,width:8}}},FocusRing:{borderRadius:16,width:194,height:286,y:-5,x:-5,zIndex:-1},FPS:{color:255,height:42,width:140,x:20,y:20,zIndex:100},FPSLabel:{x:10,y:0,fontSize:36,textColor:M("#ffffff")},FPSValue:{x:90,y:0,fontSize:36,textColor:M("#ffffff")},showHeadline:{x:70,y:20},headlineBlur:{width:1920,height:150,x:0,y:0,zIndex:14,alpha:.9,color:M("#000000")},RowTitle:{height:60,width:300,marginTop:20,fontSize:36,color:M("#f0f0f0"),zIndex:2},Row:{display:"flex",justifyContent:"spaceBetween",height:300},Column:{display:"flex",flexDirection:"column",justifyContent:"flexStart",gap:20,width:f.layout.screenW-2*f.layout.marginX,x:f.layout.marginX+f.layout.gutterX,y:48,transition:{y:{duration:250,easing:"ease-in-out"}},zIndex:2},Rect:{width:250,height:100,y:10,x:300,color:M("#0000ff")},peopleBio:{...f.typography.body1,contain:"both",width:1500,height:400}},fr={width:120,height:40,color:M("#000000"),borderRadius:8,border:{width:2,color:M("#3333ff")},scale:1,focus:{scale:1.1,border:{width:5,color:M("#333333")}},transition:{scale:!0,color:!0}},Xl={color:M("#00A699"),height:8,y:2,x:-4,width:fr.width+8},Vl={fontSize:12,y:12,contain:"width",textAlign:"center",color:M("#F6F6F9"),height:fr.height,width:fr.width},gr={container:fr,topBar:Xl,text:Vl},Jn={width:386,height:136,color:M("#715cab"),focus:{color:M("#5a39a2")},disabled:{color:M("#291d43")}},Gl={fontSize:32,contain:"width",textAlign:"center",mountY:-.35,color:M("#FFFFFF"),height:Jn.height,width:Jn.width,focus:{fontSize:40},disabled:{color:M("#909090")}};function ql(n){return a(z,Q(n,{get style(){return ue.Thumbnail}}))}function pr(n){const[r,e]=ki(n,["items"]);return a(V,Q(e,{get style(){return ue.Row},get children(){return a(wr,{get each(){return r.items},children:t=>a(ql,t)})}}))}function Zl(n){return a(z,Q(n,{forwardStates:!0,get style(){return gr.container},get children(){return a(N,{get style(){return gr.text},get children(){return n.children}})}}))}const Jl="eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiIyZDE4YjEwMTA0YjdiZTlkNjFiMWYwYjVlMGEwNzM2OCIsInN1YiI6IjYwZTVjMTdlNGNhNjc2MDA3NTA4Njc3MSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.D_nqH9kd-bhhWzeVsTDPYhHnsUaNAuyAa6YATmKHqsA",ec="https://api.themoviedb.org/3";let qo,Zo;const tc="w185",rc={headers:{"Content-Type":"application/json",Authorization:"Bearer "+Jl}};function It(n,r=tc){return Zo+r+n}function nc(n,r={}){return qo?Zr(n,r):Jo().then(()=>Zr(n,r))}function Zr(n,r={}){return fetch(ec+n,{...rc,...r}).then(e=>e.json())}function Jo(){return Zr("/configuration").then(n=>{var r;return qo=n,Zo=(r=n.images)==null?void 0:r.secure_base_url,n})}const Je={get:nc,loadConfig:Jo};function oc(n,r){return n.length>r?n.substring(0,r-3)+"...":n}function ic(n,r=7){let e=[];for(let t=0,o=n.length;t<o;t+=r)e.push(n.slice(t,t+r));return e}function Et(n=[]){return n.map(r=>({src:It(r.poster_path||r.profile_path),tileSrc:It(r.backdrop_path||r.profile_path,"w300"),backdrop:It(r.backdrop_path,"w1280"),href:"/entity/".concat(r.media_type||"people","/").concat(r.id),shortTitle:oc(r.title||r.name,30),title:r.title||r.name,data:r,entityInfo:{type:r.media_type||"people",id:r.id},heroContent:{title:r.title||r.name,description:r.overview}}))}let Fr=new Map;const tr=new Map;function sc(n){return r=>{const e="/trending/".concat(n,"/week?page=").concat(r);if(Fr.has(e))return Fr.get(e);let t=Je.get(e).then(o=>{let i=o.results.filter(c=>!c.adult),s=(tr.has(n)?tr.get(n):[]).concat(Et(i)),l=ic(s);return l[l.length-1].length<7?tr.set(n,l.pop()):tr.delete(n),l});return Fr.set(e,t),t}}function ac(n){const[r,e]=W([]),[t,o]=W(1),[i,s]=W(!1),[l]=Ze(t,n);return Nr(()=>{const c=l();c&&wi(()=>{c.length===0&&s(!0),e(d=>[...d,...c])})}),{pages:r,page:t,setPage:o,setPages:e,end:i,setEnd:s}}const Ar=1100,lc={...f.typography.display2,width:Ar,height:58,contain:"both"},cc=n=>a(N,Q(n,{style:lc,get children(){return n.children}})),dc={...f.typography.body1,width:Ar,height:72,contain:"both"},hc={fontSize:20,lineHeight:20},uc=n=>a(N,Q(n,{style:dc,get children(){return n.children}}));function fc(n){return[a(Ie,{get when(){return(n==null?void 0:n.rtCrit)&&(n==null?void 0:n.rtCrit)!=="0"},get children(){return[a(z,{src:"https://upload.wikimedia.org/wikipedia/commons/b/b6/Tomato-Torrent-Icon.png",title:"Rotten Tomatoes Rating",style:{width:30,height:30,marginRight:-6}}),a(N,{style:Jr,get children(){return n.rtCrit+"%"}})]}}),a(Ie,{get when(){return(n==null?void 0:n.rtFan)&&(n==null?void 0:n.rtFan)!=="0"},get children(){return[a(z,{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/da/Rotten_Tomatoes_positive_audience.svg/80px-Rotten_Tomatoes_positive_audience.svg.png",title:"Rotten Tomatoes Rating",style:{width:24,height:30,marginRight:-6}}),a(N,{style:Jr,get children(){return n.rtFan+"%"}})]}})]}const gc=n=>(()=>{var r=zt("node");return Eo(Yo,r,()=>[8,15,13,15]),br(r,Q(n,{style:{color:"0x00000099",borderRadius:8,border:{width:3,color:"0xffffffff"}}}),!0),ko(r,a(N,{style:hc,get children(){return n.children}})),r})(),Jr=f.typography.body2,pc=n=>a(z,{style:{display:"flex",flexDirection:"row",gap:12,width:Ar,height:48},get children(){return[a(N,{style:Jr,get children(){return n.metaText}}),a(wr,{get each(){return n.badges},children:r=>a(gc,{y:-5,children:r})}),gt(()=>fc(n.reviews))]}}),ei=n=>a(z,Q(n,{style:{display:"flex",flexDirection:"column",width:Ar,height:160,gap:16},get children(){return[a(cc,{get children(){return n.title}}),a(uc,{get children(){return n.description}}),a(pc,{get metaText(){return n.metaText},get badges(){return n.badges},get reviews(){return n.reviews}})]}}));function mc(n){const r=Math.floor(n/60),e=n%60;return r+"h "+(e<10?"0":"")+e+"m"}function eo(n){return n.split("-")[0]}function xc({type:n,id:r}){return Je.get("/".concat(n,"/").concat(r,"/recommendations")).then(({results:e})=>e.length?Et(e.slice(0,7)):Je.get("/trending/".concat(n,"/week?page=1")).then(({results:t})=>Et(t.slice(0,7))))}function yc({type:n,id:r}){return Je.get("/".concat(n,"/").concat(r,"/credits")).then(({cast:e})=>Et(e.slice(0,7)))}function ti({type:n,id:r}){let e=n==="movie"?{rtCrit:86,rtFan:92}:{};return Je.get("/".concat(n,"/").concat(r)).then(t=>({backgroundImage:It(t.backdrop_path,"original"),heroContent:{title:t.title||t.name,description:t.overview,badges:["HD"],metaText:n==="movie"?mc(t.runtime)+" - "+t.release_date:"".concat(eo(t.first_air_date)," - ").concat(eo(t.last_air_date)),reviews:e},...t}))}const to=()=>{const n=cn(),[r,e]=W(0),[t,o]=W();Ze(t,ti);const[i,s]=W({}),l=pt(),c=ho(()=>0),d=te(()=>ac(sc(n.filter||"all")));Ye(He(nn,y=>{y.backdrop&&Ne(y.backdrop),y.heroContent&&s(y.heroContent)},{defer:!0}));function h(){var b;(b=this.children.selected)==null||b.setFocus(),e((this.y||0)*-1+24);let y=d().pages().length;(y===0||this.parent.selected&&this.parent.selected>=y-2)&&d().setPage(m=>m+1)}function g(){let y=this.children.selected;F(y&&y.href),l(y.href)}return a(Ie,{get when(){return d().pages().length},get children(){return[a(ei,Q({y:360,x:150},i)),a(z,{clipping:!0,get style(){return ue.itemsContainer},get children(){return a(J,{plinko:!0,announce:"All Trending - Week",get y(){return r()},get style(){return ue.Column},get children(){return a(wr,{get each(){return d().pages()},children:(y,b)=>a(pr,{get autofocus(){return c(b())},items:y,onFocus:h,onEnter:g})})}})}})]}})},vc=()=>{const n=pt(),r=ho(()=>0);function e(){let c=this.children.selected;F(c&&c.id),n("/"+c.id)}const t=[{title:"Flex Row",id:"flex",description:"Flex Row Implementation"},{title:"Flex Column",id:"flexcolumn",description:"Flex Column Implementation"},{title:"Flex Row Vertical Align",id:"flexsize",description:"Flex Row Vertical Align Implementation"},{title:"Flex Column Vertical Align",id:"flexcolumnsize",description:"Flex Column Vertical Align Implementation"},{title:"Buttons",id:"buttons",description:"Demo a few buttons"},{title:"Text",id:"text",description:"Text layout with flexbox"},{title:"Create Elements",id:"create",description:"Testing Show + children + inserting text"}];function o(c){const d={width:370,height:320,borderRadius:6,scale:1,color:405488895,transition:{color:!0,scale:!0},focus:{scale:1.1,color:4294967295}},[h,g]=W(4294967295);return a(z,Q(c,{onFocus:()=>g(255),onBlur:()=>g(4294967295),style:d,get children(){return a(z,{x:30,get children(){return[a(N,{y:30,fontSize:84,get color(){return h()},get children(){return c.index}}),a(N,{y:140,fontSize:42,width:340,height:42,contain:"both",get color(){return h()},get children(){return c.title}}),a(N,{y:200,fontSize:28,width:330,contain:"width",get color(){return h()},get children(){return c.description}})]}})}}))}const[i,s]=W(140);function l(c){s(c.selected*-400+140)}return a(z,{colorTop:1147903743,colorBottom:743406847,get children(){return[a(z,{x:120,get children(){return[a(z,{src:"/assets/solidjs.png",width:101,height:90,y:40}),a(N,{fontSize:90,x:110,y:40,children:"Examples"}),a(z,{y:140,height:1,width:1800,color:3906468351})]}}),a(V,{onSelectedChanged:l,onEnter:e,transition:{x:{delay:20,duration:300}},get x(){return i()},y:300,width:4400,get style(){return ue.Row},justifyContent:"flexStart",gap:40,get children(){return a(wr,{each:t,children:(c,d)=>a(o,Q({get autofocus(){return r(d())},get index(){return d()}},c))})}})]}})},wc=()=>{const n={width:900,height:500,y:350,x:150,gap:25,display:"flex",flexDirection:"column",justifyContent:"flexStart",color:M("00000000")},r={width:900,height:36,gap:6,display:"flex",flexDirection:"row",justifyContent:"flexStart",color:M("00000000")},e={fontSize:42},t={width:n.width,fontSize:26,contain:"width"},o={fontSize:26};return tt(()=>{Ne("#000000")}),a(z,{autofocus:!0,style:n,get children(){return[a(N,{style:e,children:"Title of the Page"}),a(N,{style:t,children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer vel tempor tellus. Sed eu leo purus. Vestibulum sollicitudin eget tellus a varius. Phasellus est turpis, volutpat sed blandit sit amet, rutrum sit amet mauris. In dignissim elit orci, a sollicitudin ipsum faucibus et. Quisque vel quam rutrum, faucibus augue sed, scelerisque nunc."}),a(z,{style:r,get children(){return[a(N,{style:o,children:"Subline Text"}),a(z,{width:28,height:28,src:"/assets/rt-popcorn.png"}),a(N,{style:o,children:"More Text"})]}})]}})},bc=()=>{const n={width:900,height:500,y:50,x:150,gap:25,display:"flex",flexDirection:"column",justifyContent:"flexStart",color:M("00000000")},r={width:900,height:36,gap:6,display:"flex",flexDirection:"row",justifyContent:"flexStart",color:M("00000000")},e={fontSize:42},t={fontSize:26};let o,i;tt(()=>{Ne("#000000"),o.animate({x:100},{duration:2e3}).start()});const[s,l]=W(),[c,d]=W();setTimeout(()=>{var A;l("- Inserted -"),(A=i.getChildById("child1"))==null||A.animate({x:600},{duration:2e3}).start()},2e3);const h={width:400,height:300,color:M("#0000ff")},g={color:M("#f54242"),focus:{color:M("#4287f5")}};function y(A){const p=yr(()=>A.children);return a(z,Q(A,{get style(){return[g,A.style,[h]]},get children(){return[a(z,{id:"child1",width:100,height:100,get color(){return M("#ff0000")},y:25,get children(){return[gt(()=>p()),a(z,{id:"subChild",x:150,width:100,height:100,get color(){return M("#00ff00")}}),a(N,{get children(){return A.title}})]}}),a(z,{width:100,height:100,get color(){return M("#ffff00")},y:175,get children(){return p()}})]}}))}const b={borderLeft:{width:8,color:95598118},borderTop:{width:8,color:631422246},borderRight:{width:8,color:95598118},borderBottom:{width:8,color:3316790822}},m={color:M("#cccccc"),focus:{color:M("#000000")}},w={color:M("#ffffff"),focus:{color:M("#f6f6cc")}};function S(A){return console.log("Ref is available: ",A),!0}return a(z,{style:n,get children(){return[a(N,{style:e,children:"Title of the Page"}),a(z,{style:r,get children(){return[a(N,{get children(){return c()}}),a(N,{style:t,get children(){return["Sub ",gt(()=>s())," Text"]}}),a(Ie,{get when(){return s()},get children(){return a(z,{width:28,height:28,src:"/assets/rt-popcorn.png"})}}),a(N,{style:t,children:"More Text"})]}}),a(y,{autofocus:!0,ref(A){var p=i;typeof p=="function"?p(A):i=A},style:[w,m],get children(){return a(N,{children:"Child Test"})}}),a(z,{ref(A){var p=o;typeof p=="function"?p(A):o=A},style:b,width:100,height:100,get color(){return M("#00ff00")},x:900,y:400,get alpha(){return S(o)?1:.5}})]}})},Sc=()=>{function n(o,i){this.states.toggle("disabled")}const r={display:"flex",justifyContent:"flexStart",width:1500,height:300,color:M("00000000"),gap:26,y:400};function e(o){return a(z,Q(o,{forwardStates:!0,get style(){return gr.container},get children(){return a(N,{get style(){return gr.text},get children(){return o.children}})}}))}const t=o=>(()=>{var i=zt("node");return Eo(Yo,i,()=>[10,15]),br(i,Q(o,{get style(){return{color:M("#000000be"),borderRadius:8,border:{width:2,color:M("#ffffff")}}}}),!0),ko(i,a(N,{style:{fontSize:20},get children(){return o.children}})),i})();return[a(V,{x:100,y:200,gap:5,style:r,get children(){return[a(t,{children:"HD"}),a(t,{children:"PG13"}),a(t,{children:"NC17"}),a(N,{fontSize:30,children:"I like bananas"}),a(t,{children:"DOLBY"})]}}),a(V,{x:100,gap:40,style:r,get children(){return[a(e,{autofocus:!0,onEnter:n,children:"TV Shows"}),a(e,{states:{active:!0,disabled:!1},children:"Movies"}),a(e,{states:"active",children:"Sports"}),a(e,{states:"disabled",children:"News"})]}})]},Ac=()=>{const n={display:"flex",justifyContent:"flexStart",width:1600,height:110,color:M("#4dabf5")},r={fontSize:44,marginTop:25,marginBottom:-20,skipFocus:!0};function e(l){return a(z,Q(l,{style:{width:200,height:100,y:5,color:392801023}}))}const[t,o]=W(50);function i(){var l;(l=this.children.selected)==null||l.setFocus(),o(150+(this.y||0)*-1)}tt(()=>{Ne("#333333")});const s=50;return a(J,{x:160,get y(){return t()},gap:30,height:850,get width(){return n.width},get style(){return ue.Column},get children(){return[a(N,{style:r,children:"Flex Start"}),a(V,{gap:s,style:n,onFocus:i,get children(){return[a(e,{autofocus:!0}),a(e,{}),a(e,{}),a(e,{}),a(e,{})]}}),a(N,{style:r,children:"Flex Start - Margin Left"}),a(V,{gap:s,style:n,onFocus:i,get children(){return[a(e,{marginLeft:100}),a(e,{}),a(e,{marginLeft:100}),a(e,{}),a(e,{})]}}),a(N,{style:r,children:"Flex End"}),a(V,{gap:s,justifyContent:"flexEnd",style:n,onFocus:i,get children(){return[a(e,{}),a(e,{}),a(e,{}),a(e,{}),a(e,{})]}}),a(N,{style:r,children:"Flex End - Margin Right"}),a(V,{gap:s,justifyContent:"flexEnd",style:n,onFocus:i,get children(){return[a(e,{}),a(e,{marginRight:100}),a(e,{}),a(e,{}),a(e,{marginRight:100})]}}),a(N,{style:r,children:"Center - No Margin Support"}),a(V,{gap:s,justifyContent:"center",style:n,onFocus:i,get children(){return[a(e,{}),a(e,{}),a(e,{}),a(e,{}),a(e,{})]}}),a(N,{style:r,children:"Space Between - No Margin Support"}),a(V,{gap:s,justifyContent:"spaceBetween",style:n,onFocus:i,get children(){return[a(e,{}),a(e,{}),a(e,{}),a(e,{}),a(e,{})]}}),a(N,{style:r,children:"Space Evenly - No Margin Support"}),a(V,{gap:s,justifyContent:"spaceEvenly",style:n,onFocus:i,get children(){return[a(e,{}),a(e,{}),a(e,{}),a(e,{}),a(e,{})]}})]}})},Cc=()=>{const n={display:"flex",justifyContent:"flexStart",width:1600,height:110,color:M("#4dabf5")},r={fontSize:44,marginTop:25,marginBottom:-20,skipFocus:!0};function e(c){return a(z,Q(c,{style:{width:200,height:100,y:5,color:392801023}}))}function t(){return Math.floor(Math.random()*91)+10}const[o,i]=W(50);function s(){var c;(c=this.children.selected)==null||c.setFocus(),i(150+(this.y||0)*-1)}tt(()=>{Ne("#333333")});const l=50;return a(J,{x:160,get y(){return o()},gap:30,height:850,get width(){return n.width},get style(){return ue.Column},get children(){return[a(N,{style:r,children:"Flex Start - AlignItems: center"}),a(V,{alignItems:"center",gap:l,style:n,onFocus:s,get children(){return[a(e,{autofocus:!0,get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}})]}}),a(N,{style:r,children:"Flex Start - Margin Left - AlignItems: flexStart"}),a(V,{gap:l,alignItems:"flexStart",style:n,onFocus:s,get children(){return[a(e,{marginLeft:100,get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{marginLeft:100,get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}})]}}),a(N,{style:r,children:"Flex End - AlignItems: flexEnd"}),a(V,{gap:l,justifyContent:"flexEnd",alignItems:"flexEnd",style:n,onFocus:s,get children(){return[a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}})]}}),a(N,{style:r,children:"Flex End - Margin Right"}),a(V,{gap:l,justifyContent:"flexEnd",style:n,onFocus:s,get children(){return[a(e,{get height(){return t()}}),a(e,{marginRight:100,get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{marginRight:100,get height(){return t()}})]}}),a(N,{style:r,children:"Center - No Margin Support"}),a(V,{gap:l,justifyContent:"center",style:n,onFocus:s,get children(){return[a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}})]}}),a(N,{style:r,children:"Space Between - No Margin Support"}),a(V,{gap:l,justifyContent:"spaceBetween",style:n,onFocus:s,get children(){return[a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}})]}}),a(N,{style:r,children:"Space Evenly - No Margin Support"}),a(V,{gap:l,justifyContent:"spaceEvenly",style:n,onFocus:s,get children(){return[a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}}),a(e,{get height(){return t()}})]}})]}})},Tc=()=>{const n={display:"flex",justifyContent:"spaceEvenly",width:1920,y:100,height:880,color:M("00000000")},r={display:"flex",flexDirection:"column",justifyContent:"flexStart",color:M("#4dabf5"),height:850,width:80},e={fontSize:44,y:20,x:150};function t(d){const h={width:o(),height:80,x:5,color:M("#1769aa")};return a(z,Q(d,{style:h}))}function o(){return Math.floor(Math.random()*61)+10}const[i,s]=W(50);function l(){var d;(d=this.children.selected)==null||d.setFocus(),s(150+(this.y||0)*-1)}tt(()=>{Ne("#333333")});const c=50;return[a(N,{style:e,children:"Start, MarginTop, End, MarginBottom, Center, Between, Evenly"}),a(V,{gap:c,style:n,onFocus:l,get children(){return[a(J,{gap:30,style:r,alignItems:"center",get children(){return[a(t,{autofocus:!0}),a(t,{}),a(t,{}),a(t,{}),a(t,{})]}}),a(J,{gap:c,style:r,onFocus:l,alignItems:"flexStart",get children(){return[a(t,{marginTop:100}),a(t,{}),a(t,{marginTop:100}),a(t,{}),a(t,{})]}}),a(J,{gap:c,alignItems:"flexEnd",justifyContent:"flexEnd",style:r,onFocus:l,get children(){return[a(t,{}),a(t,{}),a(t,{}),a(t,{}),a(t,{})]}}),a(J,{gap:c,justifyContent:"flexEnd",style:r,onFocus:l,get children(){return[a(t,{}),a(t,{marginBottom:100}),a(t,{}),a(t,{}),a(t,{marginBottom:100})]}}),a(J,{gap:c,justifyContent:"center",style:r,onFocus:l,get children(){return[a(t,{}),a(t,{}),a(t,{}),a(t,{}),a(t,{})]}}),a(J,{gap:c,justifyContent:"spaceBetween",style:r,onFocus:l,get children(){return[a(t,{}),a(t,{}),a(t,{}),a(t,{}),a(t,{})]}}),a(J,{gap:c,justifyContent:"spaceEvenly",style:r,onFocus:l,get children(){return[a(t,{}),a(t,{}),a(t,{}),a(t,{}),a(t,{})]}})]}})]},_c=()=>{const n={display:"flex",justifyContent:"spaceEvenly",width:1920,y:100,height:880,color:M("00000000")},r={display:"flex",flexDirection:"column",justifyContent:"flexStart",color:M("#4dabf5"),height:850,width:60},e={fontSize:44,y:20,x:150};function t(c){const d={width:50,height:80,x:5,color:M("#1769aa")};return a(z,Q(c,{style:d}))}const[o,i]=W(50);function s(){var c;(c=this.children.selected)==null||c.setFocus(),i(150+(this.y||0)*-1)}tt(()=>{Ne("#333333")});const l=50;return[a(N,{style:e,children:"Start, MarginTop, End, MarginBottom, Center, Between, Evenly"}),a(V,{gap:l,style:n,onFocus:s,get children(){return[a(J,{gap:30,style:r,get children(){return[a(t,{autofocus:!0}),a(t,{}),a(t,{}),a(t,{}),a(t,{})]}}),a(J,{gap:l,style:r,onFocus:s,get children(){return[a(t,{marginTop:100}),a(t,{}),a(t,{marginTop:100}),a(t,{}),a(t,{})]}}),a(J,{gap:l,justifyContent:"flexEnd",style:r,onFocus:s,get children(){return[a(t,{}),a(t,{}),a(t,{}),a(t,{}),a(t,{})]}}),a(J,{gap:l,justifyContent:"flexEnd",style:r,onFocus:s,get children(){return[a(t,{}),a(t,{marginBottom:100}),a(t,{}),a(t,{}),a(t,{marginBottom:100})]}}),a(J,{gap:l,justifyContent:"center",style:r,onFocus:s,get children(){return[a(t,{}),a(t,{}),a(t,{}),a(t,{}),a(t,{})]}}),a(J,{gap:l,justifyContent:"spaceBetween",style:r,onFocus:s,get children(){return[a(t,{}),a(t,{}),a(t,{}),a(t,{}),a(t,{})]}}),a(J,{gap:l,justifyContent:"spaceEvenly",style:r,onFocus:s,get children(){return[a(t,{}),a(t,{}),a(t,{}),a(t,{}),a(t,{})]}})]}})]},Rc=()=>{function n(i,s){this.states.toggle("disabled")}const r={display:"flex",justifyContent:"flexStart",width:1500,height:300,color:M("00000000"),gap:26,y:400,x:100},e={width:386,height:136,color:"0x715cabff",focus:{color:"0x5a39a2ff"},disabled:{color:"0x291d43ff"}},t=["RoundedRectangle",{radius:65}];function o(i){return a(z,Q(i,{forwardStates:!0,style:e,shader:t,get children(){return a(N,{style:Gl,get children(){return i.children}})}}))}return a(V,{style:r,get children(){return[a(o,{autofocus:!0,onEnter:n,children:"Focused"}),a(o,{states:{active:!0,disabled:!1},children:"Normal"}),a(o,{states:"disabled",children:"Disabled"})]}})},Ic="https://storage.googleapis.com/shaka-demo-assets/angel-one/dash.mpd";function Bc(){shaka.polyfill.installAll(),shaka.Player.isBrowserSupported()?kc():console.error("Browser not supported!")}async function kc(){const n=document.getElementById("video"),r=new shaka.Player;await r.attach(n),window.player=r,r.addEventListener("error",Ec);try{await r.load(Ic),console.log("The video has now been loaded!")}catch(e){ri(e)}}function Ec(n){ri(n.detail)}function ri(n){console.error("Error code",n.code,"object",n)}function Fc(){const n=document.getElementById("video");return n.hidden=!1,setTimeout(()=>n.play(),50),n.focus(),n}function Nc(){const n=document.getElementById("video");return n.hidden=!0,n.pause(),n}document.addEventListener("DOMContentLoaded",Bc);const Lc=()=>{const n=cn(),r=pt(),[e]=Ze(()=>({...n}),ti),[t]=Ze(()=>({...n}),yc),[o]=Ze(()=>({...n}),xc),[i,s]=W(0);Ye(He(e,A=>{Ne(A.backgroundImage)},{defer:!0}));const l=600,c={color:M("#000000"),alpha:0,width:1900,height:890,x:10,y:l,borderRadius:30};function d(){var A;(A=this.children.selected)==null||A.setFocus(),m.y=l,w.y=l,w.alpha=0}function h(){var A;(A=this.children.selected)==null||A.setFocus(),m.y=200,w.y=160,w.alpha=.9}function g(){let A=this.children.selected;F(A&&A.href),r(A.href)}function y(){Nc(),document.getElementsByTagName("canvas")[0].focus(),zr(S),s(0)}function b(){const A=Fc();zr(A),s(.9)}let m,w,S;return a(Ie,{get when(){return e()},keyed:!0,get children(){return[a(z,{onUp:()=>S.setFocus(),onEscape:y,get children(){return[a(ei,Q({y:360,x:150},()=>e().heroContent)),a(Zl,{autofocus:!0,ref(A){var p=S;typeof p=="function"?p(A):S=A},y:560,x:150,onDown:()=>m.setFocus(),onEnter:b,children:"Watch Trailer"}),a(J,{ref(A){var p=m;typeof p=="function"?p(A):m=A},y:l,x:140,get style(){return ue.Column},zIndex:5,get children(){return a(Ie,{get when(){return gt(()=>!!o())()&&t()},get children(){return[a(N,{skipFocus:!0,get style(){return ue.RowTitle},children:"Recommendations"}),a(pr,{onFocus:d,onEnter:g,get items(){return o()}}),a(N,{skipFocus:!0,get style(){return ue.RowTitle},children:"Cast and Crew"}),a(pr,{onFocus:h,onEnter:g,get items(){return t()}})]}})}}),a(z,{ref(A){var p=w;typeof p=="function"?p(A):w=A},style:c,transition:{alpha:!0,y:!0}})]}}),a(z,{get alpha(){return i()},get color(){return M("#000000")},zIndex:200,transition:{alpha:!0}})]}})};function Mc({id:n}){return Je.get("/person/".concat(n,"/combined_credits")).then(({cast:r})=>Et(r.slice(0,7)))}function zc({id:n}){return Je.get("/person/".concat(n)).then(r=>({backgroundImage:It(r.profile_path,"original"),heroContent:{title:r.title||r.name,description:r.biography},...r}))}const Pc=()=>{const n=cn(),r=pt(),[e]=Ze(()=>({...n}),zc),[t]=Ze(()=>({...n}),Mc);Ye(He(e,s=>{Ne(s.backgroundImage)},{defer:!0}));const o={color:M("#000000"),alpha:.8,width:1540,height:440,x:130,y:180,borderRadius:30};function i(){let s=this.children.selected;F(s&&s.href),r(s.href)}return a(Ie,{get when(){return e()},keyed:!0,get children(){return[a(z,{x:150,y:200,get style(){return ue.Column},zIndex:3,get children(){return[a(N,{get style(){return f.typography.display2},get children(){return e().name}}),a(N,{get style(){return ue.peopleBio},get children(){return e().biography}})]}}),a(z,{style:o}),a(J,{y:670,x:140,get style(){return ue.Column},get children(){return a(Ie,{get when(){return t()},get children(){return[a(N,{skipFocus:!0,get style(){return ue.RowTitle},children:"Credits"}),a(pr,{autofocus:!0,onEnter:i,get items(){return t()}})]}})}})]}})},Dc=()=>(()=>{var n=zt("node");return Qs(n,"style",{width:1920,height:1080,color:868483072}),n})(),Oc=new URL("AppCoreExtensions-tiD9qKNE.js",import.meta.url).href;Se.debug=!1;Se.animationsEnabled=!0;Se.fontSettings.fontFamily="Ubuntu";Se.fontSettings.color=M("#ffffff");Se.fontSettings.fontSize=100;Se.rendererOptions={coreExtensionModule:Oc,fpsUpdateInterval:1e3,enableInspector:!0};js(()=>a(ba,{root:n=>a(Kl,n),get children(){return[a(he,{path:"",component:to}),a(he,{path:"examples",component:vc}),a(he,{path:"browse/:filter",component:to}),a(he,{path:"text",component:wc}),a(he,{path:"buttons",component:Sc}),a(he,{path:"flex",component:Ac}),a(he,{path:"create",component:bc}),a(he,{path:"flexsize",component:Cc}),a(he,{path:"flexcolumnsize",component:Tc}),a(he,{path:"flexcolumn",component:_c}),a(he,{path:"buttonsmaterial",component:Rc}),a(he,{path:"entity/people/:id",component:Pc}),a(he,{path:"entity/:type/:id",component:Lc}),a(he,{path:"*all",component:Dc})]}}));export{Wc as __vite_legacy_guard};
//# sourceMappingURL=index-BZ75HCSO.js.map
